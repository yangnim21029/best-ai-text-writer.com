{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/components/editor/AskAiMark.ts"],"sourcesContent":["import { Mark, mergeAttributes } from '@tiptap/core';\n\nexport interface AskAiMarkOptions {\n    HTMLAttributes: Record<string, any>;\n}\n\ndeclare module '@tiptap/core' {\n    interface Commands<ReturnType> {\n        askai: {\n            setAskAiMark: (attrs: { taskId: string }) => ReturnType;\n            unsetAskAiMark: () => ReturnType;\n        };\n    }\n}\n\nexport const AskAiMark = Mark.create<AskAiMarkOptions>({\n    name: 'askai',\n\n    addOptions() {\n        return {\n            HTMLAttributes: { class: 'ask-ai-highlight' },\n        };\n    },\n\n    addAttributes() {\n        return {\n            taskId: {\n                default: null,\n                parseHTML: element => element.getAttribute('data-ask-ai-task'),\n                renderHTML: attributes => ({\n                    'data-ask-ai-task': attributes.taskId || undefined,\n                }),\n            },\n        };\n    },\n\n    parseHTML() {\n        return [{ tag: 'mark[data-ask-ai-task]' }];\n    },\n\n    renderHTML({ HTMLAttributes }) {\n        return ['mark', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\n    },\n\n    addCommands() {\n        return {\n            setAskAiMark:\n                attrs =>\n                    ({ chain }) =>\n                        chain().setMark(this.name, attrs).run(),\n            unsetAskAiMark:\n                () =>\n                    ({ chain }) =>\n                        chain().unsetMark(this.name).run(),\n        };\n    },\n});\n"],"names":[],"mappings":";;;;AAAA;;AAeO,MAAM,YAAY,yJAAI,CAAC,MAAM,CAAmB;IACnD,MAAM;IAEN;QACI,OAAO;YACH,gBAAgB;gBAAE,OAAO;YAAmB;QAChD;IACJ;IAEA;QACI,OAAO;YACH,QAAQ;gBACJ,SAAS;gBACT,WAAW,CAAA,UAAW,QAAQ,YAAY,CAAC;gBAC3C,YAAY,CAAA,aAAc,CAAC;wBACvB,oBAAoB,WAAW,MAAM,IAAI;oBAC7C,CAAC;YACL;QACJ;IACJ;IAEA;QACI,OAAO;YAAC;gBAAE,KAAK;YAAyB;SAAE;IAC9C;IAEA,YAAW,EAAE,cAAc,EAAE;QACzB,OAAO;YAAC;YAAQ,IAAA,oKAAe,EAAC,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE;YAAiB;SAAE;IACpF;IAEA;QACI,OAAO;YACH,cACI,CAAA,QACI,CAAC,EAAE,KAAK,EAAE,GACN,QAAQ,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,GAAG;YACjD,gBACI,IACI,CAAC,EAAE,KAAK,EAAE,GACN,QAAQ,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG;QAChD;IACJ;AACJ"}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/components/editor/EditorToolbar.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport {\n    Heading2,\n    Heading3,\n    Type,\n    Bold,\n    Italic,\n    Underline,\n    Eraser,\n    List,\n    ListOrdered,\n    Quote,\n    AlignLeft,\n    AlignCenter,\n    AlignRight,\n    Link as LinkIcon,\n    Link2Off,\n    Image as ImageIcon,\n    Loader2,\n    Download,\n    Undo,\n    Redo,\n    ListTodo,\n    GalleryHorizontalEnd,\n    Gem,\n    Sparkles,\n} from 'lucide-react';\nimport { cn } from '../../utils/cn';\n\ninterface EditorToolbarProps {\n    onCommand: (command: string, value?: string) => void;\n    onRemoveBold: () => void;\n    onOpenImageModal: () => void;\n    onDownloadAllImages: () => void;\n    isDownloadingImages: boolean;\n    onToggleKeyPoints: () => void;\n    showKeyPoints: boolean;\n    hasKeyPoints: boolean;\n    onToggleVisualAssets: () => void;\n    showVisualAssets: boolean;\n    onRebrand: () => void;\n    isRebranding: boolean;\n    productName?: string;\n    onToggleMetaPanel: () => void;\n    showMetaPanel: boolean;\n    onUndo: () => void;\n    onRedo: () => void;\n    askAiBadgeSlotRef?: React.RefObject<HTMLDivElement>;\n    extraActions?: React.ReactNode;\n}\n\nconst ToolbarButton = ({\n    icon: Icon,\n    command,\n    value,\n    label,\n    onClick,\n    active,\n    onCommand,\n}: {\n    icon: React.ElementType;\n    command?: string;\n    value?: string;\n    label?: string;\n    onClick?: () => void;\n    active?: boolean;\n    onCommand: (command: string, value?: string) => void;\n}) => (\n    <button\n        type=\"button\"\n        onClick={(e) => {\n            e.preventDefault();\n            if (onClick) onClick();\n            else if (command) onCommand(command, value);\n        }}\n        className={cn(\n            'p-2 rounded transition-colors',\n            active ? 'bg-blue-100 text-blue-700' : 'text-gray-600 hover:bg-gray-100 hover:text-blue-600'\n        )}\n        title={label}\n    >\n        <Icon className=\"w-4 h-4\" />\n    </button>\n);\n\nconst accentBase = 'flex items-center gap-1.5 rounded-md text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-200';\nconst accentDefault = 'bg-indigo-50 text-indigo-700 border border-indigo-200 hover:bg-indigo-100';\nconst accentActive = 'bg-indigo-600 text-white border border-indigo-600 shadow-sm';\nconst accentDisabled = 'bg-indigo-50 text-indigo-300 border border-indigo-100 cursor-not-allowed';\nconst accentGhost = 'text-indigo-700 hover:text-indigo-900 border-none bg-transparent';\nconst accentGhostActive = 'text-indigo-900 border-none bg-transparent';\nconst accentGhostDisabled = 'text-indigo-300 border-none bg-transparent cursor-not-allowed';\n\nconst AccentButton = ({\n    icon: Icon,\n    label,\n    onClick,\n    active,\n    disabled,\n    loading,\n    iconOnly = false,\n    variant = 'solid',\n}: {\n    icon: React.ElementType;\n    label: string;\n    onClick: () => void;\n    active?: boolean;\n    disabled?: boolean;\n    loading?: boolean;\n    iconOnly?: boolean;\n    variant?: 'solid' | 'ghost';\n}) => {\n    const [showTooltip, setShowTooltip] = useState(false);\n    const hoverTimer = useRef<number | null>(null);\n    const delayMs = 2000;\n\n    const handleEnter = () => {\n        if (hoverTimer.current) window.clearTimeout(hoverTimer.current);\n        hoverTimer.current = window.setTimeout(() => setShowTooltip(true), delayMs);\n    };\n\n    const handleLeave = () => {\n        if (hoverTimer.current) window.clearTimeout(hoverTimer.current);\n        hoverTimer.current = null;\n        setShowTooltip(false);\n    };\n\n    useEffect(() => () => {\n        if (hoverTimer.current) window.clearTimeout(hoverTimer.current);\n    }, []);\n\n    return (\n        <div className=\"relative flex items-center\">\n            <button\n                type=\"button\"\n                onClick={(e) => {\n                    e.preventDefault();\n                    if (disabled) return;\n                    onClick();\n                }}\n                onMouseEnter={handleEnter}\n                onMouseLeave={handleLeave}\n                onFocus={handleEnter}\n                onBlur={handleLeave}\n                disabled={disabled || loading}\n                aria-label={label}\n                className={cn(\n                    accentBase,\n                    'justify-center',\n                    iconOnly ? 'px-2.5 py-2' : 'px-3 py-1.5',\n                    variant === 'ghost'\n                        ? disabled || loading\n                            ? accentGhostDisabled\n                            : active\n                                ? accentGhostActive\n                                : accentGhost\n                        : disabled || loading\n                            ? accentDisabled\n                            : active\n                                ? accentActive\n                                : accentDefault\n                )}\n            >\n                <Icon className={cn('w-3.5 h-3.5', loading ? 'animate-spin' : '')} />\n                {!iconOnly && <span>{label}</span>}\n                {iconOnly && <span className=\"sr-only\">{label}</span>}\n            </button>\n            {showTooltip && (\n                <div className=\"absolute left-1/2 top-full mt-2 -translate-x-1/2 whitespace-nowrap rounded bg-gray-900 px-2 py-1 text-[11px] font-medium text-white shadow-lg z-50\">\n                    {label}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport const EditorToolbar: React.FC<EditorToolbarProps> = ({\n    onCommand,\n    onRemoveBold,\n    onOpenImageModal,\n    onDownloadAllImages,\n    isDownloadingImages,\n    onToggleKeyPoints,\n    showKeyPoints,\n    hasKeyPoints,\n    onToggleVisualAssets,\n    showVisualAssets,\n    onRebrand,\n    isRebranding,\n    productName,\n    onToggleMetaPanel,\n    showMetaPanel,\n    onUndo,\n    onRedo,\n    askAiBadgeSlotRef,\n    extraActions,\n}) => {\n    return (\n        <div className=\"flex items-center gap-2 p-2 border-b border-gray-200 bg-gray-50 flex-shrink-0 z-20 overflow-x-auto whitespace-nowrap [scrollbar-width:thin] custom-scrollbar\">\n            <div className=\"flex items-center gap-2 pr-3 mr-1 border-r border-gray-300 flex-shrink-0\">\n                {hasKeyPoints && (\n                    <AccentButton\n                        icon={ListTodo}\n                        onClick={onToggleKeyPoints}\n                        label=\"Key Points\"\n                        active={showKeyPoints}\n                        iconOnly\n                        variant=\"ghost\"\n                    />\n                )}\n                <AccentButton\n                    icon={GalleryHorizontalEnd}\n                    onClick={onToggleVisualAssets}\n                    label=\"Visual Assets\"\n                    active={showVisualAssets}\n                    iconOnly\n                    variant=\"ghost\"\n                />\n                <AccentButton\n                    icon={ImageIcon}\n                    onClick={onOpenImageModal}\n                    label=\"AI Image\"\n                    iconOnly\n                    variant=\"ghost\"\n                />\n                <AccentButton\n                    icon={Gem}\n                    onClick={onRebrand}\n                    label=\"Rebrand\"\n                    disabled={isRebranding || !productName}\n                    loading={isRebranding}\n                    iconOnly\n                    variant=\"ghost\"\n                />\n                <AccentButton\n                    icon={Sparkles}\n                    onClick={onToggleMetaPanel}\n                    label=\"SEO Meta\"\n                    active={showMetaPanel}\n                    iconOnly\n                    variant=\"ghost\"\n                />\n                <div ref={askAiBadgeSlotRef} className=\"flex items-center pl-1\" />\n            </div>\n\n            <div className=\"flex items-center gap-1 flex-nowrap flex-shrink-0\">\n                <div className=\"flex items-center space-x-1 pr-2 border-r border-gray-300 flex-shrink-0\">\n                    <ToolbarButton icon={Heading2} command=\"formatBlock\" value=\"<h2>\" label=\"Heading 2\" onCommand={onCommand} />\n                    <ToolbarButton icon={Heading3} command=\"formatBlock\" value=\"<h3>\" label=\"Heading 3\" onCommand={onCommand} />\n                    <ToolbarButton icon={Type} command=\"formatBlock\" value=\"<p>\" label=\"Paragraph\" onCommand={onCommand} />\n                </div>\n\n                <div className=\"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0\">\n                    <ToolbarButton icon={Bold} command=\"bold\" label=\"Bold\" onCommand={onCommand} />\n                    <ToolbarButton icon={Italic} command=\"italic\" label=\"Italic\" onCommand={onCommand} />\n                    <ToolbarButton icon={Underline} command=\"underline\" label=\"Underline\" onCommand={onCommand} />\n                    <ToolbarButton icon={Eraser} onClick={onRemoveBold} label=\"Remove All Bold Formatting & Quotes\" onCommand={onCommand} />\n                </div>\n\n                <div className=\"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0\">\n                    <ToolbarButton icon={List} command=\"insertUnorderedList\" label=\"Bullet List\" onCommand={onCommand} />\n                    <ToolbarButton icon={ListOrdered} command=\"insertOrderedList\" label=\"Numbered List\" onCommand={onCommand} />\n                    <ToolbarButton icon={Quote} command=\"formatBlock\" value=\"<blockquote>\" label=\"Quote\" onCommand={onCommand} />\n                </div>\n\n                <div className=\"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0\">\n                    <ToolbarButton icon={AlignLeft} command=\"alignLeft\" label=\"Align Left\" onCommand={onCommand} />\n                    <ToolbarButton icon={AlignCenter} command=\"alignCenter\" label=\"Align Center\" onCommand={onCommand} />\n                    <ToolbarButton icon={AlignRight} command=\"alignRight\" label=\"Align Right\" onCommand={onCommand} />\n                </div>\n\n                <div className=\"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0\">\n                    <ToolbarButton icon={LinkIcon} onClick={() => onCommand('link')} label=\"Insert Link\" onCommand={onCommand} />\n                    <ToolbarButton icon={Link2Off} onClick={() => onCommand('unlink')} label=\"Remove Link\" onCommand={onCommand} />\n                </div>\n\n                <div className=\"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0\">\n                    <ToolbarButton\n                        icon={isDownloadingImages ? Loader2 : Download}\n                        onClick={onDownloadAllImages}\n                        label=\"Download all images in editor\"\n                        onCommand={onCommand}\n                    />\n                </div>\n\n                <div className=\"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0\">\n                    <button\n                        type=\"button\"\n                        onClick={(e) => {\n                            e.preventDefault();\n                            onUndo();\n                        }}\n                        className=\"p-2 text-gray-600 hover:bg-gray-100 hover:text-blue-600 rounded transition-colors\"\n                        title=\"Undo\"\n                    >\n                        <Undo className=\"w-4 h-4\" />\n                    </button>\n                    <button\n                        type=\"button\"\n                        onClick={(e) => {\n                            e.preventDefault();\n                            onRedo();\n                        }}\n                        className=\"p-2 text-gray-600 hover:bg-gray-100 hover:text-blue-600 rounded transition-colors\"\n                        title=\"Redo\"\n                    >\n                        <Redo className=\"w-4 h-4\" />\n                    </button>\n                </div>\n            </div>\n            {extraActions && (\n                <div className=\"flex items-center gap-2 pl-3 ml-auto flex-shrink-0\">\n                    {extraActions}\n                </div>\n            )}\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 569, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/components/editor/KeyPointsPanel.tsx"],"sourcesContent":["import React from 'react';\nimport { ListTodo, Gem } from 'lucide-react';\nimport { TargetAudience } from '../../types';\n\ntype ChecklistType = 'general' | 'brand';\n\nconst ChecklistItem: React.FC<{\n    point: string;\n    type: ChecklistType;\n    isChecked: boolean;\n    isProcessing: boolean;\n    onToggle: (point: string) => void;\n    onRefine: (point: string) => void;\n    useTiptap: boolean;\n    isTiptapReady: boolean;\n}> = React.memo(({\n    point,\n    type,\n    isChecked,\n    isProcessing,\n    onToggle,\n    onRefine,\n    useTiptap,\n    isTiptapReady,\n}) => {\n    const handleClickRefine = () => {\n        if (useTiptap && !isTiptapReady) {\n            alert(\"Editor not ready.\");\n            return;\n        }\n        onRefine(point);\n    };\n\n    return (\n        <div className={`p-2 rounded-lg text-xs transition-all border group relative ${isChecked ? 'bg-orange-100/50 border-orange-200 text-gray-500' : 'bg-white border-orange-100 text-gray-800 hover:border-orange-300 hover:shadow-sm'}`}>\n            <div className=\"flex items-start gap-2 pr-6 cursor-pointer\" onClick={() => onToggle(point)}>\n                {isChecked ? <span className=\"w-4 h-4 text-orange-500 flex-shrink-0\">☑</span> : <span className=\"w-4 h-4 text-orange-300 flex-shrink-0\">☐</span>}\n                <div className=\"flex-1\">\n                    {type === 'brand' && <span className=\"text-[10px] font-bold text-purple-600 bg-purple-50 px-1 rounded mr-1\">USP</span>}\n                    <span className={isChecked ? 'line-through opacity-75' : ''}>{point}</span>\n                </div>\n            </div>\n            \n            {!isChecked && (\n                <button \n                    onClick={(e) => { e.stopPropagation(); handleClickRefine(); }}\n                    disabled={isProcessing}\n                    className=\"absolute right-1 top-1 p-1.5 bg-white border border-purple-200 text-purple-600 rounded-md hover:bg-purple-50 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity\"\n                    title=\"Auto-insert this point into best paragraph\"\n                >\n                    {isProcessing ? <span className=\"w-3 h-3 inline-block animate-spin\">⏳</span> : <span className=\"w-3 h-3 inline-block\">✨</span>}\n                </button>\n            )}\n        </div>\n    );\n});\n\ninterface KeyPointsPanelProps {\n    brandExclusivePoints: string[];\n    keyPoints: string[];\n    checkedPoints: string[];\n    refiningPoint: string | null;\n    onTogglePoint?: (point: string) => void;\n    onRefinePoint?: (point: string) => void;\n    useTiptap: boolean;\n    isTiptapReady: boolean;\n    uniqueCoveredCount: number;\n    totalPoints: number;\n    targetAudience?: TargetAudience;\n}\n\nexport const KeyPointsPanel: React.FC<KeyPointsPanelProps> = ({\n    brandExclusivePoints,\n    keyPoints,\n    checkedPoints,\n    refiningPoint,\n    onTogglePoint,\n    onRefinePoint,\n    useTiptap,\n    isTiptapReady,\n    uniqueCoveredCount,\n    totalPoints,\n}) => {\n    return (\n        <div className=\"w-72 bg-orange-50/50 border-l border-orange-100 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-200\">\n            <div className=\"flex justify-between items-center mb-4\">\n                <h4 className=\"text-xs font-bold uppercase text-orange-600 flex items-center gap-2\">\n                    <ListTodo className=\"w-4 h-4\" />\n                    Key Points\n                </h4>\n                <span className=\"text-[10px] font-bold text-gray-400\">\n                    {uniqueCoveredCount}/{totalPoints}\n                </span>\n            </div>\n            \n            <div className=\"space-y-4\">\n                {brandExclusivePoints.length > 0 && (\n                    <div className=\"space-y-2\">\n                        <h5 className=\"text-[10px] font-bold text-purple-400 uppercase tracking-wider flex items-center gap-1\">\n                            <Gem className=\"w-3 h-3\" /> Brand USP\n                        </h5>\n                        <div className=\"space-y-1\">\n                            {brandExclusivePoints.map((point, i) => (\n                                <ChecklistItem \n                                    key={`brand-${i}`} \n                                    point={point} \n                                    type=\"brand\" \n                                    isChecked={checkedPoints.includes(point)}\n                                    isProcessing={refiningPoint === point}\n                                    onToggle={onTogglePoint || (() => {})}\n                                    onRefine={onRefinePoint || (() => {})}\n                                    useTiptap={useTiptap}\n                                    isTiptapReady={isTiptapReady}\n                                />\n                            ))}\n                        </div>\n                    </div>\n                )}\n                \n                {keyPoints.length > 0 && (\n                    <div className=\"space-y-2\">\n                        <h5 className=\"text-[10px] font-bold text-orange-400 uppercase tracking-wider\">General Knowledge</h5>\n                        <div className=\"space-y-1\">\n                            {keyPoints.map((point, i) => (\n                                <ChecklistItem \n                                    key={`gen-${i}`} \n                                    point={point} \n                                    type=\"general\" \n                                    isChecked={checkedPoints.includes(point)}\n                                    isProcessing={refiningPoint === point}\n                                    onToggle={onTogglePoint || (() => {})}\n                                    onRefine={onRefinePoint || (() => {})}\n                                    useTiptap={useTiptap}\n                                    isTiptapReady={isTiptapReady}\n                                />\n                            ))}\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;;;;AAKA,MAAM,8BASD,gNAAK,CAAC,IAAI,CAAC,CAAC,EACb,KAAK,EACL,IAAI,EACJ,SAAS,EACT,YAAY,EACZ,QAAQ,EACR,QAAQ,EACR,SAAS,EACT,aAAa,EAChB;IACG,MAAM,oBAAoB;QACtB,IAAI,aAAa,CAAC,eAAe;YAC7B,MAAM;YACN;QACJ;QACA,SAAS;IACb;IAEA,qBACI,8OAAC;QAAI,WAAW,CAAC,4DAA4D,EAAE,YAAY,qDAAqD,oFAAoF;;0BAChO,8OAAC;gBAAI,WAAU;gBAA6C,SAAS,IAAM,SAAS;;oBAC/E,0BAAY,8OAAC;wBAAK,WAAU;kCAAwC;;;;;iFAAW,8OAAC;wBAAK,WAAU;kCAAwC;;;;;;kCACxI,8OAAC;wBAAI,WAAU;;4BACV,SAAS,yBAAW,8OAAC;gCAAK,WAAU;0CAAuE;;;;;;0CAC5G,8OAAC;gCAAK,WAAW,YAAY,4BAA4B;0CAAK;;;;;;;;;;;;;;;;;;YAIrE,CAAC,2BACE,8OAAC;gBACG,SAAS,CAAC;oBAAQ,EAAE,eAAe;oBAAI;gBAAqB;gBAC5D,UAAU;gBACV,WAAU;gBACV,OAAM;0BAEL,6BAAe,8OAAC;oBAAK,WAAU;8BAAoC;;;;;6EAAW,8OAAC;oBAAK,WAAU;8BAAuB;;;;;;;;;;;;;;;;;AAK1I;AAgBO,MAAM,iBAAgD,CAAC,EAC1D,oBAAoB,EACpB,SAAS,EACT,aAAa,EACb,aAAa,EACb,aAAa,EACb,aAAa,EACb,SAAS,EACT,aAAa,EACb,kBAAkB,EAClB,WAAW,EACd;IACG,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;;0CACV,8OAAC,0NAAQ;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAGpC,8OAAC;wBAAK,WAAU;;4BACX;4BAAmB;4BAAE;;;;;;;;;;;;;0BAI9B,8OAAC;gBAAI,WAAU;;oBACV,qBAAqB,MAAM,GAAG,mBAC3B,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;;kDACV,8OAAC,uMAAG;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAE/B,8OAAC;gCAAI,WAAU;0CACV,qBAAqB,GAAG,CAAC,CAAC,OAAO,kBAC9B,8OAAC;wCAEG,OAAO;wCACP,MAAK;wCACL,WAAW,cAAc,QAAQ,CAAC;wCAClC,cAAc,kBAAkB;wCAChC,UAAU,iBAAiB,CAAC,KAAO,CAAC;wCACpC,UAAU,iBAAiB,CAAC,KAAO,CAAC;wCACpC,WAAW;wCACX,eAAe;uCARV,CAAC,MAAM,EAAE,GAAG;;;;;;;;;;;;;;;;oBAepC,UAAU,MAAM,GAAG,mBAChB,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAG,WAAU;0CAAiE;;;;;;0CAC/E,8OAAC;gCAAI,WAAU;0CACV,UAAU,GAAG,CAAC,CAAC,OAAO,kBACnB,8OAAC;wCAEG,OAAO;wCACP,MAAK;wCACL,WAAW,cAAc,QAAQ,CAAC;wCAClC,cAAc,kBAAkB;wCAChC,UAAU,iBAAiB,CAAC,KAAO,CAAC;wCACpC,UAAU,iBAAiB,CAAC,KAAO,CAAC;wCACpC,WAAW;wCACX,eAAe;uCARV,CAAC,IAAI,EAAE,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBnD"}},
    {"offset": {"line": 823, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/components/editor/VisualAssetsPanel.tsx"],"sourcesContent":["import React from 'react';\nimport { GalleryHorizontalEnd, Sparkles, Loader2, Image as ImageIcon, PlayCircle, RefreshCw, Map, ArrowRight, MousePointerClick, Eye } from 'lucide-react';\nimport { ImageAssetPlan, ScrapedImage } from '../../types';\n\ninterface VisualAssetsPanelProps {\n    scrapedImages: ScrapedImage[];\n    onToggleImage: (image: ScrapedImage) => void;\n    imagePlans: ImageAssetPlan[];\n    isPlanning: boolean;\n    isBatchProcessing: boolean;\n    onBatchProcess: () => void;\n    onAutoPlan: () => void;\n    onGenerateSinglePlan: (plan: ImageAssetPlan) => void;\n    onUpdatePlanPrompt: (planId: string, prompt: string) => void;\n    onInjectImage: (plan: ImageAssetPlan, mode: 'auto' | 'cursor') => void;\n    useTiptap: boolean;\n    isTiptapReady: boolean;\n}\n\nexport const VisualAssetsPanel: React.FC<VisualAssetsPanelProps> = ({\n    scrapedImages,\n    onToggleImage,\n    imagePlans,\n    isPlanning,\n    isBatchProcessing,\n    onBatchProcess,\n    onAutoPlan,\n    onGenerateSinglePlan,\n    onUpdatePlanPrompt,\n    onInjectImage,\n    useTiptap,\n    isTiptapReady,\n}) => {\n    const handleAutoPlan = () => {\n        if (useTiptap && !isTiptapReady) {\n            alert(\"Editor not ready.\");\n            return;\n        }\n        onAutoPlan();\n    };\n\n    return (\n        <div className=\"w-80 bg-blue-50/50 border-l border-blue-100 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-200 flex flex-col\">\n            <div className=\"flex justify-between items-center mb-4\">\n                <h4 className=\"text-xs font-bold uppercase text-blue-600 flex items-center gap-2\">\n                    <GalleryHorizontalEnd className=\"w-4 h-4\" />\n                    Visual Assets\n                </h4>\n                <button \n                    onClick={handleAutoPlan}\n                    disabled={isPlanning || (useTiptap && !isTiptapReady)}\n                    className=\"text-[10px] bg-white border border-blue-200 text-blue-600 px-2 py-1 rounded hover:bg-blue-50 transition-colors flex items-center gap-1\"\n                    title=\"讓 AI 根據內容自動規劃插圖位置與提示\"\n                >\n                    {isPlanning ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : <Sparkles className=\"w-3 h-3\" />}\n                    Auto-Plan\n                </button>\n            </div>\n\n            {scrapedImages.length > 0 && (\n                <div className=\"mb-4 bg-white p-2 rounded-lg border border-gray-200\">\n                    <h5 className=\"text-[10px] font-bold text-gray-400 uppercase mb-2\">Source References</h5>\n                    <div className=\"grid grid-cols-4 gap-2\">\n                        {scrapedImages.map((img, idx) => {\n                            // Add index to avoid duplicate keys when URLs repeat across scraped images\n                            const key = img.id || `${img.url || img.altText || 'image'}-${idx}`;\n                            return (\n                                <div\n                                    key={key}\n                                    className={`relative aspect-square rounded overflow-hidden group cursor-pointer border transition-all ${img.ignored ? 'border-gray-300' : 'border-gray-200 bg-white'} hover:border-blue-200`}\n                                    title={img.altText}\n                                    onClick={() => onToggleImage({ ...img, ignored: !img.ignored })}\n                                >\n                                    <img src={img.url} className={`w-full h-full object-cover transition ${img.ignored ? 'grayscale opacity-60' : ''}`} />\n                                    {img.aiDescription && <div className=\"absolute top-0 right-0 w-2 h-2 bg-green-500 rounded-full m-1 border border-white\"></div>}\n                                    {img.ignored && <div className=\"absolute inset-0 bg-black/30\" />}\n                                </div>\n                            );\n                        })}\n                    </div>\n                </div>\n            )}\n            \n            {imagePlans.length === 0 ? (\n                <div className=\"flex-1 flex flex-col items-center justify-center text-gray-400 text-center space-y-2 opacity-60\">\n                    <ImageIcon className=\"w-8 h-8\" />\n                    <p className=\"text-xs\">No visual assets planned.</p>\n                    <p className=\"text-[10px]\">Click \"Auto-Plan\" to generate ideas based on your content.</p>\n                </div>\n            ) : (\n                <div className=\"space-y-3 pb-20\">\n                        <div className=\"flex justify-between items-center bg-blue-100/50 p-2 rounded-md\">\n                            <span className=\"text-[10px] font-bold text-blue-700\">{imagePlans.filter(p => p.status === 'done').length}/{imagePlans.length} Ready</span>\n                            <button \n                                onClick={onBatchProcess}\n                                disabled={isBatchProcessing}\n                                className=\"text-[10px] bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 flex items-center gap-1 disabled:opacity-50\"\n                                title=\"一次生成所有尚未產出的圖像\"\n                            >\n                                {isBatchProcessing ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : <PlayCircle className=\"w-3 h-3\" />}\n                                Generate All\n                            </button>\n                        </div>\n\n                        {imagePlans.map((plan) => (\n                            <div key={plan.id} className=\"bg-white p-3 rounded-lg border border-gray-200 shadow-sm space-y-2 group\">\n                                <div className=\"flex justify-between items-start gap-2\">\n                                    <div className=\"flex-1\">\n                                        <span className=\"text-[9px] font-bold text-gray-400 uppercase\">Prompt</span>\n                                        <p \n                                            className=\"text-[10px] text-gray-600 leading-snug line-clamp-3 hover:line-clamp-none cursor-text focus:outline-none focus:bg-gray-50 rounded\"\n                                            contentEditable\n                                            onBlur={(e) => onUpdatePlanPrompt(plan.id, e.currentTarget.innerText)}\n                                            dangerouslySetInnerHTML={{ __html: plan.generatedPrompt }}\n                                        />\n                                    </div>\n                                    <div className=\"flex flex-col gap-1\">\n                                            {plan.status === 'done' ? (\n                                                <div className=\"w-16 h-16 rounded bg-gray-100 overflow-hidden border border-gray-200 relative group/img\">\n                                                    <img src={plan.url} className=\"w-full h-full object-cover\" />\n                                                    <div className=\"absolute inset-0 bg-black/40 opacity-0 group-hover/img:opacity-100 transition-opacity flex items-center justify-center cursor-pointer\">\n                                                        <Eye className=\"w-4 h-4 text-white\" />\n                                                    </div>\n                                                </div>\n                                            ) : (\n                                                <button\n                                                onClick={() => onGenerateSinglePlan(plan)}\n                                                disabled={plan.status === 'generating'}\n                                                className=\"p-1.5 bg-gray-50 hover:bg-blue-50 text-gray-500 hover:text-blue-600 rounded border border-gray-200 transition-colors\"\n                                                title=\"生成此圖像\"\n                                            >\n                                                {plan.status === 'generating' ? <Loader2 className=\"w-4 h-4 animate-spin text-blue-500\" /> : <RefreshCw className=\"w-4 h-4\" />}\n                                            </button>\n                                            )}\n                                    </div>\n                                </div>\n\n                                <div className=\"bg-gray-50 p-1.5 rounded text-[10px] text-gray-500 flex items-center gap-1.5\">\n                                    <Map className=\"w-3 h-3 text-gray-400\" />\n                                    <span className=\"truncate flex-1\" title={plan.insertAfter || 'No anchor detected'}>\n                                        After: \"{(plan.insertAfter || 'N/A').substring(0, 25)}...\"\n                                    </span>\n                                </div>\n\n                                {plan.status === 'done' && (\n                                    <div className=\"flex gap-1 pt-1\">\n                                            <button \n                                                onClick={() => onInjectImage(plan, 'auto')}\n                                                className=\"flex-1 py-1.5 bg-green-50 text-green-700 border border-green-200 rounded text-[10px] font-bold hover:bg-green-100 transition-colors flex items-center justify-center gap-1\"\n                                            >\n                                                <ArrowRight className=\"w-3 h-3\" /> Insert Auto\n                                            </button>\n                                            <button \n                                                onClick={() => onInjectImage(plan, 'cursor')}\n                                                className=\"flex-1 py-1.5 bg-blue-50 text-blue-700 border border-blue-200 rounded text-[10px] font-bold hover:bg-blue-100 transition-colors flex items-center justify-center gap-1\"\n                                                title=\"Insert at current cursor position\"\n                                            >\n                                                <MousePointerClick className=\"w-3 h-3\" /> Cursor\n                                            </button>\n                                    </div>\n                                )}\n                            </div>\n                        ))}\n                </div>\n            )}\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1248, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/components/editor/MetaPanel.tsx"],"sourcesContent":["import React from 'react';\nimport { Sparkles, X } from 'lucide-react';\n\ninterface MetaPanelProps {\n    metaTitle: string;\n    metaDescription: string;\n    urlSlug: string;\n    isMetaLoading: boolean;\n    onGenerateMeta: () => void;\n    onClose: () => void;\n    onMetaTitleChange: (value: string) => void;\n    onMetaDescriptionChange: (value: string) => void;\n    onUrlSlugChange: (value: string) => void;\n}\n\nexport const MetaPanel: React.FC<MetaPanelProps> = ({\n    metaTitle,\n    metaDescription,\n    urlSlug,\n    isMetaLoading,\n    onGenerateMeta,\n    onClose,\n    onMetaTitleChange,\n    onMetaDescriptionChange,\n    onUrlSlugChange,\n}) => {\n    return (\n        <div className=\"absolute z-30 right-4 top-28 w-full max-w-xl bg-white border border-gray-200 shadow-2xl rounded-xl p-4 space-y-3 animate-in fade-in duration-150\">\n            <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                    <Sparkles className=\"w-4 h-4 text-purple-500\" />\n                    <span className=\"text-xs font-bold text-gray-700 uppercase\">SEO Meta</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                    <button\n                        type=\"button\"\n                        onClick={onGenerateMeta}\n                        className=\"flex items-center gap-1 px-3 py-1.5 text-xs font-semibold text-purple-700 bg-white border border-purple-200 rounded-md hover:bg-purple-50 transition-colors disabled:opacity-60\"\n                        disabled={isMetaLoading}\n                    >\n                        {isMetaLoading ? <Sparkles className=\"w-3 h-3 animate-spin\" /> : <Sparkles className=\"w-3 h-3\" />}\n                        <span>Auto-generate</span>\n                    </button>\n                    <button type=\"button\" onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">\n                        <X className=\"w-4 h-4\" />\n                    </button>\n                </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                <div className=\"md:col-span-1\">\n                    <label className=\"text-[10px] font-bold uppercase text-gray-500\">Meta Title</label>\n                    <input\n                        value={metaTitle}\n                        onChange={(e) => onMetaTitleChange(e.target.value)}\n                        className=\"w-full mt-1 px-3 py-2 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white\"\n                        placeholder=\"e.g. AI Text Writer Pro — 高質內容生成\"\n                    />\n                </div>\n                <div className=\"md:col-span-1\">\n                    <label className=\"text-[10px] font-bold uppercase text-gray-500\">Meta Description</label>\n                    <textarea\n                        value={metaDescription}\n                        onChange={(e) => onMetaDescriptionChange(e.target.value)}\n                        className=\"w-full mt-1 px-3 py-2 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white h-20 resize-none\"\n                        placeholder=\"140-160 chars summary\"\n                    />\n                </div>\n            </div>\n\n            <div>\n                <label className=\"text-[10px] font-bold uppercase text-gray-500\">URL Slug</label>\n                <input\n                    value={urlSlug}\n                    onChange={(e) => onUrlSlugChange(e.target.value)}\n                    className=\"w-full mt-1 px-3 py-2 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white\"\n                    placeholder=\"your-article-slug\"\n                />\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AACA;AAAA;;;AAcO,MAAM,YAAsC,CAAC,EAChD,SAAS,EACT,eAAe,EACf,OAAO,EACP,aAAa,EACb,cAAc,EACd,OAAO,EACP,iBAAiB,EACjB,uBAAuB,EACvB,eAAe,EAClB;IACG,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,sNAAQ;gCAAC,WAAU;;;;;;0CACpB,8OAAC;gCAAK,WAAU;0CAA4C;;;;;;;;;;;;kCAEhE,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCACG,MAAK;gCACL,SAAS;gCACT,WAAU;gCACV,UAAU;;oCAET,8BAAgB,8OAAC,sNAAQ;wCAAC,WAAU;;;;;iGAA4B,8OAAC,sNAAQ;wCAAC,WAAU;;;;;;kDACrF,8OAAC;kDAAK;;;;;;;;;;;;0CAEV,8OAAC;gCAAO,MAAK;gCAAS,SAAS;gCAAS,WAAU;0CAC9C,cAAA,8OAAC,iMAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAKzB,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAM,WAAU;0CAAgD;;;;;;0CACjE,8OAAC;gCACG,OAAO;gCACP,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;gCACjD,WAAU;gCACV,aAAY;;;;;;;;;;;;kCAGpB,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAM,WAAU;0CAAgD;;;;;;0CACjE,8OAAC;gCACG,OAAO;gCACP,UAAU,CAAC,IAAM,wBAAwB,EAAE,MAAM,CAAC,KAAK;gCACvD,WAAU;gCACV,aAAY;;;;;;;;;;;;;;;;;;0BAKxB,8OAAC;;kCACG,8OAAC;wBAAM,WAAU;kCAAgD;;;;;;kCACjE,8OAAC;wBACG,OAAO;wBACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;wBAC/C,WAAU;wBACV,aAAY;;;;;;;;;;;;;;;;;;AAKhC"}},
    {"offset": {"line": 1451, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/components/editor/ImageGeneratorModal.tsx"],"sourcesContent":["import React from 'react';\nimport { Image as ImageIcon, Loader2, X } from 'lucide-react';\n\ninterface ImageGeneratorModalProps {\n    show: boolean;\n    imagePrompt: string;\n    onPromptChange: (value: string) => void;\n    onSubmit: () => void;\n    isLoading: boolean;\n    onClose: () => void;\n}\n\nexport const ImageGeneratorModal: React.FC<ImageGeneratorModalProps> = ({\n    show,\n    imagePrompt,\n    onPromptChange,\n    onSubmit,\n    isLoading,\n    onClose,\n}) => {\n    if (!show) return null;\n\n    return (\n        <div\n            className=\"absolute z-50 bg-white rounded-lg shadow-2xl border border-gray-200 w-96 p-4 animate-in fade-in zoom-in-95 duration-200\"\n            style={{ top: 50, right: 10 }}\n        >\n            <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"flex items-center space-x-2 text-pink-600\">\n                    <ImageIcon className=\"w-4 h-4\" />\n                    <span className=\"text-xs font-bold uppercase tracking-wide\">\n                        AI Image Generator (Nano Banana)\n                    </span>\n                </div>\n                <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">\n                    <X className=\"w-4 h-4\" />\n                </button>\n            </div>\n\n            <form\n                onSubmit={(e) => {\n                    e.preventDefault();\n                    onSubmit();\n                }}\n                className=\"space-y-3\"\n            >\n                <div>\n                    <label className=\"text-[10px] font-bold text-gray-500 uppercase\">Image Prompt</label>\n                    <textarea\n                        value={imagePrompt}\n                        onChange={(e) => onPromptChange(e.target.value)}\n                        className=\"w-full h-24 p-3 bg-gray-50 rounded-lg border border-gray-200 text-sm focus:border-pink-500 focus:ring-1 focus:ring-pink-500 outline-none resize-none mt-1\"\n                        placeholder=\"Describe the image...\"\n                    />\n                </div>\n\n                <button\n                    type=\"submit\"\n                    disabled={isLoading || !imagePrompt}\n                    className=\"w-full py-2 bg-pink-600 text-white rounded-lg text-sm font-semibold hover:bg-pink-700 disabled:opacity-50 flex items-center justify-center gap-2\"\n                >\n                    {isLoading ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <ImageIcon className=\"w-4 h-4\" />}\n                    Generate Image\n                </button>\n            </form>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;;;AAWO,MAAM,sBAA0D,CAAC,EACpE,IAAI,EACJ,WAAW,EACX,cAAc,EACd,QAAQ,EACR,SAAS,EACT,OAAO,EACV;IACG,IAAI,CAAC,MAAM,OAAO;IAElB,qBACI,8OAAC;QACG,WAAU;QACV,OAAO;YAAE,KAAK;YAAI,OAAO;QAAG;;0BAE5B,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,6MAAS;gCAAC,WAAU;;;;;;0CACrB,8OAAC;gCAAK,WAAU;0CAA4C;;;;;;;;;;;;kCAIhE,8OAAC;wBAAO,SAAS;wBAAS,WAAU;kCAChC,cAAA,8OAAC,iMAAC;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAIrB,8OAAC;gBACG,UAAU,CAAC;oBACP,EAAE,cAAc;oBAChB;gBACJ;gBACA,WAAU;;kCAEV,8OAAC;;0CACG,8OAAC;gCAAM,WAAU;0CAAgD;;;;;;0CACjE,8OAAC;gCACG,OAAO;gCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gCAC9C,WAAU;gCACV,aAAY;;;;;;;;;;;;kCAIpB,8OAAC;wBACG,MAAK;wBACL,UAAU,aAAa,CAAC;wBACxB,WAAU;;4BAET,0BAAY,8OAAC,4NAAO;gCAAC,WAAU;;;;;yFAA4B,8OAAC,6MAAS;gCAAC,WAAU;;;;;;4BAAa;;;;;;;;;;;;;;;;;;;AAMlH"}},
    {"offset": {"line": 1593, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/components/editor/EditorContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useMemo } from 'react';\nimport { useGenerationStore } from '@/store/useGenerationStore';\nimport { useAnalysisStore } from '@/store/useAnalysisStore';\nimport { useAppStore } from '@/store/useAppStore';\nimport { CostBreakdown, TokenUsage } from '../../types';\n\ninterface EditorContextValue {\n    content: string;\n    setContent: (value: string) => void;\n    status: string;\n    generationStep: string;\n    error: string | null;\n    targetAudience: any;\n    keyPoints: string[];\n    brandExclusivePoints: string[];\n    checkedPoints: string[];\n    scrapedImages: any[];\n    visualStyle: string;\n    productBrief: any;\n    displayScale: number;\n    articleTitle: string;\n    outlineSections: string[];\n    onTogglePoint: (point: string) => void;\n    onRemoveScrapedImage: (img: any) => void;\n    onAddCost: (cost: CostBreakdown, usage: TokenUsage) => void;\n    setArticleTitle: (title: string) => void;\n}\n\nconst EditorContext = createContext<EditorContextValue | null>(null);\n\nexport const EditorProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n    const generation = useGenerationStore();\n    const analysis = useAnalysisStore();\n    const app = useAppStore();\n\n    const value = useMemo<EditorContextValue>(() => {\n        const structure = analysis.refAnalysis?.structure || [];\n        const legacyGeneral = Array.isArray(analysis.refAnalysis?.keyInformationPoints)\n            ? analysis.refAnalysis.keyInformationPoints\n            : [];\n        const legacyBrand = Array.isArray(analysis.refAnalysis?.brandExclusivePoints)\n            ? analysis.refAnalysis.brandExclusivePoints\n            : [];\n        const general = new Set<string>();\n        const brand = new Set<string>();\n        legacyGeneral.forEach((p: string) => p && general.add(p));\n        legacyBrand.forEach((p: string) => p && brand.add(p));\n        structure.forEach((s: any) => {\n            (Array.isArray(s?.keyFacts) ? s.keyFacts : []).forEach((p: string) => p && general.add(p));\n            (Array.isArray(s?.uspNotes) ? s.uspNotes : []).forEach((p: string) => p && brand.add(p));\n        });\n\n        return {\n            content: generation.content,\n            setContent: (val) => generation.setContent(val),\n            status: generation.status,\n            generationStep: generation.generationStep,\n            error: generation.error,\n            targetAudience: analysis.targetAudience,\n            keyPoints: Array.from(general),\n            brandExclusivePoints: Array.from(brand),\n            checkedPoints: analysis.coveredPoints,\n            scrapedImages: analysis.scrapedImages,\n            visualStyle: analysis.visualStyle,\n            productBrief: analysis.activeProductBrief,\n            displayScale: app.displayScale,\n            articleTitle: analysis.articleTitle,\n            outlineSections: analysis.refAnalysis?.structure?.map(s => s.title) || [],\n            onTogglePoint: (point: string) => analysis.setCoveredPoints(prev => prev.includes(point) ? prev.filter(p => p !== point) : [...prev, point]),\n            onRemoveScrapedImage: (img) => analysis.setScrapedImages(analysis.scrapedImages.map(existing => {\n                const key = existing.id || existing.url;\n                const match = img.id || img.url;\n                if (key && key === match) return { ...existing, ignored: !existing.ignored };\n                return existing;\n            })),\n            onAddCost: (cost, usage) => app.addCost(cost?.totalCost || 0, usage?.totalTokens || 0),\n            setArticleTitle: analysis.setArticleTitle,\n        };\n    }, [analysis, generation, app.addCost, app.displayScale]);\n\n    return <EditorContext.Provider value={value}>{children}</EditorContext.Provider>;\n};\n\nexport const useEditorContext = () => {\n    const ctx = useContext(EditorContext);\n    if (!ctx) throw new Error('useEditorContext must be used within EditorProvider');\n    return ctx;\n};\n\nexport const useOptionalEditorContext = () => useContext(EditorContext);\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAyBA,MAAM,8BAAgB,IAAA,sNAAa,EAA4B;AAExD,MAAM,iBAA0D,CAAC,EAAE,QAAQ,EAAE;IAChF,MAAM,aAAa,IAAA,wJAAkB;IACrC,MAAM,WAAW,IAAA,oJAAgB;IACjC,MAAM,MAAM,IAAA,0IAAW;IAEvB,MAAM,QAAQ,IAAA,gNAAO,EAAqB;QACtC,MAAM,YAAY,SAAS,WAAW,EAAE,aAAa,EAAE;QACvD,MAAM,gBAAgB,MAAM,OAAO,CAAC,SAAS,WAAW,EAAE,wBACpD,SAAS,WAAW,CAAC,oBAAoB,GACzC,EAAE;QACR,MAAM,cAAc,MAAM,OAAO,CAAC,SAAS,WAAW,EAAE,wBAClD,SAAS,WAAW,CAAC,oBAAoB,GACzC,EAAE;QACR,MAAM,UAAU,IAAI;QACpB,MAAM,QAAQ,IAAI;QAClB,cAAc,OAAO,CAAC,CAAC,IAAc,KAAK,QAAQ,GAAG,CAAC;QACtD,YAAY,OAAO,CAAC,CAAC,IAAc,KAAK,MAAM,GAAG,CAAC;QAClD,UAAU,OAAO,CAAC,CAAC;YACf,CAAC,MAAM,OAAO,CAAC,GAAG,YAAY,EAAE,QAAQ,GAAG,EAAE,EAAE,OAAO,CAAC,CAAC,IAAc,KAAK,QAAQ,GAAG,CAAC;YACvF,CAAC,MAAM,OAAO,CAAC,GAAG,YAAY,EAAE,QAAQ,GAAG,EAAE,EAAE,OAAO,CAAC,CAAC,IAAc,KAAK,MAAM,GAAG,CAAC;QACzF;QAEA,OAAO;YACH,SAAS,WAAW,OAAO;YAC3B,YAAY,CAAC,MAAQ,WAAW,UAAU,CAAC;YAC3C,QAAQ,WAAW,MAAM;YACzB,gBAAgB,WAAW,cAAc;YACzC,OAAO,WAAW,KAAK;YACvB,gBAAgB,SAAS,cAAc;YACvC,WAAW,MAAM,IAAI,CAAC;YACtB,sBAAsB,MAAM,IAAI,CAAC;YACjC,eAAe,SAAS,aAAa;YACrC,eAAe,SAAS,aAAa;YACrC,aAAa,SAAS,WAAW;YACjC,cAAc,SAAS,kBAAkB;YACzC,cAAc,IAAI,YAAY;YAC9B,cAAc,SAAS,YAAY;YACnC,iBAAiB,SAAS,WAAW,EAAE,WAAW,IAAI,CAAA,IAAK,EAAE,KAAK,KAAK,EAAE;YACzE,eAAe,CAAC,QAAkB,SAAS,gBAAgB,CAAC,CAAA,OAAQ,KAAK,QAAQ,CAAC,SAAS,KAAK,MAAM,CAAC,CAAA,IAAK,MAAM,SAAS;2BAAI;wBAAM;qBAAM;YAC3I,sBAAsB,CAAC,MAAQ,SAAS,gBAAgB,CAAC,SAAS,aAAa,CAAC,GAAG,CAAC,CAAA;oBAChF,MAAM,MAAM,SAAS,EAAE,IAAI,SAAS,GAAG;oBACvC,MAAM,QAAQ,IAAI,EAAE,IAAI,IAAI,GAAG;oBAC/B,IAAI,OAAO,QAAQ,OAAO,OAAO;wBAAE,GAAG,QAAQ;wBAAE,SAAS,CAAC,SAAS,OAAO;oBAAC;oBAC3E,OAAO;gBACX;YACA,WAAW,CAAC,MAAM,QAAU,IAAI,OAAO,CAAC,MAAM,aAAa,GAAG,OAAO,eAAe;YACpF,iBAAiB,SAAS,eAAe;QAC7C;IACJ,GAAG;QAAC;QAAU;QAAY,IAAI,OAAO;QAAE,IAAI,YAAY;KAAC;IAExD,qBAAO,8OAAC,cAAc,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAClD;AAEO,MAAM,mBAAmB;IAC5B,MAAM,MAAM,IAAA,mNAAU,EAAC;IACvB,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACX;AAEO,MAAM,2BAA2B,IAAM,IAAA,mNAAU,EAAC"}}]
}