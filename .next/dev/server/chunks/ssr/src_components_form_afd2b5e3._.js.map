{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/components/form/WebsiteProfileSection.tsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\nimport { UseFormRegister } from 'react-hook-form';\nimport { ArticleFormValues } from '../../schemas/formSchema';\nimport { SavedProfile, TargetAudience } from '../../types';\nimport { AlertTriangle, Briefcase, ChevronDown, Globe, Plus, RotateCw, Trash2 } from 'lucide-react';\n\ninterface WebsiteProfileSectionProps {\n    register: UseFormRegister<ArticleFormValues>;\n    targetAudience: TargetAudience;\n    websiteType: string;\n    authorityTerms: string;\n    savedProfiles: SavedProfile[];\n    activeProfile?: SavedProfile | null;\n    brandKnowledge?: string;\n    onCreateProfile: (name: string) => SavedProfile | null;\n    onUpdateProfile: () => SavedProfile | null;\n    onDeleteProfile: (id: string) => void;\n    onLoadProfile: (profile: SavedProfile) => void;\n}\n\nconst getRegionLabel = (code: TargetAudience) => {\n    switch (code) {\n        case 'zh-TW': return { flag: 'üáπüáº', name: 'Taiwan' };\n        case 'zh-HK': return { flag: 'üá≠üá∞', name: 'Hong Kong' };\n        case 'zh-MY': return { flag: 'üá≤üáæ', name: 'Malaysia' };\n        default: return { flag: 'üåê', name: 'Global' };\n    }\n};\n\nexport const WebsiteProfileSection: React.FC<WebsiteProfileSectionProps> = ({\n    register,\n    targetAudience,\n    websiteType,\n    authorityTerms,\n    savedProfiles,\n    activeProfile,\n    brandKnowledge,\n    onCreateProfile,\n    onUpdateProfile,\n    onDeleteProfile,\n    onLoadProfile,\n}) => {\n    const [showBrandProfile, setShowBrandProfile] = useState(false);\n    const [showProfileMenu, setShowProfileMenu] = useState(false);\n    const [isCreatingProfile, setIsCreatingProfile] = useState(false);\n    const [newProfileName, setNewProfileName] = useState('');\n\n    const regionLabel = useMemo(() => getRegionLabel(targetAudience), [targetAudience]);\n\n    const handleCreateProfile = () => {\n        const created = onCreateProfile(newProfileName);\n        if (created) {\n            setNewProfileName('');\n            setIsCreatingProfile(false);\n            setShowProfileMenu(false);\n            alert(`Profile \"${created.name}\" saved!`);\n        }\n    };\n\n    const handleUpdateProfile = () => {\n        const updated = onUpdateProfile();\n        if (updated) {\n            alert('Profile Updated Successfully!');\n            setShowProfileMenu(false);\n        }\n    };\n\n    const handleDeleteProfile = (e: React.MouseEvent, id: string) => {\n        e.stopPropagation();\n        if (confirm('Delete this profile?')) {\n            onDeleteProfile(id);\n        }\n    };\n\n    const handleLoadProfile = (profile: SavedProfile) => {\n        onLoadProfile(profile);\n        setShowProfileMenu(false);\n        setShowBrandProfile(true);\n    };\n\n    return (\n        <div className=\"space-y-2\">\n            <h3 className=\"text-[10px] font-bold uppercase text-gray-400 tracking-wider px-1 flex items-center gap-1\">\n                <Briefcase className=\"w-3 h-3\" /> Website Profile\n                <span className=\"bg-red-100 text-red-600 border border-red-200 px-2 py-0.5 rounded text-[10px] font-bold flex items-center gap-1 animate-pulse\">\n                    <AlertTriangle className=\"w-3 h-3\" />\n                    BETA / UNSTABLE\n                </span>\n            </h3>\n\n            <div className={`bg-white rounded-xl border border-gray-200 shadow-[0_2px_8px_rgba(0,0,0,0.02)] overflow-hidden transition-all duration-300 ${showBrandProfile ? 'ring-2 ring-indigo-50/50' : 'hover:shadow-md'}`}>\n\n                <div\n                    className=\"p-3 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors group\"\n                    onClick={() => setShowBrandProfile(!showBrandProfile)}\n                >\n                    <div className=\"flex items-center gap-3\">\n                        <div className=\"w-9 h-9 rounded-full bg-indigo-50 flex items-center justify-center border border-indigo-100 flex-shrink-0 group-hover:bg-indigo-100 transition-colors\">\n                            <span className=\"text-sm font-bold text-indigo-600\">\n                                {activeProfile ? activeProfile.name.charAt(0).toUpperCase() : 'U'}\n                            </span>\n                        </div>\n                        <div className=\"min-w-0\">\n                            <p className=\"text-xs font-bold text-gray-800 truncate max-w-[180px]\">\n                                {activeProfile ? activeProfile.name : 'Unsaved Profile'}\n                            </p>\n                            <div className=\"flex items-center gap-2 text-[10px] text-gray-500\">\n                                <span className=\"flex items-center gap-1 bg-gray-100 px-1.5 rounded text-gray-600\">\n                                    {regionLabel.flag} {regionLabel.name}\n                                </span>\n                                {!showBrandProfile && websiteType && (\n                                    <span className=\"truncate max-w-[100px] border-l border-gray-200 pl-2\">\n                                        {websiteType}\n                                    </span>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n\n                    <button type=\"button\" className=\"text-gray-400 p-1 rounded hover:bg-gray-200/50 transition-colors\">\n                        <ChevronDown className={`w-4 h-4 transition-transform duration-300 ${showBrandProfile ? 'rotate-180' : ''}`} />\n                    </button>\n                </div>\n\n                {showBrandProfile && (\n                    <div className=\"p-4 pt-0 border-t border-gray-50 animate-in slide-in-from-top-1 fade-in duration-200\">\n                        <div className=\"pt-3 space-y-4\">\n                            <div className=\"relative\">\n                                <button\n                                    type=\"button\"\n                                    onClick={() => {\n                                        setShowProfileMenu(!showProfileMenu);\n                                        setIsCreatingProfile(false);\n                                        setNewProfileName('');\n                                    }}\n                                    className=\"w-full text-[10px] font-bold text-indigo-600 bg-indigo-50 hover:bg-indigo-100 px-3 py-2 rounded-lg transition-colors flex items-center justify-between border border-indigo-100\"\n                                >\n                                    <span className=\"flex items-center gap-2\">\n                                        <Briefcase className=\"w-3.5 h-3.5\" />\n                                        Manage Profiles\n                                    </span>\n                                    <ChevronDown className=\"w-3.5 h-3.5\" />\n                                </button>\n\n                                {showProfileMenu && (\n                                    <div className=\"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-xl shadow-xl z-50 animate-in fade-in zoom-in-95 duration-100 overflow-hidden\">\n                                        <div className=\"p-2 space-y-1 bg-gray-50/50 border-b border-gray-100\">\n                                            {activeProfile && (\n                                                <button\n                                                    type=\"button\"\n                                                    onClick={handleUpdateProfile}\n                                                    className=\"w-full flex items-center gap-2 px-3 py-2 text-[10px] font-bold text-indigo-700 bg-indigo-50 hover:bg-indigo-100 rounded-lg transition-colors\"\n                                                >\n                                                    <RotateCw className=\"w-3 h-3\" />\n                                                    Update \"{activeProfile.name}\"\n                                                </button>\n                                            )}\n\n                                            {isCreatingProfile ? (\n                                                <div className=\"p-1 space-y-2 bg-white rounded border border-gray-200\">\n                                                    <input\n                                                        autoFocus\n                                                        type=\"text\"\n                                                        value={newProfileName}\n                                                        onChange={(e) => setNewProfileName(e.target.value)}\n                                                        placeholder=\"New Profile Name...\"\n                                                        className=\"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:border-indigo-500 outline-none\"\n                                                        onKeyDown={(e) => e.key === 'Enter' && handleCreateProfile()}\n                                                    />\n                                                    <div className=\"flex gap-1\">\n                                                        <button\n                                                            type=\"button\"\n                                                            onClick={handleCreateProfile}\n                                                            className=\"flex-1 bg-indigo-600 text-white text-[10px] py-1 rounded hover:bg-indigo-700\"\n                                                        >\n                                                            Save\n                                                        </button>\n                                                        <button\n                                                            type=\"button\"\n                                                            onClick={() => setIsCreatingProfile(false)}\n                                                            className=\"flex-1 bg-gray-100 text-gray-600 text-[10px] py-1 rounded hover:bg-gray-200\"\n                                                        >\n                                                            Cancel\n                                                        </button>\n                                                    </div>\n                                                </div>\n                                            ) : (\n                                                <button\n                                                    type=\"button\"\n                                                    onClick={() => setIsCreatingProfile(true)}\n                                                    className=\"w-full flex items-center gap-2 px-3 py-2 text-[10px] font-bold text-gray-700 bg-white border border-gray-200 hover:bg-gray-50 rounded-lg transition-colors\"\n                                                >\n                                                    <Plus className=\"w-3 h-3\" />\n                                                    Save as New Profile\n                                                </button>\n                                            )}\n                                        </div>\n\n                                        <div className=\"max-h-48 overflow-y-auto custom-scrollbar p-1\">\n                                            <div className=\"text-[9px] font-bold text-gray-400 uppercase px-3 py-1\">Existing Profiles</div>\n                                            {savedProfiles.length === 0 ? (\n                                                <p className=\"text-[10px] text-gray-400 p-3 text-center italic\">No saved profiles yet.</p>\n                                            ) : (\n                                                savedProfiles.map(profile => (\n                                                    <div key={profile.id} className=\"flex items-center justify-between hover:bg-gray-50 rounded-lg px-3 py-2 group/item cursor-pointer\" onClick={() => handleLoadProfile(profile)}>\n                                                        <div className=\"flex items-center gap-2 overflow-hidden\">\n                                                            <div className={`w-1.5 h-1.5 rounded-full flex-shrink-0 ${activeProfile?.id === profile.id ? 'bg-green-500' : 'bg-indigo-300'}`}></div>\n                                                            <span className={`text-xs font-medium truncate ${activeProfile?.id === profile.id ? 'text-indigo-700 font-bold' : 'text-gray-700'}`}>{profile.name}</span>\n                                                        </div>\n                                                        <button\n                                                            type=\"button\"\n                                                            onClick={(e) => handleDeleteProfile(e, profile.id)}\n                                                            className=\"text-gray-300 hover:text-red-500 p-1 rounded-md hover:bg-red-50 transition-all opacity-0 group-hover/item:opacity-100\"\n                                                        >\n                                                            <Trash2 className=\"w-3 h-3\" />\n                                                        </button>\n                                                    </div>\n                                                ))\n                                            )}\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n\n                            <div className=\"space-y-3\">\n                                <div className=\"space-y-1.5\">\n                                    <label className=\"flex items-center gap-1.5 text-[10px] font-bold text-gray-500 uppercase tracking-wide\">\n                                        <Globe className=\"w-3 h-3\" /> Target Region\n                                    </label>\n                                    <div className=\"relative\">\n                                        <select\n                                            {...register('targetAudience')}\n                                            className=\"w-full pl-3 pr-8 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs font-medium text-gray-700 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 outline-none appearance-none transition-all cursor-pointer hover:bg-gray-50\"\n                                        >\n                                            <option value=\"zh-TW\">üáπüáº Taiwan (Traditional)</option>\n                                            <option value=\"zh-HK\">üá≠üá∞ Hong Kong (Traditional)</option>\n                                            <option value=\"zh-MY\">üá≤üáæ Malaysia (Simplified)</option>\n                                        </select>\n                                        <ChevronDown className=\"absolute right-3 top-2.5 w-3.5 h-3.5 text-gray-400 pointer-events-none\" />\n                                    </div>\n                                </div>\n\n                                <div className=\"space-y-1.5\">\n                                    <label className=\"flex items-center gap-1.5 text-[10px] font-bold text-gray-500 uppercase tracking-wide\">\n                                        Website Context\n                                    </label>\n                                    <input\n                                        type=\"text\"\n                                        {...register('websiteType')}\n                                        placeholder=\"e.g. High-End Skincare E-commerce...\"\n                                        className=\"w-full px-3 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs text-gray-700 placeholder-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 outline-none transition-all\"\n                                    />\n                                </div>\n\n                                <div className=\"space-y-1.5\">\n                                    <label className=\"text-[10px] font-bold text-gray-500 uppercase tracking-wide\">Authority Attribute Terms</label>\n                                    <textarea\n                                        {...register('authorityTerms')}\n                                        placeholder=\"Brand attributes, ingredients, certifications...\"\n                                        className=\"w-full h-20 px-3 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs text-gray-700 placeholder-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 outline-none resize-y custom-scrollbar transition-all\"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 615, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/components/form/ServiceProductSection.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { UseFormRegister } from 'react-hook-form';\nimport { ArticleFormValues } from '../../schemas/formSchema';\nimport { SavedProfile } from '../../types';\nimport { BookOpen, ChevronDown, Download, Edit2, Loader2, Plus, RotateCw, ShoppingBag, Sparkles } from 'lucide-react';\n\ninterface ServiceProductSectionProps {\n    register: UseFormRegister<ArticleFormValues>;\n    productMode: 'text' | 'url';\n    setProductMode: (mode: 'text' | 'url') => void;\n    productRawText?: string;\n    isSummarizingProduct: boolean;\n    canAnalyzeFromUrls: boolean;\n    savedProfiles: SavedProfile[];\n    activeProfile?: SavedProfile | null;\n    onCreateProfile: (name: string) => SavedProfile | null;\n    onUpdateProfile: () => SavedProfile | null;\n    onLoadProductFromProfile: (profile: SavedProfile) => void;\n    onAnalyzeFromUrls: () => Promise<void>;\n}\n\nexport const ServiceProductSection: React.FC<ServiceProductSectionProps> = ({\n    register,\n    productMode,\n    setProductMode,\n    productRawText,\n    isSummarizingProduct,\n    canAnalyzeFromUrls,\n    savedProfiles,\n    activeProfile,\n    onCreateProfile,\n    onUpdateProfile,\n    onLoadProductFromProfile,\n    onAnalyzeFromUrls,\n}) => {\n    const [showProductBrief, setShowProductBrief] = useState(false);\n    const [showProductLoadMenu, setShowProductLoadMenu] = useState(false);\n\n    const handleAnalyzeUrls = async () => {\n        await onAnalyzeFromUrls();\n    };\n\n    const handleCreateProfile = () => {\n        const name = prompt('Profile name to save this service/product?');\n        if (!name) return;\n        const created = onCreateProfile(name);\n        if (created) {\n            alert(`Profile \"${created.name}\" saved!`);\n            setShowProductLoadMenu(false);\n        }\n    };\n\n    const handleUpdateProfile = () => {\n        const updated = onUpdateProfile();\n        if (updated) {\n            alert('Profile Updated Successfully!');\n            setShowProductLoadMenu(false);\n        }\n    };\n\n    const handleLoadProduct = (profile: SavedProfile) => {\n        onLoadProductFromProfile(profile);\n        setProductMode('text');\n        setShowProductLoadMenu(false);\n    };\n\n    return (\n        <div className=\"space-y-2\">\n            <h3 className=\"text-[10px] font-bold uppercase text-gray-400 tracking-wider px-1 flex items-center gap-1\">\n                <ShoppingBag className=\"w-3 h-3\" /> Our Service And Products\n            </h3>\n\n            <div className={`bg-white rounded-xl border border-gray-200 shadow-[0_2px_8px_rgba(0,0,0,0.02)] overflow-hidden transition-all duration-300 ${showProductBrief ? 'ring-2 ring-emerald-50/50' : 'hover:shadow-md'}`}>\n\n                <div\n                    className=\"p-3 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors group\"\n                    onClick={() => setShowProductBrief(!showProductBrief)}\n                >\n                    <div className=\"flex items-center gap-3\">\n                        <div className=\"w-9 h-9 rounded-full bg-emerald-50 flex items-center justify-center border border-emerald-100 flex-shrink-0 group-hover:bg-emerald-100 transition-colors\">\n                            <ShoppingBag className=\"w-4 h-4 text-emerald-600\" />\n                        </div>\n                        <div className=\"min-w-0\">\n                            <p className=\"text-xs font-bold text-gray-800\">Our Service & Product</p>\n                            <div className=\"flex items-center gap-2 text-[10px] text-gray-500\">\n                                {productRawText ? (\n                                    <span className=\"truncate max-w-[180px] text-emerald-600 font-medium\">\n                                        {productRawText.substring(0, 30)}...\n                                    </span>\n                                ) : (\n                                    <span className=\"text-gray-400\">Not Configured</span>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n\n                    <ChevronDown className={`w-4 h-4 text-gray-400 transition-transform duration-300 ${showProductBrief ? 'rotate-180' : ''}`} />\n                </div>\n\n                {showProductBrief && (\n                    <div className=\"p-4 pt-0 border-t border-gray-50 animate-in slide-in-from-top-1 fade-in duration-200 mt-3\">\n                        <div className=\"flex items-center justify-between gap-2 mb-3\">\n                            <div className=\"flex items-center gap-1 flex-1 p-1 bg-gray-50 rounded-lg\">\n                                <button\n                                    type=\"button\"\n                                    onClick={() => setProductMode('text')}\n                                    className={`flex-1 text-[10px] py-1.5 rounded-md font-semibold transition-all flex items-center justify-center gap-1.5 ${productMode === 'text' ? 'bg-white shadow text-emerald-600' : 'text-gray-500 hover:text-gray-700'}`}\n                                >\n                                    <Edit2 className=\"w-3 h-3\" /> Text Input\n                                </button>\n                                <button\n                                    type=\"button\"\n                                    onClick={() => setProductMode('url')}\n                                    className={`flex-1 text-[10px] py-1.5 rounded-md font-semibold transition-all flex items-center justify-center gap-1.5 ${productMode === 'url' ? 'bg-white shadow text-emerald-600' : 'text-gray-500 hover:text-gray-700'}`}\n                                >\n                                    <Download className=\"w-3 h-3\" /> From URL\n                                </button>\n                            </div>\n\n                            <div className=\"relative\">\n                                <button\n                                    type=\"button\"\n                                    onClick={() => setShowProductLoadMenu(!showProductLoadMenu)}\n                                    className=\"h-full px-3 py-1.5 bg-white border border-gray-200 text-gray-600 rounded-lg text-[10px] font-bold hover:border-emerald-300 hover:text-emerald-600 transition-colors flex items-center gap-1 shadow-sm whitespace-nowrap\"\n                                >\n                                    <BookOpen className=\"w-3.5 h-3.5\" />\n                                    <span className=\"hidden sm:inline\">Manage Service</span>\n                                    <ChevronDown className=\"w-3 h-3\" />\n                                </button>\n\n                                {showProductLoadMenu && (\n                                    <div className=\"absolute top-full right-0 mt-2 w-56 bg-white border border-gray-200 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-100\">\n                                        <div className=\"p-2 space-y-1 bg-gray-50/50 border-b border-gray-100\">\n                                            {activeProfile && (\n                                                <button\n                                                    type=\"button\"\n                                                    onClick={handleUpdateProfile}\n                                                    className=\"w-full flex items-center gap-2 px-3 py-2 text-[10px] font-bold text-emerald-700 bg-emerald-50 hover:bg-emerald-100 rounded-lg transition-colors\"\n                                                >\n                                                    <RotateCw className=\"w-3 h-3\" />\n                                                    Update Service in \"{activeProfile.name}\"\n                                                </button>\n                                            )}\n                                            <button\n                                                type=\"button\"\n                                                onClick={handleCreateProfile}\n                                                className=\"w-full flex items-center gap-2 px-3 py-2 text-[10px] font-bold text-gray-700 bg-white border border-gray-200 hover:bg-gray-50 rounded-lg transition-colors\"\n                                            >\n                                                <Plus className=\"w-3 h-3\" />\n                                                Save Service as New Profile\n                                            </button>\n                                        </div>\n\n                                        <div className=\"p-2 bg-gray-50 border-b border-gray-100 text-[9px] font-bold text-gray-400 uppercase\">\n                                            Load from Profile\n                                        </div>\n                                        <div className=\"max-h-40 overflow-y-auto custom-scrollbar p-1\">\n                                            {savedProfiles.length === 0 ? (\n                                                <p className=\"text-[10px] text-gray-400 p-2 text-center\">No profiles found.</p>\n                                            ) : (\n                                                savedProfiles.map(p => (\n                                                    <button\n                                                        key={p.id}\n                                                        type=\"button\"\n                                                        onClick={() => handleLoadProduct(p)}\n                                                        className=\"w-full text-left px-3 py-2 text-[10px] text-gray-700 hover:bg-emerald-50 hover:text-emerald-700 rounded-lg transition-colors truncate flex items-center justify-between\"\n                                                    >\n                                                        <span>{p.name}</span>\n                                                        {activeProfile?.id === p.id && <span className=\"text-[8px] bg-green-100 text-green-600 px-1 rounded\">Active</span>}\n                                                    </button>\n                                                ))\n                                            )}\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n                        {productMode === 'text' ? (\n                            <div className=\"space-y-1.5\">\n                                <label className=\"text-[10px] font-bold text-gray-500 uppercase\">Our Service & Product Details</label>\n                                <textarea\n                                    {...register('productRawText')}\n                                    className=\"w-full h-48 px-3 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 outline-none custom-scrollbar\"\n                                    placeholder=\"Paste details about YOUR Service/Product here.&#10;e.g.&#10;Store: City Dental Clinic&#10;Service: Painless Implants&#10;Address: 123 Main St, Taipei&#10;Phone: 02-1234-5678&#10;USP: 20 years experience, 24hr emergency.\"\n                                />\n                            </div>\n                        ) : (\n                            <div className=\"space-y-2\">\n                                <div className=\"space-y-1.5\">\n                                    <label className=\"text-[10px] font-bold text-gray-500 uppercase\">Product / Service Page URLs</label>\n                                    <textarea\n                                        {...register('productUrlList')}\n                                        className=\"w-full h-32 px-3 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 outline-none custom-scrollbar font-mono\"\n                                        placeholder=\"https://example.com/product-a&#10;https://example.com/about-us\"\n                                    />\n                                    <p className=\"text-[9px] text-gray-400\">One URL per line. AI will summarize key services and contact info.</p>\n                                </div>\n                                <button\n                                    type=\"button\"\n                                    onClick={handleAnalyzeUrls}\n                                    disabled={isSummarizingProduct || !canAnalyzeFromUrls}\n                                    className=\"w-full py-2 bg-emerald-50 border border-emerald-100 text-emerald-700 rounded-lg text-xs font-bold hover:bg-emerald-100 transition-colors flex items-center justify-center gap-2 disabled:opacity-50\"\n                                >\n                                    {isSummarizingProduct ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Sparkles className=\"w-3.5 h-3.5\" />}\n                                    {isSummarizingProduct ? 'Analyzing...' : 'Analyze & Summarize'}\n                                </button>\n                            </div>\n                        )}\n\n                        <div className=\"text-[10px] text-gray-400 italic bg-gray-50 p-2 rounded flex items-center gap-2\">\n                            <Sparkles className=\"w-3 h-3 text-purple-400\" />\n                            AI will extract OUR Brand info to replace competitors in the article.\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1106, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/components/form/SourceMaterialSection.tsx"],"sourcesContent":["import React from 'react';\nimport { UseFormRegister } from 'react-hook-form';\nimport { ArticleFormValues } from '../../schemas/formSchema';\nimport { ScrapedImage } from '../../types';\nimport { Download, FileText, Filter, ImageIcon, Link2, Loader2 } from 'lucide-react';\nimport { dedupeScrapedImages } from '../../utils/imageUtils';\n\ninterface SourceMaterialSectionProps {\n    register: UseFormRegister<ArticleFormValues>;\n    errors: any;\n    inputType: 'text' | 'url';\n    setInputType: (type: 'text' | 'url') => void;\n    urlValue?: string;\n    refWordCount: number;\n    refCharCount: number;\n    scrapedImages: ScrapedImage[];\n    onFetchUrl: () => Promise<void>;\n    isFetchingUrl: boolean;\n    onToggleScrapedImage?: (image: ScrapedImage) => void;\n    onRequestSemanticFilter: () => void;\n    canSemanticFilter: boolean;\n}\n\nexport const SourceMaterialSection: React.FC<SourceMaterialSectionProps> = ({\n    register,\n    errors,\n    inputType,\n    setInputType,\n    urlValue,\n    refWordCount,\n    refCharCount,\n    scrapedImages,\n    onFetchUrl,\n    isFetchingUrl,\n    onToggleScrapedImage,\n    onRequestSemanticFilter,\n    canSemanticFilter,\n}) => {\n    const [showAllExtracted, setShowAllExtracted] = React.useState(false);\n    const MAX_PREVIEW_IMAGES = 24;\n    const dedupedImages = React.useMemo(() => dedupeScrapedImages(scrapedImages), [scrapedImages]);\n    const orderedImages = React.useMemo(\n        () =>\n            dedupedImages\n                .map((img, idx) => ({ img, idx }))\n                .sort((a, b) => {\n                    const aIgnored = Boolean(a.img.ignored);\n                    const bIgnored = Boolean(b.img.ignored);\n                    if (aIgnored === bIgnored) return a.idx - b.idx;\n                    return aIgnored ? 1 : -1; // ignored images go last\n                })\n                .map(({ img }) => img),\n        [dedupedImages]\n    );\n    const visibleImages = showAllExtracted ? orderedImages : orderedImages.slice(0, MAX_PREVIEW_IMAGES);\n    const hiddenCount = orderedImages.length - visibleImages.length;\n\n    const handleFetch = async () => {\n        await onFetchUrl();\n    };\n\n    return (\n        <div className=\"space-y-2\">\n            <h3 className=\"text-[10px] font-bold uppercase text-gray-400 tracking-wider px-1 flex items-center gap-1\">\n                <FileText className=\"w-3 h-3\" /> Source Material\n            </h3>\n            <div className=\"bg-white rounded-xl border border-gray-200 shadow-[0_2px_8px_rgba(0,0,0,0.02)] p-4 space-y-4\">\n                <div className=\"space-y-1.5\">\n                    <label className=\"text-[10px] font-bold text-gray-500 uppercase tracking-wide\">Article Topic</label>\n                    <input\n                        type=\"text\"\n                        {...register('title')}\n                        placeholder=\"e.g. Advanced React Patterns\"\n                        className={`w-full px-3 py-2 bg-white rounded-lg border text-sm font-medium text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all ${errors.title ? 'border-red-500' : 'border-gray-200'}`}\n                    />\n                    {errors.title && <p className=\"text-[10px] text-red-500\">{errors.title.message}</p>}\n                </div>\n\n                <div className=\"space-y-2\">\n                    <div className=\"flex justify-between items-center\">\n                        <label className=\"text-[10px] font-bold text-gray-500 uppercase tracking-wide flex items-center gap-2\">\n                            Reference Content\n                            {dedupedImages.length > 0 && (\n                                <span className=\"text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-100 text-[9px] flex items-center gap-1\">\n                                    <ImageIcon className=\"w-3 h-3\" /> {dedupedImages.length} Images\n                                </span>\n                            )}\n                            <span className=\"text-amber-500 bg-amber-50 px-1 rounded text-[9px] ml-auto border border-amber-100\">Required</span>\n                        </label>\n                        <div className=\"flex bg-gray-100 p-0.5 rounded-lg\">\n                            <button\n                                type=\"button\"\n                                onClick={() => setInputType('text')}\n                                className={`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${inputType === 'text' ? 'bg-white shadow-sm text-blue-600' : 'text-gray-500 hover:text-gray-700'}`}\n                            >\n                                Paste Text\n                            </button>\n                            <button\n                                type=\"button\"\n                                onClick={() => setInputType('url')}\n                                className={`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${inputType === 'url' ? 'bg-white shadow-sm text-blue-600' : 'text-gray-500 hover:text-gray-700'}`}\n                            >\n                                From URL\n                            </button>\n                        </div>\n                    </div>\n\n                    {inputType === 'text' ? (\n                        <div className=\"relative group\">\n                            <textarea\n                                {...register('referenceContent')}\n                                placeholder=\"Paste your source text here...\"\n                                className={`w-full h-36 px-3 py-2 bg-gray-50 rounded-lg border text-xs font-mono text-gray-600 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none resize-none custom-scrollbar transition-all group-hover:bg-white ${errors.referenceContent ? 'border-red-500' : 'border-gray-200'}`}\n                            />\n                            {errors.referenceContent && <p className=\"text-[10px] text-red-500\">{errors.referenceContent.message}</p>}\n                            <div className=\"flex justify-between items-center mt-1 gap-2 flex-wrap\">\n                                <span className=\"text-[10px] text-gray-400 font-mono\">\n                                    {refWordCount} words | {refCharCount} chars\n                                </span>\n                                <button\n                                    type=\"button\"\n                                    onClick={onRequestSemanticFilter}\n                                    disabled={!canSemanticFilter}\n                                    className={`inline-flex items-center gap-1 px-2 py-1 rounded-md border text-[10px] font-semibold transition-colors ${canSemanticFilter\n                                        ? 'border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100'\n                                        : 'border-gray-200 text-gray-400 bg-gray-100 cursor-not-allowed'\n                                        }`}\n                                >\n                                    <Filter className=\"w-3 h-3\" />\n                                    Ë™ûÊÑèÈÅéÊøæ (Á©∫ÁôΩË°åÂàÜÊÆµ)\n                                </button>\n                            </div>\n                        </div>\n                    ) : (\n                        <div className=\"flex gap-2\">\n                            <div className=\"relative flex-1\">\n                                <div className=\"absolute left-3 top-1/2 -translate-y-1/2\">\n                                    <Link2 className=\"w-3.5 h-3.5 text-gray-400\" />\n                                </div>\n                                <input\n                                    type=\"url\"\n                                    {...register('urlInput')}\n                                    placeholder=\"https://example.com/article\"\n                                    className=\"w-full pl-9 pr-3 py-2 bg-white rounded-lg border border-gray-200 text-xs text-gray-700 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all\"\n                                    autoFocus\n                                />\n                            </div>\n                            <button\n                                type=\"button\"\n                                onClick={handleFetch}\n                                disabled={isFetchingUrl || !urlValue}\n                                className=\"px-3 py-2 bg-blue-50 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm flex items-center justify-center min-w-[40px]\"\n                            >\n                                {isFetchingUrl ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Download className=\"w-4 h-4\" />}\n                            </button>\n                        </div>\n                    )}\n\n                    {dedupedImages.length > 0 && (\n                        <div className=\"mt-3 bg-gray-50 rounded-lg p-2 border border-gray-100\">\n                            <div className=\"flex items-center justify-between mb-2\">\n                                <h5 className=\"text-[10px] font-bold text-gray-500 uppercase tracking-wide flex items-center gap-1.5\">\n                                    <ImageIcon className=\"w-3 h-3\" /> Extracted Visuals\n                                </h5>\n                                <div className=\"flex items-center gap-2\">\n                                    {orderedImages.length > MAX_PREVIEW_IMAGES && (\n                                        <button\n                                            type=\"button\"\n                                            onClick={() => setShowAllExtracted((prev) => !prev)}\n                                            className=\"text-[9px] font-semibold text-blue-600 bg-blue-50 px-2 py-0.5 rounded border border-blue-100 hover:bg-blue-100 transition-colors\"\n                                        >\n                                            {showAllExtracted ? 'Collapse' : `Show All (${orderedImages.length})`}\n                                        </button>\n                                    )}\n                                    <span className=\"text-[9px] bg-indigo-50 text-indigo-600 px-1.5 py-0.5 rounded border border-indigo-100 font-medium\">\n                                        AI will analyze first 5 images during generation\n                                    </span>\n                                </div>\n                            </div>\n\n                            <div className=\"grid grid-cols-4 gap-2 max-h-32 overflow-y-auto custom-scrollbar p-1\">\n                                {visibleImages.map((img, idx) => {\n                                    // Use an index-suffixed key to prevent duplicate keys when the same URL appears multiple times\n                                    const key = img.id || `${img.url || img.altText || 'image'}-${idx}`;\n                                    const isIgnored = Boolean(img.ignored);\n                                    const clickable = Boolean(onToggleScrapedImage);\n                                    return (\n                                        <div\n                                            key={key}\n                                            className={`relative group rounded-md overflow-hidden border aspect-square shadow-sm transition-all ${isIgnored ? 'border-gray-300' : 'border-gray-200 bg-white'} ${clickable ? 'cursor-pointer hover:border-blue-200' : ''}`}\n                                            onClick={() => onToggleScrapedImage?.(img)}\n                                            title={isIgnored ? 'Click to include again' : 'Click to ignore this image'}\n                                        >\n                                            <div className=\"absolute top-1 right-1 z-10\">\n                                                <input\n                                                    type=\"checkbox\"\n                                                    checked={!isIgnored}\n                                                    readOnly={!onToggleScrapedImage}\n                                                    onChange={(e) => {\n                                                        e.stopPropagation();\n                                                        onToggleScrapedImage?.(img);\n                                                    }}\n                                                    onClick={(e) => e.stopPropagation()}\n                                                    className=\"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                                                    aria-label={isIgnored ? 'Include image' : 'Exclude image'}\n                                                />\n                                            </div>\n                                            {img.url ? (\n                                                <img\n                                                    src={img.url}\n                                                    loading=\"lazy\"\n                                                    alt={img.altText}\n                                                    className={`w-full h-full object-cover transition ${isIgnored ? 'grayscale opacity-60' : ''}`}\n                                                />\n                                            ) : (\n                                                <div className=\"w-full h-full flex items-center justify-center bg-gray-50 text-gray-300\">\n                                                    <ImageIcon className=\"w-4 h-4\" />\n                                                </div>\n                                            )}\n\n                                            {isIgnored && (\n                                                <div className=\"absolute inset-0 bg-black/30\" />\n                                            )}\n                                        </div>\n                                    );\n                                })}\n                                {hiddenCount > 0 && !showAllExtracted && (\n                                    <button\n                                        type=\"button\"\n                                        onClick={() => setShowAllExtracted(true)}\n                                        className=\"flex items-center justify-center text-[10px] font-semibold text-blue-600 bg-white border border-blue-100 rounded-md h-full min-h-[72px] hover:bg-blue-50 transition-colors col-span-4\"\n                                    >\n                                        + {hiddenCount} more\n                                    </button>\n                                )}\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}}]
}