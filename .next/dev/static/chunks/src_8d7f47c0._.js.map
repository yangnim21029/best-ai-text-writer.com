{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/config/constants.ts"],"sourcesContent":["const env =\n    (typeof import.meta !== 'undefined' && (import.meta as any).env)\n        ? (import.meta as any).env\n        : (process.env as any);\n\nexport const MODEL = {\n    FLASH: 'gemini-3-flash-preview',\n    IMAGE_PREVIEW: 'google/gemini-2.5-flash-image',\n};\n\nexport const EMBED_MODEL_ID =\n    env?.VITE_EMBED_MODEL_ID ||\n    env?.VITE_AI_EMBED_MODEL_ID ||\n    env?.AI_EMBED_MODEL_ID ||\n    'gemini-embedding-001';\n\nexport const PRICING = {\n    FLASH: {\n        input: 0.30 / 1000000,\n        output: 0.30 / 1000000,\n    },\n    IMAGE_PREVIEW: {\n        input: 0.30 / 1000000,\n        output: 30.00 / 1000000,\n    },\n    IMAGE_GEN: {\n        input: 0.30 / 1000000,\n        output: 30.00 / 1000000,\n    },\n};\n\nexport const AI_DEFAULTS = {\n    RETRY_ATTEMPTS: 2,\n    RETRY_DELAY_MS: 300,\n    // Longer timeout to accommodate heavy multimodal/long-context calls\n    TIMEOUT_MS: 120000,\n};\n\n// Magic number tuned to balance keyword coverage with AI speed/cost\nexport const SEMANTIC_KEYWORD_LIMIT = 30;\nexport const KEYWORD_CHAR_DIVISOR = 200;\nexport const MIN_KEYWORDS = 10;\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAGW;;;;;;AAHX,MAAM,MACF,AAAC,+CAAuB,eAAe,8BAAqB,GAAG,GACzD,8BAAqB,GAAG,GACvB,2KAAO,CAAC,GAAG;AAEf,MAAM,QAAQ;IACjB,OAAO;IACP,eAAe;AACnB;AAEO,MAAM,iBACT,KAAK,uBACL,KAAK,0BACL,KAAK,qBACL;AAEG,MAAM,UAAU;IACnB,OAAO;QACH,OAAO,OAAO;QACd,QAAQ,OAAO;IACnB;IACA,eAAe;QACX,OAAO,OAAO;QACd,QAAQ,QAAQ;IACpB;IACA,WAAW;QACP,OAAO,OAAO;QACd,QAAQ,QAAQ;IACpB;AACJ;AAEO,MAAM,cAAc;IACvB,gBAAgB;IAChB,gBAAgB;IAChB,oEAAoE;IACpE,YAAY;AAChB;AAGO,MAAM,yBAAyB;AAC/B,MAAM,uBAAuB;AAC7B,MAAM,eAAe"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/store/useSettingsStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport { MODEL, KEYWORD_CHAR_DIVISOR, MIN_KEYWORDS, SEMANTIC_KEYWORD_LIMIT } from '../config/constants';\n\ninterface SettingsState {\n    modelFlash: string;\n    modelImage: string;\n    keywordCharDivisor: number;\n    minKeywords: number;\n    maxKeywords: number;\n\n    // Actions\n    setModelFlash: (model: string) => void;\n    setModelImage: (model: string) => void;\n    setKeywordCharDivisor: (divisor: number) => void;\n    setMinKeywords: (min: number) => void;\n    setMaxKeywords: (max: number) => void;\n\n    // Reset\n    resetToDefaults: () => void;\n}\n\nexport const useSettingsStore = create<SettingsState>()(\n    persist(\n        (set) => ({\n            modelFlash: MODEL.FLASH,\n            modelImage: MODEL.IMAGE_PREVIEW,\n            keywordCharDivisor: KEYWORD_CHAR_DIVISOR,\n            minKeywords: MIN_KEYWORDS,\n            maxKeywords: SEMANTIC_KEYWORD_LIMIT,\n\n            setModelFlash: (model) => set({ modelFlash: model }),\n            setModelImage: (model) => set({ modelImage: model }),\n            setKeywordCharDivisor: (divisor) => set({ keywordCharDivisor: divisor }),\n            setMinKeywords: (min) => set({ minKeywords: min }),\n            setMaxKeywords: (max) => set({ maxKeywords: max }),\n\n            resetToDefaults: () => set({\n                modelFlash: MODEL.FLASH,\n                modelImage: MODEL.IMAGE_PREVIEW,\n                keywordCharDivisor: KEYWORD_CHAR_DIVISOR,\n                minKeywords: MIN_KEYWORDS,\n                maxKeywords: SEMANTIC_KEYWORD_LIMIT,\n            }),\n        }),\n        {\n            name: 'pro_content_writer_settings',\n            storage: createJSONStorage(() => localStorage),\n        }\n    )\n);\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAoBO,MAAM,mBAAmB,IAAA,qJAAM,IAClC,IAAA,2JAAO,EACH,CAAC,MAAQ,CAAC;QACN,YAAY,sIAAK,CAAC,KAAK;QACvB,YAAY,sIAAK,CAAC,aAAa;QAC/B,oBAAoB,qJAAoB;QACxC,aAAa,6IAAY;QACzB,aAAa,uJAAsB;QAEnC,eAAe,CAAC,QAAU,IAAI;gBAAE,YAAY;YAAM;QAClD,eAAe,CAAC,QAAU,IAAI;gBAAE,YAAY;YAAM;QAClD,uBAAuB,CAAC,UAAY,IAAI;gBAAE,oBAAoB;YAAQ;QACtE,gBAAgB,CAAC,MAAQ,IAAI;gBAAE,aAAa;YAAI;QAChD,gBAAgB,CAAC,MAAQ,IAAI;gBAAE,aAAa;YAAI;QAEhD,iBAAiB,IAAM,IAAI;gBACvB,YAAY,sIAAK,CAAC,KAAK;gBACvB,YAAY,sIAAK,CAAC,aAAa;gBAC/B,oBAAoB,qJAAoB;gBACxC,aAAa,6IAAY;gBACzB,aAAa,uJAAsB;YACvC;IACJ,CAAC,GACD;IACI,MAAM;IACN,SAAS,IAAA,qKAAiB,EAAC,IAAM;AACrC"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/store/useGenerationStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport { ArticleConfig, GenerationStatus, GenerationStep } from '../types';\n\ninterface GenerationState {\n    content: string;\n    status: GenerationStatus;\n    generationStep: GenerationStep;\n    error: string | null;\n    isStopped: boolean;\n    analysisResults: { productResult: any; structureResult: any } | null;\n    lastConfig: ArticleConfig | null;\n    setContent: (content: string | ((prev: string) => string)) => void;\n    setStatus: (status: GenerationStatus) => void;\n    setGenerationStep: (step: GenerationStep) => void;\n    setError: (error: string | null) => void;\n    setAnalysisResults: (results: { productResult: any; structureResult: any } | null) => void;\n    setLastConfig: (config: ArticleConfig | null) => void;\n    stopGeneration: () => void;\n    resetGeneration: () => void;\n}\n\nexport const useGenerationStore = create<GenerationState>()(\n    persist(\n        (set) => ({\n            content: '',\n            status: 'idle',\n            generationStep: 'idle',\n            error: null,\n            isStopped: false,\n            analysisResults: null,\n            lastConfig: null,\n            setContent: (content) => set((state) => ({\n                content: typeof content === 'function' ? content(state.content) : content\n            })),\n            setStatus: (status) => set({ status }),\n            setGenerationStep: (step) => set({ generationStep: step }),\n            setError: (error) => set({ error }),\n            setAnalysisResults: (results) => set({ analysisResults: results }),\n            setLastConfig: (config) => set({ lastConfig: config }),\n            stopGeneration: () => set({ isStopped: true, status: 'completed', generationStep: 'idle' }),\n            resetGeneration: () => set({\n                content: '',\n                status: 'idle',\n                generationStep: 'idle',\n                error: null,\n                isStopped: false,\n                analysisResults: null,\n                lastConfig: null\n            }),\n        }),\n        {\n            name: 'pro_content_writer_generation',\n            storage: createJSONStorage(() => localStorage),\n            partialize: (state) => ({\n                content: state.content,\n            }),\n        }\n    )\n);\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAqBO,MAAM,qBAAqB,IAAA,qJAAM,IACpC,IAAA,2JAAO,EACH,CAAC,MAAQ,CAAC;QACN,SAAS;QACT,QAAQ;QACR,gBAAgB;QAChB,OAAO;QACP,WAAW;QACX,iBAAiB;QACjB,YAAY;QACZ,YAAY,CAAC,UAAY,IAAI,CAAC,QAAU,CAAC;oBACrC,SAAS,OAAO,YAAY,aAAa,QAAQ,MAAM,OAAO,IAAI;gBACtE,CAAC;QACD,WAAW,CAAC,SAAW,IAAI;gBAAE;YAAO;QACpC,mBAAmB,CAAC,OAAS,IAAI;gBAAE,gBAAgB;YAAK;QACxD,UAAU,CAAC,QAAU,IAAI;gBAAE;YAAM;QACjC,oBAAoB,CAAC,UAAY,IAAI;gBAAE,iBAAiB;YAAQ;QAChE,eAAe,CAAC,SAAW,IAAI;gBAAE,YAAY;YAAO;QACpD,gBAAgB,IAAM,IAAI;gBAAE,WAAW;gBAAM,QAAQ;gBAAa,gBAAgB;YAAO;QACzF,iBAAiB,IAAM,IAAI;gBACvB,SAAS;gBACT,QAAQ;gBACR,gBAAgB;gBAChB,OAAO;gBACP,WAAW;gBACX,iBAAiB;gBACjB,YAAY;YAChB;IACJ,CAAC,GACD;IACI,MAAM;IACN,SAAS,IAAA,qKAAiB,EAAC,IAAM;IACjC,YAAY,CAAC,QAAU,CAAC;YACpB,SAAS,MAAM,OAAO;QAC1B,CAAC;AACL"}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/store/useAnalysisStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport {\n    AuthorityAnalysis,\n    FrequentWordsPlacementAnalysis,\n    ProblemProductMapping,\n    ProductBrief,\n    ReferenceAnalysis,\n    ScrapedImage,\n    TargetAudience\n} from '../types';\n\ninterface AnalysisState {\n    keywordPlans: FrequentWordsPlacementAnalysis[];\n    refAnalysis: ReferenceAnalysis | null;\n    authAnalysis: AuthorityAnalysis | null;\n    scrapedImages: ScrapedImage[];\n    visualStyle: string;\n    brandKnowledge: string;\n    coveredPoints: string[];\n    targetAudience: TargetAudience;\n    productMapping: ProblemProductMapping[];\n    activeProductBrief: ProductBrief | undefined;\n    articleTitle: string;\n    headingOptimizations: {\n        h2_before: string;\n        h2_after: string;\n        h2_reason?: string;\n        h2_options?: { text: string; reason?: string; score?: number }[];\n        needs_manual?: boolean;\n        h3?: { h3_before: string; h3_after: string; h3_reason?: string }[];\n    }[];\n    languageInstruction: string;\n    hkGroundingResult: {\n        isHKRelevant: boolean;\n        relevanceScore: number;\n        issues: { type: string; original: string; hkEquivalent: string; confidence: number; context: string }[];\n        suggestions: { original: string; rewritten: string }[];\n    } | null;\n    // NEW: Pending grounding for confirmation modal\n    pendingGroundingResult: {\n        issues: { type: string; original: string; regionEquivalent: string; confidence: number; context: string; selected: boolean }[];\n        rewrittenContent: string;\n        regionLabel: string;\n    } | null;\n    showGroundingModal: boolean;\n    // NEW: Localized plan stored separately\n    localizedRefAnalysis: ReferenceAnalysis | null;\n    setKeywordPlans: (plans: FrequentWordsPlacementAnalysis[]) => void;\n    setRefAnalysis: (analysis: ReferenceAnalysis | null) => void;\n    setAuthAnalysis: (analysis: AuthorityAnalysis | null) => void;\n    setScrapedImages: (images: ScrapedImage[]) => void;\n    setVisualStyle: (style: string) => void;\n    setBrandKnowledge: (knowledge: string) => void;\n    setCoveredPoints: (points: string[] | ((prev: string[]) => string[])) => void;\n    setTargetAudience: (audience: TargetAudience) => void;\n    setProductMapping: (mapping: ProblemProductMapping[]) => void;\n    setActiveProductBrief: (brief: ProductBrief | undefined) => void;\n    setArticleTitle: (title: string) => void;\n    setHeadingOptimizations: (items: {\n        h2_before: string;\n        h2_after: string;\n        h2_reason?: string;\n        h2_options?: { text: string; reason?: string; score?: number }[];\n        needs_manual?: boolean;\n        h3?: { h3_before: string; h3_after: string; h3_reason?: string }[];\n    }[]) => void;\n    setLanguageInstruction: (instruction: string) => void;\n    setHKGroundingResult: (result: AnalysisState['hkGroundingResult']) => void;\n    // NEW: Pending grounding actions\n    setPendingGroundingResult: (result: AnalysisState['pendingGroundingResult']) => void;\n    setShowGroundingModal: (show: boolean) => void;\n    toggleGroundingIssueSelection: (index: number) => void;\n    setLocalizedRefAnalysis: (analysis: ReferenceAnalysis | null) => void;\n    reset: () => void;\n}\n\nexport const useAnalysisStore = create<AnalysisState>()(\n    persist(\n        (set) => ({\n            keywordPlans: [],\n            refAnalysis: null,\n            authAnalysis: null,\n            scrapedImages: [],\n            visualStyle: '',\n            brandKnowledge: '',\n            coveredPoints: [],\n            targetAudience: 'zh-TW',\n            productMapping: [],\n            activeProductBrief: undefined,\n            articleTitle: '',\n            headingOptimizations: [],\n            languageInstruction: '',\n            hkGroundingResult: null,\n            pendingGroundingResult: null,\n            showGroundingModal: false,\n            localizedRefAnalysis: null,\n            setKeywordPlans: (plans) => set({ keywordPlans: plans }),\n            setRefAnalysis: (analysis) => set({ refAnalysis: analysis }),\n            setAuthAnalysis: (analysis) => set({ authAnalysis: analysis }),\n            setScrapedImages: (images) => set({ scrapedImages: images }),\n            setVisualStyle: (style) => set({ visualStyle: style }),\n            setBrandKnowledge: (knowledge) => set({ brandKnowledge: knowledge }),\n            setCoveredPoints: (points) => set((state) => ({\n                coveredPoints: typeof points === 'function' ? points(state.coveredPoints) : points\n            })),\n            setTargetAudience: (audience) => set({ targetAudience: audience }),\n            setProductMapping: (mapping) => set({ productMapping: mapping }),\n            setActiveProductBrief: (brief) => set({ activeProductBrief: brief }),\n            setArticleTitle: (title) => set({ articleTitle: title }),\n            setHeadingOptimizations: (items) => set({ headingOptimizations: items }),\n            setLanguageInstruction: (instruction) => set({ languageInstruction: instruction }),\n            setHKGroundingResult: (result) => set({ hkGroundingResult: result }),\n            setPendingGroundingResult: (result) => set({ pendingGroundingResult: result }),\n            setShowGroundingModal: (show) => set({ showGroundingModal: show }),\n            toggleGroundingIssueSelection: (index) => set((state) => {\n                if (!state.pendingGroundingResult) return state;\n                const newIssues = state.pendingGroundingResult.issues.map((issue, i) =>\n                    i === index ? { ...issue, selected: !issue.selected } : issue\n                );\n                return {\n                    pendingGroundingResult: {\n                        ...state.pendingGroundingResult,\n                        issues: newIssues\n                    }\n                };\n            }),\n            setLocalizedRefAnalysis: (analysis) => set({ localizedRefAnalysis: analysis }),\n            reset: () => set({\n                keywordPlans: [],\n                refAnalysis: null,\n                authAnalysis: null,\n                scrapedImages: [],\n                visualStyle: '',\n                brandKnowledge: '',\n                coveredPoints: [],\n                targetAudience: 'zh-TW',\n                productMapping: [],\n                activeProductBrief: undefined,\n                articleTitle: '',\n                headingOptimizations: [],\n                languageInstruction: '',\n                hkGroundingResult: null,\n                pendingGroundingResult: null,\n                showGroundingModal: false,\n                localizedRefAnalysis: null,\n            }),\n        }),\n        {\n            name: 'pro_content_writer_analysis',\n            storage: createJSONStorage(() => localStorage),\n            partialize: (state) => ({\n                keywordPlans: state.keywordPlans,\n                refAnalysis: state.refAnalysis,\n                authAnalysis: state.authAnalysis,\n                scrapedImages: state.scrapedImages,\n                visualStyle: state.visualStyle,\n                brandKnowledge: state.brandKnowledge,\n                coveredPoints: state.coveredPoints,\n                targetAudience: state.targetAudience,\n                articleTitle: state.articleTitle,\n                headingOptimizations: state.headingOptimizations,\n                languageInstruction: state.languageInstruction,\n                productMapping: state.productMapping,\n                activeProductBrief: state.activeProductBrief,\n                localizedRefAnalysis: state.localizedRefAnalysis,\n            }),\n        }\n    )\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/store/useMetricsStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport { ContentScore } from '../types';\n\ninterface MetricsState {\n    contentScore: ContentScore;\n    sessionCost: number;\n    sessionTokens: number;\n    setContentScore: (score: ContentScore) => void;\n    addCost: (cost: number, tokens: number) => void;\n    resetSessionStats: () => void;\n}\n\nexport const useMetricsStore = create<MetricsState>()(\n    persist(\n        (set) => ({\n            contentScore: { value: 0, label: 'Start Writing', color: 'text-gray-400' },\n            sessionCost: 0,\n            sessionTokens: 0,\n            setContentScore: (score) => set({ contentScore: score }),\n            addCost: (cost, tokens) => set((state) => ({\n                sessionCost: Number(state.sessionCost || 0) + Number(cost || 0),\n                sessionTokens: Number(state.sessionTokens || 0) + Number(tokens || 0)\n            })),\n            resetSessionStats: () => set({ sessionCost: 0, sessionTokens: 0 }),\n        }),\n        {\n            name: 'pro_content_writer_metrics',\n            storage: createJSONStorage(() => localStorage),\n            merge: (persisted, current) => {\n                const typed = persisted as Partial<MetricsState> | undefined;\n                return {\n                    ...current,\n                    ...typed,\n                    sessionCost: Number(typed?.sessionCost ?? current.sessionCost ?? 0),\n                    sessionTokens: Number(typed?.sessionTokens ?? current.sessionTokens ?? 0),\n                };\n            },\n            partialize: (state) => ({\n                sessionCost: state.sessionCost,\n                sessionTokens: state.sessionTokens,\n            }),\n        }\n    )\n);\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAYO,MAAM,kBAAkB,IAAA,qJAAM,IACjC,IAAA,2JAAO,EACH,CAAC,MAAQ,CAAC;QACN,cAAc;YAAE,OAAO;YAAG,OAAO;YAAiB,OAAO;QAAgB;QACzE,aAAa;QACb,eAAe;QACf,iBAAiB,CAAC,QAAU,IAAI;gBAAE,cAAc;YAAM;QACtD,SAAS,CAAC,MAAM,SAAW,IAAI,CAAC,QAAU,CAAC;oBACvC,aAAa,OAAO,MAAM,WAAW,IAAI,KAAK,OAAO,QAAQ;oBAC7D,eAAe,OAAO,MAAM,aAAa,IAAI,KAAK,OAAO,UAAU;gBACvE,CAAC;QACD,mBAAmB,IAAM,IAAI;gBAAE,aAAa;gBAAG,eAAe;YAAE;IACpE,CAAC,GACD;IACI,MAAM;IACN,SAAS,IAAA,qKAAiB,EAAC,IAAM;IACjC,OAAO,CAAC,WAAW;QACf,MAAM,QAAQ;QACd,OAAO;YACH,GAAG,OAAO;YACV,GAAG,KAAK;YACR,aAAa,OAAO,OAAO,eAAe,QAAQ,WAAW,IAAI;YACjE,eAAe,OAAO,OAAO,iBAAiB,QAAQ,aAAa,IAAI;QAC3E;IACJ;IACA,YAAY,CAAC,QAAU,CAAC;YACpB,aAAa,MAAM,WAAW;YAC9B,eAAe,MAAM,aAAa;QACtC,CAAC;AACL"}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/store/useUiStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n\ninterface UiState {\n    showInput: boolean;\n    showSidebar: boolean;\n    showChangelog: boolean;\n    showPlanModal: boolean;\n    showSettings: boolean;\n    inputType: 'text' | 'url';\n    displayScale: number;\n    toggleInput: () => void;\n    toggleSidebar: () => void;\n    setShowSidebar: (show: boolean) => void;\n    setShowChangelog: (show: boolean) => void;\n    setShowPlanModal: (show: boolean) => void;\n    setShowSettings: (show: boolean) => void;\n    setInputType: (type: 'text' | 'url') => void;\n    setDisplayScale: (scale: number) => void;\n}\n\nexport const useUiStore = create<UiState>()(\n    persist(\n        (set) => ({\n            showInput: true,\n            showSidebar: true,\n            showChangelog: false,\n            showPlanModal: false,\n            showSettings: false,\n            inputType: 'url',\n            displayScale: 1.1,\n            toggleInput: () => set((state) => ({ showInput: !state.showInput })),\n            toggleSidebar: () => set((state) => ({ showSidebar: !state.showSidebar })),\n            setShowSidebar: (show) => set({ showSidebar: show }),\n            setShowChangelog: (show) => set({ showChangelog: show }),\n            setShowPlanModal: (show) => set({ showPlanModal: show }),\n            setShowSettings: (show) => set({ showSettings: show }),\n            setInputType: (type) => set({ inputType: type }),\n            setDisplayScale: (scale) => set({ displayScale: scale }),\n        }),\n        {\n            name: 'pro_content_writer_ui',\n            storage: createJSONStorage(() => localStorage),\n            partialize: (state) => ({\n                showInput: state.showInput,\n                showSidebar: state.showSidebar,\n                inputType: state.inputType,\n                displayScale: state.displayScale,\n            }),\n        }\n    )\n);\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAoBO,MAAM,aAAa,IAAA,qJAAM,IAC5B,IAAA,2JAAO,EACH,CAAC,MAAQ,CAAC;QACN,WAAW;QACX,aAAa;QACb,eAAe;QACf,eAAe;QACf,cAAc;QACd,WAAW;QACX,cAAc;QACd,aAAa,IAAM,IAAI,CAAC,QAAU,CAAC;oBAAE,WAAW,CAAC,MAAM,SAAS;gBAAC,CAAC;QAClE,eAAe,IAAM,IAAI,CAAC,QAAU,CAAC;oBAAE,aAAa,CAAC,MAAM,WAAW;gBAAC,CAAC;QACxE,gBAAgB,CAAC,OAAS,IAAI;gBAAE,aAAa;YAAK;QAClD,kBAAkB,CAAC,OAAS,IAAI;gBAAE,eAAe;YAAK;QACtD,kBAAkB,CAAC,OAAS,IAAI;gBAAE,eAAe;YAAK;QACtD,iBAAiB,CAAC,OAAS,IAAI;gBAAE,cAAc;YAAK;QACpD,cAAc,CAAC,OAAS,IAAI;gBAAE,WAAW;YAAK;QAC9C,iBAAiB,CAAC,QAAU,IAAI;gBAAE,cAAc;YAAM;IAC1D,CAAC,GACD;IACI,MAAM;IACN,SAAS,IAAA,qKAAiB,EAAC,IAAM;IACjC,YAAY,CAAC,QAAU,CAAC;YACpB,WAAW,MAAM,SAAS;YAC1B,aAAa,MAAM,WAAW;YAC9B,WAAW,MAAM,SAAS;YAC1B,cAAc,MAAM,YAAY;QACpC,CAAC;AACL"}},
    {"offset": {"line": 417, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/store/resetGenerationState.ts"],"sourcesContent":["import { useAnalysisStore } from './useAnalysisStore';\nimport { useGenerationStore } from './useGenerationStore';\nimport { useMetricsStore } from './useMetricsStore';\n\nexport const resetGenerationState = () => {\n    useGenerationStore.getState().resetGeneration();\n    useMetricsStore.getState().resetSessionStats();\n\n    // Clear editor autosave so a fresh analysis doesn't resurrect stale drafts\n    if (typeof window !== 'undefined') {\n        try {\n            localStorage.removeItem('ai_writer_editor_autosave_v1');\n        } catch (e) {\n            console.warn('Failed to clear editor autosave', e);\n        }\n    }\n\n    const analysis = useAnalysisStore.getState();\n    analysis.setKeywordPlans([]);\n    analysis.setRefAnalysis(null);\n    analysis.setAuthAnalysis(null);\n    analysis.setScrapedImages([]);\n    analysis.setVisualStyle('');\n    analysis.setCoveredPoints([]);\n    analysis.setProductMapping([]);\n    analysis.setActiveProductBrief(undefined);\n    analysis.setArticleTitle('');\n    analysis.setHeadingOptimizations([]);\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,MAAM,uBAAuB;IAChC,2JAAkB,CAAC,QAAQ,GAAG,eAAe;IAC7C,qJAAe,CAAC,QAAQ,GAAG,iBAAiB;IAE5C,2EAA2E;IAC3E,wCAAmC;QAC/B,IAAI;YACA,aAAa,UAAU,CAAC;QAC5B,EAAE,OAAO,GAAG;YACR,QAAQ,IAAI,CAAC,mCAAmC;QACpD;IACJ;IAEA,MAAM,WAAW,uJAAgB,CAAC,QAAQ;IAC1C,SAAS,eAAe,CAAC,EAAE;IAC3B,SAAS,cAAc,CAAC;IACxB,SAAS,eAAe,CAAC;IACzB,SAAS,gBAAgB,CAAC,EAAE;IAC5B,SAAS,cAAc,CAAC;IACxB,SAAS,gBAAgB,CAAC,EAAE;IAC5B,SAAS,iBAAiB,CAAC,EAAE;IAC7B,SAAS,qBAAqB,CAAC;IAC/B,SAAS,eAAe,CAAC;IACzB,SAAS,uBAAuB,CAAC,EAAE;AACvC"}},
    {"offset": {"line": 457, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/store/useAppStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport { ContentScore, SavedProfile, ScrapedImage } from '@/types';\nimport { MODEL, KEYWORD_CHAR_DIVISOR, MIN_KEYWORDS, SEMANTIC_KEYWORD_LIMIT } from '@/config/constants';\n\ninterface AppState {\n    // UI Slice\n    showInput: boolean;\n    showSidebar: boolean;\n    showChangelog: boolean;\n    showPlanModal: boolean;\n    showSettings: boolean;\n    inputType: 'text' | 'url';\n    displayScale: number;\n\n    // Metrics Slice\n    contentScore: ContentScore;\n    sessionCost: number;\n    sessionTokens: number;\n\n    // Settings Slice\n    modelFlash: string;\n    modelImage: string;\n    keywordCharDivisor: number;\n    minKeywords: number;\n    maxKeywords: number;\n\n    // Profile Slice\n    savedProfiles: SavedProfile[];\n    activeProfile: SavedProfile | null;\n\n    // Actions\n    toggleInput: () => void;\n    toggleSidebar: () => void;\n    setShowSidebar: (show: boolean) => void;\n    setShowChangelog: (show: boolean) => void;\n    setShowPlanModal: (show: boolean) => void;\n    setShowSettings: (show: boolean) => void;\n    setInputType: (type: 'text' | 'url') => void;\n    setDisplayScale: (scale: number) => void;\n\n    setContentScore: (score: ContentScore) => void;\n    addCost: (cost: number, tokens: number) => void;\n    resetSessionStats: () => void;\n\n    setModelFlash: (model: string) => void;\n    setModelImage: (model: string) => void;\n    setKeywordCharDivisor: (divisor: number) => void;\n    setMinKeywords: (min: number) => void;\n    setMaxKeywords: (max: number) => void;\n    resetSettings: () => void;\n\n    setSavedProfiles: (profiles: SavedProfile[]) => void;\n    setActiveProfile: (profile: SavedProfile | null) => void;\n    addProfile: (profile: SavedProfile) => void;\n    updateProfile: (profile: SavedProfile) => void;\n    deleteProfile: (id: string) => void;\n}\n\nexport const useAppStore = create<AppState>()(\n    persist(\n        (set) => ({\n            // Defaults\n            showInput: true,\n            showSidebar: true,\n            showChangelog: false,\n            showPlanModal: false,\n            showSettings: false,\n            inputType: 'url',\n            displayScale: 1.1,\n\n            contentScore: { value: 0, label: 'Start Writing', color: 'text-gray-400' },\n            sessionCost: 0,\n            sessionTokens: 0,\n\n            modelFlash: MODEL.FLASH,\n            modelImage: MODEL.IMAGE_PREVIEW,\n            keywordCharDivisor: KEYWORD_CHAR_DIVISOR,\n            minKeywords: MIN_KEYWORDS,\n            maxKeywords: SEMANTIC_KEYWORD_LIMIT,\n\n            savedProfiles: [],\n            activeProfile: null,\n\n            // Actions\n            toggleInput: () => set((state) => ({ showInput: !state.showInput })),\n            toggleSidebar: () => set((state) => ({ showSidebar: !state.showSidebar })),\n            setShowSidebar: (show) => set({ showSidebar: show }),\n            setShowChangelog: (show) => set({ showChangelog: show }),\n            setShowPlanModal: (show) => set({ showPlanModal: show }),\n            setShowSettings: (show) => set({ showSettings: show }),\n            setInputType: (type) => set({ inputType: type }),\n            setDisplayScale: (scale) => set({ displayScale: scale }),\n\n            setContentScore: (score) => set({ contentScore: score }),\n            addCost: (cost, tokens) => set((state) => ({\n                sessionCost: Number(state.sessionCost || 0) + Number(cost || 0),\n                sessionTokens: Number(state.sessionTokens || 0) + Number(tokens || 0)\n            })),\n            resetSessionStats: () => set({ sessionCost: 0, sessionTokens: 0 }),\n\n            setModelFlash: (model) => set({ modelFlash: model }),\n            setModelImage: (model) => set({ modelImage: model }),\n            setKeywordCharDivisor: (divisor) => set({ keywordCharDivisor: divisor }),\n            setMinKeywords: (min) => set({ minKeywords: min }),\n            setMaxKeywords: (max) => set({ maxKeywords: max }),\n            resetSettings: () => set({\n                modelFlash: MODEL.FLASH,\n                modelImage: MODEL.IMAGE_PREVIEW,\n                keywordCharDivisor: KEYWORD_CHAR_DIVISOR,\n                minKeywords: MIN_KEYWORDS,\n                maxKeywords: SEMANTIC_KEYWORD_LIMIT,\n            }),\n\n            setSavedProfiles: (profiles) => set({ savedProfiles: profiles }),\n            setActiveProfile: (profile) => set({ activeProfile: profile }),\n            addProfile: (profile) => set((state) => ({\n                savedProfiles: [...state.savedProfiles, profile],\n                activeProfile: profile\n            })),\n            updateProfile: (updatedProfile) => set((state) => ({\n                savedProfiles: state.savedProfiles.map((p) =>\n                    p.id === updatedProfile.id ? updatedProfile : p\n                ),\n                activeProfile: state.activeProfile?.id === updatedProfile.id ? updatedProfile : state.activeProfile\n            })),\n            deleteProfile: (id) => set((state) => ({\n                savedProfiles: state.savedProfiles.filter((p) => p.id !== id),\n                activeProfile: state.activeProfile?.id === id ? null : state.activeProfile\n            })),\n        }),\n        {\n            name: 'pro_content_writer_app_v1',\n            storage: createJSONStorage(() => localStorage),\n        }\n    )\n);\n"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;;;;AAwDO,MAAM,cAAc,IAAA,qJAAM,IAC7B,IAAA,2JAAO,EACH,CAAC,MAAQ,CAAC;QACN,WAAW;QACX,WAAW;QACX,aAAa;QACb,eAAe;QACf,eAAe;QACf,cAAc;QACd,WAAW;QACX,cAAc;QAEd,cAAc;YAAE,OAAO;YAAG,OAAO;YAAiB,OAAO;QAAgB;QACzE,aAAa;QACb,eAAe;QAEf,YAAY,sIAAK,CAAC,KAAK;QACvB,YAAY,sIAAK,CAAC,aAAa;QAC/B,oBAAoB,qJAAoB;QACxC,aAAa,6IAAY;QACzB,aAAa,uJAAsB;QAEnC,eAAe,EAAE;QACjB,eAAe;QAEf,UAAU;QACV,aAAa,IAAM,IAAI,CAAC,QAAU,CAAC;oBAAE,WAAW,CAAC,MAAM,SAAS;gBAAC,CAAC;QAClE,eAAe,IAAM,IAAI,CAAC,QAAU,CAAC;oBAAE,aAAa,CAAC,MAAM,WAAW;gBAAC,CAAC;QACxE,gBAAgB,CAAC,OAAS,IAAI;gBAAE,aAAa;YAAK;QAClD,kBAAkB,CAAC,OAAS,IAAI;gBAAE,eAAe;YAAK;QACtD,kBAAkB,CAAC,OAAS,IAAI;gBAAE,eAAe;YAAK;QACtD,iBAAiB,CAAC,OAAS,IAAI;gBAAE,cAAc;YAAK;QACpD,cAAc,CAAC,OAAS,IAAI;gBAAE,WAAW;YAAK;QAC9C,iBAAiB,CAAC,QAAU,IAAI;gBAAE,cAAc;YAAM;QAEtD,iBAAiB,CAAC,QAAU,IAAI;gBAAE,cAAc;YAAM;QACtD,SAAS,CAAC,MAAM,SAAW,IAAI,CAAC,QAAU,CAAC;oBACvC,aAAa,OAAO,MAAM,WAAW,IAAI,KAAK,OAAO,QAAQ;oBAC7D,eAAe,OAAO,MAAM,aAAa,IAAI,KAAK,OAAO,UAAU;gBACvE,CAAC;QACD,mBAAmB,IAAM,IAAI;gBAAE,aAAa;gBAAG,eAAe;YAAE;QAEhE,eAAe,CAAC,QAAU,IAAI;gBAAE,YAAY;YAAM;QAClD,eAAe,CAAC,QAAU,IAAI;gBAAE,YAAY;YAAM;QAClD,uBAAuB,CAAC,UAAY,IAAI;gBAAE,oBAAoB;YAAQ;QACtE,gBAAgB,CAAC,MAAQ,IAAI;gBAAE,aAAa;YAAI;QAChD,gBAAgB,CAAC,MAAQ,IAAI;gBAAE,aAAa;YAAI;QAChD,eAAe,IAAM,IAAI;gBACrB,YAAY,sIAAK,CAAC,KAAK;gBACvB,YAAY,sIAAK,CAAC,aAAa;gBAC/B,oBAAoB,qJAAoB;gBACxC,aAAa,6IAAY;gBACzB,aAAa,uJAAsB;YACvC;QAEA,kBAAkB,CAAC,WAAa,IAAI;gBAAE,eAAe;YAAS;QAC9D,kBAAkB,CAAC,UAAY,IAAI;gBAAE,eAAe;YAAQ;QAC5D,YAAY,CAAC,UAAY,IAAI,CAAC,QAAU,CAAC;oBACrC,eAAe;2BAAI,MAAM,aAAa;wBAAE;qBAAQ;oBAChD,eAAe;gBACnB,CAAC;QACD,eAAe,CAAC,iBAAmB,IAAI,CAAC,QAAU,CAAC;oBAC/C,eAAe,MAAM,aAAa,CAAC,GAAG,CAAC,CAAC,IACpC,EAAE,EAAE,KAAK,eAAe,EAAE,GAAG,iBAAiB;oBAElD,eAAe,MAAM,aAAa,EAAE,OAAO,eAAe,EAAE,GAAG,iBAAiB,MAAM,aAAa;gBACvG,CAAC;QACD,eAAe,CAAC,KAAO,IAAI,CAAC,QAAU,CAAC;oBACnC,eAAe,MAAM,aAAa,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;oBAC1D,eAAe,MAAM,aAAa,EAAE,OAAO,KAAK,OAAO,MAAM,aAAa;gBAC9E,CAAC;IACL,CAAC,GACD;IACI,MAAM;IACN,SAAS,IAAA,qKAAiB,EAAC,IAAM;AACrC"}},
    {"offset": {"line": 580, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/utils/imageUtils.ts"],"sourcesContent":["import { ScrapedImage } from '../types';\n\nexport const toggleImage = (images: ScrapedImage[], imageToToggle: ScrapedImage): ScrapedImage[] => {\n    const keyToMatch = imageToToggle.id || imageToToggle.url || imageToToggle.altText;\n\n    return images.map((img, idx) => {\n        const key = img.id || img.url || img.altText || `${idx}`;\n        if (key !== keyToMatch) return img;\n        return { ...img, ignored: !img.ignored };\n    });\n};\n\nexport const getActiveImages = (images: ScrapedImage[]): ScrapedImage[] => {\n    return images.filter(img => !img.ignored);\n};\n\nconst buildKey = (img: ScrapedImage, idx: number) => {\n    if (img.url?.trim()) return `url:${img.url.trim()}`;\n    if (img.altText?.trim()) return `alt:${img.altText.trim()}`;\n    return `idx:${idx}`;\n};\n\n/**\n * Remove duplicate images while preserving the first occurrence order.\n * Prefers URL for uniqueness, then alt text as a fallback.\n */\nexport const dedupeScrapedImages = (images: ScrapedImage[]) => {\n    const seen = new Set<string>();\n    return images.filter((img, idx) => {\n        const key = buildKey(img, idx);\n        if (seen.has(key)) return false;\n        seen.add(key);\n        return true;\n    });\n};\n"],"names":[],"mappings":";;;;;;;;AAEO,MAAM,cAAc,CAAC,QAAwB;IAChD,MAAM,aAAa,cAAc,EAAE,IAAI,cAAc,GAAG,IAAI,cAAc,OAAO;IAEjF,OAAO,OAAO,GAAG,CAAC,CAAC,KAAK;QACpB,MAAM,MAAM,IAAI,EAAE,IAAI,IAAI,GAAG,IAAI,IAAI,OAAO,IAAI,GAAG,KAAK;QACxD,IAAI,QAAQ,YAAY,OAAO;QAC/B,OAAO;YAAE,GAAG,GAAG;YAAE,SAAS,CAAC,IAAI,OAAO;QAAC;IAC3C;AACJ;AAEO,MAAM,kBAAkB,CAAC;IAC5B,OAAO,OAAO,MAAM,CAAC,CAAA,MAAO,CAAC,IAAI,OAAO;AAC5C;AAEA,MAAM,WAAW,CAAC,KAAmB;IACjC,IAAI,IAAI,GAAG,EAAE,QAAQ,OAAO,CAAC,IAAI,EAAE,IAAI,GAAG,CAAC,IAAI,IAAI;IACnD,IAAI,IAAI,OAAO,EAAE,QAAQ,OAAO,CAAC,IAAI,EAAE,IAAI,OAAO,CAAC,IAAI,IAAI;IAC3D,OAAO,CAAC,IAAI,EAAE,KAAK;AACvB;AAMO,MAAM,sBAAsB,CAAC;IAChC,MAAM,OAAO,IAAI;IACjB,OAAO,OAAO,MAAM,CAAC,CAAC,KAAK;QACvB,MAAM,MAAM,SAAS,KAAK;QAC1B,IAAI,KAAK,GAAG,CAAC,MAAM,OAAO;QAC1B,KAAK,GAAG,CAAC;QACT,OAAO;IACX;AACJ"}},
    {"offset": {"line": 623, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/utils/cn.ts"],"sourcesContent":["import { ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport const cn = (...inputs: ClassValue[]) => twMerge(clsx(inputs));\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,MAAM,KAAK,CAAC,GAAG,SAAyB,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC"}},
    {"offset": {"line": 639, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/utils/logger.ts"],"sourcesContent":["export type LogStage =\n    | 'init'\n    | 'parsing_product'\n    | 'mapping_product'\n    | 'nlp_analysis'\n    | 'planning_keywords'\n    | 'extracting_structure'\n    | 'analyzing_visuals'\n    | 'writing_content'\n    | 'refining_headings'\n    | 'finalizing'\n    | 'error'\n    | 'idle';\n\ninterface LogEntry {\n    stage: LogStage;\n    msg: string;\n    meta?: Record<string, any>;\n    duration?: number;\n}\n\ntype LogListener = (entry: LogEntry) => void;\n\nclass Logger {\n    private listeners: LogListener[] = [];\n\n    subscribe(listener: LogListener) {\n        this.listeners.push(listener);\n        return () => {\n            this.listeners = this.listeners.filter(l => l !== listener);\n        };\n    }\n\n    log(stage: LogStage, msg: string, meta?: Record<string, any>, duration?: number) {\n        const entry: LogEntry = { stage, msg, meta, duration };\n\n        // Console output\n        const durationStr = duration ? ` (${duration}ms)` : '';\n        const metaStr = meta ? ` ${JSON.stringify(meta)}` : '';\n        console.log(`[${stage}] ${msg}${durationStr}${metaStr}`);\n\n        // Notify listeners (e.g., UI)\n        this.listeners.forEach(l => l(entry));\n    }\n\n    warn(stage: LogStage, msg: string, error?: unknown) {\n        console.warn(`[${stage}] ${msg}`, error);\n        this.listeners.forEach(l => l({ stage, msg: `WARNING: ${msg}`, meta: { error } }));\n    }\n\n    error(stage: LogStage, msg: string, error?: unknown) {\n        console.error(`[${stage}] ${msg}`, error);\n        this.listeners.forEach(l => l({ stage, msg: `ERROR: ${msg}`, meta: { error } }));\n    }\n}\n\nexport const logger = new Logger();\n"],"names":[],"mappings":";;;;AAuBA,MAAM;IACM,YAA2B,EAAE,CAAC;IAEtC,UAAU,QAAqB,EAAE;QAC7B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;QACpB,OAAO;YACH,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAA,IAAK,MAAM;QACtD;IACJ;IAEA,IAAI,KAAe,EAAE,GAAW,EAAE,IAA0B,EAAE,QAAiB,EAAE;QAC7E,MAAM,QAAkB;YAAE;YAAO;YAAK;YAAM;QAAS;QAErD,iBAAiB;QACjB,MAAM,cAAc,WAAW,CAAC,EAAE,EAAE,SAAS,GAAG,CAAC,GAAG;QACpD,MAAM,UAAU,OAAO,CAAC,CAAC,EAAE,KAAK,SAAS,CAAC,OAAO,GAAG;QACpD,QAAQ,GAAG,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,EAAE,MAAM,cAAc,SAAS;QAEvD,8BAA8B;QAC9B,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAA,IAAK,EAAE;IAClC;IAEA,KAAK,KAAe,EAAE,GAAW,EAAE,KAAe,EAAE;QAChD,QAAQ,IAAI,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,EAAE,KAAK,EAAE;QAClC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAA,IAAK,EAAE;gBAAE;gBAAO,KAAK,CAAC,SAAS,EAAE,KAAK;gBAAE,MAAM;oBAAE;gBAAM;YAAE;IACnF;IAEA,MAAM,KAAe,EAAE,GAAW,EAAE,KAAe,EAAE;QACjD,QAAQ,KAAK,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,EAAE,KAAK,EAAE;QACnC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAA,IAAK,EAAE;gBAAE;gBAAO,KAAK,CAAC,OAAO,EAAE,KAAK;gBAAE,MAAM;oBAAE;gBAAM;YAAE;IACjF;AACJ;AAEO,MAAM,SAAS,IAAI"}},
    {"offset": {"line": 694, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/utils/textUtils.ts"],"sourcesContent":["export const cleanHeadingText = (value: string | undefined): string => {\n    return (value || '')\n        .replace(/^#+\\s*/, '')\n        .replace(/[\"“”]/g, '')\n        .trim();\n};\n\nexport const stripLeadingHeading = (content: string): string => {\n    if (!content) return '';\n    // Remove a leading H1/H2/H3 tag or markdown heading to avoid duplicates after we inject headings ourselves.\n    const withoutHtmlHeading = content.replace(/^\\s*<h[1-6][^>]*>.*?<\\/h[1-6]>\\s*/i, '');\n    const withoutMdHeading = withoutHtmlHeading.replace(/^\\s*#{1,6}\\s.*(\\r?\\n|$)/, '');\n    return withoutMdHeading.trim();\n};\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,mBAAmB,CAAC;IAC7B,OAAO,CAAC,SAAS,EAAE,EACd,OAAO,CAAC,UAAU,IAClB,OAAO,CAAC,UAAU,IAClB,IAAI;AACb;AAEO,MAAM,sBAAsB,CAAC;IAChC,IAAI,CAAC,SAAS,OAAO;IACrB,4GAA4G;IAC5G,MAAM,qBAAqB,QAAQ,OAAO,CAAC,sCAAsC;IACjF,MAAM,mBAAmB,mBAAmB,OAAO,CAAC,2BAA2B;IAC/E,OAAO,iBAAiB,IAAI;AAChC"}},
    {"offset": {"line": 717, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/schemas/formSchema.ts"],"sourcesContent":["import { z } from 'zod';\n\nexport const articleFormSchema = z.object({\n    title: z.string().min(1, \"Topic is required\"),\n    referenceContent: z.string().min(50, \"Reference content must be at least 50 characters\"),\n    sampleOutline: z.string().optional(),\n    authorityTerms: z.string().optional(),\n    websiteType: z.string().optional(),\n    targetAudience: z.enum(['zh-TW', 'zh-HK', 'zh-MY']),\n    useRag: z.boolean(),\n    autoImagePlan: z.boolean(),\n    productRawText: z.string().optional(),\n\n    // UI-only fields that might need validation if used\n    urlInput: z.string().url(\"Invalid URL\").optional().or(z.literal('')),\n    productUrlList: z.string().optional(),\n});\n\nexport type ArticleFormValues = z.infer<typeof articleFormSchema>;\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,oBAAoB,qLAAC,CAAC,MAAM,CAAC;IACtC,OAAO,qLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACzB,kBAAkB,qLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI;IACrC,eAAe,qLAAC,CAAC,MAAM,GAAG,QAAQ;IAClC,gBAAgB,qLAAC,CAAC,MAAM,GAAG,QAAQ;IACnC,aAAa,qLAAC,CAAC,MAAM,GAAG,QAAQ;IAChC,gBAAgB,qLAAC,CAAC,IAAI,CAAC;QAAC;QAAS;QAAS;KAAQ;IAClD,QAAQ,qLAAC,CAAC,OAAO;IACjB,eAAe,qLAAC,CAAC,OAAO;IACxB,gBAAgB,qLAAC,CAAC,MAAM,GAAG,QAAQ;IAEnC,oDAAoD;IACpD,UAAU,qLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,eAAe,QAAQ,GAAG,EAAE,CAAC,qLAAC,CAAC,OAAO,CAAC;IAChE,gBAAgB,qLAAC,CAAC,MAAM,GAAG,QAAQ;AACvC"}},
    {"offset": {"line": 748, "column": 0}, "map": {"version":3,"sources":["file:///Users/rose/Documents/this_month/write-content/best-ai-text-writer.com/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Header } from '@/components/Header';\nimport { InputForm } from '@/components/InputForm';\nimport { Preview } from '@/components/Preview';\nimport { SeoSidebar } from '@/components/SeoSidebar';\nimport { Changelog } from '@/components/Changelog';\nimport { PasswordGate } from '@/components/PasswordGate';\nimport { useGeneration } from '@/hooks/useGeneration';\nimport { parseProductContext } from '@/services/research/productFeatureToPainPointMapper';\nimport { findRegionEquivalents, localizePlanWithAI } from '@/services/research/regionGroundingService';\nimport { SavedProfile, ScrapedImage } from '@/types';\nimport { useGenerationStore } from '@/store/useGenerationStore';\nimport { useAnalysisStore } from '@/store/useAnalysisStore';\nimport { useAppStore } from '@/store/useAppStore';\nimport { SectionPlanModal } from '@/components/SectionPlanModal';\nimport { SettingsModal } from '@/components/SettingsModal';\nimport { useAppAccess } from '@/hooks/useAppAccess';\nimport { useContentScore } from '@/hooks/useContentScore';\nimport { useAppHydration } from '@/hooks/useAppHydration';\n\nexport default function AppPage() {\n    const passwordHash = useMemo(() => (process.env.NEXT_PUBLIC_APP_GUARD_HASH as string) || '', []);\n\n    // Store & Hooks\n    const app = useAppStore();\n    const generationStore = useGenerationStore();\n    const analysisStore = useAnalysisStore();\n    const { isUnlocked, unlock } = useAppAccess();\n    const { structurePoints } = useContentScore();\n    const { generate, startWriting, stop } = useGeneration();\n    useAppHydration();\n\n    const [isSearchingAlternatives, setIsSearchingAlternatives] = useState(false);\n    const [isLocalizingPlan, setIsLocalizingPlan] = useState(false);\n\n    // Sidebar Auto-show\n    useEffect(() => {\n        if (generationStore.status === 'analyzing' && !app.showSidebar) {\n            app.setShowSidebar(true);\n        }\n    }, [generationStore.status, app]);\n\n    // Plan Modal Auto-show\n    useEffect(() => {\n        const hasStructure = Boolean(analysisStore.refAnalysis?.structure?.length);\n        if (generationStore.status === 'analysis_ready' && hasStructure && !app.showPlanModal) {\n            // Only show if we just finished analysis\n            if (generationStore.generationStep === 'idle') {\n                app.setShowPlanModal(true);\n            }\n        }\n    }, [generationStore.status, generationStore.generationStep, analysisStore.refAnalysis?.structure, app]);\n\n    const handleLoadProfile = async (profile: SavedProfile) => {\n        app.setActiveProfile(profile);\n        analysisStore.setTargetAudience(profile.targetAudience);\n        analysisStore.setBrandKnowledge(profile.brandKnowledge || '');\n\n        if (profile.productRawText) {\n            const res = await parseProductContext(profile.productRawText);\n            analysisStore.setActiveProductBrief(res.data);\n        }\n    };\n\n    const handleRemoveScrapedImage = (image: ScrapedImage) => {\n        const keyToMatch = image.id || image.url || image.altText;\n        if (!keyToMatch) return;\n        const updated = analysisStore.scrapedImages.map((img, idx) => {\n            const key = img.id || img.url || img.altText || `${idx}`;\n            if (key !== keyToMatch) return img;\n            return { ...img, ignored: !img.ignored };\n        });\n        analysisStore.setScrapedImages(updated);\n    };\n\n    const handleSearchLocalAlternatives = async () => {\n        const refAnalysis = analysisStore.refAnalysis;\n        if (!refAnalysis) return;\n\n        const entities = [\n            ...(refAnalysis.competitorBrands || []).map(b => ({ text: b, type: 'brand' as const, region: 'OTHER' })),\n            ...(refAnalysis.competitorProducts || []).map(p => ({ text: p, type: 'service' as const, region: 'OTHER' }))\n        ];\n\n        if (entities.length === 0) return;\n\n        setIsSearchingAlternatives(true);\n        try {\n            const result = await findRegionEquivalents(entities, analysisStore.targetAudience);\n            app.addCost(result.cost.totalCost, result.usage.totalTokens);\n\n            if (result.mappings.length > 0) {\n                const existingReplacements = refAnalysis.regionalReplacements || [];\n                const newReplacements = result.mappings.map(m => ({\n                    original: m.original,\n                    replacement: m.regionEquivalent,\n                    reason: m.context\n                }));\n\n                const mergedReplacements = [...existingReplacements];\n                newReplacements.forEach(nr => {\n                    if (!mergedReplacements.some(er => er.original === nr.original)) {\n                        mergedReplacements.push(nr);\n                    }\n                });\n\n                analysisStore.setRefAnalysis({ ...refAnalysis, regionalReplacements: mergedReplacements });\n            }\n        } catch (error) {\n            console.error('[App] Search local alternatives failed', error);\n        } finally {\n            setIsSearchingAlternatives(false);\n        }\n    };\n\n    if (!isUnlocked) {\n        return <PasswordGate passwordHash={passwordHash} onUnlock={unlock} />;\n    }\n\n    return (\n        <div className=\"flex flex-col h-screen overflow-hidden\">\n            <Header\n                sessionCost={app.sessionCost}\n                sessionTokens={app.sessionTokens}\n                showInput={app.showInput}\n                showSidebar={app.showSidebar}\n                onToggleInput={app.toggleInput}\n                onToggleSidebar={app.toggleSidebar}\n                onToggleChangelog={() => app.setShowChangelog(true)}\n                onToggleSettings={() => app.setShowSettings(true)}\n                contentScore={app.contentScore}\n                displayScale={app.displayScale}\n                onDisplayScaleChange={app.setDisplayScale}\n            />\n\n            <Changelog isOpen={app.showChangelog} onClose={() => app.setShowChangelog(false)} />\n            <SettingsModal open={app.showSettings} onClose={() => app.setShowSettings(false)} />\n\n            <main className=\"flex-1 flex flex-col lg:flex-row overflow-hidden h-[calc(100vh-64px)] min-h-0 bg-gray-100 p-4 gap-4\">\n                {app.showInput && (\n                    <section className=\"w-full lg:w-[380px] bg-white rounded-2xl shadow-sm border border-gray-200/60 flex flex-col overflow-auto z-20 transition-all duration-300\">\n                        <InputForm\n                            onGenerate={generate}\n                            onGenerateSections={startWriting}\n                            isGenerating={generationStore.status === 'analyzing' || generationStore.status === 'streaming'}\n                            isWriting={generationStore.status === 'streaming'}\n                            canGenerateSections={generationStore.status === 'analysis_ready'}\n                            currentStep={generationStore.generationStep}\n                            onAddCost={(cost, usage) => app.addCost(cost.totalCost, usage.totalTokens)}\n                            savedProfiles={app.savedProfiles}\n                            setSavedProfiles={app.setSavedProfiles}\n                            activeProfile={app.activeProfile}\n                            onSetActiveProfile={app.setActiveProfile}\n                            inputType={app.inputType}\n                            setInputType={app.setInputType}\n                            brandKnowledge={analysisStore.brandKnowledge}\n                            onShowPlan={() => app.setShowPlanModal(true)}\n                            hasPlan={Boolean(analysisStore.refAnalysis?.structure?.length)}\n                        />\n                    </section>\n                )}\n\n                <section className=\"flex-1 bg-white rounded-2xl shadow-sm border border-gray-200/60 flex flex-col min-h-0 relative overflow-hidden\">\n                    <Preview\n                        content={generationStore.content}\n                        status={generationStore.status}\n                        error={generationStore.error}\n                        generationStep={generationStore.generationStep}\n                        coveredPoints={analysisStore.coveredPoints}\n                        targetAudience={analysisStore.targetAudience}\n                        scrapedImages={analysisStore.scrapedImages}\n                        visualStyle={analysisStore.visualStyle}\n                        onRemoveScrapedImage={handleRemoveScrapedImage}\n                        onTogglePoint={(point) => {\n                            analysisStore.setCoveredPoints(prev =>\n                                prev.includes(point) ? prev.filter(p => p !== point) : [...prev, point]\n                            );\n                        }}\n                        onAddCost={(cost, usage) => app.addCost(cost.totalCost, usage.totalTokens)}\n                        savedProfiles={app.savedProfiles}\n                        onLoadProfile={handleLoadProfile}\n                        onRequestUrlMode={() => app.setInputType('url')}\n                        productBrief={analysisStore.activeProductBrief}\n                        displayScale={app.displayScale}\n                        articleTitle={analysisStore.articleTitle}\n                        onTitleChange={analysisStore.setArticleTitle}\n                        outlineSections={analysisStore.refAnalysis?.structure?.map(s => s.title) || []}\n                        keyInformationPoints={structurePoints.general}\n                        brandExclusivePoints={structurePoints.brand}\n                    />\n                </section>\n\n                {app.showSidebar && (\n                    <section className=\"hidden lg:flex w-[380px] bg-white rounded-2xl shadow-sm border border-gray-200/60 flex-col overflow-auto z-10 transition-all duration-300\">\n                        <SeoSidebar\n                            keywordPlans={analysisStore.keywordPlans}\n                            referenceAnalysis={analysisStore.refAnalysis}\n                            authorityAnalysis={analysisStore.authAnalysis}\n                            productMapping={analysisStore.productMapping}\n                            productBrief={analysisStore.activeProductBrief}\n                            headingOptimizations={analysisStore.headingOptimizations}\n                            targetAudience={analysisStore.targetAudience}\n                            languageInstruction={analysisStore.languageInstruction}\n                            isLoading={generationStore.status === 'analyzing'}\n                            status={generationStore.status}\n                            onStop={stop}\n                            brandKnowledge={analysisStore.brandKnowledge}\n                            setBrandKnowledge={analysisStore.setBrandKnowledge}\n                            displayScale={app.displayScale}\n                            onSearchLocalAlternatives={handleSearchLocalAlternatives}\n                            isSearchingAlternatives={isSearchingAlternatives}\n                        />\n                    </section>\n                )}\n            </main>\n\n            <SectionPlanModal\n                open={app.showPlanModal}\n                onClose={() => app.setShowPlanModal(false)}\n                sections={analysisStore.refAnalysis?.structure || []}\n                generalPlan={analysisStore.refAnalysis?.generalPlan}\n                conversionPlan={analysisStore.refAnalysis?.conversionPlan}\n                regionalReplacements={analysisStore.refAnalysis?.regionalReplacements}\n                localizedSections={analysisStore.localizedRefAnalysis?.structure}\n                localizedGeneralPlan={analysisStore.localizedRefAnalysis?.generalPlan}\n                localizedConversionPlan={analysisStore.localizedRefAnalysis?.conversionPlan}\n                onSavePlan={(updated) => {\n                    const current = analysisStore.refAnalysis;\n                    if (!current) return;\n                    analysisStore.setRefAnalysis({ ...current, structure: updated });\n                }}\n                onLocalizeAll={async () => {\n                    const current = analysisStore.refAnalysis;\n                    if (!current || !current.regionalReplacements?.length) return;\n\n                    setIsLocalizingPlan(true);\n                    try {\n                        const result = await localizePlanWithAI(\n                            {\n                                generalPlan: current.generalPlan || [],\n                                conversionPlan: current.conversionPlan || [],\n                                sections: current.structure.map(s => ({\n                                    title: s.title,\n                                    narrativePlan: s.narrativePlan,\n                                    keyFacts: s.keyFacts,\n                                    uspNotes: s.uspNotes,\n                                    subheadings: s.subheadings\n                                }))\n                            },\n                            current.regionalReplacements,\n                            analysisStore.targetAudience\n                        );\n\n                        app.addCost(result.cost.totalCost, result.usage.totalTokens);\n\n                        const localizedStructure = current.structure.map((original, idx) => ({\n                            ...original,\n                            title: result.localizedSections[idx]?.title || original.title,\n                            narrativePlan: result.localizedSections[idx]?.narrativePlan || original.narrativePlan,\n                            keyFacts: result.localizedSections[idx]?.keyFacts || original.keyFacts,\n                            uspNotes: result.localizedSections[idx]?.uspNotes || original.uspNotes,\n                            subheadings: result.localizedSections[idx]?.subheadings || original.subheadings\n                        }));\n\n                        analysisStore.setLocalizedRefAnalysis({\n                            ...current,\n                            structure: localizedStructure,\n                            generalPlan: result.localizedGeneralPlan,\n                            conversionPlan: result.localizedConversionPlan,\n                        });\n                    } catch (error) {\n                        console.error('[App] AI Plan localization failed', error);\n                    } finally {\n                        setIsLocalizingPlan(false);\n                    }\n                }}\n                isLocalizing={isLocalizingPlan}\n                onStartWriting={(selected) => {\n                    const current = analysisStore.refAnalysis;\n                    if (current) analysisStore.setRefAnalysis({ ...current, structure: selected });\n                    app.setShowPlanModal(false);\n                    startWriting();\n                }}\n                onSaveReplacements={(editedItems) => {\n                    const current = analysisStore.refAnalysis;\n                    if (!current) return;\n                    analysisStore.setRefAnalysis({\n                        ...current,\n                        regionalReplacements: editedItems\n                            .filter(i => i.action !== 'keep')\n                            .map(i => ({\n                                original: i.original,\n                                replacement: i.action === 'delete' ? '' : (i.customReplacement || i.replacement),\n                                reason: i.reason\n                            }))\n                    });\n                }}\n            />\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}