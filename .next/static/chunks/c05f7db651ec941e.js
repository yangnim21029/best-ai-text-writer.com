(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";var t,r,n=e.i(47167),i=e.i(43476),s=e.i(71645);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},o=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:d,...c},u)=>(0,s.createElement)("svg",{ref:u,...l,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:o("lucide",i),...!a&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(a)?a:[a]])),c=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...n},i)=>(0,s.createElement)(d,{ref:i,iconNode:t,className:o(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...n}));return r.displayName=a(e),r},u=c("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),p=c("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),h=c("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),m=c("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),f=c("panel-left-close",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]),g=c("panel-right-close",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]]),y=c("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),x=c("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),b=e=>{let t,r=new Set,n=(e,n)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,s={setState:n,getState:i,getInitialState:()=>a,subscribe:e=>(r.add(e),()=>r.delete(e))},a=t=e(n,i,s);return s},v=e=>{let t=e?b(e):b,r=e=>(function(e,t=e=>e){let r=s.default.useSyncExternalStore(e.subscribe,s.default.useCallback(()=>t(e.getState()),[e,t]),s.default.useCallback(()=>t(e.getInitialState()),[e,t]));return s.default.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},k=e=>e?v(e):v;function w(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var n;let i=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(n=r.getItem(e))?n:null;return s instanceof Promise?s.then(i):i(s)},setItem:(e,n)=>r.setItem(e,JSON.stringify(n,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}let N=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>N(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>N(t)(e)}}},$=(e,t)=>(r,n,i)=>{let s,a={storage:w(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1,l=new Set,d=new Set,c=a.storage;if(!c)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...e)},n,i);let u=()=>{let e=a.partialize({...n()});return c.setItem(a.name,{state:e,version:a.version})},p=i.setState;i.setState=(e,t)=>(p(e,t),u());let h=e((...e)=>(r(...e),u()),n,i);i.getInitialState=()=>h;let m=()=>{var e,t;if(!c)return;o=!1,l.forEach(e=>{var t;return e(null!=(t=n())?t:h)});let i=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,null!=(e=n())?e:h))||void 0;return N(c.getItem.bind(c))(a.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];else{if(a.migrate){let t=a.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[i,o]=e;if(r(s=a.merge(o,null!=(t=n())?t:h),!0),i)return u()}).then(()=>{null==i||i(s,void 0),s=n(),o=!0,d.forEach(e=>e(s))}).catch(e=>{null==i||i(void 0,e)})};return i.persist={setOptions:e=>{a={...a,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},a.skipHydration||m(),s||h},S={get url(){return`file://${e.P("src/config/constants.ts")}`}},j=S.env?S.env:n.default.env,T={FLASH:"gemini-3-flash-preview",IMAGE_PREVIEW:"google/gemini-2.5-flash-image"},_=j?.VITE_EMBED_MODEL_ID||j?.VITE_AI_EMBED_MODEL_ID||j?.AI_EMBED_MODEL_ID||"gemini-embedding-001",I={FLASH:{input:3e-7,output:3e-7},IMAGE_PREVIEW:{input:3e-7,output:3e-5},IMAGE_GEN:{input:3e-7,output:3e-5}},C=k()($(e=>({showInput:!0,showSidebar:!0,showChangelog:!1,showPlanModal:!1,showSettings:!1,inputType:"url",displayScale:1.1,contentScore:{value:0,label:"Start Writing",color:"text-gray-400"},sessionCost:0,sessionTokens:0,modelFlash:T.FLASH,modelImage:T.IMAGE_PREVIEW,keywordCharDivisor:200,minKeywords:10,maxKeywords:30,savedProfiles:[],activeProfile:null,toggleInput:()=>e(e=>({showInput:!e.showInput})),toggleSidebar:()=>e(e=>({showSidebar:!e.showSidebar})),setShowSidebar:t=>e({showSidebar:t}),setShowChangelog:t=>e({showChangelog:t}),setShowPlanModal:t=>e({showPlanModal:t}),setShowSettings:t=>e({showSettings:t}),setInputType:t=>e({inputType:t}),setDisplayScale:t=>e({displayScale:t}),setContentScore:t=>e({contentScore:t}),addCost:(t,r)=>e(e=>({sessionCost:Number(e.sessionCost||0)+Number(t||0),sessionTokens:Number(e.sessionTokens||0)+Number(r||0)})),resetSessionStats:()=>e({sessionCost:0,sessionTokens:0}),setModelFlash:t=>e({modelFlash:t}),setModelImage:t=>e({modelImage:t}),setKeywordCharDivisor:t=>e({keywordCharDivisor:t}),setMinKeywords:t=>e({minKeywords:t}),setMaxKeywords:t=>e({maxKeywords:t}),resetSettings:()=>e({modelFlash:T.FLASH,modelImage:T.IMAGE_PREVIEW,keywordCharDivisor:200,minKeywords:10,maxKeywords:30}),setSavedProfiles:t=>e({savedProfiles:t}),setActiveProfile:t=>e({activeProfile:t}),addProfile:t=>e(e=>({savedProfiles:[...e.savedProfiles,t],activeProfile:t})),updateProfile:t=>e(e=>({savedProfiles:e.savedProfiles.map(e=>e.id===t.id?t:e),activeProfile:e.activeProfile?.id===t.id?t:e.activeProfile})),deleteProfile:t=>e(e=>({savedProfiles:e.savedProfiles.filter(e=>e.id!==t),activeProfile:e.activeProfile?.id===t?null:e.activeProfile}))}),{name:"pro_content_writer_app_v1",storage:w(()=>localStorage)})),A=({sessionCost:e=0,sessionTokens:t=0,showInput:r,showSidebar:n,onToggleInput:s,onToggleSidebar:a,onToggleChangelog:o,onToggleSettings:l,contentScore:d,displayScale:c,onDisplayScaleChange:b})=>{let{modelFlash:v}=C();return(0,i.jsxs)("header",{className:"bg-white h-16 flex items-center justify-between px-6 flex-shrink-0 z-30 shadow-sm relative",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 p-2 rounded-xl shadow-md shadow-blue-200",children:(0,i.jsx)(u,{className:"w-5 h-5 text-white"})}),(0,i.jsxs)("div",{className:"hidden md:flex flex-col",children:[(0,i.jsxs)("h1",{className:"text-lg font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600 leading-tight",children:["Ai Text Writer ",(0,i.jsx)("span",{className:"text-blue-600",children:"Pro"})," - Best AI Content Generator"]}),(0,i.jsxs)("button",{onClick:o,className:"text-[10px] text-gray-400 hover:text-blue-600 transition-colors flex items-center gap-1 w-fit group",children:[(0,i.jsx)(y,{className:"w-3 h-3 group-hover:rotate-12 transition-transform"}),(0,i.jsx)("span",{children:"v1.4.0 Changelog"})]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1 bg-gray-50 p-1 rounded-lg ml-4 border border-gray-100",children:[(0,i.jsx)("button",{onClick:s,className:`p-1.5 rounded-md transition-all ${r?"bg-white text-blue-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,title:"Toggle Input Panel",children:(0,i.jsx)(f,{className:`w-4 h-4 transition-transform ${!r?"rotate-180":""}`})}),(0,i.jsx)("button",{onClick:a,className:`p-1.5 rounded-md transition-all ${n?"bg-white text-blue-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,title:"Toggle Analysis Sidebar",children:(0,i.jsx)(g,{className:`w-4 h-4 transition-transform ${!n?"rotate-180":""}`})})]}),(0,i.jsxs)("div",{className:"hidden md:flex items-center gap-1 bg-gray-50 p-1 rounded-lg border border-gray-100 ml-2",children:[(0,i.jsx)("button",{onClick:()=>b(c-.1),className:"px-2 py-1 text-[10px] font-bold text-gray-500 hover:text-gray-700 hover:bg-white rounded",title:"ç¸®å°é¡¯ç¤ºå­—ç´š",children:"A-"}),(0,i.jsxs)("div",{className:"px-2 py-1 text-[10px] font-bold text-gray-500 bg-white rounded border border-gray-100",children:[Math.round(100*c),"%"]}),(0,i.jsx)("button",{onClick:()=>b(c+.1),className:"px-2 py-1 text-[10px] font-bold text-gray-500 hover:text-gray-700 hover:bg-white rounded",title:"æ”¾å¤§é¡¯ç¤ºå­—ç´š",children:"A+"})]})]}),(0,i.jsxs)("div",{className:"hidden xl:flex items-center gap-3 mx-auto",children:[(0,i.jsxs)("div",{className:"flex flex-col items-end",children:[(0,i.jsx)("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Content Score"}),(0,i.jsx)("span",{className:`text-sm font-bold ${d.color}`,children:d.label})]}),(0,i.jsxs)("div",{className:"relative w-10 h-10 flex items-center justify-center",children:[(0,i.jsxs)("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[(0,i.jsx)("path",{className:"text-gray-100",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3"}),(0,i.jsx)("path",{className:`${d.color} transition-all duration-1000 ease-out`,strokeDasharray:`${d.value}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3"})]}),(0,i.jsx)("span",{className:`absolute text-[10px] font-bold ${d.color}`,children:d.value})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center bg-gray-50 rounded-lg border border-gray-200 p-1",children:[(0,i.jsxs)("div",{className:"flex flex-col items-end px-3 py-0.5 border-r border-gray-200",children:[(0,i.jsxs)("span",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-wider flex items-center gap-1",children:[(0,i.jsx)(m,{className:"w-3 h-3"})," Tokens"]}),(0,i.jsx)("span",{className:"text-sm font-mono font-medium text-gray-600",children:t.toLocaleString()})]}),(0,i.jsxs)("div",{className:"flex flex-col items-end px-3 py-0.5",children:[(0,i.jsxs)("span",{className:"text-[10px] text-emerald-600/70 font-bold uppercase tracking-wider flex items-center gap-1",children:[(0,i.jsx)(h,{className:"w-3 h-3"})," Cost"]}),(0,i.jsxs)("span",{className:"text-lg font-mono font-bold text-emerald-600 leading-none",children:["$",Number(e||0).toFixed(4)]})]})]}),(0,i.jsxs)("div",{className:"hidden md:flex items-center space-x-1.5 px-3 py-1.5 bg-amber-50 text-amber-700 border border-amber-200 rounded-full shadow-sm",children:[(0,i.jsx)(p,{className:"w-3.5 h-3.5 fill-amber-500 text-amber-600"}),(0,i.jsx)("span",{className:"text-xs font-semibold",children:v})]}),(0,i.jsx)("button",{onClick:l,className:"p-2 transition-all text-gray-400 hover:text-gray-900 hover:bg-gray-100 rounded-xl",title:"System Settings",children:(0,i.jsx)(x,{className:"w-5 h-5"})})]})]})},O=(...e)=>{for(let t of e){let e="string"==typeof t?Number(t):t;if("number"==typeof e&&Number.isFinite(e))return e}return 0},E=e=>{let t=(e?e.totalUsage||e.usage?e.totalUsage||e.usage:e.data?.totalUsage||e.data?.usage?e.data.totalUsage||e.data.usage:e.metadata?.totalUsage||e.metadata?.usage?e.metadata.totalUsage||e.metadata.usage:e:null)||{},r=O(t.inputTokens,t.promptTokens,t.prompt_tokens,t.input_tokens,t.promptTokenCount,t.inputTokenCount,t.tokens?.inputTokens,t.tokens?.promptTokens),n=O(t.outputTokens,t.completionTokens,t.output_tokens,t.completion_tokens,t.candidatesTokenCount,t.outputTokenCount,t.tokens?.outputTokens,t.tokens?.completionTokens),i=O(t.totalTokens,t.total_tokens,t.totalTokenCount,t.tokens?.totalTokens);return i?!r&&n&&i>=n?r=i-n:!n&&r&&i>=r?n=i-r:r||n||(r=i):i=r+n,{inputTokens:r,outputTokens:n,totalTokens:i}},M=(e,t)=>{let r=E(e),n=I[t],i=r.inputTokens*n.input,s=r.outputTokens*n.output;return{usage:r,cost:{inputCost:i,outputCost:s,totalCost:i+s}}},z=e=>{switch(e){case"zh-HK":return`
          **OUTPUT LANGUAGE:** Traditional Chinese (Hong Kong).
          - Use Hong Kong specific vocabulary (e.g., 'è³ªç´ ' instead of 'å“è³ª', 'äº’è¯ç¶²' instead of 'ç¶²éš›ç¶²è·¯', 'æ™ºèƒ½æ‰‹æ©Ÿ').
          - Style should be natural for Hong Kong readers (Standard Written Chinese with HK nuances).
          - **STRICTLY FORBIDDEN:** Spoken Cantonese particles (e.g., å˜…, ä¿‚, å’—, ä½¢, å’) unless explicitly requested.
          - Maintain a professional written tone (Standard Written Chinese).

          `;case"zh-MY":return`
          **OUTPUT LANGUAGE:** Simplified Chinese (Malaysia).
          - Use Simplified characters.
          - Use Malaysia-specific Chinese vocabulary and context where applicable (e.g., 'å·´åˆ¹' for market, 'å·´å£«' for bus, local currency references if needed).
          - Tone: Relatable to Malaysian Chinese readers.

          `;default:return`
          **OUTPUT LANGUAGE:** Traditional Chinese (Taiwan).
          - Use Taiwan specific vocabulary (e.g., 'å“è³ª', 'ç¶²éš›ç¶²è·¯', 'è¨ˆç¨‹è»Š').
          - Style should be natural for Taiwanese readers.
          - **STRICTLY FORBIDDEN:** Cantonese particles (e.g., å˜…, ä¿‚, å’—, ä½¢, å’) and Hong Kong specific vocabulary (e.g., 'è³ªç´ ').
          - Ensure the tone is standard written Chinese suitable for Taiwan.

          `}},P={attempts:2,delayMs:300},D=n.default.env,R="/api/ai",L=e=>{let t=R.startsWith("/")?R:`/${R}`;return`${t}${e}`},U=()=>{let e=D.VITE_AI_TOKEN||D.AI_TOKEN,t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t},F=e=>{let t=e?.content;return t?"string"==typeof t?t:Array.isArray(t)?t.map(e=>"string"==typeof e?e:"string"==typeof e?.text?e.text:"string"==typeof e?.value?e.value:"string"==typeof e?.data?.text?e.data.text:"").filter(Boolean).join(""):"":""},Z=async e=>{let t,r,n=e.getReader(),i=new TextDecoder,s="",a="",o=()=>{let e;for(s.includes("\r\n")&&(s=s.replace(/\r\n/g,"\n"));-1!==(e=s.indexOf("\n\n"));){let n,i=s.slice(0,e).trim();if(s=s.slice(e+2),!i)continue;let o="",l=[];for(let e of i.split("\n")){let t=e.trim();t&&!t.startsWith(":")&&(t.startsWith("event:")?o=t.slice(6).trim():t.startsWith("data:")&&l.push(t.slice(5).trim()))}let d=l.join("\n").trim();if(!d)continue;try{n=JSON.parse(d)}catch{continue}let c=n.type||n.event||n.kind||o;if("text-delta"===c){let e=n.textDelta??n.delta??n.text;"string"==typeof e&&(a+=e)}else if("message"===c){let e=F(n.message);e&&(a+=e),r=n.message?.metadata?.totalUsage||n.message?.metadata?.usage||r}else"object"===c?t=n.object??t:"finish"===c?(r=n.message?.metadata?.totalUsage||n.message?.metadata?.usage||n.usage||n.totalUsage||r,void 0!==n.object&&(t=n.object)):"string"==typeof n.text&&(a+=n.text)}};for(;;){let{value:e,done:t}=await n.read();if(s+=i.decode(e||new Uint8Array,{stream:!t}),o(),t)break}return o(),{text:a,object:t,usageMetadata:r}},B=e=>{let t=e?.data&&"object"==typeof e.data?e.data:e,r=t?.candidates||e?.candidates||t?.response?.candidates||e?.response?.candidates,n=t?.totalUsage||t?.usageMetadata||t?.usage||e?.totalUsage||e?.usageMetadata||e?.usage||t?.response?.totalUsage||t?.response?.usageMetadata,i=t?.object;if(t?.object!==void 0)return{text:"string"==typeof t.text?t.text:JSON.stringify(t.object),object:t.object,usageMetadata:n,candidates:r};let s=t?.text||e?.text||t?.response?.text||e?.response?.text||(e=>{if(!Array.isArray(e))return"";for(let t of e){let e=t?.content?.parts;if(Array.isArray(e)){let t=e.map(e=>e?.text||"").filter(Boolean).join("");if(t)return t}}return""})(r)||("string"==typeof t?t:""),a=(e=>{let t,r;if("string"!=typeof e||!e.includes("data:"))return null;let n=e.split(/data:\s*/).slice(1);if(0===n.length)return null;let i="";for(let e of n){let n,s=e.split(/\n/)[0].trim();if(!s||"[DONE]"===s)continue;try{n=JSON.parse(s)}catch{continue}let a=n.type||n.event||n.kind;if("text-delta"===a){let e=n.textDelta??n.delta??n.text;"string"==typeof e&&(i+=e)}else if("message"===a){let e=F(n.message);e&&(i+=e),t=n.message?.metadata?.totalUsage||n.message?.metadata?.usage||t}else"object"===a?r=n.object??r:"finish"===a?(t=n.message?.metadata?.totalUsage||n.message?.metadata?.usage||n.usage||n.totalUsage||t,void 0!==n.object&&(r=n.object)):"string"!=typeof n.text||a||(i+=n.text)}return{text:i.trim()||e.trim(),usageMetadata:t,object:r}})(s);return a&&(s=a.text,i=i??a.object,n=n??a.usageMetadata),{text:s,usageMetadata:n,candidates:r,object:i}};class V{controller;signal;constructor(e){this.controller=new AbortController,this.signal=this.controller.signal,e.forEach(e=>{e&&(e.aborted?this.controller.abort(e.reason):e.addEventListener("abort",()=>this.controller.abort(e.reason)))})}}let H=new class{async request({model:e,contents:t,config:r,timeoutMs:n,signal:i},s={}){let{attempts:a,delayMs:o}={...P,...s},l=new AbortController,d=i?new V([i,l.signal]).signal:l.signal,c=(e=>{if(!e)return"";if("string"==typeof e)return e;if(Array.isArray(e)){let t=[];for(let r of e)if("string"==typeof r)t.push(r);else if(r?.parts?.length){let e=r.parts.map(e=>e?.text||"").filter(Boolean).join("");e&&t.push(e)}else r?.text&&t.push(r.text);return t.join("\n\n")}if(e?.parts?.length)return e.parts.map(e=>e?.text||"").filter(Boolean).join("");if(e?.text)return e.text;try{return JSON.stringify(e)}catch{return""}})(t),u={model:e};if(c&&(u.prompt=c),r){let{responseSchema:e,responseMimeType:t,providerOptions:n,...i}=r;e&&(u.schema=e,u.responseSchema=e),t&&(u.responseMimeType=t),n&&(u.providerOptions=n),Object.keys(i).length>0&&(u.config=i)}t&&"string"!=typeof t&&(u.contents=t);let p=null;for(let e=0;e<a;e++){let t=setTimeout(()=>{console.error("[GenAIClient] Request TIMEOUT after",n||12e4,"ms"),l.abort("GenAI request timed out")},n||12e4);try{console.log("[GenAIClient] Request payload:",JSON.stringify(u,null,2)),console.log("[GenAIClient] Request URL:",L("/generate"));let e=U(),r=async t=>fetch(L(t),{method:"POST",headers:e,body:JSON.stringify(u),signal:d}),n=await r("/generate");404===n.status&&(n=await r("/stream"));let i=n.headers.get("content-type")||"",s=i.includes("application/json"),a=i.includes("text/event-stream");if(!n.ok){let e=s?await n.json():await n.text(),t="string"==typeof e?e:e.error||JSON.stringify(e);throw Error(`Failed to generate content (HTTP ${n.status}): ${t}`)}if(a){if(!n.body)throw Error("Stream response missing body");let e=await Z(n.body);return clearTimeout(t),e}let o=s?await n.json():{text:await n.text()};return clearTimeout(t),B(o)}catch(i){p=i,clearTimeout(t);let r=i?.message||"",n=r.includes("503")||r.includes("UNAVAILABLE")||r.toLowerCase().includes("overloaded");if(e<a-1&&n){let t=o*(e+1);console.warn(`GenAI retry (${e+1}/${a}) after ${t}ms due to: ${r}`),await new Promise(e=>setTimeout(e,t));continue}e<a-1&&await new Promise(e=>setTimeout(e,o))}}throw p instanceof Error?p:Error(`GenAI request failed: ${String(p)}`)}},W=new class{getModel(e){let t=C.getState();return"FLASH"===e?t.modelFlash:"IMAGE_PREVIEW"===e?t.modelImage:T[e]}async runText(e,t="FLASH",r){let n=Date.now(),i=this.getModel(t);try{let s=await H.request({model:i,contents:e,config:r}),{usage:a,cost:o}=M(s.usageMetadata,t);return{text:s.text,usage:a,cost:o,duration:Date.now()-n}}catch(e){throw console.error(`[AIService] runText failed for ${t}`,e),e}}async runJson(e,t="FLASH",r){let n=Date.now(),i=this.getModel(t);try{let s,a=await H.request({model:i,contents:e,config:{responseMimeType:"application/json",responseSchema:r}}),{usage:o,cost:l}=M(a.usageMetadata,t);if(a.object)s=a.object;else try{let e=a.text.replace(/```(?:json)?\n?|\n?```/gi,"").trim();s=JSON.parse(e)}catch(e){throw Error(`Failed to parse JSON response: ${a.text.substring(0,100)}...`)}return{data:s,usage:o,cost:l,duration:Date.now()-n}}catch(e){throw console.error(`[AIService] runJson failed for ${t}`,e),e}}async runJsonWithSearch(e,t="FLASH",r){let n=Date.now(),i=this.getModel(t);try{let s,a=await H.request({model:i,contents:e,config:{responseMimeType:"application/json",responseSchema:r,providerOptions:{vertex:{useSearchGrounding:!0}}}}),{usage:o,cost:l}=M(a.usageMetadata,t);if(a.object)s=a.object;else try{let e=a.text.replace(/```(?:json)?\n?|\n?```/gi,"").trim();s=JSON.parse(e)}catch(e){throw Error(`Failed to parse JSON response: ${a.text.substring(0,100)}...`)}return{data:s,usage:o,cost:l,duration:Date.now()-n}}catch(e){throw console.error(`[AIService] runJsonWithSearch failed for ${t}`,e),e}}},K="object",q="array",J="string",G="boolean",Y=async(e,t,r)=>{let n=Date.now(),i=(({productBrief:e,articleTopic:t,languageInstruction:r})=>`
    I have a Product and an Article Topic.

    <ProductDetails>
    PRODUCT: ${e.productName} (${e.usp})
    </ProductDetails>
    DEFINITION: The product being marketed.
    ACTION: Find features of this product that match the topic.
    
    <ArticleTopic>
    TOPIC: ${t}
    </ArticleTopic>
    DEFINITION: The subject of the article.
    ACTION: Identify pain points within this topic.
    
    <LanguageInstruction>
    ${r}
    </LanguageInstruction>
    DEFINITION: Target Language.
    ACTION: Output in this language.

    TASK:
    Identify 3 - 5 "Problem-Solution Mappings".
    For each mapping:
    1. ** Pain Point **: A specific problem the reader has related to the Topic.
    2. ** Product Feature **: The specific feature of the product that solves it.
    3. ** Relevance Keywords **: List of keywords(from the topic) where this mapping is most relevant.
    
    OUTPUT JSON:
    [
      { "painPoint": "...", "productFeature": "...", "relevanceKeywords": ["...", "..."] }
    ]
      `)({productBrief:e,articleTopic:t,languageInstruction:z(r)});try{let e=await W.runJson(i,"FLASH",{type:q,items:{type:K,properties:{painPoint:{type:J},productFeature:{type:J},relevanceKeywords:{type:q,items:{type:J}}},required:["painPoint","productFeature","relevanceKeywords"]}});return{data:e.data,usage:e.usage,cost:e.cost,duration:e.duration}}catch(e){return console.error("Brand Content Summarization Failed",e),{data:[],usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-n}}},X=async e=>{let t=Date.now(),r=(({rawText:e})=>`
    ## Task
    Extract product / service information from the following text.

    DEFINITION: The main objective.
    ACTION: Analyze the provided text to identify product-related data.

    <RawText>
    "${e}"
    </RawText>
    DEFINITION: Source text.
    ACTION: Analyze this text for product data.

    ## Instructions
    - Identify Brand Name, Product Name, Unique Selling Point(USP), Target Audience, and Key Features.
    - Focus on concise extraction, not rewriting.

    DEFINITION: Guidelines for extraction.
    ACTION: Follow these guidelines for the output.
    
    OUTPUT JSON:
{
  "brandName": "...",
    "productName": "...",
      "usp": "...",
        "targetAudience": "...",
          "features": ["...", "..."]
}
`)({rawText:e});try{let e=await W.runJson(r,"FLASH",{type:K,properties:{brandName:{type:J},productName:{type:J},usp:{type:J},primaryPainPoint:{type:J},ctaLink:{type:J}},required:["brandName","productName","usp","ctaLink"]}),t=e.data;return{data:{brandName:t.brandName||"",productName:t.productName||"",usp:t.usp||"",ctaLink:t.ctaLink||"",targetPainPoints:t.primaryPainPoint},usage:e.usage,cost:e.cost,duration:e.duration}}catch(e){return console.error("Product Context Parsing Failed",e),{data:{brandName:"",productName:"",usp:"",ctaLink:""},usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-t}}},Q=async(e,t,r="General Content")=>Y(e,r,t),ee=async(e,t)=>{let r=Date.now(),n=(({urls:e,languageInstruction:t})=>`
    You are a web crawler and marketing copywriter.
    Crawl and summarize the following URLs to extract the brand's own service/product details, contact info, and unique selling points.
    
    <TargetURLs>
    ${e.join("\n")}
    </TargetURLs>
    DEFINITION: The list of pages to digest.
    ACTION: Synthesize information from these pages only.
    
    <LanguageInstruction>
    ${t}
    </LanguageInstruction>
    DEFINITION: Target Language.
    ACTION: Write the summary in this language.

    OUTPUT: A concise paragraph(200 - 300 words) summarizing the brand / service with contact info if present.
    `)({urls:e,languageInstruction:z(t)});try{let e=await W.runText(n,"FLASH");return{data:e.text,usage:e.usage,cost:e.cost,duration:e.duration}}catch(e){return console.error("Brand Summary Failed",e),{data:"",usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-r}}},et=c("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),er=c("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),en=c("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ei=c("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),es=c("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ea=c("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),eo=c("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),el=({register:e,targetAudience:t,websiteType:r,authorityTerms:n,savedProfiles:a,activeProfile:o,brandKnowledge:l,onCreateProfile:d,onUpdateProfile:c,onDeleteProfile:u,onLoadProfile:p})=>{let[h,m]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[y,x]=(0,s.useState)(!1),[b,v]=(0,s.useState)(""),k=(0,s.useMemo)(()=>(e=>{switch(e){case"zh-TW":return{flag:"ðŸ‡¹ðŸ‡¼",name:"Taiwan"};case"zh-HK":return{flag:"ðŸ‡­ðŸ‡°",name:"Hong Kong"};case"zh-MY":return{flag:"ðŸ‡²ðŸ‡¾",name:"Malaysia"};default:return{flag:"ðŸŒ",name:"Global"}}})(t),[t]),w=()=>{let e=d(b);e&&(v(""),x(!1),g(!1),alert(`Profile "${e.name}" saved!`))};return(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("h3",{className:"text-[10px] font-bold uppercase text-gray-400 tracking-wider px-1 flex items-center gap-1",children:[(0,i.jsx)(er,{className:"w-3 h-3"})," Website Profile",(0,i.jsxs)("span",{className:"bg-red-100 text-red-600 border border-red-200 px-2 py-0.5 rounded text-[10px] font-bold flex items-center gap-1 animate-pulse",children:[(0,i.jsx)(et,{className:"w-3 h-3"}),"BETA / UNSTABLE"]})]}),(0,i.jsxs)("div",{className:`bg-white rounded-xl border border-gray-200 shadow-[0_2px_8px_rgba(0,0,0,0.02)] overflow-hidden transition-all duration-300 ${h?"ring-2 ring-indigo-50/50":"hover:shadow-md"}`,children:[(0,i.jsxs)("div",{className:"p-3 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors group",onClick:()=>m(!h),children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-9 h-9 rounded-full bg-indigo-50 flex items-center justify-center border border-indigo-100 flex-shrink-0 group-hover:bg-indigo-100 transition-colors",children:(0,i.jsx)("span",{className:"text-sm font-bold text-indigo-600",children:o?o.name.charAt(0).toUpperCase():"U"})}),(0,i.jsxs)("div",{className:"min-w-0",children:[(0,i.jsx)("p",{className:"text-xs font-bold text-gray-800 truncate max-w-[180px]",children:o?o.name:"Unsaved Profile"}),(0,i.jsxs)("div",{className:"flex items-center gap-2 text-[10px] text-gray-500",children:[(0,i.jsxs)("span",{className:"flex items-center gap-1 bg-gray-100 px-1.5 rounded text-gray-600",children:[k.flag," ",k.name]}),!h&&r&&(0,i.jsx)("span",{className:"truncate max-w-[100px] border-l border-gray-200 pl-2",children:r})]})]})]}),(0,i.jsx)("button",{type:"button",className:"text-gray-400 p-1 rounded hover:bg-gray-200/50 transition-colors",children:(0,i.jsx)(en,{className:`w-4 h-4 transition-transform duration-300 ${h?"rotate-180":""}`})})]}),h&&(0,i.jsx)("div",{className:"p-4 pt-0 border-t border-gray-50 animate-in slide-in-from-top-1 fade-in duration-200",children:(0,i.jsxs)("div",{className:"pt-3 space-y-4",children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{type:"button",onClick:()=>{g(!f),x(!1),v("")},className:"w-full text-[10px] font-bold text-indigo-600 bg-indigo-50 hover:bg-indigo-100 px-3 py-2 rounded-lg transition-colors flex items-center justify-between border border-indigo-100",children:[(0,i.jsxs)("span",{className:"flex items-center gap-2",children:[(0,i.jsx)(er,{className:"w-3.5 h-3.5"}),"Manage Profiles"]}),(0,i.jsx)(en,{className:"w-3.5 h-3.5"})]}),f&&(0,i.jsxs)("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-xl shadow-xl z-50 animate-in fade-in zoom-in-95 duration-100 overflow-hidden",children:[(0,i.jsxs)("div",{className:"p-2 space-y-1 bg-gray-50/50 border-b border-gray-100",children:[o&&(0,i.jsxs)("button",{type:"button",onClick:()=>{c()&&(alert("Profile Updated Successfully!"),g(!1))},className:"w-full flex items-center gap-2 px-3 py-2 text-[10px] font-bold text-indigo-700 bg-indigo-50 hover:bg-indigo-100 rounded-lg transition-colors",children:[(0,i.jsx)(ea,{className:"w-3 h-3"}),'Update "',o.name,'"']}),y?(0,i.jsxs)("div",{className:"p-1 space-y-2 bg-white rounded border border-gray-200",children:[(0,i.jsx)("input",{autoFocus:!0,type:"text",value:b,onChange:e=>v(e.target.value),placeholder:"New Profile Name...",className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:border-indigo-500 outline-none",onKeyDown:e=>"Enter"===e.key&&w()}),(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)("button",{type:"button",onClick:w,className:"flex-1 bg-indigo-600 text-white text-[10px] py-1 rounded hover:bg-indigo-700",children:"Save"}),(0,i.jsx)("button",{type:"button",onClick:()=>x(!1),className:"flex-1 bg-gray-100 text-gray-600 text-[10px] py-1 rounded hover:bg-gray-200",children:"Cancel"})]})]}):(0,i.jsxs)("button",{type:"button",onClick:()=>x(!0),className:"w-full flex items-center gap-2 px-3 py-2 text-[10px] font-bold text-gray-700 bg-white border border-gray-200 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,i.jsx)(es,{className:"w-3 h-3"}),"Save as New Profile"]})]}),(0,i.jsxs)("div",{className:"max-h-48 overflow-y-auto custom-scrollbar p-1",children:[(0,i.jsx)("div",{className:"text-[9px] font-bold text-gray-400 uppercase px-3 py-1",children:"Existing Profiles"}),0===a.length?(0,i.jsx)("p",{className:"text-[10px] text-gray-400 p-3 text-center italic",children:"No saved profiles yet."}):a.map(e=>(0,i.jsxs)("div",{className:"flex items-center justify-between hover:bg-gray-50 rounded-lg px-3 py-2 group/item cursor-pointer",onClick:()=>{p(e),g(!1),m(!0)},children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,i.jsx)("div",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 ${o?.id===e.id?"bg-green-500":"bg-indigo-300"}`}),(0,i.jsx)("span",{className:`text-xs font-medium truncate ${o?.id===e.id?"text-indigo-700 font-bold":"text-gray-700"}`,children:e.name})]}),(0,i.jsx)("button",{type:"button",onClick:t=>{var r;return r=e.id,void(t.stopPropagation(),confirm("Delete this profile?")&&u(r))},className:"text-gray-300 hover:text-red-500 p-1 rounded-md hover:bg-red-50 transition-all opacity-0 group-hover/item:opacity-100",children:(0,i.jsx)(eo,{className:"w-3 h-3"})})]},e.id))]})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"space-y-1.5",children:[(0,i.jsxs)("label",{className:"flex items-center gap-1.5 text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:[(0,i.jsx)(ei,{className:"w-3 h-3"})," Target Region"]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("select",{...e("targetAudience"),className:"w-full pl-3 pr-8 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs font-medium text-gray-700 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 outline-none appearance-none transition-all cursor-pointer hover:bg-gray-50",children:[(0,i.jsx)("option",{value:"zh-TW",children:"ðŸ‡¹ðŸ‡¼ Taiwan (Traditional)"}),(0,i.jsx)("option",{value:"zh-HK",children:"ðŸ‡­ðŸ‡° Hong Kong (Traditional)"}),(0,i.jsx)("option",{value:"zh-MY",children:"ðŸ‡²ðŸ‡¾ Malaysia (Simplified)"})]}),(0,i.jsx)(en,{className:"absolute right-3 top-2.5 w-3.5 h-3.5 text-gray-400 pointer-events-none"})]})]}),(0,i.jsxs)("div",{className:"space-y-1.5",children:[(0,i.jsx)("label",{className:"flex items-center gap-1.5 text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Website Context"}),(0,i.jsx)("input",{type:"text",...e("websiteType"),placeholder:"e.g. High-End Skincare E-commerce...",className:"w-full px-3 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs text-gray-700 placeholder-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 outline-none transition-all"})]}),(0,i.jsxs)("div",{className:"space-y-1.5",children:[(0,i.jsx)("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Authority Attribute Terms"}),(0,i.jsx)("textarea",{...e("authorityTerms"),placeholder:"Brand attributes, ingredients, certifications...",className:"w-full h-20 px-3 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs text-gray-700 placeholder-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 outline-none resize-y custom-scrollbar transition-all"})]})]})]})})]})]})},ed=c("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),ec=c("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),eu=c("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),ep=c("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),eh=c("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]),em=c("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),ef=({register:e,productMode:t,setProductMode:r,productRawText:n,isSummarizingProduct:a,canAnalyzeFromUrls:o,savedProfiles:l,activeProfile:d,onCreateProfile:c,onUpdateProfile:u,onLoadProductFromProfile:p,onAnalyzeFromUrls:h})=>{let[m,f]=(0,s.useState)(!1),[g,y]=(0,s.useState)(!1),x=async()=>{await h()};return(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("h3",{className:"text-[10px] font-bold uppercase text-gray-400 tracking-wider px-1 flex items-center gap-1",children:[(0,i.jsx)(eh,{className:"w-3 h-3"})," Our Service And Products"]}),(0,i.jsxs)("div",{className:`bg-white rounded-xl border border-gray-200 shadow-[0_2px_8px_rgba(0,0,0,0.02)] overflow-hidden transition-all duration-300 ${m?"ring-2 ring-emerald-50/50":"hover:shadow-md"}`,children:[(0,i.jsxs)("div",{className:"p-3 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors group",onClick:()=>f(!m),children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-9 h-9 rounded-full bg-emerald-50 flex items-center justify-center border border-emerald-100 flex-shrink-0 group-hover:bg-emerald-100 transition-colors",children:(0,i.jsx)(eh,{className:"w-4 h-4 text-emerald-600"})}),(0,i.jsxs)("div",{className:"min-w-0",children:[(0,i.jsx)("p",{className:"text-xs font-bold text-gray-800",children:"Our Service & Product"}),(0,i.jsx)("div",{className:"flex items-center gap-2 text-[10px] text-gray-500",children:n?(0,i.jsxs)("span",{className:"truncate max-w-[180px] text-emerald-600 font-medium",children:[n.substring(0,30),"..."]}):(0,i.jsx)("span",{className:"text-gray-400",children:"Not Configured"})})]})]}),(0,i.jsx)(en,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${m?"rotate-180":""}`})]}),m&&(0,i.jsxs)("div",{className:"p-4 pt-0 border-t border-gray-50 animate-in slide-in-from-top-1 fade-in duration-200 mt-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1 flex-1 p-1 bg-gray-50 rounded-lg",children:[(0,i.jsxs)("button",{type:"button",onClick:()=>r("text"),className:`flex-1 text-[10px] py-1.5 rounded-md font-semibold transition-all flex items-center justify-center gap-1.5 ${"text"===t?"bg-white shadow text-emerald-600":"text-gray-500 hover:text-gray-700"}`,children:[(0,i.jsx)(eu,{className:"w-3 h-3"})," Text Input"]}),(0,i.jsxs)("button",{type:"button",onClick:()=>r("url"),className:`flex-1 text-[10px] py-1.5 rounded-md font-semibold transition-all flex items-center justify-center gap-1.5 ${"url"===t?"bg-white shadow text-emerald-600":"text-gray-500 hover:text-gray-700"}`,children:[(0,i.jsx)(ec,{className:"w-3 h-3"})," From URL"]})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{type:"button",onClick:()=>y(!g),className:"h-full px-3 py-1.5 bg-white border border-gray-200 text-gray-600 rounded-lg text-[10px] font-bold hover:border-emerald-300 hover:text-emerald-600 transition-colors flex items-center gap-1 shadow-sm whitespace-nowrap",children:[(0,i.jsx)(ed,{className:"w-3.5 h-3.5"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"Manage Service"}),(0,i.jsx)(en,{className:"w-3 h-3"})]}),g&&(0,i.jsxs)("div",{className:"absolute top-full right-0 mt-2 w-56 bg-white border border-gray-200 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-100",children:[(0,i.jsxs)("div",{className:"p-2 space-y-1 bg-gray-50/50 border-b border-gray-100",children:[d&&(0,i.jsxs)("button",{type:"button",onClick:()=>{u()&&(alert("Profile Updated Successfully!"),y(!1))},className:"w-full flex items-center gap-2 px-3 py-2 text-[10px] font-bold text-emerald-700 bg-emerald-50 hover:bg-emerald-100 rounded-lg transition-colors",children:[(0,i.jsx)(ea,{className:"w-3 h-3"}),'Update Service in "',d.name,'"']}),(0,i.jsxs)("button",{type:"button",onClick:()=>{let e=prompt("Profile name to save this service/product?");if(!e)return;let t=c(e);t&&(alert(`Profile "${t.name}" saved!`),y(!1))},className:"w-full flex items-center gap-2 px-3 py-2 text-[10px] font-bold text-gray-700 bg-white border border-gray-200 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,i.jsx)(es,{className:"w-3 h-3"}),"Save Service as New Profile"]})]}),(0,i.jsx)("div",{className:"p-2 bg-gray-50 border-b border-gray-100 text-[9px] font-bold text-gray-400 uppercase",children:"Load from Profile"}),(0,i.jsx)("div",{className:"max-h-40 overflow-y-auto custom-scrollbar p-1",children:0===l.length?(0,i.jsx)("p",{className:"text-[10px] text-gray-400 p-2 text-center",children:"No profiles found."}):l.map(e=>(0,i.jsxs)("button",{type:"button",onClick:()=>{p(e),r("text"),y(!1)},className:"w-full text-left px-3 py-2 text-[10px] text-gray-700 hover:bg-emerald-50 hover:text-emerald-700 rounded-lg transition-colors truncate flex items-center justify-between",children:[(0,i.jsx)("span",{children:e.name}),d?.id===e.id&&(0,i.jsx)("span",{className:"text-[8px] bg-green-100 text-green-600 px-1 rounded",children:"Active"})]},e.id))})]})]})]}),"text"===t?(0,i.jsxs)("div",{className:"space-y-1.5",children:[(0,i.jsx)("label",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Our Service & Product Details"}),(0,i.jsx)("textarea",{...e("productRawText"),className:"w-full h-48 px-3 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 outline-none custom-scrollbar",placeholder:"Paste details about YOUR Service/Product here. e.g. Store: City Dental Clinic Service: Painless Implants Address: 123 Main St, Taipei Phone: 02-1234-5678 USP: 20 years experience, 24hr emergency."})]}):(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"space-y-1.5",children:[(0,i.jsx)("label",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Product / Service Page URLs"}),(0,i.jsx)("textarea",{...e("productUrlList"),className:"w-full h-32 px-3 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 outline-none custom-scrollbar font-mono",placeholder:"https://example.com/product-a https://example.com/about-us"}),(0,i.jsx)("p",{className:"text-[9px] text-gray-400",children:"One URL per line. AI will summarize key services and contact info."})]}),(0,i.jsxs)("button",{type:"button",onClick:x,disabled:a||!o,className:"w-full py-2 bg-emerald-50 border border-emerald-100 text-emerald-700 rounded-lg text-xs font-bold hover:bg-emerald-100 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[a?(0,i.jsx)(ep,{className:"w-3.5 h-3.5 animate-spin"}):(0,i.jsx)(em,{className:"w-3.5 h-3.5"}),a?"Analyzing...":"Analyze & Summarize"]})]}),(0,i.jsxs)("div",{className:"text-[10px] text-gray-400 italic bg-gray-50 p-2 rounded flex items-center gap-2",children:[(0,i.jsx)(em,{className:"w-3 h-3 text-purple-400"}),"AI will extract OUR Brand info to replace competitors in the article."]})]})]})]})},eg=c("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),ey=c("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),ex=c("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),eb=c("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),ev=e=>{let t=new Set;return e.filter((e,r)=>{let n=e.url?.trim()?`url:${e.url.trim()}`:e.altText?.trim()?`alt:${e.altText.trim()}`:`idx:${r}`;return!t.has(n)&&(t.add(n),!0)})},ek=({register:e,errors:t,inputType:r,setInputType:n,urlValue:a,refWordCount:o,refCharCount:l,scrapedImages:d,onFetchUrl:c,isFetchingUrl:u,onToggleScrapedImage:p,onRequestSemanticFilter:h,canSemanticFilter:m})=>{let[f,g]=s.default.useState(!1),y=s.default.useMemo(()=>ev(d),[d]),x=s.default.useMemo(()=>y.map((e,t)=>({img:e,idx:t})).sort((e,t)=>{let r=!!e.img.ignored;return!!t.img.ignored===r?e.idx-t.idx:r?1:-1}).map(({img:e})=>e),[y]),b=f?x:x.slice(0,24),v=x.length-b.length,k=async()=>{await c()};return(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("h3",{className:"text-[10px] font-bold uppercase text-gray-400 tracking-wider px-1 flex items-center gap-1",children:[(0,i.jsx)(eg,{className:"w-3 h-3"})," Source Material"]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_8px_rgba(0,0,0,0.02)] p-4 space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-1.5",children:[(0,i.jsx)("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Article Topic"}),(0,i.jsx)("input",{type:"text",...e("title"),placeholder:"e.g. Advanced React Patterns",className:`w-full px-3 py-2 bg-white rounded-lg border text-sm font-medium text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all ${t.title?"border-red-500":"border-gray-200"}`}),t.title&&(0,i.jsx)("p",{className:"text-[10px] text-red-500",children:t.title.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide flex items-center gap-2",children:["Reference Content",y.length>0&&(0,i.jsxs)("span",{className:"text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-100 text-[9px] flex items-center gap-1",children:[(0,i.jsx)(ex,{className:"w-3 h-3"})," ",y.length," Images"]}),(0,i.jsx)("span",{className:"text-amber-500 bg-amber-50 px-1 rounded text-[9px] ml-auto border border-amber-100",children:"Required"})]}),(0,i.jsxs)("div",{className:"flex bg-gray-100 p-0.5 rounded-lg",children:[(0,i.jsx)("button",{type:"button",onClick:()=>n("text"),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${"text"===r?"bg-white shadow-sm text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Paste Text"}),(0,i.jsx)("button",{type:"button",onClick:()=>n("url"),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${"url"===r?"bg-white shadow-sm text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"From URL"})]})]}),"text"===r?(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)("textarea",{...e("referenceContent"),placeholder:"Paste your source text here...",className:`w-full h-36 px-3 py-2 bg-gray-50 rounded-lg border text-xs font-mono text-gray-600 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none resize-none custom-scrollbar transition-all group-hover:bg-white ${t.referenceContent?"border-red-500":"border-gray-200"}`}),t.referenceContent&&(0,i.jsx)("p",{className:"text-[10px] text-red-500",children:t.referenceContent.message}),(0,i.jsxs)("div",{className:"flex justify-between items-center mt-1 gap-2 flex-wrap",children:[(0,i.jsxs)("span",{className:"text-[10px] text-gray-400 font-mono",children:[o," words | ",l," chars"]}),(0,i.jsxs)("button",{type:"button",onClick:h,disabled:!m,className:`inline-flex items-center gap-1 px-2 py-1 rounded-md border text-[10px] font-semibold transition-colors ${m?"border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100":"border-gray-200 text-gray-400 bg-gray-100 cursor-not-allowed"}`,children:[(0,i.jsx)(ey,{className:"w-3 h-3"}),"èªžæ„éŽæ¿¾ (ç©ºç™½è¡Œåˆ†æ®µ)"]})]})]}):(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)("div",{className:"relative flex-1",children:[(0,i.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:(0,i.jsx)(eb,{className:"w-3.5 h-3.5 text-gray-400"})}),(0,i.jsx)("input",{type:"url",...e("urlInput"),placeholder:"https://example.com/article",className:"w-full pl-9 pr-3 py-2 bg-white rounded-lg border border-gray-200 text-xs text-gray-700 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all",autoFocus:!0})]}),(0,i.jsx)("button",{type:"button",onClick:k,disabled:u||!a,className:"px-3 py-2 bg-blue-50 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm flex items-center justify-center min-w-[40px]",children:u?(0,i.jsx)(ep,{className:"w-4 h-4 animate-spin"}):(0,i.jsx)(ec,{className:"w-4 h-4"})})]}),y.length>0&&(0,i.jsxs)("div",{className:"mt-3 bg-gray-50 rounded-lg p-2 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsxs)("h5",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide flex items-center gap-1.5",children:[(0,i.jsx)(ex,{className:"w-3 h-3"})," Extracted Visuals"]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[x.length>24&&(0,i.jsx)("button",{type:"button",onClick:()=>g(e=>!e),className:"text-[9px] font-semibold text-blue-600 bg-blue-50 px-2 py-0.5 rounded border border-blue-100 hover:bg-blue-100 transition-colors",children:f?"Collapse":`Show All (${x.length})`}),(0,i.jsx)("span",{className:"text-[9px] bg-indigo-50 text-indigo-600 px-1.5 py-0.5 rounded border border-indigo-100 font-medium",children:"AI will analyze first 5 images during generation"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-4 gap-2 max-h-32 overflow-y-auto custom-scrollbar p-1",children:[b.map((e,t)=>{let r=e.id||`${e.url||e.altText||"image"}-${t}`,n=!!e.ignored;return(0,i.jsxs)("div",{className:`relative group rounded-md overflow-hidden border aspect-square shadow-sm transition-all ${n?"border-gray-300":"border-gray-200 bg-white"} ${p?"cursor-pointer hover:border-blue-200":""}`,onClick:()=>p?.(e),title:n?"Click to include again":"Click to ignore this image",children:[(0,i.jsx)("div",{className:"absolute top-1 right-1 z-10",children:(0,i.jsx)("input",{type:"checkbox",checked:!n,readOnly:!p,onChange:t=>{t.stopPropagation(),p?.(e)},onClick:e=>e.stopPropagation(),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-label":n?"Include image":"Exclude image"})}),e.url?(0,i.jsx)("img",{src:e.url,loading:"lazy",alt:e.altText,className:`w-full h-full object-cover transition ${n?"grayscale opacity-60":""}`}):(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 text-gray-300",children:(0,i.jsx)(ex,{className:"w-4 h-4"})}),n&&(0,i.jsx)("div",{className:"absolute inset-0 bg-black/30"})]},r)}),v>0&&!f&&(0,i.jsxs)("button",{type:"button",onClick:()=>g(!0),className:"flex items-center justify-center text-[10px] font-semibold text-blue-600 bg-white border border-blue-100 rounded-md h-full min-h-[72px] hover:bg-blue-50 transition-colors col-span-4",children:["+ ",v," more"]})]})]})]})]})]})},ew=c("layout-template",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]),eN=c("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);var e$=e=>e instanceof Date,eS=e=>null==e,ej=e=>!eS(e)&&!Array.isArray(e)&&"object"==typeof e&&!e$(e),eT="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function e_(e){let t,r=Array.isArray(e),n="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{let i;if(!(!(eT&&(e instanceof Blob||n))&&(r||ej(e))))return e;if(t=r?[]:Object.create(Object.getPrototypeOf(e)),r||ej(i=e.constructor&&e.constructor.prototype)&&i.hasOwnProperty("isPrototypeOf"))for(let r in e)e.hasOwnProperty(r)&&(t[r]=e_(e[r]));else t=e}return t}var eI=e=>void 0===e,eC=e=>Array.isArray(e)?e.filter(Boolean):[],eA=e=>eC(e.replace(/["|']|\]/g,"").split(/\.|\[/)),eO=(e,t,r)=>{if(!t||!ej(e))return r;let n=(/^\w*$/.test(t)?[t]:eA(t)).reduce((e,t)=>eS(e)?e:e[t],e);return eI(n)||n===e?eI(e[t])?r:e[t]:n},eE=(e,t,r)=>{let n=-1,i=/^\w*$/.test(t)?[t]:eA(t),s=i.length,a=s-1;for(;++n<s;){let t=i[n],s=r;if(n!==a){let r=e[t];s=ej(r)||Array.isArray(r)?r:isNaN(+i[n+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=s,e=e[t]}};let eM="onChange",ez="onSubmit",eP="maxLength",eD="minLength",eR="pattern",eL="required";s.default.createContext(null).displayName="HookFormContext";let eU="undefined"!=typeof window?s.default.useLayoutEffect:s.default.useEffect;var eF=e=>"string"==typeof e,eZ=e=>eS(e)||"object"!=typeof e;function eB(e,t,r=new WeakSet){if(eZ(e)||eZ(t))return Object.is(e,t);if(e$(e)&&e$(t))return e.getTime()===t.getTime();let n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;if(r.has(e)||r.has(t))return!0;for(let s of(r.add(e),r.add(t),n)){let n=e[s];if(!i.includes(s))return!1;if("ref"!==s){let e=t[s];if(e$(n)&&e$(e)||ej(n)&&ej(e)||Array.isArray(n)&&Array.isArray(e)?!eB(n,e,r):!Object.is(n,e))return!1}}return!0}var eV=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},eH=e=>Array.isArray(e)?e:[e],eW=()=>{let e=[];return{get observers(){return e},next:t=>{for(let r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},eK=e=>ej(e)&&!Object.keys(e).length,eq=e=>"function"==typeof e,eJ=e=>{if(!eT)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},eG=e=>eJ(e)&&e.isConnected;function eY(e,t){let r=Array.isArray(t)?t:/^\w*$/.test(t)?[t]:eA(t),n=1===r.length?e:function(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=eI(e)?n++:e[t[n++]];return e}(e,r),i=r.length-1,s=r[i];return n&&delete n[s],0!==i&&(ej(n)&&eK(n)||Array.isArray(n)&&function(e){for(let t in e)if(e.hasOwnProperty(t)&&!eI(e[t]))return!1;return!0}(n))&&eY(e,r.slice(0,-1)),e}function eX(e){return Array.isArray(e)||ej(e)&&!(e=>{for(let t in e)if(eq(e[t]))return!0;return!1})(e)}function eQ(e,t={}){for(let r in e){let n=e[r];eX(n)?(t[r]=Array.isArray(n)?[]:{},eQ(n,t[r])):eI(n)||(t[r]=!0)}return t}function e0(e,t,r){for(let n in r||(r=eQ(t)),e){let i=e[n];if(eX(i))eI(t)||eZ(r[n])?r[n]=eQ(i,Array.isArray(i)?[]:{}):e0(i,eS(t)?{}:t[n],r[n]);else{let e=t[n];r[n]=!eB(i,e)}}return r}let e1={value:!1,isValid:!1},e2={value:!0,isValid:!0};var e4=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!eI(e[0].attributes.value)?eI(e[0].value)||""===e[0].value?e2:{value:e[0].value,isValid:!0}:e2:e1}return e1},e5=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>eI(e)?e:t?""===e?NaN:e?+e:e:r&&eF(e)?new Date(e):n?n(e):e;let e6={isValid:!1,value:null};var e3=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,e6):e6;function e9(e){let t=e.ref;return"file"===t.type?t.files:"radio"===t.type?e3(e.refs).value:"select-multiple"===t.type?[...t.selectedOptions].map(({value:e})=>e):"checkbox"===t.type?e4(e.refs).value:e5(eI(t.value)?e.ref.value:t.value,e)}var e7=e=>eI(e)?e:e instanceof RegExp?e.source:ej(e)?e.value instanceof RegExp?e.value.source:e.value:e,e8=e=>({isOnSubmit:!e||e===ez,isOnBlur:"onBlur"===e,isOnChange:e===eM,isOnAll:"all"===e,isOnTouch:"onTouched"===e});let te="AsyncFunction";var tt=e=>!!e&&!!e.validate&&!!(eq(e.validate)&&e.validate.constructor.name===te||ej(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===te)),tr=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));let tn=(e,t,r,n)=>{for(let i of r||Object.keys(e)){let r=eO(e,i);if(r){let{_f:e,...s}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!n)return!0;else if(e.ref&&t(e.ref,e.name)&&!n)return!0;else if(tn(s,t))break}else if(ej(s)&&tn(s,t))break}}};function ti(e,t,r){let n=eO(e,r);if(n||/^\w*$/.test(r))return{error:n,name:r};let i=r.split(".");for(;i.length;){let n=i.join("."),s=eO(t,n),a=eO(e,n);if(s&&!Array.isArray(s)&&r!==n)break;if(a&&a.type)return{name:n,error:a};if(a&&a.root&&a.root.type)return{name:`${n}.root`,error:a.root};i.pop()}return{name:r}}var ts=(e,t,r)=>{let n=eH(eO(e,r));return eE(n,"root",t[r]),eE(e,r,n),e};function ta(e,t,r="validate"){if(eF(e)||Array.isArray(e)&&e.every(eF)||"boolean"==typeof e&&!e)return{type:r,message:eF(e)?e:"",ref:t}}var to=e=>!ej(e)||e instanceof RegExp?{value:e,message:""}:e,tl=async(e,t,r,n,i,s)=>{let{ref:a,refs:o,required:l,maxLength:d,minLength:c,min:u,max:p,pattern:h,validate:m,name:f,valueAsNumber:g,mount:y}=e._f,x=eO(r,f);if(!y||t.has(f))return{};let b=o?o[0]:a,v=e=>{i&&b.reportValidity&&(b.setCustomValidity("boolean"==typeof e?"":e||""),b.reportValidity())},k={},w="radio"===a.type,N="checkbox"===a.type,$=(g||"file"===a.type)&&eI(a.value)&&eI(x)||eJ(a)&&""===a.value||""===x||Array.isArray(x)&&!x.length,S=eV.bind(null,f,n,k),j=(e,t,r,n=eP,i=eD)=>{let s=e?t:r;k[f]={type:e?n:i,message:s,ref:a,...S(e?n:i,s)}};if(s?!Array.isArray(x)||!x.length:l&&(!(w||N)&&($||eS(x))||"boolean"==typeof x&&!x||N&&!e4(o).isValid||w&&!e3(o).isValid)){let{value:e,message:t}=eF(l)?{value:!!l,message:l}:to(l);if(e&&(k[f]={type:eL,message:t,ref:b,...S(eL,t)},!n))return v(t),k}if(!$&&(!eS(u)||!eS(p))){let e,t,r=to(p),i=to(u);if(eS(x)||isNaN(x)){let n=a.valueAsDate||new Date(x),s=e=>new Date(new Date().toDateString()+" "+e),o="time"==a.type,l="week"==a.type;eF(r.value)&&x&&(e=o?s(x)>s(r.value):l?x>r.value:n>new Date(r.value)),eF(i.value)&&x&&(t=o?s(x)<s(i.value):l?x<i.value:n<new Date(i.value))}else{let n=a.valueAsNumber||(x?+x:x);eS(r.value)||(e=n>r.value),eS(i.value)||(t=n<i.value)}if((e||t)&&(j(!!e,r.message,i.message,"max","min"),!n))return v(k[f].message),k}if((d||c)&&!$&&(eF(x)||s&&Array.isArray(x))){let e=to(d),t=to(c),r=!eS(e.value)&&x.length>+e.value,i=!eS(t.value)&&x.length<+t.value;if((r||i)&&(j(r,e.message,t.message),!n))return v(k[f].message),k}if(h&&!$&&eF(x)){let{value:e,message:t}=to(h);if(e instanceof RegExp&&!x.match(e)&&(k[f]={type:eR,message:t,ref:a,...S(eR,t)},!n))return v(t),k}if(m){if(eq(m)){let e=ta(await m(x,r),b);if(e&&(k[f]={...e,...S("validate",e.message)},!n))return v(e.message),k}else if(ej(m)){let e={};for(let t in m){if(!eK(e)&&!n)break;let i=ta(await m[t](x,r),b,t);i&&(e={...i,...S(t,i.message)},v(i.message),n&&(k[f]=e))}if(!eK(e)&&(k[f]={ref:b,...e},!n))return k}}return v(!0),k};let td={mode:ez,reValidateMode:eM,shouldFocusError:!0},tc=(e,t,r)=>{if(e&&"reportValidity"in e){let n=eO(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},tu=(e,t)=>{for(let r in t.fields){let n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?tc(n.ref,r,e):n&&n.refs&&n.refs.forEach(t=>tc(t,r,e))}},tp=(e,t)=>{t.shouldUseNativeValidation&&tu(e,t);let r={};for(let n in e){let i=eO(t.fields,n),s=Object.assign(e[n]||{},{ref:i&&i.ref});if(th(t.names||Object.keys(e),n)){let e=Object.assign({},eO(r,n));eE(e,"root",s),eE(r,n,e)}else eE(r,n,s)}return r},th=(e,t)=>{let r=tm(t);return e.some(e=>tm(e).match(`^${r}\\.\\d+`))};function tm(e){return e.replace(/\]|\[/g,"")}let tf=Object.freeze({status:"aborted"});function tg(e,t,r){function n(r,n){if(r._zod||Object.defineProperty(r,"_zod",{value:{def:n,constr:a,traits:new Set},enumerable:!1}),r._zod.traits.has(e))return;r._zod.traits.add(e),t(r,n);let i=a.prototype,s=Object.keys(i);for(let e=0;e<s.length;e++){let t=s[e];t in r||(r[t]=i[t].bind(r))}}let i=r?.Parent??Object;class s extends i{}function a(e){var t;let i=r?.Parent?new s:this;for(let r of(n(i,e),(t=i._zod).deferred??(t.deferred=[]),i._zod.deferred))r();return i}return Object.defineProperty(s,"name",{value:e}),Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:t=>!!r?.Parent&&t instanceof r.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}let ty=Symbol("zod_brand");class tx extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class tb extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}let tv={};function tk(e){return e&&Object.assign(tv,e),tv}function tw(e){return e}function tN(e){return e}function t$(e){}function tS(e){throw Error()}function tj(e){}function tT(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function t_(e,t="|"){return e.map(e=>t4(e)).join(t)}function tI(e,t){return"bigint"==typeof t?t.toString():t}function tC(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function tA(e){return null==e}function tO(e){let t=+!!e.startsWith("^"),r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function tE(e,t){let r=(e.toString().split(".")[1]||"").length,n=t.toString(),i=(n.split(".")[1]||"").length;if(0===i&&/\d?e-\d?/.test(n)){let e=n.match(/\d?e-(\d?)/);e?.[1]&&(i=Number.parseInt(e[1]))}let s=r>i?r:i;return Number.parseInt(e.toFixed(s).replace(".",""))%Number.parseInt(t.toFixed(s).replace(".",""))/10**s}e.s(["$ZodAsyncError",()=>tx,"$ZodEncodeError",()=>tb,"$brand",0,ty,"$constructor",()=>tg,"NEVER",0,tf,"config",()=>tk,"globalConfig",0,tv],97753);let tM=Symbol("evaluating");function tz(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==tM)return void 0===n&&(n=tM,n=r()),n},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function tP(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function tD(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function tR(...e){let t={};for(let r of e)Object.assign(t,Object.getOwnPropertyDescriptors(r));return Object.defineProperties({},t)}function tL(e){return tR(e._zod.def)}function tU(e,t){return t?t.reduce((e,t)=>e?.[t],e):e}function tF(e){let t=Object.keys(e);return Promise.all(t.map(t=>e[t])).then(e=>{let r={};for(let n=0;n<t.length;n++)r[t[n]]=e[n];return r})}function tZ(e=10){let t="abcdefghijklmnopqrstuvwxyz",r="";for(let n=0;n<e;n++)r+=t[Math.floor(Math.random()*t.length)];return r}function tB(e){return JSON.stringify(e)}function tV(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}let tH="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function tW(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let tK=tC(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function tq(e){if(!1===tW(e))return!1;let t=e.constructor;if(void 0===t||"function"!=typeof t)return!0;let r=t.prototype;return!1!==tW(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function tJ(e){return tq(e)?{...e}:Array.isArray(e)?[...e]:e}function tG(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}let tY=new Set(["string","number","symbol"]),tX=new Set(["string","number","bigint","boolean","symbol","undefined"]);function tQ(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t0(e,t,r){let n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function t1(e){if(!e)return{};if("string"==typeof e)return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");e.error=e.message}return(delete e.message,"string"==typeof e.error)?{...e,error:()=>e.error}:e}function t2(e){let t;return new Proxy({},{get:(r,n,i)=>(t??(t=e()),Reflect.get(t,n,i)),set:(r,n,i,s)=>(t??(t=e()),Reflect.set(t,n,i,s)),has:(r,n)=>(t??(t=e()),Reflect.has(t,n)),deleteProperty:(r,n)=>(t??(t=e()),Reflect.deleteProperty(t,n)),ownKeys:r=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(r,n)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,n)),defineProperty:(r,n,i)=>(t??(t=e()),Reflect.defineProperty(t,n,i))})}function t4(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function t5(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}let t6={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},t3={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function t9(e,t){let r=e._zod.def,n=tR(e._zod.def,{get shape(){let e={};for(let n in t){if(!(n in r.shape))throw Error(`Unrecognized key: "${n}"`);t[n]&&(e[n]=r.shape[n])}return tD(this,"shape",e),e},checks:[]});return t0(e,n)}function t7(e,t){let r=e._zod.def,n=tR(e._zod.def,{get shape(){let n={...e._zod.def.shape};for(let e in t){if(!(e in r.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete n[e]}return tD(this,"shape",n),n},checks:[]});return t0(e,n)}function t8(e,t){if(!tq(t))throw Error("Invalid input to extend: expected a plain object");let r=e._zod.def.checks;if(r&&r.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let n=tR(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t};return tD(this,"shape",r),r},checks:[]});return t0(e,n)}function re(e,t){if(!tq(t))throw Error("Invalid input to safeExtend: expected a plain object");let r={...e._zod.def,get shape(){let r={...e._zod.def.shape,...t};return tD(this,"shape",r),r},checks:e._zod.def.checks};return t0(e,r)}function rt(e,t){let r=tR(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return tD(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return t0(e,r)}function rr(e,t,r){let n=tR(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in n))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=e?new e({type:"optional",innerType:n[t]}):n[t])}else for(let t in n)i[t]=e?new e({type:"optional",innerType:n[t]}):n[t];return tD(this,"shape",i),i},checks:[]});return t0(t,n)}function rn(e,t,r){let n=tR(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=new e({type:"nonoptional",innerType:n[t]}))}else for(let t in n)i[t]=new e({type:"nonoptional",innerType:n[t]});return tD(this,"shape",i),i},checks:[]});return t0(t,n)}function ri(e,t=0){if(!0===e.aborted)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function rs(e,t){return t.map(t=>(t.path??(t.path=[]),t.path.unshift(e),t))}function ra(e){return"string"==typeof e?e:e?.message}function ro(e,t,r){let n={...e,path:e.path??[]};return e.message||(n.message=ra(e.inst?._zod.def?.error?.(e))??ra(t?.error?.(e))??ra(r.customError?.(e))??ra(r.localeError?.(e))??"Invalid input"),delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function rl(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function rd(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function rc(...e){let[t,r,n]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:n}:{...t}}function ru(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function rp(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function rh(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function rm(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-t.length%4)%4);return rp(t+r)}function rf(e){return rh(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function rg(e){let t=e.replace(/^0x/,"");if(t.length%2!=0)throw Error("Invalid hex string length");let r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2)r[e/2]=Number.parseInt(t.slice(e,e+2),16);return r}function ry(e){return Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}class rx{constructor(...e){}}e.s(["BIGINT_FORMAT_RANGES",0,t3,"Class",()=>rx,"NUMBER_FORMAT_RANGES",0,t6,"aborted",()=>ri,"allowsEval",0,tK,"assert",()=>tj,"assertEqual",()=>tw,"assertIs",()=>t$,"assertNever",()=>tS,"assertNotEqual",()=>tN,"assignProp",()=>tD,"base64ToUint8Array",()=>rp,"base64urlToUint8Array",()=>rm,"cached",()=>tC,"captureStackTrace",0,tH,"cleanEnum",()=>ru,"cleanRegex",()=>tO,"clone",()=>t0,"cloneDef",()=>tL,"createTransparentProxy",()=>t2,"defineLazy",()=>tz,"esc",()=>tB,"escapeRegex",()=>tQ,"extend",()=>t8,"finalizeIssue",()=>ro,"floatSafeRemainder",()=>tE,"getElementAtPath",()=>tU,"getEnumValues",()=>tT,"getLengthableOrigin",()=>rd,"getParsedType",0,e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return"promise";if("undefined"!=typeof Map&&e instanceof Map)return"map";if("undefined"!=typeof Set&&e instanceof Set)return"set";if("undefined"!=typeof Date&&e instanceof Date)return"date";if("undefined"!=typeof File&&e instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${t}`)}},"getSizableOrigin",()=>rl,"hexToUint8Array",()=>rg,"isObject",()=>tW,"isPlainObject",()=>tq,"issue",()=>rc,"joinValues",()=>t_,"jsonStringifyReplacer",()=>tI,"merge",()=>rt,"mergeDefs",()=>tR,"normalizeParams",()=>t1,"nullish",()=>tA,"numKeys",()=>tG,"objectClone",()=>tP,"omit",()=>t7,"optionalKeys",()=>t5,"partial",()=>rr,"pick",()=>t9,"prefixIssues",()=>rs,"primitiveTypes",0,tX,"promiseAllObject",()=>tF,"propertyKeyTypes",0,tY,"randomString",()=>tZ,"required",()=>rn,"safeExtend",()=>re,"shallowClone",()=>tJ,"slugify",()=>tV,"stringifyPrimitive",()=>t4,"uint8ArrayToBase64",()=>rh,"uint8ArrayToBase64url",()=>rf,"uint8ArrayToHex",()=>ry,"unwrapMessage",()=>ra],4886);let rb=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,tI,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},rv=tg("$ZodError",rb),rk=tg("$ZodError",rb,{Parent:Error});function rw(e,t=e=>e.message){let r={},n=[];for(let i of e.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}function rN(e,t=e=>e.message){let r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code&&i.errors.length)i.errors.map(e=>n({issues:e}));else if("invalid_key"===i.code)n({issues:i.issues});else if("invalid_element"===i.code)n({issues:i.issues});else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(e),r}function r$(e,t=e=>e.message){let r={errors:[]},n=(e,i=[])=>{var s,a;for(let o of e.issues)if("invalid_union"===o.code&&o.errors.length)o.errors.map(e=>n({issues:e},o.path));else if("invalid_key"===o.code)n({issues:o.issues},o.path);else if("invalid_element"===o.code)n({issues:o.issues},o.path);else{let e=[...i,...o.path];if(0===e.length){r.errors.push(t(o));continue}let n=r,l=0;for(;l<e.length;){let r=e[l],i=l===e.length-1;"string"==typeof r?(n.properties??(n.properties={}),(s=n.properties)[r]??(s[r]={errors:[]}),n=n.properties[r]):(n.items??(n.items=[]),(a=n.items)[r]??(a[r]={errors:[]}),n=n.items[r]),i&&n.errors.push(t(o)),l++}}};return n(e),r}function rS(e){let t=[];for(let r of e.map(e=>"object"==typeof e?e.key:e))"number"==typeof r?t.push(`[${r}]`):"symbol"==typeof r?t.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?t.push(`[${JSON.stringify(r)}]`):(t.length&&t.push("."),t.push(r));return t.join("")}function rj(e){let t=[];for(let r of[...e.issues].sort((e,t)=>(e.path??[]).length-(t.path??[]).length))t.push(`âœ– ${r.message}`),r.path?.length&&t.push(`  â†’ at ${rS(r.path)}`);return t.join("\n")}e.s(["$ZodError",0,rv,"$ZodRealError",0,rk,"flattenError",()=>rw,"formatError",()=>rN,"prettifyError",()=>rj,"toDotPath",()=>rS,"treeifyError",()=>r$],74969);let rT=e=>(t,r,n,i)=>{let s=n?Object.assign(n,{async:!1}):{async:!1},a=t._zod.run({value:r,issues:[]},s);if(a instanceof Promise)throw new tx;if(a.issues.length){let t=new(i?.Err??e)(a.issues.map(e=>ro(e,s,tk())));throw tH(t,i?.callee),t}return a.value},r_=rT(rk),rI=e=>async(t,r,n,i)=>{let s=n?Object.assign(n,{async:!0}):{async:!0},a=t._zod.run({value:r,issues:[]},s);if(a instanceof Promise&&(a=await a),a.issues.length){let t=new(i?.Err??e)(a.issues.map(e=>ro(e,s,tk())));throw tH(t,i?.callee),t}return a.value},rC=rI(rk),rA=e=>(t,r,n)=>{let i=n?{...n,async:!1}:{async:!1},s=t._zod.run({value:r,issues:[]},i);if(s instanceof Promise)throw new tx;return s.issues.length?{success:!1,error:new(e??rv)(s.issues.map(e=>ro(e,i,tk())))}:{success:!0,data:s.value}},rO=rA(rk),rE=e=>async(t,r,n)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},s=t._zod.run({value:r,issues:[]},i);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(e=>ro(e,i,tk())))}:{success:!0,data:s.value}},rM=rE(rk),rz=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return rT(e)(t,r,i)},rP=rz(rk),rD=e=>(t,r,n)=>rT(e)(t,r,n),rR=rD(rk),rL=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return rI(e)(t,r,i)},rU=rL(rk),rF=e=>async(t,r,n)=>rI(e)(t,r,n),rZ=rF(rk),rB=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return rA(e)(t,r,i)},rV=rB(rk),rH=e=>(t,r,n)=>rA(e)(t,r,n),rW=rH(rk),rK=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return rE(e)(t,r,i)},rq=rK(rk),rJ=e=>async(t,r,n)=>rE(e)(t,r,n),rG=rJ(rk);e.s(["_decode",0,rD,"_decodeAsync",0,rF,"_encode",0,rz,"_encodeAsync",0,rL,"_parse",0,rT,"_parseAsync",0,rI,"_safeDecode",0,rH,"_safeDecodeAsync",0,rJ,"_safeEncode",0,rB,"_safeEncodeAsync",0,rK,"_safeParse",0,rA,"_safeParseAsync",0,rE,"decode",0,rR,"decodeAsync",0,rZ,"encode",0,rP,"encodeAsync",0,rU,"parse",0,r_,"parseAsync",0,rC,"safeDecode",0,rW,"safeDecodeAsync",0,rG,"safeEncode",0,rV,"safeEncodeAsync",0,rq,"safeParse",0,rO,"safeParseAsync",0,rM],3108);let rY=/^[cC][^\s-]{8,}$/,rX=/^[0-9a-z]+$/,rQ=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,r0=/^[0-9a-vA-V]{20}$/,r1=/^[A-Za-z0-9]{27}$/,r2=/^[a-zA-Z0-9_-]{21}$/,r4=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,r5=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,r6=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,r3=r6(4),r9=r6(6),r7=r6(7),r8=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ne=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u;function nt(){return RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}let nr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,nn=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,ni=e=>{let t=tQ(e??":");return RegExp(`^(?:[0-9A-F]{2}${t}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${t}){5}[0-9a-f]{2}$`)},ns=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,na=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,no=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,nl=/^[A-Za-z0-9_-]*$/,nd=/^\+(?:[0-9]){6,14}[0-9]$/,nc="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",nu=RegExp(`^${nc}$`);function np(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function nh(e){return RegExp(`^${np(e)}$`)}function nm(e){let t=np({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${t}(?:${r.join("|")})`;return RegExp(`^${nc}T(?:${n})$`)}let nf=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${t}$`)},ng=/^-?\d+n?$/,ny=/^-?\d+$/,nx=/^-?\d+(?:\.\d+)?/,nb=/^(?:true|false)$/i,nv=/^null$/i,nk=/^undefined$/i,nw=/^[^A-Z]*$/,nN=/^[^a-z]*$/;function n$(e,t){return RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function nS(e){return RegExp(`^[A-Za-z0-9_-]{${e}}$`)}let nj=n$(22,"=="),nT=nS(22),n_=n$(27,"="),nI=nS(27),nC=n$(43,"="),nA=nS(43),nO=n$(64,""),nE=nS(64),nM=n$(86,"=="),nz=nS(86);e.s(["base64",0,no,"base64url",0,nl,"bigint",0,ng,"boolean",0,nb,"browserEmail",0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"cidrv4",0,ns,"cidrv6",0,na,"cuid",0,rY,"cuid2",0,rX,"date",0,nu,"datetime",()=>nm,"domain",0,/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,"duration",0,r4,"e164",0,nd,"email",0,r8,"emoji",()=>nt,"extendedDuration",0,/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,"guid",0,r5,"hex",0,/^[0-9a-fA-F]*$/,"hostname",0,/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,"html5Email",0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"idnEmail",0,ne,"integer",0,ny,"ipv4",0,nr,"ipv6",0,nn,"ksuid",0,r1,"lowercase",0,nw,"mac",0,ni,"md5_base64",0,nj,"md5_base64url",0,nT,"md5_hex",0,/^[0-9a-fA-F]{32}$/,"nanoid",0,r2,"null",()=>nv,"number",0,nx,"rfc5322Email",0,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"sha1_base64",0,n_,"sha1_base64url",0,nI,"sha1_hex",0,/^[0-9a-fA-F]{40}$/,"sha256_base64",0,nC,"sha256_base64url",0,nA,"sha256_hex",0,/^[0-9a-fA-F]{64}$/,"sha384_base64",0,nO,"sha384_base64url",0,nE,"sha384_hex",0,/^[0-9a-fA-F]{96}$/,"sha512_base64",0,nM,"sha512_base64url",0,nz,"sha512_hex",0,/^[0-9a-fA-F]{128}$/,"string",0,nf,"time",()=>nh,"ulid",0,rQ,"undefined",()=>nk,"unicodeEmail",0,ne,"uppercase",0,nN,"uuid",0,r6,"uuid4",0,r3,"uuid6",0,r9,"uuid7",0,r7,"xid",0,r0],82358);let nP=tg("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),nD={number:"number",bigint:"bigint",object:"date"},nR=tg("$ZodCheckLessThan",(e,t)=>{nP.init(e,t);let r=nD[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.maximum:r.exclusiveMaximum)??1/0;t.value<n&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),nL=tg("$ZodCheckGreaterThan",(e,t)=>{nP.init(e,t);let r=nD[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.minimum:r.exclusiveMinimum)??-1/0;t.value>n&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),nU=tg("$ZodCheckMultipleOf",(e,t)=>{nP.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value===BigInt(0):0===tE(r.value,t.value))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),nF=tg("$ZodCheckNumberFormat",(e,t)=>{nP.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),n=r?"int":"number",[i,s]=t6[t.format];e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,n.minimum=i,n.maximum=s,r&&(n.pattern=ny)}),e._zod.check=a=>{let o=a.value;if(r){if(!Number.isInteger(o))return void a.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:o,inst:e});if(!Number.isSafeInteger(o))return void(o>0?a.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):a.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}))}o<i&&a.issues.push({origin:"number",input:o,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),o>s&&a.issues.push({origin:"number",input:o,code:"too_big",maximum:s,inst:e})}}),nZ=tg("$ZodCheckBigIntFormat",(e,t)=>{nP.init(e,t);let[r,n]=t3[t.format];e._zod.onattach.push(e=>{let i=e._zod.bag;i.format=t.format,i.minimum=r,i.maximum=n}),e._zod.check=i=>{let s=i.value;s<r&&i.issues.push({origin:"bigint",input:s,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),s>n&&i.issues.push({origin:"bigint",input:s,code:"too_big",maximum:n,inst:e})}}),nB=tg("$ZodCheckMaxSize",(e,t)=>{var r;nP.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!tA(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;n.size<=t.maximum||r.issues.push({origin:rl(n),code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),nV=tg("$ZodCheckMinSize",(e,t)=>{var r;nP.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!tA(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;n.size>=t.minimum||r.issues.push({origin:rl(n),code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),nH=tg("$ZodCheckSizeEquals",(e,t)=>{var r;nP.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!tA(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.size,r.maximum=t.size,r.size=t.size}),e._zod.check=r=>{let n=r.value,i=n.size;if(i===t.size)return;let s=i>t.size;r.issues.push({origin:rl(n),...s?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),nW=tg("$ZodCheckMaxLength",(e,t)=>{var r;nP.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!tA(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;if(n.length<=t.maximum)return;let i=rd(n);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),nK=tg("$ZodCheckMinLength",(e,t)=>{var r;nP.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!tA(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;if(n.length>=t.minimum)return;let i=rd(n);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),nq=tg("$ZodCheckLengthEquals",(e,t)=>{var r;nP.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!tA(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let n=r.value,i=n.length;if(i===t.length)return;let s=rd(n),a=i>t.length;r.issues.push({origin:s,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),nJ=tg("$ZodCheckStringFormat",(e,t)=>{var r,n;nP.init(e,t),e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),nG=tg("$ZodCheckRegex",(e,t)=>{nJ.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),nY=tg("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=nw),nJ.init(e,t)}),nX=tg("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=nN),nJ.init(e,t)}),nQ=tg("$ZodCheckIncludes",(e,t)=>{nP.init(e,t);let r=tQ(t.includes),n=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),n0=tg("$ZodCheckStartsWith",(e,t)=>{nP.init(e,t);let r=RegExp(`^${tQ(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),n1=tg("$ZodCheckEndsWith",(e,t)=>{nP.init(e,t);let r=RegExp(`.*${tQ(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}});function n2(e,t,r){e.issues.length&&t.issues.push(...rs(r,e.issues))}let n4=tg("$ZodCheckProperty",(e,t)=>{nP.init(e,t),e._zod.check=e=>{let r=t.schema._zod.run({value:e.value[t.property],issues:[]},{});if(r instanceof Promise)return r.then(r=>n2(r,e,t.property));n2(r,e,t.property)}}),n5=tg("$ZodCheckMimeType",(e,t)=>{nP.init(e,t);let r=new Set(t.mime);e._zod.onattach.push(e=>{e._zod.bag.mime=t.mime}),e._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:t.mime,input:n.value.type,inst:e,continue:!t.abort})}}),n6=tg("$ZodCheckOverwrite",(e,t)=>{nP.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});e.s(["$ZodCheck",0,nP,"$ZodCheckBigIntFormat",0,nZ,"$ZodCheckEndsWith",0,n1,"$ZodCheckGreaterThan",0,nL,"$ZodCheckIncludes",0,nQ,"$ZodCheckLengthEquals",0,nq,"$ZodCheckLessThan",0,nR,"$ZodCheckLowerCase",0,nY,"$ZodCheckMaxLength",0,nW,"$ZodCheckMaxSize",0,nB,"$ZodCheckMimeType",0,n5,"$ZodCheckMinLength",0,nK,"$ZodCheckMinSize",0,nV,"$ZodCheckMultipleOf",0,nU,"$ZodCheckNumberFormat",0,nF,"$ZodCheckOverwrite",0,n6,"$ZodCheckProperty",0,n4,"$ZodCheckRegex",0,nG,"$ZodCheckSizeEquals",0,nH,"$ZodCheckStartsWith",0,n0,"$ZodCheckStringFormat",0,nJ,"$ZodCheckUpperCase",0,nX],55605);class n3{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}e.s(["Doc",()=>n3],98530);let n9={major:4,minor:1,patch:13};e.s(["version",0,n9],98477);let n7=tg("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=n9;let n=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&n.unshift(e),n))for(let r of t._zod.onattach)r(e);if(0===n.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let n,i=ri(e);for(let s of t){if(s._zod.def.when){if(!s._zod.def.when(e))continue}else if(i)continue;let t=e.issues.length,a=s._zod.check(e);if(a instanceof Promise&&r?.async===!1)throw new tx;if(n||a instanceof Promise)n=(n??Promise.resolve()).then(async()=>{await a,e.issues.length!==t&&(i||(i=ri(e,t)))});else{if(e.issues.length===t)continue;i||(i=ri(e,t))}}return n?n.then(()=>e):e},r=(r,i,s)=>{if(ri(r))return r.aborted=!0,r;let a=t(i,n,s);if(a instanceof Promise){if(!1===s.async)throw new tx;return a.then(t=>e._zod.parse(t,s))}return e._zod.parse(a,s)};e._zod.run=(i,s)=>{if(s.skipChecks)return e._zod.parse(i,s);if("backward"===s.direction){let t=e._zod.parse({value:i.value,issues:[]},{...s,skipChecks:!0});return t instanceof Promise?t.then(e=>r(e,i,s)):r(t,i,s)}let a=e._zod.parse(i,s);if(a instanceof Promise){if(!1===s.async)throw new tx;return a.then(e=>t(e,n,s))}return t(a,n,s)}}e["~standard"]={validate:t=>{try{let r=rO(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return rM(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),n8=tg("$ZodString",(e,t)=>{n7.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??nf(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch(e){}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),ie=tg("$ZodStringFormat",(e,t)=>{nJ.init(e,t),n8.init(e,t)}),it=tg("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=r5),ie.init(e,t)}),ir=tg("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=r6(e))}else t.pattern??(t.pattern=r6());ie.init(e,t)}),ii=tg("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=r8),ie.init(e,t)}),is=tg("$ZodURL",(e,t)=>{ie.init(e,t),e._zod.check=r=>{try{let n=r.value.trim(),i=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=i.href:r.value=n;return}catch(n){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),ia=tg("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=nt()),ie.init(e,t)}),io=tg("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=r2),ie.init(e,t)}),il=tg("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=rY),ie.init(e,t)}),id=tg("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=rX),ie.init(e,t)}),ic=tg("$ZodULID",(e,t)=>{t.pattern??(t.pattern=rQ),ie.init(e,t)}),iu=tg("$ZodXID",(e,t)=>{t.pattern??(t.pattern=r0),ie.init(e,t)}),ip=tg("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=r1),ie.init(e,t)}),ih=tg("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=nm(t)),ie.init(e,t)}),im=tg("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=nu),ie.init(e,t)}),ig=tg("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=nh(t)),ie.init(e,t)}),iy=tg("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=r4),ie.init(e,t)}),ix=tg("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=nr),ie.init(e,t),e._zod.bag.format="ipv4"}),ib=tg("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=nn),ie.init(e,t),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),iv=tg("$ZodMAC",(e,t)=>{t.pattern??(t.pattern=ni(t.delimiter)),ie.init(e,t),e._zod.bag.format="mac"}),ik=tg("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=ns),ie.init(e,t)}),iw=tg("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=na),ie.init(e,t),e._zod.check=r=>{let n=r.value.split("/");try{if(2!==n.length)throw Error();let[e,t]=n;if(!t)throw Error();let r=Number(t);if(`${r}`!==t||r<0||r>128)throw Error();new URL(`http://[${e}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function iN(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let i$=tg("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=no),ie.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{iN(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function iS(e){if(!nl.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return iN(t.padEnd(4*Math.ceil(t.length/4),"="))}let ij=tg("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=nl),ie.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{iS(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),iT=tg("$ZodE164",(e,t)=>{t.pattern??(t.pattern=nd),ie.init(e,t)});function i_(e,t=null){try{let r=e.split(".");if(3!==r.length)return!1;let[n]=r;if(!n)return!1;let i=JSON.parse(atob(n));if("typ"in i&&i?.typ!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))return!1;return!0}catch{return!1}}let iI=tg("$ZodJWT",(e,t)=>{ie.init(e,t),e._zod.check=r=>{i_(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),iC=tg("$ZodCustomStringFormat",(e,t)=>{ie.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}}),iA=tg("$ZodNumber",(e,t)=>{n7.init(e,t),e._zod.pattern=e._zod.bag.pattern??nx,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch(e){}let i=r.value;if("number"==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return r;let s="number"==typeof i?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...s?{received:s}:{}}),r}}),iO=tg("$ZodNumberFormat",(e,t)=>{nF.init(e,t),iA.init(e,t)}),iE=tg("$ZodBoolean",(e,t)=>{n7.init(e,t),e._zod.pattern=nb,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch(e){}let i=r.value;return"boolean"==typeof i||r.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),r}}),iM=tg("$ZodBigInt",(e,t)=>{n7.init(e,t),e._zod.pattern=ng,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch(e){}return"bigint"==typeof r.value||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),iz=tg("$ZodBigIntFormat",(e,t)=>{nZ.init(e,t),iM.init(e,t)}),iP=tg("$ZodSymbol",(e,t)=>{n7.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return"symbol"==typeof n||t.issues.push({expected:"symbol",code:"invalid_type",input:n,inst:e}),t}}),iD=tg("$ZodUndefined",(e,t)=>{n7.init(e,t),e._zod.pattern=nk,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,r)=>{let n=t.value;return void 0===n||t.issues.push({expected:"undefined",code:"invalid_type",input:n,inst:e}),t}}),iR=tg("$ZodNull",(e,t)=>{n7.init(e,t),e._zod.pattern=nv,e._zod.values=new Set([null]),e._zod.parse=(t,r)=>{let n=t.value;return null===n||t.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),t}}),iL=tg("$ZodAny",(e,t)=>{n7.init(e,t),e._zod.parse=e=>e}),iU=tg("$ZodUnknown",(e,t)=>{n7.init(e,t),e._zod.parse=e=>e}),iF=tg("$ZodNever",(e,t)=>{n7.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),iZ=tg("$ZodVoid",(e,t)=>{n7.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return void 0===n||t.issues.push({expected:"void",code:"invalid_type",input:n,inst:e}),t}}),iB=tg("$ZodDate",(e,t)=>{n7.init(e,t),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=new Date(r.value)}catch(e){}let i=r.value,s=i instanceof Date;return s&&!Number.isNaN(i.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:i,...s?{received:"Invalid Date"}:{},inst:e}),r}});function iV(e,t,r){e.issues.length&&t.issues.push(...rs(r,e.issues)),t.value[r]=e.value}let iH=tg("$ZodArray",(e,t)=>{n7.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),r;r.value=Array(i.length);let s=[];for(let e=0;e<i.length;e++){let a=i[e],o=t.element._zod.run({value:a,issues:[]},n);o instanceof Promise?s.push(o.then(t=>iV(t,r,e))):iV(o,r,e)}return s.length?Promise.all(s).then(()=>r):r}});function iW(e,t,r,n){e.issues.length&&t.issues.push(...rs(r,e.issues)),void 0===e.value?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function iK(e){let t=Object.keys(e.shape);for(let r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${r}": expected a Zod schema`);let r=t5(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function iq(e,t,r,n,i,s){let a=[],o=i.keySet,l=i.catchall._zod,d=l.def.type;for(let i in t){if(o.has(i))continue;if("never"===d){a.push(i);continue}let s=l.run({value:t[i],issues:[]},n);s instanceof Promise?e.push(s.then(e=>iW(e,r,i,t))):iW(s,r,i,t)}return(a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:t,inst:s}),e.length)?Promise.all(e).then(()=>r):r}let iJ=tg("$ZodObject",(e,t)=>{let r;n7.init(e,t);let n=Object.getOwnPropertyDescriptor(t,"shape");if(!n?.get){let e=t.shape;Object.defineProperty(t,"shape",{get:()=>{let r={...e};return Object.defineProperty(t,"shape",{value:r}),r}})}let i=tC(()=>iK(t));tz(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let n=e[t]._zod;if(n.values)for(let e of(r[t]??(r[t]=new Set),n.values))r[t].add(e)}return r});let s=t.catchall;e._zod.parse=(t,n)=>{r??(r=i.value);let a=t.value;if(!tW(a))return t.issues.push({expected:"object",code:"invalid_type",input:a,inst:e}),t;t.value={};let o=[],l=r.shape;for(let e of r.keys){let r=l[e]._zod.run({value:a[e],issues:[]},n);r instanceof Promise?o.push(r.then(r=>iW(r,t,e,a))):iW(r,t,e,a)}return s?iq(o,a,t,n,i.value,e):o.length?Promise.all(o).then(()=>t):t}}),iG=tg("$ZodObjectJIT",(e,t)=>{let r,n;iJ.init(e,t);let i=e._zod.parse,s=tC(()=>iK(t)),a=!tv.jitless,o=a&&tK.value,l=t.catchall;e._zod.parse=(d,c)=>{n??(n=s.value);let u=d.value;return tW(u)?a&&o&&c?.async===!1&&!0!==c.jitless?(r||(r=(e=>{let t=new n3(["shape","payload","ctx"]),r=s.value,n=e=>{let t=tB(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let i=Object.create(null),a=0;for(let e of r.keys)i[e]=`key_${a++}`;for(let e of(t.write("const newResult = {};"),r.keys)){let r=i[e],s=tB(e);t.write(`const ${r} = ${n(e)};`),t.write(`
        if (${r}.issues.length) {
          payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${s}, ...iss.path] : [${s}]
          })));
        }
        
        
        if (${r}.value === undefined) {
          if (${s} in input) {
            newResult[${s}] = undefined;
          }
        } else {
          newResult[${s}] = ${r}.value;
        }
        
      `)}t.write("payload.value = newResult;"),t.write("return payload;");let o=t.compile();return(t,r)=>o(e,t,r)})(t.shape)),d=r(d,c),l)?iq([],u,d,c,n,e):d:i(d,c):(d.issues.push({expected:"object",code:"invalid_type",input:u,inst:e}),d)}});function iY(e,t,r,n){for(let r of e)if(0===r.issues.length)return t.value=r.value,t;let i=e.filter(e=>!ri(e));return 1===i.length?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>ro(e,n,tk())))}),t)}let iX=tg("$ZodUnion",(e,t)=>{n7.init(e,t),tz(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),tz(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),tz(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),tz(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>tO(e.source)).join("|")})$`)}});let r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(i,s)=>{if(r)return n(i,s);let a=!1,o=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},s);if(t instanceof Promise)o.push(t),a=!0;else{if(0===t.issues.length)return t;o.push(t)}}return a?Promise.all(o).then(t=>iY(t,i,e,s)):iY(o,i,e,s)}}),iQ=tg("$ZodDiscriminatedUnion",(e,t)=>{iX.init(e,t);let r=e._zod.parse;tz(e._zod,"propValues",()=>{let e={};for(let r of t.options){let n=r._zod.propValues;if(!n||0===Object.keys(n).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let[t,r]of Object.entries(n))for(let n of(e[t]||(e[t]=new Set),r))e[t].add(n)}return e});let n=tC(()=>{let e=t.options,r=new Map;for(let n of e){let e=n._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(let t of e){if(r.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);r.set(t,n)}}return r});e._zod.parse=(i,s)=>{let a=i.value;if(!tW(a))return i.issues.push({code:"invalid_type",expected:"object",input:a,inst:e}),i;let o=n.value.get(a?.[t.discriminator]);return o?o._zod.run(i,s):t.unionFallback?r(i,s):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:a,path:[t.discriminator],inst:e}),i)}}),i0=tg("$ZodIntersection",(e,t)=>{n7.init(e,t),e._zod.parse=(e,r)=>{let n=e.value,i=t.left._zod.run({value:n,issues:[]},r),s=t.right._zod.run({value:n,issues:[]},r);return i instanceof Promise||s instanceof Promise?Promise.all([i,s]).then(([t,r])=>i1(e,t,r)):i1(e,i,s)}});function i1(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),ri(e))return e;let n=function e(t,r){if(t===r||t instanceof Date&&r instanceof Date&&+t==+r)return{valid:!0,data:t};if(tq(t)&&tq(r)){let n=Object.keys(r),i=Object.keys(t).filter(e=>-1!==n.indexOf(e)),s={...t,...r};for(let n of i){let i=e(t[n],r[n]);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};s[n]=i.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let i=0;i<t.length;i++){let s=e(t[i],r[i]);if(!s.valid)return{valid:!1,mergeErrorPath:[i,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}(t.value,r.value);if(!n.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}let i2=tg("$ZodTuple",(e,t)=>{n7.init(e,t);let r=t.items;e._zod.parse=(n,i)=>{let s=n.value;if(!Array.isArray(s))return n.issues.push({input:s,inst:e,expected:"tuple",code:"invalid_type"}),n;n.value=[];let a=[],o=[...r].reverse().findIndex(e=>"optional"!==e._zod.optin),l=-1===o?0:r.length-o;if(!t.rest){let t=s.length>r.length,i=s.length<l-1;if(t||i)return n.issues.push({...t?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:s,inst:e,origin:"array"}),n}let d=-1;for(let e of r){if(++d>=s.length&&d>=l)continue;let t=e._zod.run({value:s[d],issues:[]},i);t instanceof Promise?a.push(t.then(e=>i4(e,n,d))):i4(t,n,d)}if(t.rest)for(let e of s.slice(r.length)){d++;let r=t.rest._zod.run({value:e,issues:[]},i);r instanceof Promise?a.push(r.then(e=>i4(e,n,d))):i4(r,n,d)}return a.length?Promise.all(a).then(()=>n):n}});function i4(e,t,r){e.issues.length&&t.issues.push(...rs(r,e.issues)),t.value[r]=e.value}let i5=tg("$ZodRecord",(e,t)=>{n7.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!tq(i))return r.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),r;let s=[],a=t.keyType._zod.values;if(a){let o;r.value={};let l=new Set;for(let e of a)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){l.add("number"==typeof e?e.toString():e);let a=t.valueType._zod.run({value:i[e],issues:[]},n);a instanceof Promise?s.push(a.then(t=>{t.issues.length&&r.issues.push(...rs(e,t.issues)),r.value[e]=t.value})):(a.issues.length&&r.issues.push(...rs(e,a.issues)),r.value[e]=a.value)}for(let e in i)l.has(e)||(o=o??[]).push(e);o&&o.length>0&&r.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:o})}else for(let a of(r.value={},Reflect.ownKeys(i))){if("__proto__"===a)continue;let o=t.keyType._zod.run({value:a,issues:[]},n);if(o instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(o.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:o.issues.map(e=>ro(e,n,tk())),input:a,path:[a],inst:e}),r.value[o.value]=o.value;continue}let l=t.valueType._zod.run({value:i[a],issues:[]},n);l instanceof Promise?s.push(l.then(e=>{e.issues.length&&r.issues.push(...rs(a,e.issues)),r.value[o.value]=e.value})):(l.issues.length&&r.issues.push(...rs(a,l.issues)),r.value[o.value]=l.value)}return s.length?Promise.all(s).then(()=>r):r}}),i6=tg("$ZodMap",(e,t)=>{n7.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:i,inst:e}),r;let s=[];for(let[a,o]of(r.value=new Map,i)){let l=t.keyType._zod.run({value:a,issues:[]},n),d=t.valueType._zod.run({value:o,issues:[]},n);l instanceof Promise||d instanceof Promise?s.push(Promise.all([l,d]).then(([t,s])=>{i3(t,s,r,a,i,e,n)})):i3(l,d,r,a,i,e,n)}return s.length?Promise.all(s).then(()=>r):r}});function i3(e,t,r,n,i,s,a){e.issues.length&&(tY.has(typeof n)?r.issues.push(...rs(n,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:i,inst:s,issues:e.issues.map(e=>ro(e,a,tk()))})),t.issues.length&&(tY.has(typeof n)?r.issues.push(...rs(n,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:i,inst:s,key:n,issues:t.issues.map(e=>ro(e,a,tk()))})),r.value.set(e.value,t.value)}let i9=tg("$ZodSet",(e,t)=>{n7.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Set))return r.issues.push({input:i,inst:e,expected:"set",code:"invalid_type"}),r;let s=[];for(let e of(r.value=new Set,i)){let i=t.valueType._zod.run({value:e,issues:[]},n);i instanceof Promise?s.push(i.then(e=>i7(e,r))):i7(i,r)}return s.length?Promise.all(s).then(()=>r):r}});function i7(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}let i8=tg("$ZodEnum",(e,t)=>{n7.init(e,t);let r=tT(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=RegExp(`^(${r.filter(e=>tY.has(typeof e)).map(e=>"string"==typeof e?tQ(e):e.toString()).join("|")})$`),e._zod.parse=(t,i)=>{let s=t.value;return n.has(s)||t.issues.push({code:"invalid_value",values:r,input:s,inst:e}),t}}),se=tg("$ZodLiteral",(e,t)=>{if(n7.init(e,t),0===t.values.length)throw Error("Cannot create literal schema with no valid values");let r=new Set(t.values);e._zod.values=r,e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?tQ(e):e?tQ(e.toString()):String(e)).join("|")})$`),e._zod.parse=(n,i)=>{let s=n.value;return r.has(s)||n.issues.push({code:"invalid_value",values:t.values,input:s,inst:e}),n}}),st=tg("$ZodFile",(e,t)=>{n7.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return n instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:n,inst:e}),t}}),sr=tg("$ZodTransform",(e,t)=>{n7.init(e,t),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new tb(e.constructor.name);let i=t.transform(r.value,r);if(n.async)return(i instanceof Promise?i:Promise.resolve(i)).then(e=>(r.value=e,r));if(i instanceof Promise)throw new tx;return r.value=i,r}});function sn(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}let si=tg("$ZodOptional",(e,t)=>{n7.init(e,t),e._zod.optin="optional",e._zod.optout="optional",tz(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),tz(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${tO(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>{if("optional"===t.innerType._zod.optin){let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>sn(t,e.value)):sn(n,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,r)}}),ss=tg("$ZodNullable",(e,t)=>{n7.init(e,t),tz(e._zod,"optin",()=>t.innerType._zod.optin),tz(e._zod,"optout",()=>t.innerType._zod.optout),tz(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${tO(e.source)}|null)$`):void 0}),tz(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),sa=tg("$ZodDefault",(e,t)=>{n7.init(e,t),e._zod.optin="optional",tz(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);if(void 0===e.value)return e.value=t.defaultValue,e;let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(e=>so(e,t)):so(n,t)}});function so(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let sl=tg("$ZodPrefault",(e,t)=>{n7.init(e,t),e._zod.optin="optional",tz(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>("backward"===r.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),sd=tg("$ZodNonOptional",(e,t)=>{n7.init(e,t),tz(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,n)=>{let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(t=>sc(t,e)):sc(i,e)}});function sc(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}let su=tg("$ZodSuccess",(e,t)=>{n7.init(e,t),e._zod.parse=(e,r)=>{if("backward"===r.direction)throw new tb("ZodSuccess");let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>(e.value=0===t.issues.length,e)):(e.value=0===n.issues.length,e)}}),sp=tg("$ZodCatch",(e,t)=>{n7.init(e,t),tz(e._zod,"optin",()=>t.innerType._zod.optin),tz(e._zod,"optout",()=>t.innerType._zod.optout),tz(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(n=>(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>ro(e,r,tk()))},input:e.value}),e.issues=[]),e)):(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>ro(e,r,tk()))},input:e.value}),e.issues=[]),e)}}),sh=tg("$ZodNaN",(e,t)=>{n7.init(e,t),e._zod.parse=(t,r)=>("number"==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:"nan",code:"invalid_type"}),t)}),sm=tg("$ZodPipe",(e,t)=>{n7.init(e,t),tz(e._zod,"values",()=>t.in._zod.values),tz(e._zod,"optin",()=>t.in._zod.optin),tz(e._zod,"optout",()=>t.out._zod.optout),tz(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("backward"===r.direction){let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>sf(e,t.in,r)):sf(n,t.in,r)}let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>sf(e,t.out,r)):sf(n,t.out,r)}});function sf(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}let sg=tg("$ZodCodec",(e,t)=>{n7.init(e,t),tz(e._zod,"values",()=>t.in._zod.values),tz(e._zod,"optin",()=>t.in._zod.optin),tz(e._zod,"optout",()=>t.out._zod.optout),tz(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("forward"===(r.direction||"forward")){let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>sy(e,t,r)):sy(n,t,r)}{let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>sy(e,t,r)):sy(n,t,r)}}});function sy(e,t,r){if(e.issues.length)return e.aborted=!0,e;if("forward"===(r.direction||"forward")){let n=t.transform(e.value,e);return n instanceof Promise?n.then(n=>sx(e,n,t.out,r)):sx(e,n,t.out,r)}{let n=t.reverseTransform(e.value,e);return n instanceof Promise?n.then(n=>sx(e,n,t.in,r)):sx(e,n,t.in,r)}}function sx(e,t,r,n){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},n)}let sb=tg("$ZodReadonly",(e,t)=>{n7.init(e,t),tz(e._zod,"propValues",()=>t.innerType._zod.propValues),tz(e._zod,"values",()=>t.innerType._zod.values),tz(e._zod,"optin",()=>t.innerType?._zod?.optin),tz(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(sv):sv(n)}});function sv(e){return e.value=Object.freeze(e.value),e}let sk=tg("$ZodTemplateLiteral",(e,t)=>{n7.init(e,t);let r=[];for(let e of t.parts)if("object"==typeof e&&null!==e){if(!e._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...e._zod.traits].shift()}`);let t=e._zod.pattern instanceof RegExp?e._zod.pattern.source:e._zod.pattern;if(!t)throw Error(`Invalid template literal part: ${e._zod.traits}`);let n=+!!t.startsWith("^"),i=t.endsWith("$")?t.length-1:t.length;r.push(t.slice(n,i))}else if(null===e||tX.has(typeof e))r.push(tQ(`${e}`));else throw Error(`Invalid template literal part: ${e}`);e._zod.pattern=RegExp(`^${r.join("")}$`),e._zod.parse=(r,n)=>("string"!=typeof r.value?r.issues.push({input:r.value,inst:e,expected:"template_literal",code:"invalid_type"}):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(r.value)||r.issues.push({input:r.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source})),r)}),sw=tg("$ZodFunction",(e,t)=>(n7.init(e,t),e._def=t,e._zod.def=t,e.implement=t=>{if("function"!=typeof t)throw Error("implement() must be called with a function");return function(...r){let n=Reflect.apply(t,this,e._def.input?r_(e._def.input,r):r);return e._def.output?r_(e._def.output,n):n}},e.implementAsync=t=>{if("function"!=typeof t)throw Error("implementAsync() must be called with a function");return async function(...r){let n=e._def.input?await rC(e._def.input,r):r,i=await Reflect.apply(t,this,n);return e._def.output?await rC(e._def.output,i):i}},e._zod.parse=(t,r)=>("function"!=typeof t.value?t.issues.push({code:"invalid_type",expected:"function",input:t.value,inst:e}):e._def.output&&"promise"===e._def.output._zod.def.type?t.value=e.implementAsync(t.value):t.value=e.implement(t.value),t),e.input=(...t)=>{let r=e.constructor;return new r(Array.isArray(t[0])?{type:"function",input:new i2({type:"tuple",items:t[0],rest:t[1]}),output:e._def.output}:{type:"function",input:t[0],output:e._def.output})},e.output=t=>new e.constructor({type:"function",input:e._def.input,output:t}),e)),sN=tg("$ZodPromise",(e,t)=>{n7.init(e,t),e._zod.parse=(e,r)=>Promise.resolve(e.value).then(e=>t.innerType._zod.run({value:e,issues:[]},r))}),s$=tg("$ZodLazy",(e,t)=>{n7.init(e,t),tz(e._zod,"innerType",()=>t.getter()),tz(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),tz(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),tz(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),tz(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(t,r)=>e._zod.innerType._zod.run(t,r)}),sS=tg("$ZodCustom",(e,t)=>{nP.init(e,t),n7.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let n=r.value,i=t.fn(n);if(i instanceof Promise)return i.then(t=>sj(t,r,n,e));sj(i,r,n,e)}});function sj(e,t,r,n){if(!e){let e={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(e.params=n._zod.def.params),t.issues.push(rc(e))}}function sT(e,t,r,n){let i=Math.abs(e),s=i%10,a=i%100;return a>=11&&a<=19?n:1===s?t:s>=2&&s<=4?r:n}function s_(){let e,t;return{localeError:(e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}},t={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Invalid input: expected ${r.expected}, received ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Invalid input: expected ${t4(r.values[0])}`;return`Invalid option: expected one of ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Too big: expected ${r.origin??"value"} to have ${t}${r.maximum.toString()} ${n.unit??"elements"}`;return`Too big: expected ${r.origin??"value"} to be ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Too small: expected ${r.origin} to have ${t}${r.minimum.toString()} ${n.unit}`;return`Too small: expected ${r.origin} to be ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Invalid string: must start with "${r.prefix}"`;if("ends_with"===r.format)return`Invalid string: must end with "${r.suffix}"`;if("includes"===r.format)return`Invalid string: must include "${r.includes}"`;if("regex"===r.format)return`Invalid string: must match pattern ${r.pattern}`;return`Invalid ${t[r.format]??r.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${r.divisor}`;case"unrecognized_keys":return`Unrecognized key${r.keys.length>1?"s":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`Invalid key in ${r.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${r.origin}`}})}}function sI(){let e,t;return{localeError:(e={string:{unit:"ážáž½áž¢áž€áŸ’ážŸážš",verb:"áž‚áž½ážšáž˜áž¶áž“"},file:{unit:"áž”áŸƒ",verb:"áž‚áž½ážšáž˜áž¶áž“"},array:{unit:"áž’áž¶ážáž»",verb:"áž‚áž½ážšáž˜áž¶áž“"},set:{unit:"áž’áž¶ážáž»",verb:"áž‚áž½ážšáž˜áž¶áž“"}},t={regex:"áž‘áž·áž“áŸ’áž“áž“áŸáž™áž”áž‰áŸ’áž…áž¼áž›",email:"áž¢áž¶ážŸáž™ážŠáŸ’áž‹áž¶áž“áž¢áŸŠáž¸áž˜áŸ‚áž›",url:"URL",emoji:"ážŸáž‰áŸ’áž‰áž¶áž¢áž¶ážšáž˜áŸ’áž˜ážŽáŸ",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"áž€áž¶áž›áž”ážšáž·áž…áŸ’áž†áŸáž‘ áž“áž·áž„áž˜áŸ‰áŸ„áž„ ISO",date:"áž€áž¶áž›áž”ážšáž·áž…áŸ’áž†áŸáž‘ ISO",time:"áž˜áŸ‰áŸ„áž„ ISO",duration:"ážšáž™áŸˆáž–áŸáž› ISO",ipv4:"áž¢áž¶ážŸáž™ážŠáŸ’áž‹áž¶áž“ IPv4",ipv6:"áž¢áž¶ážŸáž™ážŠáŸ’áž‹áž¶áž“ IPv6",cidrv4:"ážŠáŸ‚áž“áž¢áž¶ážŸáž™ážŠáŸ’áž‹áž¶áž“ IPv4",cidrv6:"ážŠáŸ‚áž“áž¢áž¶ážŸáž™ážŠáŸ’áž‹áž¶áž“ IPv6",base64:"ážáŸ’ážŸáŸ‚áž¢áž€áŸ’ážŸážšáž¢áŸŠáž·áž€áž¼ážŠ base64",base64url:"ážáŸ’ážŸáŸ‚áž¢áž€áŸ’ážŸážšáž¢áŸŠáž·áž€áž¼ážŠ base64url",json_string:"ážáŸ’ážŸáŸ‚áž¢áž€áŸ’ážŸážš JSON",e164:"áž›áŸáž E.164",jwt:"JWT",template_literal:"áž‘áž·áž“áŸ’áž“áž“áŸáž™áž”áž‰áŸ’áž…áž¼áž›"},r=>{switch(r.code){case"invalid_type":return`áž‘áž·áž“áŸ’áž“áž“áŸáž™áž”áž‰áŸ’áž…áž¼áž›áž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœáž€áž¶ážš ${r.expected} áž”áŸ‰áž»áž“áŸ’ážáŸ‚áž‘áž‘áž½áž›áž”áž¶áž“ ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"áž˜áž·áž“áž˜áŸ‚áž“áž‡áž¶áž›áŸáž (NaN)":"áž›áŸáž";case"object":if(Array.isArray(e))return"áž¢áž¶ážšáŸ (Array)";if(null===e)return"áž‚áŸ’áž˜áž¶áž“ážáž˜áŸ’áž›áŸƒ (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`áž‘áž·áž“áŸ’áž“áž“áŸáž™áž”áž‰áŸ’áž…áž¼áž›áž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœáž€áž¶ážš ${t4(r.values[0])}`;return`áž‡áž˜áŸ’ážšáž¾ážŸáž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœáž‡áž¶áž˜áž½áž™áž€áŸ’áž“áž»áž„áž…áŸ†ážŽáŸ„áž˜ ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`áž’áŸ†áž–áŸáž€áŸ– ážáŸ’ážšáž¼ážœáž€áž¶ážš ${r.origin??"ážáž˜áŸ’áž›áŸƒ"} ${t} ${r.maximum.toString()} ${n.unit??"áž’áž¶ážáž»"}`;return`áž’áŸ†áž–áŸáž€áŸ– ážáŸ’ážšáž¼ážœáž€áž¶ážš ${r.origin??"ážáž˜áŸ’áž›áŸƒ"} ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`ážáž¼áž…áž–áŸáž€áŸ– ážáŸ’ážšáž¼ážœáž€áž¶ážš ${r.origin} ${t} ${r.minimum.toString()} ${n.unit}`;return`ážáž¼áž…áž–áŸáž€áŸ– ážáŸ’ážšáž¼ážœáž€áž¶ážš ${r.origin} ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`ážáŸ’ážŸáŸ‚áž¢áž€áŸ’ážŸážšáž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœáž…áž¶áž”áŸ‹áž•áŸ’ážáž¾áž˜ážŠáŸ„áž™ "${r.prefix}"`;if("ends_with"===r.format)return`ážáŸ’ážŸáŸ‚áž¢áž€áŸ’ážŸážšáž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœáž”áž‰áŸ’áž…áž”áŸ‹ážŠáŸ„áž™ "${r.suffix}"`;if("includes"===r.format)return`ážáŸ’ážŸáŸ‚áž¢áž€áŸ’ážŸážšáž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœáž˜áž¶áž“ "${r.includes}"`;if("regex"===r.format)return`ážáŸ’ážŸáŸ‚áž¢áž€áŸ’ážŸážšáž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœážáŸ‚áž•áŸ’áž‚áž¼áž•áŸ’áž‚áž„áž“áž¹áž„áž‘áž˜áŸ’ážšáž„áŸ‹ážŠáŸ‚áž›áž”áž¶áž“áž€áŸ†ážŽážáŸ‹ ${r.pattern}`;return`áž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ${t[r.format]??r.format}`;case"not_multiple_of":return`áž›áŸážáž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœážáŸ‚áž‡áž¶áž–áž áž»áž‚áž»ážŽáž“áŸƒ ${r.divisor}`;case"unrecognized_keys":return`ážšáž€ážƒáž¾áž‰ážŸáŸ„áž˜áž·áž“ážŸáŸ’áž‚áž¶áž›áŸ‹áŸ– ${t_(r.keys,", ")}`;case"invalid_key":return`ážŸáŸ„áž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáž“áŸ…áž€áŸ’áž“áž»áž„ ${r.origin}`;case"invalid_union":default:return`áž‘áž·áž“áŸ’áž“áž“áŸáž™áž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœ`;case"invalid_element":return`áž‘áž·áž“áŸ’áž“áž“áŸáž™áž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáž“áŸ…áž€áŸ’áž“áž»áž„ ${r.origin}`}})}}e.s(["$ZodAny",0,iL,"$ZodArray",0,iH,"$ZodBase64",0,i$,"$ZodBase64URL",0,ij,"$ZodBigInt",0,iM,"$ZodBigIntFormat",0,iz,"$ZodBoolean",0,iE,"$ZodCIDRv4",0,ik,"$ZodCIDRv6",0,iw,"$ZodCUID",0,il,"$ZodCUID2",0,id,"$ZodCatch",0,sp,"$ZodCodec",0,sg,"$ZodCustom",0,sS,"$ZodCustomStringFormat",0,iC,"$ZodDate",0,iB,"$ZodDefault",0,sa,"$ZodDiscriminatedUnion",0,iQ,"$ZodE164",0,iT,"$ZodEmail",0,ii,"$ZodEmoji",0,ia,"$ZodEnum",0,i8,"$ZodFile",0,st,"$ZodFunction",0,sw,"$ZodGUID",0,it,"$ZodIPv4",0,ix,"$ZodIPv6",0,ib,"$ZodISODate",0,im,"$ZodISODateTime",0,ih,"$ZodISODuration",0,iy,"$ZodISOTime",0,ig,"$ZodIntersection",0,i0,"$ZodJWT",0,iI,"$ZodKSUID",0,ip,"$ZodLazy",0,s$,"$ZodLiteral",0,se,"$ZodMAC",0,iv,"$ZodMap",0,i6,"$ZodNaN",0,sh,"$ZodNanoID",0,io,"$ZodNever",0,iF,"$ZodNonOptional",0,sd,"$ZodNull",0,iR,"$ZodNullable",0,ss,"$ZodNumber",0,iA,"$ZodNumberFormat",0,iO,"$ZodObject",0,iJ,"$ZodObjectJIT",0,iG,"$ZodOptional",0,si,"$ZodPipe",0,sm,"$ZodPrefault",0,sl,"$ZodPromise",0,sN,"$ZodReadonly",0,sb,"$ZodRecord",0,i5,"$ZodSet",0,i9,"$ZodString",0,n8,"$ZodStringFormat",0,ie,"$ZodSuccess",0,su,"$ZodSymbol",0,iP,"$ZodTemplateLiteral",0,sk,"$ZodTransform",0,sr,"$ZodTuple",0,i2,"$ZodType",0,n7,"$ZodULID",0,ic,"$ZodURL",0,is,"$ZodUUID",0,ir,"$ZodUndefined",0,iD,"$ZodUnion",0,iX,"$ZodUnknown",0,iU,"$ZodVoid",0,iZ,"$ZodXID",0,iu,"isValidBase64",()=>iN,"isValidBase64URL",()=>iS,"isValidJWT",()=>i_],76094);let sC=(e,t)=>{switch(e){case"number":return Number.isNaN(t)?"NaN":"skaiÄius";case"bigint":return"sveikasis skaiÄius";case"string":return"eilutÄ—";case"boolean":return"loginÄ— reikÅ¡mÄ—";case"undefined":case"void":return"neapibrÄ—Å¾ta reikÅ¡mÄ—";case"function":return"funkcija";case"symbol":return"simbolis";case"object":if(void 0===t)return"neÅ¾inomas objektas";if(null===t)return"nulinÄ— reikÅ¡mÄ—";if(Array.isArray(t))return"masyvas";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name;return"objektas";case"null":return"nulinÄ— reikÅ¡mÄ—"}return e},sA=e=>e.charAt(0).toUpperCase()+e.slice(1);function sO(e){let t=Math.abs(e),r=t%10,n=t%100;return n>=11&&n<=19||0===r?"many":1===r?"one":"few"}function sE(e,t,r,n){let i=Math.abs(e),s=i%10,a=i%100;return a>=11&&a<=19?n:1===s?t:s>=2&&s<=4?r:n}function sM(){let e,t;return{localeError:(e={string:{unit:"ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ–Ð²",verb:"Ð¼Ð°Ñ‚Ð¸Ð¼Ðµ"},file:{unit:"Ð±Ð°Ð¹Ñ‚Ñ–Ð²",verb:"Ð¼Ð°Ñ‚Ð¸Ð¼Ðµ"},array:{unit:"ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ–Ð²",verb:"Ð¼Ð°Ñ‚Ð¸Ð¼Ðµ"},set:{unit:"ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ–Ð²",verb:"Ð¼Ð°Ñ‚Ð¸Ð¼Ðµ"}},t={regex:"Ð²Ñ…Ñ–Ð´Ð½Ñ– Ð´Ð°Ð½Ñ–",email:"Ð°Ð´Ñ€ÐµÑÐ° ÐµÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ñ— Ð¿Ð¾ÑˆÑ‚Ð¸",url:"URL",emoji:"ÐµÐ¼Ð¾Ð´Ð·Ñ–",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"Ð´Ð°Ñ‚Ð° Ñ‚Ð° Ñ‡Ð°Ñ ISO",date:"Ð´Ð°Ñ‚Ð° ISO",time:"Ñ‡Ð°Ñ ISO",duration:"Ñ‚Ñ€Ð¸Ð²Ð°Ð»Ñ–ÑÑ‚ÑŒ ISO",ipv4:"Ð°Ð´Ñ€ÐµÑÐ° IPv4",ipv6:"Ð°Ð´Ñ€ÐµÑÐ° IPv6",cidrv4:"Ð´Ñ–Ð°Ð¿Ð°Ð·Ð¾Ð½ IPv4",cidrv6:"Ð´Ñ–Ð°Ð¿Ð°Ð·Ð¾Ð½ IPv6",base64:"Ñ€ÑÐ´Ð¾Ðº Ñƒ ÐºÐ¾Ð´ÑƒÐ²Ð°Ð½Ð½Ñ– base64",base64url:"Ñ€ÑÐ´Ð¾Ðº Ñƒ ÐºÐ¾Ð´ÑƒÐ²Ð°Ð½Ð½Ñ– base64url",json_string:"Ñ€ÑÐ´Ð¾Ðº JSON",e164:"Ð½Ð¾Ð¼ÐµÑ€ E.164",jwt:"JWT",template_literal:"Ð²Ñ…Ñ–Ð´Ð½Ñ– Ð´Ð°Ð½Ñ–"},r=>{switch(r.code){case"invalid_type":return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ– Ð²Ñ…Ñ–Ð´Ð½Ñ– Ð´Ð°Ð½Ñ–: Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚ÑŒÑÑ ${r.expected}, Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ð½Ð¾ ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Ñ‡Ð¸ÑÐ»Ð¾";case"object":if(Array.isArray(e))return"Ð¼Ð°ÑÐ¸Ð²";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ– Ð²Ñ…Ñ–Ð´Ð½Ñ– Ð´Ð°Ð½Ñ–: Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚ÑŒÑÑ ${t4(r.values[0])}`;return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð° Ð¾Ð¿Ñ†Ñ–Ñ: Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚ÑŒÑÑ Ð¾Ð´Ð½Ðµ Ð· ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð¾ Ð²ÐµÐ»Ð¸ÐºÐµ: Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚ÑŒÑÑ, Ñ‰Ð¾ ${r.origin??"Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ñ"} ${n.verb} ${t}${r.maximum.toString()} ${n.unit??"ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ–Ð²"}`;return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð¾ Ð²ÐµÐ»Ð¸ÐºÐµ: Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚ÑŒÑÑ, Ñ‰Ð¾ ${r.origin??"Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ñ"} Ð±ÑƒÐ´Ðµ ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð¾ Ð¼Ð°Ð»Ðµ: Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚ÑŒÑÑ, Ñ‰Ð¾ ${r.origin} ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð¾ Ð¼Ð°Ð»Ðµ: Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚ÑŒÑÑ, Ñ‰Ð¾ ${r.origin} Ð±ÑƒÐ´Ðµ ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¸Ð¹ Ñ€ÑÐ´Ð¾Ðº: Ð¿Ð¾Ð²Ð¸Ð½ÐµÐ½ Ð¿Ð¾Ñ‡Ð¸Ð½Ð°Ñ‚Ð¸ÑÑ Ð· "${r.prefix}"`;if("ends_with"===r.format)return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¸Ð¹ Ñ€ÑÐ´Ð¾Ðº: Ð¿Ð¾Ð²Ð¸Ð½ÐµÐ½ Ð·Ð°ÐºÑ–Ð½Ñ‡ÑƒÐ²Ð°Ñ‚Ð¸ÑÑ Ð½Ð° "${r.suffix}"`;if("includes"===r.format)return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¸Ð¹ Ñ€ÑÐ´Ð¾Ðº: Ð¿Ð¾Ð²Ð¸Ð½ÐµÐ½ Ð¼Ñ–ÑÑ‚Ð¸Ñ‚Ð¸ "${r.includes}"`;if("regex"===r.format)return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¸Ð¹ Ñ€ÑÐ´Ð¾Ðº: Ð¿Ð¾Ð²Ð¸Ð½ÐµÐ½ Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ð°Ñ‚Ð¸ ÑˆÐ°Ð±Ð»Ð¾Ð½Ñƒ ${r.pattern}`;return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¸Ð¹ ${t[r.format]??r.format}`;case"not_multiple_of":return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ðµ Ñ‡Ð¸ÑÐ»Ð¾: Ð¿Ð¾Ð²Ð¸Ð½Ð½Ð¾ Ð±ÑƒÑ‚Ð¸ ÐºÑ€Ð°Ñ‚Ð½Ð¸Ð¼ ${r.divisor}`;case"unrecognized_keys":return`ÐÐµÑ€Ð¾Ð·Ð¿Ñ–Ð·Ð½Ð°Ð½Ð¸Ð¹ ÐºÐ»ÑŽÑ‡${r.keys.length>1?"Ñ–":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¸Ð¹ ÐºÐ»ÑŽÑ‡ Ñƒ ${r.origin}`;case"invalid_union":return"ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ– Ð²Ñ…Ñ–Ð´Ð½Ñ– Ð´Ð°Ð½Ñ–";case"invalid_element":return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ñ Ñƒ ${r.origin}`;default:return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ– Ð²Ñ…Ñ–Ð´Ð½Ñ– Ð´Ð°Ð½Ñ–`}})}}e.s([],43365);let sz=Symbol("ZodOutput"),sP=Symbol("ZodInput");class sD{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){let r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};delete r.id;let n={...r,...this._map.get(e)};return Object.keys(n).length?n:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function sR(){return new sD}(t=globalThis).__zod_globalRegistry??(t.__zod_globalRegistry=sR());let sL=globalThis.__zod_globalRegistry;function sU(e,t){return new e({type:"string",...t1(t)})}function sF(e,t){return new e({type:"string",coerce:!0,...t1(t)})}function sZ(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...t1(t)})}function sB(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...t1(t)})}function sV(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...t1(t)})}function sH(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...t1(t)})}function sW(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...t1(t)})}function sK(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...t1(t)})}function sq(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...t1(t)})}function sJ(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...t1(t)})}function sG(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...t1(t)})}function sY(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...t1(t)})}function sX(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...t1(t)})}function sQ(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...t1(t)})}function s0(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...t1(t)})}function s1(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...t1(t)})}function s2(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...t1(t)})}function s4(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...t1(t)})}function s5(e,t){return new e({type:"string",format:"mac",check:"string_format",abort:!1,...t1(t)})}function s6(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...t1(t)})}function s3(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...t1(t)})}function s9(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...t1(t)})}function s7(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...t1(t)})}function s8(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...t1(t)})}function ae(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...t1(t)})}e.s(["$ZodRegistry",()=>sD,"$input",0,sP,"$output",0,sz,"globalRegistry",0,sL,"registry",()=>sR],25527);let at={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function ar(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...t1(t)})}function an(e,t){return new e({type:"string",format:"date",check:"string_format",...t1(t)})}function ai(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...t1(t)})}function as(e,t){return new e({type:"string",format:"duration",check:"string_format",...t1(t)})}function aa(e,t){return new e({type:"number",checks:[],...t1(t)})}function ao(e,t){return new e({type:"number",coerce:!0,checks:[],...t1(t)})}function al(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...t1(t)})}function ad(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...t1(t)})}function ac(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...t1(t)})}function au(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...t1(t)})}function ap(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...t1(t)})}function ah(e,t){return new e({type:"boolean",...t1(t)})}function am(e,t){return new e({type:"boolean",coerce:!0,...t1(t)})}function af(e,t){return new e({type:"bigint",...t1(t)})}function ag(e,t){return new e({type:"bigint",coerce:!0,...t1(t)})}function ay(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...t1(t)})}function ax(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...t1(t)})}function ab(e,t){return new e({type:"symbol",...t1(t)})}function av(e,t){return new e({type:"undefined",...t1(t)})}function ak(e,t){return new e({type:"null",...t1(t)})}function aw(e){return new e({type:"any"})}function aN(e){return new e({type:"unknown"})}function a$(e,t){return new e({type:"never",...t1(t)})}function aS(e,t){return new e({type:"void",...t1(t)})}function aj(e,t){return new e({type:"date",...t1(t)})}function aT(e,t){return new e({type:"date",coerce:!0,...t1(t)})}function a_(e,t){return new e({type:"nan",...t1(t)})}function aI(e,t){return new nR({check:"less_than",...t1(t),value:e,inclusive:!1})}function aC(e,t){return new nR({check:"less_than",...t1(t),value:e,inclusive:!0})}function aA(e,t){return new nL({check:"greater_than",...t1(t),value:e,inclusive:!1})}function aO(e,t){return new nL({check:"greater_than",...t1(t),value:e,inclusive:!0})}function aE(e){return aA(0,e)}function aM(e){return aI(0,e)}function az(e){return aC(0,e)}function aP(e){return aO(0,e)}function aD(e,t){return new nU({check:"multiple_of",...t1(t),value:e})}function aR(e,t){return new nB({check:"max_size",...t1(t),maximum:e})}function aL(e,t){return new nV({check:"min_size",...t1(t),minimum:e})}function aU(e,t){return new nH({check:"size_equals",...t1(t),size:e})}function aF(e,t){return new nW({check:"max_length",...t1(t),maximum:e})}function aZ(e,t){return new nK({check:"min_length",...t1(t),minimum:e})}function aB(e,t){return new nq({check:"length_equals",...t1(t),length:e})}function aV(e,t){return new nG({check:"string_format",format:"regex",...t1(t),pattern:e})}function aH(e){return new nY({check:"string_format",format:"lowercase",...t1(e)})}function aW(e){return new nX({check:"string_format",format:"uppercase",...t1(e)})}function aK(e,t){return new nQ({check:"string_format",format:"includes",...t1(t),includes:e})}function aq(e,t){return new n0({check:"string_format",format:"starts_with",...t1(t),prefix:e})}function aJ(e,t){return new n1({check:"string_format",format:"ends_with",...t1(t),suffix:e})}function aG(e,t,r){return new n4({check:"property",property:e,schema:t,...t1(r)})}function aY(e,t){return new n5({check:"mime_type",mime:e,...t1(t)})}function aX(e){return new n6({check:"overwrite",tx:e})}function aQ(e){return aX(t=>t.normalize(e))}function a0(){return aX(e=>e.trim())}function a1(){return aX(e=>e.toLowerCase())}function a2(){return aX(e=>e.toUpperCase())}function a4(){return aX(e=>tV(e))}function a5(e,t,r){return new e({type:"array",element:t,...t1(r)})}function a6(e,t,r){return new e({type:"union",options:t,...t1(r)})}function a3(e,t,r,n){return new e({type:"union",options:r,discriminator:t,...t1(n)})}function a9(e,t,r){return new e({type:"intersection",left:t,right:r})}function a7(e,t,r,n){let i=r instanceof n7,s=i?n:r;return new e({type:"tuple",items:t,rest:i?r:null,...t1(s)})}function a8(e,t,r,n){return new e({type:"record",keyType:t,valueType:r,...t1(n)})}function oe(e,t,r,n){return new e({type:"map",keyType:t,valueType:r,...t1(n)})}function ot(e,t,r){return new e({type:"set",valueType:t,...t1(r)})}function or(e,t,r){return new e({type:"enum",entries:Array.isArray(t)?Object.fromEntries(t.map(e=>[e,e])):t,...t1(r)})}function on(e,t,r){return new e({type:"enum",entries:t,...t1(r)})}function oi(e,t,r){return new e({type:"literal",values:Array.isArray(t)?t:[t],...t1(r)})}function oa(e,t){return new e({type:"file",...t1(t)})}function oo(e,t){return new e({type:"transform",transform:t})}function ol(e,t){return new e({type:"optional",innerType:t})}function od(e,t){return new e({type:"nullable",innerType:t})}function oc(e,t,r){return new e({type:"default",innerType:t,get defaultValue(){return"function"==typeof r?r():tJ(r)}})}function ou(e,t,r){return new e({type:"nonoptional",innerType:t,...t1(r)})}function op(e,t){return new e({type:"success",innerType:t})}function oh(e,t,r){return new e({type:"catch",innerType:t,catchValue:"function"==typeof r?r:()=>r})}function om(e,t,r){return new e({type:"pipe",in:t,out:r})}function of(e,t){return new e({type:"readonly",innerType:t})}function og(e,t,r){return new e({type:"template_literal",parts:t,...t1(r)})}function oy(e,t){return new e({type:"lazy",getter:t})}function ox(e,t){return new e({type:"promise",innerType:t})}function ob(e,t,r){let n=t1(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function ov(e,t,r){return new e({type:"custom",check:"custom",fn:t,...t1(r)})}function ok(e){let t=ow(r=>(r.addIssue=e=>{"string"==typeof e?r.issues.push(rc(e,r.value,t._zod.def)):(e.fatal&&(e.continue=!1),e.code??(e.code="custom"),e.input??(e.input=r.value),e.inst??(e.inst=t),e.continue??(e.continue=!t._zod.def.abort),r.issues.push(rc(e)))},e(r.value,r)));return t}function ow(e,t){let r=new nP({check:"custom",...t1(t)});return r._zod.check=e,r}function oN(e){let t=new nP({check:"describe"});return t._zod.onattach=[t=>{let r=sL.get(t)??{};sL.add(t,{...r,description:e})}],t._zod.check=()=>{},t}function o$(e){let t=new nP({check:"meta"});return t._zod.onattach=[t=>{let r=sL.get(t)??{};sL.add(t,{...r,...e})}],t._zod.check=()=>{},t}function oS(e,t){let r=t1(t),n=r.truthy??["true","1","yes","on","y","enabled"],i=r.falsy??["false","0","no","off","n","disabled"];"sensitive"!==r.case&&(n=n.map(e=>"string"==typeof e?e.toLowerCase():e),i=i.map(e=>"string"==typeof e?e.toLowerCase():e));let s=new Set(n),a=new Set(i),o=e.Codec??sg,l=e.Boolean??iE,d=new o({type:"pipe",in:new(e.String??n8)({type:"string",error:r.error}),out:new l({type:"boolean",error:r.error}),transform:(e,t)=>{let n=e;return"sensitive"!==r.case&&(n=n.toLowerCase()),!!s.has(n)||!a.has(n)&&(t.issues.push({code:"invalid_value",expected:"stringbool",values:[...s,...a],input:t.value,inst:d,continue:!1}),{})},reverseTransform:(e,t)=>!0===e?n[0]||"true":i[0]||"false",error:r.error});return d}function oj(e,t,r,n={}){let i=t1(n),s={...t1(n),check:"string_format",type:"string",format:t,fn:"function"==typeof r?r:e=>r.test(e),...i};return r instanceof RegExp&&(s.pattern=r),new e(s)}e.s(["TimePrecision",0,at,"_any",()=>aw,"_array",()=>a5,"_base64",()=>s9,"_base64url",()=>s7,"_bigint",()=>af,"_boolean",()=>ah,"_catch",()=>oh,"_check",()=>ow,"_cidrv4",()=>s6,"_cidrv6",()=>s3,"_coercedBigint",()=>ag,"_coercedBoolean",()=>am,"_coercedDate",()=>aT,"_coercedNumber",()=>ao,"_coercedString",()=>sF,"_cuid",()=>sY,"_cuid2",()=>sX,"_custom",()=>ob,"_date",()=>aj,"_default",()=>oc,"_discriminatedUnion",()=>a3,"_e164",()=>s8,"_email",()=>sZ,"_emoji",()=>sJ,"_endsWith",()=>aJ,"_enum",()=>or,"_file",()=>oa,"_float32",()=>ad,"_float64",()=>ac,"_gt",()=>aA,"_gte",()=>aO,"_guid",()=>sB,"_includes",()=>aK,"_int",()=>al,"_int32",()=>au,"_int64",()=>ay,"_intersection",()=>a9,"_ipv4",()=>s2,"_ipv6",()=>s4,"_isoDate",()=>an,"_isoDateTime",()=>ar,"_isoDuration",()=>as,"_isoTime",()=>ai,"_jwt",()=>ae,"_ksuid",()=>s1,"_lazy",()=>oy,"_length",()=>aB,"_literal",()=>oi,"_lowercase",()=>aH,"_lt",()=>aI,"_lte",()=>aC,"_mac",()=>s5,"_map",()=>oe,"_max",()=>aC,"_maxLength",()=>aF,"_maxSize",()=>aR,"_mime",()=>aY,"_min",()=>aO,"_minLength",()=>aZ,"_minSize",()=>aL,"_multipleOf",()=>aD,"_nan",()=>a_,"_nanoid",()=>sG,"_nativeEnum",()=>on,"_negative",()=>aM,"_never",()=>a$,"_nonnegative",()=>aP,"_nonoptional",()=>ou,"_nonpositive",()=>az,"_normalize",()=>aQ,"_null",()=>ak,"_nullable",()=>od,"_number",()=>aa,"_optional",()=>ol,"_overwrite",()=>aX,"_pipe",()=>om,"_positive",()=>aE,"_promise",()=>ox,"_property",()=>aG,"_readonly",()=>of,"_record",()=>a8,"_refine",()=>ov,"_regex",()=>aV,"_set",()=>ot,"_size",()=>aU,"_slugify",()=>a4,"_startsWith",()=>aq,"_string",()=>sU,"_stringFormat",()=>oj,"_stringbool",()=>oS,"_success",()=>op,"_superRefine",()=>ok,"_symbol",()=>ab,"_templateLiteral",()=>og,"_toLowerCase",()=>a1,"_toUpperCase",()=>a2,"_transform",()=>oo,"_trim",()=>a0,"_tuple",()=>a7,"_uint32",()=>ap,"_uint64",()=>ax,"_ulid",()=>sQ,"_undefined",()=>av,"_union",()=>a6,"_unknown",()=>aN,"_uppercase",()=>aW,"_url",()=>sq,"_uuid",()=>sV,"_uuidv4",()=>sH,"_uuidv6",()=>sW,"_uuidv7",()=>sK,"_void",()=>aS,"_xid",()=>s0,"describe",()=>oN,"meta",()=>o$],50215);class oT{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??sL,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var r;let n=e._zod.def,i=this.seen.get(e);if(i)return i.count++,t.schemaPath.includes(e)&&(i.cycle=t.path),i.schema;let s={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,s);let a=e._zod.toJSONSchema?.();if(a)s.schema=a;else{let r={...t,schemaPath:[...t.schemaPath,e],path:t.path},i=e._zod.parent;if(i)s.ref=i,this.process(i,r),this.seen.get(i).isParent=!0;else{let t=s.schema;switch(n.type){case"string":{t.type="string";let{minimum:r,maximum:n,format:i,patterns:a,contentEncoding:o}=e._zod.bag;if("number"==typeof r&&(t.minLength=r),"number"==typeof n&&(t.maxLength=n),i&&(t.format=({guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""})[i]??i,""===t.format&&delete t.format),o&&(t.contentEncoding=o),a&&a.size>0){let e=[...a];1===e.length?t.pattern=e[0].source:e.length>1&&(s.schema.allOf=[...e.map(e=>({..."draft-7"===this.target||"draft-4"===this.target||"openapi-3.0"===this.target?{type:"string"}:{},pattern:e.source}))])}break}case"number":{let{minimum:r,maximum:n,format:i,multipleOf:s,exclusiveMaximum:a,exclusiveMinimum:o}=e._zod.bag;"string"==typeof i&&i.includes("int")?t.type="integer":t.type="number","number"==typeof o&&("draft-4"===this.target||"openapi-3.0"===this.target?(t.minimum=o,t.exclusiveMinimum=!0):t.exclusiveMinimum=o),"number"==typeof r&&(t.minimum=r,"number"==typeof o&&"draft-4"!==this.target&&(o>=r?delete t.minimum:delete t.exclusiveMinimum)),"number"==typeof a&&("draft-4"===this.target||"openapi-3.0"===this.target?(t.maximum=a,t.exclusiveMaximum=!0):t.exclusiveMaximum=a),"number"==typeof n&&(t.maximum=n,"number"==typeof a&&"draft-4"!==this.target&&(a<=n?delete t.maximum:delete t.exclusiveMaximum)),"number"==typeof s&&(t.multipleOf=s);break}case"boolean":case"success":t.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema");break;case"null":"openapi-3.0"===this.target?(t.type="string",t.nullable=!0,t.enum=[null]):t.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw Error("Void cannot be represented in JSON Schema");break;case"never":t.not={};break;case"date":if("throw"===this.unrepresentable)throw Error("Date cannot be represented in JSON Schema");break;case"array":{let{minimum:i,maximum:s}=e._zod.bag;"number"==typeof i&&(t.minItems=i),"number"==typeof s&&(t.maxItems=s),t.type="array",t.items=this.process(n.element,{...r,path:[...r.path,"items"]});break}case"object":{t.type="object",t.properties={};let e=n.shape;for(let n in e)t.properties[n]=this.process(e[n],{...r,path:[...r.path,"properties",n]});let i=new Set([...new Set(Object.keys(e))].filter(e=>{let t=n.shape[e]._zod;return"input"===this.io?void 0===t.optin:void 0===t.optout}));i.size>0&&(t.required=Array.from(i)),n.catchall?._zod.def.type==="never"?t.additionalProperties=!1:n.catchall?n.catchall&&(t.additionalProperties=this.process(n.catchall,{...r,path:[...r.path,"additionalProperties"]})):"output"===this.io&&(t.additionalProperties=!1);break}case"union":{let e=void 0!==n.discriminator,i=n.options.map((t,n)=>this.process(t,{...r,path:[...r.path,e?"oneOf":"anyOf",n]}));e?t.oneOf=i:t.anyOf=i;break}case"intersection":{let e=this.process(n.left,{...r,path:[...r.path,"allOf",0]}),i=this.process(n.right,{...r,path:[...r.path,"allOf",1]}),s=e=>"allOf"in e&&1===Object.keys(e).length;t.allOf=[...s(e)?e.allOf:[e],...s(i)?i.allOf:[i]];break}case"tuple":{t.type="array";let i="draft-2020-12"===this.target?"prefixItems":"items",s="draft-2020-12"===this.target||"openapi-3.0"===this.target?"items":"additionalItems",a=n.items.map((e,t)=>this.process(e,{...r,path:[...r.path,i,t]})),o=n.rest?this.process(n.rest,{...r,path:[...r.path,s,..."openapi-3.0"===this.target?[n.items.length]:[]]}):null;"draft-2020-12"===this.target?(t.prefixItems=a,o&&(t.items=o)):"openapi-3.0"===this.target?(t.items={anyOf:a},o&&t.items.anyOf.push(o),t.minItems=a.length,o||(t.maxItems=a.length)):(t.items=a,o&&(t.additionalItems=o));let{minimum:l,maximum:d}=e._zod.bag;"number"==typeof l&&(t.minItems=l),"number"==typeof d&&(t.maxItems=d);break}case"record":t.type="object",("draft-7"===this.target||"draft-2020-12"===this.target)&&(t.propertyNames=this.process(n.keyType,{...r,path:[...r.path,"propertyNames"]})),t.additionalProperties=this.process(n.valueType,{...r,path:[...r.path,"additionalProperties"]});break;case"map":if("throw"===this.unrepresentable)throw Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw Error("Set cannot be represented in JSON Schema");break;case"enum":{let e=tT(n.entries);e.every(e=>"number"==typeof e)&&(t.type="number"),e.every(e=>"string"==typeof e)&&(t.type="string"),t.enum=e;break}case"literal":{let e=[];for(let t of n.values)if(void 0===t){if("throw"===this.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof t)if("throw"===this.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else e.push(Number(t));else e.push(t);if(0===e.length);else if(1===e.length){let r=e[0];t.type=null===r?"null":typeof r,"draft-4"===this.target||"openapi-3.0"===this.target?t.enum=[r]:t.const=r}else e.every(e=>"number"==typeof e)&&(t.type="number"),e.every(e=>"string"==typeof e)&&(t.type="string"),e.every(e=>"boolean"==typeof e)&&(t.type="string"),e.every(e=>null===e)&&(t.type="null"),t.enum=e;break}case"file":{let r={type:"string",format:"binary",contentEncoding:"binary"},{minimum:n,maximum:i,mime:s}=e._zod.bag;void 0!==n&&(r.minLength=n),void 0!==i&&(r.maxLength=i),s?1===s.length?(r.contentMediaType=s[0],Object.assign(t,r)):t.anyOf=s.map(e=>({...r,contentMediaType:e})):Object.assign(t,r);break}case"transform":if("throw"===this.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema");break;case"nullable":{let e=this.process(n.innerType,r);"openapi-3.0"===this.target?(s.ref=n.innerType,t.nullable=!0):t.anyOf=[e,{type:"null"}];break}case"nonoptional":case"promise":case"optional":this.process(n.innerType,r),s.ref=n.innerType;break;case"default":this.process(n.innerType,r),s.ref=n.innerType,t.default=JSON.parse(JSON.stringify(n.defaultValue));break;case"prefault":this.process(n.innerType,r),s.ref=n.innerType,"input"===this.io&&(t._prefault=JSON.parse(JSON.stringify(n.defaultValue)));break;case"catch":{let e;this.process(n.innerType,r),s.ref=n.innerType;try{e=n.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}t.default=e;break}case"nan":if("throw"===this.unrepresentable)throw Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{let r=e._zod.pattern;if(!r)throw Error("Pattern not found in template literal");t.type="string",t.pattern=r.source;break}case"pipe":{let e="input"===this.io?"transform"===n.in._zod.def.type?n.out:n.in:n.out;this.process(e,r),s.ref=e;break}case"readonly":this.process(n.innerType,r),s.ref=n.innerType,t.readOnly=!0;break;case"lazy":{let t=e._zod.innerType;this.process(t,r),s.ref=t;break}case"custom":if("throw"===this.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema");break;case"function":if("throw"===this.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")}}}let o=this.metadataRegistry.get(e);return o&&Object.assign(s.schema,o),"input"===this.io&&function e(t,r){let n=r??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);let i=t._zod.def;if("transform"===i.type)return!0;if("array"===i.type)return e(i.element,n);if("set"===i.type)return e(i.valueType,n);if("lazy"===i.type)return e(i.getter(),n);if("promise"===i.type||"optional"===i.type||"nonoptional"===i.type||"nullable"===i.type||"readonly"===i.type||"default"===i.type||"prefault"===i.type)return e(i.innerType,n);if("intersection"===i.type)return e(i.left,n)||e(i.right,n);if("record"===i.type||"map"===i.type)return e(i.keyType,n)||e(i.valueType,n);if("pipe"===i.type)return e(i.in,n)||e(i.out,n);if("object"===i.type){for(let t in i.shape)if(e(i.shape[t],n))return!0;return!1}if("union"===i.type){for(let t of i.options)if(e(t,n))return!0;return!1}if("tuple"===i.type){for(let t of i.items)if(e(t,n))return!0;if(i.rest&&e(i.rest,n))return!0}return!1}(e)&&(delete s.schema.examples,delete s.schema.default),"input"===this.io&&s.schema._prefault&&((r=s.schema).default??(r.default=s.schema._prefault)),delete s.schema._prefault,this.seen.get(e).schema}emit(e,t){let r={cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0},n=this.seen.get(e);if(!n)throw Error("Unprocessed schema. This is a bug in Zod.");let i=e=>{let t="draft-2020-12"===this.target?"$defs":"definitions";if(r.external){let n=r.external.registry.get(e[0])?.id,i=r.external.uri??(e=>e);if(n)return{ref:i(n)};let s=e[1].defId??e[1].schema.id??`schema${this.counter++}`;return e[1].defId=s,{defId:s,ref:`${i("__shared")}#/${t}/${s}`}}if(e[1]===n)return{ref:"#"};let i=`#/${t}/`,s=e[1].schema.id??`__schema${this.counter++}`;return{defId:s,ref:i+s}},s=e=>{if(e[1].schema.$ref)return;let t=e[1],{ref:r,defId:n}=i(e);t.def={...t.schema},n&&(t.defId=n);let s=t.schema;for(let e in s)delete s[e];s.$ref=r};if("throw"===r.cycles)for(let e of this.seen.entries()){let t=e[1];if(t.cycle)throw Error(`Cycle detected: #/${t.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let t of this.seen.entries()){let n=t[1];if(e===t[0]){s(t);continue}if(r.external){let n=r.external.registry.get(t[0])?.id;if(e!==t[0]&&n){s(t);continue}}if(this.metadataRegistry.get(t[0])?.id||n.cycle||n.count>1&&"ref"===r.reused){s(t);continue}}let a=(e,t)=>{let r=this.seen.get(e),n=r.def??r.schema,i={...n};if(null===r.ref)return;let s=r.ref;if(r.ref=null,s){a(s,t);let e=this.seen.get(s).schema;e.$ref&&("draft-7"===t.target||"draft-4"===t.target||"openapi-3.0"===t.target)?(n.allOf=n.allOf??[],n.allOf.push(e)):(Object.assign(n,e),Object.assign(n,i))}r.isParent||this.override({zodSchema:e,jsonSchema:n,path:r.path??[]})};for(let e of[...this.seen.entries()].reverse())a(e[0],{target:this.target});let o={};if("draft-2020-12"===this.target?o.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?o.$schema="http://json-schema.org/draft-07/schema#":"draft-4"===this.target?o.$schema="http://json-schema.org/draft-04/schema#":"openapi-3.0"===this.target||console.warn(`Invalid target: ${this.target}`),r.external?.uri){let t=r.external.registry.get(e)?.id;if(!t)throw Error("Schema is missing an `id` property");o.$id=r.external.uri(t)}Object.assign(o,n.def);let l=r.external?.defs??{};for(let e of this.seen.entries()){let t=e[1];t.def&&t.defId&&(l[t.defId]=t.def)}r.external||Object.keys(l).length>0&&("draft-2020-12"===this.target?o.$defs=l:o.definitions=l);try{return JSON.parse(JSON.stringify(o))}catch(e){throw Error("Error converting schema to JSON.")}}}function o_(e,t){if(e instanceof sD){let r=new oT(t),n={};for(let t of e._idmap.entries()){let[e,n]=t;r.process(n)}let i={},s={registry:e,uri:t?.uri,defs:n};for(let n of e._idmap.entries()){let[e,a]=n;i[e]=r.emit(a,{...t,external:s})}return Object.keys(n).length>0&&(i.__shared={["draft-2020-12"===r.target?"$defs":"definitions"]:n}),{schemas:i}}let r=new oT(t);return r.process(e),r.emit(e,t)}function oI(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}e.s(["JSONSchemaGenerator",()=>oT,"toJSONSchema",()=>o_],34966),e.s([],18249),e.s([],92135),e.s(["ZodAny",()=>dr,"ZodArray",()=>dh,"ZodBase64",()=>lO,"ZodBase64URL",()=>lM,"ZodBigInt",()=>l1,"ZodBigIntFormat",()=>l4,"ZodBoolean",()=>lQ,"ZodCIDRv4",()=>l_,"ZodCIDRv6",()=>lC,"ZodCUID",()=>lp,"ZodCUID2",()=>lm,"ZodCatch",()=>d4,"ZodCodec",()=>d8,"ZodCustom",()=>cu,"ZodCustomStringFormat",()=>lU,"ZodDate",()=>du,"ZodDefault",()=>dJ,"ZodDiscriminatedUnion",()=>dw,"ZodE164",()=>lP,"ZodEmail",()=>o3,"ZodEmoji",()=>ll,"ZodEnum",()=>dz,"ZodFile",()=>dU,"ZodFunction",()=>cd,"ZodGUID",()=>o7,"ZodIPv4",()=>lw,"ZodIPv6",()=>lj,"ZodIntersection",()=>d$,"ZodJWT",()=>lR,"ZodKSUID",()=>lv,"ZodLazy",()=>cs,"ZodLiteral",()=>dR,"ZodMAC",()=>l$,"ZodMap",()=>dA,"ZodNaN",()=>d6,"ZodNanoID",()=>lc,"ZodNever",()=>da,"ZodNonOptional",()=>dQ,"ZodNull",()=>de,"ZodNullable",()=>dW,"ZodNumber",()=>lH,"ZodNumberFormat",()=>lK,"ZodObject",()=>dg,"ZodOptional",()=>dV,"ZodPipe",()=>d9,"ZodPrefault",()=>dY,"ZodPromise",()=>co,"ZodReadonly",()=>ct,"ZodRecord",()=>d_,"ZodSet",()=>dE,"ZodString",()=>o4,"ZodStringFormat",()=>o6,"ZodSuccess",()=>d1,"ZodSymbol",()=>l3,"ZodTemplateLiteral",()=>cn,"ZodTransform",()=>dZ,"ZodTuple",()=>dj,"ZodType",()=>o1,"ZodULID",()=>lg,"ZodURL",()=>ls,"ZodUUID",()=>le,"ZodUndefined",()=>l7,"ZodUnion",()=>dv,"ZodUnknown",()=>di,"ZodVoid",()=>dd,"ZodXID",()=>lx,"_ZodString",()=>o2,"_default",()=>dG,"_function",()=>cc,"any",()=>dn,"array",()=>dm,"base64",()=>lE,"base64url",()=>lz,"bigint",()=>l2,"boolean",()=>l0,"catch",()=>d5,"check",()=>cp,"cidrv4",()=>lI,"cidrv6",()=>lA,"codec",()=>ce,"cuid",()=>lh,"cuid2",()=>lf,"custom",()=>ch,"date",()=>dp,"describe",()=>cg,"discriminatedUnion",()=>dN,"e164",()=>lD,"email",()=>o9,"emoji",()=>ld,"enum",()=>dP,"file",()=>dF,"float32",()=>lJ,"float64",()=>lG,"function",()=>cc,"guid",()=>o8,"hash",()=>lV,"hex",()=>lB,"hostname",()=>lZ,"httpUrl",()=>lo,"instanceof",()=>cx,"int",()=>lq,"int32",()=>lY,"int64",()=>l5,"intersection",()=>dS,"ipv4",()=>lN,"ipv6",()=>lT,"json",()=>cv,"jwt",()=>lL,"keyof",()=>df,"ksuid",()=>lk,"lazy",()=>ca,"literal",()=>dL,"looseObject",()=>db,"mac",()=>lS,"map",()=>dO,"meta",()=>cy,"nan",()=>d3,"nanoid",()=>lu,"nativeEnum",()=>dD,"never",()=>dl,"nonoptional",()=>d0,"null",()=>dt,"nullable",()=>dK,"nullish",()=>dq,"number",()=>lW,"object",()=>dy,"optional",()=>dH,"partialRecord",()=>dC,"pipe",()=>d7,"prefault",()=>dX,"preprocess",()=>ck,"promise",()=>cl,"readonly",()=>cr,"record",()=>dI,"refine",()=>cm,"set",()=>dM,"strictObject",()=>dx,"string",()=>o5,"stringFormat",()=>lF,"stringbool",()=>cb,"success",()=>d2,"superRefine",()=>cf,"symbol",()=>l9,"templateLiteral",()=>ci,"transform",()=>dB,"tuple",()=>dT,"uint32",()=>lX,"uint64",()=>l6,"ulid",()=>ly,"undefined",()=>l8,"union",()=>dk,"unknown",()=>ds,"url",()=>la,"uuid",()=>lt,"uuidv4",()=>lr,"uuidv6",()=>ln,"uuidv7",()=>li,"void",()=>dc,"xid",()=>lb],62201),e.i(76094),e.s(["$ZodAny",0,iL,"$ZodArray",0,iH,"$ZodBase64",0,i$,"$ZodBase64URL",0,ij,"$ZodBigInt",0,iM,"$ZodBigIntFormat",0,iz,"$ZodBoolean",0,iE,"$ZodCIDRv4",0,ik,"$ZodCIDRv6",0,iw,"$ZodCUID",0,il,"$ZodCUID2",0,id,"$ZodCatch",0,sp,"$ZodCodec",0,sg,"$ZodCustom",0,sS,"$ZodCustomStringFormat",0,iC,"$ZodDate",0,iB,"$ZodDefault",0,sa,"$ZodDiscriminatedUnion",0,iQ,"$ZodE164",0,iT,"$ZodEmail",0,ii,"$ZodEmoji",0,ia,"$ZodEnum",0,i8,"$ZodFile",0,st,"$ZodFunction",0,sw,"$ZodGUID",0,it,"$ZodIPv4",0,ix,"$ZodIPv6",0,ib,"$ZodISODate",0,im,"$ZodISODateTime",0,ih,"$ZodISODuration",0,iy,"$ZodISOTime",0,ig,"$ZodIntersection",0,i0,"$ZodJWT",0,iI,"$ZodKSUID",0,ip,"$ZodLazy",0,s$,"$ZodLiteral",0,se,"$ZodMAC",0,iv,"$ZodMap",0,i6,"$ZodNaN",0,sh,"$ZodNanoID",0,io,"$ZodNever",0,iF,"$ZodNonOptional",0,sd,"$ZodNull",0,iR,"$ZodNullable",0,ss,"$ZodNumber",0,iA,"$ZodNumberFormat",0,iO,"$ZodObject",0,iJ,"$ZodObjectJIT",0,iG,"$ZodOptional",0,si,"$ZodPipe",0,sm,"$ZodPrefault",0,sl,"$ZodPromise",0,sN,"$ZodReadonly",0,sb,"$ZodRecord",0,i5,"$ZodSet",0,i9,"$ZodString",0,n8,"$ZodStringFormat",0,ie,"$ZodSuccess",0,su,"$ZodSymbol",0,iP,"$ZodTemplateLiteral",0,sk,"$ZodTransform",0,sr,"$ZodTuple",0,i2,"$ZodType",0,n7,"$ZodULID",0,ic,"$ZodURL",0,is,"$ZodUUID",0,ir,"$ZodUndefined",0,iD,"$ZodUnion",0,iX,"$ZodUnknown",0,iU,"$ZodVoid",0,iZ,"$ZodXID",0,iu,"clone",()=>t0,"isValidBase64",()=>iN,"isValidBase64URL",()=>iS,"isValidJWT",()=>i_],32952);var oC=e.i(82358),oC=oC,oA=e.i(4886),oA=oA;e.s([],42332),e.s(["ZodISODate",()=>oM,"ZodISODateTime",()=>oO,"ZodISODuration",()=>oR,"ZodISOTime",()=>oP,"date",()=>oz,"datetime",()=>oE,"duration",()=>oL,"time",()=>oD],49732);let oO=tg("ZodISODateTime",(e,t)=>{ih.init(e,t),o6.init(e,t)});function oE(e){return ar(oO,e)}let oM=tg("ZodISODate",(e,t)=>{im.init(e,t),o6.init(e,t)});function oz(e){return an(oM,e)}let oP=tg("ZodISOTime",(e,t)=>{ig.init(e,t),o6.init(e,t)});function oD(e){return ai(oP,e)}let oR=tg("ZodISODuration",(e,t)=>{iy.init(e,t),o6.init(e,t)});function oL(e){return as(oR,e)}let oU=(e,t)=>{rv.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>rN(e,t)},flatten:{value:t=>rw(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,tI,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,tI,2)}},isEmpty:{get:()=>0===e.issues.length}})},oF=tg("ZodError",oU),oZ=tg("ZodError",oU,{Parent:Error});e.s(["ZodError",0,oF,"ZodRealError",0,oZ],89282);let oB=rT(oZ),oV=rI(oZ),oH=rA(oZ),oW=rE(oZ),oK=rz(oZ),oq=rD(oZ),oJ=rL(oZ),oG=rF(oZ),oY=rB(oZ),oX=rH(oZ),oQ=rK(oZ),o0=rJ(oZ);e.s(["decode",0,oq,"decodeAsync",0,oG,"encode",0,oK,"encodeAsync",0,oJ,"parse",0,oB,"parseAsync",0,oV,"safeDecode",0,oX,"safeDecodeAsync",0,o0,"safeEncode",0,oY,"safeEncodeAsync",0,oQ,"safeParse",0,oH,"safeParseAsync",0,oW],364);let o1=tg("ZodType",(e,t)=>(n7.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(oA.mergeDefs(t,{checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]})),e.clone=(t,r)=>t0(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>oB(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>oH(e,t,r),e.parseAsync=async(t,r)=>oV(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>oW(e,t,r),e.spa=e.safeParseAsync,e.encode=(t,r)=>oK(e,t,r),e.decode=(t,r)=>oq(e,t,r),e.encodeAsync=async(t,r)=>oJ(e,t,r),e.decodeAsync=async(t,r)=>oG(e,t,r),e.safeEncode=(t,r)=>oY(e,t,r),e.safeDecode=(t,r)=>oX(e,t,r),e.safeEncodeAsync=async(t,r)=>oQ(e,t,r),e.safeDecodeAsync=async(t,r)=>o0(e,t,r),e.refine=(t,r)=>e.check(cm(t,r)),e.superRefine=t=>e.check(ok(t)),e.overwrite=t=>e.check(aX(t)),e.optional=()=>dH(e),e.nullable=()=>dK(e),e.nullish=()=>dH(dK(e)),e.nonoptional=t=>d0(e,t),e.array=()=>dm(e),e.or=t=>dk([e,t]),e.and=t=>dS(e,t),e.transform=t=>d7(e,dB(t)),e.default=t=>dG(e,t),e.prefault=t=>dX(e,t),e.catch=t=>d5(e,t),e.pipe=t=>d7(e,t),e.readonly=()=>cr(e),e.describe=t=>{let r=e.clone();return sL.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>sL.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return sL.get(e);let r=e.clone();return sL.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),o2=tg("_ZodString",(e,t)=>{n8.init(e,t),o1.init(e,t);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(aV(...t)),e.includes=(...t)=>e.check(aK(...t)),e.startsWith=(...t)=>e.check(aq(...t)),e.endsWith=(...t)=>e.check(aJ(...t)),e.min=(...t)=>e.check(aZ(...t)),e.max=(...t)=>e.check(aF(...t)),e.length=(...t)=>e.check(aB(...t)),e.nonempty=(...t)=>e.check(aZ(1,...t)),e.lowercase=t=>e.check(aH(t)),e.uppercase=t=>e.check(aW(t)),e.trim=()=>e.check(a0()),e.normalize=(...t)=>e.check(aQ(...t)),e.toLowerCase=()=>e.check(a1()),e.toUpperCase=()=>e.check(a2()),e.slugify=()=>e.check(a4())}),o4=tg("ZodString",(e,t)=>{n8.init(e,t),o2.init(e,t),e.email=t=>e.check(sZ(o3,t)),e.url=t=>e.check(sq(ls,t)),e.jwt=t=>e.check(ae(lR,t)),e.emoji=t=>e.check(sJ(ll,t)),e.guid=t=>e.check(sB(o7,t)),e.uuid=t=>e.check(sV(le,t)),e.uuidv4=t=>e.check(sH(le,t)),e.uuidv6=t=>e.check(sW(le,t)),e.uuidv7=t=>e.check(sK(le,t)),e.nanoid=t=>e.check(sG(lc,t)),e.guid=t=>e.check(sB(o7,t)),e.cuid=t=>e.check(sY(lp,t)),e.cuid2=t=>e.check(sX(lm,t)),e.ulid=t=>e.check(sQ(lg,t)),e.base64=t=>e.check(s9(lO,t)),e.base64url=t=>e.check(s7(lM,t)),e.xid=t=>e.check(s0(lx,t)),e.ksuid=t=>e.check(s1(lv,t)),e.ipv4=t=>e.check(s2(lw,t)),e.ipv6=t=>e.check(s4(lj,t)),e.cidrv4=t=>e.check(s6(l_,t)),e.cidrv6=t=>e.check(s3(lC,t)),e.e164=t=>e.check(s8(lP,t)),e.datetime=t=>e.check(oE(t)),e.date=t=>e.check(oz(t)),e.time=t=>e.check(oD(t)),e.duration=t=>e.check(oL(t))});function o5(e){return sU(o4,e)}let o6=tg("ZodStringFormat",(e,t)=>{ie.init(e,t),o2.init(e,t)}),o3=tg("ZodEmail",(e,t)=>{ii.init(e,t),o6.init(e,t)});function o9(e){return sZ(o3,e)}let o7=tg("ZodGUID",(e,t)=>{it.init(e,t),o6.init(e,t)});function o8(e){return sB(o7,e)}let le=tg("ZodUUID",(e,t)=>{ir.init(e,t),o6.init(e,t)});function lt(e){return sV(le,e)}function lr(e){return sH(le,e)}function ln(e){return sW(le,e)}function li(e){return sK(le,e)}let ls=tg("ZodURL",(e,t)=>{is.init(e,t),o6.init(e,t)});function la(e){return sq(ls,e)}function lo(e){return sq(ls,{protocol:/^https?$/,hostname:oC.domain,...oA.normalizeParams(e)})}let ll=tg("ZodEmoji",(e,t)=>{ia.init(e,t),o6.init(e,t)});function ld(e){return sJ(ll,e)}let lc=tg("ZodNanoID",(e,t)=>{io.init(e,t),o6.init(e,t)});function lu(e){return sG(lc,e)}let lp=tg("ZodCUID",(e,t)=>{il.init(e,t),o6.init(e,t)});function lh(e){return sY(lp,e)}let lm=tg("ZodCUID2",(e,t)=>{id.init(e,t),o6.init(e,t)});function lf(e){return sX(lm,e)}let lg=tg("ZodULID",(e,t)=>{ic.init(e,t),o6.init(e,t)});function ly(e){return sQ(lg,e)}let lx=tg("ZodXID",(e,t)=>{iu.init(e,t),o6.init(e,t)});function lb(e){return s0(lx,e)}let lv=tg("ZodKSUID",(e,t)=>{ip.init(e,t),o6.init(e,t)});function lk(e){return s1(lv,e)}let lw=tg("ZodIPv4",(e,t)=>{ix.init(e,t),o6.init(e,t)});function lN(e){return s2(lw,e)}let l$=tg("ZodMAC",(e,t)=>{iv.init(e,t),o6.init(e,t)});function lS(e){return s5(l$,e)}let lj=tg("ZodIPv6",(e,t)=>{ib.init(e,t),o6.init(e,t)});function lT(e){return s4(lj,e)}let l_=tg("ZodCIDRv4",(e,t)=>{ik.init(e,t),o6.init(e,t)});function lI(e){return s6(l_,e)}let lC=tg("ZodCIDRv6",(e,t)=>{iw.init(e,t),o6.init(e,t)});function lA(e){return s3(lC,e)}let lO=tg("ZodBase64",(e,t)=>{i$.init(e,t),o6.init(e,t)});function lE(e){return s9(lO,e)}let lM=tg("ZodBase64URL",(e,t)=>{ij.init(e,t),o6.init(e,t)});function lz(e){return s7(lM,e)}let lP=tg("ZodE164",(e,t)=>{iT.init(e,t),o6.init(e,t)});function lD(e){return s8(lP,e)}let lR=tg("ZodJWT",(e,t)=>{iI.init(e,t),o6.init(e,t)});function lL(e){return ae(lR,e)}let lU=tg("ZodCustomStringFormat",(e,t)=>{iC.init(e,t),o6.init(e,t)});function lF(e,t,r={}){return oj(lU,e,t,r)}function lZ(e){return oj(lU,"hostname",oC.hostname,e)}function lB(e){return oj(lU,"hex",oC.hex,e)}function lV(e,t){let r=t?.enc??"hex",n=`${e}_${r}`,i=oC[n];if(!i)throw Error(`Unrecognized hash format: ${n}`);return oj(lU,n,i,t)}let lH=tg("ZodNumber",(e,t)=>{iA.init(e,t),o1.init(e,t),e.gt=(t,r)=>e.check(aA(t,r)),e.gte=(t,r)=>e.check(aO(t,r)),e.min=(t,r)=>e.check(aO(t,r)),e.lt=(t,r)=>e.check(aI(t,r)),e.lte=(t,r)=>e.check(aC(t,r)),e.max=(t,r)=>e.check(aC(t,r)),e.int=t=>e.check(lq(t)),e.safe=t=>e.check(lq(t)),e.positive=t=>e.check(aA(0,t)),e.nonnegative=t=>e.check(aO(0,t)),e.negative=t=>e.check(aI(0,t)),e.nonpositive=t=>e.check(aC(0,t)),e.multipleOf=(t,r)=>e.check(aD(t,r)),e.step=(t,r)=>e.check(aD(t,r)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??-1/0,r.exclusiveMinimum??-1/0)??null,e.maxValue=Math.min(r.maximum??1/0,r.exclusiveMaximum??1/0)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function lW(e){return aa(lH,e)}let lK=tg("ZodNumberFormat",(e,t)=>{iO.init(e,t),lH.init(e,t)});function lq(e){return al(lK,e)}function lJ(e){return ad(lK,e)}function lG(e){return ac(lK,e)}function lY(e){return au(lK,e)}function lX(e){return ap(lK,e)}let lQ=tg("ZodBoolean",(e,t)=>{iE.init(e,t),o1.init(e,t)});function l0(e){return ah(lQ,e)}let l1=tg("ZodBigInt",(e,t)=>{iM.init(e,t),o1.init(e,t),e.gte=(t,r)=>e.check(aO(t,r)),e.min=(t,r)=>e.check(aO(t,r)),e.gt=(t,r)=>e.check(aA(t,r)),e.gte=(t,r)=>e.check(aO(t,r)),e.min=(t,r)=>e.check(aO(t,r)),e.lt=(t,r)=>e.check(aI(t,r)),e.lte=(t,r)=>e.check(aC(t,r)),e.max=(t,r)=>e.check(aC(t,r)),e.positive=t=>e.check(aA(BigInt(0),t)),e.negative=t=>e.check(aI(BigInt(0),t)),e.nonpositive=t=>e.check(aC(BigInt(0),t)),e.nonnegative=t=>e.check(aO(BigInt(0),t)),e.multipleOf=(t,r)=>e.check(aD(t,r));let r=e._zod.bag;e.minValue=r.minimum??null,e.maxValue=r.maximum??null,e.format=r.format??null});function l2(e){return af(l1,e)}let l4=tg("ZodBigIntFormat",(e,t)=>{iz.init(e,t),l1.init(e,t)});function l5(e){return ay(l4,e)}function l6(e){return ax(l4,e)}let l3=tg("ZodSymbol",(e,t)=>{iP.init(e,t),o1.init(e,t)});function l9(e){return ab(l3,e)}let l7=tg("ZodUndefined",(e,t)=>{iD.init(e,t),o1.init(e,t)});function l8(e){return av(l7,e)}let de=tg("ZodNull",(e,t)=>{iR.init(e,t),o1.init(e,t)});function dt(e){return ak(de,e)}let dr=tg("ZodAny",(e,t)=>{iL.init(e,t),o1.init(e,t)});function dn(){return aw(dr)}let di=tg("ZodUnknown",(e,t)=>{iU.init(e,t),o1.init(e,t)});function ds(){return aN(di)}let da=tg("ZodNever",(e,t)=>{iF.init(e,t),o1.init(e,t)});function dl(e){return a$(da,e)}let dd=tg("ZodVoid",(e,t)=>{iZ.init(e,t),o1.init(e,t)});function dc(e){return aS(dd,e)}let du=tg("ZodDate",(e,t)=>{iB.init(e,t),o1.init(e,t),e.min=(t,r)=>e.check(aO(t,r)),e.max=(t,r)=>e.check(aC(t,r));let r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function dp(e){return aj(du,e)}let dh=tg("ZodArray",(e,t)=>{iH.init(e,t),o1.init(e,t),e.element=t.element,e.min=(t,r)=>e.check(aZ(t,r)),e.nonempty=t=>e.check(aZ(1,t)),e.max=(t,r)=>e.check(aF(t,r)),e.length=(t,r)=>e.check(aB(t,r)),e.unwrap=()=>e.element});function dm(e,t){return a5(dh,e,t)}function df(e){return dP(Object.keys(e._zod.def.shape))}let dg=tg("ZodObject",(e,t)=>{iG.init(e,t),o1.init(e,t),oA.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>dP(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:ds()}),e.loose=()=>e.clone({...e._zod.def,catchall:ds()}),e.strict=()=>e.clone({...e._zod.def,catchall:dl()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>oA.extend(e,t),e.safeExtend=t=>oA.safeExtend(e,t),e.merge=t=>oA.merge(e,t),e.pick=t=>oA.pick(e,t),e.omit=t=>oA.omit(e,t),e.partial=(...t)=>oA.partial(dV,e,t[0]),e.required=(...t)=>oA.required(dQ,e,t[0])});function dy(e,t){return new dg({type:"object",shape:e??{},...oA.normalizeParams(t)})}function dx(e,t){return new dg({type:"object",shape:e,catchall:dl(),...oA.normalizeParams(t)})}function db(e,t){return new dg({type:"object",shape:e,catchall:ds(),...oA.normalizeParams(t)})}let dv=tg("ZodUnion",(e,t)=>{iX.init(e,t),o1.init(e,t),e.options=t.options});function dk(e,t){return new dv({type:"union",options:e,...oA.normalizeParams(t)})}let dw=tg("ZodDiscriminatedUnion",(e,t)=>{dv.init(e,t),iQ.init(e,t)});function dN(e,t,r){return new dw({type:"union",options:t,discriminator:e,...oA.normalizeParams(r)})}let d$=tg("ZodIntersection",(e,t)=>{i0.init(e,t),o1.init(e,t)});function dS(e,t){return new d$({type:"intersection",left:e,right:t})}let dj=tg("ZodTuple",(e,t)=>{i2.init(e,t),o1.init(e,t),e.rest=t=>e.clone({...e._zod.def,rest:t})});function dT(e,t,r){let n=t instanceof n7,i=n?r:t;return new dj({type:"tuple",items:e,rest:n?t:null,...oA.normalizeParams(i)})}let d_=tg("ZodRecord",(e,t)=>{i5.init(e,t),o1.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function dI(e,t,r){return new d_({type:"record",keyType:e,valueType:t,...oA.normalizeParams(r)})}function dC(e,t,r){let n=t0(e);return n._zod.values=void 0,new d_({type:"record",keyType:n,valueType:t,...oA.normalizeParams(r)})}let dA=tg("ZodMap",(e,t)=>{i6.init(e,t),o1.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function dO(e,t,r){return new dA({type:"map",keyType:e,valueType:t,...oA.normalizeParams(r)})}let dE=tg("ZodSet",(e,t)=>{i9.init(e,t),o1.init(e,t),e.min=(...t)=>e.check(aL(...t)),e.nonempty=t=>e.check(aL(1,t)),e.max=(...t)=>e.check(aR(...t)),e.size=(...t)=>e.check(aU(...t))});function dM(e,t){return new dE({type:"set",valueType:e,...oA.normalizeParams(t)})}let dz=tg("ZodEnum",(e,t)=>{i8.init(e,t),o1.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,n)=>{let i={};for(let n of e)if(r.has(n))i[n]=t.entries[n];else throw Error(`Key ${n} not found in enum`);return new dz({...t,checks:[],...oA.normalizeParams(n),entries:i})},e.exclude=(e,n)=>{let i={...t.entries};for(let t of e)if(r.has(t))delete i[t];else throw Error(`Key ${t} not found in enum`);return new dz({...t,checks:[],...oA.normalizeParams(n),entries:i})}});function dP(e,t){return new dz({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...oA.normalizeParams(t)})}function dD(e,t){return new dz({type:"enum",entries:e,...oA.normalizeParams(t)})}let dR=tg("ZodLiteral",(e,t)=>{se.init(e,t),o1.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function dL(e,t){return new dR({type:"literal",values:Array.isArray(e)?e:[e],...oA.normalizeParams(t)})}let dU=tg("ZodFile",(e,t)=>{st.init(e,t),o1.init(e,t),e.min=(t,r)=>e.check(aL(t,r)),e.max=(t,r)=>e.check(aR(t,r)),e.mime=(t,r)=>e.check(aY(Array.isArray(t)?t:[t],r))});function dF(e){return oa(dU,e)}let dZ=tg("ZodTransform",(e,t)=>{sr.init(e,t),o1.init(e,t),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new tb(e.constructor.name);r.addIssue=n=>{"string"==typeof n?r.issues.push(oA.issue(n,r.value,t)):(n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=e),r.issues.push(oA.issue(n)))};let i=t.transform(r.value,r);return i instanceof Promise?i.then(e=>(r.value=e,r)):(r.value=i,r)}});function dB(e){return new dZ({type:"transform",transform:e})}let dV=tg("ZodOptional",(e,t)=>{si.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType});function dH(e){return new dV({type:"optional",innerType:e})}let dW=tg("ZodNullable",(e,t)=>{ss.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType});function dK(e){return new dW({type:"nullable",innerType:e})}function dq(e){return dH(dK(e))}let dJ=tg("ZodDefault",(e,t)=>{sa.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function dG(e,t){return new dJ({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():oA.shallowClone(t)}})}let dY=tg("ZodPrefault",(e,t)=>{sl.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType});function dX(e,t){return new dY({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():oA.shallowClone(t)}})}let dQ=tg("ZodNonOptional",(e,t)=>{sd.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType});function d0(e,t){return new dQ({type:"nonoptional",innerType:e,...oA.normalizeParams(t)})}let d1=tg("ZodSuccess",(e,t)=>{su.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType});function d2(e){return new d1({type:"success",innerType:e})}let d4=tg("ZodCatch",(e,t)=>{sp.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function d5(e,t){return new d4({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})}let d6=tg("ZodNaN",(e,t)=>{sh.init(e,t),o1.init(e,t)});function d3(e){return a_(d6,e)}let d9=tg("ZodPipe",(e,t)=>{sm.init(e,t),o1.init(e,t),e.in=t.in,e.out=t.out});function d7(e,t){return new d9({type:"pipe",in:e,out:t})}let d8=tg("ZodCodec",(e,t)=>{d9.init(e,t),sg.init(e,t)});function ce(e,t,r){return new d8({type:"pipe",in:e,out:t,transform:r.decode,reverseTransform:r.encode})}let ct=tg("ZodReadonly",(e,t)=>{sb.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType});function cr(e){return new ct({type:"readonly",innerType:e})}let cn=tg("ZodTemplateLiteral",(e,t)=>{sk.init(e,t),o1.init(e,t)});function ci(e,t){return new cn({type:"template_literal",parts:e,...oA.normalizeParams(t)})}let cs=tg("ZodLazy",(e,t)=>{s$.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.getter()});function ca(e){return new cs({type:"lazy",getter:e})}let co=tg("ZodPromise",(e,t)=>{sN.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType});function cl(e){return new co({type:"promise",innerType:e})}let cd=tg("ZodFunction",(e,t)=>{sw.init(e,t),o1.init(e,t)});function cc(e){return new cd({type:"function",input:Array.isArray(e?.input)?dT(e?.input):e?.input??dm(ds()),output:e?.output??ds()})}let cu=tg("ZodCustom",(e,t)=>{sS.init(e,t),o1.init(e,t)});function cp(e){let t=new nP({check:"custom"});return t._zod.check=e,t}function ch(e,t){return ob(cu,e??(()=>!0),t)}function cm(e,t={}){return ov(cu,e,t)}function cf(e){return ok(e)}let cg=oN,cy=o$;function cx(e,t={error:`Input not instance of ${e.name}`}){let r=new cu({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...oA.normalizeParams(t)});return r._zod.bag.Class=e,r}let cb=(...e)=>oS({Codec:d8,Boolean:lQ,String:o4},...e);function cv(e){let t=ca(()=>dk([o5(e),lW(),l0(),dt(),dm(t),dI(o5(),t)]));return t}function ck(e,t){return d7(dB(e),t)}let cw={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function cN(e){tk({customError:e})}function c$(){return tk().customError}function cS(e){return sF(o4,e)}function cj(e){return ao(lH,e)}function cT(e){return am(lQ,e)}function c_(e){return ag(l1,e)}function cI(e){return aT(du,e)}r||(r={}),e.s(["ZodFirstPartyTypeKind",()=>r,"ZodIssueCode",0,cw,"getErrorMap",()=>c$,"setErrorMap",()=>cN],6034),e.s(["bigint",()=>c_,"boolean",()=>cT,"date",()=>cI,"number",()=>cj,"string",()=>cS],13657),tk(s_()),e.s([],98821),e.i(98821),e.i(92135),e.i(97753),e.i(3108),e.i(74969),e.i(32952),e.i(55605),e.i(98477);var cC=oA,cA=oC;e.i(43365),e.s(["ar",0,function(){let e,t;return{localeError:(e={string:{unit:"Ø­Ø±Ù",verb:"Ø£Ù† ÙŠØ­ÙˆÙŠ"},file:{unit:"Ø¨Ø§ÙŠØª",verb:"Ø£Ù† ÙŠØ­ÙˆÙŠ"},array:{unit:"Ø¹Ù†ØµØ±",verb:"Ø£Ù† ÙŠØ­ÙˆÙŠ"},set:{unit:"Ø¹Ù†ØµØ±",verb:"Ø£Ù† ÙŠØ­ÙˆÙŠ"}},t={regex:"Ù…Ø¯Ø®Ù„",email:"Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",url:"Ø±Ø§Ø¨Ø·",emoji:"Ø¥ÙŠÙ…ÙˆØ¬ÙŠ",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø¨Ù…Ø¹ÙŠØ§Ø± ISO",date:"ØªØ§Ø±ÙŠØ® Ø¨Ù…Ø¹ÙŠØ§Ø± ISO",time:"ÙˆÙ‚Øª Ø¨Ù…Ø¹ÙŠØ§Ø± ISO",duration:"Ù…Ø¯Ø© Ø¨Ù…Ø¹ÙŠØ§Ø± ISO",ipv4:"Ø¹Ù†ÙˆØ§Ù† IPv4",ipv6:"Ø¹Ù†ÙˆØ§Ù† IPv6",cidrv4:"Ù…Ø¯Ù‰ Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨ØµÙŠØºØ© IPv4",cidrv6:"Ù…Ø¯Ù‰ Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨ØµÙŠØºØ© IPv6",base64:"Ù†ÙŽØµ Ø¨ØªØ±Ù…ÙŠØ² base64-encoded",base64url:"Ù†ÙŽØµ Ø¨ØªØ±Ù…ÙŠØ² base64url-encoded",json_string:"Ù†ÙŽØµ Ø¹Ù„Ù‰ Ù‡ÙŠØ¦Ø© JSON",e164:"Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¨Ù…Ø¹ÙŠØ§Ø± E.164",jwt:"JWT",template_literal:"Ù…Ø¯Ø®Ù„"},r=>{switch(r.code){case"invalid_type":return`Ù…Ø¯Ø®Ù„Ø§Øª ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„Ø©: ÙŠÙØªØ±Ø¶ Ø¥Ø¯Ø®Ø§Ù„ ${r.expected}ØŒ ÙˆÙ„ÙƒÙ† ØªÙ… Ø¥Ø¯Ø®Ø§Ù„ ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ù…Ø¯Ø®Ù„Ø§Øª ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„Ø©: ÙŠÙØªØ±Ø¶ Ø¥Ø¯Ø®Ø§Ù„ ${t4(r.values[0])}`;return`Ø§Ø®ØªÙŠØ§Ø± ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„: ÙŠØªÙˆÙ‚Ø¹ Ø§Ù†ØªÙ‚Ø§Ø¡ Ø£Ø­Ø¯ Ù‡Ø°Ù‡ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª: ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù„Ø§Ø²Ù…: ÙŠÙØªØ±Ø¶ Ø£Ù† ØªÙƒÙˆÙ† ${r.origin??"Ø§Ù„Ù‚ÙŠÙ…Ø©"} ${t} ${r.maximum.toString()} ${n.unit??"Ø¹Ù†ØµØ±"}`;return`Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù„Ø§Ø²Ù…: ÙŠÙØªØ±Ø¶ Ø£Ù† ØªÙƒÙˆÙ† ${r.origin??"Ø§Ù„Ù‚ÙŠÙ…Ø©"} ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Ø£ØµØºØ± Ù…Ù† Ø§Ù„Ù„Ø§Ø²Ù…: ÙŠÙØªØ±Ø¶ Ù„Ù€ ${r.origin} Ø£Ù† ÙŠÙƒÙˆÙ† ${t} ${r.minimum.toString()} ${n.unit}`;return`Ø£ØµØºØ± Ù…Ù† Ø§Ù„Ù„Ø§Ø²Ù…: ÙŠÙØªØ±Ø¶ Ù„Ù€ ${r.origin} Ø£Ù† ÙŠÙƒÙˆÙ† ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Ù†ÙŽØµ ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„: ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ "${r.prefix}"`;if("ends_with"===r.format)return`Ù†ÙŽØµ ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„: ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙ†ØªÙ‡ÙŠ Ø¨Ù€ "${r.suffix}"`;if("includes"===r.format)return`Ù†ÙŽØµ ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„: ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªØ¶Ù…Ù‘ÙŽÙ† "${r.includes}"`;if("regex"===r.format)return`Ù†ÙŽØµ ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„: ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ·Ø§Ø¨Ù‚ Ø§Ù„Ù†Ù…Ø· ${r.pattern}`;return`${t[r.format]??r.format} ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„`;case"not_multiple_of":return`Ø±Ù‚Ù… ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„: ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…Ù† Ù…Ø¶Ø§Ø¹ÙØ§Øª ${r.divisor}`;case"unrecognized_keys":return`Ù…Ø¹Ø±Ù${r.keys.length>1?"Ø§Øª":""} ØºØ±ÙŠØ¨${r.keys.length>1?"Ø©":""}: ${t_(r.keys,"ØŒ ")}`;case"invalid_key":return`Ù…Ø¹Ø±Ù ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„ ÙÙŠ ${r.origin}`;case"invalid_union":default:return"Ù…Ø¯Ø®Ù„ ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„";case"invalid_element":return`Ù…Ø¯Ø®Ù„ ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„ ÙÙŠ ${r.origin}`}})}},"az",0,function(){let e,t;return{localeError:(e={string:{unit:"simvol",verb:"olmalÄ±dÄ±r"},file:{unit:"bayt",verb:"olmalÄ±dÄ±r"},array:{unit:"element",verb:"olmalÄ±dÄ±r"},set:{unit:"element",verb:"olmalÄ±dÄ±r"}},t={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`YanlÄ±ÅŸ dÉ™yÉ™r: g\xf6zlÉ™nilÉ™n ${r.expected}, daxil olan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`YanlÄ±ÅŸ dÉ™yÉ™r: g\xf6zlÉ™nilÉ™n ${t4(r.values[0])}`;return`YanlÄ±ÅŸ se\xe7im: aÅŸaÄŸÄ±dakÄ±lardan biri olmalÄ±dÄ±r: ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`\xc7ox b\xf6y\xfck: g\xf6zlÉ™nilÉ™n ${r.origin??"dÉ™yÉ™r"} ${t}${r.maximum.toString()} ${n.unit??"element"}`;return`\xc7ox b\xf6y\xfck: g\xf6zlÉ™nilÉ™n ${r.origin??"dÉ™yÉ™r"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`\xc7ox ki\xe7ik: g\xf6zlÉ™nilÉ™n ${r.origin} ${t}${r.minimum.toString()} ${n.unit}`;return`\xc7ox ki\xe7ik: g\xf6zlÉ™nilÉ™n ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`YanlÄ±ÅŸ mÉ™tn: "${r.prefix}" ilÉ™ baÅŸlamalÄ±dÄ±r`;if("ends_with"===r.format)return`YanlÄ±ÅŸ mÉ™tn: "${r.suffix}" ilÉ™ bitmÉ™lidir`;if("includes"===r.format)return`YanlÄ±ÅŸ mÉ™tn: "${r.includes}" daxil olmalÄ±dÄ±r`;if("regex"===r.format)return`YanlÄ±ÅŸ mÉ™tn: ${r.pattern} ÅŸablonuna uyÄŸun olmalÄ±dÄ±r`;return`YanlÄ±ÅŸ ${t[r.format]??r.format}`;case"not_multiple_of":return`YanlÄ±ÅŸ É™dÉ™d: ${r.divisor} ilÉ™ b\xf6l\xfcnÉ™ bilÉ™n olmalÄ±dÄ±r`;case"unrecognized_keys":return`TanÄ±nmayan a\xe7ar${r.keys.length>1?"lar":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`${r.origin} daxilindÉ™ yanlÄ±ÅŸ a\xe7ar`;case"invalid_union":return"YanlÄ±ÅŸ dÉ™yÉ™r";case"invalid_element":return`${r.origin} daxilindÉ™ yanlÄ±ÅŸ dÉ™yÉ™r`;default:return`YanlÄ±ÅŸ dÉ™yÉ™r`}})}},"be",0,function(){let e,t;return{localeError:(e={string:{unit:{one:"ÑÑ–Ð¼Ð²Ð°Ð»",few:"ÑÑ–Ð¼Ð²Ð°Ð»Ñ‹",many:"ÑÑ–Ð¼Ð²Ð°Ð»Ð°Ñž"},verb:"Ð¼ÐµÑ†ÑŒ"},array:{unit:{one:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",few:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹",many:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñž"},verb:"Ð¼ÐµÑ†ÑŒ"},set:{unit:{one:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",few:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹",many:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñž"},verb:"Ð¼ÐµÑ†ÑŒ"},file:{unit:{one:"Ð±Ð°Ð¹Ñ‚",few:"Ð±Ð°Ð¹Ñ‚Ñ‹",many:"Ð±Ð°Ð¹Ñ‚Ð°Ñž"},verb:"Ð¼ÐµÑ†ÑŒ"}},t={regex:"ÑƒÐ²Ð¾Ð´",email:"email Ð°Ð´Ñ€Ð°Ñ",url:"URL",emoji:"ÑÐ¼Ð¾Ð´Ð·Ñ–",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO Ð´Ð°Ñ‚Ð° Ñ– Ñ‡Ð°Ñ",date:"ISO Ð´Ð°Ñ‚Ð°",time:"ISO Ñ‡Ð°Ñ",duration:"ISO Ð¿Ñ€Ð°Ñ†ÑÐ³Ð»Ð°ÑÑ†ÑŒ",ipv4:"IPv4 Ð°Ð´Ñ€Ð°Ñ",ipv6:"IPv6 Ð°Ð´Ñ€Ð°Ñ",cidrv4:"IPv4 Ð´Ñ‹ÑÐ¿Ð°Ð·Ð¾Ð½",cidrv6:"IPv6 Ð´Ñ‹ÑÐ¿Ð°Ð·Ð¾Ð½",base64:"Ñ€Ð°Ð´Ð¾Ðº Ñƒ Ñ„Ð°Ñ€Ð¼Ð°Ñ†Ðµ base64",base64url:"Ñ€Ð°Ð´Ð¾Ðº Ñƒ Ñ„Ð°Ñ€Ð¼Ð°Ñ†Ðµ base64url",json_string:"JSON Ñ€Ð°Ð´Ð¾Ðº",e164:"Ð½ÑƒÐ¼Ð°Ñ€ E.164",jwt:"JWT",template_literal:"ÑƒÐ²Ð¾Ð´"},r=>{switch(r.code){case"invalid_type":return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ ÑžÐ²Ð¾Ð´: Ñ‡Ð°ÐºÐ°ÑžÑÑ ${r.expected}, Ð°Ñ‚Ñ€Ñ‹Ð¼Ð°Ð½Ð° ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Ð»Ñ–Ðº";case"object":if(Array.isArray(e))return"Ð¼Ð°ÑÑ–Ñž";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ ÑžÐ²Ð¾Ð´: Ñ‡Ð°ÐºÐ°Ð»Ð°ÑÑ ${t4(r.values[0])}`;return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ Ð²Ð°Ñ€Ñ‹ÑÐ½Ñ‚: Ñ‡Ð°ÐºÐ°ÑžÑÑ Ð°Ð´Ð·Ñ–Ð½ Ð· ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n){let e=sT(Number(r.maximum),n.unit.one,n.unit.few,n.unit.many);return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð° Ð²ÑÐ»Ñ–ÐºÑ–: Ñ‡Ð°ÐºÐ°Ð»Ð°ÑÑ, ÑˆÑ‚Ð¾ ${r.origin??"Ð·Ð½Ð°Ñ‡ÑÐ½Ð½Ðµ"} Ð¿Ð°Ð²Ñ–Ð½Ð½Ð° ${n.verb} ${t}${r.maximum.toString()} ${e}`}return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð° Ð²ÑÐ»Ñ–ÐºÑ–: Ñ‡Ð°ÐºÐ°Ð»Ð°ÑÑ, ÑˆÑ‚Ð¾ ${r.origin??"Ð·Ð½Ð°Ñ‡ÑÐ½Ð½Ðµ"} Ð¿Ð°Ð²Ñ–Ð½Ð½Ð° Ð±Ñ‹Ñ†ÑŒ ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n){let e=sT(Number(r.minimum),n.unit.one,n.unit.few,n.unit.many);return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð° Ð¼Ð°Ð»Ñ‹: Ñ‡Ð°ÐºÐ°Ð»Ð°ÑÑ, ÑˆÑ‚Ð¾ ${r.origin} Ð¿Ð°Ð²Ñ–Ð½Ð½Ð° ${n.verb} ${t}${r.minimum.toString()} ${e}`}return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð° Ð¼Ð°Ð»Ñ‹: Ñ‡Ð°ÐºÐ°Ð»Ð°ÑÑ, ÑˆÑ‚Ð¾ ${r.origin} Ð¿Ð°Ð²Ñ–Ð½Ð½Ð° Ð±Ñ‹Ñ†ÑŒ ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ Ñ€Ð°Ð´Ð¾Ðº: Ð¿Ð°Ð²Ñ–Ð½ÐµÐ½ Ð¿Ð°Ñ‡Ñ‹Ð½Ð°Ñ†Ñ†Ð° Ð· "${r.prefix}"`;if("ends_with"===r.format)return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ Ñ€Ð°Ð´Ð¾Ðº: Ð¿Ð°Ð²Ñ–Ð½ÐµÐ½ Ð·Ð°ÐºÐ°Ð½Ñ‡Ð²Ð°Ñ†Ñ†Ð° Ð½Ð° "${r.suffix}"`;if("includes"===r.format)return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ Ñ€Ð°Ð´Ð¾Ðº: Ð¿Ð°Ð²Ñ–Ð½ÐµÐ½ Ð·Ð¼ÑÑˆÑ‡Ð°Ñ†ÑŒ "${r.includes}"`;if("regex"===r.format)return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ Ñ€Ð°Ð´Ð¾Ðº: Ð¿Ð°Ð²Ñ–Ð½ÐµÐ½ Ð°Ð´Ð¿Ð°Ð²ÑÐ´Ð°Ñ†ÑŒ ÑˆÐ°Ð±Ð»Ð¾Ð½Ñƒ ${r.pattern}`;return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ ${t[r.format]??r.format}`;case"not_multiple_of":return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ Ð»Ñ–Ðº: Ð¿Ð°Ð²Ñ–Ð½ÐµÐ½ Ð±Ñ‹Ñ†ÑŒ ÐºÑ€Ð°Ñ‚Ð½Ñ‹Ð¼ ${r.divisor}`;case"unrecognized_keys":return`ÐÐµÑ€Ð°ÑÐ¿Ð°Ð·Ð½Ð°Ð½Ñ‹ ${r.keys.length>1?"ÐºÐ»ÑŽÑ‡Ñ‹":"ÐºÐ»ÑŽÑ‡"}: ${t_(r.keys,", ")}`;case"invalid_key":return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ ÐºÐ»ÑŽÑ‡ Ñƒ ${r.origin}`;case"invalid_union":return"ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ ÑžÐ²Ð¾Ð´";case"invalid_element":return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ð°Ðµ Ð·Ð½Ð°Ñ‡ÑÐ½Ð½Ðµ Ñž ${r.origin}`;default:return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ ÑžÐ²Ð¾Ð´`}})}},"bg",0,function(){let e,t;return{localeError:(e={string:{unit:"ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°",verb:"Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð°"},file:{unit:"Ð±Ð°Ð¹Ñ‚Ð°",verb:"Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð°"},array:{unit:"ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°",verb:"Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð°"},set:{unit:"ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°",verb:"Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð°"}},t={regex:"Ð²Ñ…Ð¾Ð´",email:"Ð¸Ð¼ÐµÐ¹Ð» Ð°Ð´Ñ€ÐµÑ",url:"URL",emoji:"ÐµÐ¼Ð¾Ð´Ð¶Ð¸",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO Ð²Ñ€ÐµÐ¼Ðµ",date:"ISO Ð´Ð°Ñ‚Ð°",time:"ISO Ð²Ñ€ÐµÐ¼Ðµ",duration:"ISO Ð¿Ñ€Ð¾Ð´ÑŠÐ»Ð¶Ð¸Ñ‚ÐµÐ»Ð½Ð¾ÑÑ‚",ipv4:"IPv4 Ð°Ð´Ñ€ÐµÑ",ipv6:"IPv6 Ð°Ð´Ñ€ÐµÑ",cidrv4:"IPv4 Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½",cidrv6:"IPv6 Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½",base64:"base64-ÐºÐ¾Ð´Ð¸Ñ€Ð°Ð½ Ð½Ð¸Ð·",base64url:"base64url-ÐºÐ¾Ð´Ð¸Ñ€Ð°Ð½ Ð½Ð¸Ð·",json_string:"JSON Ð½Ð¸Ð·",e164:"E.164 Ð½Ð¾Ð¼ÐµÑ€",jwt:"JWT",template_literal:"Ð²Ñ…Ð¾Ð´"},r=>{switch(r.code){case"invalid_type":return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð²Ñ…Ð¾Ð´: Ð¾Ñ‡Ð°ÐºÐ²Ð°Ð½ ${r.expected}, Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½ ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Ñ‡Ð¸ÑÐ»Ð¾";case"object":if(Array.isArray(e))return"Ð¼Ð°ÑÐ¸Ð²";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð²Ñ…Ð¾Ð´: Ð¾Ñ‡Ð°ÐºÐ²Ð°Ð½ ${t4(r.values[0])}`;return`ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð° Ð¾Ð¿Ñ†Ð¸Ñ: Ð¾Ñ‡Ð°ÐºÐ²Ð°Ð½Ð¾ ÐµÐ´Ð½Ð¾ Ð¾Ñ‚ ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Ð¢Ð²ÑŠÑ€Ð´Ðµ Ð³Ð¾Ð»ÑÐ¼Ð¾: Ð¾Ñ‡Ð°ÐºÐ²Ð° ÑÐµ ${r.origin??"ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚"} Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð° ${t}${r.maximum.toString()} ${n.unit??"ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°"}`;return`Ð¢Ð²ÑŠÑ€Ð´Ðµ Ð³Ð¾Ð»ÑÐ¼Ð¾: Ð¾Ñ‡Ð°ÐºÐ²Ð° ÑÐµ ${r.origin??"ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚"} Ð´Ð° Ð±ÑŠÐ´Ðµ ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Ð¢Ð²ÑŠÑ€Ð´Ðµ Ð¼Ð°Ð»ÐºÐ¾: Ð¾Ñ‡Ð°ÐºÐ²Ð° ÑÐµ ${r.origin} Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð° ${t}${r.minimum.toString()} ${n.unit}`;return`Ð¢Ð²ÑŠÑ€Ð´Ðµ Ð¼Ð°Ð»ÐºÐ¾: Ð¾Ñ‡Ð°ÐºÐ²Ð° ÑÐµ ${r.origin} Ð´Ð° Ð±ÑŠÐ´Ðµ ${t}${r.minimum.toString()}`}case"invalid_format":{if("starts_with"===r.format)return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð½Ð¸Ð·: Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ð·Ð°Ð¿Ð¾Ñ‡Ð²Ð° Ñ "${r.prefix}"`;if("ends_with"===r.format)return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð½Ð¸Ð·: Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ð·Ð°Ð²ÑŠÑ€ÑˆÐ²Ð° Ñ "${r.suffix}"`;if("includes"===r.format)return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð½Ð¸Ð·: Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ð²ÐºÐ»ÑŽÑ‡Ð²Ð° "${r.includes}"`;if("regex"===r.format)return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð½Ð¸Ð·: Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° ÑÑŠÐ²Ð¿Ð°Ð´Ð° Ñ ${r.pattern}`;let e="ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½";return"emoji"===r.format&&(e="ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð¾"),"datetime"===r.format&&(e="ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð¾"),"date"===r.format&&(e="ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð°"),"time"===r.format&&(e="ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð¾"),"duration"===r.format&&(e="ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð°"),`${e} ${t[r.format]??r.format}`}case"not_multiple_of":return`ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð¾ Ñ‡Ð¸ÑÐ»Ð¾: Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ð±ÑŠÐ´Ðµ ÐºÑ€Ð°Ñ‚Ð½Ð¾ Ð½Ð° ${r.divisor}`;case"unrecognized_keys":return`ÐÐµÑ€Ð°Ð·Ð¿Ð¾Ð·Ð½Ð°Ñ‚${r.keys.length>1?"Ð¸":""} ÐºÐ»ÑŽÑ‡${r.keys.length>1?"Ð¾Ð²Ðµ":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ ÐºÐ»ÑŽÑ‡ Ð² ${r.origin}`;case"invalid_union":return"ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð²Ñ…Ð¾Ð´";case"invalid_element":return`ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð° ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚ Ð² ${r.origin}`;default:return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð²Ñ…Ð¾Ð´`}})}},"ca",0,function(){let e,t;return{localeError:(e={string:{unit:"carÃ cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}},t={regex:"entrada",email:"adreÃ§a electrÃ²nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adreÃ§a IPv4",ipv6:"adreÃ§a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"nÃºmero E.164",jwt:"JWT",template_literal:"entrada"},r=>{switch(r.code){case"invalid_type":return`Tipus inv\xe0lid: s'esperava ${r.expected}, s'ha rebut ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Valor inv\xe0lid: s'esperava ${t4(r.values[0])}`;return`Opci\xf3 inv\xe0lida: s'esperava una de ${t_(r.values," o ")}`;case"too_big":{let t=r.inclusive?"com a mÃ xim":"menys de",n=e[r.origin]??null;if(n)return`Massa gran: s'esperava que ${r.origin??"el valor"} contingu\xe9s ${t} ${r.maximum.toString()} ${n.unit??"elements"}`;return`Massa gran: s'esperava que ${r.origin??"el valor"} fos ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?"com a mÃ­nim":"mÃ©s de",n=e[r.origin]??null;if(n)return`Massa petit: s'esperava que ${r.origin} contingu\xe9s ${t} ${r.minimum.toString()} ${n.unit}`;return`Massa petit: s'esperava que ${r.origin} fos ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Format inv\xe0lid: ha de comen\xe7ar amb "${r.prefix}"`;if("ends_with"===r.format)return`Format inv\xe0lid: ha d'acabar amb "${r.suffix}"`;if("includes"===r.format)return`Format inv\xe0lid: ha d'incloure "${r.includes}"`;if("regex"===r.format)return`Format inv\xe0lid: ha de coincidir amb el patr\xf3 ${r.pattern}`;return`Format inv\xe0lid per a ${t[r.format]??r.format}`;case"not_multiple_of":return`N\xfamero inv\xe0lid: ha de ser m\xfaltiple de ${r.divisor}`;case"unrecognized_keys":return`Clau${r.keys.length>1?"s":""} no reconeguda${r.keys.length>1?"s":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`Clau inv\xe0lida a ${r.origin}`;case"invalid_union":return"Entrada invÃ lida";case"invalid_element":return`Element inv\xe0lid a ${r.origin}`;default:return`Entrada inv\xe0lida`}})}},"cs",0,function(){let e,t;return{localeError:(e={string:{unit:"znakÅ¯",verb:"mÃ­t"},file:{unit:"bajtÅ¯",verb:"mÃ­t"},array:{unit:"prvkÅ¯",verb:"mÃ­t"},set:{unit:"prvkÅ¯",verb:"mÃ­t"}},t={regex:"regulÃ¡rnÃ­ vÃ½raz",email:"e-mailovÃ¡ adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a Äas ve formÃ¡tu ISO",date:"datum ve formÃ¡tu ISO",time:"Äas ve formÃ¡tu ISO",duration:"doba trvÃ¡nÃ­ ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"Å™etÄ›zec zakÃ³dovanÃ½ ve formÃ¡tu base64",base64url:"Å™etÄ›zec zakÃ³dovanÃ½ ve formÃ¡tu base64url",json_string:"Å™etÄ›zec ve formÃ¡tu JSON",e164:"ÄÃ­slo E.164",jwt:"JWT",template_literal:"vstup"},r=>{switch(r.code){case"invalid_type":return`Neplatn\xfd vstup: oÄek\xe1v\xe1no ${r.expected}, obdrÅ¾eno ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"ÄÃ­slo";case"string":return"Å™etÄ›zec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":if(Array.isArray(e))return"pole";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Neplatn\xfd vstup: oÄek\xe1v\xe1no ${t4(r.values[0])}`;return`Neplatn\xe1 moÅ¾nost: oÄek\xe1v\xe1na jedna z hodnot ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Hodnota je pÅ™\xedliÅ¡ velk\xe1: ${r.origin??"hodnota"} mus\xed m\xedt ${t}${r.maximum.toString()} ${n.unit??"prvkÅ¯"}`;return`Hodnota je pÅ™\xedliÅ¡ velk\xe1: ${r.origin??"hodnota"} mus\xed b\xfdt ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Hodnota je pÅ™\xedliÅ¡ mal\xe1: ${r.origin??"hodnota"} mus\xed m\xedt ${t}${r.minimum.toString()} ${n.unit??"prvkÅ¯"}`;return`Hodnota je pÅ™\xedliÅ¡ mal\xe1: ${r.origin??"hodnota"} mus\xed b\xfdt ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Neplatn\xfd Å™etÄ›zec: mus\xed zaÄ\xednat na "${r.prefix}"`;if("ends_with"===r.format)return`Neplatn\xfd Å™etÄ›zec: mus\xed konÄit na "${r.suffix}"`;if("includes"===r.format)return`Neplatn\xfd Å™etÄ›zec: mus\xed obsahovat "${r.includes}"`;if("regex"===r.format)return`Neplatn\xfd Å™etÄ›zec: mus\xed odpov\xeddat vzoru ${r.pattern}`;return`Neplatn\xfd form\xe1t ${t[r.format]??r.format}`;case"not_multiple_of":return`Neplatn\xe9 Ä\xedslo: mus\xed b\xfdt n\xe1sobkem ${r.divisor}`;case"unrecognized_keys":return`Nezn\xe1m\xe9 kl\xedÄe: ${t_(r.keys,", ")}`;case"invalid_key":return`Neplatn\xfd kl\xedÄ v ${r.origin}`;case"invalid_union":return"NeplatnÃ½ vstup";case"invalid_element":return`Neplatn\xe1 hodnota v ${r.origin}`;default:return`Neplatn\xfd vstup`}})}},"da",0,function(){let e,t,r;return{localeError:(e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},t={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"sÃ¦t",file:"fil"},r={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslÃ¦t",date:"ISO-dato",time:"ISO-klokkeslÃ¦t",duration:"ISO-varighed",ipv4:"IPv4-omrÃ¥de",ipv6:"IPv6-omrÃ¥de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},n=>{var i,s,a,o;switch(n.code){case"invalid_type":return`Ugyldigt input: forventede ${t[i=n.expected]??i}, fik ${t[s=(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tal";case"object":if(Array.isArray(e))return"liste";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name;return"objekt"}return t})(n.input)]??s}`;case"invalid_value":if(1===n.values.length)return`Ugyldig v\xe6rdi: forventede ${t4(n.values[0])}`;return`Ugyldigt valg: forventede en af f\xf8lgende ${t_(n.values,"|")}`;case"too_big":{let r=n.inclusive?"<=":"<",i=e[n.origin]??null,s=t[a=n.origin]??a;if(i)return`For stor: forventede ${s??"value"} ${i.verb} ${r} ${n.maximum.toString()} ${i.unit??"elementer"}`;return`For stor: forventede ${s??"value"} havde ${r} ${n.maximum.toString()}`}case"too_small":{let r=n.inclusive?">=":">",i=e[n.origin]??null,s=t[o=n.origin]??o;if(i)return`For lille: forventede ${s} ${i.verb} ${r} ${n.minimum.toString()} ${i.unit}`;return`For lille: forventede ${s} havde ${r} ${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Ugyldig streng: skal starte med "${n.prefix}"`;if("ends_with"===n.format)return`Ugyldig streng: skal ende med "${n.suffix}"`;if("includes"===n.format)return`Ugyldig streng: skal indeholde "${n.includes}"`;if("regex"===n.format)return`Ugyldig streng: skal matche m\xf8nsteret ${n.pattern}`;return`Ugyldig ${r[n.format]??n.format}`;case"not_multiple_of":return`Ugyldigt tal: skal v\xe6re deleligt med ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ukendte nÃ¸gler":"Ukendt nÃ¸gle"}: ${t_(n.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8gle i ${n.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xe6rdi i ${n.origin}`;default:return"Ugyldigt input"}})}},"de",0,function(){let e,t;return{localeError:(e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}},t={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},r=>{switch(r.code){case"invalid_type":return`Ung\xfcltige Eingabe: erwartet ${r.expected}, erhalten ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Zahl";case"object":if(Array.isArray(e))return"Array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ung\xfcltige Eingabe: erwartet ${t4(r.values[0])}`;return`Ung\xfcltige Option: erwartet eine von ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Zu gro\xdf: erwartet, dass ${r.origin??"Wert"} ${t}${r.maximum.toString()} ${n.unit??"Elemente"} hat`;return`Zu gro\xdf: erwartet, dass ${r.origin??"Wert"} ${t}${r.maximum.toString()} ist`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Zu klein: erwartet, dass ${r.origin} ${t}${r.minimum.toString()} ${n.unit} hat`;return`Zu klein: erwartet, dass ${r.origin} ${t}${r.minimum.toString()} ist`}case"invalid_format":if("starts_with"===r.format)return`Ung\xfcltiger String: muss mit "${r.prefix}" beginnen`;if("ends_with"===r.format)return`Ung\xfcltiger String: muss mit "${r.suffix}" enden`;if("includes"===r.format)return`Ung\xfcltiger String: muss "${r.includes}" enthalten`;if("regex"===r.format)return`Ung\xfcltiger String: muss dem Muster ${r.pattern} entsprechen`;return`Ung\xfcltig: ${t[r.format]??r.format}`;case"not_multiple_of":return`Ung\xfcltige Zahl: muss ein Vielfaches von ${r.divisor} sein`;case"unrecognized_keys":return`${r.keys.length>1?"Unbekannte SchlÃ¼ssel":"Unbekannter SchlÃ¼ssel"}: ${t_(r.keys,", ")}`;case"invalid_key":return`Ung\xfcltiger Schl\xfcssel in ${r.origin}`;case"invalid_union":return"UngÃ¼ltige Eingabe";case"invalid_element":return`Ung\xfcltiger Wert in ${r.origin}`;default:return`Ung\xfcltige Eingabe`}})}},"en",0,s_,"eo",0,function(){let e,t;return{localeError:(e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}},t={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoÄio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daÅ­ro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},r=>{switch(r.code){case"invalid_type":return`Nevalida enigo: atendiÄis ${r.expected}, riceviÄis ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombro";case"object":if(Array.isArray(e))return"tabelo";if(null===e)return"senvalora";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Nevalida enigo: atendiÄis ${t4(r.values[0])}`;return`Nevalida opcio: atendiÄis unu el ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Tro granda: atendiÄis ke ${r.origin??"valoro"} havu ${t}${r.maximum.toString()} ${n.unit??"elementojn"}`;return`Tro granda: atendiÄis ke ${r.origin??"valoro"} havu ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Tro malgranda: atendiÄis ke ${r.origin} havu ${t}${r.minimum.toString()} ${n.unit}`;return`Tro malgranda: atendiÄis ke ${r.origin} estu ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Nevalida karaktraro: devas komenciÄi per "${r.prefix}"`;if("ends_with"===r.format)return`Nevalida karaktraro: devas finiÄi per "${r.suffix}"`;if("includes"===r.format)return`Nevalida karaktraro: devas inkluzivi "${r.includes}"`;if("regex"===r.format)return`Nevalida karaktraro: devas kongrui kun la modelo ${r.pattern}`;return`Nevalida ${t[r.format]??r.format}`;case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${r.divisor}`;case"unrecognized_keys":return`Nekonata${r.keys.length>1?"j":""} Ålosilo${r.keys.length>1?"j":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`Nevalida Ålosilo en ${r.origin}`;case"invalid_union":default:return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${r.origin}`}})}},"es",0,function(){return{localeError:(()=>{let e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},t={string:"texto",number:"nÃºmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"nÃºmero grande",symbol:"sÃ­mbolo",undefined:"indefinido",null:"nulo",function:"funciÃ³n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraciÃ³n",union:"uniÃ³n",literal:"literal",promise:"promesa",void:"vacÃ­o",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(e){return t[e]??e}let n={regex:"entrada",email:"direcciÃ³n de correo electrÃ³nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraciÃ³n ISO",ipv4:"direcciÃ³n IPv4",ipv6:"direcciÃ³n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"nÃºmero E.164",jwt:"JWT",template_literal:"entrada"};return t=>{switch(t.code){case"invalid_type":return`Entrada inv\xe1lida: se esperaba ${r(t.expected)}, recibido ${r((e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype)return e.constructor.name;return"object"}return t})(t.input))}`;case"invalid_value":if(1===t.values.length)return`Entrada inv\xe1lida: se esperaba ${t4(t.values[0])}`;return`Opci\xf3n inv\xe1lida: se esperaba una de ${t_(t.values,"|")}`;case"too_big":{let n=t.inclusive?"<=":"<",i=e[t.origin]??null,s=r(t.origin);if(i)return`Demasiado grande: se esperaba que ${s??"valor"} tuviera ${n}${t.maximum.toString()} ${i.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${s??"valor"} fuera ${n}${t.maximum.toString()}`}case"too_small":{let n=t.inclusive?">=":">",i=e[t.origin]??null,s=r(t.origin);if(i)return`Demasiado peque\xf1o: se esperaba que ${s} tuviera ${n}${t.minimum.toString()} ${i.unit}`;return`Demasiado peque\xf1o: se esperaba que ${s} fuera ${n}${t.minimum.toString()}`}case"invalid_format":if("starts_with"===t.format)return`Cadena inv\xe1lida: debe comenzar con "${t.prefix}"`;if("ends_with"===t.format)return`Cadena inv\xe1lida: debe terminar en "${t.suffix}"`;if("includes"===t.format)return`Cadena inv\xe1lida: debe incluir "${t.includes}"`;if("regex"===t.format)return`Cadena inv\xe1lida: debe coincidir con el patr\xf3n ${t.pattern}`;return`Inv\xe1lido ${n[t.format]??t.format}`;case"not_multiple_of":return`N\xfamero inv\xe1lido: debe ser m\xfaltiplo de ${t.divisor}`;case"unrecognized_keys":return`Llave${t.keys.length>1?"s":""} desconocida${t.keys.length>1?"s":""}: ${t_(t.keys,", ")}`;case"invalid_key":return`Llave inv\xe1lida en ${r(t.origin)}`;case"invalid_union":return"Entrada invÃ¡lida";case"invalid_element":return`Valor inv\xe1lido en ${r(t.origin)}`;default:return`Entrada inv\xe1lida`}}})()}},"fa",0,function(){let e,t;return{localeError:(e={string:{unit:"Ú©Ø§Ø±Ø§Ú©ØªØ±",verb:"Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯"},file:{unit:"Ø¨Ø§ÛŒØª",verb:"Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯"},array:{unit:"Ø¢ÛŒØªÙ…",verb:"Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯"},set:{unit:"Ø¢ÛŒØªÙ…",verb:"Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯"}},t={regex:"ÙˆØ±ÙˆØ¯ÛŒ",email:"Ø¢Ø¯Ø±Ø³ Ø§ÛŒÙ…ÛŒÙ„",url:"URL",emoji:"Ø§ÛŒÙ…ÙˆØ¬ÛŒ",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ØªØ§Ø±ÛŒØ® Ùˆ Ø²Ù…Ø§Ù† Ø§ÛŒØ²Ùˆ",date:"ØªØ§Ø±ÛŒØ® Ø§ÛŒØ²Ùˆ",time:"Ø²Ù…Ø§Ù† Ø§ÛŒØ²Ùˆ",duration:"Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ø§ÛŒØ²Ùˆ",ipv4:"IPv4 Ø¢Ø¯Ø±Ø³",ipv6:"IPv6 Ø¢Ø¯Ø±Ø³",cidrv4:"IPv4 Ø¯Ø§Ù…Ù†Ù‡",cidrv6:"IPv6 Ø¯Ø§Ù…Ù†Ù‡",base64:"base64-encoded Ø±Ø´ØªÙ‡",base64url:"base64url-encoded Ø±Ø´ØªÙ‡",json_string:"JSON Ø±Ø´ØªÙ‡",e164:"E.164 Ø¹Ø¯Ø¯",jwt:"JWT",template_literal:"ÙˆØ±ÙˆØ¯ÛŒ"},r=>{switch(r.code){case"invalid_type":return`ÙˆØ±ÙˆØ¯ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ù…ÛŒâ€ŒØ¨Ø§ÛŒØ³Øª ${r.expected} Ù…ÛŒâ€ŒØ¨ÙˆØ¯ØŒ ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Ø¹Ø¯Ø¯";case"object":if(Array.isArray(e))return"Ø¢Ø±Ø§ÛŒÙ‡";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)} Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯`;case"invalid_value":if(1===r.values.length)return`ÙˆØ±ÙˆØ¯ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ù…ÛŒâ€ŒØ¨Ø§ÛŒØ³Øª ${t4(r.values[0])} Ù…ÛŒâ€ŒØ¨ÙˆØ¯`;return`Ú¯Ø²ÛŒÙ†Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ù…ÛŒâ€ŒØ¨Ø§ÛŒØ³Øª ÛŒÚ©ÛŒ Ø§Ø² ${t_(r.values,"|")} Ù…ÛŒâ€ŒØ¨ÙˆØ¯`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Ø®ÛŒÙ„ÛŒ Ø¨Ø²Ø±Ú¯: ${r.origin??"Ù…Ù‚Ø¯Ø§Ø±"} Ø¨Ø§ÛŒØ¯ ${t}${r.maximum.toString()} ${n.unit??"Ø¹Ù†ØµØ±"} Ø¨Ø§Ø´Ø¯`;return`Ø®ÛŒÙ„ÛŒ Ø¨Ø²Ø±Ú¯: ${r.origin??"Ù…Ù‚Ø¯Ø§Ø±"} Ø¨Ø§ÛŒØ¯ ${t}${r.maximum.toString()} Ø¨Ø§Ø´Ø¯`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Ø®ÛŒÙ„ÛŒ Ú©ÙˆÚ†Ú©: ${r.origin} Ø¨Ø§ÛŒØ¯ ${t}${r.minimum.toString()} ${n.unit} Ø¨Ø§Ø´Ø¯`;return`Ø®ÛŒÙ„ÛŒ Ú©ÙˆÚ†Ú©: ${r.origin} Ø¨Ø§ÛŒØ¯ ${t}${r.minimum.toString()} Ø¨Ø§Ø´Ø¯`}case"invalid_format":if("starts_with"===r.format)return`Ø±Ø´ØªÙ‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ø¨Ø§ÛŒØ¯ Ø¨Ø§ "${r.prefix}" Ø´Ø±ÙˆØ¹ Ø´ÙˆØ¯`;if("ends_with"===r.format)return`Ø±Ø´ØªÙ‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ø¨Ø§ÛŒØ¯ Ø¨Ø§ "${r.suffix}" ØªÙ…Ø§Ù… Ø´ÙˆØ¯`;if("includes"===r.format)return`Ø±Ø´ØªÙ‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ø¨Ø§ÛŒØ¯ Ø´Ø§Ù…Ù„ "${r.includes}" Ø¨Ø§Ø´Ø¯`;if("regex"===r.format)return`Ø±Ø´ØªÙ‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ø¨Ø§ÛŒØ¯ Ø¨Ø§ Ø§Ù„Ú¯ÙˆÛŒ ${r.pattern} Ù…Ø·Ø§Ø¨Ù‚Øª Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯`;return`${t[r.format]??r.format} Ù†Ø§Ù…Ø¹ØªØ¨Ø±`;case"not_multiple_of":return`Ø¹Ø¯Ø¯ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ø¨Ø§ÛŒØ¯ Ù…Ø¶Ø±Ø¨ ${r.divisor} Ø¨Ø§Ø´Ø¯`;case"unrecognized_keys":return`Ú©Ù„ÛŒØ¯${r.keys.length>1?"Ù‡Ø§ÛŒ":""} Ù†Ø§Ø´Ù†Ø§Ø³: ${t_(r.keys,", ")}`;case"invalid_key":return`Ú©Ù„ÛŒØ¯ Ù†Ø§Ø´Ù†Ø§Ø³ Ø¯Ø± ${r.origin}`;case"invalid_union":default:return`ÙˆØ±ÙˆØ¯ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø±`;case"invalid_element":return`Ù…Ù‚Ø¯Ø§Ø± Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø¯Ø± ${r.origin}`}})}},"fi",0,function(){let e,t;return{localeError:(e={string:{unit:"merkkiÃ¤",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"pÃ¤ivÃ¤mÃ¤Ã¤rÃ¤n"}},t={regex:"sÃ¤Ã¤nnÃ¶llinen lauseke",email:"sÃ¤hkÃ¶postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-pÃ¤ivÃ¤mÃ¤Ã¤rÃ¤",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},r=>{switch(r.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${r.expected}, oli ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Virheellinen sy\xf6te: t\xe4ytyy olla ${t4(r.values[0])}`;return`Virheellinen valinta: t\xe4ytyy olla yksi seuraavista: ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Liian suuri: ${n.subject} t\xe4ytyy olla ${t}${r.maximum.toString()} ${n.unit}`.trim();return`Liian suuri: arvon t\xe4ytyy olla ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Liian pieni: ${n.subject} t\xe4ytyy olla ${t}${r.minimum.toString()} ${n.unit}`.trim();return`Liian pieni: arvon t\xe4ytyy olla ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy alkaa "${r.prefix}"`;if("ends_with"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy loppua "${r.suffix}"`;if("includes"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy sis\xe4lt\xe4\xe4 "${r.includes}"`;if("regex"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy vastata s\xe4\xe4nn\xf6llist\xe4 lauseketta ${r.pattern}`;return`Virheellinen ${t[r.format]??r.format}`;case"not_multiple_of":return`Virheellinen luku: t\xe4ytyy olla luvun ${r.divisor} monikerta`;case"unrecognized_keys":return`${r.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${t_(r.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return`Virheellinen sy\xf6te`}})}},"fr",0,function(){let e,t;return{localeError:(e={string:{unit:"caractÃ¨res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"Ã©lÃ©ments",verb:"avoir"},set:{unit:"Ã©lÃ©ments",verb:"avoir"}},t={regex:"entrÃ©e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"durÃ©e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaÃ®ne encodÃ©e en base64",base64url:"chaÃ®ne encodÃ©e en base64url",json_string:"chaÃ®ne JSON",e164:"numÃ©ro E.164",jwt:"JWT",template_literal:"entrÃ©e"},r=>{switch(r.code){case"invalid_type":return`Entr\xe9e invalide : ${r.expected} attendu, ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombre";case"object":if(Array.isArray(e))return"tableau";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)} re\xe7u`;case"invalid_value":if(1===r.values.length)return`Entr\xe9e invalide : ${t4(r.values[0])} attendu`;return`Option invalide : une valeur parmi ${t_(r.values,"|")} attendue`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Trop grand : ${r.origin??"valeur"} doit ${n.verb} ${t}${r.maximum.toString()} ${n.unit??"Ã©lÃ©ment(s)"}`;return`Trop grand : ${r.origin??"valeur"} doit \xeatre ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Trop petit : ${r.origin} doit ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return`Trop petit : ${r.origin} doit \xeatre ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Cha\xeene invalide : doit commencer par "${r.prefix}"`;if("ends_with"===r.format)return`Cha\xeene invalide : doit se terminer par "${r.suffix}"`;if("includes"===r.format)return`Cha\xeene invalide : doit inclure "${r.includes}"`;if("regex"===r.format)return`Cha\xeene invalide : doit correspondre au mod\xe8le ${r.pattern}`;return`${t[r.format]??r.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${r.divisor}`;case"unrecognized_keys":return`Cl\xe9${r.keys.length>1?"s":""} non reconnue${r.keys.length>1?"s":""} : ${t_(r.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${r.origin}`;case"invalid_union":return"EntrÃ©e invalide";case"invalid_element":return`Valeur invalide dans ${r.origin}`;default:return`Entr\xe9e invalide`}})}},"frCA",0,function(){let e,t;return{localeError:(e={string:{unit:"caractÃ¨res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"Ã©lÃ©ments",verb:"avoir"},set:{unit:"Ã©lÃ©ments",verb:"avoir"}},t={regex:"entrÃ©e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"durÃ©e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaÃ®ne encodÃ©e en base64",base64url:"chaÃ®ne encodÃ©e en base64url",json_string:"chaÃ®ne JSON",e164:"numÃ©ro E.164",jwt:"JWT",template_literal:"entrÃ©e"},r=>{switch(r.code){case"invalid_type":return`Entr\xe9e invalide : attendu ${r.expected}, re\xe7u ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Entr\xe9e invalide : attendu ${t4(r.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"â‰¤":"<",n=e[r.origin]??null;if(n)return`Trop grand : attendu que ${r.origin??"la valeur"} ait ${t}${r.maximum.toString()} ${n.unit}`;return`Trop grand : attendu que ${r.origin??"la valeur"} soit ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?"â‰¥":">",n=e[r.origin]??null;if(n)return`Trop petit : attendu que ${r.origin} ait ${t}${r.minimum.toString()} ${n.unit}`;return`Trop petit : attendu que ${r.origin} soit ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Cha\xeene invalide : doit commencer par "${r.prefix}"`;if("ends_with"===r.format)return`Cha\xeene invalide : doit se terminer par "${r.suffix}"`;if("includes"===r.format)return`Cha\xeene invalide : doit inclure "${r.includes}"`;if("regex"===r.format)return`Cha\xeene invalide : doit correspondre au motif ${r.pattern}`;return`${t[r.format]??r.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${r.divisor}`;case"unrecognized_keys":return`Cl\xe9${r.keys.length>1?"s":""} non reconnue${r.keys.length>1?"s":""} : ${t_(r.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${r.origin}`;case"invalid_union":return"EntrÃ©e invalide";case"invalid_element":return`Valeur invalide dans ${r.origin}`;default:return`Entr\xe9e invalide`}})}},"he",0,function(){let e,t,r,n,i,s,a,o;return{localeError:(e={string:{label:"×ž×—×¨×•×–×ª",gender:"f"},number:{label:"×ž×¡×¤×¨",gender:"m"},boolean:{label:"×¢×¨×š ×‘×•×œ×™×× ×™",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"×ª××¨×™×š",gender:"m"},array:{label:"×ž×¢×¨×š",gender:"m"},object:{label:"××•×‘×™×™×§×˜",gender:"m"},null:{label:"×¢×¨×š ×¨×™×§ (null)",gender:"m"},undefined:{label:"×¢×¨×š ×œ× ×ž×•×’×“×¨ (undefined)",gender:"m"},symbol:{label:"×¡×™×ž×‘×•×œ (Symbol)",gender:"m"},function:{label:"×¤×•× ×§×¦×™×”",gender:"f"},map:{label:"×ž×¤×” (Map)",gender:"f"},set:{label:"×§×‘×•×¦×” (Set)",gender:"f"},file:{label:"×§×•×‘×¥",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"×¢×¨×š ×œ× ×™×“×•×¢",gender:"m"},value:{label:"×¢×¨×š",gender:"m"}},t={string:{unit:"×ª×•×•×™×",shortLabel:"×§×¦×¨",longLabel:"××¨×•×š"},file:{unit:"×‘×™×™×˜×™×",shortLabel:"×§×˜×Ÿ",longLabel:"×’×“×•×œ"},array:{unit:"×¤×¨×™×˜×™×",shortLabel:"×§×˜×Ÿ",longLabel:"×’×“×•×œ"},set:{unit:"×¤×¨×™×˜×™×",shortLabel:"×§×˜×Ÿ",longLabel:"×’×“×•×œ"},number:{unit:"",shortLabel:"×§×˜×Ÿ",longLabel:"×’×“×•×œ"}},r=t=>t?e[t]:void 0,n=t=>{let n=r(t);return n?n.label:t??e.unknown.label},i=e=>`×”${n(e)}`,s=e=>{let t=r(e);return"f"===(t?.gender??"m")?"×¦×¨×™×›×” ×œ×”×™×•×ª":"×¦×¨×™×š ×œ×”×™×•×ª"},a=e=>e?t[e]??null:null,o={regex:{label:"×§×œ×˜",gender:"m"},email:{label:"×›×ª×•×‘×ª ××™×ž×™×™×œ",gender:"f"},url:{label:"×›×ª×•×‘×ª ×¨×©×ª",gender:"f"},emoji:{label:"××™×ž×•×’'×™",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"×ª××¨×™×š ×•×–×ž×Ÿ ISO",gender:"m"},date:{label:"×ª××¨×™×š ISO",gender:"m"},time:{label:"×–×ž×Ÿ ISO",gender:"m"},duration:{label:"×ž×©×š ×–×ž×Ÿ ISO",gender:"m"},ipv4:{label:"×›×ª×•×‘×ª IPv4",gender:"f"},ipv6:{label:"×›×ª×•×‘×ª IPv6",gender:"f"},cidrv4:{label:"×˜×•×•×— IPv4",gender:"m"},cidrv6:{label:"×˜×•×•×— IPv6",gender:"m"},base64:{label:"×ž×—×¨×•×–×ª ×‘×‘×¡×™×¡ 64",gender:"f"},base64url:{label:"×ž×—×¨×•×–×ª ×‘×‘×¡×™×¡ 64 ×œ×›×ª×•×‘×•×ª ×¨×©×ª",gender:"f"},json_string:{label:"×ž×—×¨×•×–×ª JSON",gender:"f"},e164:{label:"×ž×¡×¤×¨ E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"×§×œ×˜",gender:"m"},includes:{label:"×§×œ×˜",gender:"m"},lowercase:{label:"×§×œ×˜",gender:"m"},starts_with:{label:"×§×œ×˜",gender:"m"},uppercase:{label:"×§×œ×˜",gender:"m"}},t=>{switch(t.code){case"invalid_type":{let r=n(t.expected),i=(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name;return"object";default:return t}})(t.input),s=e[i]?.label??i;return`×§×œ×˜ ×œ× ×ª×§×™×Ÿ: ×¦×¨×™×š ×œ×”×™×•×ª ${r}, ×”×ª×§×‘×œ ${s}`}case"invalid_value":{if(1===t.values.length)return`×¢×¨×š ×œ× ×ª×§×™×Ÿ: ×”×¢×¨×š ×—×™×™×‘ ×œ×”×™×•×ª ${t4(t.values[0])}`;let e=t.values.map(e=>t4(e));if(2===t.values.length)return`×¢×¨×š ×œ× ×ª×§×™×Ÿ: ×”××¤×©×¨×•×™×•×ª ×”×ž×ª××™×ž×•×ª ×”×Ÿ ${e[0]} ××• ${e[1]}`;let r=e[e.length-1],n=e.slice(0,-1).join(", ");return`×¢×¨×š ×œ× ×ª×§×™×Ÿ: ×”××¤×©×¨×•×™×•×ª ×”×ž×ª××™×ž×•×ª ×”×Ÿ ${n} ××• ${r}`}case"too_big":{let e=a(t.origin),r=i(t.origin??"value");if("string"===t.origin)return`${e?.longLabel??"××¨×•×š"} ×ž×“×™: ${r} ×¦×¨×™×›×” ×œ×”×›×™×œ ${t.maximum.toString()} ${e?.unit??""} ${t.inclusive?"××• ×¤×—×•×ª":"×œ×›×œ ×”×™×•×ª×¨"}`.trim();if("number"===t.origin){let e=t.inclusive?`×§×˜×Ÿ ××• ×©×•×•×” ×œ-${t.maximum}`:`×§×˜×Ÿ ×ž-${t.maximum}`;return`×’×“×•×œ ×ž×“×™: ${r} ×¦×¨×™×š ×œ×”×™×•×ª ${e}`}if("array"===t.origin||"set"===t.origin){let n="set"===t.origin?"×¦×¨×™×›×”":"×¦×¨×™×š",i=t.inclusive?`${t.maximum} ${e?.unit??""} ××• ×¤×—×•×ª`:`×¤×—×•×ª ×ž-${t.maximum} ${e?.unit??""}`;return`×’×“×•×œ ×ž×“×™: ${r} ${n} ×œ×”×›×™×œ ${i}`.trim()}let n=t.inclusive?"<=":"<",o=s(t.origin??"value");if(e?.unit)return`${e.longLabel} ×ž×“×™: ${r} ${o} ${n}${t.maximum.toString()} ${e.unit}`;return`${e?.longLabel??"×’×“×•×œ"} ×ž×“×™: ${r} ${o} ${n}${t.maximum.toString()}`}case"too_small":{let e=a(t.origin),r=i(t.origin??"value");if("string"===t.origin)return`${e?.shortLabel??"×§×¦×¨"} ×ž×“×™: ${r} ×¦×¨×™×›×” ×œ×”×›×™×œ ${t.minimum.toString()} ${e?.unit??""} ${t.inclusive?"××• ×™×•×ª×¨":"×œ×¤×—×•×ª"}`.trim();if("number"===t.origin){let e=t.inclusive?`×’×“×•×œ ××• ×©×•×•×” ×œ-${t.minimum}`:`×’×“×•×œ ×ž-${t.minimum}`;return`×§×˜×Ÿ ×ž×“×™: ${r} ×¦×¨×™×š ×œ×”×™×•×ª ${e}`}if("array"===t.origin||"set"===t.origin){let n="set"===t.origin?"×¦×¨×™×›×”":"×¦×¨×™×š";if(1===t.minimum&&t.inclusive){let e=(t.origin,"×œ×¤×—×•×ª ×¤×¨×™×˜ ××—×“");return`×§×˜×Ÿ ×ž×“×™: ${r} ${n} ×œ×”×›×™×œ ${e}`}let i=t.inclusive?`${t.minimum} ${e?.unit??""} ××• ×™×•×ª×¨`:`×™×•×ª×¨ ×ž-${t.minimum} ${e?.unit??""}`;return`×§×˜×Ÿ ×ž×“×™: ${r} ${n} ×œ×”×›×™×œ ${i}`.trim()}let n=t.inclusive?">=":">",o=s(t.origin??"value");if(e?.unit)return`${e.shortLabel} ×ž×“×™: ${r} ${o} ${n}${t.minimum.toString()} ${e.unit}`;return`${e?.shortLabel??"×§×˜×Ÿ"} ×ž×“×™: ${r} ${o} ${n}${t.minimum.toString()}`}case"invalid_format":{if("starts_with"===t.format)return`×”×ž×—×¨×•×–×ª ×—×™×™×‘×ª ×œ×”×ª×—×™×œ ×‘ "${t.prefix}"`;if("ends_with"===t.format)return`×”×ž×—×¨×•×–×ª ×—×™×™×‘×ª ×œ×”×¡×ª×™×™× ×‘ "${t.suffix}"`;if("includes"===t.format)return`×”×ž×—×¨×•×–×ª ×—×™×™×‘×ª ×œ×›×œ×•×œ "${t.includes}"`;if("regex"===t.format)return`×”×ž×—×¨×•×–×ª ×—×™×™×‘×ª ×œ×”×ª××™× ×œ×ª×‘× ×™×ª ${t.pattern}`;let e=o[t.format],r=e?.label??t.format,n=e?.gender??"m";return`${r} ×œ× ${"f"===n?"×ª×§×™× ×”":"×ª×§×™×Ÿ"}`}case"not_multiple_of":return`×ž×¡×¤×¨ ×œ× ×ª×§×™×Ÿ: ×—×™×™×‘ ×œ×”×™×•×ª ×ž×›×¤×œ×” ×©×œ ${t.divisor}`;case"unrecognized_keys":return`×ž×¤×ª×—${t.keys.length>1?"×•×ª":""} ×œ× ×ž×–×•×”${t.keys.length>1?"×™×":"×”"}: ${t_(t.keys,", ")}`;case"invalid_key":return`×©×“×” ×œ× ×ª×§×™×Ÿ ×‘××•×‘×™×™×§×˜`;case"invalid_union":return"×§×œ×˜ ×œ× ×ª×§×™×Ÿ";case"invalid_element":{let e=i(t.origin??"array");return`×¢×¨×š ×œ× ×ª×§×™×Ÿ ×‘${e}`}default:return`×§×œ×˜ ×œ× ×ª×§×™×Ÿ`}})}},"hu",0,function(){let e,t;return{localeError:(e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}},t={regex:"bemenet",email:"email cÃ­m",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO idÅ‘bÃ©lyeg",date:"ISO dÃ¡tum",time:"ISO idÅ‘",duration:"ISO idÅ‘intervallum",ipv4:"IPv4 cÃ­m",ipv6:"IPv6 cÃ­m",cidrv4:"IPv4 tartomÃ¡ny",cidrv6:"IPv6 tartomÃ¡ny",base64:"base64-kÃ³dolt string",base64url:"base64url-kÃ³dolt string",json_string:"JSON string",e164:"E.164 szÃ¡m",jwt:"JWT",template_literal:"bemenet"},r=>{switch(r.code){case"invalid_type":return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${r.expected}, a kapott \xe9rt\xe9k ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"szÃ¡m";case"object":if(Array.isArray(e))return"tÃ¶mb";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${t4(r.values[0])}`;return`\xc9rv\xe9nytelen opci\xf3: valamelyik \xe9rt\xe9k v\xe1rt ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`T\xfal nagy: ${r.origin??"Ã©rtÃ©k"} m\xe9rete t\xfal nagy ${t}${r.maximum.toString()} ${n.unit??"elem"}`;return`T\xfal nagy: a bemeneti \xe9rt\xe9k ${r.origin??"Ã©rtÃ©k"} t\xfal nagy: ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${r.origin} m\xe9rete t\xfal kicsi ${t}${r.minimum.toString()} ${n.unit}`;return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${r.origin} t\xfal kicsi ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`\xc9rv\xe9nytelen string: "${r.prefix}" \xe9rt\xe9kkel kell kezdÅ‘dnie`;if("ends_with"===r.format)return`\xc9rv\xe9nytelen string: "${r.suffix}" \xe9rt\xe9kkel kell v\xe9gzÅ‘dnie`;if("includes"===r.format)return`\xc9rv\xe9nytelen string: "${r.includes}" \xe9rt\xe9ket kell tartalmaznia`;if("regex"===r.format)return`\xc9rv\xe9nytelen string: ${r.pattern} mint\xe1nak kell megfelelnie`;return`\xc9rv\xe9nytelen ${t[r.format]??r.format}`;case"not_multiple_of":return`\xc9rv\xe9nytelen sz\xe1m: ${r.divisor} t\xf6bbsz\xf6r\xf6s\xe9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${r.keys.length>1?"s":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`\xc9rv\xe9nytelen kulcs ${r.origin}`;case"invalid_union":return"Ã‰rvÃ©nytelen bemenet";case"invalid_element":return`\xc9rv\xe9nytelen \xe9rt\xe9k: ${r.origin}`;default:return`\xc9rv\xe9nytelen bemenet`}})}},"id",0,function(){let e,t;return{localeError:(e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}},t={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Input tidak valid: diharapkan ${r.expected}, diterima ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Input tidak valid: diharapkan ${t4(r.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Terlalu besar: diharapkan ${r.origin??"value"} memiliki ${t}${r.maximum.toString()} ${n.unit??"elemen"}`;return`Terlalu besar: diharapkan ${r.origin??"value"} menjadi ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Terlalu kecil: diharapkan ${r.origin} memiliki ${t}${r.minimum.toString()} ${n.unit}`;return`Terlalu kecil: diharapkan ${r.origin} menjadi ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`String tidak valid: harus dimulai dengan "${r.prefix}"`;if("ends_with"===r.format)return`String tidak valid: harus berakhir dengan "${r.suffix}"`;if("includes"===r.format)return`String tidak valid: harus menyertakan "${r.includes}"`;if("regex"===r.format)return`String tidak valid: harus sesuai pola ${r.pattern}`;return`${t[r.format]??r.format} tidak valid`;case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${r.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${r.keys.length>1?"s":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${r.origin}`;case"invalid_union":default:return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${r.origin}`}})}},"is",0,function(){let e,t;return{localeError:(e={string:{unit:"stafi",verb:"aÃ° hafa"},file:{unit:"bÃ¦ti",verb:"aÃ° hafa"},array:{unit:"hluti",verb:"aÃ° hafa"},set:{unit:"hluti",verb:"aÃ° hafa"}},t={regex:"gildi",email:"netfang",url:"vefslÃ³Ã°",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og tÃ­mi",date:"ISO dagsetning",time:"ISO tÃ­mi",duration:"ISO tÃ­malengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 tÃ¶lugildi",jwt:"JWT",template_literal:"gildi"},r=>{switch(r.code){case"invalid_type":return`Rangt gildi: \xde\xfa sl\xf3st inn ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nÃºmer";case"object":if(Array.isArray(e))return"fylki";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)} \xfear sem \xe1 a\xf0 vera ${r.expected}`;case"invalid_value":if(1===r.values.length)return`Rangt gildi: gert r\xe1\xf0 fyrir ${t4(r.values[0])}`;return`\xd3gilt val: m\xe1 vera eitt af eftirfarandi ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin??"gildi"} hafi ${t}${r.maximum.toString()} ${n.unit??"hluti"}`;return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin??"gildi"} s\xe9 ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin} hafi ${t}${r.minimum.toString()} ${n.unit}`;return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin} s\xe9 ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 byrja \xe1 "${r.prefix}"`;if("ends_with"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 enda \xe1 "${r.suffix}"`;if("includes"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 innihalda "${r.includes}"`;if("regex"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 fylgja mynstri ${r.pattern}`;return`Rangt ${t[r.format]??r.format}`;case"not_multiple_of":return`R\xf6ng tala: ver\xf0ur a\xf0 vera margfeldi af ${r.divisor}`;case"unrecognized_keys":return`\xd3\xfeekkt ${r.keys.length>1?"ir lyklar":"ur lykill"}: ${t_(r.keys,", ")}`;case"invalid_key":return`Rangur lykill \xed ${r.origin}`;case"invalid_union":default:return"Rangt gildi";case"invalid_element":return`Rangt gildi \xed ${r.origin}`}})}},"it",0,function(){let e,t;return{localeError:(e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}},t={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Input non valido: atteso ${r.expected}, ricevuto ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numero";case"object":if(Array.isArray(e))return"vettore";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Input non valido: atteso ${t4(r.values[0])}`;return`Opzione non valida: atteso uno tra ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Troppo grande: ${r.origin??"valore"} deve avere ${t}${r.maximum.toString()} ${n.unit??"elementi"}`;return`Troppo grande: ${r.origin??"valore"} deve essere ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Troppo piccolo: ${r.origin} deve avere ${t}${r.minimum.toString()} ${n.unit}`;return`Troppo piccolo: ${r.origin} deve essere ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Stringa non valida: deve iniziare con "${r.prefix}"`;if("ends_with"===r.format)return`Stringa non valida: deve terminare con "${r.suffix}"`;if("includes"===r.format)return`Stringa non valida: deve includere "${r.includes}"`;if("regex"===r.format)return`Stringa non valida: deve corrispondere al pattern ${r.pattern}`;return`Invalid ${t[r.format]??r.format}`;case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${r.divisor}`;case"unrecognized_keys":return`Chiav${r.keys.length>1?"i":"e"} non riconosciut${r.keys.length>1?"e":"a"}: ${t_(r.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${r.origin}`;case"invalid_union":default:return"Input non valido";case"invalid_element":return`Valore non valido in ${r.origin}`}})}},"ja",0,function(){let e,t;return{localeError:(e={string:{unit:"æ–‡å­—",verb:"ã§ã‚ã‚‹"},file:{unit:"ãƒã‚¤ãƒˆ",verb:"ã§ã‚ã‚‹"},array:{unit:"è¦ç´ ",verb:"ã§ã‚ã‚‹"},set:{unit:"è¦ç´ ",verb:"ã§ã‚ã‚‹"}},t={regex:"å…¥åŠ›å€¤",email:"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",url:"URL",emoji:"çµµæ–‡å­—",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISOæ—¥æ™‚",date:"ISOæ—¥ä»˜",time:"ISOæ™‚åˆ»",duration:"ISOæœŸé–“",ipv4:"IPv4ã‚¢ãƒ‰ãƒ¬ã‚¹",ipv6:"IPv6ã‚¢ãƒ‰ãƒ¬ã‚¹",cidrv4:"IPv4ç¯„å›²",cidrv6:"IPv6ç¯„å›²",base64:"base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰æ–‡å­—åˆ—",base64url:"base64urlã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰æ–‡å­—åˆ—",json_string:"JSONæ–‡å­—åˆ—",e164:"E.164ç•ªå·",jwt:"JWT",template_literal:"å…¥åŠ›å€¤"},r=>{switch(r.code){case"invalid_type":return`ç„¡åŠ¹ãªå…¥åŠ›: ${r.expected}ãŒæœŸå¾…ã•ã‚Œã¾ã—ãŸãŒã€${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"æ•°å€¤";case"object":if(Array.isArray(e))return"é…åˆ—";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}ãŒå…¥åŠ›ã•ã‚Œã¾ã—ãŸ`;case"invalid_value":if(1===r.values.length)return`ç„¡åŠ¹ãªå…¥åŠ›: ${t4(r.values[0])}ãŒæœŸå¾…ã•ã‚Œã¾ã—ãŸ`;return`ç„¡åŠ¹ãªé¸æŠž: ${t_(r.values,"ã€")}ã®ã„ãšã‚Œã‹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™`;case"too_big":{let t=r.inclusive?"ä»¥ä¸‹ã§ã‚ã‚‹":"ã‚ˆã‚Šå°ã•ã„",n=e[r.origin]??null;if(n)return`å¤§ãã™ãŽã‚‹å€¤: ${r.origin??"å€¤"}ã¯${r.maximum.toString()}${n.unit??"è¦ç´ "}${t}å¿…è¦ãŒã‚ã‚Šã¾ã™`;return`å¤§ãã™ãŽã‚‹å€¤: ${r.origin??"å€¤"}ã¯${r.maximum.toString()}${t}å¿…è¦ãŒã‚ã‚Šã¾ã™`}case"too_small":{let t=r.inclusive?"ä»¥ä¸Šã§ã‚ã‚‹":"ã‚ˆã‚Šå¤§ãã„",n=e[r.origin]??null;if(n)return`å°ã•ã™ãŽã‚‹å€¤: ${r.origin}ã¯${r.minimum.toString()}${n.unit}${t}å¿…è¦ãŒã‚ã‚Šã¾ã™`;return`å°ã•ã™ãŽã‚‹å€¤: ${r.origin}ã¯${r.minimum.toString()}${t}å¿…è¦ãŒã‚ã‚Šã¾ã™`}case"invalid_format":if("starts_with"===r.format)return`ç„¡åŠ¹ãªæ–‡å­—åˆ—: "${r.prefix}"ã§å§‹ã¾ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™`;if("ends_with"===r.format)return`ç„¡åŠ¹ãªæ–‡å­—åˆ—: "${r.suffix}"ã§çµ‚ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™`;if("includes"===r.format)return`ç„¡åŠ¹ãªæ–‡å­—åˆ—: "${r.includes}"ã‚’å«ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™`;if("regex"===r.format)return`ç„¡åŠ¹ãªæ–‡å­—åˆ—: ãƒ‘ã‚¿ãƒ¼ãƒ³${r.pattern}ã«ä¸€è‡´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™`;return`ç„¡åŠ¹ãª${t[r.format]??r.format}`;case"not_multiple_of":return`ç„¡åŠ¹ãªæ•°å€¤: ${r.divisor}ã®å€æ•°ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™`;case"unrecognized_keys":return`èªè­˜ã•ã‚Œã¦ã„ãªã„ã‚­ãƒ¼${r.keys.length>1?"ç¾¤":""}: ${t_(r.keys,"ã€")}`;case"invalid_key":return`${r.origin}å†…ã®ç„¡åŠ¹ãªã‚­ãƒ¼`;case"invalid_union":return"ç„¡åŠ¹ãªå…¥åŠ›";case"invalid_element":return`${r.origin}å†…ã®ç„¡åŠ¹ãªå€¤`;default:return`ç„¡åŠ¹ãªå…¥åŠ›`}})}},"ka",0,function(){let e,t;return{localeError:(e={string:{unit:"áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒ",verb:"áƒ£áƒœáƒ“áƒ áƒ¨áƒ”áƒ˜áƒªáƒáƒ•áƒ“áƒ”áƒ¡"},file:{unit:"áƒ‘áƒáƒ˜áƒ¢áƒ˜",verb:"áƒ£áƒœáƒ“áƒ áƒ¨áƒ”áƒ˜áƒªáƒáƒ•áƒ“áƒ”áƒ¡"},array:{unit:"áƒ”áƒšáƒ”áƒ›áƒ”áƒœáƒ¢áƒ˜",verb:"áƒ£áƒœáƒ“áƒ áƒ¨áƒ”áƒ˜áƒªáƒáƒ•áƒ“áƒ”áƒ¡"},set:{unit:"áƒ”áƒšáƒ”áƒ›áƒ”áƒœáƒ¢áƒ˜",verb:"áƒ£áƒœáƒ“áƒ áƒ¨áƒ”áƒ˜áƒªáƒáƒ•áƒ“áƒ”áƒ¡"}},t={regex:"áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ",email:"áƒ”áƒš-áƒ¤áƒáƒ¡áƒ¢áƒ˜áƒ¡ áƒ›áƒ˜áƒ¡áƒáƒ›áƒáƒ áƒ—áƒ˜",url:"URL",emoji:"áƒ”áƒ›áƒáƒ¯áƒ˜",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"áƒ—áƒáƒ áƒ˜áƒ¦áƒ˜-áƒ“áƒ áƒ",date:"áƒ—áƒáƒ áƒ˜áƒ¦áƒ˜",time:"áƒ“áƒ áƒ",duration:"áƒ®áƒáƒœáƒ’áƒ áƒ«áƒšáƒ˜áƒ•áƒáƒ‘áƒ",ipv4:"IPv4 áƒ›áƒ˜áƒ¡áƒáƒ›áƒáƒ áƒ—áƒ˜",ipv6:"IPv6 áƒ›áƒ˜áƒ¡áƒáƒ›áƒáƒ áƒ—áƒ˜",cidrv4:"IPv4 áƒ“áƒ˜áƒáƒžáƒáƒ–áƒáƒœáƒ˜",cidrv6:"IPv6 áƒ“áƒ˜áƒáƒžáƒáƒ–áƒáƒœáƒ˜",base64:"base64-áƒ™áƒáƒ“áƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜",base64url:"base64url-áƒ™áƒáƒ“áƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜",json_string:"JSON áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜",e164:"E.164 áƒœáƒáƒ›áƒ”áƒ áƒ˜",jwt:"JWT",template_literal:"áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ"},r=>{switch(r.code){case"invalid_type":return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ: áƒ›áƒáƒ¡áƒáƒšáƒáƒ“áƒœáƒ”áƒšáƒ˜ ${r.expected}, áƒ›áƒ˜áƒ¦áƒ”áƒ‘áƒ£áƒšáƒ˜ ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"áƒ áƒ˜áƒªáƒ®áƒ•áƒ˜";case"object":if(Array.isArray(e))return"áƒ›áƒáƒ¡áƒ˜áƒ•áƒ˜";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return({string:"áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜",boolean:"áƒ‘áƒ£áƒšáƒ”áƒáƒœáƒ˜",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ"})[t]??t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ: áƒ›áƒáƒ¡áƒáƒšáƒáƒ“áƒœáƒ”áƒšáƒ˜ ${t4(r.values[0])}`;return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ•áƒáƒ áƒ˜áƒáƒœáƒ¢áƒ˜: áƒ›áƒáƒ¡áƒáƒšáƒáƒ“áƒœáƒ”áƒšáƒ˜áƒ áƒ”áƒ áƒ—-áƒ”áƒ áƒ—áƒ˜ ${t_(r.values,"|")}-áƒ“áƒáƒœ`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`áƒ–áƒ”áƒ“áƒ›áƒ”áƒ¢áƒáƒ“ áƒ“áƒ˜áƒ“áƒ˜: áƒ›áƒáƒ¡áƒáƒšáƒáƒ“áƒœáƒ”áƒšáƒ˜ ${r.origin??"áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ"} ${n.verb} ${t}${r.maximum.toString()} ${n.unit}`;return`áƒ–áƒ”áƒ“áƒ›áƒ”áƒ¢áƒáƒ“ áƒ“áƒ˜áƒ“áƒ˜: áƒ›áƒáƒ¡áƒáƒšáƒáƒ“áƒœáƒ”áƒšáƒ˜ ${r.origin??"áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ"} áƒ˜áƒ§áƒáƒ¡ ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`áƒ–áƒ”áƒ“áƒ›áƒ”áƒ¢áƒáƒ“ áƒžáƒáƒ¢áƒáƒ áƒ: áƒ›áƒáƒ¡áƒáƒšáƒáƒ“áƒœáƒ”áƒšáƒ˜ ${r.origin} ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return`áƒ–áƒ”áƒ“áƒ›áƒ”áƒ¢áƒáƒ“ áƒžáƒáƒ¢áƒáƒ áƒ: áƒ›áƒáƒ¡áƒáƒšáƒáƒ“áƒœáƒ”áƒšáƒ˜ ${r.origin} áƒ˜áƒ§áƒáƒ¡ ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜: áƒ£áƒœáƒ“áƒ áƒ˜áƒ¬áƒ§áƒ”áƒ‘áƒáƒ“áƒ”áƒ¡ "${r.prefix}"-áƒ˜áƒ—`;if("ends_with"===r.format)return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜: áƒ£áƒœáƒ“áƒ áƒ›áƒ—áƒáƒ•áƒ áƒ“áƒ”áƒ‘áƒáƒ“áƒ”áƒ¡ "${r.suffix}"-áƒ˜áƒ—`;if("includes"===r.format)return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜: áƒ£áƒœáƒ“áƒ áƒ¨áƒ”áƒ˜áƒªáƒáƒ•áƒ“áƒ”áƒ¡ "${r.includes}"-áƒ¡`;if("regex"===r.format)return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜: áƒ£áƒœáƒ“áƒ áƒ¨áƒ”áƒ”áƒ¡áƒáƒ‘áƒáƒ›áƒ”áƒ‘áƒáƒ“áƒ”áƒ¡ áƒ¨áƒáƒ‘áƒšáƒáƒœáƒ¡ ${r.pattern}`;return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ ${t[r.format]??r.format}`;case"not_multiple_of":return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ áƒ˜áƒªáƒ®áƒ•áƒ˜: áƒ£áƒœáƒ“áƒ áƒ˜áƒ§áƒáƒ¡ ${r.divisor}-áƒ˜áƒ¡ áƒ¯áƒ”áƒ áƒáƒ“áƒ˜`;case"unrecognized_keys":return`áƒ£áƒªáƒœáƒáƒ‘áƒ˜ áƒ’áƒáƒ¡áƒáƒ¦áƒ”áƒ‘${r.keys.length>1?"áƒ”áƒ‘áƒ˜":"áƒ˜"}: ${t_(r.keys,", ")}`;case"invalid_key":return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ’áƒáƒ¡áƒáƒ¦áƒ”áƒ‘áƒ˜ ${r.origin}-áƒ¨áƒ˜`;case"invalid_union":return"áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ";case"invalid_element":return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ ${r.origin}-áƒ¨áƒ˜`;default:return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ`}})}},"kh",0,function(){return sI()},"km",0,sI,"ko",0,function(){let e,t;return{localeError:(e={string:{unit:"ë¬¸ìž",verb:"to have"},file:{unit:"ë°”ì´íŠ¸",verb:"to have"},array:{unit:"ê°œ",verb:"to have"},set:{unit:"ê°œ",verb:"to have"}},t={regex:"ìž…ë ¥",email:"ì´ë©”ì¼ ì£¼ì†Œ",url:"URL",emoji:"ì´ëª¨ì§€",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ë‚ ì§œì‹œê°„",date:"ISO ë‚ ì§œ",time:"ISO ì‹œê°„",duration:"ISO ê¸°ê°„",ipv4:"IPv4 ì£¼ì†Œ",ipv6:"IPv6 ì£¼ì†Œ",cidrv4:"IPv4 ë²”ìœ„",cidrv6:"IPv6 ë²”ìœ„",base64:"base64 ì¸ì½”ë”© ë¬¸ìžì—´",base64url:"base64url ì¸ì½”ë”© ë¬¸ìžì—´",json_string:"JSON ë¬¸ìžì—´",e164:"E.164 ë²ˆí˜¸",jwt:"JWT",template_literal:"ìž…ë ¥"},r=>{switch(r.code){case"invalid_type":return`ìž˜ëª»ëœ ìž…ë ¥: ì˜ˆìƒ íƒ€ìž…ì€ ${r.expected}, ë°›ì€ íƒ€ìž…ì€ ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}ìž…ë‹ˆë‹¤`;case"invalid_value":if(1===r.values.length)return`ìž˜ëª»ëœ ìž…ë ¥: ê°’ì€ ${t4(r.values[0])} ì´ì–´ì•¼ í•©ë‹ˆë‹¤`;return`ìž˜ëª»ëœ ì˜µì…˜: ${t_(r.values,"ë˜ëŠ” ")} ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤`;case"too_big":{let t=r.inclusive?"ì´í•˜":"ë¯¸ë§Œ",n="ë¯¸ë§Œ"===t?"ì´ì–´ì•¼ í•©ë‹ˆë‹¤":"ì—¬ì•¼ í•©ë‹ˆë‹¤",i=e[r.origin]??null,s=i?.unit??"ìš”ì†Œ";if(i)return`${r.origin??"ê°’"}ì´ ë„ˆë¬´ í½ë‹ˆë‹¤: ${r.maximum.toString()}${s} ${t}${n}`;return`${r.origin??"ê°’"}ì´ ë„ˆë¬´ í½ë‹ˆë‹¤: ${r.maximum.toString()} ${t}${n}`}case"too_small":{let t=r.inclusive?"ì´ìƒ":"ì´ˆê³¼",n="ì´ìƒ"===t?"ì´ì–´ì•¼ í•©ë‹ˆë‹¤":"ì—¬ì•¼ í•©ë‹ˆë‹¤",i=e[r.origin]??null,s=i?.unit??"ìš”ì†Œ";if(i)return`${r.origin??"ê°’"}ì´ ë„ˆë¬´ ìž‘ìŠµë‹ˆë‹¤: ${r.minimum.toString()}${s} ${t}${n}`;return`${r.origin??"ê°’"}ì´ ë„ˆë¬´ ìž‘ìŠµë‹ˆë‹¤: ${r.minimum.toString()} ${t}${n}`}case"invalid_format":if("starts_with"===r.format)return`ìž˜ëª»ëœ ë¬¸ìžì—´: "${r.prefix}"(ìœ¼)ë¡œ ì‹œìž‘í•´ì•¼ í•©ë‹ˆë‹¤`;if("ends_with"===r.format)return`ìž˜ëª»ëœ ë¬¸ìžì—´: "${r.suffix}"(ìœ¼)ë¡œ ëë‚˜ì•¼ í•©ë‹ˆë‹¤`;if("includes"===r.format)return`ìž˜ëª»ëœ ë¬¸ìžì—´: "${r.includes}"ì„(ë¥¼) í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤`;if("regex"===r.format)return`ìž˜ëª»ëœ ë¬¸ìžì—´: ì •ê·œì‹ ${r.pattern} íŒ¨í„´ê³¼ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤`;return`ìž˜ëª»ëœ ${t[r.format]??r.format}`;case"not_multiple_of":return`ìž˜ëª»ëœ ìˆ«ìž: ${r.divisor}ì˜ ë°°ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤`;case"unrecognized_keys":return`ì¸ì‹í•  ìˆ˜ ì—†ëŠ” í‚¤: ${t_(r.keys,", ")}`;case"invalid_key":return`ìž˜ëª»ëœ í‚¤: ${r.origin}`;case"invalid_union":default:return`ìž˜ëª»ëœ ìž…ë ¥`;case"invalid_element":return`ìž˜ëª»ëœ ê°’: ${r.origin}`}})}},"lt",0,function(){return{localeError:(()=>{let e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboliÅ³"},verb:{smaller:{inclusive:"turi bÅ«ti ne ilgesnÄ— kaip",notInclusive:"turi bÅ«ti trumpesnÄ— kaip"},bigger:{inclusive:"turi bÅ«ti ne trumpesnÄ— kaip",notInclusive:"turi bÅ«ti ilgesnÄ— kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"baitÅ³"},verb:{smaller:{inclusive:"turi bÅ«ti ne didesnis kaip",notInclusive:"turi bÅ«ti maÅ¾esnis kaip"},bigger:{inclusive:"turi bÅ«ti ne maÅ¾esnis kaip",notInclusive:"turi bÅ«ti didesnis kaip"}}},array:{unit:{one:"elementÄ…",few:"elementus",many:"elementÅ³"},verb:{smaller:{inclusive:"turi turÄ—ti ne daugiau kaip",notInclusive:"turi turÄ—ti maÅ¾iau kaip"},bigger:{inclusive:"turi turÄ—ti ne maÅ¾iau kaip",notInclusive:"turi turÄ—ti daugiau kaip"}}},set:{unit:{one:"elementÄ…",few:"elementus",many:"elementÅ³"},verb:{smaller:{inclusive:"turi turÄ—ti ne daugiau kaip",notInclusive:"turi turÄ—ti maÅ¾iau kaip"},bigger:{inclusive:"turi turÄ—ti ne maÅ¾iau kaip",notInclusive:"turi turÄ—ti daugiau kaip"}}}};function t(t,r,n,i){let s=e[t]??null;return null===s?s:{unit:s.unit[r],verb:s.verb[i][n?"inclusive":"notInclusive"]}}let r={regex:"Ä¯vestis",email:"el. paÅ¡to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukmÄ—",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 uÅ¾koduota eilutÄ—",base64url:"base64url uÅ¾koduota eilutÄ—",json_string:"JSON eilutÄ—",e164:"E.164 numeris",jwt:"JWT",template_literal:"Ä¯vestis"};return e=>{switch(e.code){case"invalid_type":var n;return`Gautas tipas ${sC(typeof(n=e.input),n)}, o tikÄ—tasi - ${sC(e.expected)}`;case"invalid_value":if(1===e.values.length)return`Privalo bÅ«ti ${t4(e.values[0])}`;return`Privalo bÅ«ti vienas iÅ¡ ${t_(e.values,"|")} pasirinkimÅ³`;case"too_big":{let r=sC(e.origin),n=t(e.origin,sO(Number(e.maximum)),e.inclusive??!1,"smaller");if(n?.verb)return`${sA(r??e.origin??"reikÅ¡mÄ—")} ${n.verb} ${e.maximum.toString()} ${n.unit??"elementÅ³"}`;let i=e.inclusive?"ne didesnis kaip":"maÅ¾esnis kaip";return`${sA(r??e.origin??"reikÅ¡mÄ—")} turi bÅ«ti ${i} ${e.maximum.toString()} ${n?.unit}`}case"too_small":{let r=sC(e.origin),n=t(e.origin,sO(Number(e.minimum)),e.inclusive??!1,"bigger");if(n?.verb)return`${sA(r??e.origin??"reikÅ¡mÄ—")} ${n.verb} ${e.minimum.toString()} ${n.unit??"elementÅ³"}`;let i=e.inclusive?"ne maÅ¾esnis kaip":"didesnis kaip";return`${sA(r??e.origin??"reikÅ¡mÄ—")} turi bÅ«ti ${i} ${e.minimum.toString()} ${n?.unit}`}case"invalid_format":if("starts_with"===e.format)return`EilutÄ— privalo prasidÄ—ti "${e.prefix}"`;if("ends_with"===e.format)return`EilutÄ— privalo pasibaigti "${e.suffix}"`;if("includes"===e.format)return`EilutÄ— privalo Ä¯traukti "${e.includes}"`;if("regex"===e.format)return`EilutÄ— privalo atitikti ${e.pattern}`;return`Neteisingas ${r[e.format]??e.format}`;case"not_multiple_of":return`SkaiÄius privalo bÅ«ti ${e.divisor} kartotinis.`;case"unrecognized_keys":return`NeatpaÅ¾int${e.keys.length>1?"i":"as"} rakt${e.keys.length>1?"ai":"as"}: ${t_(e.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":default:return"Klaidinga Ä¯vestis";case"invalid_element":{let t=sC(e.origin);return`${sA(t??e.origin??"reikÅ¡mÄ—")} turi klaidingÄ… Ä¯vestÄ¯`}}}})()}},"mk",0,function(){let e,t;return{localeError:(e={string:{unit:"Ð·Ð½Ð°Ñ†Ð¸",verb:"Ð´Ð° Ð¸Ð¼Ð°Ð°Ñ‚"},file:{unit:"Ð±Ð°Ñ˜Ñ‚Ð¸",verb:"Ð´Ð° Ð¸Ð¼Ð°Ð°Ñ‚"},array:{unit:"ÑÑ‚Ð°Ð²ÐºÐ¸",verb:"Ð´Ð° Ð¸Ð¼Ð°Ð°Ñ‚"},set:{unit:"ÑÑ‚Ð°Ð²ÐºÐ¸",verb:"Ð´Ð° Ð¸Ð¼Ð°Ð°Ñ‚"}},t={regex:"Ð²Ð½ÐµÑ",email:"Ð°Ð´Ñ€ÐµÑÐ° Ð½Ð° Ðµ-Ð¿Ð¾ÑˆÑ‚Ð°",url:"URL",emoji:"ÐµÐ¼Ð¾ÑŸÐ¸",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO Ð´Ð°Ñ‚ÑƒÐ¼ Ð¸ Ð²Ñ€ÐµÐ¼Ðµ",date:"ISO Ð´Ð°Ñ‚ÑƒÐ¼",time:"ISO Ð²Ñ€ÐµÐ¼Ðµ",duration:"ISO Ð²Ñ€ÐµÐ¼ÐµÑ‚Ñ€Ð°ÐµÑšÐµ",ipv4:"IPv4 Ð°Ð´Ñ€ÐµÑÐ°",ipv6:"IPv6 Ð°Ð´Ñ€ÐµÑÐ°",cidrv4:"IPv4 Ð¾Ð¿ÑÐµÐ³",cidrv6:"IPv6 Ð¾Ð¿ÑÐµÐ³",base64:"base64-ÐµÐ½ÐºÐ¾Ð´Ð¸Ñ€Ð°Ð½Ð° Ð½Ð¸Ð·Ð°",base64url:"base64url-ÐµÐ½ÐºÐ¾Ð´Ð¸Ñ€Ð°Ð½Ð° Ð½Ð¸Ð·Ð°",json_string:"JSON Ð½Ð¸Ð·Ð°",e164:"E.164 Ð±Ñ€Ð¾Ñ˜",jwt:"JWT",template_literal:"Ð²Ð½ÐµÑ"},r=>{switch(r.code){case"invalid_type":return`Ð“Ñ€ÐµÑˆÐµÐ½ Ð²Ð½ÐµÑ: ÑÐµ Ð¾Ñ‡ÐµÐºÑƒÐ²Ð° ${r.expected}, Ð¿Ñ€Ð¸Ð¼ÐµÐ½Ð¾ ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Ð±Ñ€Ð¾Ñ˜";case"object":if(Array.isArray(e))return"Ð½Ð¸Ð·Ð°";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Invalid input: expected ${t4(r.values[0])}`;return`Ð“Ñ€ÐµÑˆÐ°Ð½Ð° Ð¾Ð¿Ñ†Ð¸Ñ˜Ð°: ÑÐµ Ð¾Ñ‡ÐµÐºÑƒÐ²Ð° ÐµÐ´Ð½Ð° ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`ÐŸÑ€ÐµÐ¼Ð½Ð¾Ð³Ñƒ Ð³Ð¾Ð»ÐµÐ¼: ÑÐµ Ð¾Ñ‡ÐµÐºÑƒÐ²Ð° ${r.origin??"Ð²Ñ€ÐµÐ´Ð½Ð¾ÑÑ‚Ð°"} Ð´Ð° Ð¸Ð¼Ð° ${t}${r.maximum.toString()} ${n.unit??"ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¸"}`;return`ÐŸÑ€ÐµÐ¼Ð½Ð¾Ð³Ñƒ Ð³Ð¾Ð»ÐµÐ¼: ÑÐµ Ð¾Ñ‡ÐµÐºÑƒÐ²Ð° ${r.origin??"Ð²Ñ€ÐµÐ´Ð½Ð¾ÑÑ‚Ð°"} Ð´Ð° Ð±Ð¸Ð´Ðµ ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`ÐŸÑ€ÐµÐ¼Ð½Ð¾Ð³Ñƒ Ð¼Ð°Ð»: ÑÐµ Ð¾Ñ‡ÐµÐºÑƒÐ²Ð° ${r.origin} Ð´Ð° Ð¸Ð¼Ð° ${t}${r.minimum.toString()} ${n.unit}`;return`ÐŸÑ€ÐµÐ¼Ð½Ð¾Ð³Ñƒ Ð¼Ð°Ð»: ÑÐµ Ð¾Ñ‡ÐµÐºÑƒÐ²Ð° ${r.origin} Ð´Ð° Ð±Ð¸Ð´Ðµ ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`ÐÐµÐ²Ð°Ð¶ÐµÑ‡ÐºÐ° Ð½Ð¸Ð·Ð°: Ð¼Ð¾Ñ€Ð° Ð´Ð° Ð·Ð°Ð¿Ð¾Ñ‡Ð½ÑƒÐ²Ð° ÑÐ¾ "${r.prefix}"`;if("ends_with"===r.format)return`ÐÐµÐ²Ð°Ð¶ÐµÑ‡ÐºÐ° Ð½Ð¸Ð·Ð°: Ð¼Ð¾Ñ€Ð° Ð´Ð° Ð·Ð°Ð²Ñ€ÑˆÑƒÐ²Ð° ÑÐ¾ "${r.suffix}"`;if("includes"===r.format)return`ÐÐµÐ²Ð°Ð¶ÐµÑ‡ÐºÐ° Ð½Ð¸Ð·Ð°: Ð¼Ð¾Ñ€Ð° Ð´Ð° Ð²ÐºÐ»ÑƒÑ‡ÑƒÐ²Ð° "${r.includes}"`;if("regex"===r.format)return`ÐÐµÐ²Ð°Ð¶ÐµÑ‡ÐºÐ° Ð½Ð¸Ð·Ð°: Ð¼Ð¾Ñ€Ð° Ð´Ð° Ð¾Ð´Ð³Ð¾Ð°Ñ€Ð° Ð½Ð° Ð¿Ð°Ñ‚ÐµÑ€Ð½Ð¾Ñ‚ ${r.pattern}`;return`Invalid ${t[r.format]??r.format}`;case"not_multiple_of":return`Ð“Ñ€ÐµÑˆÐµÐ½ Ð±Ñ€Ð¾Ñ˜: Ð¼Ð¾Ñ€Ð° Ð´Ð° Ð±Ð¸Ð´Ðµ Ð´ÐµÐ»Ð¸Ð² ÑÐ¾ ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"ÐÐµÐ¿Ñ€ÐµÐ¿Ð¾Ð·Ð½Ð°ÐµÐ½Ð¸ ÐºÐ»ÑƒÑ‡ÐµÐ²Ð¸":"ÐÐµÐ¿Ñ€ÐµÐ¿Ð¾Ð·Ð½Ð°ÐµÐ½ ÐºÐ»ÑƒÑ‡"}: ${t_(r.keys,", ")}`;case"invalid_key":return`Ð“Ñ€ÐµÑˆÐµÐ½ ÐºÐ»ÑƒÑ‡ Ð²Ð¾ ${r.origin}`;case"invalid_union":return"Ð“Ñ€ÐµÑˆÐµÐ½ Ð²Ð½ÐµÑ";case"invalid_element":return`Ð“Ñ€ÐµÑˆÐ½Ð° Ð²Ñ€ÐµÐ´Ð½Ð¾ÑÑ‚ Ð²Ð¾ ${r.origin}`;default:return`Ð“Ñ€ÐµÑˆÐµÐ½ Ð²Ð½ÐµÑ`}})}},"ms",0,function(){let e,t;return{localeError:(e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}},t={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Input tidak sah: dijangka ${r.expected}, diterima ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombor";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Input tidak sah: dijangka ${t4(r.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Terlalu besar: dijangka ${r.origin??"nilai"} ${n.verb} ${t}${r.maximum.toString()} ${n.unit??"elemen"}`;return`Terlalu besar: dijangka ${r.origin??"nilai"} adalah ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Terlalu kecil: dijangka ${r.origin} ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return`Terlalu kecil: dijangka ${r.origin} adalah ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`String tidak sah: mesti bermula dengan "${r.prefix}"`;if("ends_with"===r.format)return`String tidak sah: mesti berakhir dengan "${r.suffix}"`;if("includes"===r.format)return`String tidak sah: mesti mengandungi "${r.includes}"`;if("regex"===r.format)return`String tidak sah: mesti sepadan dengan corak ${r.pattern}`;return`${t[r.format]??r.format} tidak sah`;case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${r.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${t_(r.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${r.origin}`;case"invalid_union":default:return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${r.origin}`}})}},"nl",0,function(){let e,t;return{localeError:(e={string:{unit:"tekens",verb:"te hebben"},file:{unit:"bytes",verb:"te hebben"},array:{unit:"elementen",verb:"te hebben"},set:{unit:"elementen",verb:"te hebben"}},t={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},r=>{switch(r.code){case"invalid_type":return`Ongeldige invoer: verwacht ${r.expected}, ontving ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"getal";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ongeldige invoer: verwacht ${t4(r.values[0])}`;return`Ongeldige optie: verwacht \xe9\xe9n van ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Te groot: verwacht dat ${r.origin??"waarde"} ${n.verb} ${t}${r.maximum.toString()} ${n.unit??"elementen"}`;return`Te groot: verwacht dat ${r.origin??"waarde"} ${t}${r.maximum.toString()} is`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Te klein: verwacht dat ${r.origin} ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return`Te klein: verwacht dat ${r.origin} ${t}${r.minimum.toString()} is`}case"invalid_format":if("starts_with"===r.format)return`Ongeldige tekst: moet met "${r.prefix}" beginnen`;if("ends_with"===r.format)return`Ongeldige tekst: moet op "${r.suffix}" eindigen`;if("includes"===r.format)return`Ongeldige tekst: moet "${r.includes}" bevatten`;if("regex"===r.format)return`Ongeldige tekst: moet overeenkomen met patroon ${r.pattern}`;return`Ongeldig: ${t[r.format]??r.format}`;case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${r.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${r.keys.length>1?"s":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${r.origin}`;case"invalid_union":default:return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${r.origin}`}})}},"no",0,function(){let e,t;return{localeError:(e={string:{unit:"tegn",verb:"Ã¥ ha"},file:{unit:"bytes",verb:"Ã¥ ha"},array:{unit:"elementer",verb:"Ã¥ inneholde"},set:{unit:"elementer",verb:"Ã¥ inneholde"}},t={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omrÃ¥de",ipv6:"IPv6-omrÃ¥de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Ugyldig input: forventet ${r.expected}, fikk ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tall";case"object":if(Array.isArray(e))return"liste";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ugyldig verdi: forventet ${t4(r.values[0])}`;return`Ugyldig valg: forventet en av ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`For stor(t): forventet ${r.origin??"value"} til \xe5 ha ${t}${r.maximum.toString()} ${n.unit??"elementer"}`;return`For stor(t): forventet ${r.origin??"value"} til \xe5 ha ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`For lite(n): forventet ${r.origin} til \xe5 ha ${t}${r.minimum.toString()} ${n.unit}`;return`For lite(n): forventet ${r.origin} til \xe5 ha ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Ugyldig streng: m\xe5 starte med "${r.prefix}"`;if("ends_with"===r.format)return`Ugyldig streng: m\xe5 ende med "${r.suffix}"`;if("includes"===r.format)return`Ugyldig streng: m\xe5 inneholde "${r.includes}"`;if("regex"===r.format)return`Ugyldig streng: m\xe5 matche m\xf8nsteret ${r.pattern}`;return`Ugyldig ${t[r.format]??r.format}`;case"not_multiple_of":return`Ugyldig tall: m\xe5 v\xe6re et multiplum av ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"Ukjente nÃ¸kler":"Ukjent nÃ¸kkel"}: ${t_(r.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8kkel i ${r.origin}`;case"invalid_union":default:return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${r.origin}`}})}},"ota",0,function(){let e,t;return{localeError:(e={string:{unit:"harf",verb:"olmalÄ±dÄ±r"},file:{unit:"bayt",verb:"olmalÄ±dÄ±r"},array:{unit:"unsur",verb:"olmalÄ±dÄ±r"},set:{unit:"unsur",verb:"olmalÄ±dÄ±r"}},t={regex:"giren",email:"epostagÃ¢h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengÃ¢mÄ±",date:"ISO tarihi",time:"ISO zamanÄ±",duration:"ISO mÃ¼ddeti",ipv4:"IPv4 niÅŸÃ¢nÄ±",ipv6:"IPv6 niÅŸÃ¢nÄ±",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-ÅŸifreli metin",base64url:"base64url-ÅŸifreli metin",json_string:"JSON metin",e164:"E.164 sayÄ±sÄ±",jwt:"JWT",template_literal:"giren"},r=>{switch(r.code){case"invalid_type":return`F\xe2sit giren: umulan ${r.expected}, alÄ±nan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numara";case"object":if(Array.isArray(e))return"saf";if(null===e)return"gayb";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`F\xe2sit giren: umulan ${t4(r.values[0])}`;return`F\xe2sit tercih: m\xfbteberler ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Fazla b\xfcy\xfck: ${r.origin??"value"}, ${t}${r.maximum.toString()} ${n.unit??"elements"} sahip olmalÄ±ydÄ±.`;return`Fazla b\xfcy\xfck: ${r.origin??"value"}, ${t}${r.maximum.toString()} olmalÄ±ydÄ±.`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Fazla k\xfc\xe7\xfck: ${r.origin}, ${t}${r.minimum.toString()} ${n.unit} sahip olmalÄ±ydÄ±.`;return`Fazla k\xfc\xe7\xfck: ${r.origin}, ${t}${r.minimum.toString()} olmalÄ±ydÄ±.`}case"invalid_format":if("starts_with"===r.format)return`F\xe2sit metin: "${r.prefix}" ile baÅŸlamalÄ±.`;if("ends_with"===r.format)return`F\xe2sit metin: "${r.suffix}" ile bitmeli.`;if("includes"===r.format)return`F\xe2sit metin: "${r.includes}" ihtiv\xe2 etmeli.`;if("regex"===r.format)return`F\xe2sit metin: ${r.pattern} nakÅŸÄ±na uymalÄ±.`;return`F\xe2sit ${t[r.format]??r.format}`;case"not_multiple_of":return`F\xe2sit sayÄ±: ${r.divisor} katÄ± olmalÄ±ydÄ±.`;case"unrecognized_keys":return`TanÄ±nmayan anahtar ${r.keys.length>1?"s":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`${r.origin} i\xe7in tanÄ±nmayan anahtar var.`;case"invalid_union":return"Giren tanÄ±namadÄ±.";case"invalid_element":return`${r.origin} i\xe7in tanÄ±nmayan kÄ±ymet var.`;default:return`KÄ±ymet tanÄ±namadÄ±.`}})}},"pl",0,function(){let e,t;return{localeError:(e={string:{unit:"znakÃ³w",verb:"mieÄ‡"},file:{unit:"bajtÃ³w",verb:"mieÄ‡"},array:{unit:"elementÃ³w",verb:"mieÄ‡"},set:{unit:"elementÃ³w",verb:"mieÄ‡"}},t={regex:"wyraÅ¼enie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ciÄ…g znakÃ³w zakodowany w formacie base64",base64url:"ciÄ…g znakÃ³w zakodowany w formacie base64url",json_string:"ciÄ…g znakÃ³w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejÅ›cie"},r=>{switch(r.code){case"invalid_type":return`NieprawidÅ‚owe dane wejÅ›ciowe: oczekiwano ${r.expected}, otrzymano ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"liczba";case"object":if(Array.isArray(e))return"tablica";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`NieprawidÅ‚owe dane wejÅ›ciowe: oczekiwano ${t4(r.values[0])}`;return`NieprawidÅ‚owa opcja: oczekiwano jednej z wartoÅ›ci ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Za duÅ¼a wartoÅ›Ä‡: oczekiwano, Å¼e ${r.origin??"wartoÅ›Ä‡"} bÄ™dzie mieÄ‡ ${t}${r.maximum.toString()} ${n.unit??"elementÃ³w"}`;return`Zbyt duÅ¼(y/a/e): oczekiwano, Å¼e ${r.origin??"wartoÅ›Ä‡"} bÄ™dzie wynosiÄ‡ ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Za maÅ‚a wartoÅ›Ä‡: oczekiwano, Å¼e ${r.origin??"wartoÅ›Ä‡"} bÄ™dzie mieÄ‡ ${t}${r.minimum.toString()} ${n.unit??"elementÃ³w"}`;return`Zbyt maÅ‚(y/a/e): oczekiwano, Å¼e ${r.origin??"wartoÅ›Ä‡"} bÄ™dzie wynosiÄ‡ ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`NieprawidÅ‚owy ciÄ…g znak\xf3w: musi zaczynaÄ‡ siÄ™ od "${r.prefix}"`;if("ends_with"===r.format)return`NieprawidÅ‚owy ciÄ…g znak\xf3w: musi koÅ„czyÄ‡ siÄ™ na "${r.suffix}"`;if("includes"===r.format)return`NieprawidÅ‚owy ciÄ…g znak\xf3w: musi zawieraÄ‡ "${r.includes}"`;if("regex"===r.format)return`NieprawidÅ‚owy ciÄ…g znak\xf3w: musi odpowiadaÄ‡ wzorcowi ${r.pattern}`;return`NieprawidÅ‚ow(y/a/e) ${t[r.format]??r.format}`;case"not_multiple_of":return`NieprawidÅ‚owa liczba: musi byÄ‡ wielokrotnoÅ›ciÄ… ${r.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${r.keys.length>1?"s":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`NieprawidÅ‚owy klucz w ${r.origin}`;case"invalid_union":return"NieprawidÅ‚owe dane wejÅ›ciowe";case"invalid_element":return`NieprawidÅ‚owa wartoÅ›Ä‡ w ${r.origin}`;default:return`NieprawidÅ‚owe dane wejÅ›ciowe`}})}},"ps",0,function(){let e,t;return{localeError:(e={string:{unit:"ØªÙˆÚ©ÙŠ",verb:"ÙˆÙ„Ø±ÙŠ"},file:{unit:"Ø¨Ø§ÛŒÙ¼Ø³",verb:"ÙˆÙ„Ø±ÙŠ"},array:{unit:"ØªÙˆÚ©ÙŠ",verb:"ÙˆÙ„Ø±ÙŠ"},set:{unit:"ØªÙˆÚ©ÙŠ",verb:"ÙˆÙ„Ø±ÙŠ"}},t={regex:"ÙˆØ±ÙˆØ¯ÙŠ",email:"Ø¨Ø±ÛŒÚšÙ†Ø§Ù„ÛŒÚ©",url:"ÛŒÙˆ Ø¢Ø± Ø§Ù„",emoji:"Ø§ÛŒÙ…ÙˆØ¬ÙŠ",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"Ù†ÛŒÙ¼Ù‡ Ø§Ùˆ ÙˆØ®Øª",date:"Ù†ÛÙ¼Ù‡",time:"ÙˆØ®Øª",duration:"Ù…ÙˆØ¯Ù‡",ipv4:"Ø¯ IPv4 Ù¾ØªÙ‡",ipv6:"Ø¯ IPv6 Ù¾ØªÙ‡",cidrv4:"Ø¯ IPv4 Ø³Ø§Ø­Ù‡",cidrv6:"Ø¯ IPv6 Ø³Ø§Ø­Ù‡",base64:"base64-encoded Ù…ØªÙ†",base64url:"base64url-encoded Ù…ØªÙ†",json_string:"JSON Ù…ØªÙ†",e164:"Ø¯ E.164 Ø´Ù…ÛØ±Ù‡",jwt:"JWT",template_literal:"ÙˆØ±ÙˆØ¯ÙŠ"},r=>{switch(r.code){case"invalid_type":return`Ù†Ø§Ø³Ù… ÙˆØ±ÙˆØ¯ÙŠ: Ø¨Ø§ÛŒØ¯ ${r.expected} ÙˆØ§ÛŒ, Ù…Ú«Ø± ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Ø¹Ø¯Ø¯";case"object":if(Array.isArray(e))return"Ø§Ø±Û";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)} ØªØ±Ù„Ø§Ø³Ù‡ Ø´Ùˆ`;case"invalid_value":if(1===r.values.length)return`Ù†Ø§Ø³Ù… ÙˆØ±ÙˆØ¯ÙŠ: Ø¨Ø§ÛŒØ¯ ${t4(r.values[0])} ÙˆØ§ÛŒ`;return`Ù†Ø§Ø³Ù… Ø§Ù†ØªØ®Ø§Ø¨: Ø¨Ø§ÛŒØ¯ ÛŒÙˆ Ù„Ù‡ ${t_(r.values,"|")} Ú…Ø®Ù‡ ÙˆØ§ÛŒ`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Ú‰ÛŒØ± Ù„ÙˆÛŒ: ${r.origin??"Ø§Ø±Ø²ÚšØª"} Ø¨Ø§ÛŒØ¯ ${t}${r.maximum.toString()} ${n.unit??"Ø¹Ù†ØµØ±ÙˆÙ†Ù‡"} ÙˆÙ„Ø±ÙŠ`;return`Ú‰ÛŒØ± Ù„ÙˆÛŒ: ${r.origin??"Ø§Ø±Ø²ÚšØª"} Ø¨Ø§ÛŒØ¯ ${t}${r.maximum.toString()} ÙˆÙŠ`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Ú‰ÛŒØ± Ú©ÙˆÚ†Ù†ÛŒ: ${r.origin} Ø¨Ø§ÛŒØ¯ ${t}${r.minimum.toString()} ${n.unit} ÙˆÙ„Ø±ÙŠ`;return`Ú‰ÛŒØ± Ú©ÙˆÚ†Ù†ÛŒ: ${r.origin} Ø¨Ø§ÛŒØ¯ ${t}${r.minimum.toString()} ÙˆÙŠ`}case"invalid_format":if("starts_with"===r.format)return`Ù†Ø§Ø³Ù… Ù…ØªÙ†: Ø¨Ø§ÛŒØ¯ Ø¯ "${r.prefix}" Ø³Ø±Ù‡ Ù¾ÛŒÙ„ Ø´ÙŠ`;if("ends_with"===r.format)return`Ù†Ø§Ø³Ù… Ù…ØªÙ†: Ø¨Ø§ÛŒØ¯ Ø¯ "${r.suffix}" Ø³Ø±Ù‡ Ù¾Ø§ÛŒ ØªÙ‡ ÙˆØ±Ø³ÙŠÚ–ÙŠ`;if("includes"===r.format)return`Ù†Ø§Ø³Ù… Ù…ØªÙ†: Ø¨Ø§ÛŒØ¯ "${r.includes}" ÙˆÙ„Ø±ÙŠ`;if("regex"===r.format)return`Ù†Ø§Ø³Ù… Ù…ØªÙ†: Ø¨Ø§ÛŒØ¯ Ø¯ ${r.pattern} Ø³Ø±Ù‡ Ù…Ø·Ø§Ø¨Ù‚Øª ÙˆÙ„Ø±ÙŠ`;return`${t[r.format]??r.format} Ù†Ø§Ø³Ù… Ø¯ÛŒ`;case"not_multiple_of":return`Ù†Ø§Ø³Ù… Ø¹Ø¯Ø¯: Ø¨Ø§ÛŒØ¯ Ø¯ ${r.divisor} Ù…Ø¶Ø±Ø¨ ÙˆÙŠ`;case"unrecognized_keys":return`Ù†Ø§Ø³Ù… ${r.keys.length>1?"Ú©Ù„ÛŒÚ‰ÙˆÙ†Ù‡":"Ú©Ù„ÛŒÚ‰"}: ${t_(r.keys,", ")}`;case"invalid_key":return`Ù†Ø§Ø³Ù… Ú©Ù„ÛŒÚ‰ Ù¾Ù‡ ${r.origin} Ú©Û`;case"invalid_union":default:return`Ù†Ø§Ø³Ù…Ù‡ ÙˆØ±ÙˆØ¯ÙŠ`;case"invalid_element":return`Ù†Ø§Ø³Ù… Ø¹Ù†ØµØ± Ù¾Ù‡ ${r.origin} Ú©Û`}})}},"pt",0,function(){let e,t;return{localeError:(e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}},t={regex:"padrÃ£o",email:"endereÃ§o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"duraÃ§Ã£o ISO",ipv4:"endereÃ§o IPv4",ipv6:"endereÃ§o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"nÃºmero E.164",jwt:"JWT",template_literal:"entrada"},r=>{switch(r.code){case"invalid_type":return`Tipo inv\xe1lido: esperado ${r.expected}, recebido ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nÃºmero";case"object":if(Array.isArray(e))return"array";if(null===e)return"nulo";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Entrada inv\xe1lida: esperado ${t4(r.values[0])}`;return`Op\xe7\xe3o inv\xe1lida: esperada uma das ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Muito grande: esperado que ${r.origin??"valor"} tivesse ${t}${r.maximum.toString()} ${n.unit??"elementos"}`;return`Muito grande: esperado que ${r.origin??"valor"} fosse ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Muito pequeno: esperado que ${r.origin} tivesse ${t}${r.minimum.toString()} ${n.unit}`;return`Muito pequeno: esperado que ${r.origin} fosse ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Texto inv\xe1lido: deve come\xe7ar com "${r.prefix}"`;if("ends_with"===r.format)return`Texto inv\xe1lido: deve terminar com "${r.suffix}"`;if("includes"===r.format)return`Texto inv\xe1lido: deve incluir "${r.includes}"`;if("regex"===r.format)return`Texto inv\xe1lido: deve corresponder ao padr\xe3o ${r.pattern}`;return`${t[r.format]??r.format} inv\xe1lido`;case"not_multiple_of":return`N\xfamero inv\xe1lido: deve ser m\xfaltiplo de ${r.divisor}`;case"unrecognized_keys":return`Chave${r.keys.length>1?"s":""} desconhecida${r.keys.length>1?"s":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`Chave inv\xe1lida em ${r.origin}`;case"invalid_union":return"Entrada invÃ¡lida";case"invalid_element":return`Valor inv\xe1lido em ${r.origin}`;default:return`Campo inv\xe1lido`}})}},"ru",0,function(){let e,t;return{localeError:(e={string:{unit:{one:"ÑÐ¸Ð¼Ð²Ð¾Ð»",few:"ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°",many:"ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²"},verb:"Ð¸Ð¼ÐµÑ‚ÑŒ"},file:{unit:{one:"Ð±Ð°Ð¹Ñ‚",few:"Ð±Ð°Ð¹Ñ‚Ð°",many:"Ð±Ð°Ð¹Ñ‚"},verb:"Ð¸Ð¼ÐµÑ‚ÑŒ"},array:{unit:{one:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",few:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°",many:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²"},verb:"Ð¸Ð¼ÐµÑ‚ÑŒ"},set:{unit:{one:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",few:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°",many:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²"},verb:"Ð¸Ð¼ÐµÑ‚ÑŒ"}},t={regex:"Ð²Ð²Ð¾Ð´",email:"email Ð°Ð´Ñ€ÐµÑ",url:"URL",emoji:"ÑÐ¼Ð¾Ð´Ð·Ð¸",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO Ð´Ð°Ñ‚Ð° Ð¸ Ð²Ñ€ÐµÐ¼Ñ",date:"ISO Ð´Ð°Ñ‚Ð°",time:"ISO Ð²Ñ€ÐµÐ¼Ñ",duration:"ISO Ð´Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ",ipv4:"IPv4 Ð°Ð´Ñ€ÐµÑ",ipv6:"IPv6 Ð°Ð´Ñ€ÐµÑ",cidrv4:"IPv4 Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½",cidrv6:"IPv6 Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½",base64:"ÑÑ‚Ñ€Ð¾ÐºÐ° Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ base64",base64url:"ÑÑ‚Ñ€Ð¾ÐºÐ° Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ base64url",json_string:"JSON ÑÑ‚Ñ€Ð¾ÐºÐ°",e164:"Ð½Ð¾Ð¼ÐµÑ€ E.164",jwt:"JWT",template_literal:"Ð²Ð²Ð¾Ð´"},r=>{switch(r.code){case"invalid_type":return`ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð²Ð²Ð¾Ð´: Ð¾Ð¶Ð¸Ð´Ð°Ð»Ð¾ÑÑŒ ${r.expected}, Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¾ ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Ñ‡Ð¸ÑÐ»Ð¾";case"object":if(Array.isArray(e))return"Ð¼Ð°ÑÑÐ¸Ð²";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð²Ð²Ð¾Ð´: Ð¾Ð¶Ð¸Ð´Ð°Ð»Ð¾ÑÑŒ ${t4(r.values[0])}`;return`ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚: Ð¾Ð¶Ð¸Ð´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð´Ð½Ð¾ Ð¸Ð· ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n){let e=sE(Number(r.maximum),n.unit.one,n.unit.few,n.unit.many);return`Ð¡Ð»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: Ð¾Ð¶Ð¸Ð´Ð°Ð»Ð¾ÑÑŒ, Ñ‡Ñ‚Ð¾ ${r.origin??"Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ"} Ð±ÑƒÐ´ÐµÑ‚ Ð¸Ð¼ÐµÑ‚ÑŒ ${t}${r.maximum.toString()} ${e}`}return`Ð¡Ð»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: Ð¾Ð¶Ð¸Ð´Ð°Ð»Ð¾ÑÑŒ, Ñ‡Ñ‚Ð¾ ${r.origin??"Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ"} Ð±ÑƒÐ´ÐµÑ‚ ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n){let e=sE(Number(r.minimum),n.unit.one,n.unit.few,n.unit.many);return`Ð¡Ð»Ð¸ÑˆÐºÐ¾Ð¼ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: Ð¾Ð¶Ð¸Ð´Ð°Ð»Ð¾ÑÑŒ, Ñ‡Ñ‚Ð¾ ${r.origin} Ð±ÑƒÐ´ÐµÑ‚ Ð¸Ð¼ÐµÑ‚ÑŒ ${t}${r.minimum.toString()} ${e}`}return`Ð¡Ð»Ð¸ÑˆÐºÐ¾Ð¼ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: Ð¾Ð¶Ð¸Ð´Ð°Ð»Ð¾ÑÑŒ, Ñ‡Ñ‚Ð¾ ${r.origin} Ð±ÑƒÐ´ÐµÑ‚ ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`ÐÐµÐ²ÐµÑ€Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ°: Ð´Ð¾Ð»Ð¶Ð½Ð° Ð½Ð°Ñ‡Ð¸Ð½Ð°Ñ‚ÑŒÑÑ Ñ "${r.prefix}"`;if("ends_with"===r.format)return`ÐÐµÐ²ÐµÑ€Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ°: Ð´Ð¾Ð»Ð¶Ð½Ð° Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°Ñ‚ÑŒÑÑ Ð½Ð° "${r.suffix}"`;if("includes"===r.format)return`ÐÐµÐ²ÐµÑ€Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ°: Ð´Ð¾Ð»Ð¶Ð½Ð° ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ "${r.includes}"`;if("regex"===r.format)return`ÐÐµÐ²ÐµÑ€Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ°: Ð´Ð¾Ð»Ð¶Ð½Ð° ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ ÑˆÐ°Ð±Ð»Ð¾Ð½Ñƒ ${r.pattern}`;return`ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ ${t[r.format]??r.format}`;case"not_multiple_of":return`ÐÐµÐ²ÐµÑ€Ð½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾: Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ ÐºÑ€Ð°Ñ‚Ð½Ñ‹Ð¼ ${r.divisor}`;case"unrecognized_keys":return`ÐÐµÑ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð½Ð½${r.keys.length>1?"Ñ‹Ðµ":"Ñ‹Ð¹"} ÐºÐ»ÑŽÑ‡${r.keys.length>1?"Ð¸":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ð² ${r.origin}`;case"invalid_union":return"ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ðµ Ð²Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ";case"invalid_element":return`ÐÐµÐ²ÐµÑ€Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð² ${r.origin}`;default:return`ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ðµ Ð²Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ`}})}},"sl",0,function(){let e,t;return{localeError:(e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}},t={regex:"vnos",email:"e-poÅ¡tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in Äas",date:"ISO datum",time:"ISO Äas",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 Å¡tevilka",jwt:"JWT",template_literal:"vnos"},r=>{switch(r.code){case"invalid_type":return`Neveljaven vnos: priÄakovano ${r.expected}, prejeto ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Å¡tevilo";case"object":if(Array.isArray(e))return"tabela";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Neveljaven vnos: priÄakovano ${t4(r.values[0])}`;return`Neveljavna moÅ¾nost: priÄakovano eno izmed ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Preveliko: priÄakovano, da bo ${r.origin??"vrednost"} imelo ${t}${r.maximum.toString()} ${n.unit??"elementov"}`;return`Preveliko: priÄakovano, da bo ${r.origin??"vrednost"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Premajhno: priÄakovano, da bo ${r.origin} imelo ${t}${r.minimum.toString()} ${n.unit}`;return`Premajhno: priÄakovano, da bo ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Neveljaven niz: mora se zaÄeti z "${r.prefix}"`;if("ends_with"===r.format)return`Neveljaven niz: mora se konÄati z "${r.suffix}"`;if("includes"===r.format)return`Neveljaven niz: mora vsebovati "${r.includes}"`;if("regex"===r.format)return`Neveljaven niz: mora ustrezati vzorcu ${r.pattern}`;return`Neveljaven ${t[r.format]??r.format}`;case"not_multiple_of":return`Neveljavno Å¡tevilo: mora biti veÄkratnik ${r.divisor}`;case"unrecognized_keys":return`Neprepoznan${r.keys.length>1?"i kljuÄi":" kljuÄ"}: ${t_(r.keys,", ")}`;case"invalid_key":return`Neveljaven kljuÄ v ${r.origin}`;case"invalid_union":default:return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${r.origin}`}})}},"sv",0,function(){let e,t;return{localeError:(e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehÃ¥lla"},set:{unit:"objekt",verb:"att innehÃ¥lla"}},t={regex:"reguljÃ¤rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad strÃ¤ng",base64url:"base64url-kodad strÃ¤ng",json_string:"JSON-strÃ¤ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},r=>{switch(r.code){case"invalid_type":return`Ogiltig inmatning: f\xf6rv\xe4ntat ${r.expected}, fick ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"antal";case"object":if(Array.isArray(e))return"lista";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ogiltig inmatning: f\xf6rv\xe4ntat ${t4(r.values[0])}`;return`Ogiltigt val: f\xf6rv\xe4ntade en av ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`F\xf6r stor(t): f\xf6rv\xe4ntade ${r.origin??"vÃ¤rdet"} att ha ${t}${r.maximum.toString()} ${n.unit??"element"}`;return`F\xf6r stor(t): f\xf6rv\xe4ntat ${r.origin??"vÃ¤rdet"} att ha ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`F\xf6r lite(t): f\xf6rv\xe4ntade ${r.origin??"vÃ¤rdet"} att ha ${t}${r.minimum.toString()} ${n.unit}`;return`F\xf6r lite(t): f\xf6rv\xe4ntade ${r.origin??"vÃ¤rdet"} att ha ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Ogiltig str\xe4ng: m\xe5ste b\xf6rja med "${r.prefix}"`;if("ends_with"===r.format)return`Ogiltig str\xe4ng: m\xe5ste sluta med "${r.suffix}"`;if("includes"===r.format)return`Ogiltig str\xe4ng: m\xe5ste inneh\xe5lla "${r.includes}"`;if("regex"===r.format)return`Ogiltig str\xe4ng: m\xe5ste matcha m\xf6nstret "${r.pattern}"`;return`Ogiltig(t) ${t[r.format]??r.format}`;case"not_multiple_of":return`Ogiltigt tal: m\xe5ste vara en multipel av ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"OkÃ¤nda nycklar":"OkÃ¤nd nyckel"}: ${t_(r.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${r.origin??"vÃ¤rdet"}`;case"invalid_union":default:return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xe4rde i ${r.origin??"vÃ¤rdet"}`}})}},"ta",0,function(){let e,t;return{localeError:(e={string:{unit:"à®Žà®´à¯à®¤à¯à®¤à¯à®•à¯à®•à®³à¯",verb:"à®•à¯Šà®£à¯à®Ÿà®¿à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯"},file:{unit:"à®ªà¯ˆà®Ÿà¯à®Ÿà¯à®•à®³à¯",verb:"à®•à¯Šà®£à¯à®Ÿà®¿à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯"},array:{unit:"à®‰à®±à¯à®ªà¯à®ªà¯à®•à®³à¯",verb:"à®•à¯Šà®£à¯à®Ÿà®¿à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯"},set:{unit:"à®‰à®±à¯à®ªà¯à®ªà¯à®•à®³à¯",verb:"à®•à¯Šà®£à¯à®Ÿà®¿à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯"}},t={regex:"à®‰à®³à¯à®³à¯€à®Ÿà¯",email:"à®®à®¿à®©à¯à®©à®žà¯à®šà®²à¯ à®®à¯à®•à®µà®°à®¿",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO à®¤à¯‡à®¤à®¿ à®¨à¯‡à®°à®®à¯",date:"ISO à®¤à¯‡à®¤à®¿",time:"ISO à®¨à¯‡à®°à®®à¯",duration:"ISO à®•à®¾à®² à®…à®³à®µà¯",ipv4:"IPv4 à®®à¯à®•à®µà®°à®¿",ipv6:"IPv6 à®®à¯à®•à®µà®°à®¿",cidrv4:"IPv4 à®µà®°à®®à¯à®ªà¯",cidrv6:"IPv6 à®µà®°à®®à¯à®ªà¯",base64:"base64-encoded à®šà®°à®®à¯",base64url:"base64url-encoded à®šà®°à®®à¯",json_string:"JSON à®šà®°à®®à¯",e164:"E.164 à®Žà®£à¯",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`à®¤à®µà®±à®¾à®© à®‰à®³à¯à®³à¯€à®Ÿà¯: à®Žà®¤à®¿à®°à¯à®ªà®¾à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${r.expected}, à®ªà¯†à®±à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"à®Žà®£à¯ à®…à®²à¯à®²à®¾à®¤à®¤à¯":"à®Žà®£à¯";case"object":if(Array.isArray(e))return"à®…à®£à®¿";if(null===e)return"à®µà¯†à®±à¯à®®à¯ˆ";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`à®¤à®µà®±à®¾à®© à®‰à®³à¯à®³à¯€à®Ÿà¯: à®Žà®¤à®¿à®°à¯à®ªà®¾à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${t4(r.values[0])}`;return`à®¤à®µà®±à®¾à®© à®µà®¿à®°à¯à®ªà¯à®ªà®®à¯: à®Žà®¤à®¿à®°à¯à®ªà®¾à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${t_(r.values,"|")} à®‡à®²à¯ à®’à®©à¯à®±à¯`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`à®®à®¿à®• à®ªà¯†à®°à®¿à®¯à®¤à¯: à®Žà®¤à®¿à®°à¯à®ªà®¾à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${r.origin??"à®®à®¤à®¿à®ªà¯à®ªà¯"} ${t}${r.maximum.toString()} ${n.unit??"à®‰à®±à¯à®ªà¯à®ªà¯à®•à®³à¯"} à®†à®• à®‡à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`;return`à®®à®¿à®• à®ªà¯†à®°à®¿à®¯à®¤à¯: à®Žà®¤à®¿à®°à¯à®ªà®¾à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${r.origin??"à®®à®¤à®¿à®ªà¯à®ªà¯"} ${t}${r.maximum.toString()} à®†à®• à®‡à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`à®®à®¿à®•à®šà¯ à®šà®¿à®±à®¿à®¯à®¤à¯: à®Žà®¤à®¿à®°à¯à®ªà®¾à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${r.origin} ${t}${r.minimum.toString()} ${n.unit} à®†à®• à®‡à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`;return`à®®à®¿à®•à®šà¯ à®šà®¿à®±à®¿à®¯à®¤à¯: à®Žà®¤à®¿à®°à¯à®ªà®¾à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${r.origin} ${t}${r.minimum.toString()} à®†à®• à®‡à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`}case"invalid_format":if("starts_with"===r.format)return`à®¤à®µà®±à®¾à®© à®šà®°à®®à¯: "${r.prefix}" à®‡à®²à¯ à®¤à¯Šà®Ÿà®™à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`;if("ends_with"===r.format)return`à®¤à®µà®±à®¾à®© à®šà®°à®®à¯: "${r.suffix}" à®‡à®²à¯ à®®à¯à®Ÿà®¿à®µà®Ÿà¯ˆà®¯ à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`;if("includes"===r.format)return`à®¤à®µà®±à®¾à®© à®šà®°à®®à¯: "${r.includes}" à® à®‰à®³à¯à®³à®Ÿà®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`;if("regex"===r.format)return`à®¤à®µà®±à®¾à®© à®šà®°à®®à¯: ${r.pattern} à®®à¯à®±à¯ˆà®ªà®¾à®Ÿà¯à®Ÿà¯à®Ÿà®©à¯ à®ªà¯Šà®°à¯à®¨à¯à®¤ à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`;return`à®¤à®µà®±à®¾à®© ${t[r.format]??r.format}`;case"not_multiple_of":return`à®¤à®µà®±à®¾à®© à®Žà®£à¯: ${r.divisor} à®‡à®©à¯ à®ªà®²à®®à®¾à®• à®‡à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`;case"unrecognized_keys":return`à®…à®Ÿà¯ˆà®¯à®¾à®³à®®à¯ à®¤à¯†à®°à®¿à®¯à®¾à®¤ à®µà®¿à®šà¯ˆ${r.keys.length>1?"à®•à®³à¯":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`${r.origin} à®‡à®²à¯ à®¤à®µà®±à®¾à®© à®µà®¿à®šà¯ˆ`;case"invalid_union":return"à®¤à®µà®±à®¾à®© à®‰à®³à¯à®³à¯€à®Ÿà¯";case"invalid_element":return`${r.origin} à®‡à®²à¯ à®¤à®µà®±à®¾à®© à®®à®¤à®¿à®ªà¯à®ªà¯`;default:return`à®¤à®µà®±à®¾à®© à®‰à®³à¯à®³à¯€à®Ÿà¯`}})}},"th",0,function(){let e,t;return{localeError:(e={string:{unit:"à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£",verb:"à¸„à¸§à¸£à¸¡à¸µ"},file:{unit:"à¹„à¸šà¸•à¹Œ",verb:"à¸„à¸§à¸£à¸¡à¸µ"},array:{unit:"à¸£à¸²à¸¢à¸à¸²à¸£",verb:"à¸„à¸§à¸£à¸¡à¸µ"},set:{unit:"à¸£à¸²à¸¢à¸à¸²à¸£",verb:"à¸„à¸§à¸£à¸¡à¸µ"}},t={regex:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸›à¹‰à¸­à¸™",email:"à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸­à¸µà¹€à¸¡à¸¥",url:"URL",emoji:"à¸­à¸´à¹‚à¸¡à¸ˆà¸´",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸§à¸¥à¸²à¹à¸šà¸š ISO",date:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¹à¸šà¸š ISO",time:"à¹€à¸§à¸¥à¸²à¹à¸šà¸š ISO",duration:"à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²à¹à¸šà¸š ISO",ipv4:"à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ IPv4",ipv6:"à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ IPv6",cidrv4:"à¸Šà¹ˆà¸§à¸‡ IP à¹à¸šà¸š IPv4",cidrv6:"à¸Šà¹ˆà¸§à¸‡ IP à¹à¸šà¸š IPv6",base64:"à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸šà¸š Base64",base64url:"à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸šà¸š Base64 à¸ªà¸³à¸«à¸£à¸±à¸š URL",json_string:"à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸šà¸š JSON",e164:"à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸žà¸—à¹Œà¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸›à¸£à¸°à¹€à¸—à¸¨ (E.164)",jwt:"à¹‚à¸—à¹€à¸„à¸™ JWT",template_literal:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸›à¹‰à¸­à¸™"},r=>{switch(r.code){case"invalid_type":return`à¸›à¸£à¸°à¹€à¸ à¸—à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸„à¸§à¸£à¹€à¸›à¹‡à¸™ ${r.expected} à¹à¸•à¹ˆà¹„à¸”à¹‰à¸£à¸±à¸š ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¸•à¸±à¸§à¹€à¸¥à¸‚ (NaN)":"à¸•à¸±à¸§à¹€à¸¥à¸‚";case"object":if(Array.isArray(e))return"à¸­à¸²à¸£à¹Œà¹€à¸£à¸¢à¹Œ (Array)";if(null===e)return"à¹„à¸¡à¹ˆà¸¡à¸µà¸„à¹ˆà¸² (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`à¸„à¹ˆà¸²à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸„à¸§à¸£à¹€à¸›à¹‡à¸™ ${t4(r.values[0])}`;return`à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸„à¸§à¸£à¹€à¸›à¹‡à¸™à¸«à¸™à¸¶à¹ˆà¸‡à¹ƒà¸™ ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™":"à¸™à¹‰à¸­à¸¢à¸à¸§à¹ˆà¸²",n=e[r.origin]??null;if(n)return`à¹€à¸à¸´à¸™à¸à¸³à¸«à¸™à¸”: ${r.origin??"à¸„à¹ˆà¸²"} à¸„à¸§à¸£à¸¡à¸µ${t} ${r.maximum.toString()} ${n.unit??"à¸£à¸²à¸¢à¸à¸²à¸£"}`;return`à¹€à¸à¸´à¸™à¸à¸³à¸«à¸™à¸”: ${r.origin??"à¸„à¹ˆà¸²"} à¸„à¸§à¸£à¸¡à¸µ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?"à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢":"à¸¡à¸²à¸à¸à¸§à¹ˆà¸²",n=e[r.origin]??null;if(n)return`à¸™à¹‰à¸­à¸¢à¸à¸§à¹ˆà¸²à¸à¸³à¸«à¸™à¸”: ${r.origin} à¸„à¸§à¸£à¸¡à¸µ${t} ${r.minimum.toString()} ${n.unit}`;return`à¸™à¹‰à¸­à¸¢à¸à¸§à¹ˆà¸²à¸à¸³à¸«à¸™à¸”: ${r.origin} à¸„à¸§à¸£à¸¡à¸µ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`à¸£à¸¹à¸›à¹à¸šà¸šà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸‚à¸¶à¹‰à¸™à¸•à¹‰à¸™à¸”à¹‰à¸§à¸¢ "${r.prefix}"`;if("ends_with"===r.format)return`à¸£à¸¹à¸›à¹à¸šà¸šà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸¥à¸‡à¸—à¹‰à¸²à¸¢à¸”à¹‰à¸§à¸¢ "${r.suffix}"`;if("includes"===r.format)return`à¸£à¸¹à¸›à¹à¸šà¸šà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸¡à¸µ "${r.includes}" à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡`;if("regex"===r.format)return`à¸£à¸¹à¸›à¹à¸šà¸šà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸•à¹‰à¸­à¸‡à¸•à¸£à¸‡à¸à¸±à¸šà¸£à¸¹à¸›à¹à¸šà¸šà¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸” ${r.pattern}`;return`à¸£à¸¹à¸›à¹à¸šà¸šà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: ${t[r.format]??r.format}`;case"not_multiple_of":return`à¸•à¸±à¸§à¹€à¸¥à¸‚à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸•à¹‰à¸­à¸‡à¹€à¸›à¹‡à¸™à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¸«à¸²à¸£à¸”à¹‰à¸§à¸¢ ${r.divisor} à¹„à¸”à¹‰à¸¥à¸‡à¸•à¸±à¸§`;case"unrecognized_keys":return`à¸žà¸šà¸„à¸µà¸¢à¹Œà¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸ˆà¸±à¸: ${t_(r.keys,", ")}`;case"invalid_key":return`à¸„à¸µà¸¢à¹Œà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¹ƒà¸™ ${r.origin}`;case"invalid_union":return"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¹„à¸¡à¹ˆà¸•à¸£à¸‡à¸à¸±à¸šà¸£à¸¹à¸›à¹à¸šà¸šà¸¢à¸¹à¹€à¸™à¸µà¸¢à¸™à¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸”à¹„à¸§à¹‰";case"invalid_element":return`à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¹ƒà¸™ ${r.origin}`;default:return`à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡`}})}},"tr",0,function(){let e,t;return{localeError:(e={string:{unit:"karakter",verb:"olmalÄ±"},file:{unit:"bayt",verb:"olmalÄ±"},array:{unit:"Ã¶ÄŸe",verb:"olmalÄ±"},set:{unit:"Ã¶ÄŸe",verb:"olmalÄ±"}},t={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO sÃ¼re",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aralÄ±ÄŸÄ±",cidrv6:"IPv6 aralÄ±ÄŸÄ±",base64:"base64 ile ÅŸifrelenmiÅŸ metin",base64url:"base64url ile ÅŸifrelenmiÅŸ metin",json_string:"JSON dizesi",e164:"E.164 sayÄ±sÄ±",jwt:"JWT",template_literal:"Åžablon dizesi"},r=>{switch(r.code){case"invalid_type":return`Ge\xe7ersiz deÄŸer: beklenen ${r.expected}, alÄ±nan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ge\xe7ersiz deÄŸer: beklenen ${t4(r.values[0])}`;return`Ge\xe7ersiz se\xe7enek: aÅŸaÄŸÄ±dakilerden biri olmalÄ±: ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`\xc7ok b\xfcy\xfck: beklenen ${r.origin??"deÄŸer"} ${t}${r.maximum.toString()} ${n.unit??"Ã¶ÄŸe"}`;return`\xc7ok b\xfcy\xfck: beklenen ${r.origin??"deÄŸer"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`\xc7ok k\xfc\xe7\xfck: beklenen ${r.origin} ${t}${r.minimum.toString()} ${n.unit}`;return`\xc7ok k\xfc\xe7\xfck: beklenen ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Ge\xe7ersiz metin: "${r.prefix}" ile baÅŸlamalÄ±`;if("ends_with"===r.format)return`Ge\xe7ersiz metin: "${r.suffix}" ile bitmeli`;if("includes"===r.format)return`Ge\xe7ersiz metin: "${r.includes}" i\xe7ermeli`;if("regex"===r.format)return`Ge\xe7ersiz metin: ${r.pattern} desenine uymalÄ±`;return`Ge\xe7ersiz ${t[r.format]??r.format}`;case"not_multiple_of":return`Ge\xe7ersiz sayÄ±: ${r.divisor} ile tam b\xf6l\xfcnebilmeli`;case"unrecognized_keys":return`TanÄ±nmayan anahtar${r.keys.length>1?"lar":""}: ${t_(r.keys,", ")}`;case"invalid_key":return`${r.origin} i\xe7inde ge\xe7ersiz anahtar`;case"invalid_union":return"GeÃ§ersiz deÄŸer";case"invalid_element":return`${r.origin} i\xe7inde ge\xe7ersiz deÄŸer`;default:return`Ge\xe7ersiz deÄŸer`}})}},"ua",0,function(){return sM()},"uk",0,sM,"ur",0,function(){let e,t;return{localeError:(e={string:{unit:"Ø­Ø±ÙˆÙ",verb:"ÛÙˆÙ†Ø§"},file:{unit:"Ø¨Ø§Ø¦Ù¹Ø³",verb:"ÛÙˆÙ†Ø§"},array:{unit:"Ø¢Ø¦Ù¹Ù…Ø²",verb:"ÛÙˆÙ†Ø§"},set:{unit:"Ø¢Ø¦Ù¹Ù…Ø²",verb:"ÛÙˆÙ†Ø§"}},t={regex:"Ø§Ù† Ù¾Ù¹",email:"Ø§ÛŒ Ù…ÛŒÙ„ Ø§ÛŒÚˆØ±ÛŒØ³",url:"ÛŒÙˆ Ø¢Ø± Ø§ÛŒÙ„",emoji:"Ø§ÛŒÙ…ÙˆØ¬ÛŒ",uuid:"ÛŒÙˆ ÛŒÙˆ Ø¢Ø¦ÛŒ ÚˆÛŒ",uuidv4:"ÛŒÙˆ ÛŒÙˆ Ø¢Ø¦ÛŒ ÚˆÛŒ ÙˆÛŒ 4",uuidv6:"ÛŒÙˆ ÛŒÙˆ Ø¢Ø¦ÛŒ ÚˆÛŒ ÙˆÛŒ 6",nanoid:"Ù†ÛŒÙ†Ùˆ Ø¢Ø¦ÛŒ ÚˆÛŒ",guid:"Ø¬ÛŒ ÛŒÙˆ Ø¢Ø¦ÛŒ ÚˆÛŒ",cuid:"Ø³ÛŒ ÛŒÙˆ Ø¢Ø¦ÛŒ ÚˆÛŒ",cuid2:"Ø³ÛŒ ÛŒÙˆ Ø¢Ø¦ÛŒ ÚˆÛŒ 2",ulid:"ÛŒÙˆ Ø§ÛŒÙ„ Ø¢Ø¦ÛŒ ÚˆÛŒ",xid:"Ø§ÛŒÚ©Ø³ Ø¢Ø¦ÛŒ ÚˆÛŒ",ksuid:"Ú©Û’ Ø§ÛŒØ³ ÛŒÙˆ Ø¢Ø¦ÛŒ ÚˆÛŒ",datetime:"Ø¢Ø¦ÛŒ Ø§ÛŒØ³ Ø§Ùˆ ÚˆÛŒÙ¹ Ù¹Ø§Ø¦Ù…",date:"Ø¢Ø¦ÛŒ Ø§ÛŒØ³ Ø§Ùˆ ØªØ§Ø±ÛŒØ®",time:"Ø¢Ø¦ÛŒ Ø§ÛŒØ³ Ø§Ùˆ ÙˆÙ‚Øª",duration:"Ø¢Ø¦ÛŒ Ø§ÛŒØ³ Ø§Ùˆ Ù…Ø¯Øª",ipv4:"Ø¢Ø¦ÛŒ Ù¾ÛŒ ÙˆÛŒ 4 Ø§ÛŒÚˆØ±ÛŒØ³",ipv6:"Ø¢Ø¦ÛŒ Ù¾ÛŒ ÙˆÛŒ 6 Ø§ÛŒÚˆØ±ÛŒØ³",cidrv4:"Ø¢Ø¦ÛŒ Ù¾ÛŒ ÙˆÛŒ 4 Ø±ÛŒÙ†Ø¬",cidrv6:"Ø¢Ø¦ÛŒ Ù¾ÛŒ ÙˆÛŒ 6 Ø±ÛŒÙ†Ø¬",base64:"Ø¨ÛŒØ³ 64 Ø§Ù† Ú©ÙˆÚˆÚˆ Ø³Ù¹Ø±Ù†Ú¯",base64url:"Ø¨ÛŒØ³ 64 ÛŒÙˆ Ø¢Ø± Ø§ÛŒÙ„ Ø§Ù† Ú©ÙˆÚˆÚˆ Ø³Ù¹Ø±Ù†Ú¯",json_string:"Ø¬Û’ Ø§ÛŒØ³ Ø§Ùˆ Ø§ÛŒÙ† Ø³Ù¹Ø±Ù†Ú¯",e164:"Ø§ÛŒ 164 Ù†Ù…Ø¨Ø±",jwt:"Ø¬Û’ ÚˆØ¨Ù„ÛŒÙˆ Ù¹ÛŒ",template_literal:"Ø§Ù† Ù¾Ù¹"},r=>{switch(r.code){case"invalid_type":return`ØºÙ„Ø· Ø§Ù† Ù¾Ù¹: ${r.expected} Ù…ØªÙˆÙ‚Ø¹ ØªÚ¾Ø§ØŒ ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Ù†Ù…Ø¨Ø±";case"object":if(Array.isArray(e))return"Ø¢Ø±Û’";if(null===e)return"Ù†Ù„";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)} Ù…ÙˆØµÙˆÙ„ ÛÙˆØ§`;case"invalid_value":if(1===r.values.length)return`ØºÙ„Ø· Ø§Ù† Ù¾Ù¹: ${t4(r.values[0])} Ù…ØªÙˆÙ‚Ø¹ ØªÚ¾Ø§`;return`ØºÙ„Ø· Ø¢Ù¾Ø´Ù†: ${t_(r.values,"|")} Ù…ÛŒÚº Ø³Û’ Ø§ÛŒÚ© Ù…ØªÙˆÙ‚Ø¹ ØªÚ¾Ø§`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Ø¨ÛØª Ø¨Ú‘Ø§: ${r.origin??"ÙˆÛŒÙ„ÛŒÙˆ"} Ú©Û’ ${t}${r.maximum.toString()} ${n.unit??"Ø¹Ù†Ø§ØµØ±"} ÛÙˆÙ†Û’ Ù…ØªÙˆÙ‚Ø¹ ØªÚ¾Û’`;return`Ø¨ÛØª Ø¨Ú‘Ø§: ${r.origin??"ÙˆÛŒÙ„ÛŒÙˆ"} Ú©Ø§ ${t}${r.maximum.toString()} ÛÙˆÙ†Ø§ Ù…ØªÙˆÙ‚Ø¹ ØªÚ¾Ø§`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Ø¨ÛØª Ú†Ú¾ÙˆÙ¹Ø§: ${r.origin} Ú©Û’ ${t}${r.minimum.toString()} ${n.unit} ÛÙˆÙ†Û’ Ù…ØªÙˆÙ‚Ø¹ ØªÚ¾Û’`;return`Ø¨ÛØª Ú†Ú¾ÙˆÙ¹Ø§: ${r.origin} Ú©Ø§ ${t}${r.minimum.toString()} ÛÙˆÙ†Ø§ Ù…ØªÙˆÙ‚Ø¹ ØªÚ¾Ø§`}case"invalid_format":if("starts_with"===r.format)return`ØºÙ„Ø· Ø³Ù¹Ø±Ù†Ú¯: "${r.prefix}" Ø³Û’ Ø´Ø±ÙˆØ¹ ÛÙˆÙ†Ø§ Ú†Ø§ÛÛŒÛ’`;if("ends_with"===r.format)return`ØºÙ„Ø· Ø³Ù¹Ø±Ù†Ú¯: "${r.suffix}" Ù¾Ø± Ø®ØªÙ… ÛÙˆÙ†Ø§ Ú†Ø§ÛÛŒÛ’`;if("includes"===r.format)return`ØºÙ„Ø· Ø³Ù¹Ø±Ù†Ú¯: "${r.includes}" Ø´Ø§Ù…Ù„ ÛÙˆÙ†Ø§ Ú†Ø§ÛÛŒÛ’`;if("regex"===r.format)return`ØºÙ„Ø· Ø³Ù¹Ø±Ù†Ú¯: Ù¾ÛŒÙ¹Ø±Ù† ${r.pattern} Ø³Û’ Ù…ÛŒÚ† ÛÙˆÙ†Ø§ Ú†Ø§ÛÛŒÛ’`;return`ØºÙ„Ø· ${t[r.format]??r.format}`;case"not_multiple_of":return`ØºÙ„Ø· Ù†Ù…Ø¨Ø±: ${r.divisor} Ú©Ø§ Ù…Ø¶Ø§Ø¹Ù ÛÙˆÙ†Ø§ Ú†Ø§ÛÛŒÛ’`;case"unrecognized_keys":return`ØºÛŒØ± ØªØ³Ù„ÛŒÙ… Ø´Ø¯Û Ú©ÛŒ${r.keys.length>1?"Ø²":""}: ${t_(r.keys,"ØŒ ")}`;case"invalid_key":return`${r.origin} Ù…ÛŒÚº ØºÙ„Ø· Ú©ÛŒ`;case"invalid_union":return"ØºÙ„Ø· Ø§Ù† Ù¾Ù¹";case"invalid_element":return`${r.origin} Ù…ÛŒÚº ØºÙ„Ø· ÙˆÛŒÙ„ÛŒÙˆ`;default:return`ØºÙ„Ø· Ø§Ù† Ù¾Ù¹`}})}},"vi",0,function(){let e,t;return{localeError:(e={string:{unit:"kÃ½ tá»±",verb:"cÃ³"},file:{unit:"byte",verb:"cÃ³"},array:{unit:"pháº§n tá»­",verb:"cÃ³"},set:{unit:"pháº§n tá»­",verb:"cÃ³"}},t={regex:"Ä‘áº§u vÃ o",email:"Ä‘á»‹a chá»‰ email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngÃ y giá» ISO",date:"ngÃ y ISO",time:"giá» ISO",duration:"khoáº£ng thá»i gian ISO",ipv4:"Ä‘á»‹a chá»‰ IPv4",ipv6:"Ä‘á»‹a chá»‰ IPv6",cidrv4:"dáº£i IPv4",cidrv6:"dáº£i IPv6",base64:"chuá»—i mÃ£ hÃ³a base64",base64url:"chuá»—i mÃ£ hÃ³a base64url",json_string:"chuá»—i JSON",e164:"sá»‘ E.164",jwt:"JWT",template_literal:"Ä‘áº§u vÃ o"},r=>{switch(r.code){case"invalid_type":return`Äáº§u v\xe0o kh\xf4ng há»£p lá»‡: mong Ä‘á»£i ${r.expected}, nháº­n Ä‘Æ°á»£c ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"sá»‘";case"object":if(Array.isArray(e))return"máº£ng";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Äáº§u v\xe0o kh\xf4ng há»£p lá»‡: mong Ä‘á»£i ${t4(r.values[0])}`;return`T\xf9y chá»n kh\xf4ng há»£p lá»‡: mong Ä‘á»£i má»™t trong c\xe1c gi\xe1 trá»‹ ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Qu\xe1 lá»›n: mong Ä‘á»£i ${r.origin??"giÃ¡ trá»‹"} ${n.verb} ${t}${r.maximum.toString()} ${n.unit??"pháº§n tá»­"}`;return`Qu\xe1 lá»›n: mong Ä‘á»£i ${r.origin??"giÃ¡ trá»‹"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Qu\xe1 nhá»: mong Ä‘á»£i ${r.origin} ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return`Qu\xe1 nhá»: mong Ä‘á»£i ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Chuá»—i kh\xf4ng há»£p lá»‡: pháº£i báº¯t Ä‘áº§u báº±ng "${r.prefix}"`;if("ends_with"===r.format)return`Chuá»—i kh\xf4ng há»£p lá»‡: pháº£i káº¿t th\xfac báº±ng "${r.suffix}"`;if("includes"===r.format)return`Chuá»—i kh\xf4ng há»£p lá»‡: pháº£i bao gá»“m "${r.includes}"`;if("regex"===r.format)return`Chuá»—i kh\xf4ng há»£p lá»‡: pháº£i khá»›p vá»›i máº«u ${r.pattern}`;return`${t[r.format]??r.format} kh\xf4ng há»£p lá»‡`;case"not_multiple_of":return`Sá»‘ kh\xf4ng há»£p lá»‡: pháº£i l\xe0 bá»™i sá»‘ cá»§a ${r.divisor}`;case"unrecognized_keys":return`Kh\xf3a kh\xf4ng Ä‘Æ°á»£c nháº­n dáº¡ng: ${t_(r.keys,", ")}`;case"invalid_key":return`Kh\xf3a kh\xf4ng há»£p lá»‡ trong ${r.origin}`;case"invalid_union":return"Äáº§u vÃ o khÃ´ng há»£p lá»‡";case"invalid_element":return`Gi\xe1 trá»‹ kh\xf4ng há»£p lá»‡ trong ${r.origin}`;default:return`Äáº§u v\xe0o kh\xf4ng há»£p lá»‡`}})}},"yo",0,function(){let e,t;return{localeError:(e={string:{unit:"Ã mi",verb:"nÃ­"},file:{unit:"bytes",verb:"nÃ­"},array:{unit:"nkan",verb:"nÃ­"},set:{unit:"nkan",verb:"nÃ­"}},t={regex:"áº¹Ì€rá» Ã¬bÃ¡wá»lÃ©",email:"Ã dÃ­ráº¹ÌsÃ¬ Ã¬máº¹ÌlÃ¬",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"Ã kÃ³kÃ² ISO",date:"á»já»Ì ISO",time:"Ã kÃ³kÃ² ISO",duration:"Ã kÃ³kÃ² tÃ³ pÃ© ISO",ipv4:"Ã dÃ­ráº¹ÌsÃ¬ IPv4",ipv6:"Ã dÃ­ráº¹ÌsÃ¬ IPv6",cidrv4:"Ã gbÃ¨gbÃ¨ IPv4",cidrv6:"Ã gbÃ¨gbÃ¨ IPv6",base64:"á»Ì€rá»Ì€ tÃ­ a ká»Ì nÃ­ base64",base64url:"á»Ì€rá»Ì€ base64url",json_string:"á»Ì€rá»Ì€ JSON",e164:"ná»ÌmbÃ  E.164",jwt:"JWT",template_literal:"áº¹Ì€rá» Ã¬bÃ¡wá»lÃ©"},r=>{switch(r.code){case"invalid_type":return`\xccb\xe1wá»l\xe9 aá¹£\xecá¹£e: a n\xed l\xe1ti fi ${r.expected}, \xe0má»Ì€ a r\xed ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"ná»ÌmbÃ ";case"object":if(Array.isArray(e))return"akopá»";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`\xccb\xe1wá»l\xe9 aá¹£\xecá¹£e: a n\xed l\xe1ti fi ${t4(r.values[0])}`;return`\xc0á¹£\xe0y\xe0n aá¹£\xecá¹£e: yan á»Ì€kan l\xe1ra ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`T\xf3 pá»Ì€ j\xf9: a n\xed l\xe1ti jáº¹Ì p\xe9 ${r.origin??"iye"} ${n.verb} ${t}${r.maximum} ${n.unit}`;return`T\xf3 pá»Ì€ j\xf9: a n\xed l\xe1ti jáº¹Ì ${t}${r.maximum}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`K\xe9r\xe9 ju: a n\xed l\xe1ti jáº¹Ì p\xe9 ${r.origin} ${n.verb} ${t}${r.minimum} ${n.unit}`;return`K\xe9r\xe9 ju: a n\xed l\xe1ti jáº¹Ì ${t}${r.minimum}`}case"invalid_format":if("starts_with"===r.format)return`á»ŒÌ€rá»Ì€ aá¹£\xecá¹£e: gbá»Ìdá»Ì€ báº¹Ì€ráº¹Ì€ páº¹Ì€l\xfa "${r.prefix}"`;if("ends_with"===r.format)return`á»ŒÌ€rá»Ì€ aá¹£\xecá¹£e: gbá»Ìdá»Ì€ par\xed páº¹Ì€l\xfa "${r.suffix}"`;if("includes"===r.format)return`á»ŒÌ€rá»Ì€ aá¹£\xecá¹£e: gbá»Ìdá»Ì€ n\xed "${r.includes}"`;if("regex"===r.format)return`á»ŒÌ€rá»Ì€ aá¹£\xecá¹£e: gbá»Ìdá»Ì€ b\xe1 \xe0páº¹áº¹ráº¹ mu ${r.pattern}`;return`Aá¹£\xecá¹£e: ${t[r.format]??r.format}`;case"not_multiple_of":return`Ná»Ìmb\xe0 aá¹£\xecá¹£e: gbá»Ìdá»Ì€ jáº¹Ì \xe8y\xe0 p\xedp\xedn ti ${r.divisor}`;case"unrecognized_keys":return`Bá»t\xecn\xec \xe0\xecmá»Ì€: ${t_(r.keys,", ")}`;case"invalid_key":return`Bá»t\xecn\xec aá¹£\xecá¹£e n\xedn\xfa ${r.origin}`;case"invalid_union":default:return"ÃŒbÃ¡wá»lÃ© aá¹£Ã¬á¹£e";case"invalid_element":return`Iye aá¹£\xecá¹£e n\xedn\xfa ${r.origin}`}})}},"zhCN",0,function(){let e,t;return{localeError:(e={string:{unit:"å­—ç¬¦",verb:"åŒ…å«"},file:{unit:"å­—èŠ‚",verb:"åŒ…å«"},array:{unit:"é¡¹",verb:"åŒ…å«"},set:{unit:"é¡¹",verb:"åŒ…å«"}},t={regex:"è¾“å…¥",email:"ç”µå­é‚®ä»¶",url:"URL",emoji:"è¡¨æƒ…ç¬¦å·",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISOæ—¥æœŸæ—¶é—´",date:"ISOæ—¥æœŸ",time:"ISOæ—¶é—´",duration:"ISOæ—¶é•¿",ipv4:"IPv4åœ°å€",ipv6:"IPv6åœ°å€",cidrv4:"IPv4ç½‘æ®µ",cidrv6:"IPv6ç½‘æ®µ",base64:"base64ç¼–ç å­—ç¬¦ä¸²",base64url:"base64urlç¼–ç å­—ç¬¦ä¸²",json_string:"JSONå­—ç¬¦ä¸²",e164:"E.164å·ç ",jwt:"JWT",template_literal:"è¾“å…¥"},r=>{switch(r.code){case"invalid_type":return`æ— æ•ˆè¾“å…¥ï¼šæœŸæœ› ${r.expected}ï¼Œå®žé™…æŽ¥æ”¶ ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"éžæ•°å­—(NaN)":"æ•°å­—";case"object":if(Array.isArray(e))return"æ•°ç»„";if(null===e)return"ç©ºå€¼(null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`æ— æ•ˆè¾“å…¥ï¼šæœŸæœ› ${t4(r.values[0])}`;return`æ— æ•ˆé€‰é¡¹ï¼šæœŸæœ›ä»¥ä¸‹ä¹‹ä¸€ ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`æ•°å€¼è¿‡å¤§ï¼šæœŸæœ› ${r.origin??"å€¼"} ${t}${r.maximum.toString()} ${n.unit??"ä¸ªå…ƒç´ "}`;return`æ•°å€¼è¿‡å¤§ï¼šæœŸæœ› ${r.origin??"å€¼"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`æ•°å€¼è¿‡å°ï¼šæœŸæœ› ${r.origin} ${t}${r.minimum.toString()} ${n.unit}`;return`æ•°å€¼è¿‡å°ï¼šæœŸæœ› ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`æ— æ•ˆå­—ç¬¦ä¸²ï¼šå¿…é¡»ä»¥ "${r.prefix}" å¼€å¤´`;if("ends_with"===r.format)return`æ— æ•ˆå­—ç¬¦ä¸²ï¼šå¿…é¡»ä»¥ "${r.suffix}" ç»“å°¾`;if("includes"===r.format)return`æ— æ•ˆå­—ç¬¦ä¸²ï¼šå¿…é¡»åŒ…å« "${r.includes}"`;if("regex"===r.format)return`æ— æ•ˆå­—ç¬¦ä¸²ï¼šå¿…é¡»æ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼ ${r.pattern}`;return`æ— æ•ˆ${t[r.format]??r.format}`;case"not_multiple_of":return`æ— æ•ˆæ•°å­—ï¼šå¿…é¡»æ˜¯ ${r.divisor} çš„å€æ•°`;case"unrecognized_keys":return`å‡ºçŽ°æœªçŸ¥çš„é”®(key): ${t_(r.keys,", ")}`;case"invalid_key":return`${r.origin} ä¸­çš„é”®(key)æ— æ•ˆ`;case"invalid_union":return"æ— æ•ˆè¾“å…¥";case"invalid_element":return`${r.origin} ä¸­åŒ…å«æ— æ•ˆå€¼(value)`;default:return`æ— æ•ˆè¾“å…¥`}})}},"zhTW",0,function(){let e,t;return{localeError:(e={string:{unit:"å­—å…ƒ",verb:"æ“æœ‰"},file:{unit:"ä½å…ƒçµ„",verb:"æ“æœ‰"},array:{unit:"é …ç›®",verb:"æ“æœ‰"},set:{unit:"é …ç›®",verb:"æ“æœ‰"}},t={regex:"è¼¸å…¥",email:"éƒµä»¶åœ°å€",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO æ—¥æœŸæ™‚é–“",date:"ISO æ—¥æœŸ",time:"ISO æ™‚é–“",duration:"ISO æœŸé–“",ipv4:"IPv4 ä½å€",ipv6:"IPv6 ä½å€",cidrv4:"IPv4 ç¯„åœ",cidrv6:"IPv6 ç¯„åœ",base64:"base64 ç·¨ç¢¼å­—ä¸²",base64url:"base64url ç·¨ç¢¼å­—ä¸²",json_string:"JSON å­—ä¸²",e164:"E.164 æ•¸å€¼",jwt:"JWT",template_literal:"è¼¸å…¥"},r=>{switch(r.code){case"invalid_type":return`ç„¡æ•ˆçš„è¼¸å…¥å€¼ï¼šé æœŸç‚º ${r.expected}ï¼Œä½†æ”¶åˆ° ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`ç„¡æ•ˆçš„è¼¸å…¥å€¼ï¼šé æœŸç‚º ${t4(r.values[0])}`;return`ç„¡æ•ˆçš„é¸é …ï¼šé æœŸç‚ºä»¥ä¸‹å…¶ä¸­ä¹‹ä¸€ ${t_(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`æ•¸å€¼éŽå¤§ï¼šé æœŸ ${r.origin??"å€¼"} æ‡‰ç‚º ${t}${r.maximum.toString()} ${n.unit??"å€‹å…ƒç´ "}`;return`æ•¸å€¼éŽå¤§ï¼šé æœŸ ${r.origin??"å€¼"} æ‡‰ç‚º ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`æ•¸å€¼éŽå°ï¼šé æœŸ ${r.origin} æ‡‰ç‚º ${t}${r.minimum.toString()} ${n.unit}`;return`æ•¸å€¼éŽå°ï¼šé æœŸ ${r.origin} æ‡‰ç‚º ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`ç„¡æ•ˆçš„å­—ä¸²ï¼šå¿…é ˆä»¥ "${r.prefix}" é–‹é ­`;if("ends_with"===r.format)return`ç„¡æ•ˆçš„å­—ä¸²ï¼šå¿…é ˆä»¥ "${r.suffix}" çµå°¾`;if("includes"===r.format)return`ç„¡æ•ˆçš„å­—ä¸²ï¼šå¿…é ˆåŒ…å« "${r.includes}"`;if("regex"===r.format)return`ç„¡æ•ˆçš„å­—ä¸²ï¼šå¿…é ˆç¬¦åˆæ ¼å¼ ${r.pattern}`;return`ç„¡æ•ˆçš„ ${t[r.format]??r.format}`;case"not_multiple_of":return`ç„¡æ•ˆçš„æ•¸å­—ï¼šå¿…é ˆç‚º ${r.divisor} çš„å€æ•¸`;case"unrecognized_keys":return`ç„¡æ³•è­˜åˆ¥çš„éµå€¼${r.keys.length>1?"å€‘":""}ï¼š${t_(r.keys,"ã€")}`;case"invalid_key":return`${r.origin} ä¸­æœ‰ç„¡æ•ˆçš„éµå€¼`;case"invalid_union":return"ç„¡æ•ˆçš„è¼¸å…¥å€¼";case"invalid_element":return`${r.origin} ä¸­æœ‰ç„¡æ•ˆçš„å€¼`;default:return`ç„¡æ•ˆçš„è¼¸å…¥å€¼`}})}}],54580);var cO=e.i(54580);e.i(25527),e.i(98530),e.i(50215),e.i(34966);var cE=e.i(18249);e.s(["$ZodAny",0,iL,"$ZodArray",0,iH,"$ZodAsyncError",()=>tx,"$ZodBase64",0,i$,"$ZodBase64URL",0,ij,"$ZodBigInt",0,iM,"$ZodBigIntFormat",0,iz,"$ZodBoolean",0,iE,"$ZodCIDRv4",0,ik,"$ZodCIDRv6",0,iw,"$ZodCUID",0,il,"$ZodCUID2",0,id,"$ZodCatch",0,sp,"$ZodCheck",0,nP,"$ZodCheckBigIntFormat",0,nZ,"$ZodCheckEndsWith",0,n1,"$ZodCheckGreaterThan",0,nL,"$ZodCheckIncludes",0,nQ,"$ZodCheckLengthEquals",0,nq,"$ZodCheckLessThan",0,nR,"$ZodCheckLowerCase",0,nY,"$ZodCheckMaxLength",0,nW,"$ZodCheckMaxSize",0,nB,"$ZodCheckMimeType",0,n5,"$ZodCheckMinLength",0,nK,"$ZodCheckMinSize",0,nV,"$ZodCheckMultipleOf",0,nU,"$ZodCheckNumberFormat",0,nF,"$ZodCheckOverwrite",0,n6,"$ZodCheckProperty",0,n4,"$ZodCheckRegex",0,nG,"$ZodCheckSizeEquals",0,nH,"$ZodCheckStartsWith",0,n0,"$ZodCheckStringFormat",0,nJ,"$ZodCheckUpperCase",0,nX,"$ZodCodec",0,sg,"$ZodCustom",0,sS,"$ZodCustomStringFormat",0,iC,"$ZodDate",0,iB,"$ZodDefault",0,sa,"$ZodDiscriminatedUnion",0,iQ,"$ZodE164",0,iT,"$ZodEmail",0,ii,"$ZodEmoji",0,ia,"$ZodEncodeError",()=>tb,"$ZodEnum",0,i8,"$ZodError",0,rv,"$ZodFile",0,st,"$ZodFunction",0,sw,"$ZodGUID",0,it,"$ZodIPv4",0,ix,"$ZodIPv6",0,ib,"$ZodISODate",0,im,"$ZodISODateTime",0,ih,"$ZodISODuration",0,iy,"$ZodISOTime",0,ig,"$ZodIntersection",0,i0,"$ZodJWT",0,iI,"$ZodKSUID",0,ip,"$ZodLazy",0,s$,"$ZodLiteral",0,se,"$ZodMAC",0,iv,"$ZodMap",0,i6,"$ZodNaN",0,sh,"$ZodNanoID",0,io,"$ZodNever",0,iF,"$ZodNonOptional",0,sd,"$ZodNull",0,iR,"$ZodNullable",0,ss,"$ZodNumber",0,iA,"$ZodNumberFormat",0,iO,"$ZodObject",0,iJ,"$ZodObjectJIT",0,iG,"$ZodOptional",0,si,"$ZodPipe",0,sm,"$ZodPrefault",0,sl,"$ZodPromise",0,sN,"$ZodReadonly",0,sb,"$ZodRealError",0,rk,"$ZodRecord",0,i5,"$ZodRegistry",()=>sD,"$ZodSet",0,i9,"$ZodString",0,n8,"$ZodStringFormat",0,ie,"$ZodSuccess",0,su,"$ZodSymbol",0,iP,"$ZodTemplateLiteral",0,sk,"$ZodTransform",0,sr,"$ZodTuple",0,i2,"$ZodType",0,n7,"$ZodULID",0,ic,"$ZodURL",0,is,"$ZodUUID",0,ir,"$ZodUndefined",0,iD,"$ZodUnion",0,iX,"$ZodUnknown",0,iU,"$ZodVoid",0,iZ,"$ZodXID",0,iu,"$brand",0,ty,"$constructor",()=>tg,"$input",0,sP,"$output",0,sz,"Doc",()=>n3,"JSONSchema",0,cE,"JSONSchemaGenerator",()=>oT,"NEVER",0,tf,"TimePrecision",0,at,"_any",()=>aw,"_array",()=>a5,"_base64",()=>s9,"_base64url",()=>s7,"_bigint",()=>af,"_boolean",()=>ah,"_catch",()=>oh,"_check",()=>ow,"_cidrv4",()=>s6,"_cidrv6",()=>s3,"_coercedBigint",()=>ag,"_coercedBoolean",()=>am,"_coercedDate",()=>aT,"_coercedNumber",()=>ao,"_coercedString",()=>sF,"_cuid",()=>sY,"_cuid2",()=>sX,"_custom",()=>ob,"_date",()=>aj,"_decode",0,rD,"_decodeAsync",0,rF,"_default",()=>oc,"_discriminatedUnion",()=>a3,"_e164",()=>s8,"_email",()=>sZ,"_emoji",()=>sJ,"_encode",0,rz,"_encodeAsync",0,rL,"_endsWith",()=>aJ,"_enum",()=>or,"_file",()=>oa,"_float32",()=>ad,"_float64",()=>ac,"_gt",()=>aA,"_gte",()=>aO,"_guid",()=>sB,"_includes",()=>aK,"_int",()=>al,"_int32",()=>au,"_int64",()=>ay,"_intersection",()=>a9,"_ipv4",()=>s2,"_ipv6",()=>s4,"_isoDate",()=>an,"_isoDateTime",()=>ar,"_isoDuration",()=>as,"_isoTime",()=>ai,"_jwt",()=>ae,"_ksuid",()=>s1,"_lazy",()=>oy,"_length",()=>aB,"_literal",()=>oi,"_lowercase",()=>aH,"_lt",()=>aI,"_lte",()=>aC,"_mac",()=>s5,"_map",()=>oe,"_max",()=>aC,"_maxLength",()=>aF,"_maxSize",()=>aR,"_mime",()=>aY,"_min",()=>aO,"_minLength",()=>aZ,"_minSize",()=>aL,"_multipleOf",()=>aD,"_nan",()=>a_,"_nanoid",()=>sG,"_nativeEnum",()=>on,"_negative",()=>aM,"_never",()=>a$,"_nonnegative",()=>aP,"_nonoptional",()=>ou,"_nonpositive",()=>az,"_normalize",()=>aQ,"_null",()=>ak,"_nullable",()=>od,"_number",()=>aa,"_optional",()=>ol,"_overwrite",()=>aX,"_parse",0,rT,"_parseAsync",0,rI,"_pipe",()=>om,"_positive",()=>aE,"_promise",()=>ox,"_property",()=>aG,"_readonly",()=>of,"_record",()=>a8,"_refine",()=>ov,"_regex",()=>aV,"_safeDecode",0,rH,"_safeDecodeAsync",0,rJ,"_safeEncode",0,rB,"_safeEncodeAsync",0,rK,"_safeParse",0,rA,"_safeParseAsync",0,rE,"_set",()=>ot,"_size",()=>aU,"_slugify",()=>a4,"_startsWith",()=>aq,"_string",()=>sU,"_stringFormat",()=>oj,"_stringbool",()=>oS,"_success",()=>op,"_superRefine",()=>ok,"_symbol",()=>ab,"_templateLiteral",()=>og,"_toLowerCase",()=>a1,"_toUpperCase",()=>a2,"_transform",()=>oo,"_trim",()=>a0,"_tuple",()=>a7,"_uint32",()=>ap,"_uint64",()=>ax,"_ulid",()=>sQ,"_undefined",()=>av,"_union",()=>a6,"_unknown",()=>aN,"_uppercase",()=>aW,"_url",()=>sq,"_uuid",()=>sV,"_uuidv4",()=>sH,"_uuidv6",()=>sW,"_uuidv7",()=>sK,"_void",()=>aS,"_xid",()=>s0,"clone",()=>t0,"config",()=>tk,"decode",0,rR,"decodeAsync",0,rZ,"describe",()=>oN,"encode",0,rP,"encodeAsync",0,rU,"flattenError",()=>rw,"formatError",()=>rN,"globalConfig",0,tv,"globalRegistry",0,sL,"isValidBase64",()=>iN,"isValidBase64URL",()=>iS,"isValidJWT",()=>i_,"locales",0,cO,"meta",()=>o$,"parse",0,r_,"parseAsync",0,rC,"prettifyError",()=>rj,"regexes",0,cA,"registry",()=>sR,"safeDecode",0,rW,"safeDecodeAsync",0,rG,"safeEncode",0,rV,"safeEncodeAsync",0,rq,"safeParse",0,rO,"safeParseAsync",0,rM,"toDotPath",()=>rS,"toJSONSchema",()=>o_,"treeifyError",()=>r$,"util",0,cC,"version",0,n9],12717);var cM=e.i(12717);e.i(62201),e.i(42332),e.s(["endsWith",()=>aJ,"gt",()=>aA,"gte",()=>aO,"includes",()=>aK,"length",()=>aB,"lowercase",()=>aH,"lt",()=>aI,"lte",()=>aC,"maxLength",()=>aF,"maxSize",()=>aR,"mime",()=>aY,"minLength",()=>aZ,"minSize",()=>aL,"multipleOf",()=>aD,"negative",()=>aM,"nonnegative",()=>aP,"nonpositive",()=>az,"normalize",()=>aQ,"overwrite",()=>aX,"positive",()=>aE,"property",()=>aG,"regex",()=>aV,"size",()=>aU,"slugify",()=>a4,"startsWith",()=>aq,"toLowerCase",()=>a1,"toUpperCase",()=>a2,"trim",()=>a0,"uppercase",()=>aW],30421),e.i(30421),e.i(89282),e.i(364),e.i(6034),e.s(["$brand",0,ty,"ZodFirstPartyTypeKind",()=>r,"ZodIssueCode",0,cw,"config",()=>tk,"getErrorMap",()=>c$,"setErrorMap",()=>cN],58829),e.i(58829);var oC=oC,oA=oA,cz=e.i(49732),cP=e.i(13657);e.s(["$brand",0,ty,"$input",0,sP,"$output",0,sz,"NEVER",0,tf,"TimePrecision",0,at,"ZodAny",0,dr,"ZodArray",0,dh,"ZodBase64",0,lO,"ZodBase64URL",0,lM,"ZodBigInt",0,l1,"ZodBigIntFormat",0,l4,"ZodBoolean",0,lQ,"ZodCIDRv4",0,l_,"ZodCIDRv6",0,lC,"ZodCUID",0,lp,"ZodCUID2",0,lm,"ZodCatch",0,d4,"ZodCodec",0,d8,"ZodCustom",0,cu,"ZodCustomStringFormat",0,lU,"ZodDate",0,du,"ZodDefault",0,dJ,"ZodDiscriminatedUnion",0,dw,"ZodE164",0,lP,"ZodEmail",0,o3,"ZodEmoji",0,ll,"ZodEnum",0,dz,"ZodError",0,oF,"ZodFile",0,dU,"ZodFirstPartyTypeKind",()=>r,"ZodFunction",0,cd,"ZodGUID",0,o7,"ZodIPv4",0,lw,"ZodIPv6",0,lj,"ZodISODate",0,oM,"ZodISODateTime",0,oO,"ZodISODuration",0,oR,"ZodISOTime",0,oP,"ZodIntersection",0,d$,"ZodIssueCode",0,cw,"ZodJWT",0,lR,"ZodKSUID",0,lv,"ZodLazy",0,cs,"ZodLiteral",0,dR,"ZodMAC",0,l$,"ZodMap",0,dA,"ZodNaN",0,d6,"ZodNanoID",0,lc,"ZodNever",0,da,"ZodNonOptional",0,dQ,"ZodNull",0,de,"ZodNullable",0,dW,"ZodNumber",0,lH,"ZodNumberFormat",0,lK,"ZodObject",0,dg,"ZodOptional",0,dV,"ZodPipe",0,d9,"ZodPrefault",0,dY,"ZodPromise",0,co,"ZodReadonly",0,ct,"ZodRealError",0,oZ,"ZodRecord",0,d_,"ZodSet",0,dE,"ZodString",0,o4,"ZodStringFormat",0,o6,"ZodSuccess",0,d1,"ZodSymbol",0,l3,"ZodTemplateLiteral",0,cn,"ZodTransform",0,dZ,"ZodTuple",0,dj,"ZodType",0,o1,"ZodULID",0,lg,"ZodURL",0,ls,"ZodUUID",0,le,"ZodUndefined",0,l7,"ZodUnion",0,dv,"ZodUnknown",0,di,"ZodVoid",0,dd,"ZodXID",0,lx,"_ZodString",0,o2,"_default",()=>dG,"_function",()=>cc,"any",()=>dn,"array",()=>dm,"base64",()=>lE,"base64url",()=>lz,"bigint",()=>l2,"boolean",()=>l0,"catch",()=>d5,"check",()=>cp,"cidrv4",()=>lI,"cidrv6",()=>lA,"clone",()=>t0,"codec",()=>ce,"coerce",0,cP,"config",()=>tk,"core",0,cM,"cuid",()=>lh,"cuid2",()=>lf,"custom",()=>ch,"date",()=>dp,"decode",0,oq,"decodeAsync",0,oG,"describe",0,cg,"discriminatedUnion",()=>dN,"e164",()=>lD,"email",()=>o9,"emoji",()=>ld,"encode",0,oK,"encodeAsync",0,oJ,"endsWith",()=>aJ,"enum",()=>dP,"file",()=>dF,"flattenError",()=>rw,"float32",()=>lJ,"float64",()=>lG,"formatError",()=>rN,"function",()=>cc,"getErrorMap",()=>c$,"globalRegistry",0,sL,"gt",()=>aA,"gte",()=>aO,"guid",()=>o8,"hash",()=>lV,"hex",()=>lB,"hostname",()=>lZ,"httpUrl",()=>lo,"includes",()=>aK,"instanceof",()=>cx,"int",()=>lq,"int32",()=>lY,"int64",()=>l5,"intersection",()=>dS,"ipv4",()=>lN,"ipv6",()=>lT,"iso",0,cz,"json",()=>cv,"jwt",()=>lL,"keyof",()=>df,"ksuid",()=>lk,"lazy",()=>ca,"length",()=>aB,"literal",()=>dL,"locales",0,cO,"looseObject",()=>db,"lowercase",()=>aH,"lt",()=>aI,"lte",()=>aC,"mac",()=>lS,"map",()=>dO,"maxLength",()=>aF,"maxSize",()=>aR,"meta",0,cy,"mime",()=>aY,"minLength",()=>aZ,"minSize",()=>aL,"multipleOf",()=>aD,"nan",()=>d3,"nanoid",()=>lu,"nativeEnum",()=>dD,"negative",()=>aM,"never",()=>dl,"nonnegative",()=>aP,"nonoptional",()=>d0,"nonpositive",()=>az,"normalize",()=>aQ,"null",()=>dt,"nullable",()=>dK,"nullish",()=>dq,"number",()=>lW,"object",()=>dy,"optional",()=>dH,"overwrite",()=>aX,"parse",0,oB,"parseAsync",0,oV,"partialRecord",()=>dC,"pipe",()=>d7,"positive",()=>aE,"prefault",()=>dX,"preprocess",()=>ck,"prettifyError",()=>rj,"promise",()=>cl,"property",()=>aG,"readonly",()=>cr,"record",()=>dI,"refine",()=>cm,"regex",()=>aV,"regexes",()=>oC,"registry",()=>sR,"safeDecode",0,oX,"safeDecodeAsync",0,o0,"safeEncode",0,oY,"safeEncodeAsync",0,oQ,"safeParse",0,oH,"safeParseAsync",0,oW,"set",()=>dM,"setErrorMap",()=>cN,"size",()=>aU,"slugify",()=>a4,"startsWith",()=>aq,"strictObject",()=>dx,"string",()=>o5,"stringFormat",()=>lF,"stringbool",0,cb,"success",()=>d2,"superRefine",()=>cf,"symbol",()=>l9,"templateLiteral",()=>ci,"toJSONSchema",()=>o_,"toLowerCase",()=>a1,"toUpperCase",()=>a2,"transform",()=>dB,"treeifyError",()=>r$,"trim",()=>a0,"tuple",()=>dT,"uint32",()=>lX,"uint64",()=>l6,"ulid",()=>ly,"undefined",()=>l8,"union",()=>dk,"unknown",()=>ds,"uppercase",()=>aW,"url",()=>la,"util",()=>oA,"uuid",()=>lt,"uuidv4",()=>lr,"uuidv6",()=>ln,"uuidv7",()=>li,"void",()=>dc,"xid",()=>lb],22219);var cD=e.i(22219),cD=cD;let cR=cD.object({title:cD.string().min(1,"Topic is required"),referenceContent:cD.string().min(50,"Reference content must be at least 50 characters"),sampleOutline:cD.string().optional(),authorityTerms:cD.string().optional(),websiteType:cD.string().optional(),targetAudience:cD.enum(["zh-TW","zh-HK","zh-MY"]),useRag:cD.boolean(),autoImagePlan:cD.boolean(),productRawText:cD.string().optional(),urlInput:cD.string().url("Invalid URL").optional().or(cD.literal("")),productUrlList:cD.string().optional()});var cL=e.i(14272),cU=e.i(40143),cF=e.i(15823),cZ=e.i(19273),cB=class extends cF.Subscribable{#e;#t=void 0;#r;#n;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,cZ.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,cZ.hashKey)(t.mutationKey)!==(0,cZ.hashKey)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#s(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#s()}mutate(e,t){return this.#n=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#i(){let e=this.#r?.state??(0,cL.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#s(e){cU.notifyManager.batch(()=>{if(this.#n&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#n.onSuccess?.(e.data,t,r,n),this.#n.onSettled?.(e.data,null,t,r,n)):e?.type==="error"&&(this.#n.onError?.(e.error,t,r,n),this.#n.onSettled?.(void 0,e.error,t,r,n))}this.listeners.forEach(e=>{e(this.#t)})})}},cV=e.i(12598);function cH(e,t){let r=(0,cV.useQueryClient)(t),[n]=s.useState(()=>new cB(r,e));s.useEffect(()=>{n.setOptions(e)},[n,e]);let i=s.useSyncExternalStore(s.useCallback(e=>n.subscribe(cU.notifyManager.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=s.useCallback((e,t)=>{n.mutate(e,t).catch(cZ.noop)},[n]);if(i.error&&(0,cZ.shouldThrowError)(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}let cW=async(e,t={})=>{if(!e)return{title:"",content:"",images:[]};try{new URL(e)}catch(e){throw Error("Invalid URL format")}try{let r={"x-no-cache":"false","X-Md-Heading-Style":"setext"};t.includeNav?r["X-Remove-Selector"]="aside":r["X-Remove-Selector"]="header, footer, nav, aside";let n=await fetch(`https://r.jina.ai/${e}`,{method:"GET",headers:r});if(!n.ok)throw Error(`Failed to fetch content: ${n.statusText}`);let i=await n.text();if(!i||i.length<50)throw Error("Content retrieved is too short or empty.");return{...cK(i)}}catch(e){throw console.error("Web Scraping Error:",e),Error(e.message||"Failed to scrape URL")}},cK=e=>{let t=e.match(/^Title:\s*(.+)$/m),r=t?t[1].trim():"",n=e;e.includes("Markdown Content:")&&(n=e.split("Markdown Content:").slice(1).join("Markdown Content:"));let i=cq(n.trim()),s=((e,t=50)=>{let r,n=/!\[(.*?)\]\((.*?)\)/g,i=[];for(;null!==(r=n.exec(e));){let n=r[0],s=r[1],a=r[2],o=r.index,l=n.length,d=Math.max(0,o-t),c=Math.min(e.length,o+l+t),u=e.substring(d,o).trim(),p=e.substring(o+l,c).trim();i.push({index:o,length:l,image:{url:a,preContext:u,altText:s,postContext:p}})}if(i.length<=10)return i.map(e=>e.image);let s=[],a=-1;for(let t of i){if(-1===a){s.push(t.image),a=t.index+t.length;continue}e.substring(a,t.index).replace(/\s/g,"").length>=30&&(s.push(t.image),a=t.index+t.length)}return s})(i);return i=cJ(i),r&&!i.startsWith("#")&&(i=`# ${r}

${i}`),{title:r,content:i,images:s}},cq=e=>{let t=e.split("\n"),r=[],n=!1;for(let e=0;e<t.length;e++){let i=t[e];if(/^\s*(```|~~~)/.test(i.trim())){n=!n,r.push(i);continue}if(!n&&e+1<t.length){let n=t[e+1].match(/^\s*(=+|-+)\s*$/),s=i.trim().length>0,a=0===e||""===t[e-1].trim();if(n&&s&&a){let t=n[1].startsWith("=")?"#":"##";r.push(`${t} ${i.trim()}`),e++;continue}}r.push(i)}return r.join("\n")},cJ=e=>{let t,r=e;[/^Ad Placement\s*:.*$/gim,/^(Login|ç™»å…¥|Sign In).*$/gim,/^ADVERTISEMENT$/gim,/^CONTINUE READING BELOW$/gim,/^Share on:.*$/gim,/^recommended$/gim,/^Related Articles:?$/gim,/^Read More:?$/gim,/^SCROLL TO CONTINUE\s*:.*$/gim,/^[ \t]*\S{1,2}[ \t]*$/gm].forEach(e=>{r=r.replace(e,"")}),r=(r=(r=(r=r.replace(/!\[.*?\]\(.*?\)/g,"")).replace(/^!Image\s+\d+:.*$/gm,"")).replace(/!Image\s*\[.*?\]/gi,"")).replace(/^\]\(.*?\)/gm,"");let n=/\[(.*?)\]\(.*?\)/g,i=[];for(;null!==(t=n.exec(r));)i.push({index:t.index,length:t[0].length});if(i.length>6){let e=[],t=-1;for(let n=0;n<i.length;n++){let s=i[n],a=s.index,o=a+s.length;if(0===n){t=o;continue}r.substring(t,a).replace(/\s/g,"").length<30?e.push({start:a,end:o}):t=o}for(let t=e.length-1;t>=0;t--){let n=e[t];r=r.substring(0,n.start)+r.substring(n.end)}}return r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace(/\[\s*\]\(.*?\)/g,"")).replace(/^\s*([-*]|\d+\.)\s*$/gm,"")).replace(/\[([^\]]+)\]\([^\)]+\)/g,"$1")).replace(/^\s*(UA-\d+-\d+|G-[A-Z0-9]+)\s*$/gm,"")).replace(/^(holiday|girlstyle|businessfocus|mamidaily)\s*$/gim,"")).replace(/^All\s+[\u4e00-\u9fa5]+.*$/gm,"")).replace(/^\s*-{3,}\s*$/gm,"")).replace(/^\s*\u25b2?\s*Cosmopolitan\.com\.hk\s*$/gim,"")).replace(/\n{3,}/g,"\n\n").trim()},cG=async e=>{let t=`
    Scan the following content and extract:
    1) websiteType: e.g., "Medical Clinic", "Ecommerce", "Blog".
    2) authorityTerms: up to 5 key terms related to brand authority (certifications, ingredients, key specs).
    CONTENT:
    ${e.substring(0,6e3)}
    OUTPUT JSON: { "websiteType": "...", "authorityTerms": "comma separated terms" }
    `;return await W.runJson(t,"FLASH",{type:K,properties:{websiteType:{type:J},authorityTerms:{type:J}}})},cY=async(e,t)=>{let r=Date.now(),n=z(t),i=(({content:e,targetAudience:t,languageInstruction:r})=>`
    Analyze the reference text to extract the Narrative Structure.
    
    1) The H1 title and introductory paragraph (first paragraph after H1).
    2) A Logical Outline (H2 -> H3) with narrative goals.
    3) Key information points (Facts) for each section.
    4) Key information points (General) to preserve.
    5) **Sentence Feature Analysis**:
       - Analyze how sentences BEGIN in each section (common starters, transition words).
       - Analyze how sentences END in each section (punctuation patterns, concluding intent, common closing phrases).

    <TargetAudience>
    ${t}
    </TargetAudience>
    DEFINITION: The target region.
    
    <LanguageInstruction>
    ${r}
    </LanguageInstruction>
    DEFINITION: Output language.

    STRICT HEADING RULES:
    - Enumerate EVERY H2 and its child H3s in order from the reference.
    - Use the exact heading text as it appears (do NOT rewrite, paraphrase, translate, or renumber).
    - Keep awkward wording or punctuation intact; only trim whitespace.
    - If no clear headings exist, infer concise H2s, otherwise never replace existing ones.
    
    SECTION RELEVANCE FILTER:
    - If a section title is IRRELEVANT to the main article topic (e.g., "ç›®éŒ„", "å°Žè¦½", "æ¸…å–®", "å»¶ä¼¸é–±è®€", "ç›¸é—œæ–‡ç« ", unrelated sidebar), mark it with difficulty: "unclear" AND set "exclude": true.
    - Specifically for "ç›®éŒ„" (Table of Contents), ALWAYS set "exclude": true.
    - Excluded sections will be REMOVED from the generated outline.
    - Only include sections that contribute to the main content.

    MANDATORY KEY FACTS:
    - For EVERY section you include, you MUST extract at least 3-5 "keyFacts" from the reference text.
    - A "keyFact" is a specific, verifiable piece of information (numbers, technical specs, specific benefits).
    - If you return a section with empty "keyFacts", your response will be rejected.
    
    âš ï¸ NEGATIVE SIGNAL DETECTION(CRITICAL):
    When analyzing each section, carefully identify NEGATIVE SIGNALS - content that should NOT be included in that section. These include:
    - Phrases like "ä¸æ‡‰åœ¨æ­¤è™•", "æ‡‰æ–¼...æåŠ" (content that belongs elsewhere)
    - Off-topic sidebars
    
        IMPORTANT: Any negative instruction or off-topic content MUST go into the "suppress" array.
    
    <ContentToAnalyze>
    ${e}
    </ContentToAnalyze>
    DEFINITION: The reference text.

    STRICT OUTPUT RULES:
    1. For every active section (exclude: false), you MUST provide a detailed "narrativePlan" (3+ points) and "keyFacts" (2+ facts).
    2. NEVER leave "narrativePlan", "coreQuestion", or "keyFacts" as empty arrays/strings for relevant sections.
    3. If the reference content is sparse, use your expert knowledge to infer a logical plan and relevant facts that fit the topic.
    
    OUTPUT JSON:
    {
      "h1Title": "Exact H1 title text",
      "introText": "The first paragraph/intro text after H1 (if available)",
      "structure": [
        {
          "title": "Exact H2 text (no rewrite)",
          "subheadings": ["Exact H3 text 1", "Exact H3 text 2"],
          "narrativePlan": ["Positive guidance 1", "Positive guidance 2"],
          "coreQuestion": "Main question/problem",
          "difficulty": "easy | medium | unclear",
          "exclude": false,
          "excludeReason": "Only set if exclude=true",
          "writingMode": "direct | multi_solutions",
          "solutionAngles": ["angle 1", "angle 2"],
          "keyFacts": ["Fact 1", "Fact 2"],
          "uspNotes": ["USP relevant to this section"],
          "isChecklist": false,
          "suppress": ["Negative constraint 1"],
          "augment": ["Content to add"],
          "sentenceStartFeatures": ["Observed patterns for sentence beginnings"],
          "sentenceEndFeatures": ["Observed patterns for sentence endings (e.g., concludes with a question, uses specific punctuation, ends with a call to action)"]
        }
      ],
      "keyInformationPoints": ["General key fact 1", "General key fact 2"]
    }
    `)({content:e,targetAudience:t,languageInstruction:n}),s=(({content:e,targetAudience:t,languageInstruction:r})=>`
    Analyze the reference text to extract the Voice and Brand Strategy.

    1) Voice & Tone (General Plan).
    2) Conversion Strategy (Offers, CTAs, Risk Reversals).
    3) Brand Exclusive Points (USP).
    4) Competitor Names/Products to suppress. (CRITICAL: Do NOT list the region name "${t}" itself as a competitor).
    5) **Regional Entities Detection**: CRITICAL - Identify ALL brands, stores, services, or entities that are SPECIFIC to a different region and NOT available in the target region "${t}".
       - For zh-HK target: Detect Taiwan-specific brands (å¦‚ï¼šå¯¶é›…ã€å…¨è¯ã€momoè³¼ç‰©ã€è¦çš®å°ç£), Taiwan fashion brands, Taiwan chain stores.
       - For zh-TW target: Detect Hong Kong-specific brands (å¦‚ï¼šHKTVmallã€ç™¾ä½³ã€æƒ åº·ã€sasa), HK chain stores.
       - These should be added to competitorBrands or competitorProducts even if they are not direct competitors.
    6) Regional Validity (Brand Availability).
    7) Human Writing Characteristics.

    <TargetAudience>
    ${t}
    </TargetAudience>
    DEFINITION: The target region. ALL entities not available in this region should be flagged as competitorBrands/Products.
    
    <LanguageInstruction>
    ${r}
    </LanguageInstruction>
    DEFINITION: Output language.

    <ContentToAnalyze>
    ${e}
    </ContentToAnalyze>
    DEFINITION: The reference text to analyze.

    ## Voice Strategy Analysis
    - ** regionVoiceDetect **: Analyze the "Regional Voice Composition" of the text (e.g., usage of regional slang like "åœ°é“/è²¼åœ°" for HK vs "æŽ¥åœ°æ°£" for TW).
      - Calculate an approximate PERCENTAGE breakdown.
      - Return a string like: "70% HK / 30% TW" or "100% TW".
      - If uncertain or neutral, return "Neutral / Unclear".
    - ** humanWritingVoice **: Analyze the first 300 words (or the full Intro Paragraph). Explain "Why does this sound HUMAN?" by following these 5 steps:
      1. **Emotions & Subjectivity**: Identify subjective judgments/cultural evaluations (unlike AI's objective tone).
      2. **Tone & Particles**: Look for sentence-final particles (èªžåŠ©è©ž like å–”, å”·) that create intimacy.
      3. **Persona & Self-Ref**: Does the writer refer to themselves (e.g. "Dr. X") or assume a character?
      4. **Cultural Metaphors**: Does it link facts to cultural concepts (e.g. physiognomy/fortune telling é¢ç›¸) rather than just medical facts?
      5. **Social Intent**: Is there a call for interaction (save/share) vs just providing info?
      *Summarize these findings into a concise guide.*
    - ** competitorBrands **: List ALL brands that should be avoided, including:
      - Direct competitors mentioned in the text
      - **Region-specific brands/stores NOT available in ${t}** (e.g., Taiwan brands éŸŒ REN, Fashion for Yes, å¯¶é›… when targeting Hong Kong)
    - ** competitorProducts **: List ALL products that should be avoided or replaced.

    Return JSON only, no extra text or markdown fences.`)({content:e,targetAudience:t,languageInstruction:n});try{let[e,t]=await Promise.all([W.runJson(i,"FLASH",{type:K,properties:{h1Title:{type:J},introText:{type:J},keyInformationPoints:{type:q,items:{type:J}},structure:{type:q,items:{type:K,properties:{title:{type:J},narrativePlan:{type:q,items:{type:J}},coreQuestion:{type:J},difficulty:{type:J,description:"easy | medium | unclear"},exclude:{type:G},excludeReason:{type:J},writingMode:{type:J,description:"direct | multi_solutions"},solutionAngles:{type:q,items:{type:J}},subheadings:{type:q,items:{type:J}},keyFacts:{type:q,items:{type:J}},uspNotes:{type:q,items:{type:J}},isChecklist:{type:G},suppress:{type:q,items:{type:J}},augment:{type:q,items:{type:J}},sentenceStartFeatures:{type:q,items:{type:J}},sentenceEndFeatures:{type:q,items:{type:J}}},required:["title","narrativePlan","coreQuestion","writingMode","keyFacts"]}}},required:["h1Title","introText","structure","keyInformationPoints"]}),W.runJson(s,"FLASH",{type:K,properties:{generalPlan:{type:q,items:{type:J}},conversionPlan:{type:q,items:{type:J}},brandExclusivePoints:{type:q,items:{type:J}},competitorBrands:{type:q,items:{type:J}},competitorProducts:{type:q,items:{type:J}},regionVoiceDetect:{type:J},humanWritingVoice:{type:J}},required:["generalPlan","conversionPlan","brandExclusivePoints","regionVoiceDetect","humanWritingVoice"]})]),n=e.data,a=t.data;console.log("[RefAnalysis] Raw AI Structure Data:",JSON.stringify(n,null,2)),console.log("[RefAnalysis] Raw AI Voice Data:",JSON.stringify(a,null,2));let o=(n.structure||[]).filter(e=>!0===e.exclude?(console.log(`[RefAnalysis] AI Excluded section: "${e.title}" - Reason: ${e.excludeReason||"irrelevant"}`),!1):!["ç›®éŒ„","å°Žè¦½","æ¸…å–®","å¼•è¨€","å»¶ä¼¸é–±è®€","ç›¸é—œæ–‡ç« ","Table of Contents","TOC","Introduction"].some(t=>e.title.includes(t)&&e.title.length<15)||(console.log(`[RefAnalysis] Auto-Excluding navigational section: "${e.title}"`),!1)).map(e=>{let t={...e,subheadings:Array.isArray(e.subheadings)?e.subheadings:[],keyFacts:Array.isArray(e.keyFacts)?e.keyFacts:[],uspNotes:Array.isArray(e.uspNotes)?e.uspNotes:[],suppress:Array.isArray(e.suppress)?e.suppress:[],augment:Array.isArray(e.augment)?e.augment:[],narrativePlan:Array.isArray(e.narrativePlan)?e.narrativePlan:[],sentenceStartFeatures:Array.isArray(e.sentenceStartFeatures)?e.sentenceStartFeatures:[],sentenceEndFeatures:Array.isArray(e.sentenceEndFeatures)?e.sentenceEndFeatures:[]};if(0===t.narrativePlan.length||0===t.keyFacts.length)throw console.error(`[RefAnalysis] Section "${e.title}" failed validation: Missing Narrative Plan or Key Facts.`),Error(`Invalid Narrative Structure: Section "${e.title}" is missing required content (Plan/Facts).`);return t}),l=[...a.competitorBrands||[],...a.competitorProducts||[]],d={inputTokens:(e.usage?.inputTokens||0)+(t.usage?.inputTokens||0),outputTokens:(e.usage?.outputTokens||0)+(t.usage?.outputTokens||0),totalTokens:(e.usage?.totalTokens||0)+(t.usage?.totalTokens||0)},c={inputCost:(e.cost?.inputCost||0)+(t.cost?.inputCost||0),outputCost:(e.cost?.outputCost||0)+(t.cost?.outputCost||0),totalCost:(e.cost?.totalCost||0)+(t.cost?.totalCost||0)};return{data:{h1Title:n.h1Title||"",introText:n.introText||"",structure:o,keyInformationPoints:n.keyInformationPoints||[],generalPlan:a.generalPlan||[],conversionPlan:a.conversionPlan||[],brandExclusivePoints:a.brandExclusivePoints||[],replacementRules:l,competitorBrands:a.competitorBrands||[],competitorProducts:a.competitorProducts||[],regionVoiceDetect:a.regionVoiceDetect,humanWritingVoice:a.humanWritingVoice},usage:d,cost:c,duration:Date.now()-r}}catch(e){return console.error("Structure analysis failed",e),{data:{structure:[],generalPlan:[],conversionPlan:[],keyInformationPoints:[],brandExclusivePoints:[],replacementRules:[],competitorBrands:[],competitorProducts:[]},usage:E(0),cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-r}}},cX=["pro_content_writer_analysis","pro_content_writer_generation","ai_writer_editor_autosave_v1"],cQ="pro_content_writer_inputs_simple_v4",c0={get url(){return`file://${e.P("src/services/engine/embeddingService.ts")}`}},c1=c0.env?c0.env:n.default.env,c2=e=>Array.isArray(e)?e:null,c4=e=>{if(!Array.isArray(e))return null;let t=e.map(e=>c2(e)).filter(Boolean);return t.length?t:null},c5=async(e,t={})=>{if(!Array.isArray(e)||0===e.length)return[];let r={};t.taskType&&(r.taskType=t.taskType),t.outputDimensionality&&(r.outputDimensionality=t.outputDimensionality);let n={texts:e,model:_};t.taskType&&(n.taskType=t.taskType),t.outputDimensionality&&(n.outputDimensionality=t.outputDimensionality),Object.keys(r).length>0&&(n.providerOptions={google:r});let i=c1.VITE_AI_TOKEN||c1.AI_TOKEN,s={"Content-Type":"application/json"};i&&(s.Authorization=`Bearer ${i}`);let a=await fetch(L("/embed"),{method:"POST",headers:s,body:JSON.stringify(n),...t.signal?{signal:t.signal}:{}}),o=(a.headers.get("content-type")||"").includes("application/json");if(!a.ok){let e=o?await a.json().catch(()=>void 0):await a.text(),t="string"==typeof e?e:e?.error||JSON.stringify(e||"");throw Error(`Failed to fetch embeddings: ${a.status} ${t||""}`.trim())}let l=(e=>{if(!e)return[];let t=c4(e.embeddings);if(t)return t;let r=e.data,n=c4(r?.embeddings);if(n)return n;if(Array.isArray(r)){let e=r.map(e=>c4(e?.embeddings)?.[0]||c2(e?.embedding)||c2(e)).filter(Boolean);if(e.length)return e}let i=c2(e.embedding)||c2(r?.embedding)||c2(r);return i?[i]:[]})(o?await a.json():{embeddings:[]});if(!l.length)throw Error("Embedding response did not include vectors");return l.length!==e.length?e.map((e,t)=>l[t]||[]):l},c6=(e,t)=>{if(!e?.length||!t?.length||e.length!==t.length)return 0;let r=0,n=0,i=0;for(let s=0;s<e.length;s++)r+=e[s]*t[s],n+=e[s]*e[s],i+=t[s]*t[s];let s=Math.sqrt(n)*Math.sqrt(i);return 0===s?0:r/s},c3=e=>e.split(/\n\s*\n+/).map(e=>e.trim()).filter(Boolean),c9=({value:e,onChange:t,onCommit:r})=>{let[n,a]=s.default.useState(e);s.default.useEffect(()=>{a(e)},[e]);let o=()=>{r(n)};return(0,i.jsx)("input",{type:"number",min:"0",max:"1",step:"0.01",value:n,onChange:e=>{a(e.target.value),t(e.target.value)},onBlur:o,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),o())},className:"w-24 px-2 py-1 text-[11px] border border-gray-200 rounded-lg text-gray-800 shadow-inner"})},c7=({onGenerate:e,onGenerateSections:t,isGenerating:r,isWriting:n=!1,canGenerateSections:a=!1,currentStep:o,onAddCost:l,savedProfiles:d=[],setSavedProfiles:c,activeProfile:u,onSetActiveProfile:h,inputType:m,setInputType:f,brandKnowledge:g="",onShowPlan:y,hasPlan:x=!1})=>{let{register:b,handleSubmit:v,setValue:k,watchedValues:w,errors:N,productMode:$,setProductMode:S,isSummarizingProduct:j,setIsSummarizingProduct:T,refCharCount:I,refWordCount:C,scrapedImages:A,setScrapedImages:O,isFetchingUrl:E,fetchAndPopulate:M,createProfile:z,updateProfile:P,deleteProfile:D,applyProfileToForm:R,loadProductFromProfile:L,usableImages:U,handleClear:F}=(({brandKnowledge:e="",savedProfiles:t=[],setSavedProfiles:r,activeProfile:n,onSetActiveProfile:i,setInputType:a})=>{let{register:o,handleSubmit:l,setValue:d,watch:c,reset:u,formState:{errors:p}}=function(e={}){let t=s.default.useRef(void 0),r=s.default.useRef(void 0),[n,i]=s.default.useState({isDirty:!1,isValidating:!1,isLoading:eq(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:eq(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!eq(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{let{formControl:r,...i}=function(e={}){let t,r={...td,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:eq(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},i={},s=(ej(r.defaultValues)||ej(r.values))&&e_(r.defaultValues||r.values)||{},a=r.shouldUnregister?{}:e_(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d=0,c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},u={...c},p={array:eW(),state:eW()},h="all"===r.criteriaMode,m=async e=>{if(!r.disabled&&(c.isValid||u.isValid||e)){let e=r.resolver?eK((await x()).errors):await v(i,!0);e!==n.isValid&&p.state.next({isValid:e})}},f=(e,t)=>{!r.disabled&&(c.isValidating||c.validatingFields||u.isValidating||u.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?eE(n.validatingFields,e,t):eY(n.validatingFields,e))}),p.state.next({validatingFields:n.validatingFields,isValidating:!eK(n.validatingFields)}))},g=(e,t,r,n)=>{let l=eO(i,e);if(l){let i=eO(a,e,eI(r)?eO(s,e):r);eI(i)||n&&n.defaultChecked||t?eE(a,e,t?i:e9(l._f)):N(e,i),o.mount&&!o.action&&m()}},y=(e,t,i,a,o)=>{let l=!1,d=!1,h={name:e};if(!r.disabled){if(!i||a){(c.isDirty||u.isDirty)&&(d=n.isDirty,n.isDirty=h.isDirty=k(),l=d!==h.isDirty);let r=eB(eO(s,e),t);d=!!eO(n.dirtyFields,e),r?eY(n.dirtyFields,e):eE(n.dirtyFields,e,!0),h.dirtyFields=n.dirtyFields,l=l||(c.dirtyFields||u.dirtyFields)&&!r!==d}if(i){let t=eO(n.touchedFields,e);t||(eE(n.touchedFields,e,i),h.touchedFields=n.touchedFields,l=l||(c.touchedFields||u.touchedFields)&&t!==i)}l&&o&&p.state.next(h)}return l?h:{}},x=async e=>{f(e,!0);let t=await r.resolver(a,r.context,((e,t,r,n)=>{let i={};for(let r of e){let e=eO(t,r);e&&eE(i,r,e._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}})(e||l.mount,i,r.criteriaMode,r.shouldUseNativeValidation));return f(e),t},b=async e=>{let{errors:t}=await x(e);if(e)for(let r of e){let e=eO(t,r);e?eE(n.errors,r,e):eY(n.errors,r)}else n.errors=t;return t},v=async(e,t,i={valid:!0})=>{for(let s in e){let o=e[s];if(o){let{_f:e,...s}=o;if(e){let s=l.array.has(e.name),d=o._f&&tt(o._f);d&&c.validatingFields&&f([e.name],!0);let u=await tl(o,l.disabled,a,h,r.shouldUseNativeValidation&&!t,s);if(d&&c.validatingFields&&f([e.name]),u[e.name]&&(i.valid=!1,t))break;t||(eO(u,e.name)?s?ts(n.errors,u,e.name):eE(n.errors,e.name,u[e.name]):eY(n.errors,e.name))}eK(s)||await v(s,t,i)}}return i.valid},k=(e,t)=>!r.disabled&&(e&&t&&eE(a,e,t),!eB(I(),s)),w=(e,t,r)=>{var n,i;return n=l,i={...o.mount?a:eI(t)?s:eF(e)?{[e]:t}:t},eF(e)?(r&&n.watch.add(e),eO(i,e,t)):Array.isArray(e)?e.map(e=>(r&&n.watch.add(e),eO(i,e))):(r&&(n.watchAll=!0),i)},N=(e,t,r={})=>{let n=eO(i,e),s=t;if(n){let r=n._f;r&&(r.disabled||eE(a,e,e5(t,r)),s=eJ(r.ref)&&eS(t)?"":t,"select-multiple"===r.ref.type?[...r.ref.options].forEach(e=>e.selected=s.includes(e.value)):r.refs?"checkbox"===r.ref.type?r.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(s)?e.checked=!!s.find(t=>t===e.value):e.checked=s===e.value||!!s)}):r.refs.forEach(e=>e.checked=e.value===s):"file"===r.ref.type?r.ref.value="":(r.ref.value=s,r.ref.type||p.state.next({name:e,values:e_(a)})))}(r.shouldDirty||r.shouldTouch)&&y(e,s,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&_(e)},$=(e,t,r)=>{for(let n in t){if(!t.hasOwnProperty(n))return;let s=t[n],a=e+"."+n,o=eO(i,a);(l.array.has(e)||ej(s)||o&&!o._f)&&!e$(s)?$(a,s,r):N(a,s,r)}},S=(e,t,r={})=>{let d=eO(i,e),h=l.array.has(e),m=e_(t);eE(a,e,m),h?(p.array.next({name:e,values:e_(a)}),(c.isDirty||c.dirtyFields||u.isDirty||u.dirtyFields)&&r.shouldDirty&&p.state.next({name:e,dirtyFields:e0(s,a),isDirty:k(e,m)})):!d||d._f||eS(m)?N(e,m,r):$(e,m,r),tr(e,l)&&p.state.next({...n,name:e}),p.state.next({name:o.mount?e:void 0,values:e_(a)})},j=async e=>{o.mount=!0;let s=e.target,g=s.name,b=!0,k=eO(i,g),w=e=>{b=Number.isNaN(e)||e$(e)&&isNaN(e.getTime())||eB(e,eO(a,g,e))},N=e8(r.mode),$=e8(r.reValidateMode);if(k){let o,M,z,P,D=s.type?e9(k._f):ej(o=e)&&o.target?"checkbox"===o.target.type?o.target.checked:o.target.value:o,R="blur"===e.type||"focusout"===e.type,L=!((P=k._f).mount&&(P.required||P.min||P.max||P.maxLength||P.minLength||P.pattern||P.validate))&&!r.resolver&&!eO(n.errors,g)&&!k._f.deps||(S=R,j=eO(n.touchedFields,g),T=n.isSubmitted,I=$,!(C=N).isOnAll&&(!T&&C.isOnTouch?!(j||S):(T?I.isOnBlur:C.isOnBlur)?!S:(T?!I.isOnChange:!C.isOnChange)||S)),U=tr(g,l,R);eE(a,g,D),R?s&&s.readOnly||(k._f.onBlur&&k._f.onBlur(e),t&&t(0)):k._f.onChange&&k._f.onChange(e);let F=y(g,D,R),Z=!eK(F)||U;if(R||p.state.next({name:g,type:e.type,values:e_(a)}),L)return(c.isValid||u.isValid)&&("onBlur"===r.mode?R&&m():R||m()),Z&&p.state.next({name:g,...U?{}:F});if(!R&&U&&p.state.next({...n}),r.resolver){let{errors:e}=await x([g]);if(w(D),b){let t=ti(n.errors,i,g),r=ti(e,i,t.name||g);M=r.error,g=r.name,z=eK(e)}}else f([g],!0),M=(await tl(k,l.disabled,a,h,r.shouldUseNativeValidation))[g],f([g]),w(D),b&&(M?z=!1:(c.isValid||u.isValid)&&(z=await v(i,!0)));if(b){k._f.deps&&(!Array.isArray(k._f.deps)||k._f.deps.length>0)&&_(k._f.deps);var S,j,T,I,C,A=g,O=z,E=M;let e=eO(n.errors,A),i=(c.isValid||u.isValid)&&"boolean"==typeof O&&n.isValid!==O;if(r.delayError&&E){let e;e=()=>{eE(n.errors,A,E),p.state.next({errors:n.errors})},(t=t=>{clearTimeout(d),d=setTimeout(e,t)})(r.delayError)}else clearTimeout(d),t=null,E?eE(n.errors,A,E):eY(n.errors,A);if((E?!eB(e,E):e)||!eK(F)||i){let e={...F,...i&&"boolean"==typeof O?{isValid:O}:{},errors:n.errors,name:A};n={...n,...e},p.state.next(e)}}}},T=(e,t)=>{if(eO(n.errors,t)&&e.focus)return e.focus(),1},_=async(e,t={})=>{let s,a,o=eH(e);if(r.resolver){let t=await b(eI(e)?e:o);s=eK(t),a=e?!o.some(e=>eO(t,e)):s}else e?((a=(await Promise.all(o.map(async e=>{let t=eO(i,e);return await v(t&&t._f?{[e]:t}:t)}))).every(Boolean))||n.isValid)&&m():a=s=await v(i);return p.state.next({...!eF(e)||(c.isValid||u.isValid)&&s!==n.isValid?{}:{name:e},...r.resolver||!e?{isValid:s}:{},errors:n.errors}),t.shouldFocus&&!a&&tn(i,T,e?o:l.mount),a},I=(e,t)=>{let r={...o.mount?a:s};return t&&(r=function e(t,r){let n={};for(let i in t)if(t.hasOwnProperty(i)){let s=t[i],a=r[i];if(s&&ej(s)&&a){let t=e(s,a);ej(t)&&(n[i]=t)}else t[i]&&(n[i]=a)}return n}(t.dirtyFields?n.dirtyFields:n.touchedFields,r)),eI(e)?r:eF(e)?eO(r,e):e.map(e=>eO(r,e))},C=(e,t)=>({invalid:!!eO((t||n).errors,e),isDirty:!!eO((t||n).dirtyFields,e),error:eO((t||n).errors,e),isValidating:!!eO(n.validatingFields,e),isTouched:!!eO((t||n).touchedFields,e)}),A=(e,t,r)=>{let s=(eO(i,e,{_f:{}})._f||{}).ref,{ref:a,message:o,type:l,...d}=eO(n.errors,e)||{};eE(n.errors,e,{...d,...t,ref:s}),p.state.next({name:e,errors:n.errors,isValid:!1}),r&&r.shouldFocus&&s&&s.focus&&s.focus()},O=e=>p.state.subscribe({next:t=>{let r,i,o;r=e.name,i=t.name,o=e.exact,(!r||!i||r===i||eH(r).some(e=>e&&(o?e===i:e.startsWith(i)||i.startsWith(e))))&&((e,t,r,n)=>{r(e);let{name:i,...s}=e;return eK(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(e=>t[e]===(!n||"all"))})(t,e.formState||c,U,e.reRenderRoot)&&e.callback({values:{...a},...n,...t,defaultValues:s})}}).unsubscribe,E=(e,t={})=>{for(let o of e?eH(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(eY(i,o),eY(a,o)),t.keepError||eY(n.errors,o),t.keepDirty||eY(n.dirtyFields,o),t.keepTouched||eY(n.touchedFields,o),t.keepIsValidating||eY(n.validatingFields,o),r.shouldUnregister||t.keepDefaultValue||eY(s,o);p.state.next({values:e_(a)}),p.state.next({...n,...!t.keepDirty?{}:{isDirty:k()}}),t.keepIsValid||m()},M=({disabled:e,name:t})=>{("boolean"==typeof e&&o.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},z=(e,t={})=>{let n=eO(i,e),a="boolean"==typeof t.disabled||"boolean"==typeof r.disabled;return(eE(i,e,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),n)?M({disabled:"boolean"==typeof t.disabled?t.disabled:r.disabled,name:e}):g(e,!0,t.value),{...a?{disabled:t.disabled||r.disabled}:{},...r.progressive?{required:!!t.required,min:e7(t.min),max:e7(t.max),minLength:e7(t.minLength),maxLength:e7(t.maxLength),pattern:e7(t.pattern)}:{},name:e,onChange:j,onBlur:j,ref:a=>{if(a){let r;z(e,t),n=eO(i,e);let o=eI(a.value)&&a.querySelectorAll&&a.querySelectorAll("input,select,textarea")[0]||a,l="radio"===(r=o).type||"checkbox"===r.type,d=n._f.refs||[];(l?d.find(e=>e===o):o===n._f.ref)||(eE(i,e,{_f:{...n._f,...l?{refs:[...d.filter(eG),o,...Array.isArray(eO(s,e))?[{}]:[]],ref:{type:o.type,name:e}}:{ref:o}}}),g(e,!1,void 0,o))}else{var d;(n=eO(i,e,{}))._f&&(n._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(d=l.array,!d.has(e.substring(0,e.search(/\.\d+(\.|$)/))||e)||!o.action)&&l.unMount.add(e)}}}},P=()=>r.shouldFocusError&&tn(i,T,l.mount),D=(e,t)=>async s=>{let o;s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let d=e_(a);if(p.state.next({isSubmitting:!0}),r.resolver){let{errors:e,values:t}=await x();n.errors=e,d=e_(t)}else await v(i);if(l.disabled.size)for(let e of l.disabled)eY(d,e);if(eY(n.errors,"root"),eK(n.errors)){p.state.next({errors:{}});try{await e(d,s)}catch(e){o=e}}else t&&await t({...n.errors},s),P(),setTimeout(P);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:eK(n.errors)&&!o,submitCount:n.submitCount+1,errors:n.errors}),o)throw o},R=(e,t={})=>{let d=e?e_(e):s,u=e_(d),h=eK(e),m=h?s:u;if(t.keepDefaultValues||(s=d),!t.keepValues){if(t.keepDirtyValues)for(let e of Array.from(new Set([...l.mount,...Object.keys(e0(s,a))])))eO(n.dirtyFields,e)?eE(m,e,eO(a,e)):S(e,eO(m,e));else{if(eT&&eI(e))for(let e of l.mount){let t=eO(i,e);if(t&&t._f){let e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(eJ(e)){let t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(let e of l.mount)S(e,eO(m,e));else i={}}a=r.shouldUnregister?t.keepDefaultValues?e_(s):{}:e_(m),p.array.next({values:{...m}}),p.state.next({values:{...m}})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!c.isValid||!!t.keepIsValid||!!t.keepDirtyValues||!r.shouldUnregister&&!eK(m),o.watch=!!r.shouldUnregister,p.state.next({submitCount:t.keepSubmitCount?n.submitCount:0,isDirty:!h&&(t.keepDirty?n.isDirty:!!(t.keepDefaultValues&&!eB(e,s))),isSubmitted:!!t.keepIsSubmitted&&n.isSubmitted,dirtyFields:h?{}:t.keepDirtyValues?t.keepDefaultValues&&a?e0(s,a):n.dirtyFields:t.keepDefaultValues&&e?e0(s,e):t.keepDirty?n.dirtyFields:{},touchedFields:t.keepTouched?n.touchedFields:{},errors:t.keepErrors?n.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&n.isSubmitSuccessful,isSubmitting:!1,defaultValues:s})},L=(e,t)=>R(eq(e)?e(a):e,t),U=e=>{n={...n,...e}},F={control:{register:z,unregister:E,getFieldState:C,handleSubmit:D,setError:A,_subscribe:O,_runSchema:x,_focusError:P,_getWatch:w,_getDirty:k,_setValid:m,_setFieldArray:(e,t=[],l,d,h=!0,m=!0)=>{if(d&&l&&!r.disabled){if(o.action=!0,m&&Array.isArray(eO(i,e))){let t=l(eO(i,e),d.argA,d.argB);h&&eE(i,e,t)}if(m&&Array.isArray(eO(n.errors,e))){let t,r=l(eO(n.errors,e),d.argA,d.argB);h&&eE(n.errors,e,r),eC(eO(t=n.errors,e)).length||eY(t,e)}if((c.touchedFields||u.touchedFields)&&m&&Array.isArray(eO(n.touchedFields,e))){let t=l(eO(n.touchedFields,e),d.argA,d.argB);h&&eE(n.touchedFields,e,t)}(c.dirtyFields||u.dirtyFields)&&(n.dirtyFields=e0(s,a)),p.state.next({name:e,isDirty:k(e,t),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else eE(a,e,t)},_setDisabledField:M,_setErrors:e=>{n.errors=e,p.state.next({errors:n.errors,isValid:!1})},_getFieldArray:e=>eC(eO(o.mount?a:s,e,r.shouldUnregister?eO(s,e,[]):[])),_reset:R,_resetDefaultValues:()=>eq(r.defaultValues)&&r.defaultValues().then(e=>{L(e,r.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(let e of l.unMount){let t=eO(i,e);t&&(t._f.refs?t._f.refs.every(e=>!eG(e)):!eG(t._f.ref))&&E(e)}l.unMount=new Set},_disableForm:e=>{"boolean"==typeof e&&(p.state.next({disabled:e}),tn(i,(t,r)=>{let n=eO(i,r);n&&(t.disabled=n._f.disabled||e,Array.isArray(n._f.refs)&&n._f.refs.forEach(t=>{t.disabled=n._f.disabled||e}))},0,!1))},_subjects:p,_proxyFormState:c,get _fields(){return i},get _formValues(){return a},get _state(){return o},set _state(value){o=value},get _defaultValues(){return s},get _names(){return l},set _names(value){l=value},get _formState(){return n},get _options(){return r},set _options(value){r={...r,...value}}},subscribe:e=>(o.mount=!0,u={...u,...e.formState},O({...e,formState:u})),trigger:_,register:z,handleSubmit:D,watch:(e,t)=>eq(e)?p.state.subscribe({next:r=>"values"in r&&e(w(void 0,t),r)}):w(e,t,!0),setValue:S,getValues:I,reset:L,resetField:(e,t={})=>{eO(i,e)&&(eI(t.defaultValue)?S(e,e_(eO(s,e))):(S(e,t.defaultValue),eE(s,e,e_(t.defaultValue))),t.keepTouched||eY(n.touchedFields,e),t.keepDirty||(eY(n.dirtyFields,e),n.isDirty=t.defaultValue?k(e,e_(eO(s,e))):k()),!t.keepError&&(eY(n.errors,e),c.isValid&&m()),p.state.next({...n}))},clearErrors:e=>{e&&eH(e).forEach(e=>eY(n.errors,e)),p.state.next({errors:e?n.errors:{}})},unregister:E,setError:A,setFocus:(e,t={})=>{let r=eO(i,e),n=r&&r._f;if(n){let e=n.refs?n.refs[0]:n.ref;e.focus&&(e.focus(),t.shouldSelect&&eq(e.select)&&e.select())}},getFieldState:C};return{...F,formControl:F}}(e);t.current={...i,formState:n}}let a=t.current.control;return a._options=e,eU(()=>{let e=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(e=>({...e,isReady:!0})),a._formState.isReady=!0,e},[a]),s.default.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),s.default.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),s.default.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),s.default.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),s.default.useEffect(()=>{if(a._proxyFormState.isDirty){let e=a._getDirty();e!==n.isDirty&&a._subjects.state.next({isDirty:e})}},[a,n.isDirty]),s.default.useEffect(()=>{var t;e.values&&!eB(e.values,r.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),(null==(t=a._options.resetOptions)?void 0:t.keepIsValid)||a._setValid(),r.current=e.values,i(e=>({...e}))):a._resetDefaultValues()},[a,e.values]),s.default.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=((e,t,r,n=!0)=>{let i={defaultValues:t._defaultValues};for(let s in e)Object.defineProperty(i,s,{get:()=>("all"!==t._proxyFormState[s]&&(t._proxyFormState[s]=!n||"all"),r&&(r[s]=!0),e[s])});return i})(n,a),t.current}({resolver:function(e,t,r){if(void 0===r&&(r={}),"_def"in e&&"object"==typeof e._def&&"typeName"in e._def)return function(t,n,i){try{return Promise.resolve(oI(function(){return Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](t,void 0)).then(function(e){return i.shouldUseNativeValidation&&tu({},i),{errors:{},values:r.raw?Object.assign({},t):e}})},function(e){if(Array.isArray(null==e?void 0:e.issues))return{values:{},errors:tp(function(e,t){for(var r={};e.length;){var n=e[0],i=n.code,s=n.message,a=n.path.join(".");if(!r[a])if("unionErrors"in n){var o=n.unionErrors[0].errors[0];r[a]={message:o.message,type:o.code}}else r[a]={message:s,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=r[a].types,d=l&&l[n.code];r[a]=eV(a,t,r,i,d?[].concat(d,n.message):n.message)}e.shift()}return r}(e.errors,!i.shouldUseNativeValidation&&"all"===i.criteriaMode),i)};throw e}))}catch(e){return Promise.reject(e)}};if("_zod"in e&&"object"==typeof e._zod)return function(t,n,i){try{return Promise.resolve(oI(function(){return Promise.resolve(("sync"===r.mode?r_:rC)(e,t,void 0)).then(function(e){return i.shouldUseNativeValidation&&tu({},i),{errors:{},values:r.raw?Object.assign({},t):e}})},function(e){if(e instanceof rv)return{values:{},errors:tp(function(e,t){for(var r={};e.length;){var n=e[0],i=n.code,s=n.message,a=n.path.join(".");if(!r[a])if("invalid_union"===n.code&&n.errors.length>0){var o=n.errors[0][0];r[a]={message:o.message,type:o.code}}else r[a]={message:s,type:i};if("invalid_union"===n.code&&n.errors.forEach(function(t){return t.forEach(function(t){return e.push(t)})}),t){var l=r[a].types,d=l&&l[n.code];r[a]=eV(a,t,r,i,d?[].concat(d,n.message):n.message)}e.shift()}return r}(e.issues,!i.shouldUseNativeValidation&&"all"===i.criteriaMode),i)};throw e}))}catch(e){return Promise.reject(e)}};throw Error("Invalid input: not a Zod schema")}(cR),defaultValues:{title:"",referenceContent:"",sampleOutline:"",authorityTerms:"",websiteType:"",targetAudience:"zh-TW",useRag:!1,autoImagePlan:!1,productRawText:"",urlInput:"",productUrlList:""}}),h=c(),[m,f]=(0,s.useState)("text"),[g,y]=(0,s.useState)(!1),[x,b]=(0,s.useState)(0),[v,k]=(0,s.useState)(0),{clearAll:w}={clearAll:({reload:e=!0,includeForm:t=!0}={})=>{try{let e=[...cX];t&&e.push("pro_content_writer_inputs_simple_v4"),e.forEach(e=>localStorage.removeItem(e)),sessionStorage.removeItem("autosave_restore_decision")}catch(e){console.warn("Failed to clear storage",e)}e&&window.location.reload()}},{scrapedImages:N,setScrapedImages:$,isFetchingUrl:S,fetchAndPopulate:j}=(({setValue:e,onAddCost:t,setInputType:r})=>{let[n,i]=(0,s.useState)([]),a=cH({mutationFn:async e=>{if(!e)throw Error("URL is required");let{title:t,content:r,images:n}=await cW(e);return{title:t,content:r,images:n}},onSuccess:async({title:n,content:s,images:a})=>{e("referenceContent",s),i(ev(a)),n&&e("title",n);try{let r=await cG(s);r.data.websiteType&&e("websiteType",r.data.websiteType),r.data.authorityTerms&&e("authorityTerms",r.data.authorityTerms),t&&t(r.cost,r.usage)}catch(e){console.warn("Failed to auto-extract brand info",e)}r("text")},onError:()=>{alert("Failed to fetch content from URL. The site might block bots.")}}),o=(0,s.useCallback)(async e=>{await a.mutateAsync(e)},[a]);return{scrapedImages:n,setScrapedImages:i,isFetchingUrl:a.isPending,fetchAndPopulate:o}})({setValue:d,setInputType:a}),{createProfile:T,updateProfile:_,deleteProfile:I,applyProfileToForm:C,loadProductFromProfile:A}=(({savedProfiles:e=[],setSavedProfiles:t,activeProfile:r,onSetActiveProfile:n,brandKnowledge:i,setValue:a})=>{let o=(0,s.useCallback)((r,s)=>{if(!t||!r.trim())return null;let a={id:Date.now().toString(),name:r.trim(),websiteType:s.websiteType||"",authorityTerms:s.authorityTerms||"",brandKnowledge:i||"",targetAudience:s.targetAudience,useRag:s.useRag,productRawText:s.productRawText};return t([...e,a]),n?.(a),a},[i,n,e,t]),l=(0,s.useCallback)(s=>{if(!t||!r)return null;let a=e.map(e=>e.id===r.id?{...e,websiteType:s.websiteType||"",authorityTerms:s.authorityTerms||"",targetAudience:s.targetAudience,useRag:s.useRag,productRawText:s.productRawText,brandKnowledge:i}:e);t(a);let o=a.find(e=>e.id===r.id)||null;return n?.(o),o},[r,i,n,e,t]),d=(0,s.useCallback)(i=>{t&&(t(e.filter(e=>e.id!==i)),r?.id===i&&n?.(null))},[r?.id,n,e,t]);return{createProfile:o,updateProfile:l,deleteProfile:d,applyProfileToForm:(0,s.useCallback)(e=>{a("websiteType",e.websiteType),a("authorityTerms",e.authorityTerms),a("targetAudience",e.targetAudience),void 0!==e.useRag&&a("useRag",e.useRag),e.productRawText?a("productRawText",e.productRawText):e.productBrief&&a("productRawText",`${e.productBrief.productName} - ${e.productBrief.usp}. Link: ${e.productBrief.ctaLink}`),n?.(e)},[n,a]),loadProductFromProfile:(0,s.useCallback)(e=>{e.productRawText?a("productRawText",e.productRawText):e.productBrief?a("productRawText",`${e.productBrief.productName} - ${e.productBrief.usp}. Link: ${e.productBrief.ctaLink}`):alert("This profile has no saved product/service details.")},[a])}})({savedProfiles:t,setSavedProfiles:r,activeProfile:n,onSetActiveProfile:i,brandKnowledge:e,setValue:d});(0,s.useEffect)(()=>{let e=localStorage.getItem(cQ);if(e)try{let t=JSON.parse(e);Object.keys(t).forEach(e=>{d(e,t[e])}),t.scrapedImages&&$(ev(t.scrapedImages))}catch(e){console.warn("Failed to restore persisted form",e)}},[$,d]),(0,s.useEffect)(()=>{let e=c(e=>{let t={...e,scrapedImages:N};localStorage.setItem(cQ,JSON.stringify(t));let r=e.referenceContent||"";b(r.length),k((r.match(/[\u4e00-\u9fa5]/g)||[]).length+r.replace(/[\u4e00-\u9fa5]/g," ").trim().split(/\s+/).filter(e=>e.length>0).length)});return()=>e.unsubscribe()},[N,c]),(0,s.useEffect)(()=>{n&&C(n)},[n,C]);let O=(0,s.useMemo)(()=>N.filter(e=>!e.ignored),[N]),E=(0,s.useCallback)(()=>{confirm("ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰è¼¸å…¥èˆ‡ç´€éŒ„å—Žï¼Ÿ\né€™æœƒé‡ç½®è¡¨å–®ã€åˆ†æžèˆ‡è‰ç¨¿ï¼Œä¸¦é‡æ–°æ•´ç†é é¢ã€‚")&&(u(),$([]),d("targetAudience","zh-TW"),w({reload:!0,includeForm:!0}))},[w,u,$,d]);return{register:o,handleSubmit:l,setValue:d,watchedValues:h,errors:p,productMode:m,setProductMode:f,isSummarizingProduct:g,setIsSummarizingProduct:y,refCharCount:x,refWordCount:v,scrapedImages:N,setScrapedImages:$,isFetchingUrl:S,fetchAndPopulate:j,createProfile:T,updateProfile:_,deleteProfile:I,applyProfileToForm:C,loadProductFromProfile:A,usableImages:O,handleClear:E}})({brandKnowledge:g,savedProfiles:d,setSavedProfiles:c,activeProfile:u,onSetActiveProfile:h,setInputType:f}),{isChunkModalOpen:Z,setIsChunkModalOpen:B,chunkPreview:V,chunkScores:H,isScoringChunks:W,isFilteringChunks:K,filterError:q,manualKeep:J,setManualKeep:G,openFilterModal:Y,applyFilter:X,semanticThreshold:Q,semanticThresholdInput:et,setSemanticThresholdInput:er,commitSemanticThreshold:en}=(()=>{let[e,t]=(0,s.useState)(!1),[r,n]=(0,s.useState)([]),[i,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null),[d,c]=(0,s.useState)([]),[u,p]=(0,s.useState)(!1),[h,m]=(0,s.useState)({}),[f,g]=(0,s.useState)(.79),[y,x]=(0,s.useState)("0.79"),b=(0,s.useCallback)(e=>{let t=("string"==typeof e?e:y).trim();if(""===t)return x(f.toString()),f;let r=parseFloat(t);if(Number.isNaN(r))return x(f.toString()),f;let n=Math.round(100*Math.min(1,Math.max(0,r)))/100;return g(n),x(n.toString()),n},[y,f]),v=(0,s.useCallback)(async(e,t)=>{if(!t)return l("è«‹å…ˆå¡«å¯«æ¨™é¡Œï¼Œå†è¨ˆç®—èªžæ„è·é›¢ã€‚"),null;p(!0),l(null);try{let[r,n]=await Promise.all([c5([t]),c5(e)]),i=r[0];if(!i?.length)throw Error("ç„¡æ³•å–å¾—æ¨™é¡Œå‘é‡ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚");let s=e.map((e,t)=>{let r=n[t];return r?.length?c6(i,r):1});return c(s),s}catch(e){return l(e?.message||"èªžæ„éŽæ¿¾å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚"),null}finally{p(!1)}},[]),k=(0,s.useCallback)((e,r)=>{let i=c3(e);i.length?(n(i),l(null),c([]),m({}),t(!0),v(i,r)):alert("æ‰¾ä¸åˆ°å¯ä»¥åˆ†æ®µçš„å…§å®¹ï¼ˆéœ€æœ‰ç©ºç™½è¡Œåˆ†éš”ï¼‰ã€‚")},[v]),w=(0,s.useCallback)(async(e,n)=>{let i=r.length?r:c3(e);if(!i.length)return l("æ‰¾ä¸åˆ°å¯ç”¨çš„æ®µè½ã€‚"),null;a(!0),l(null);try{let e=(d.length===i.length?d:null)||await v(i,n)||[];if(!e.length)return l("ç„¡æ³•å–å¾—èªžæ„è·é›¢ï¼Œè«‹ç¢ºèªæ¨™é¡Œèˆ‡ API è¨­å®šã€‚"),null;let r=i.filter((t,r)=>{let n=e[r]??1;return h[r]||n>=f}).join("\n\n").trim();return t(!1),r}catch(e){return l(e?.message||"èªžæ„éŽæ¿¾å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚"),null}finally{a(!1)}},[r,d,h,v,f]);return{isChunkModalOpen:e,setIsChunkModalOpen:t,chunkPreview:r,chunkScores:d,isScoringChunks:u,isFilteringChunks:i,filterError:o,manualKeep:h,setManualKeep:m,openFilterModal:k,applyFilter:w,semanticThreshold:f,semanticThresholdInput:y,setSemanticThresholdInput:x,commitSemanticThreshold:b,DEFAULT_SEMANTIC_THRESHOLD:.79}})(),ei=(0,s.useMemo)(()=>{let e=parseFloat(et);return Number.isNaN(e)?Q:Math.min(1,Math.max(0,e))},[et,Q]),es=(0,s.useMemo)(()=>ei.toFixed(2),[ei]),ea=async()=>{await M(w.urlInput||"")},ec=async()=>{let e=w.productUrlList;if(e?.trim()){T(!0);try{let t=e.split("\n").map(e=>e.trim()).filter(e=>e.length>0),r=await ee(t,w.targetAudience);k("productRawText",r.data),S("text"),l&&l(r.cost,r.usage),P({...w,productRawText:r.data})}catch(e){alert("Failed to summarize brand content.")}finally{T(!1)}}},eu=(0,s.useMemo)(()=>{let e=(w.title||"").trim().length>0,t=(w.referenceContent||"").trim().length>0;return e&&t&&!E&&!j},[w.title,w.referenceContent,E,j]),eh=async()=>{let e=(w.referenceContent||"").trim(),t=(w.title||"").trim();en();let r=await X(e,t);null!=r&&k("referenceContent",r)};return(0,i.jsxs)("div",{className:"flex flex-col h-full bg-slate-50/80 overflow-hidden font-sans",children:[(0,i.jsx)("div",{className:"p-4 pb-2 flex-shrink-0 border-b border-gray-100 bg-white/80 backdrop-blur-sm z-10",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-gray-800",children:[(0,i.jsx)(ew,{className:"w-4 h-4 text-blue-600"}),(0,i.jsx)("h2",{className:"text-sm font-bold tracking-tight",children:"Writer Config"})]}),(0,i.jsxs)("button",{onClick:F,className:"text-[10px] text-gray-400 hover:text-red-500 flex items-center gap-1 transition-colors px-2 py-1 hover:bg-red-50 rounded",children:[(0,i.jsx)(eo,{className:"w-3 h-3"})," Clear"]})]})}),(0,i.jsxs)("form",{onSubmit:v(t=>{let r=A.filter(e=>!e.ignored);e({title:t.title,referenceContent:t.referenceContent,sampleOutline:t.sampleOutline,authorityTerms:t.authorityTerms,websiteType:t.websiteType,targetAudience:t.targetAudience,useRag:t.useRag,autoImagePlan:t.autoImagePlan,productRawText:t.productRawText,brandKnowledge:void 0,scrapedImages:r})}),className:"flex-1 flex flex-col min-h-0 relative",children:[(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-6 pb-24",children:[(0,i.jsx)(el,{register:b,targetAudience:w.targetAudience,websiteType:w.websiteType,authorityTerms:w.authorityTerms,savedProfiles:d,activeProfile:u,brandKnowledge:g,onCreateProfile:e=>z(e,w),onUpdateProfile:()=>P(w),onDeleteProfile:D,onLoadProfile:e=>{R(e),S("text")}}),(0,i.jsx)(ef,{register:b,productMode:$,setProductMode:S,productRawText:w.productRawText,isSummarizingProduct:j,canAnalyzeFromUrls:!!w.productUrlList,savedProfiles:d,activeProfile:u,onCreateProfile:e=>z(e,w),onUpdateProfile:()=>P(w),onLoadProductFromProfile:e=>{L(e),S("text")},onAnalyzeFromUrls:ec}),(0,i.jsx)(ek,{register:b,errors:N,inputType:m,setInputType:f,urlValue:w.urlInput,refWordCount:C,refCharCount:I,scrapedImages:A,onToggleScrapedImage:e=>{let t=e.id||e.url||e.altText;O(e=>e.map((e,r)=>(e.id||e.url||e.altText||`${r}`)!==t?e:{...e,ignored:!e.ignored}))},onFetchUrl:ea,isFetchingUrl:E,onRequestSemanticFilter:()=>{let e=(w.referenceContent||"").trim(),t=(w.title||"").trim();e?Y(e,t):alert("å…ˆè²¼ä¸Šå…§å®¹å†åšèªžæ„éŽæ¿¾ã€‚")},canSemanticFilter:(w.referenceContent||"").trim().length>0}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("h3",{className:"text-[10px] font-bold uppercase text-gray-400 tracking-wider px-1 flex items-center gap-1",children:[(0,i.jsx)(eN,{className:"w-3 h-3"})," Advanced Settings"]}),(0,i.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_8px_rgba(0,0,0,0.02)] p-3 space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${w.useRag?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-400"}`,children:(0,i.jsx)(ed,{className:"w-4 h-4"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs font-bold text-gray-800",children:"Knowledge Base (RAG)"}),(0,i.jsx)("p",{className:"text-[10px] text-gray-500",children:"Use uploaded brand docs for accuracy"})]})]}),(0,i.jsx)("button",{type:"button",onClick:()=>k("useRag",!w.useRag),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 ${w.useRag?"bg-indigo-600":"bg-gray-200"}`,children:(0,i.jsx)("span",{className:`inline-block h-3.5 w-3.5 transform rounded-full bg-white transition ${w.useRag?"translate-x-4.5":"translate-x-1"}`})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${w.autoImagePlan?"bg-emerald-100 text-emerald-600":"bg-gray-100 text-gray-400"}`,children:(0,i.jsx)(ex,{className:"w-4 h-4"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs font-bold text-gray-800",children:"Auto Visual Plan"}),(0,i.jsx)("p",{className:"text-[10px] text-gray-500",children:"å¯«å®Œå¾Œè‡ªå‹•è¦åŠƒä¸¦ç”Ÿæˆåœ–ç‰‡"})]})]}),(0,i.jsx)("button",{type:"button",onClick:()=>k("autoImagePlan",!w.autoImagePlan),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 ${w.autoImagePlan?"bg-emerald-600":"bg-gray-200"}`,children:(0,i.jsx)("span",{className:`inline-block h-3.5 w-3.5 transform rounded-full bg-white transition ${w.autoImagePlan?"translate-x-4.5":"translate-x-1"}`})})]}),(0,i.jsx)("p",{className:"text-[10px] text-gray-500 px-1",children:"é—œé–‰å¯é¿å…å°šæœªæŒ‰ä¸‹åœ–ç‰‡ç”ŸæˆæŒ‰éˆ•æ™‚å°±æå‰è§¸ç™¼ã€‚"})]})]})]}),(0,i.jsx)("div",{className:"p-4 border-t border-gray-100 bg-white/80 backdrop-blur-sm z-10",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("button",{type:"submit",disabled:r||n||!eu,className:`w-full py-3 rounded-xl text-sm font-bold shadow-lg shadow-blue-500/20 flex items-center justify-center gap-2 transition-all transform active:scale-[0.98] ${r||n||!eu?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:shadow-blue-500/30 hover:brightness-110"}`,children:r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ep,{className:"w-4 h-4 animate-spin"}),(0,i.jsxs)("span",{children:[o.replace(/_/g," ").toUpperCase(),"..."]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(em,{className:"w-4 h-4"}),(0,i.jsx)("span",{children:"Step 1ï¼šåˆ†æž (ä¾›å¯©é–±)"})]})}),(0,i.jsxs)("button",{type:"button",onClick:y,disabled:!x,className:`w-full py-2.5 rounded-xl text-sm font-semibold flex items-center justify-center gap-2 transition-all border ${x?"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100":"text-gray-400 bg-gray-50 border-gray-100 cursor-not-allowed"}`,children:[(0,i.jsx)(ew,{className:"w-4 h-4"}),(0,i.jsx)("span",{children:"æª¢è¦–æ®µè½è¨ˆåŠƒ"})]}),(0,i.jsx)("p",{className:"text-[11px] text-gray-500 text-center",children:"å…ˆå®Œæˆåˆ†æžä¸¦æª¢è¦–çµæžœ (å´æ¬„) ï¼Œç¢ºèªå¾Œå†ç”Ÿæˆå…§æ–‡æ®µè½ã€‚"})]})})]}),Z&&(0,i.jsx)("div",{className:"fixed inset-0 z-50 bg-black/25 backdrop-blur-sm flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white w-full max-w-3xl rounded-2xl shadow-2xl border border-gray-100 overflow-hidden flex flex-col max-h-[85vh]",children:[(0,i.jsxs)("div",{className:"px-5 py-4 border-b border-gray-100 flex items-start justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-bold text-gray-900",children:"èªžæ„éŽæ¿¾åˆ†æ®µç¢ºèª"}),(0,i.jsxs)("p",{className:"text-[11px] text-gray-500 mt-0.5",children:["ä»¥ç©ºç™½è¡Œåˆ†æ®µï¼Œé¡¯ç¤ºèˆ‡æ¨™é¡Œçš„èªžæ„ç›¸ä¼¼åº¦ (é–¾å€¼ ",es,")."]})]}),(0,i.jsx)("button",{type:"button",className:"text-xs text-gray-400 hover:text-gray-600",onClick:()=>B(!1),disabled:K,children:"âœ•"})]}),(0,i.jsxs)("div",{className:"p-5 space-y-3 overflow-y-auto flex-1 custom-scrollbar",children:[V.map((e,t)=>(0,i.jsxs)("div",{className:"border border-gray-100 rounded-lg p-3 bg-gray-50/60",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between text-[11px] text-gray-500 mb-1",children:[(0,i.jsxs)("span",{className:"font-semibold text-gray-700",children:["Chunk ",t+1]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("button",{type:"button",onClick:()=>G(e=>({...e,[t]:!e[t]})),className:`px-2 py-0.5 rounded-full border text-[10px] font-semibold transition-colors ${J[t]?"border-blue-200 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-500 hover:border-blue-200 hover:text-blue-600"}`,children:J[t]?"æ‰‹å‹•é€šéŽ":"æ‰‹å‹•é€šéŽï¼Ÿ"}),"number"!=typeof H[t]||Number.isNaN(H[t])?(0,i.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full border border-gray-200 text-[10px] text-gray-500 bg-white",children:W?"è¨ˆç®—ä¸­â€¦":"ç­‰å¾…è¨ˆç®—"}):(0,i.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full border text-[10px] ${H[t]>=ei?"border-green-200 text-green-700 bg-green-50":"border-amber-200 text-amber-700 bg-amber-50"}`,children:["ç›¸ä¼¼åº¦ ",H[t].toFixed(3)]}),(0,i.jsxs)("span",{children:[e.length," chars"]})]})]}),(0,i.jsx)("p",{className:"text-xs text-gray-800 whitespace-pre-wrap leading-relaxed",children:e})]},`${t}-${e.slice(0,10)}`)),0===V.length&&(0,i.jsx)("div",{className:"text-xs text-gray-500",children:"å°šç„¡å¯é è¦½çš„æ®µè½ã€‚"})]}),q&&(0,i.jsx)("div",{className:"px-5 py-2 text-[11px] text-red-600 border-t border-amber-100 bg-amber-50",children:q}),(0,i.jsxs)("div",{className:"px-5 py-4 border-t border-gray-100 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-2 text-[11px] text-gray-500",children:[(0,i.jsxs)("div",{children:["ä½¿ç”¨æ¨™é¡Œå‘é‡æ¯”å°æ¯å€‹æ®µè½ï¼Œä½Žæ–¼ ",es," çš„æœƒè¢«ç§»é™¤ï¼›æ‰‹å‹•é€šéŽçš„æ®µè½æœƒå¼·åˆ¶ä¿ç•™ã€‚",W?" (è¨ˆç®—ä¸­...)":""]}),(0,i.jsxs)("label",{className:"flex flex-wrap items-center gap-2 text-gray-700 font-semibold",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-[10px] uppercase tracking-wide",children:"é–¾å€¼"}),(0,i.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-amber-50 text-amber-700 border border-amber-200 rounded-full shadow-sm text-[10px] font-semibold",children:[(0,i.jsx)(p,{className:"w-3 h-3"}),(0,i.jsx)("span",{children:_})]})]}),(0,i.jsx)(c9,{value:et,onChange:er,onCommit:en})]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{type:"button",onClick:()=>B(!1),disabled:K||W,className:"px-3 py-2 text-[12px] font-semibold text-gray-600 bg-gray-100 rounded-lg border border-gray-200 hover:bg-gray-200 transition-colors disabled:opacity-50",children:"å–æ¶ˆ"}),(0,i.jsxs)("button",{type:"button",onClick:eh,disabled:K||W,className:"px-3 py-2 text-[12px] font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg shadow-md hover:brightness-110 transition-all disabled:opacity-60 flex items-center gap-2",children:[K?(0,i.jsx)(ep,{className:"w-4 h-4 animate-spin"}):null,"åŒæ„ä¸¦éŽæ¿¾"]})]})]})]})})]})};function c8(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let ue=c8(),ut={exec:()=>null};function ur(e,t=""){let r="string"==typeof e?e:e.source,n={replace:(e,t)=>{let i="string"==typeof t?t:t.source;return i=i.replace(un.caret,"$1"),r=r.replace(e,i),n},getRegex:()=>new RegExp(r,t)};return n}let un={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},ui=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,us=/(?:[*+-]|\d{1,9}[.)])/,ua=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,uo=ur(ua).replace(/bull/g,us).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),ul=ur(ua).replace(/bull/g,us).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),ud=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,uc=/(?!\s*\])(?:\\.|[^\[\]\\])+/,uu=ur(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",uc).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),up=ur(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,us).getRegex(),uh="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",um=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,uf=ur("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",um).replace("tag",uh).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ug=ur(ud).replace("hr",ui).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",uh).getRegex(),uy={blockquote:ur(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ug).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:uu,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:ui,html:uf,lheading:uo,list:up,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:ug,table:ut,text:/^[^\n]+/},ux=ur("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ui).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",uh).getRegex(),ub={...uy,lheading:ul,table:ux,paragraph:ur(ud).replace("hr",ui).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ux).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",uh).getRegex()},uv={...uy,html:ur("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",um).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ut,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ur(ud).replace("hr",ui).replace("heading"," *#{1,6} *[^\n]").replace("lheading",uo).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},uk=/^( {2,}|\\)\n(?!\s*$)/,uw=/[\p{P}\p{S}]/u,uN=/[\s\p{P}\p{S}]/u,u$=/[^\s\p{P}\p{S}]/u,uS=ur(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,uN).getRegex(),uj=/(?!~)[\p{P}\p{S}]/u,uT=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,u_=ur(uT,"u").replace(/punct/g,uw).getRegex(),uI=ur(uT,"u").replace(/punct/g,uj).getRegex(),uC="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",uA=ur(uC,"gu").replace(/notPunctSpace/g,u$).replace(/punctSpace/g,uN).replace(/punct/g,uw).getRegex(),uO=ur(uC,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,uj).getRegex(),uE=ur("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,u$).replace(/punctSpace/g,uN).replace(/punct/g,uw).getRegex(),uM=ur(/\\(punct)/,"gu").replace(/punct/g,uw).getRegex(),uz=ur(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),uP=ur(um).replace("(?:-->|$)","-->").getRegex(),uD=ur("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",uP).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),uR=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,uL=ur(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",uR).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),uU=ur(/^!?\[(label)\]\[(ref)\]/).replace("label",uR).replace("ref",uc).getRegex(),uF=ur(/^!?\[(ref)\](?:\[\])?/).replace("ref",uc).getRegex(),uZ=ur("reflink|nolink(?!\\()","g").replace("reflink",uU).replace("nolink",uF).getRegex(),uB={_backpedal:ut,anyPunctuation:uM,autolink:uz,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:uk,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:ut,emStrongLDelim:u_,emStrongRDelimAst:uA,emStrongRDelimUnd:uE,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:uL,nolink:uF,punctuation:uS,reflink:uU,reflinkSearch:uZ,tag:uD,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:ut},uV={...uB,link:ur(/^!?\[(label)\]\((.*?)\)/).replace("label",uR).getRegex(),reflink:ur(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",uR).getRegex()},uH={...uB,emStrongRDelimAst:uO,emStrongLDelim:uI,url:ur(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},uW={...uH,br:ur(uk).replace("{2,}","*").getRegex(),text:ur(uH.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},uK={normal:uy,gfm:ub,pedantic:uv},uq={normal:uB,gfm:uH,breaks:uW,pedantic:uV},uJ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},uG=e=>uJ[e];function uY(e,t){if(t){if(un.escapeTest.test(e))return e.replace(un.escapeReplace,uG)}else if(un.escapeTestNoEncode.test(e))return e.replace(un.escapeReplaceNoEncode,uG);return e}function uX(e){try{e=encodeURI(e).replace(un.percentDecode,"%")}catch{return null}return e}function uQ(e,t){let r=e.replace(un.findPipe,(e,t,r)=>{let n=!1,i=t;for(;--i>=0&&"\\"===r[i];)n=!n;return n?"|":" |"}).split(un.splitPipe),n=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;n<r.length;n++)r[n]=r[n].trim().replace(un.slashPipe,"|");return r}function u0(e,t,r){let n=e.length;if(0===n)return"";let i=0;for(;i<n;)if(e.charAt(n-i-1)===t)i++;else break;return e.slice(0,n-i)}function u1(e,t,r,n,i){let s=t.href,a=t.title||null,o=e[1].replace(i.other.outputLinkReplace,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;let e={type:"link",raw:r,href:s,title:a,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,e}return{type:"image",raw:r,href:s,title:a,text:o}}class u2{options;rules;lexer;constructor(e){this.options=e||ue}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:u0(e,"\n")}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],r=function(e,t,r){let n=e.match(r.other.indentCodeCompensation);if(null===n)return t;let i=n[1];return t.split("\n").map(e=>{let t=e.match(r.other.beginningSpace);if(null===t)return e;let[n]=t;return n.length>=i.length?e.slice(i.length):e}).join("\n")}(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let t=u0(e,"#");this.options.pedantic?e=t.trim():(!t||this.rules.other.endingSpaceChar.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:u0(t[0],"\n")}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=u0(t[0],"\n").split("\n"),r="",n="",i=[];for(;e.length>0;){let t,s=!1,a=[];for(t=0;t<e.length;t++)if(this.rules.other.blockquoteStart.test(e[t]))a.push(e[t]),s=!0;else if(s)break;else a.push(e[t]);e=e.slice(t);let o=a.join("\n"),l=o.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${o}`:o,n=n?`${n}
${l}`:l;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=d,0===e.length)break;let c=i.at(-1);if(c?.type==="code")break;if(c?.type==="blockquote"){let t=c.raw+"\n"+e.join("\n"),s=this.blockquote(t);i[i.length-1]=s,r=r.substring(0,r.length-c.raw.length)+s.raw,n=n.substring(0,n.length-c.text.length)+s.text;break}if(c?.type==="list"){let t=c.raw+"\n"+e.join("\n"),s=this.list(t);i[i.length-1]=s,r=r.substring(0,r.length-c.raw.length)+s.raw,n=n.substring(0,n.length-c.raw.length)+s.raw,e=t.substring(i.at(-1).raw.length).split("\n");continue}}return{type:"blockquote",raw:r,tokens:i,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),n=r.length>1,i={type:"list",raw:"",ordered:n,start:n?+r.slice(0,-1):"",loose:!1,items:[]};r=n?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=n?r:"[*+-]");let s=this.rules.other.listItemRegex(r),a=!1;for(;e;){let r,n=!1,o="",l="";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;o=t[0],e=e.substring(o.length);let d=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,e=>" ".repeat(3*e.length)),c=e.split("\n",1)[0],u=!d.trim(),p=0;if(this.options.pedantic?(p=2,l=d.trimStart()):u?p=t[1].length+1:(p=(p=t[2].search(this.rules.other.nonSpaceChar))>4?1:p,l=d.slice(p),p+=t[1].length),u&&this.rules.other.blankLine.test(c)&&(o+=c+"\n",e=e.substring(c.length+1),n=!0),!n){let t=this.rules.other.nextBulletRegex(p),r=this.rules.other.hrRegex(p),n=this.rules.other.fencesBeginRegex(p),i=this.rules.other.headingBeginRegex(p),s=this.rules.other.htmlBeginRegex(p);for(;e;){let a,h=e.split("\n",1)[0];if(c=h,a=this.options.pedantic?c=c.replace(this.rules.other.listReplaceNesting,"  "):c.replace(this.rules.other.tabCharGlobal,"    "),n.test(c)||i.test(c)||s.test(c)||t.test(c)||r.test(c))break;if(a.search(this.rules.other.nonSpaceChar)>=p||!c.trim())l+="\n"+a.slice(p);else{if(u||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||n.test(d)||i.test(d)||r.test(d))break;l+="\n"+c}u||c.trim()||(u=!0),o+=h+"\n",e=e.substring(h.length+1),d=a.slice(p)}}!i.loose&&(a?i.loose=!0:this.rules.other.doubleBlankLine.test(o)&&(a=!0));let h=null;this.options.gfm&&(h=this.rules.other.listIsTask.exec(l))&&(r="[ ] "!==h[0],l=l.replace(this.rules.other.listReplaceTask,"")),i.items.push({type:"list_item",raw:o,task:!!h,checked:r,loose:!1,text:l,tokens:[]}),i.raw+=o}let o=i.items.at(-1);if(!o)return;o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){let t=i.items[e].tokens.filter(e=>"space"===e.type);i.loose=t.length>0&&t.some(e=>this.rules.other.anyLine.test(e.raw))}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:r,title:n}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let r=uQ(t[1]),n=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===n.length){for(let e of n)this.rules.other.tableAlignRight.test(e)?s.align.push("right"):this.rules.other.tableAlignCenter.test(e)?s.align.push("center"):this.rules.other.tableAlignLeft.test(e)?s.align.push("left"):s.align.push(null);for(let e=0;e<r.length;e++)s.header.push({text:r[e],tokens:this.lexer.inline(r[e]),header:!0,align:s.align[e]});for(let e of i)s.rows.push(uQ(e,s.header.length).map((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:s.align[t]})));return s}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let t=u0(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=function(e,t){if(-1===e.indexOf(")"))return -1;let r=0;for(let t=0;t<e.length;t++)if("\\"===e[t])t++;else if("("===e[t])r++;else if(")"===e[t]&&--r<0)return t;return -1}(t[2],0);if(e>-1){let r=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,r).trim(),t[3]=""}}let r=t[2],n="";if(this.options.pedantic){let e=this.rules.other.pedanticHrefTitle.exec(r);e&&(r=e[1],n=e[3])}else n=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(r=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?r.slice(1):r.slice(1,-1)),u1(t,{href:r?r.replace(this.rules.inline.anyPunctuation,"$1"):r,title:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let e=t[(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){let e=r[0].charAt(0);return{type:"text",raw:e,text:e}}return u1(r,e,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!(!n||n[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!r||this.rules.inline.punctuation.exec(r))){let r=[...n[0]].length-1,i,s,a=r,o=0,l="*"===n[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+r);null!=(n=l.exec(t));){if(!(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6]))continue;if(s=[...i].length,n[3]||n[4]){a+=s;continue}if((n[5]||n[6])&&r%3&&!((r+s)%3)){o+=s;continue}if((a-=s)>0)continue;s=Math.min(s,s+a+o);let t=[...n[0]][0].length,l=e.slice(0,r+n.index+t+s);if(Math.min(r,s)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let d=l.slice(2,-2);return{type:"strong",raw:l,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(e),n=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return r&&n&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,r;return r="@"===t[2]?"mailto:"+(e=t[1]):e=t[1],{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,r;if("@"===t[2])r="mailto:"+(e=t[0]);else{let n;do n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(n!==t[0])e=t[0],r="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}}class u4{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ue,this.options.tokenizer=this.options.tokenizer||new u2,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:un,block:uK.normal,inline:uq.normal};this.options.pedantic?(t.block=uK.pedantic,t.inline=uq.pedantic):this.options.gfm&&(t.block=uK.gfm,this.options.breaks?t.inline=uq.breaks:t.inline=uq.gfm),this.tokenizer.rules=t}static get rules(){return{block:uK,inline:uq}}static lex(e,t){return new u4(t).lex(e)}static lexInline(e,t){return new u4(t).inlineTokens(e)}lex(e){e=e.replace(un.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){for(this.options.pedantic&&(e=e.replace(un.tabCharGlobal,"    ").replace(un.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some(r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);let r=t.at(-1);1===n.raw.length&&void 0!==r?r.raw+="\n":t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);let r=t.at(-1);r?.type==="paragraph"||r?.type==="text"?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.at(-1).src=r.text):t.push(n);continue}if((n=this.tokenizer.fences(e))||(n=this.tokenizer.heading(e))||(n=this.tokenizer.hr(e))||(n=this.tokenizer.blockquote(e))||(n=this.tokenizer.list(e))||(n=this.tokenizer.html(e))){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);let r=t.at(-1);r?.type==="paragraph"||r?.type==="text"?(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue.at(-1).src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if((n=this.tokenizer.table(e))||(n=this.tokenizer.lheading(e))){e=e.substring(n.raw.length),t.push(n);continue}let i=e;if(this.options.extensions?.startBlock){let t,r=1/0,n=e.slice(1);this.options.extensions.startBlock.forEach(e=>{"number"==typeof(t=e.call({lexer:this},n))&&t>=0&&(r=Math.min(r,t))}),r<1/0&&r>=0&&(i=e.substring(0,r+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i))){let s=t.at(-1);r&&s?.type==="paragraph"?(s.raw+="\n"+n.raw,s.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(n),r=i.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);let r=t.at(-1);r?.type==="text"?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):t.push(n);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r=e,n=null;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(n=this.tokenizer.rules.inline.reflinkSearch.exec(r));)e.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(n=this.tokenizer.rules.inline.blockSkip.exec(r));)r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(n=this.tokenizer.rules.inline.anyPunctuation.exec(r));)r=r.slice(0,n.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i=!1,s="";for(;e;){let n;if(i||(s=""),i=!1,this.options.extensions?.inline?.some(r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))continue;if((n=this.tokenizer.escape(e))||(n=this.tokenizer.tag(e))||(n=this.tokenizer.link(e))){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length);let r=t.at(-1);"text"===n.type&&r?.type==="text"?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if((n=this.tokenizer.emStrong(e,r,s))||(n=this.tokenizer.codespan(e))||(n=this.tokenizer.br(e))||(n=this.tokenizer.del(e))||(n=this.tokenizer.autolink(e))||!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}let a=e;if(this.options.extensions?.startInline){let t,r=1/0,n=e.slice(1);this.options.extensions.startInline.forEach(e=>{"number"==typeof(t=e.call({lexer:this},n))&&t>=0&&(r=Math.min(r,t))}),r<1/0&&r>=0&&(a=e.substring(0,r+1))}if(n=this.tokenizer.inlineText(a)){e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(s=n.raw.slice(-1)),i=!0;let r=t.at(-1);r?.type==="text"?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw Error(t)}}return t}}class u5{options;parser;constructor(e){this.options=e||ue}space(e){return""}code({text:e,lang:t,escaped:r}){let n=(t||"").match(un.notSpaceStart)?.[0],i=e.replace(un.endingNewline,"")+"\n";return n?'<pre><code class="language-'+uY(n)+'">'+(r?i:uY(i,!0))+"</code></pre>\n":"<pre><code>"+(r?i:uY(i,!0))+"</code></pre>\n"}blockquote({tokens:e}){let t=this.parser.parse(e);return`<blockquote>
${t}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return"<hr>\n"}list(e){let t=e.ordered,r=e.start,n="";for(let t=0;t<e.items.length;t++){let r=e.items[t];n+=this.listitem(r)}let i=t?"ol":"ul";return"<"+i+(t&&1!==r?' start="'+r+'"':"")+">\n"+n+"</"+i+">\n"}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=r+" "+uY(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let t=0;t<e.header.length;t++)r+=this.tablecell(e.header[t]);t+=this.tablerow({text:r});let n="";for(let t=0;t<e.rows.length;t++){let i=e.rows[t];r="";for(let e=0;e<i.length;e++)r+=this.tablecell(i[e]);n+=this.tablerow({text:r})}return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+n+"</table>\n"}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${uY(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let n=this.parser.parseInline(r),i=uX(e);if(null===i)return n;let s='<a href="'+(e=i)+'"';return t&&(s+=' title="'+uY(t)+'"'),s+=">"+n+"</a>"}image({href:e,title:t,text:r}){let n=uX(e);if(null===n)return uY(r);e=n;let i=`<img src="${e}" alt="${r}"`;return t&&(i+=` title="${uY(t)}"`),i+=">"}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:uY(e.text)}}class u6{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class u3{options;renderer;textRenderer;constructor(e){this.options=e||ue,this.options.renderer=this.options.renderer||new u5,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new u6}static parse(e,t){return new u3(t).parse(e)}static parseInline(e,t){return new u3(t).parseInline(e)}parse(e,t=!0){let r="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions?.renderers?.[i.type]){let e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(i.type)){r+=e||"";continue}}switch(i.type){case"space":r+=this.renderer.space(i);continue;case"hr":r+=this.renderer.hr(i);continue;case"heading":r+=this.renderer.heading(i);continue;case"code":r+=this.renderer.code(i);continue;case"table":r+=this.renderer.table(i);continue;case"blockquote":r+=this.renderer.blockquote(i);continue;case"list":r+=this.renderer.list(i);continue;case"html":r+=this.renderer.html(i);continue;case"paragraph":r+=this.renderer.paragraph(i);continue;case"text":{let s=i,a=this.renderer.text(s);for(;n+1<e.length&&"text"===e[n+1].type;)s=e[++n],a+="\n"+this.renderer.text(s);t?r+=this.renderer.paragraph({type:"paragraph",raw:a,text:a,tokens:[{type:"text",raw:a,text:a,escaped:!0}]}):r+=a;continue}default:{let e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw Error(e)}}}return r}parseInline(e,t=this.renderer){let r="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions?.renderers?.[i.type]){let e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=e||"";continue}}switch(i.type){case"escape":case"text":r+=t.text(i);break;case"html":r+=t.html(i);break;case"link":r+=t.link(i);break;case"image":r+=t.image(i);break;case"strong":r+=t.strong(i);break;case"em":r+=t.em(i);break;case"codespan":r+=t.codespan(i);break;case"br":r+=t.br(i);break;case"del":r+=t.del(i);break;default:{let e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw Error(e)}}}return r}}class u9{options;block;constructor(e){this.options=e||ue}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?u4.lex:u4.lexInline}provideParser(){return this.block?u3.parse:u3.parseInline}}class u7{defaults=c8();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=u3;Renderer=u5;TextRenderer=u6;Lexer=u4;Tokenizer=u2;Hooks=u9;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let n of e)switch(r=r.concat(t.call(this,n)),n.type){case"table":for(let e of n.header)r=r.concat(this.walkTokens(e.tokens,t));for(let e of n.rows)for(let n of e)r=r.concat(this.walkTokens(n.tokens,t));break;case"list":r=r.concat(this.walkTokens(n.items,t));break;default:{let e=n;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach(n=>{let i=e[n].flat(1/0);r=r.concat(this.walkTokens(i,t))}):e.tokens&&(r=r.concat(this.walkTokens(e.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(e=>{let r={...e};if(r.async=this.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw Error("extension name required");if("renderer"in e){let r=t.renderers[e.name];r?t.renderers[e.name]=function(...t){let n=e.renderer.apply(this,t);return!1===n&&(n=r.apply(this,t)),n}:t.renderers[e.name]=e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw Error("extension level must be 'block' or 'inline'");let r=t[e.level];r?r.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)}),r.extensions=t),e.renderer){let t=this.defaults.renderer||new u5(this.defaults);for(let r in e.renderer){if(!(r in t))throw Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let n=e.renderer[r],i=t[r];t[r]=(...e)=>{let r=n.apply(t,e);return!1===r&&(r=i.apply(t,e)),r||""}}r.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new u2(this.defaults);for(let r in e.tokenizer){if(!(r in t))throw Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let n=e.tokenizer[r],i=t[r];t[r]=(...e)=>{let r=n.apply(t,e);return!1===r&&(r=i.apply(t,e)),r}}r.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new u9;for(let r in e.hooks){if(!(r in t))throw Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let n=e.hooks[r],i=t[r];u9.passThroughHooks.has(r)?t[r]=e=>{if(this.defaults.async)return Promise.resolve(n.call(t,e)).then(e=>i.call(t,e));let r=n.call(t,e);return i.call(t,r)}:t[r]=(...e)=>{let r=n.apply(t,e);return!1===r&&(r=i.apply(t,e)),r}}r.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,n=e.walkTokens;r.walkTokens=function(e){let r=[];return r.push(n.call(this,e)),t&&(r=r.concat(t.call(this,e))),r}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return u4.lex(e,t??this.defaults)}parser(e,t){return u3.parse(e,t??this.defaults)}parseMarkdown(e){return(t,r)=>{let n={...r},i={...this.defaults,...n},s=this.onError(!!i.silent,!!i.async);if(!0===this.defaults.async&&!1===n.async)return s(Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==t)return s(Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return s(Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);let a=i.hooks?i.hooks.provideLexer():e?u4.lex:u4.lexInline,o=i.hooks?i.hooks.provideParser():e?u3.parse:u3.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then(e=>a(e,i)).then(e=>i.hooks?i.hooks.processAllTokens(e):e).then(e=>i.walkTokens?Promise.all(this.walkTokens(e,i.walkTokens)).then(()=>e):e).then(e=>o(e,i)).then(e=>i.hooks?i.hooks.postprocess(e):e).catch(s);try{i.hooks&&(t=i.hooks.preprocess(t));let e=a(t,i);i.hooks&&(e=i.hooks.processAllTokens(e)),i.walkTokens&&this.walkTokens(e,i.walkTokens);let r=o(e,i);return i.hooks&&(r=i.hooks.postprocess(r)),r}catch(e){return s(e)}}}onError(e,t){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",e){let e="<p>An error occurred:</p><pre>"+uY(r.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(r);throw r}}}let u8=new u7;function pe(e,t){return u8.parse(e,t)}pe.options=pe.setOptions=function(e){return u8.setOptions(e),pe.defaults=u8.defaults,ue=pe.defaults,pe},pe.getDefaults=c8,pe.defaults=ue,pe.use=function(...e){return u8.use(...e),pe.defaults=u8.defaults,ue=pe.defaults,pe},pe.walkTokens=function(e,t){return u8.walkTokens(e,t)},pe.parseInline=u8.parseInline,pe.Parser=u3,pe.parser=u3.parse,pe.Renderer=u5,pe.TextRenderer=u6,pe.Lexer=u4,pe.lexer=u4.lex,pe.Tokenizer=u2,pe.Hooks=u9,pe.parse=pe,pe.options,pe.setOptions,pe.use,pe.walkTokens,pe.parseInline,u3.parse,u4.lex;let pt=c("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),pr=c("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),pn=c("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),pi=c("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]),ps=c("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),pa=c("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]]),po=c("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function pl(e){this.content=e}pl.prototype={constructor:pl,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return -1},get:function(e){var t=this.find(e);return -1==t?void 0:this.content[t+1]},update:function(e,t,r){var n=r&&r!=e?this.remove(r):this,i=n.find(e),s=n.content.slice();return -1==i?s.push(r||e,t):(s[i+1]=t,r&&(s[i]=r)),new pl(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var r=this.content.slice();return r.splice(t,2),new pl(r)},addToStart:function(e,t){return new pl([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var r=this.remove(e).content.slice();return r.push(e,t),new pl(r)},addBefore:function(e,t,r){var n=this.remove(t),i=n.content.slice(),s=n.find(e);return i.splice(-1==s?i.length:s,0,t,r),new pl(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=pl.from(e)).size?new pl(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=pl.from(e)).size?new pl(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=pl.from(e);for(var r=0;r<e.content.length;r+=2)t=t.remove(e.content[r]);return t},toObject:function(){var e={};return this.forEach(function(t,r){e[t]=r}),e},get size(){return this.content.length>>1}},pl.from=function(e){if(e instanceof pl)return e;var t=[];if(e)for(var r in e)t.push(r,e[r]);return new pl(t)};class pd{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,t,r,n=0,i){for(let s=0,a=0;a<t;s++){let o=this.content[s],l=a+o.nodeSize;if(l>e&&!1!==r(o,n+a,i||null,s)&&o.content.size){let i=a+1;o.nodesBetween(Math.max(0,e-i),Math.min(o.content.size,t-i),r,n+i)}a=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,n){let i="",s=!0;return this.nodesBetween(e,t,(a,o)=>{let l=a.isText?a.text.slice(Math.max(e,o)-o,t-o):a.isLeaf?n?"function"==typeof n?n(a):n:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&l||a.isTextblock)&&r&&(s?s=!1:i+=r),i+=l},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,n=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(r)&&(n[n.length-1]=t.withText(t.text+r.text),i=1);i<e.content.length;i++)n.push(e.content[i]);return new pd(n,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let r=[],n=0;if(t>e)for(let i=0,s=0;s<t;i++){let a=this.content[i],o=s+a.nodeSize;o>e&&((s<e||o>t)&&(a=a.isText?a.cut(Math.max(0,e-s),Math.min(a.text.length,t-s)):a.cut(Math.max(0,e-s-1),Math.min(a.content.size,t-s-1))),r.push(a),n+=a.nodeSize),s=o}return new pd(r,n)}cutByIndex(e,t){return e==t?pd.empty:0==e&&t==this.content.length?this:new pd(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let n=this.content.slice(),i=this.size+t.nodeSize-r.nodeSize;return n[e]=t,new pd(n,i)}addToStart(e){return new pd([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new pd(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let n=this.content[t];e(n,r,t),r+=n.nodeSize}}findDiffStart(e,t=0){return function e(t,r,n){for(let i=0;;i++){if(i==t.childCount||i==r.childCount)return t.childCount==r.childCount?null:n;let s=t.child(i),a=r.child(i);if(s==a){n+=s.nodeSize;continue}if(!s.sameMarkup(a))return n;if(s.isText&&s.text!=a.text){for(let e=0;s.text[e]==a.text[e];e++)n++;return n}if(s.content.size||a.content.size){let t=e(s.content,a.content,n+1);if(null!=t)return t}n+=s.nodeSize}}(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return function e(t,r,n,i){for(let s=t.childCount,a=r.childCount;;){if(0==s||0==a)return s==a?null:{a:n,b:i};let o=t.child(--s),l=r.child(--a),d=o.nodeSize;if(o==l){n-=d,i-=d;continue}if(!o.sameMarkup(l))return{a:n,b:i};if(o.isText&&o.text!=l.text){let e=0,t=Math.min(o.text.length,l.text.length);for(;e<t&&o.text[o.text.length-e-1]==l.text[l.text.length-e-1];)e++,n--,i--;return{a:n,b:i}}if(o.content.size||l.content.size){let t=e(o.content,l.content,n-1,i-1);if(t)return t}n-=d,i-=d}}(this,e,t,r)}findIndex(e){if(0==e)return pu(0,e);if(e==this.size)return pu(this.content.length,e);if(e>this.size||e<0)throw RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let n=r+this.child(t).nodeSize;if(n>=e){if(n==e)return pu(t+1,n);return pu(t,r)}r=n}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return pd.empty;if(!Array.isArray(t))throw RangeError("Invalid input for Fragment.fromJSON");return new pd(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return pd.empty;let t,r=0;for(let n=0;n<e.length;n++){let i=e[n];r+=i.nodeSize,n&&i.isText&&e[n-1].sameMarkup(i)?(t||(t=e.slice(0,n)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new pd(t||e,r)}static from(e){if(!e)return pd.empty;if(e instanceof pd)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new pd([e],e.nodeSize);throw RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}pd.empty=new pd([],0);let pc={index:0,offset:0};function pu(e,t){return pc.index=e,pc.offset=t,pc}function pp(e,t){if(e===t)return!0;if(!(e&&"object"==typeof e)||!(t&&"object"==typeof t))return!1;let r=Array.isArray(e);if(Array.isArray(t)!=r)return!1;if(r){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!pp(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!pp(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}class ph{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let n=0;n<e.length;n++){let i=e[n];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,n));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,n)),t.push(this),r=!0),t&&t.push(i)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&pp(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw RangeError(`There is no mark type ${t.type} in this schema`);let n=r.create(t.attrs);return r.checkAttrs(n.attrs),n}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return ph.none;if(e instanceof ph)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}}ph.none=[];class pm extends Error{}class pf{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=function e(t,r,n,i){let{index:s,offset:a}=t.findIndex(r),o=t.maybeChild(s);if(a==r||o.isText)return i&&!i.canReplace(s,s,n)?null:t.cut(0,r).append(n).append(t.cut(r));let l=e(o.content,r-a-1,n,o);return l&&t.replaceChild(s,o.copy(l))}(this.content,e+this.openStart,t);return r&&new pf(r,this.openStart,this.openEnd)}removeBetween(e,t){return new pf(function e(t,r,n){let{index:i,offset:s}=t.findIndex(r),a=t.maybeChild(i),{index:o,offset:l}=t.findIndex(n);if(s==r||a.isText){if(l!=n&&!t.child(o).isText)throw RangeError("Removing non-flat range");return t.cut(0,r).append(t.cut(n))}if(i!=o)throw RangeError("Removing non-flat range");return t.replaceChild(i,a.copy(e(a.content,r-s-1,n-s-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return pf.empty;let r=t.openStart||0,n=t.openEnd||0;if("number"!=typeof r||"number"!=typeof n)throw RangeError("Invalid input for Slice.fromJSON");return new pf(pd.fromJSON(e,t.content),r,n)}static maxOpen(e,t=!0){let r=0,n=0;for(let n=e.firstChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.firstChild)r++;for(let r=e.lastChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.lastChild)n++;return new pf(e,r,n)}}function pg(e,t){if(!t.type.compatibleContent(e.type))throw new pm("Cannot join "+t.type.name+" onto "+e.type.name)}function py(e,t,r){let n=e.node(r);return pg(n,t.node(r)),n}function px(e,t){let r=t.length-1;r>=0&&e.isText&&e.sameMarkup(t[r])?t[r]=e.withText(t[r].text+e.text):t.push(e)}function pb(e,t,r,n){let i=(t||e).node(r),s=0,a=t?t.index(r):i.childCount;e&&(s=e.index(r),e.depth>r?s++:e.textOffset&&(px(e.nodeAfter,n),s++));for(let e=s;e<a;e++)px(i.child(e),n);t&&t.depth==r&&t.textOffset&&px(t.nodeBefore,n)}function pv(e,t){return e.type.checkContent(t),e.copy(t)}function pk(e,t,r){let n=[];return pb(null,e,r,n),e.depth>r&&px(pv(py(e,t,r+1),pk(e,t,r+1)),n),pb(t,null,r,n),new pd(n)}pf.empty=new pf(pd.empty,0,0);class pw{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],n=e.child(t);return r?e.child(t).cut(r):n}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[3*t],n=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)n+=r.child(t).nodeSize;return n}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return ph.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),n=e.maybeChild(t);if(!r){let e=r;r=n,n=e}let i=r.marks;for(var s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||n&&i[s].isInSet(n.marks)||(i=i[s--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,n=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)!1!==r[i].type.spec.inclusive||n&&r[i].isInSet(n.marks)||(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new pj(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw RangeError("Position "+t+" out of range");let r=[],n=0,i=t;for(let t=e;;){let{index:e,offset:s}=t.content.findIndex(i),a=i-s;if(r.push(t,e,n+s),!a||(t=t.child(e)).isText)break;i=a-1,n+=s+1}return new pw(t,r,i)}static resolveCached(e,t){let r=pS.get(e);if(r)for(let e=0;e<r.elts.length;e++){let n=r.elts[e];if(n.pos==t)return n}else pS.set(e,r=new pN);let n=r.elts[r.i]=pw.resolve(e,t);return r.i=(r.i+1)%p$,n}}class pN{constructor(){this.elts=[],this.i=0}}let p$=12,pS=new WeakMap;class pj{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}let pT=Object.create(null);class p_{constructor(e,t,r,n=ph.none){this.type=e,this.attrs=t,this.marks=n,this.content=r||pd.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,n=0){this.content.nodesBetween(e,t,r,n,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,n){return this.content.textBetween(e,t,r,n)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&pp(this.attrs,t||e.defaultAttrs||pT)&&ph.sameSet(this.marks,r||ph.none)}copy(e=null){return e==this.content?this:new p_(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new p_(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return pf.empty;let n=this.resolve(e),i=this.resolve(t),s=r?0:n.sharedDepth(t),a=n.start(s);return new pf(n.node(s).content.cut(n.pos-a,i.pos-a),n.depth-s,i.depth-s)}replace(e,t,r){var n=this.resolve(e),i=this.resolve(t);if(r.openStart>n.depth)throw new pm("Inserted content deeper than insertion position");if(n.depth-r.openStart!=i.depth-r.openEnd)throw new pm("Inconsistent open depths");return function e(t,r,n,i){let s=t.index(i),a=t.node(i);if(s==r.index(i)&&i<t.depth-n.openStart){let o=e(t,r,n,i+1);return a.copy(a.content.replaceChild(s,o))}if(!n.content.size)return pv(a,pk(t,r,i));if(n.openStart||n.openEnd||t.depth!=i||r.depth!=i){let{start:e,end:s}=function(e,t){let r=t.depth-e.openStart,n=t.node(r).copy(e.content);for(let e=r-1;e>=0;e--)n=t.node(e).copy(pd.from(n));return{start:n.resolveNoCache(e.openStart+r),end:n.resolveNoCache(n.content.size-e.openEnd-r)}}(n,t);return pv(a,function e(t,r,n,i,s){let a=t.depth>s&&py(t,r,s+1),o=i.depth>s&&py(n,i,s+1),l=[];return pb(null,t,s,l),a&&o&&r.index(s)==n.index(s)?(pg(a,o),px(pv(a,e(t,r,n,i,s+1)),l)):(a&&px(pv(a,pk(t,r,s+1)),l),pb(r,n,s,l),o&&px(pv(o,pk(n,i,s+1)),l)),pb(i,null,s,l),new pd(l)}(t,e,s,r,i))}{let e=t.parent,i=e.content;return pv(e,i.cut(0,t.parentOffset).append(n.content).append(i.cut(r.parentOffset)))}}(n,i,r,0)}nodeAt(e){for(let t=this;;){let{index:r,offset:n}=t.content.findIndex(e);if(!(t=t.maybeChild(r)))return null;if(n==e||t.isText)return t;e-=n+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let n=this.content.child(t-1);return{node:n,index:t-1,offset:r-n.nodeSize}}resolve(e){return pw.resolveCached(this,e)}resolveNoCache(e){return pw.resolve(this,e)}rangeHasMark(e,t,r){let n=!1;return t>e&&this.nodesBetween(e,t,e=>(r.isInSet(e.marks)&&(n=!0),!n)),n}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),pC(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=pd.empty,n=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,n,i),a=s&&s.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let e=n;e<i;e++)if(!this.type.allowsMarks(r.child(e).marks))return!1;return!0}canReplaceWith(e,t,r,n){if(n&&!this.type.allowsMarks(n))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,t);return!!s&&s.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ph.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ph.sameSet(e,this.marks))throw RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){let r;if(!t)throw RangeError("Invalid input for Node.fromJSON");if(t.marks){if(!Array.isArray(t.marks))throw RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw RangeError("Invalid text node in JSON");return e.text(t.text,r)}let n=pd.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,n,r);return i.type.checkAttrs(i.attrs),i}}p_.prototype.text=void 0;class pI extends p_{constructor(e,t,r,n){if(super(e,t,null,n),!r)throw RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):pC(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new pI(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new pI(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function pC(e,t){for(let r=e.length-1;r>=0;r--)t=e[r].type.name+"("+t+")";return t}class pA{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){var r;let n,i=new pO(e,t);if(null==i.next)return pA.empty;let s=function e(t){let r=[];do r.push(function(t){let r=[];do r.push(function(t){let r=function(t){if(t.eat("(")){let r=e(t);return t.eat(")")||t.err("Missing closing paren"),r}if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=(function(e,t){let r=e.nodeTypes,n=r[t];if(n)return[n];let i=[];for(let e in r){let n=r[e];n.isInGroup(t)&&i.push(n)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i})(t,t.next).map(e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}}(t);for(;;)if(t.eat("+"))r={type:"plus",expr:r};else if(t.eat("*"))r={type:"star",expr:r};else if(t.eat("?"))r={type:"opt",expr:r};else if(t.eat("{"))r=function(e,t){let r=pE(e),n=r;return e.eat(",")&&(n="}"!=e.next?pE(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:t}}(t,r);else break;return r}(t));while(t.next&&")"!=t.next&&"|"!=t.next)return 1==r.length?r[0]:{type:"seq",exprs:r}}(t));while(t.eat("|"))return 1==r.length?r[0]:{type:"choice",exprs:r}}(i);i.next&&i.err("Unexpected trailing text");let a=(r=function(e){let t=[[]];return i(function e(t,s){if("choice"==t.type)return t.exprs.reduce((t,r)=>t.concat(e(r,s)),[]);if("seq"==t.type)for(let n=0;;n++){let a=e(t.exprs[n],s);if(n==t.exprs.length-1)return a;i(a,s=r())}else if("star"==t.type){let a=r();return n(s,a),i(e(t.expr,a),a),[n(a)]}else if("plus"==t.type){let a=r();return i(e(t.expr,s),a),i(e(t.expr,a),a),[n(a)]}else if("opt"==t.type)return[n(s)].concat(e(t.expr,s));else if("range"==t.type){let a=s;for(let n=0;n<t.min;n++){let n=r();i(e(t.expr,a),n),a=n}if(-1==t.max)i(e(t.expr,a),a);else for(let s=t.min;s<t.max;s++){let s=r();n(a,s),i(e(t.expr,a),s),a=s}return[n(a)]}else if("name"==t.type)return[n(s,void 0,t.value)];else throw Error("Unknown expr type")}(e,0),r()),t;function r(){return t.push([])-1}function n(e,r,n){let i={term:n,to:r};return t[e].push(i),i}function i(e,t){e.forEach(e=>e.to=t)}}(s),n=Object.create(null),function e(t){let i=[];t.forEach(e=>{r[e].forEach(({term:e,to:t})=>{let n;if(e){for(let t=0;t<i.length;t++)i[t][0]==e&&(n=i[t][1]);pz(r,t).forEach(t=>{n||i.push([e,n=[]]),-1==n.indexOf(t)&&n.push(t)})}})});let s=n[t.join(",")]=new pA(t.indexOf(r.length-1)>-1);for(let t=0;t<i.length;t++){let r=i[t][1].sort(pM);s.next.push({type:i[t][0],next:n[r.join(",")]||e(r)})}return s}(pz(r,0)));return function(e,t){for(let r=0,n=[e];r<n.length;r++){let e=n[r],i=!e.validEnd,s=[];for(let t=0;t<e.next.length;t++){let{type:r,next:a}=e.next[t];s.push(r.name),i&&!(r.isText||r.hasRequiredAttrs())&&(i=!1),-1==n.indexOf(a)&&n.push(a)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(a,i),a}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let n=this;for(let i=t;n&&i<r;i++)n=n.matchType(e.child(i).type);return n}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let n=[this];return function i(s,a){let o=s.matchFragment(e,r);if(o&&(!t||o.validEnd))return pd.from(a.map(e=>e.createAndFill()));for(let e=0;e<s.next.length;e++){let{type:t,next:r}=s.next[e];if(!(t.isText||t.hasRequiredAttrs())&&-1==n.indexOf(r)){n.push(r);let e=i(r,a.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let n=r.shift(),i=n.match;if(i.matchType(e)){let e=[];for(let t=n;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:s,next:a}=i.next[e];s.isLeaf||s.hasRequiredAttrs()||s.name in t||n.type&&!a.validEnd||(r.push({match:s.contentMatch,type:s,via:n}),t[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return!function t(r){e.push(r);for(let n=0;n<r.next.length;n++)-1==e.indexOf(r.next[n].next)&&t(r.next[n].next)}(this),e.map((t,r)=>{let n=r+(t.validEnd?"*":" ")+" ";for(let r=0;r<t.next.length;r++)n+=(r?", ":"")+t.next[r].type.name+"->"+e.indexOf(t.next[r].next);return n}).join("\n")}}pA.empty=new pA(!0);class pO{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw SyntaxError(e+" (in content expression '"+this.string+"')")}}function pE(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function pM(e,t){return t-e}function pz(e,t){let r=[];return function t(n){let i=e[n];if(1==i.length&&!i[0].term)return t(i[0].to);r.push(n);for(let e=0;e<i.length;e++){let{term:n,to:s}=i[e];n||-1!=r.indexOf(s)||t(s)}}(t),r.sort(pM)}function pP(e){let t=Object.create(null);for(let r in e){let n=e[r];if(!n.hasDefault)return null;t[r]=n.default}return t}function pD(e,t){let r=Object.create(null);for(let n in e){let i=t&&t[n];if(void 0===i){let t=e[n];if(t.hasDefault)i=t.default;else throw RangeError("No value supplied for attribute "+n)}r[n]=i}return r}function pR(e,t,r,n){for(let n in t)if(!(n in e))throw RangeError(`Unsupported attribute ${n} for ${r} of type ${n}`);for(let r in e){let n=e[r];n.validate&&n.validate(t[r])}}function pL(e,t){let r=Object.create(null);if(t)for(let n in t)r[n]=new pF(e,n,t[n]);return r}class pU{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=pL(e,r.attrs),this.defaultAttrs=pP(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==pA.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:pD(this.attrs,e)}create(e=null,t,r){if(this.isText)throw Error("NodeType.create can't construct text nodes");return new p_(this,this.computeAttrs(e),pd.from(t),ph.setFrom(r))}createChecked(e=null,t,r){return t=pd.from(t),this.checkContent(t),new p_(this,this.computeAttrs(e),t,ph.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),(t=pd.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let n=this.contentMatch.matchFragment(t),i=n&&n.fillBefore(pd.empty,!0);return i?new p_(this,e,t.append(i),ph.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){pR(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){let t;if(null==this.markSet)return e;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:ph.none:e}static compile(e,t){let r=Object.create(null);e.forEach((e,n)=>r[e]=new pU(e,t,n));let n=t.spec.topNode||"doc";if(!r[n])throw RangeError("Schema is missing its top node type ('"+n+"')");if(!r.text)throw RangeError("Every schema needs a 'text' type");for(let e in r.text.attrs)throw RangeError("The text node type should not have attributes");return r}}class pF{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate="string"==typeof r.validate?function(e,t,r){let n=r.split("|");return r=>{let i=null===r?"null":typeof r;if(0>n.indexOf(i))throw RangeError(`Expected value of type ${n} for attribute ${t} on type ${e}, got ${i}`)}}(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class pZ{constructor(e,t,r,n){this.name=e,this.rank=t,this.schema=r,this.spec=n,this.attrs=pL(e,n.attrs),this.excluded=null;let i=pP(this.attrs);this.instance=i?new ph(this,i):null}create(e=null){return!e&&this.instance?this.instance:new ph(this,pD(this.attrs,e))}static compile(e,t){let r=Object.create(null),n=0;return e.forEach((e,i)=>r[e]=new pZ(e,n++,t,i)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){pR(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class pB{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=pl.from(e.nodes),t.marks=pl.from(e.marks||{}),this.nodes=pU.compile(this.spec.nodes,this),this.marks=pZ.compile(this.spec.marks,this);let r=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],n=t.spec.content||"",i=t.spec.marks;if(t.contentMatch=r[n]||(r[n]=pA.parse(n,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==i?null:i?pV(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],r=t.spec.excludes;t.excluded=null==r?[t]:""==r?[]:pV(this,r.split(" "))}this.nodeFromJSON=e=>p_.fromJSON(this,e),this.markFromJSON=e=>ph.fromJSON(this,e),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,n){if("string"==typeof e)e=this.nodeType(e);else if(e instanceof pU){if(e.schema!=this)throw RangeError("Node type from different schema used ("+e.name+")")}else throw RangeError("Invalid node type: "+e);return e.createChecked(t,r,n)}text(e,t){let r=this.nodes.text;return new pI(r,r.defaultAttrs,e,ph.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw RangeError("Unknown node type: "+e);return t}}function pV(e,t){let r=[];for(let n=0;n<t.length;n++){let i=t[n],s=e.marks[i],a=s;if(s)r.push(s);else for(let t in e.marks){let n=e.marks[t];("_"==i||n.spec.group&&n.spec.group.split(" ").indexOf(i)>-1)&&r.push(a=n)}if(!a)throw SyntaxError("Unknown mark type: '"+t[n]+"'")}return r}class pH{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(e=>{if(null!=e.tag)this.tags.push(e);else if(null!=e.style){let t=/[^=]*/.exec(e.style)[0];0>r.indexOf(t)&&r.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let r=e.nodes[t.node];return r.contentMatch.matchType(r)})}parse(e,t={}){let r=new pY(this,t,!1);return r.addAll(e,ph.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new pY(this,t,!0);return r.addAll(e,ph.none,t.from,t.to),pf.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){var n,i;let r=this.tags[s];if(n=e,i=r.tag,(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,i)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){let t=r.getAttrs(e);if(!1===t)continue;r.attrs=t||void 0}return r}}}matchStyle(e,t,r,n){for(let i=n?this.styles.indexOf(n)+1:0;i<this.styles.length;i++){let n=this.styles[i],s=n.style;if(0==s.indexOf(e)&&(!n.context||r.matchesContext(n.context))&&(!(s.length>e.length)||61==s.charCodeAt(e.length)&&s.slice(e.length+1)==t)){if(n.getAttrs){let e=n.getAttrs(t);if(!1===e)continue;n.attrs=e||void 0}return n}}}static schemaRules(e){let t=[];function r(e){let r=null==e.priority?50:e.priority,n=0;for(;n<t.length;n++){let e=t[n];if((null==e.priority?50:e.priority)<r)break}t.splice(n,0,e)}for(let t in e.marks){let n=e.marks[t].spec.parseDOM;n&&n.forEach(e=>{r(e=pX(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let n=e.nodes[t].spec.parseDOM;n&&n.forEach(e=>{r(e=pX(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new pH(e,pH.schemaRules(e)))}}let pW={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},pK={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},pq={ol:!0,ul:!0};function pJ(e,t,r){return null!=t?!!t|2*("full"===t):e&&"pre"==e.whitespace?3:-5&r}class pG{constructor(e,t,r,n,i,s){this.type=e,this.attrs=t,this.marks=r,this.solid=n,this.options=s,this.content=[],this.activeMarks=ph.none,this.match=i||(4&s?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(pd.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let t=this.type.contentMatch,r;return(r=t.findWrapping(e.type))?(this.match=t,r):null}}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e=this.content[this.content.length-1],t;e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))&&(e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=e.withText(e.text.slice(0,e.text.length-t[0].length)))}let t=pd.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(pd.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!pW.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class pY{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let n=t.topNode,i,s=pJ(null,t.preserveWhitespace,0)|4*!!r;i=n?new pG(n.type,n.attrs,ph.none,!0,t.topMatch||n.type.contentMatch,s):r?new pG(null,null,ph.none,!0,null,s):new pG(e.schema.topNodeType,null,ph.none,!0,null,s),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,n=this.top,i=2&n.options?"full":this.localPreserveWS||(1&n.options)>0,{schema:s}=this.parser;if("full"===i||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)if("full"===i)r=r.replace(/\r\n?/g,"\n");else if(s.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(s.linebreakReplacement.create())){let e=r.split(/\r?\n|\r/);for(let r=0;r<e.length;r++)r&&this.insertNode(s.linebreakReplacement.create(),t,!0),e[r]&&this.insertNode(s.text(e[r]),t,!/\S/.test(e[r]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let t=n.content[n.content.length-1],i=e.previousSibling;(!t||i&&"BR"==i.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(r=r.slice(1))}r&&this.insertNode(s.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let n=this.localPreserveWS,i=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;pq.hasOwnProperty(s)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,r=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&pq.hasOwnProperty(e)&&r?(r.appendChild(t),t=r):"li"==e?r=t:e&&(r=null)}}(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(o?o.ignore:pK.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let r,n=this.needsBlock;if(pW.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),r=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let a=o&&o.skip?t:this.readStyles(e,t);a&&this.addAll(e,a),r&&this.sync(i),this.needsBlock=n}else{let r=this.readStyles(e,t);r&&this.addElementByRule(e,o,r,!1===o.consuming?a:void 0)}this.localPreserveWS=n}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let e=0;e<this.parser.matchedStyles.length;e++){let n=this.parser.matchedStyles[e],i=r.getPropertyValue(n);if(i)for(let e;;){let r=this.parser.matchStyle(n,i,this,e);if(!r)break;if(r.ignore)return null;if(t=r.clearMark?t.filter(e=>!r.clearMark(e)):t.concat(this.parser.schema.marks[r.mark].create(r.attrs)),!1===r.consuming)e=r;else break}}return t}addElementByRule(e,t,r,n){let i,s;if(t.node)if((s=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(s.create(t.attrs),r,"BR"==e.nodeName)||this.leafFallback(e,r);else{let e=this.enter(s,t.attrs||null,r,t.preserveWhitespace);e&&(i=!0,r=e)}else{let e=this.parser.schema.marks[t.mark];r=r.concat(e.create(t.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(n)this.addElement(e,r,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,r,!1));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n,r),this.findAround(e,n,!1)}i&&this.sync(a)&&this.open--}addAll(e,t,r,n){let i=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=null==n?null:e.childNodes[n];s!=a;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,t);this.findAtPoint(e,i)}findPlace(e,t,r){let n,i;for(let t=this.open,s=0;t>=0;t--){let a=this.nodes[t],o=a.findWrapping(e);if(o&&(!n||n.length>o.length+s)&&(n=o,i=a,!o.length))break;if(a.solid){if(r)break;s+=2}}if(!n)return null;this.sync(i);for(let e=0;e<n.length;e++)t=this.enterInner(n[e],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let n=this.findPlace(e,t,r);if(n){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let r=ph.none;for(let i of n.concat(e.marks))(t.type?t.type.allowsMarkType(i.type):pQ(i.type,e.type))&&(r=i.addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r,n){let i=this.findPlace(e.create(t),r,!1);return i&&(i=this.enterInner(e,t,r,!0,n)),i}enterInner(e,t,r,n=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=pJ(e,i,s.options);4&s.options&&0==s.content.length&&(a|=4);let o=ph.none;return r=r.filter(t=>(s.type?!s.type.allowsMarkType(t.type):!pQ(t.type,e))||(o=t.addToSet(o),!1)),this.nodes.push(new pG(e,t,o,n,null,a)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;else this.localPreserveWS&&(this.nodes[t].options|=1);return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let t=r.length-1;t>=0;t--)e+=r[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let n=0;n<this.find.length;n++)null==this.find[n].pos&&1==e.nodeType&&e.contains(this.find[n].node)&&t.compareDocumentPosition(this.find[n].node)&(r?2:4)&&(this.find[n].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,n=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+ +!n,s=(e,a)=>{for(;e>=0;e--){let o=t[e];if(""==o){if(e==t.length-1||0==e)continue;for(;a>=i;a--)if(s(e-1,a))return!0;return!1}{let e=a>0||0==a&&n?this.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!e||e.name!=o&&!e.isInGroup(o))return!1;a--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}}function pX(e){let t={};for(let r in e)t[r]=e[r];return t}function pQ(e,t){let r=t.schema.nodes;for(let n in r){let i=r[n];if(!i.allowsMarkType(e))continue;let s=[],a=e=>{s.push(e);for(let r=0;r<e.edgeCount;r++){let{type:n,next:i}=e.edge(r);if(n==t||0>s.indexOf(i)&&a(i))return!0}};if(a(i.contentMatch))return!0}}class p0{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=p2(t).createDocumentFragment());let n=r,i=[];return e.forEach(e=>{if(i.length||e.marks.length){let r=0,s=0;for(;r<i.length&&s<e.marks.length;){let t=e.marks[s];if(!this.marks[t.type.name]){s++;continue}if(!t.eq(i[r][0])||!1===t.type.spec.spanning)break;r++,s++}for(;r<i.length;)n=i.pop()[1];for(;s<e.marks.length;){let r=e.marks[s++],a=this.serializeMark(r,e.isInline,t);a&&(i.push([r,n]),n.appendChild(a.dom),n=a.contentDOM||a.dom)}}n.appendChild(this.serializeNodeInner(e,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:n}=p5(p2(t),this.nodes[e.type.name](e),null,e.attrs);if(n){if(e.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,n)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let n=e.marks.length-1;n>=0;n--){let i=this.serializeMark(e.marks[n],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,t,r={}){let n=this.marks[e.type.name];return n&&p5(p2(r),n(e,t),null,e.attrs)}static renderSpec(e,t,r=null,n){return p5(e,t,r,n)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new p0(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=p1(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return p1(e.marks)}}function p1(e){let t={};for(let r in e){let n=e[r].spec.toDOM;n&&(t[r]=n)}return t}function p2(e){return e.document||window.document}let p4=new WeakMap;function p5(e,t,r,n){let i,s,a;if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let o=t[0],l;if("string"!=typeof o)throw RangeError("Invalid array passed to renderSpec");if(n&&(void 0===(s=p4.get(n))&&p4.set(n,(a=null,!function e(t){if(t&&"object"==typeof t)if(Array.isArray(t))if("string"==typeof t[0])a||(a=[]),a.push(t);else for(let r=0;r<t.length;r++)e(t[r]);else for(let r in t)e(t[r])}(n),s=a)),l=s)&&l.indexOf(t)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let d=o.indexOf(" ");d>0&&(r=o.slice(0,d),o=o.slice(d+1));let c=r?e.createElementNS(r,o):e.createElement(o),u=t[1],p=1;if(u&&"object"==typeof u&&null==u.nodeType&&!Array.isArray(u)){for(let e in p=2,u)if(null!=u[e]){let t=e.indexOf(" ");t>0?c.setAttributeNS(e.slice(0,t),e.slice(t+1),u[e]):"style"==e&&c.style?c.style.cssText=u[e]:c.setAttribute(e,u[e])}}for(let s=p;s<t.length;s++){let a=t[s];if(0===a){if(s<t.length-1||s>p)throw RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}{let{dom:t,contentDOM:s}=p5(e,a,r,n);if(c.appendChild(t),s){if(i)throw RangeError("Multiple content holes");i=s}}}return{dom:c,contentDOM:i}}class p6{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class p3{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&p3.empty)return p3.empty}recover(e){let t=0,r=65535&e;if(!this.inverted)for(let e=0;e<r;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*r]+t+(e-(65535&e))/65536}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let n=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let o=this.ranges[a]-(this.inverted?n:0);if(o>e)break;let l=this.ranges[a+i],d=this.ranges[a+s],c=o+l;if(e<=c){let i=l?e==o?-1:e==c?1:t:t,s=o+n+(i<0?0:d);if(r)return s;let u=e==(t<0?o:c)?null:a/3+(e-o)*65536,p=e==o?2:e==c?1:4;return(t<0?e!=o:e!=c)&&(p|=8),new p6(s,p,u)}n+=d-l}return r?e+n:new p6(e+n,0,null)}touches(e,t){let r=0,n=65535&t,i=this.inverted?2:1,s=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let a=this.ranges[t]-(this.inverted?r:0);if(a>e)break;let o=this.ranges[t+i];if(e<=a+o&&t==3*n)return!0;r+=this.ranges[t+s]-o}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let n=0,i=0;n<this.ranges.length;n+=3){let s=this.ranges[n],a=s-(this.inverted?i:0),o=s+(this.inverted?0:i),l=this.ranges[n+t],d=this.ranges[n+r];e(a,a+l,o,o+d),i+=d-l}}invert(){return new p3(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?p3.empty:new p3(e<0?[0,-e,0]:[0,0,e])}}p3.empty=new p3([]);class p9{constructor(e,t,r=0,n=e?e.length:0){this.mirror=t,this.from=r,this.to=n,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new p9(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let n=e.getMirror(t);this.appendMap(e._maps[t],null!=n&&n<t?r+n:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let n=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=n&&n>t?r-n-1:void 0)}}invert(){let e=new p9;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let n=0;for(let r=this.from;r<this.to;r++){let i=this._maps[r].mapResult(e,t);if(null!=i.recover){let t=this.getMirror(r);if(null!=t&&t>r&&t<this.to){r=t,e=this._maps[t].recover(i.recover);continue}}n|=i.delInfo,e=i.pos}return r?e:new p6(e,n,null)}}let p7=Object.create(null);class p8{getMap(){return p3.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw RangeError("Invalid input for Step.fromJSON");let r=p7[t.stepType];if(!r)throw RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in p7)throw RangeError("Duplicate use of step JSON ID "+e);return p7[e]=t,t.prototype.jsonID=e,t}}class he{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new he(e,null)}static fail(e){return new he(null,e)}static fromReplace(e,t,r,n){try{return he.ok(e.replace(t,r,n))}catch(e){if(e instanceof pm)return he.fail(e.message);throw e}}}function ht(e,t,r){let n=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(ht(s.content,t,s))),s.isInline&&(s=t(s,r,i)),n.push(s)}return pd.fromArray(n)}class hr extends p8{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),n=r.node(r.sharedDepth(this.to)),i=new pf(ht(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,n),t.openStart,t.openEnd);return he.fromReplace(e,this.from,this.to,i)}invert(){return new hn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new hr(t.pos,r.pos,this.mark)}merge(e){return e instanceof hr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new hr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new hr(t.from,t.to,e.markFromJSON(t.mark))}}p8.jsonID("addMark",hr);class hn extends p8{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new pf(ht(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return he.fromReplace(e,this.from,this.to,r)}invert(){return new hr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new hn(t.pos,r.pos,this.mark)}merge(e){return e instanceof hn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new hn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new hn(t.from,t.to,e.markFromJSON(t.mark))}}p8.jsonID("removeMark",hn);class hi extends p8{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return he.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return he.fromReplace(e,this.pos,this.pos+1,new pf(pd.from(r),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let r=0;r<t.marks.length;r++)if(!t.marks[r].isInSet(e))return new hi(this.pos,t.marks[r]);return new hi(this.pos,this.mark)}}return new hs(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new hi(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new hi(t.pos,e.markFromJSON(t.mark))}}p8.jsonID("addNodeMark",hi);class hs extends p8{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return he.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return he.fromReplace(e,this.pos,this.pos+1,new pf(pd.from(r),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new hi(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new hs(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new hs(t.pos,e.markFromJSON(t.mark))}}p8.jsonID("removeNodeMark",hs);class ha extends p8{constructor(e,t,r,n=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=n}apply(e){return this.structure&&hl(e,this.from,this.to)?he.fail("Structure replace would overwrite content"):he.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new p3([this.from,this.to-this.from,this.slice.size])}invert(e){return new ha(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new ha(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ha)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart)if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;else{let t=this.slice.size+e.slice.size==0?pf.empty:new pf(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ha(e.from,this.to,t,this.structure)}{let t=this.slice.size+e.slice.size==0?pf.empty:new pf(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ha(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new ha(t.from,t.to,pf.fromJSON(e,t.slice),!!t.structure)}}p8.jsonID("replace",ha);class ho extends p8{constructor(e,t,r,n,i,s,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=n,this.slice=i,this.insert=s,this.structure=a}apply(e){if(this.structure&&(hl(e,this.from,this.gapFrom)||hl(e,this.gapTo,this.to)))return he.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return he.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?he.fromReplace(e,this.from,this.to,r):he.fail("Content does not fit in gap")}getMap(){return new p3([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ho(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),n=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||n<t.pos||i>r.pos?null:new ho(t.pos,r.pos,n,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ho(t.from,t.to,t.gapFrom,t.gapTo,pf.fromJSON(e,t.slice),t.insert,!!t.structure)}}function hl(e,t,r){let n=e.resolve(t),i=r-t,s=n.depth;for(;i>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,i--;if(i>0){let e=n.node(s).maybeChild(n.indexAfter(s));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function hd(e,t,r,n=r.contentMatch,i=!0){let s=e.doc.nodeAt(t),a=[],o=t+1;for(let t=0;t<s.childCount;t++){let l=s.child(t),d=o+l.nodeSize,c=n.matchType(l.type);if(c){n=c;for(let t=0;t<l.marks.length;t++)r.allowsMarkType(l.marks[t].type)||e.step(new hn(o,d,l.marks[t]));if(i&&l.isText&&"pre"!=r.whitespace){let e,t=/\r?\n|\r/g,n;for(;e=t.exec(l.text);)n||(n=new pf(pd.from(r.schema.text(" ",r.allowedMarks(l.marks))),0,0)),a.push(new ha(o+e.index,o+e.index+e[0].length,n))}}else a.push(new ha(o,d,pf.empty));o=d}if(!n.validEnd){let t=n.fillBefore(pd.empty,!0);e.replace(o,o,new pf(t,0,0))}for(let t=a.length-1;t>=0;t--)e.step(a[t])}function hc(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth,n=0,i=0;;--r){let s=e.$from.node(r),a=e.$from.index(r)+n,o=e.$to.indexAfter(r)-i;if(r<e.depth&&s.canReplace(a,o,t))return r;if(0==r||s.type.spec.isolating||!((0==a||s.canReplace(a,s.childCount))&&(o==s.childCount||s.canReplace(0,o))))break;a&&(n=1),o<s.childCount&&(i=1)}return null}function hu(e,t,r=null,n=e){let i=function(e,t){let{parent:r,startIndex:n,endIndex:i}=e,s=r.contentMatchAt(n).findWrapping(t);if(!s)return null;let a=s.length?s[0]:t;return r.canReplaceWith(n,i,a)?s:null}(e,t),s=i&&function(e,t){let{parent:r,startIndex:n,endIndex:i}=e,s=r.child(n),a=t.contentMatch.findWrapping(s.type);if(!a)return null;let o=(a.length?a[a.length-1]:t).contentMatch;for(let e=n;o&&e<i;e++)o=o.matchType(r.child(e).type);return o&&o.validEnd?a:null}(n,t);return s?i.map(hp).concat({type:t,attrs:r}).concat(s.map(hp)):null}function hp(e){return{type:e,attrs:null}}function hh(e,t,r,n){t.forEach((i,s)=>{if(i.isText){let a,o=/\r?\n|\r/g;for(;a=o.exec(i.text);){let i=e.mapping.slice(n).map(r+1+s+a.index);e.replaceWith(i,i+1,t.type.schema.linebreakReplacement.create())}}})}function hm(e,t,r,n){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(n).map(r+1+s);e.replaceWith(i,i+1,t.type.schema.text("\n"))}})}function hf(e,t,r=1,n){let i=e.resolve(t),s=i.depth-r,a=n&&n[n.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let e=i.depth-1,t=r-2;e>s;e--,t--){let r=i.node(e),s=i.index(e);if(r.type.spec.isolating)return!1;let a=r.content.cutByIndex(s,r.childCount),o=n&&n[t+1];o&&(a=a.replaceChild(0,o.type.create(o.attrs)));let l=n&&n[t]||r;if(!r.canReplace(s+1,r.childCount)||!l.type.validContent(a))return!1}let o=i.indexAfter(s),l=n&&n[0];return i.node(s).canReplaceWith(o,o,l?l.type:i.node(s+1).type)}function hg(e,t){let r=e.resolve(t),n=r.index();return hy(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function hy(e,t){return!!(e&&t&&!e.isLeaf&&function(e,t){t.content.size||e.type.compatibleContent(t.type);let r=e.contentMatchAt(e.childCount),{linebreakReplacement:n}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),a=s.type==n?e.type.schema.nodes.text:s.type;if(!(r=r.matchType(a))||!e.type.allowsMarks(s.marks))return!1}return r.validEnd}(e,t))}function hx(e,t,r=-1){let n=e.resolve(t);for(let e=n.depth;;e--){let i,s,a=n.index(e);if(e==n.depth?(i=n.nodeBefore,s=n.nodeAfter):r>0?(i=n.node(e+1),a++,s=n.node(e).maybeChild(a)):(i=n.node(e).maybeChild(a-1),s=n.node(e+1)),i&&!i.isTextblock&&hy(i,s)&&n.node(e).canReplace(a,a+1))return t;if(0==e)break;t=r<0?n.before(e):n.after(e)}}function hb(e,t,r){let n=e.resolve(t);if(!r.content.size)return t;let i=r.content;for(let e=0;e<r.openStart;e++)i=i.firstChild.content;for(let e=1;e<=(0==r.openStart&&r.size?2:1);e++)for(let t=n.depth;t>=0;t--){let r=t==n.depth?0:n.pos<=(n.start(t+1)+n.end(t+1))/2?-1:1,s=n.index(t)+ +(r>0),a=n.node(t),o=!1;if(1==e)o=a.canReplace(s,s,i);else{let e=a.contentMatchAt(s).findWrapping(i.firstChild.type);o=e&&a.canReplaceWith(s,s,e[0])}if(o)return 0==r?n.pos:r<0?n.before(t+1):n.after(t+1)}return null}function hv(e,t,r=t,n=pf.empty){if(t==r&&!n.size)return null;let i=e.resolve(t),s=e.resolve(r);return hk(i,s,n)?new ha(t,r,n):new hw(i,s,n).fit()}function hk(e,t,r){return!r.openStart&&!r.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),r.content)}p8.jsonID("replaceAround",ho);class hw{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=pd.empty;for(let t=0;t<=e.depth;t++){let r=e.node(t);this.frontier.push({type:r.type,match:r.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=pd.from(e.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,n=this.close(e<0?this.$to:r.doc.resolve(e));if(!n)return null;let i=this.placed,s=r.depth,a=n.depth;for(;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;let o=new pf(i,s,a);return e>-1?new ho(r.pos,e,this.$to.pos,this.$to.end(),o,t):o.size||r.pos!=this.$to.pos?new ha(r.pos,n.pos,o):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,n=this.unplaced.openEnd;r<e;r++){let i=t.firstChild;if(t.childCount>1&&(n=0),i.type.spec.isolating&&n<=r){e=r;break}t=i.content}for(let t=1;t<=2;t++)for(let r=1==t?e:this.unplaced.openStart;r>=0;r--){let e=null,n=(r?(e=hS(this.unplaced.content,r-1).firstChild).content:this.unplaced.content).firstChild;for(let i=this.depth;i>=0;i--){let{type:s,match:a}=this.frontier[i],o,l=null;if(1==t&&(n?a.matchType(n.type)||(l=a.fillBefore(pd.from(n),!1)):e&&s.compatibleContent(e.type)))return{sliceDepth:r,frontierDepth:i,parent:e,inject:l};if(2==t&&n&&(o=a.findWrapping(n.type)))return{sliceDepth:r,frontierDepth:i,parent:e,wrap:o};if(e&&a.matchType(e.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,n=hS(e,t);return!!n.childCount&&!n.firstChild.isLeaf&&(this.unplaced=new pf(e,t+1,Math.max(r,n.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,n=hS(e,t);if(n.childCount<=1&&t>0){let i=e.size-t<=t+n.size;this.unplaced=new pf(hN(e,t-1,1),t-1,i?t-1:r)}else this.unplaced=new pf(hN(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:n,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let e=0;e<i.length;e++)this.openFrontierNode(i[e]);let s=this.unplaced,a=r?r.content:s.content,o=s.openStart-e,l=0,d=[],{match:c,type:u}=this.frontier[t];if(n){for(let e=0;e<n.childCount;e++)d.push(n.child(e));c=c.matchFragment(n)}let p=a.size+e-(s.content.size-s.openEnd);for(;l<a.childCount;){let e=a.child(l),t=c.matchType(e.type);if(!t)break;(++l>1||0==o||e.content.size)&&(c=t,d.push(function e(t,r,n){if(r<=0)return t;let i=t.content;return r>1&&(i=i.replaceChild(0,e(i.firstChild,r-1,1==i.childCount?n-1:0))),r>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(pd.empty,!0)))),t.copy(i)}(e.mark(u.allowedMarks(e.marks)),1==l?o:0,l==a.childCount?p:-1)))}let h=l==a.childCount;h||(p=-1),this.placed=h$(this.placed,t,pd.from(d)),this.frontier[t].match=c,h&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=a;e<p;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=h?0==e?pf.empty:new pf(hN(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new pf(hN(s.content,e,l),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!hj(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return -1;let{depth:r}=this.$to,n=this.$to.after(r);for(;r>1&&n==this.$to.end(--r);)++n;return n}findCloseLevel(e){t:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:n}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=hj(e,t,n,r,i);if(s){for(let r=t-1;r>=0;r--){let{match:t,type:n}=this.frontier[r],i=hj(e,r,n,t,!0);if(!i||i.childCount)continue t}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=h$(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let t=e.node(r),n=t.type.contentMatch.fillBefore(t.content,!0,e.index(r));this.openFrontierNode(t.type,t.attrs,n)}return e}openFrontierNode(e,t=null,r){let n=this.frontier[this.depth];n.match=n.match.matchType(e),this.placed=h$(this.placed,this.depth,pd.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(pd.empty,!0);e.childCount&&(this.placed=h$(this.placed,this.frontier.length,e))}}function hN(e,t,r){return 0==t?e.cutByIndex(r,e.childCount):e.replaceChild(0,e.firstChild.copy(hN(e.firstChild.content,t-1,r)))}function h$(e,t,r){return 0==t?e.append(r):e.replaceChild(e.childCount-1,e.lastChild.copy(h$(e.lastChild.content,t-1,r)))}function hS(e,t){for(let r=0;r<t;r++)e=e.firstChild.content;return e}function hj(e,t,r,n,i){let s=e.node(t),a=i?e.indexAfter(t):e.index(t);if(a==s.childCount&&!r.compatibleContent(s.type))return null;let o=n.fillBefore(s.content,!0,a);return o&&!function(e,t,r){for(let n=r;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return!0;return!1}(r,s.content,a)?o:null}function hT(e,t){let r=[],n=Math.min(e.depth,t.depth);for(let i=n;i>=0;i--){let n=e.start(i);if(n<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(n==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==n-1)&&r.push(i)}return r}class h_ extends p8{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return he.fail("No node at attribute step's position");let r=Object.create(null);for(let e in t.attrs)r[e]=t.attrs[e];r[this.attr]=this.value;let n=t.type.create(r,null,t.marks);return he.fromReplace(e,this.pos,this.pos+1,new pf(pd.from(n),0,+!t.isLeaf))}getMap(){return p3.empty}invert(e){return new h_(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new h_(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new h_(t.pos,t.attr,t.value)}}p8.jsonID("attr",h_);class hI extends p8{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return he.ok(r)}getMap(){return p3.empty}invert(e){return new hI(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new hI(t.attr,t.value)}}p8.jsonID("docAttr",hI);let hC=class extends Error{};(hC=function e(t){let r=Error.call(this,t);return r.__proto__=e.prototype,r}).prototype=Object.create(Error.prototype),hC.prototype.constructor=hC,hC.prototype.name="TransformError";class hA{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new p9}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new hC(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=pf.empty){let n=hv(this.doc,e,t,r);return n&&this.step(n),this}replaceWith(e,t,r){return this.replace(e,t,new pf(pd.from(r),0,0))}delete(e,t){return this.replace(e,t,pf.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return!function(e,t,r,n){if(!n.size)return e.deleteRange(t,r);let i=e.doc.resolve(t),s=e.doc.resolve(r);if(hk(i,s,n))return e.step(new ha(t,r,n));let a=hT(i,s);0==a[a.length-1]&&a.pop();let o=-(i.depth+1);a.unshift(o);for(let e=i.depth,t=i.pos-1;e>0;e--,t--){let r=i.node(e).type.spec;if(r.defining||r.definingAsContext||r.isolating)break;a.indexOf(e)>-1?o=e:i.before(e)==t&&a.splice(1,0,-e)}let l=a.indexOf(o),d=[],c=n.openStart;for(let e=n.content,t=0;;t++){let r=e.firstChild;if(d.push(r),t==n.openStart)break;e=r.content}for(let e=c-1;e>=0;e--){var u;let t=d[e],r=(u=t.type).spec.defining||u.spec.definingForContent;if(r&&!t.sameMarkup(i.node(Math.abs(o)-1)))c=e;else if(r||!t.type.isTextblock)break}for(let t=n.openStart;t>=0;t--){let o=(t+c+1)%(n.openStart+1),u=d[o];if(u)for(let t=0;t<a.length;t++){let d=a[(t+l)%a.length],c=!0;d<0&&(c=!1,d=-d);let p=i.node(d-1),h=i.index(d-1);if(p.canReplaceWith(h,h,u.type,u.marks))return e.replace(i.before(d),c?s.after(d):r,new pf(function e(t,r,n,i,s){if(r<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(e(s.content,r+1,n,i,s)))}if(r>i){let e=s.contentMatchAt(0),r=e.fillBefore(t).append(t);t=r.append(e.matchFragment(r).fillBefore(pd.empty,!0))}return t}(n.content,0,n.openStart,o),o,n.openEnd))}}let p=e.steps.length;for(let o=a.length-1;o>=0&&(e.replace(t,r,n),!(e.steps.length>p));o--){let e=a[o];e<0||(t=i.before(e),r=s.after(e))}}(this,e,t,r),this}replaceRangeWith(e,t,r){var n=e,i=t;if(!r.isInline&&n==i&&this.doc.resolve(n).parent.content.size){let e=function(e,t,r){let n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),r))return t;if(0==n.parentOffset)for(let e=n.depth-1;e>=0;e--){let t=n.index(e);if(n.node(e).canReplaceWith(t,t,r))return n.before(e+1);if(t>0)return null}if(n.parentOffset==n.parent.content.size)for(let e=n.depth-1;e>=0;e--){let t=n.indexAfter(e);if(n.node(e).canReplaceWith(t,t,r))return n.after(e+1);if(t<n.node(e).childCount)break}return null}(this.doc,n,r.type);null!=e&&(n=i=e)}return this.replaceRange(n,i,new pf(pd.from(r),0,0)),this}deleteRange(e,t){return!function(e,t,r){let n=e.doc.resolve(t),i=e.doc.resolve(r),s=hT(n,i);for(let t=0;t<s.length;t++){let r=s[t],a=t==s.length-1;if(a&&0==r||n.node(r).type.contentMatch.validEnd)return e.delete(n.start(r),i.end(r));if(r>0&&(a||n.node(r-1).canReplace(n.index(r-1),i.indexAfter(r-1))))return e.delete(n.before(r),i.after(r))}for(let s=1;s<=n.depth&&s<=i.depth;s++)if(t-n.start(s)==n.depth-s&&r>n.end(s)&&i.end(s)-r!=i.depth-s&&n.start(s-1)==i.start(s-1)&&n.node(s-1).canReplace(n.index(s-1),i.index(s-1)))return e.delete(n.before(s),r);e.delete(t,r)}(this,e,t),this}lift(e,t){return!function(e,t,r){let{$from:n,$to:i,depth:s}=t,a=n.before(s+1),o=i.after(s+1),l=a,d=o,c=pd.empty,u=0;for(let e=s,t=!1;e>r;e--)t||n.index(e)>0?(t=!0,c=pd.from(n.node(e).copy(c)),u++):l--;let p=pd.empty,h=0;for(let e=s,t=!1;e>r;e--)t||i.after(e+1)<i.end(e)?(t=!0,p=pd.from(i.node(e).copy(p)),h++):d++;e.step(new ho(l,d,a,o,new pf(c.append(p),u,h),c.size-u,!0))}(this,e,t),this}join(e,t=1){return!function(e,t,r){let n=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-r),a=s.node().type;if(i&&a.inlineContent){let e="pre"==a.whitespace,t=!!a.contentMatch.matchType(i);e&&!t?n=!1:!e&&t&&(n=!0)}let o=e.steps.length;if(!1===n){let n=e.doc.resolve(t+r);hm(e,n.node(),n.before(),o)}a.inlineContent&&hd(e,t+r-1,a,s.node().contentMatchAt(s.index()),null==n);let l=e.mapping.slice(o),d=l.map(t-r);if(e.step(new ha(d,l.map(t+r,-1),pf.empty,!0)),!0===n){let t=e.doc.resolve(d);hh(e,t.node(),t.before(),e.steps.length)}}(this,e,t),this}wrap(e,t){return!function(e,t,r){let n=pd.empty;for(let e=r.length-1;e>=0;e--){if(n.size){let t=r[e].type.contentMatch.matchFragment(n);if(!t||!t.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=pd.from(r[e].type.create(r[e].attrs,n))}let i=t.start,s=t.end;e.step(new ho(i,s,i,s,new pf(n,0,0),r.length,!0))}(this,e,t),this}setBlockType(e,t=e,r,n=null){var i=this;if(!r.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let s=i.steps.length;return i.doc.nodesBetween(e,t,(e,t)=>{var a,o,l;let d,c,u="function"==typeof n?n(e):n;if(e.isTextblock&&!e.hasMarkup(r,u)&&(a=i.doc,o=i.mapping.slice(s).map(t),l=r,c=(d=a.resolve(o)).index(),d.parent.canReplaceWith(c,c+1,l))){let n=null;if(r.schema.linebreakReplacement){let e="pre"==r.whitespace,t=!!r.contentMatch.matchType(r.schema.linebreakReplacement);e&&!t?n=!1:!e&&t&&(n=!0)}!1===n&&hm(i,e,t,s),hd(i,i.mapping.slice(s).map(t,1),r,void 0,null===n);let a=i.mapping.slice(s),o=a.map(t,1),l=a.map(t+e.nodeSize,1);return i.step(new ho(o,l,o+1,l-1,new pf(pd.from(r.create(u,null,e.marks)),0,0),1,!0)),!0===n&&hh(i,e,t,s),!1}}),this}setNodeMarkup(e,t,r=null,n){return!function(e,t,r,n,i){let s=e.doc.nodeAt(t);if(!s)throw RangeError("No node at given position");r||(r=s.type);let a=r.create(n,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,a);if(!r.validContent(s.content))throw RangeError("Invalid content for node type "+r.name);e.step(new ho(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new pf(pd.from(a),0,0),1,!0))}(this,e,t,r,n),this}setNodeAttribute(e,t,r){return this.step(new h_(e,t,r)),this}setDocAttribute(e,t){return this.step(new hI(e,t)),this}addNodeMark(e,t){return this.step(new hi(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw RangeError("No node at position "+e);if(t instanceof ph)t.isInSet(r.marks)&&this.step(new hs(e,t));else{let n=r.marks,i,s=[];for(;i=t.isInSet(n);)s.push(new hs(e,i)),n=i.removeFromSet(n);for(let e=s.length-1;e>=0;e--)this.step(s[e])}return this}split(e,t=1,r){return!function(e,t,r=1,n){let i=e.doc.resolve(t),s=pd.empty,a=pd.empty;for(let e=i.depth,t=i.depth-r,o=r-1;e>t;e--,o--){s=pd.from(i.node(e).copy(s));let t=n&&n[o];a=pd.from(t?t.type.create(t.attrs,a):i.node(e).copy(a))}e.step(new ha(t,t,new pf(s.append(a),r,r),!0))}(this,e,t,r),this}addMark(e,t,r){var n;let i,s,a,o;return n=this,a=[],o=[],n.doc.nodesBetween(e,t,(n,l,d)=>{if(!n.isInline)return;let c=n.marks;if(!r.isInSet(c)&&d.type.allowsMarkType(r.type)){let d=Math.max(l,e),u=Math.min(l+n.nodeSize,t),p=r.addToSet(c);for(let e=0;e<c.length;e++)c[e].isInSet(p)||(i&&i.to==d&&i.mark.eq(c[e])?i.to=u:a.push(i=new hn(d,u,c[e])));s&&s.to==d?s.to=u:o.push(s=new hr(d,u,r))}}),a.forEach(e=>n.step(e)),o.forEach(e=>n.step(e)),this}removeMark(e,t,r){var n;let i,s;return n=this,i=[],s=0,n.doc.nodesBetween(e,t,(n,a)=>{if(!n.isInline)return;s++;let o=null;if(r instanceof pZ){let e=n.marks,t;for(;t=r.isInSet(e);)(o||(o=[])).push(t),e=t.removeFromSet(e)}else r?r.isInSet(n.marks)&&(o=[r]):o=n.marks;if(o&&o.length){let r=Math.min(a+n.nodeSize,t);for(let t=0;t<o.length;t++){let n=o[t],l;for(let e=0;e<i.length;e++){let t=i[e];t.step==s-1&&n.eq(i[e].style)&&(l=t)}l?(l.to=r,l.step=s):i.push({style:n,from:Math.max(a,e),to:r,step:s})}}}),i.forEach(e=>n.step(new hn(e.from,e.to,e.style))),this}clearIncompatible(e,t,r){return hd(this,e,t,r),this}}let hO=Object.create(null);class hE{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new hM(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=pf.empty){let r=t.content.lastChild,n=null;for(let e=0;e<t.openEnd;e++)n=r,r=r.lastChild;let i=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:o,$to:l}=s[a],d=e.mapping.slice(i);e.replaceRange(d.map(o.pos),d.map(l.pos),a?pf.empty:t),0==a&&hV(e,i,(r?r.isInline:n&&n.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,n=this.ranges;for(let i=0;i<n.length;i++){let{$from:s,$to:a}=n[i],o=e.mapping.slice(r),l=o.map(s.pos),d=o.map(a.pos);i?e.deleteRange(l,d):(e.replaceRangeWith(l,d,t),hV(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let n=e.parent.inlineContent?new hD(e):hB(e.node(0),e.parent,e.pos,e.index(),t,r);if(n)return n;for(let n=e.depth-1;n>=0;n--){let i=t<0?hB(e.node(0),e.node(n),e.before(n+1),e.index(n),t,r):hB(e.node(0),e.node(n),e.after(n+1),e.index(n)+1,t,r);if(i)return i}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new hF(e.node(0))}static atStart(e){return hB(e,e,0,0,1)||new hF(e)}static atEnd(e){return hB(e,e,e.content.size,e.childCount,-1)||new hF(e)}static fromJSON(e,t){if(!t||!t.type)throw RangeError("Invalid input for Selection.fromJSON");let r=hO[t.type];if(!r)throw RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in hO)throw RangeError("Duplicate use of selection JSON ID "+e);return hO[e]=t,t.prototype.jsonID=e,t}getBookmark(){return hD.between(this.$anchor,this.$head).getBookmark()}}hE.prototype.visible=!0;class hM{constructor(e,t){this.$from=e,this.$to=t}}let hz=!1;function hP(e){hz||e.parent.inlineContent||(hz=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class hD extends hE{constructor(e,t=e){hP(e),hP(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return hE.near(r);let n=e.resolve(t.map(this.anchor));return new hD(n.parent.inlineContent?n:r,r)}replace(e,t=pf.empty){if(super.replace(e,t),t==pf.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof hD&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new hR(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new hD(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let n=e.resolve(t);return new this(n,r==t?n:e.resolve(r))}static between(e,t,r){let n=e.pos-t.pos;if((!r||n)&&(r=n>=0?1:-1),!t.parent.inlineContent){let e=hE.findFrom(t,r,!0)||hE.findFrom(t,-r,!0);if(!e)return hE.near(t,r);t=e.$head}return e.parent.inlineContent||(0==n?e=t:(e=(hE.findFrom(e,-r,!0)||hE.findFrom(e,r,!0)).$anchor).pos<t.pos!=n<0&&(e=t)),new hD(e,t)}}hE.jsonID("text",hD);class hR{constructor(e,t){this.anchor=e,this.head=t}map(e){return new hR(e.map(this.anchor),e.map(this.head))}resolve(e){return hD.between(e.resolve(this.anchor),e.resolve(this.head))}}class hL extends hE{constructor(e){let t=e.nodeAfter;super(e,e.node(0).resolve(e.pos+t.nodeSize)),this.node=t}map(e,t){let{deleted:r,pos:n}=t.mapResult(this.anchor),i=e.resolve(n);return r?hE.near(i):new hL(i)}content(){return new pf(pd.from(this.node),0,0)}eq(e){return e instanceof hL&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new hU(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new hL(e.resolve(t.anchor))}static create(e,t){return new hL(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}hL.prototype.visible=!1,hE.jsonID("node",hL);class hU{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new hR(r,r):new hU(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&hL.isSelectable(r)?new hL(t):hE.near(t)}}class hF extends hE{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=pf.empty){if(t==pf.empty){e.delete(0,e.doc.content.size);let t=hE.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new hF(e)}map(e){return new hF(e)}eq(e){return e instanceof hF}getBookmark(){return hZ}}hE.jsonID("all",hF);let hZ={map(){return this},resolve:e=>new hF(e)};function hB(e,t,r,n,i,s=!1){if(t.inlineContent)return hD.create(e,r);for(let a=n-(i>0?0:1);i>0?a<t.childCount:a>=0;a+=i){let n=t.child(a);if(n.isAtom){if(!s&&hL.isSelectable(n))return hL.create(e,r-(i<0?n.nodeSize:0))}else{let t=hB(e,n,r+i,i<0?n.childCount:0,i,s);if(t)return t}r+=n.nodeSize*i}return null}function hV(e,t,r){let n,i=e.steps.length-1;if(i<t)return;let s=e.steps[i];(s instanceof ha||s instanceof ho)&&(e.mapping.maps[i].forEach((e,t,r,i)=>{null==n&&(n=i)}),e.setSelection(hE.near(e.doc.resolve(n),r)))}class hH extends hA{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(1|this.updated)&-3,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return ph.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ph.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let n=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(n.text(e),!0):this.deleteSelection();{if(null==r&&(r=t),!e)return this.deleteRange(t,r);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=r==t?e.marks():e.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,n.text(e,i)),this.selection.empty||this.selection.to!=t+e.length||this.setSelection(hE.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function hW(e,t){return t&&e?e.bind(t):e}class hK{constructor(e,t,r){this.name=e,this.init=hW(t.init,r),this.apply=hW(t.apply,r)}}let hq=[new hK("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new hK("selection",{init:(e,t)=>e.selection||hE.atStart(t.doc),apply:e=>e.selection}),new hK("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,r,n)=>n.selection.$cursor?e.storedMarks:null}),new hK("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class hJ{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=hq.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new hK(e.key,e.spec.state,e))})}}class hG{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let t=this.config.plugins[r];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),n=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let o=n?n[s].n:0,l=n?n[s].state:this,d=o<t.length&&a.spec.appendTransaction.call(a,o?t.slice(o):t,l,r);if(d&&r.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",e),!n){n=[];for(let e=0;e<this.config.plugins.length;e++)n.push(e<s?{state:r,n:t.length}:{state:this,n:0})}t.push(d),r=r.applyInner(d),i=!0}n&&(n[s]={state:r,n:t.length})}}if(!i)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let t=new hG(this.config),r=this.config.fields;for(let n=0;n<r.length;n++){let i=r[n];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new hH(this)}static create(e){let t=new hJ(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new hG(t);for(let n=0;n<t.fields.length;n++)r[t.fields[n].name]=t.fields[n].init(e,r);return r}reconfigure(e){let t=new hJ(this.schema,e.plugins),r=t.fields,n=new hG(t);for(let t=0;t<r.length;t++){let i=r[t].name;n[i]=this.hasOwnProperty(i)?this[i]:r[t].init(e,n)}return n}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let r in e){if("doc"==r||"selection"==r)throw RangeError("The JSON fields `doc` and `selection` are reserved");let n=e[r],i=n.spec.state;i&&i.toJSON&&(t[r]=i.toJSON.call(n,this[n.key]))}return t}static fromJSON(e,t,r){if(!t)throw RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw RangeError("Required config field 'schema' missing");let n=new hJ(e.schema,e.plugins),i=new hG(n);return n.fields.forEach(n=>{if("doc"==n.name)i.doc=p_.fromJSON(e.schema,t.doc);else if("selection"==n.name)i.selection=hE.fromJSON(i.doc,t.selection);else if("storedMarks"==n.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let s in r){let a=r[s],o=a.spec.state;if(a.key==n.name&&o&&o.fromJSON&&Object.prototype.hasOwnProperty.call(t,s)){i[n.name]=o.fromJSON.call(a,e,t[s],i);return}}i[n.name]=n.init(e,i)}}),i}}class hY{constructor(e){this.spec=e,this.props={},e.props&&function e(t,r,n){for(let i in t){let s=t[i];s instanceof Function?s=s.bind(r):"handleDOMEvents"==i&&(s=e(s,r,{})),n[i]=s}return n}(e.props,this,this.props),this.key=e.key?e.key.key:hQ("plugin")}getState(e){return e[this.key]}}let hX=Object.create(null);function hQ(e){return e in hX?e+"$"+ ++hX[e]:(hX[e]=0,e+"$")}class h0{constructor(e="key"){this.key=hQ(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}let h1=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function h2(e,t){let{$cursor:r}=e.selection;return r&&(t?t.endOfTextblock("backward",e):!(r.parentOffset>0))?r:null}let h4=(e,t,r)=>{let n=h2(e,r);if(!n)return!1;let i=h9(n);if(!i){let r=n.blockRange(),i=r&&hc(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)}let s=i.nodeBefore;if(mo(e,i,t,-1))return!0;if(0==n.parent.content.size&&(h6(s,"end")||hL.isSelectable(s)))for(let r=n.depth;;r--){let a=hv(e.doc,n.before(r),n.after(r),pf.empty);if(a&&a.slice.size<a.to-a.from){if(t){let r=e.tr.step(a);r.setSelection(h6(s,"end")?hE.findFrom(r.doc.resolve(r.mapping.map(i.pos,-1)),-1):hL.create(r.doc,i.pos-s.nodeSize)),t(r.scrollIntoView())}return!0}if(1==r||n.node(r-1).childCount>1)break}return!!s.isAtom&&i.depth==n.depth-1&&(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0)};function h5(e,t,r){let n=t.nodeBefore,i=t.pos-1;for(;!n.isTextblock;i--){if(n.type.spec.isolating)return!1;let e=n.lastChild;if(!e)return!1;n=e}let s=t.nodeAfter,a=t.pos+1;for(;!s.isTextblock;a++){if(s.type.spec.isolating)return!1;let e=s.firstChild;if(!e)return!1;s=e}let o=hv(e.doc,i,a,pf.empty);if(!o||o.from!=i||o instanceof ha&&o.slice.size>=a-i)return!1;if(r){let t=e.tr.step(o);t.setSelection(hD.create(t.doc,i)),r(t.scrollIntoView())}return!0}function h6(e,t,r=!1){for(let n=e;n;n="start"==t?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&1!=n.childCount)break}return!1}let h3=(e,t,r)=>{let{$head:n,empty:i}=e.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",e):n.parentOffset>0)return!1;s=h9(n)}let a=s&&s.nodeBefore;return!!a&&!!hL.isSelectable(a)&&(t&&t(e.tr.setSelection(hL.create(e.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function h9(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function h7(e,t){let{$cursor:r}=e.selection;return r&&(t?t.endOfTextblock("forward",e):!(r.parentOffset<r.parent.content.size))?r:null}let h8=(e,t,r)=>{let n=h7(e,r);if(!n)return!1;let i=mt(n);if(!i)return!1;let s=i.nodeAfter;if(mo(e,i,t,1))return!0;if(0==n.parent.content.size&&(h6(s,"start")||hL.isSelectable(s))){let r=hv(e.doc,n.before(),n.after(),pf.empty);if(r&&r.slice.size<r.to-r.from){if(t){let n=e.tr.step(r);n.setSelection(h6(s,"start")?hE.findFrom(n.doc.resolve(n.mapping.map(i.pos)),1):hL.create(n.doc,n.mapping.map(i.pos))),t(n.scrollIntoView())}return!0}}return!!s.isAtom&&i.depth==n.depth-1&&(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0)},me=(e,t,r)=>{let{$head:n,empty:i}=e.selection,s=n;if(!i)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)return!1;s=mt(n)}let a=s&&s.nodeAfter;return!!a&&!!hL.isSelectable(a)&&(t&&t(e.tr.setSelection(hL.create(e.doc,s.pos)).scrollIntoView()),!0)};function mt(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let r=e.node(t);if(e.index(t)+1<r.childCount)return e.doc.resolve(e.after(t+1));if(r.type.spec.isolating)break}return null}let mr=(e,t)=>{let{$head:r,$anchor:n}=e.selection;return!!r.parent.type.spec.code&&!!r.sameParent(n)&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function mn(e){for(let t=0;t<e.edgeCount;t++){let{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}let mi=(e,t)=>{let{$head:r,$anchor:n}=e.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let i=r.node(-1),s=r.indexAfter(-1),a=mn(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(t){let n=r.after(),i=e.tr.replaceWith(n,n,a.createAndFill());i.setSelection(hE.near(i.doc.resolve(n),1)),t(i.scrollIntoView())}return!0},ms=(e,t)=>{let r=e.selection,{$from:n,$to:i}=r;if(r instanceof hF||n.parent.inlineContent||i.parent.inlineContent)return!1;let s=mn(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let r=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,a=e.tr.insert(r,s.createAndFill());a.setSelection(hD.create(a.doc,r+1)),t(a.scrollIntoView())}return!0},ma=(e,t)=>{let{$cursor:r}=e.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let n=r.before();if(hf(e.doc,n))return t&&t(e.tr.split(n).scrollIntoView()),!0}let n=r.blockRange(),i=n&&hc(n);return null!=i&&(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)};function mo(e,t,r,n){let i,s,a,o=t.nodeBefore,l=t.nodeAfter,d,c,u=o.type.spec.isolating||l.type.spec.isolating;if(!u&&(i=t.nodeBefore,s=t.nodeAfter,a=t.index(),i&&s&&i.type.compatibleContent(s.type)&&(!i.content.size&&t.parent.canReplace(a-1,a)?(r&&r(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!!t.parent.canReplace(a,a+1)&&!!(s.isTextblock||hg(e.doc,t.pos))&&(r&&r(e.tr.join(t.pos).scrollIntoView()),!0))))return!0;let p=!u&&t.parent.canReplace(t.index(),t.index()+1);if(p&&(d=(c=o.contentMatchAt(o.childCount)).findWrapping(l.type))&&c.matchType(d[0]||l.type).validEnd){if(r){let n=t.pos+l.nodeSize,i=pd.empty;for(let e=d.length-1;e>=0;e--)i=pd.from(d[e].create(null,i));i=pd.from(o.copy(i));let s=e.tr.step(new ho(t.pos-1,n,t.pos,n,new pf(i,1,0),d.length,!0)),a=s.doc.resolve(n+2*d.length);a.nodeAfter&&a.nodeAfter.type==o.type&&hg(s.doc,a.pos)&&s.join(a.pos),r(s.scrollIntoView())}return!0}let h=l.type.spec.isolating||n>0&&u?null:hE.findFrom(t,1),m=h&&h.$from.blockRange(h.$to),f=m&&hc(m);if(null!=f&&f>=t.depth)return r&&r(e.tr.lift(m,f).scrollIntoView()),!0;if(p&&h6(l,"start",!0)&&h6(o,"end")){let n=o,i=[];for(;i.push(n),!n.isTextblock;)n=n.lastChild;let s=l,a=1;for(;!s.isTextblock;s=s.firstChild)a++;if(n.canReplace(n.childCount,n.childCount,s.content)){if(r){let n=pd.empty;for(let e=i.length-1;e>=0;e--)n=pd.from(i[e].copy(n));r(e.tr.step(new ho(t.pos-i.length,t.pos+l.nodeSize,t.pos+a,t.pos+l.nodeSize-a,new pf(n,i.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function ml(e){return function(t,r){let n=t.selection,i=e<0?n.$from:n.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return!!i.node(s).isTextblock&&(r&&r(t.tr.setSelection(hD.create(t.doc,e<0?i.start(s):i.end(s)))),!0)}}let md=ml(-1),mc=ml(1);function mu(e,t=null){return function(r,n){let i=!1;for(let n=0;n<r.selection.ranges.length&&!i;n++){let{$from:{pos:s},$to:{pos:a}}=r.selection.ranges[n];r.doc.nodesBetween(s,a,(n,s)=>{if(i)return!1;if(!(!n.isTextblock||n.hasMarkup(e,t)))if(n.type==e)i=!0;else{let t=r.doc.resolve(s),n=t.index();i=t.parent.canReplaceWith(n,n+1,e)}})}if(!i)return!1;if(n){let i=r.tr;for(let n=0;n<r.selection.ranges.length;n++){let{$from:{pos:s},$to:{pos:a}}=r.selection.ranges[n];i.setBlockType(s,a,e,t)}n(i.scrollIntoView())}return!0}}function mp(...e){return function(t,r,n){for(let i=0;i<e.length;i++)if(e[i](t,r,n))return!0;return!1}}let mh=mp(h1,h4,h3),mm=mp(h1,h8,me),mf={Enter:mp(mr,ms,ma,(e,t)=>{let{$from:r,$to:n}=e.selection;if(e.selection instanceof hL&&e.selection.node.isBlock)return!!r.parentOffset&&!!hf(e.doc,r.pos)&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],s,a,o=!1,l=!1;for(let e=r.depth;;e--){if(r.node(e).isBlock){let t;o=r.end(e)==r.pos+(r.depth-e),l=r.start(e)==r.pos-(r.depth-e),a=mn(r.node(e-1).contentMatchAt(r.indexAfter(e-1)));i.unshift(t||(o&&a?{type:a}:null)),s=e;break}if(1==e)return!1;i.unshift(null)}let d=e.tr;(e.selection instanceof hD||e.selection instanceof hF)&&d.deleteSelection();let c=d.mapping.map(r.pos),u=hf(d.doc,c,i.length,i);if(u||(i[0]=a?{type:a}:null,u=hf(d.doc,c,i.length,i)),!u)return!1;if(d.split(c,i.length,i),!o&&l&&r.node(s).type!=a){let e=d.mapping.map(r.before(s)),t=d.doc.resolve(e);a&&r.node(s-1).canReplaceWith(t.index(),t.index()+1,a)&&d.setNodeMarkup(d.mapping.map(r.before(s)),a)}return t&&t(d.scrollIntoView()),!0}),"Mod-Enter":mi,Backspace:mh,"Mod-Backspace":mh,"Shift-Backspace":mh,Delete:mm,"Mod-Delete":mm,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new hF(e.doc))),!0)},mg={"Ctrl-h":mf.Backspace,"Alt-Backspace":mf["Mod-Backspace"],"Ctrl-d":mf.Delete,"Ctrl-Alt-Backspace":mf["Mod-Delete"],"Alt-Delete":mf["Mod-Delete"],"Alt-d":mf["Mod-Delete"],"Ctrl-a":md,"Ctrl-e":mc};for(let e in mf)mg[e]=mf[e];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();let my=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},mx=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},mb=null,mv=function(e,t,r){let n=mb||(mb=document.createRange());return n.setEnd(e,null==r?e.nodeValue.length:r),n.setStart(e,t||0),n},mk=function(){mb=null},mw=function(e,t,r,n){return r&&(m$(e,t,r,n,-1)||m$(e,t,r,n,1))},mN=/^(img|br|input|textarea|hr)$/i;function m$(e,t,r,n,i){for(var s;;){if(e==r&&t==n)return!0;if(t==(i<0?0:mS(e))){let r=e.parentNode;if(!r||1!=r.nodeType||mj(e)||mN.test(e.nodeName)||"false"==e.contentEditable)return!1;t=my(e)+(i<0?0:1),e=r}else{if(1!=e.nodeType)return!1;let r=e.childNodes[t+(i<0?-1:0)];if(1==r.nodeType&&"false"==r.contentEditable)if(null==(s=r.pmViewDesc)||!s.ignoreForSelection)return!1;else t+=i;else e=r,t=i<0?mS(e):0}}}function mS(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function mj(e){let t;for(let r=e;r&&!(t=r.pmViewDesc);r=r.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}let mT=function(e){return e.focusNode&&mw(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function m_(e,t){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=e,r.key=r.code=t,r}let mI="undefined"!=typeof navigator?navigator:null,mC="undefined"!=typeof document?document:null,mA=mI&&mI.userAgent||"",mO=/Edge\/(\d+)/.exec(mA),mE=/MSIE \d/.exec(mA),mM=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(mA),mz=!!(mE||mM||mO),mP=mE?document.documentMode:mM?+mM[1]:mO?+mO[1]:0,mD=!mz&&/gecko\/(\d+)/i.test(mA);mD&&(/Firefox\/(\d+)/.exec(mA)||[0,0])[1];let mR=!mz&&/Chrome\/(\d+)/.exec(mA),mL=!!mR,mU=mR?+mR[1]:0,mF=!mz&&!!mI&&/Apple Computer/.test(mI.vendor),mZ=mF&&(/Mobile\/\w+/.test(mA)||!!mI&&mI.maxTouchPoints>2),mB=mZ||!!mI&&/Mac/.test(mI.platform),mV=!!mI&&/Win/.test(mI.platform),mH=/Android \d/.test(mA),mW=!!mC&&"webkitFontSmoothing"in mC.documentElement.style,mK=mW?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function mq(e,t){return"number"==typeof e?e:e[t]}function mJ(e,t,r){let n=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let a=r||e.dom;a;){if(1!=a.nodeType){a=mx(a);continue}let e=a,r=e==s.body,o=r?function(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}(s):function(e){let t=e.getBoundingClientRect(),r=t.width/e.offsetWidth||1,n=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*r,top:t.top,bottom:t.top+e.clientHeight*n}}(e),l=0,d=0;if(t.top<o.top+mq(n,"top")?d=-(o.top-t.top+mq(i,"top")):t.bottom>o.bottom-mq(n,"bottom")&&(d=t.bottom-t.top>o.bottom-o.top?t.top+mq(i,"top")-o.top:t.bottom-o.bottom+mq(i,"bottom")),t.left<o.left+mq(n,"left")?l=-(o.left-t.left+mq(i,"left")):t.right>o.right-mq(n,"right")&&(l=t.right-o.right+mq(i,"right")),l||d)if(r)s.defaultView.scrollBy(l,d);else{let r=e.scrollLeft,n=e.scrollTop;d&&(e.scrollTop+=d),l&&(e.scrollLeft+=l);let i=e.scrollLeft-r,s=e.scrollTop-n;t={left:t.left-i,top:t.top-s,right:t.right-i,bottom:t.bottom-s}}let c=r?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(c))break;a="absolute"==c?a.offsetParent:mx(a)}}function mG(e){let t=[],r=e.ownerDocument;for(let n=e;n&&(t.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),e!=r);n=mx(n));return t}function mY(e,t){for(let r=0;r<e.length;r++){let{dom:n,top:i,left:s}=e[r];n.scrollTop!=i+t&&(n.scrollTop=i+t),n.scrollLeft!=s&&(n.scrollLeft=s)}}let mX=null;function mQ(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function m0(e){return e.top<e.bottom||e.left<e.right}function m1(e,t){let r=e.getClientRects();if(r.length){let e=r[t<0?0:r.length-1];if(m0(e))return e}return Array.prototype.find.call(r,m0)||e.getBoundingClientRect()}let m2=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function m4(e,t,r){let{node:n,offset:i,atom:s}=e.docView.domFromPos(t,r<0?-1:1),a=mW||mD;if(3==n.nodeType)if(a&&(m2.test(n.nodeValue)||(r<0?!i:i==n.nodeValue.length))){let e=m1(mv(n,i,i),r);if(mD&&i&&/\s/.test(n.nodeValue[i-1])&&i<n.nodeValue.length){let t=m1(mv(n,i-1,i-1),-1);if(t.top==e.top){let r=m1(mv(n,i,i+1),-1);if(r.top!=e.top)return m5(r,r.left<t.left)}}return e}else{let e=i,t=i,s=r<0?1:-1;return r<0&&!i?(t++,s=-1):r>=0&&i==n.nodeValue.length?(e--,s=1):r<0?e--:t++,m5(m1(mv(n,e,t),s),s<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(null==s&&i&&(r<0||i==mS(n))){let e=n.childNodes[i-1];if(1==e.nodeType)return m6(e.getBoundingClientRect(),!1)}if(null==s&&i<mS(n)){let e=n.childNodes[i];if(1==e.nodeType)return m6(e.getBoundingClientRect(),!0)}return m6(n.getBoundingClientRect(),r>=0)}if(null==s&&i&&(r<0||i==mS(n))){let e=n.childNodes[i-1],t=3==e.nodeType?mv(e,mS(e)-!a):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return m5(m1(t,1),!1)}if(null==s&&i<mS(n)){let e=n.childNodes[i];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?mv(e,0,+!a):1==e.nodeType?e:null:null;if(t)return m5(m1(t,-1),!0)}return m5(m1(3==n.nodeType?mv(n):n,-r),r>=0)}function m5(e,t){if(0==e.width)return e;let r=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:r,right:r}}function m6(e,t){if(0==e.height)return e;let r=t?e.top:e.bottom;return{top:r,bottom:r,left:e.left,right:e.right}}function m3(e,t,r){let n=e.state,i=e.root.activeElement;n!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return r()}finally{n!=t&&e.updateState(n),i!=e.dom&&i&&i.focus()}}let m9=/[\u0590-\u08ac]/,m7=null,m8=null,fe=!1;class ft{constructor(e,t,r,n){this.parent=e,this.children=t,this.dom=r,this.contentDOM=n,this.dirty=0,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let n=this.children[t];if(n==e)return r;r+=n.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){let n;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode))if(r<0){let r,n;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&!((n=r.pmViewDesc)&&n.parent==this);)r=r.previousSibling;return r?this.posBeforeChild(n)+n.size:this.posAtStart}else{let r,n;if(e==this.contentDOM)r=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.nextSibling}for(;r&&!((n=r.pmViewDesc)&&n.parent==this);)r=r.nextSibling;return r?this.posBeforeChild(n):this.posAtEnd}if(e==this.dom&&this.contentDOM)n=t>my(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))n=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){n=!1;break}if(t.previousSibling)break}if(null==n&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){n=!0;break}if(t.nextSibling)break}}return(null==n?r>0:n)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,n=e;n;n=n.parentNode){let i=this.getDesc(n),s;if(i&&(!t||i.node))if(!r||!(s=i.nodeDOM)||(1==s.nodeType?s.contains(1==e.nodeType?e:e.parentNode):s==e))return i;else r=!1}}getDesc(e){let t=e.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(e,t,r){for(let n=e;n;n=n.parentNode){let i=this.getDesc(n);if(i)return i.localPosFromDOM(e,t,r)}return -1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let n=this.children[t],i=r+n.size;if(r==e&&i!=r){for(;!n.border&&n.children.length;)for(let e=0;e<n.children.length;e++){let t=n.children[e];if(t.size){n=t;break}}return n}if(e<i)return n.descAt(e-r-n.border);r=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,n=0;for(let t=0;r<this.children.length;r++){let i=this.children[r],s=t+i.size;if(s>e||i instanceof fl){n=e-t;break}t=s}if(n)return this.children[r].domFromPos(n-this.children[r].border,t);for(let e;r&&!(e=this.children[r-1]).size&&e instanceof fr&&e.side>=0;r--);if(t<=0){let e,n=!0;for(;(e=r?this.children[r-1]:null)&&e.dom.parentNode!=this.contentDOM;r--,n=!1);return e&&t&&n&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?my(e.dom)+1:0}}{let e,n=!0;for(;(e=r<this.children.length?this.children[r]:null)&&e.dom.parentNode!=this.contentDOM;r++,n=!1);return e&&n&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?my(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let n=-1,i=-1;for(let s=r,a=0;;a++){let r=this.children[a],o=s+r.size;if(-1==n&&e<=o){let i=s+r.border;if(e>=i&&t<=o-r.border&&r.node&&r.contentDOM&&this.contentDOM.contains(r.contentDOM))return r.parseRange(e,t,i);e=s;for(let t=a;t>0;t--){let r=this.children[t-1];if(r.size&&r.dom.parentNode==this.contentDOM&&!r.emptyChildAt(1)){n=my(r.dom)+1;break}e-=r.size}-1==n&&(n=0)}if(n>-1&&(o>t||a==this.children.length-1)){t=o;for(let e=a+1;e<this.children.length;e++){let r=this.children[e];if(r.size&&r.dom.parentNode==this.contentDOM&&!r.emptyChildAt(-1)){i=my(r.dom);break}t+=r.size}-1==i&&(i=this.contentDOM.childNodes.length);break}s=o}return{node:this.contentDOM,from:e,to:t,fromOffset:n,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(1!=t.nodeType||r==t.childNodes.length)throw RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,n=!1){let i=Math.min(e,t),s=Math.max(e,t);for(let a=0,o=0;a<this.children.length;a++){let l=this.children[a],d=o+l.size;if(i>o&&s<d)return l.setSelection(e-o-l.border,t-o-l.border,r,n);o=d}let a=this.domFromPos(e,e?-1:1),o=t==e?a:this.domFromPos(t,t?-1:1),l=r.root.getSelection(),d=r.domSelectionRange(),c=!1;if((mD||mF)&&e==t){let{node:e,offset:t}=a;if(3==e.nodeType){if((c=!!(t&&"\n"==e.nodeValue[t-1]))&&t==e.nodeValue.length)for(let t=e,r;t;t=t.parentNode){if(r=t.nextSibling){"BR"==r.nodeName&&(a=o={node:r.parentNode,offset:my(r)+1});break}let e=t.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let r=e.childNodes[t-1];c=r&&("BR"==r.nodeName||"false"==r.contentEditable)}}if(mD&&d.focusNode&&d.focusNode!=o.node&&1==d.focusNode.nodeType){let e=d.focusNode.childNodes[d.focusOffset];e&&"false"==e.contentEditable&&(n=!0)}if(!(n||c&&mF)&&mw(a.node,a.offset,d.anchorNode,d.anchorOffset)&&mw(o.node,o.offset,d.focusNode,d.focusOffset))return;let u=!1;if((l.extend||e==t)&&!(c&&mD)){l.collapse(a.node,a.offset);try{e!=t&&l.extend(o.node,o.offset),u=!0}catch(e){}}if(!u){if(e>t){let e=a;a=o,o=e}let r=document.createRange();r.setEnd(o.node,o.offset),r.setStart(a.node,a.offset),l.removeAllRanges(),l.addRange(r)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,n=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==s?e<=s&&t>=r:e<s&&t>r){let n=r+i.border,a=s-i.border;if(e>=n&&t<=a){this.dirty=e==r||t==s?2:1,e==n&&t==a&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=3:i.markDirty(e-n,t-n);return}i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?3:2}r=s}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=1==e?2:1;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class fr extends ft{constructor(e,t,r,n){let i,s=t.type.toDOM;if("function"==typeof s&&(s=s(r,()=>i?i.parent?i.parent.posBeforeChild(i):void 0:n)),!t.type.spec.raw){if(1!=s.nodeType){let e=document.createElement("span");e.appendChild(s),s=e}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class fn extends ft{constructor(e,t,r,n){super(e,[],t,null),this.textDOM=r,this.text=n}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class fi extends ft{constructor(e,t,r,n,i){super(e,[],r,n),this.mark=t,this.spec=i}static create(e,t,r,n){let i=n.nodeViews[t.type.name],s=i&&i(t,n,r);return s&&s.dom||(s=p0.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new fi(e,t,s.dom,s.contentDOM||s.dom,s)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,r){let n=fi.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;t<s&&(i=fb(i,t,s,r)),e>0&&(i=fb(i,0,e,r));for(let e=0;e<i.length;e++)i[e].parent=n;return n.children=i,n}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class fs extends ft{constructor(e,t,r,n,i,s,a,o,l){super(e,[],i,s),this.node=t,this.outerDeco=r,this.innerDeco=n,this.nodeDOM=a}static create(e,t,r,n,i,s){let a=i.nodeViews[t.type.name],o,l=a&&a(t,i,()=>o?o.parent?o.parent.posBeforeChild(o):void 0:s,r,n),d=l&&l.dom,c=l&&l.contentDOM;if(t.isText)if(d){if(3!=d.nodeType)throw RangeError("Text must be rendered as a DOM text node")}else d=document.createTextNode(t.text);else if(!d){let e=p0.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:d,contentDOM:c}=e)}c||t.isText||"BR"==d.nodeName||(d.hasAttribute("contenteditable")||(d.contentEditable="false"),t.type.spec.draggable&&(d.draggable=!0));let u=d;return(d=fm(d,r,t),l)?o=new fd(e,t,r,n,d,c||null,u,l,i,s+1):t.isText?new fo(e,t,r,n,d,u,i):new fs(e,t,r,n,d,c||null,u,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>pd.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,r){return 0==this.dirty&&e.eq(this.node)&&ff(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return+!this.node.isLeaf}updateChildren(e,t){let r=this.node.inlineContent,n=t,i=e.composing?this.localCompositionInfo(e,t):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,o=new fy(this,s&&s.node,e);(function(e,t,r,n){let i=t.locals(e),s=0;if(0==i.length){for(let r=0;r<e.childCount;r++){let a=e.child(r);n(a,i,t.forChild(s,a),r),s+=a.nodeSize}return}let a=0,o=[],l=null;for(let d=0;;){let c,u,p,h;for(;a<i.length&&i[a].to==s;){let e=i[a++];e.widget&&(c?(u||(u=[c])).push(e):c=e)}if(c)if(u){u.sort(fx);for(let e=0;e<u.length;e++)r(u[e],d,!!l)}else r(c,d,!!l);if(l)h=-1,p=l,l=null;else if(d<e.childCount)h=d,p=e.child(d++);else break;for(let e=0;e<o.length;e++)o[e].to<=s&&o.splice(e--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)o.push(i[a++]);let m=s+p.nodeSize;if(p.isText){let e=m;a<i.length&&i[a].from<e&&(e=i[a].from);for(let t=0;t<o.length;t++)o[t].to<e&&(e=o[t].to);e<m&&(l=p.cut(e-s),p=p.cut(0,e-s),m=e,h=-1)}else for(;a<i.length&&i[a].to<m;)a++;let f=p.isInline&&!p.isLeaf?o.filter(e=>!e.inline):o.slice();n(p,f,t.forChild(s,p),h),s=m}})(this.node,this.innerDeco,(t,i,s)=>{t.spec.marks?o.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!s&&o.syncToMarks(i==this.node.childCount?ph.none:this.node.child(i).marks,r,e),o.placeWidget(t,e,n)},(t,s,l,d)=>{let c;o.syncToMarks(t.marks,r,e),o.findNodeMatch(t,s,l,d)||a&&e.state.selection.from>n&&e.state.selection.to<n+t.nodeSize&&(c=o.findIndexWithChild(i.node))>-1&&o.updateNodeAt(t,s,l,c,e)||o.updateNextNode(t,s,l,e,d,n)||o.addNode(t,s,l,e,n),n+=t.nodeSize}),o.syncToMarks([],r,e),this.node.isTextblock&&o.addTextblockHacks(),o.destroyRest(),(o.changed||2==this.dirty)&&(s&&this.protectLocalComposition(e,s),function e(t,r,n){let i=t.firstChild,s=!1;for(let a=0;a<r.length;a++){let o=r[a],l=o.dom;if(l.parentNode==t){for(;l!=i;)i=fg(i),s=!0;i=i.nextSibling}else s=!0,t.insertBefore(l,i);if(o instanceof fi){let r=i?i.previousSibling:t.lastChild;e(o.contentDOM,o.children,n),i=r?r.nextSibling:t.firstChild}}for(;i;)i=fg(i),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}(this.contentDOM,this.children,e),mZ&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:r,to:n}=e.state.selection;if(!(e.state.selection instanceof hD)||r<t||n>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(!this.node.inlineContent)return{node:i,pos:-1,text:""};{let e=i.nodeValue,s=function(e,t,r,n){for(let i=0,s=0;i<e.childCount&&s<=n;){let a=e.child(i++),o=s;if(s+=a.nodeSize,!a.isText)continue;let l=a.text;for(;i<e.childCount;){let t=e.child(i++);if(s+=t.nodeSize,!t.isText)break;l+=t.text}if(s>=r){if(s>=n&&l.slice(n-t.length-o,n-o)==t)return n-t.length;let e=o<n?l.lastIndexOf(t,n-o-1):-1;if(e>=0&&e+t.length+o>=r)return o+e;if(r==n&&l.length>=n+t.length-o&&l.slice(n-o,n-o+t.length)==t)return n}}return -1}(this.node.content,e,r-t,n-t);return s<0?null:{node:i,pos:s,text:e}}}protectLocalComposition(e,{node:t,pos:r,text:n}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new fn(this,i,t,n);e.input.compositionNodes.push(s),this.children=fb(this.children,r,r+n.length,e,s)}update(e,t,r,n){return 3!=this.dirty&&!!e.sameMarkup(this.node)&&(this.updateInner(e,t,r,n),!0)}updateInner(e,t,r,n){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(ff(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,r=this.dom;this.dom=fh(this.dom,this.nodeDOM,fp(this.outerDeco,this.node,t),fp(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function fa(e,t,r,n,i){fm(n,t,e);let s=new fs(void 0,e,t,r,n,n,n,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class fo extends fs{constructor(e,t,r,n,i,s,a){super(e,t,r,n,i,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,n){return 3!=this.dirty&&(0==this.dirty||!!this.inParent())&&!!e.sameMarkup(this.node)&&(this.updateOuterDeco(t),(0!=this.dirty||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,n.trackWrites==this.nodeDOM&&(n.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,r){let n=this.node.cut(e,t),i=document.createTextNode(n.text);return new fo(this.parent,n,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(0==e||t==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class fl extends ft{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class fd extends fs{constructor(e,t,r,n,i,s,a,o,l,d){super(e,t,r,n,i,s,a,l,d),this.spec=o}update(e,t,r,n){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,r);return i&&this.updateInner(e,t,r,n),i}return(!!this.contentDOM||!!e.isLeaf)&&super.update(e,t,r,n)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,n){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,n)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}let fc=function(e){e&&(this.nodeName=e)};fc.prototype=Object.create(null);let fu=[new fc];function fp(e,t,r){if(0==e.length)return fu;let n=r?fu[0]:new fc,i=[n];for(let s=0;s<e.length;s++){let a=e[s].type.attrs;if(a)for(let e in a.nodeName&&i.push(n=new fc(a.nodeName)),a){let s=a[e];null!=s&&(r&&1==i.length&&i.push(n=new fc(t.isInline?"span":"div")),"class"==e?n.class=(n.class?n.class+" ":"")+s:"style"==e?n.style=(n.style?n.style+";":"")+s:"nodeName"!=e&&(n[e]=s))}}return i}function fh(e,t,r,n){if(r==fu&&n==fu)return t;let i=t;for(let t=0;t<n.length;t++){let s=n[t],a=r[t];if(t){let t;a&&a.nodeName==s.nodeName&&i!=e&&(t=i.parentNode)&&t.nodeName.toLowerCase()==s.nodeName||((t=document.createElement(s.nodeName)).pmIsDeco=!0,t.appendChild(i),a=fu[0]),i=t}!function(e,t,r){for(let n in t)"class"==n||"style"==n||"nodeName"==n||n in r||e.removeAttribute(n);for(let n in r)"class"!=n&&"style"!=n&&"nodeName"!=n&&r[n]!=t[n]&&e.setAttribute(n,r[n]);if(t.class!=r.class){let n=t.class?t.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let t=0;t<n.length;t++)-1==i.indexOf(n[t])&&e.classList.remove(n[t]);for(let t=0;t<i.length;t++)-1==n.indexOf(i[t])&&e.classList.add(i[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=r.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,n;for(;n=r.exec(t.style);)e.style.removeProperty(n[1])}r.style&&(e.style.cssText+=r.style)}}(i,a||fu[0],s)}return i}function fm(e,t,r){return fh(e,e,fu,fp(t,r,1!=e.nodeType))}function ff(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].type.eq(t[r].type))return!1;return!0}function fg(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class fy{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let r=t,n=r.children.length,i=e.childCount,s=new Map,a=[];r:for(;i>0;){let o;for(;;)if(n){let e=r.children[n-1];if(e instanceof fi)r=e,n=e.children.length;else{o=e,n--;break}}else if(r==t)break r;else n=r.parent.children.indexOf(r),r=r.parent;let l=o.node;if(l){if(l!=e.child(i-1))break;--i,s.set(o,i),a.push(o)}}return{index:i,matched:s,matches:a.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let n=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;n<s&&(n==i-1?this.top:this.stack[n+1<<1]).matchesMark(e[n])&&!1!==e[n].type.spec.spanning;)n++;for(;n<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let n=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let r=this.top.children[t];if(r.matchesMark(e[i])&&!this.isLocked(r.dom)){n=t;break}}if(n>-1)n>this.index&&(this.changed=!0,this.destroyBetween(this.index,n)),this.top=this.top.children[this.index];else{let n=fi.create(this.top,e[i],t,r);this.top.children.splice(this.index,0,n),this.top=n,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,r,n){let i=-1,s;if(n>=this.preMatch.index&&(s=this.preMatch.matches[n-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,r))i=this.top.children.indexOf(s,this.index);else for(let n=this.index,s=Math.min(this.top.children.length,n+5);n<s;n++){let s=this.top.children[n];if(s.matchesNode(e,t,r)&&!this.preMatch.matched.has(s)){i=n;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,r,n,i){let s=this.top.children[n];return 3==s.dirty&&s.dom==s.contentDOM&&(s.dirty=2),!!s.update(e,t,r,i)&&(this.destroyBetween(this.index,n),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return -1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t){for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e}return -1}e=t}}updateNextNode(e,t,r,n,i,s){for(let a=this.index;a<this.top.children.length;a++){let o=this.top.children[a];if(o instanceof fs){let l=this.preMatch.matched.get(o);if(null!=l&&l!=i)return!1;let d=o.dom,c,u=this.isLocked(d)&&!(e.isText&&o.node&&o.node.isText&&o.nodeDOM.nodeValue==e.text&&3!=o.dirty&&ff(t,o.outerDeco));if(!u&&o.update(e,t,r,n))return this.destroyBetween(this.index,a),o.dom!=d&&(this.changed=!0),this.index++,!0;if(!u&&(c=this.recreateWrapper(o,e,t,r,n,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(n,s+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,n,i,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!ff(r,e.outerDeco)||!n.eq(e.innerDeco))return null;let a=fs.create(this.top,t,r,n,i,s);if(a.contentDOM)for(let t of(a.children=e.children,e.children=[],a.children))t.parent=a;return e.destroy(),a}addNode(e,t,r,n,i){let s=fs.create(this.top,e,t,r,n,i);s.contentDOM&&s.updateChildren(n,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,t,r){let n=this.index<this.top.children.length?this.top.children[this.index]:null;if(n&&n.matchesWidget(e)&&(e==n.widget||!n.widget.type.toDOM.parentNode))this.index++;else{let n=new fr(this.top,e,t,r);this.top.children.splice(this.index++,0,n),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof fi;)e=(t=e).children[t.children.length-1];(!e||!(e instanceof fo)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((mF||mL)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);"IMG"==e&&(r.className="ProseMirror-separator",r.alt=""),"BR"==e&&(r.className="ProseMirror-trailingBreak");let n=new fl(this.top,[],r,null);t!=this.top?t.children.push(n):t.children.splice(this.index++,0,n),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function fx(e,t){return e.type.side-t.type.side}function fb(e,t,r,n,i){let s=[];for(let a=0,o=0;a<e.length;a++){let l=e[a],d=o,c=o+=l.size;d>=r||c<=t?s.push(l):(d<t&&s.push(l.slice(0,t-d,n)),i&&(s.push(i),i=void 0),c>r&&s.push(l.slice(r-d,l.size,n)))}return s}function fv(e,t=null){let r=e.domSelectionRange(),n=e.state.doc;if(!r.focusNode)return null;let i=e.docView.nearestDesc(r.focusNode),s=i&&0==i.size,a=e.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(a<0)return null;let o=n.resolve(a),l,d;if(mT(r)){for(l=a;i&&!i.node;)i=i.parent;let e=i.node;if(i&&e.isAtom&&hL.isSelectable(e)&&i.parent&&!(e.isInline&&function(e,t,r){for(let n=0==t,i=t==mS(e);n||i;){if(e==r)return!0;let t=my(e);if(!(e=e.parentNode))return!1;n=n&&0==t,i=i&&t==mS(e)}}(r.focusNode,r.focusOffset,i.dom))){let e=i.posBefore;d=new hL(a==e?o:n.resolve(e))}}else{if(r instanceof e.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let t=a,i=a;for(let n=0;n<r.rangeCount;n++){let s=r.getRangeAt(n);t=Math.min(t,e.docView.posFromDOM(s.startContainer,s.startOffset,1)),i=Math.max(i,e.docView.posFromDOM(s.endContainer,s.endOffset,-1))}if(t<0)return null;[l,a]=i==e.state.selection.anchor?[i,t]:[t,i],o=n.resolve(a)}else l=e.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let c=n.resolve(l);if(!d){let r="pointer"==t||e.state.selection.head<o.pos&&!s?1:-1;d=fI(e,c,o,r)}return d}function fk(e){return e.editable?e.hasFocus():fA(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function fw(e,t=!1){let r=e.state.selection;if(fT(e,r),fk(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&mL){let t=e.domSelectionRange(),r=e.domObserver.currentSelection;if(t.anchorNode&&r.anchorNode&&mw(t.anchorNode,t.anchorOffset,r.anchorNode,r.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection();if(!t)return;let r=e.cursorWrapper.dom,n="IMG"==r.nodeName;n?t.collapse(r.parentNode,my(r)+1):t.collapse(r,0),!n&&!e.state.selection.visible&&mz&&mP<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var n;let i,s,a,o,{anchor:l,head:d}=r,c,u;fN&&!(r instanceof hD)&&(r.$from.parent.inlineContent||(c=f$(e,r.from)),r.empty||r.$from.parent.inlineContent||(u=f$(e,r.to))),e.docView.setSelection(l,d,e,t),fN&&(c&&fj(c),u&&fj(u)),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&((i=(n=e).dom.ownerDocument).removeEventListener("selectionchange",n.input.hideSelectionGuard),a=(s=n.domSelectionRange()).anchorNode,o=s.anchorOffset,i.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(s.anchorNode!=a||s.anchorOffset!=o)&&(i.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!fk(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}let fN=mF||mL&&mU<63;function f$(e,t){let{node:r,offset:n}=e.docView.domFromPos(t,0),i=n<r.childNodes.length?r.childNodes[n]:null,s=n?r.childNodes[n-1]:null;if(mF&&i&&"false"==i.contentEditable)return fS(i);if((!i||"false"==i.contentEditable)&&(!s||"false"==s.contentEditable)){if(i)return fS(i);else if(s)return fS(s)}}function fS(e){return e.contentEditable="true",mF&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function fj(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function fT(e,t){if(t instanceof hL){let r=e.docView.descAt(t.from);r!=e.lastSelectedViewDesc&&(f_(e),r&&r.selectNode(),e.lastSelectedViewDesc=r)}else f_(e)}function f_(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function fI(e,t,r,n){return e.someProp("createSelectionBetween",n=>n(e,t,r))||hD.between(t,r,n)}function fC(e){return(!e.editable||!!e.hasFocus())&&fA(e)}function fA(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function fO(e,t){let{$anchor:r,$head:n}=e.selection,i=t>0?r.max(n):r.min(n),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&hE.findFrom(s,t)}function fE(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function fM(e,t,r){let n=e.state.selection;if(n instanceof hD){if(r.indexOf("s")>-1){let{$head:r}=n,i=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=e.state.doc.resolve(r.pos+i.nodeSize*(t<0?-1:1));return fE(e,new hD(n.$anchor,s))}else if(!n.empty)return!1;else if(e.endOfTextblock(t>0?"forward":"backward")){let r=fO(e.state,t);return!!r&&r instanceof hL&&fE(e,r)}else if(!(mB&&r.indexOf("m")>-1)){let r=n.$head,i=r.textOffset?null:t<0?r.nodeBefore:r.nodeAfter,s;if(!i||i.isText)return!1;let a=t<0?r.pos-i.nodeSize:r.pos;return!!(i.isAtom||(s=e.docView.descAt(a))&&!s.contentDOM)&&(hL.isSelectable(i)?fE(e,new hL(t<0?e.state.doc.resolve(r.pos-i.nodeSize):r)):!!mW&&fE(e,new hD(e.state.doc.resolve(t<0?a:a+i.nodeSize))))}}else{if(n instanceof hL&&n.node.isInline)return fE(e,new hD(t>0?n.$to:n.$from));let r=fO(e.state,t);return!!r&&fE(e,r)}}function fz(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function fP(e,t){let r=e.pmViewDesc;return r&&0==r.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function fD(e,t){return t<0?function(e){let t=e.domSelectionRange(),r=t.focusNode,n=t.focusOffset;if(!r)return;let i,s,a=!1;for(mD&&1==r.nodeType&&n<fz(r)&&fP(r.childNodes[n],-1)&&(a=!0);;)if(n>0)if(1!=r.nodeType)break;else{let e=r.childNodes[n-1];if(fP(e,-1))i=r,s=--n;else if(3==e.nodeType)n=(r=e).nodeValue.length;else break}else if(fR(r))break;else{let t=r.previousSibling;for(;t&&fP(t,-1);)i=r.parentNode,s=my(t),t=t.previousSibling;if(t)n=fz(r=t);else{if((r=r.parentNode)==e.dom)break;n=0}}a?fL(e,r,n):i&&fL(e,i,s)}(e):function(e){let t,r,n=e.domSelectionRange(),i=n.focusNode,s=n.focusOffset;if(!i)return;let a=fz(i);for(;;)if(s<a){if(1!=i.nodeType)break;if(fP(i.childNodes[s],1))t=i,r=++s;else break}else if(fR(i))break;else{let n=i.nextSibling;for(;n&&fP(n,1);)t=n.parentNode,r=my(n)+1,n=n.nextSibling;if(n)s=0,a=fz(i=n);else{if((i=i.parentNode)==e.dom)break;s=a=0}}t&&fL(e,t,r)}(e)}function fR(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function fL(e,t,r){if(3!=t.nodeType){let e,n;(n=function(e,t){for(;e&&t==e.childNodes.length&&!mj(e);)t=my(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let r=e.childNodes[t];if(3==r.nodeType)return r;if(1==r.nodeType&&"false"==r.contentEditable)break;e=r,t=0}}(t,r))?(t=n,r=0):(e=function(e,t){for(;e&&!t&&!mj(e);)t=my(e),e=e.parentNode;for(;e&&t;){let r=e.childNodes[t-1];if(3==r.nodeType)return r;if(1==r.nodeType&&"false"==r.contentEditable)break;t=(e=r).childNodes.length}}(t,r))&&(t=e,r=e.nodeValue.length)}let n=e.domSelection();if(!n)return;if(mT(n)){let e=document.createRange();e.setEnd(t,r),e.setStart(t,r),n.removeAllRanges(),n.addRange(e)}else n.extend&&n.extend(t,r);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&fw(e)},50)}function fU(e,t){let r=e.state.doc.resolve(t);if(!(mL||mV)&&r.parent.inlineContent){let n=e.coordsAtPos(t);if(t>r.start()){let r=e.coordsAtPos(t-1),i=(r.top+r.bottom)/2;if(i>n.top&&i<n.bottom&&Math.abs(r.left-n.left)>1)return r.left<n.left?"ltr":"rtl"}if(t<r.end()){let r=e.coordsAtPos(t+1),i=(r.top+r.bottom)/2;if(i>n.top&&i<n.bottom&&Math.abs(r.left-n.left)>1)return r.left>n.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function fF(e,t,r){let n=e.state.selection;if(n instanceof hD&&!n.empty||r.indexOf("s")>-1||mB&&r.indexOf("m")>-1)return!1;let{$from:i,$to:s}=n;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let r=fO(e.state,t);if(r&&r instanceof hL)return fE(e,r)}if(!i.parent.inlineContent){let r=t<0?i:s,a=n instanceof hF?hE.near(r,t):hE.findFrom(r,t);return!!a&&fE(e,a)}return!1}function fZ(e,t){if(!(e.state.selection instanceof hD))return!0;let{$head:r,$anchor:n,empty:i}=e.state.selection;if(!r.sameParent(n))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){let n=e.state.tr;return t<0?n.delete(r.pos-s.nodeSize,r.pos):n.delete(r.pos,r.pos+s.nodeSize),e.dispatch(n),!0}return!1}function fB(e,t,r){e.domObserver.stop(),t.contentEditable=r,e.domObserver.start()}function fV(e,t){e.someProp("transformCopied",r=>{t=r(t,e)});let r=[],{content:n,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&1==n.childCount&&1==n.firstChild.childCount;){i--,s--;let e=n.firstChild;r.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),n=e.content}let a=e.someProp("clipboardSerializer")||p0.fromSchema(e.state.schema),o=fX(),l=o.createElement("div");l.appendChild(a.serializeFragment(n,{document:o}));let d=l.firstChild,c,u=0;for(;d&&1==d.nodeType&&(c=fG[d.nodeName.toLowerCase()]);){for(let e=c.length-1;e>=0;e--){let t=o.createElement(c[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),u++}d=l.firstChild}return d&&1==d.nodeType&&d.setAttribute("data-pm-slice",`${i} ${s}${u?` -${u}`:""} ${JSON.stringify(r)}`),{dom:l,text:e.someProp("clipboardTextSerializer",r=>r(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function fH(e,t,r,n,i){let s,a,o=i.parent.type.spec.code;if(!r&&!t)return null;let l=!!t&&(n||o||!r);if(l){if(e.someProp("transformPastedText",r=>{t=r(t,o||n,e)}),o)return a=new pf(pd.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0),e.someProp("transformPasted",t=>{a=t(a,e,!0)}),a;let r=e.someProp("clipboardTextParser",r=>r(t,i,n,e));if(r)a=r;else{let r=i.marks(),{schema:n}=e.state,a=p0.fromSchema(n);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=s.appendChild(document.createElement("p"));e&&t.appendChild(a.serializeNode(n.text(e,r)))})}}else e.someProp("transformPastedHTML",t=>{r=t(r,e)}),s=function(e){var t;let r,n=/^(\s*<meta [^>]*>)*/.exec(e);n&&(e=e.slice(n[0].length));let i=fX().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(e),a;if((a=s&&fG[s[1].toLowerCase()])&&(e=a.map(e=>"<"+e+">").join("")+e+a.map(e=>"</"+e+">").reverse().join("")),i.innerHTML=(t=e,(r=window.trustedTypes)?(fQ||(fQ=r.defaultPolicy||r.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),fQ.createHTML(t)):t),a)for(let e=0;e<a.length;e++)i=i.querySelector(a[e])||i;return i}(r),mW&&function(e){let t=e.querySelectorAll(mL?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<t.length;r++){let n=t[r];1==n.childNodes.length&&"Â "==n.textContent&&n.parentNode&&n.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),n)}}(s);let d=s&&s.querySelector("[data-pm-slice]"),c=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let e=+c[3];e>0;e--){let e=s.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;s=e}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||pH.fromSchema(e.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||c),context:i,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||fW.test(e.parentNode.nodeName)?null:{ignore:!0}})),c)a=function(e,t){if(!e.size)return e;let r=e.content.firstChild.type.schema,n;try{n=JSON.parse(t)}catch(t){return e}let{content:i,openStart:s,openEnd:a}=e;for(let e=n.length-2;e>=0;e-=2){let t=r.nodes[n[e]];if(!t||t.hasRequiredAttrs())break;i=pd.from(t.create(n[e+1],i)),s++,a++}return new pf(i,s,a)}(fJ(a,+c[1],+c[2]),c[4]);else if((a=pf.maxOpen(function(e,t){if(e.childCount<2)return e;for(let r=t.depth;r>=0;r--){let n=t.node(r).contentMatchAt(t.index(r)),i,s=[];if(e.forEach(e=>{if(!s)return;let t=n.findWrapping(e.type),r;if(!t)return s=null;if(r=s.length&&i.length&&function e(t,r,n,i,s){if(s<t.length&&s<r.length&&t[s]==r[s]){let a=e(t,r,n,i.lastChild,s+1);if(a)return i.copy(i.content.replaceChild(i.childCount-1,a));if(i.contentMatchAt(i.childCount).matchType(s==t.length-1?n.type:t[s+1]))return i.copy(i.content.append(pd.from(fK(n,t,s+1))))}}(t,i,e,s[s.length-1],0))s[s.length-1]=r;else{s.length&&(s[s.length-1]=function e(t,r){if(0==r)return t;let n=t.content.replaceChild(t.childCount-1,e(t.lastChild,r-1)),i=t.contentMatchAt(t.childCount).fillBefore(pd.empty,!0);return t.copy(n.append(i))}(s[s.length-1],i.length));let r=fK(e,t);s.push(r),n=n.matchType(r.type),i=t}}),s)return pd.from(s)}return e}(a.content,i),!0)).openStart||a.openEnd){let e=0,t=0;for(let t=a.content.firstChild;e<a.openStart&&!t.type.spec.isolating;e++,t=t.firstChild);for(let e=a.content.lastChild;t<a.openEnd&&!e.type.spec.isolating;t++,e=e.lastChild);a=fJ(a,e,t)}return e.someProp("transformPasted",t=>{a=t(a,e,l)}),a}let fW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function fK(e,t,r=0){for(let n=t.length-1;n>=r;n--)e=t[n].create(null,pd.from(e));return e}function fq(e,t,r,n,i,s){let a=t<0?e.firstChild:e.lastChild,o=a.content;return e.childCount>1&&(s=0),i<n-1&&(o=fq(o,t,r,n,i+1,s)),i>=r&&(o=t<0?a.contentMatchAt(0).fillBefore(o,s<=i).append(o):o.append(a.contentMatchAt(a.childCount).fillBefore(pd.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(o))}function fJ(e,t,r){return t<e.openStart&&(e=new pf(fq(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),r<e.openEnd&&(e=new pf(fq(e.content,1,r,e.openEnd,0,0),e.openStart,r)),e}let fG={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},fY=null;function fX(){return fY||(fY=document.implementation.createHTMLDocument("title"))}let fQ=null,f0={},f1={},f2={touchstart:!0,touchmove:!0};class f4{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function f5(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function f6(e){e.someProp("handleDOMEvents",t=>{for(let r in t)e.input.eventHandlers[r]||e.dom.addEventListener(r,e.input.eventHandlers[r]=t=>f3(e,t))})}function f3(e,t){return e.someProp("handleDOMEvents",r=>{let n=r[t.type];return!!n&&(n(e,t)||t.defaultPrevented)})}function f9(e){return{left:e.clientX,top:e.clientY}}function f7(e,t,r,n,i){if(-1==n)return!1;let s=e.state.doc.resolve(n);for(let n=s.depth+1;n>0;n--)if(e.someProp(t,t=>n>s.depth?t(e,r,s.nodeAfter,s.before(n),i,!0):t(e,r,s.node(n),s.before(n),i,!1)))return!0;return!1}function f8(e,t,r){if(e.focused||e.focus(),e.state.selection.eq(t))return;let n=e.state.tr.setSelection(t);"pointer"==r&&n.setMeta("pointer",!0),e.dispatch(n)}f1.keydown=(e,t)=>{if((e.input.shiftKey=16==t.keyCode||t.shiftKey,!gr(e,t))&&(e.input.lastKeyCode=t.keyCode,e.input.lastKeyCodeTime=Date.now(),!mH||!mL||13!=t.keyCode))if(229!=t.keyCode&&e.domObserver.forceFlush(),!mZ||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",r=>r(e,t))||function(e,t){let r,n=t.keyCode,i=(r="",t.ctrlKey&&(r+="c"),t.metaKey&&(r+="m"),t.altKey&&(r+="a"),t.shiftKey&&(r+="s"),r);if(8==n||mB&&72==n&&"c"==i)return fZ(e,-1)||fD(e,-1);if(46==n&&!t.shiftKey||mB&&68==n&&"c"==i)return fZ(e,1)||fD(e,1);if(13==n||27==n)return!0;if(37==n||mB&&66==n&&"c"==i){let t=37==n?"ltr"==fU(e,e.state.selection.from)?-1:1:-1;return fM(e,t,i)||fD(e,t)}if(39==n||mB&&70==n&&"c"==i){let t=39==n?"ltr"==fU(e,e.state.selection.from)?1:-1:1;return fM(e,t,i)||fD(e,t)}else if(38==n||mB&&80==n&&"c"==i)return fF(e,-1,i)||fD(e,-1);else if(40==n||mB&&78==n&&"c"==i)return function(e){if(!mF||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:r}=e.domSelectionRange();if(t&&1==t.nodeType&&0==r&&t.firstChild&&"false"==t.firstChild.contentEditable){let r=t.firstChild;fB(e,r,"true"),setTimeout(()=>fB(e,r,"false"),20)}return!1}(e)||fF(e,1,i)||fD(e,1);else if(i==(mB?"m":"c")&&(66==n||73==n||89==n||90==n))return!0;return!1}(e,t)?t.preventDefault():f5(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,m_(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},f1.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},f1.keypress=(e,t)=>{if(gr(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||mB&&t.metaKey)return;if(e.someProp("handleKeyPress",r=>r(e,t)))return void t.preventDefault();let r=e.state.selection;if(!(r instanceof hD)||!r.$from.sameParent(r.$to)){let n=String.fromCharCode(t.charCode),i=()=>e.state.tr.insertText(n).scrollIntoView();/[\r\n]/.test(n)||e.someProp("handleTextInput",t=>t(e,r.$from.pos,r.$to.pos,n,i))||e.dispatch(i()),t.preventDefault()}};let ge=mB?"metaKey":"ctrlKey";f0.mousedown=(e,t)=>{var r;let n,i;e.input.shiftKey=t.shiftKey;let s=ga(e),a=Date.now(),o="singleClick";a-e.input.lastClick.time<500&&(n=(r=e.input.lastClick).x-t.clientX)*n+(i=r.y-t.clientY)*i<100&&!t[ge]&&e.input.lastClick.button==t.button&&("singleClick"==e.input.lastClick.type?o="doubleClick":"doubleClick"==e.input.lastClick.type&&(o="tripleClick")),e.input.lastClick={time:a,x:t.clientX,y:t.clientY,type:o,button:t.button};let l=e.posAtCoords(f9(t));l&&("singleClick"==o?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new gt(e,l,t,!!s)):("doubleClick"==o?function(e,t,r,n){return f7(e,"handleDoubleClickOn",t,r,n)||e.someProp("handleDoubleClick",r=>r(e,t,n))}:function(e,t,r,n){return f7(e,"handleTripleClickOn",t,r,n)||e.someProp("handleTripleClick",r=>r(e,t,n))||function(e,t,r){if(0!=r.button)return!1;let n=e.state.doc;if(-1==t)return!!n.inlineContent&&(f8(e,hD.create(n,0,n.content.size),"pointer"),!0);let i=n.resolve(t);for(let t=i.depth+1;t>0;t--){let r=t>i.depth?i.nodeAfter:i.node(t),s=i.before(t);if(r.inlineContent)f8(e,hD.create(n,s+1,s+1+r.content.size),"pointer");else{if(!hL.isSelectable(r))continue;f8(e,hL.create(n,s),"pointer")}return!0}}(e,r,n)})(e,l.pos,l.inside,t)?t.preventDefault():f5(e,"pointer"))};class gt{constructor(e,t,r,n){let i,s;if(this.view=e,this.pos=t,this.event=r,this.flushed=n,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[ge],this.allowDefault=r.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),s=t.inside;else{let r=e.state.doc.resolve(t.pos);i=r.parent,s=r.depth?r.before():0}const a=n?null:r.target,o=a?e.docView.nearestDesc(a,!0):null;this.target=o&&1==o.nodeDOM.nodeType?o.nodeDOM:null;let{selection:l}=e.state;(0==r.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||l instanceof hL&&l.from<=s&&l.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&mD&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),f5(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>fw(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;if(this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(f9(e))),this.updateAllowDefault(e),this.allowDefault||!t)f5(this.view,"pointer");else{var r,n,i,s;(r=this.view,n=t.pos,i=t.inside,s=this.selectNode,f7(r,"handleClickOn",n,i,e)||r.someProp("handleClick",t=>t(r,n,e))||(s?function(e,t){if(-1==t)return!1;let r=e.state.selection,n,i;r instanceof hL&&(n=r.node);let s=e.state.doc.resolve(t);for(let e=s.depth+1;e>0;e--){let t=e>s.depth?s.nodeAfter:s.node(e);if(hL.isSelectable(t)){i=n&&r.$from.depth>0&&e>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?s.before(r.$from.depth):s.before(e);break}}return null!=i&&(f8(e,hL.create(e.state.doc,i),"pointer"),!0)}(r,i):function(e,t){if(-1==t)return!1;let r=e.state.doc.resolve(t),n=r.nodeAfter;return!!(n&&n.isAtom&&hL.isSelectable(n))&&(f8(e,new hL(r),"pointer"),!0)}(r,i)))?e.preventDefault():0==e.button&&(this.flushed||mF&&this.mightDrag&&!this.mightDrag.node.isAtom||mL&&!this.view.state.selection.visible&&2>=Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to)))?(f8(this.view,hE.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):f5(this.view,"pointer")}}move(e){this.updateAllowDefault(e),f5(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function gr(e,t){return!!e.composing||!!(mF&&500>Math.abs(t.timeStamp-e.input.compositionEndedAt))&&(e.input.compositionEndedAt=-2e8,!0)}f0.touchstart=e=>{e.input.lastTouch=Date.now(),ga(e),f5(e,"pointer")},f0.touchmove=e=>{e.input.lastTouch=Date.now(),f5(e,"pointer")},f0.contextmenu=e=>ga(e);let gn=mH?5e3:-1;function gi(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>ga(e),t))}function gs(e){let t;for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function ga(e,t=!1){if(!mH||!(e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),gs(e),t||e.docView&&e.docView.dirty){let r=fv(e),n=e.state.selection;return r&&!r.eq(n)?e.dispatch(e.state.tr.setSelection(r)):(e.markCursor||t)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}f1.compositionstart=f1.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,r=t.selection.$to;if(t.selection instanceof hD&&(t.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||r.marks(),ga(e,!0),e.markCursor=null;else if(ga(e,!t.selection.empty),mD&&t.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let t=e.domSelectionRange();for(let r=t.focusNode,n=t.focusOffset;r&&1==r.nodeType&&0!=n;){let t=n<0?r.lastChild:r.childNodes[n-1];if(!t)break;if(3==t.nodeType){let r=e.domSelection();r&&r.collapse(t,t.nodeValue.length);break}r=t,n=-1}}e.input.composing=!0}gi(e,gn)},f1.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,gi(e,20))};let go=mz&&mP<15||mZ&&mK<604;function gl(e,t,r,n,i){let s=fH(e,t,r,n,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,i,s||pf.empty)))return!0;if(!s)return!1;let a=0==s.openStart&&0==s.openEnd&&1==s.content.childCount?s.content.firstChild:null,o=a?e.state.tr.replaceSelectionWith(a,n):e.state.tr.replaceSelection(s);return e.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function gd(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let r=e.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}f0.copy=f1.cut=(e,t)=>{let r=e.state.selection,n="cut"==t.type;if(r.empty)return;let i=go?null:t.clipboardData,{dom:s,text:a}=fV(e,r.content());i?(t.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",a)):function(e,t){if(!e.dom.parentNode)return;let r=e.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),e.focus()},50)}(e,s),n&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},f1.paste=(e,t)=>{if(e.composing&&!mH)return;let r=go?null:t.clipboardData,n=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&gl(e,gd(r),r.getData("text/html"),n,t)?t.preventDefault():function(e,t){if(!e.dom.parentNode)return;let r=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,n=e.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let i=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),n.parentNode&&n.parentNode.removeChild(n),r?gl(e,n.value,null,i,t):gl(e,n.textContent,n.innerHTML,i,t)},50)}(e,t)};class gc{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}let gu=mB?"altKey":"ctrlKey";function gp(e,t){let r=e.someProp("dragCopies",e=>!e(t));return null!=r?r:!t[gu]}for(let e in f0.dragstart=(e,t)=>{let r,n=e.input.mouseDown;if(n&&n.done(),!t.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(f9(t));if(s&&s.pos>=i.from&&s.pos<=(i instanceof hL?i.to-1:i.to));else if(n&&n.mightDrag)r=hL.create(e.state.doc,n.mightDrag.pos);else if(t.target&&1==t.target.nodeType){let n=e.docView.nearestDesc(t.target,!0);n&&n.node.type.spec.draggable&&n!=e.docView&&(r=hL.create(e.state.doc,n.posBefore))}let a=(r||e.state.selection).content(),{dom:o,text:l,slice:d}=fV(e,a);t.dataTransfer.files.length&&mL&&!(mU>120)||t.dataTransfer.clearData(),t.dataTransfer.setData(go?"Text":"text/html",o.innerHTML),t.dataTransfer.effectAllowed="copyMove",go||t.dataTransfer.setData("text/plain",l),e.dragging=new gc(d,gp(e,t),r)},f0.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},f1.dragover=f1.dragenter=(e,t)=>t.preventDefault(),f1.drop=(e,t)=>{let r=e.dragging;if(e.dragging=null,!t.dataTransfer)return;let n=e.posAtCoords(f9(t));if(!n)return;let i=e.state.doc.resolve(n.pos),s=r&&r.slice;s?e.someProp("transformPasted",t=>{s=t(s,e,!1)}):s=fH(e,gd(t.dataTransfer),go?null:t.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&gp(e,t));if(e.someProp("handleDrop",r=>r(e,t,s||pf.empty,a)))return void t.preventDefault();if(!s)return;t.preventDefault();let o=s?hb(e.state.doc,i.pos,s):i.pos;null==o&&(o=i.pos);let l=e.state.tr;if(a){let{node:e}=r;e?e.replace(l):l.deleteSelection()}let d=l.mapping.map(o),c=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,u=l.doc;if(c?l.replaceRangeWith(d,d,s.content.firstChild):l.replaceRange(d,d,s),l.doc.eq(u))return;let p=l.doc.resolve(d);if(c&&hL.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new hL(p));else{let t=l.mapping.map(o);l.mapping.maps[l.mapping.maps.length-1].forEach((e,r,n,i)=>t=i),l.setSelection(fI(e,p,l.doc.resolve(t)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))},f0.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&fw(e)},20))},f0.blur=(e,t)=>{e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},f0.beforeinput=(e,t)=>{if(mL&&mH&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,m_(8,"Backspace")))))return;let{$cursor:r}=e.state.selection;r&&r.pos>0&&e.dispatch(e.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}},f1)f0[e]=f1[e];function gh(e,t){if(e==t)return!0;for(let r in e)if(e[r]!==t[r])return!1;for(let r in t)if(!(r in e))return!1;return!0}class gm{constructor(e,t){this.toDOM=e,this.spec=t||gb,this.side=this.spec.side||0}map(e,t,r,n){let{pos:i,deleted:s}=e.mapResult(t.from+n,this.side<0?-1:1);return s?null:new gy(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof gm&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&gh(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class gf{constructor(e,t){this.attrs=e,this.spec=t||gb}map(e,t,r,n){let i=e.map(t.from+n,this.spec.inclusiveStart?-1:1)-r,s=e.map(t.to+n,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new gy(i,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof gf&&gh(this.attrs,e.attrs)&&gh(this.spec,e.spec)}static is(e){return e.type instanceof gf}destroy(){}}class gg{constructor(e,t){this.attrs=e,this.spec=t||gb}map(e,t,r,n){let i=e.mapResult(t.from+n,1);if(i.deleted)return null;let s=e.mapResult(t.to+n,-1);return s.deleted||s.pos<=i.pos?null:new gy(i.pos-r,s.pos-r,this)}valid(e,t){let{index:r,offset:n}=e.content.findIndex(t.from),i;return n==t.from&&!(i=e.child(r)).isText&&n+i.nodeSize==t.to}eq(e){return this==e||e instanceof gg&&gh(this.attrs,e.attrs)&&gh(this.spec,e.spec)}destroy(){}}class gy{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new gy(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new gy(e,e,new gm(t,r))}static inline(e,t,r,n){return new gy(e,t,new gf(r,n))}static node(e,t,r,n){return new gy(e,t,new gg(r,n))}get spec(){return this.type.spec}get inline(){return this.type instanceof gf}get widget(){return this.type instanceof gm}}let gx=[],gb={};class gv{constructor(e,t){this.local=e.length?e:gx,this.children=t.length?t:gx}static create(e,t){return t.length?gj(t,e,0,gb):gk}find(e,t,r){let n=[];return this.findInner(null==e?0:e,null==t?1e9:t,n,0,r),n}findInner(e,t,r,n,i){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=t&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+n,a.to+n))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,t-a,r,n+a,i)}}map(e,t,r){return this==gk||0==e.maps.length?this:this.mapInner(e,t,0,0,r||gb)}mapInner(e,t,r,n,i){let s;for(let a=0;a<this.local.length;a++){let o=this.local[a].map(e,r,n);o&&o.type.valid(t,o)?(s||(s=[])).push(o):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?function(e,t,r,n,i,s,a){let o=e.slice();for(let e=0,t=s;e<r.maps.length;e++){let n=0;r.maps[e].forEach((e,r,i,s)=>{let a=s-i-(r-e);for(let i=0;i<o.length;i+=3){let s=o[i+1];if(s<0||e>s+t-n)continue;let l=o[i]+t-n;r>=l?o[i+1]=e<=l?-2:-1:e>=t&&a&&(o[i]+=a,o[i+1]+=a)}n+=a}),t=r.maps[e].map(t,-1)}let l=!1;for(let t=0;t<o.length;t+=3)if(o[t+1]<0){if(-2==o[t+1]){l=!0,o[t+1]=-1;continue}let d=r.map(e[t]+s),c=d-i;if(c<0||c>=n.content.size){l=!0;continue}let u=r.map(e[t+1]+s,-1)-i,{index:p,offset:h}=n.content.findIndex(c),m=n.maybeChild(p);if(m&&h==c&&h+m.nodeSize==u){let n=o[t+2].mapInner(r,m,d+1,e[t]+s+1,a);n!=gk?(o[t]=c,o[t+1]=u,o[t+2]=n):(o[t+1]=-2,l=!0)}else l=!0}if(l){let l=gj(function(e,t,r,n,i,s,a){for(let o=0;o<e.length;o+=3)-1==e[o+1]&&function e(t,s){for(let e=0;e<t.local.length;e++){let o=t.local[e].map(n,i,s);o?r.push(o):a.onRemove&&a.onRemove(t.local[e].spec)}for(let r=0;r<t.children.length;r+=3)e(t.children[r+2],t.children[r]+s+1)}(e[o+2],t[o]+s+1);return r}(o,e,t,r,i,s,a),n,0,a);t=l.local;for(let e=0;e<o.length;e+=3)o[e+1]<0&&(o.splice(e,3),e-=3);for(let e=0,t=0;e<l.children.length;e+=3){let r=l.children[e];for(;t<o.length&&o[t]<r;)t+=3;o.splice(t,0,l.children[e],l.children[e+1],l.children[e+2])}}return new gv(t.sort(gT),o)}(this.children,s||[],e,t,r,n,i):s?new gv(s.sort(gT),gx):gk}add(e,t){return t.length?this==gk?gv.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let n,i=0;e.forEach((e,s)=>{let a=s+r,o;if(o=g$(t,e,a)){for(n||(n=this.children.slice());i<n.length&&n[i]<s;)i+=3;n[i]==s?n[i+2]=n[i+2].addInner(e,o,a+1):n.splice(i,0,s,s+e.nodeSize,gj(o,e,a+1,gb)),i+=3}});let s=gN(i?gS(t):t,-r);for(let t=0;t<s.length;t++)s[t].type.valid(e,s[t])||s.splice(t--,1);return new gv(s.length?this.local.concat(s).sort(gT):this.local,n||this.children)}remove(e){return 0==e.length||this==gk?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,n=this.local;for(let n=0;n<r.length;n+=3){let i,s=r[n]+t,a=r[n+1]+t;for(let t=0,r;t<e.length;t++)(r=e[t])&&r.from>s&&r.to<a&&(e[t]=null,(i||(i=[])).push(r));if(!i)continue;r==this.children&&(r=this.children.slice());let o=r[n+2].removeInner(i,s+1);o!=gk?r[n+2]=o:(r.splice(n,3),n-=3)}if(n.length){for(let r=0,i;r<e.length;r++)if(i=e[r])for(let e=0;e<n.length;e++)n[e].eq(i,t)&&(n==this.local&&(n=this.local.slice()),n.splice(e--,1))}return r==this.children&&n==this.local?this:n.length||r.length?new gv(n,r):gk}forChild(e,t){let r,n;if(this==gk)return this;if(t.isLeaf)return gv.empty;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(r=this.children[t+2]);break}let i=e+1,s=i+t.content.size;for(let e=0;e<this.local.length;e++){let t=this.local[e];if(t.from<s&&t.to>i&&t.type instanceof gf){let e=Math.max(i,t.from)-i,r=Math.min(s,t.to)-i;e<r&&(n||(n=[])).push(t.copy(e,r))}}if(n){let e=new gv(n.sort(gT),gx);return r?new gw([e,r]):e}return r||gk}eq(e){if(this==e)return!0;if(!(e instanceof gv)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return g_(this.localsInner(e))}localsInner(e){if(this==gk)return gx;if(e.inlineContent||!this.local.some(gf.is))return this.local;let t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof gf||t.push(this.local[e]);return t}forEachSet(e){e(this)}}gv.empty=new gv([],[]),gv.removeOverlap=g_;let gk=gv.empty;class gw{constructor(e){this.members=e}map(e,t){let r=this.members.map(r=>r.map(e,t,gb));return gw.from(r)}forChild(e,t){if(t.isLeaf)return gv.empty;let r=[];for(let n=0;n<this.members.length;n++){let i=this.members[n].forChild(e,t);i!=gk&&(i instanceof gw?r=r.concat(i.members):r.push(i))}return gw.from(r)}eq(e){if(!(e instanceof gw)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let n=0;n<this.members.length;n++){let i=this.members[n].localsInner(e);if(i.length)if(t){r&&(t=t.slice(),r=!1);for(let e=0;e<i.length;e++)t.push(i[e])}else t=i}return t?g_(r?t:t.sort(gT)):gx}static from(e){switch(e.length){case 0:return gk;case 1:return e[0];default:return new gw(e.every(e=>e instanceof gv)?e:e.reduce((e,t)=>e.concat(t instanceof gv?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function gN(e,t){if(!t||!e.length)return e;let r=[];for(let n=0;n<e.length;n++){let i=e[n];r.push(new gy(i.from+t,i.to+t,i.type))}return r}function g$(e,t,r){if(t.isLeaf)return null;let n=r+t.nodeSize,i=null;for(let t=0,s;t<e.length;t++)(s=e[t])&&s.from>r&&s.to<n&&((i||(i=[])).push(s),e[t]=null);return i}function gS(e){let t=[];for(let r=0;r<e.length;r++)null!=e[r]&&t.push(e[r]);return t}function gj(e,t,r,n){let i=[],s=!1;t.forEach((t,a)=>{let o=g$(e,t,a+r);if(o){s=!0;let e=gj(o,t,r+a+1,n);e!=gk&&i.push(a,a+t.nodeSize,e)}});let a=gN(s?gS(e):e,-r).sort(gT);for(let e=0;e<a.length;e++)a[e].type.valid(t,a[e])||(n.onRemove&&n.onRemove(a[e].spec),a.splice(e--,1));return a.length||i.length?new gv(a,i):gk}function gT(e,t){return e.from-t.from||e.to-t.to}function g_(e){let t=e;for(let r=0;r<t.length-1;r++){let n=t[r];if(n.from!=n.to)for(let i=r+1;i<t.length;i++){let s=t[i];if(s.from==n.from){s.to!=n.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,n.to),gI(t,i+1,s.copy(n.to,s.to)));continue}s.from<n.to&&(t==e&&(t=e.slice()),t[r]=n.copy(n.from,s.from),gI(t,i,n.copy(s.from,n.to)));break}}return t}function gI(e,t,r){for(;t<e.length&&gT(r,e[t])>0;)t++;e.splice(t,0,r)}function gC(e){let t=[];return e.someProp("decorations",r=>{let n=r(e.state);n&&n!=gk&&t.push(n)}),e.cursorWrapper&&t.push(gv.create(e.state.doc,[e.cursorWrapper.deco])),gw.from(t)}let gA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},gO=mz&&mP<=11;class gE{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class gM{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new gE,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);mz&&mP<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),gO&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,gA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(fC(this.view)){if(this.suppressingSelectionUpdates)return fw(this.view);if(mz&&mP<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&mw(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let r=e.focusNode;r;r=mx(r))t.add(r);for(let n=e.anchorNode;n;n=mx(n))if(t.has(n)){r=n;break}let n=r&&this.view.docView.nearestDesc(r);if(n&&n.ignoreMutation({type:"selection",target:3==r.nodeType?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){var e;let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&fC(t)&&!this.ignoreSelectionChange(n),s=-1,a=-1,o=!1,l=[];if(t.editable)for(let e=0;e<r.length;e++){let t=this.registerMutation(r[e],l);t&&(s=s<0?t.from:Math.min(t.from,s),a=a<0?t.to:Math.max(t.to,a),t.typeOver&&(o=!0))}if(mD&&l.length){let e=l.filter(e=>"BR"==e.nodeName);if(2==e.length){let[t,r]=e;t.parentNode&&t.parentNode.parentNode==r.parentNode?r.remove():t.remove()}else{let{focusNode:r}=this.currentSelection;for(let n of e){let e=n.parentNode;e&&"LI"==e.nodeName&&(!r||function(e,t){for(let r=t.parentNode;r&&r!=e.dom;r=r.parentNode){let t=e.docView.nearestDesc(r,!0);if(t&&t.node.isBlock)return r}return null}(t,r)!=e)&&n.remove()}}}let d=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&mT(n)&&(d=fv(t))&&d.eq(hE.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,fw(t),this.currentSelection.set(n),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,a),e=t,!gz.has(e)&&(gz.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))&&(e.requiresGeckoHackNode=mD,gP||(console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),gP=!0))),this.handleDOMChange(s,a,o,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||fw(t),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(r==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if("childList"==e.type){for(let r=0;r<e.addedNodes.length;r++){let n=e.addedNodes[r];t.push(n),3==n.nodeType&&(this.lastChangedTextNode=n)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let n=e.previousSibling,i=e.nextSibling;if(mz&&mP<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:r,nextSibling:s}=e.addedNodes[t];(!r||0>Array.prototype.indexOf.call(e.addedNodes,r))&&(n=r),(!s||0>Array.prototype.indexOf.call(e.addedNodes,s))&&(i=s)}let s=n&&n.parentNode==e.target?my(n)+1:0,a=r.localPosFromDOM(e.target,s,-1),o=i&&i.parentNode==e.target?my(i):e.target.childNodes.length;return{from:a,to:r.localPosFromDOM(e.target,o,1)}}return"attributes"==e.type?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let gz=new WeakMap,gP=!1;function gD(e,t){let r=t.startContainer,n=t.startOffset,i=t.endContainer,s=t.endOffset,a=e.domAtPos(e.state.selection.anchor);return mw(a.node,a.offset,i,s)&&([r,n,i,s]=[i,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:i,focusOffset:s}}function gR(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(mF&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(e.parentNode.lastChild==e||mF&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}let gL=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function gU(e,t,r){return Math.max(r.anchor,r.head)>t.content.size?null:fI(e,t.resolve(r.anchor),t.resolve(r.head))}function gF(e,t,r){let n=e.depth,i=t?e.end():e.pos;for(;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,i++,t=!1;if(r){let t=e.node(n).maybeChild(e.indexAfter(n));for(;t&&!t.isLeaf;)t=t.firstChild,i++}return i}function gZ(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),r=e.charCodeAt(1);return t>=56320&&t<=57343&&r>=55296&&r<=56319}class gB{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new f4,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(gq),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=gW(this),gH(this),this.nodeViews=gK(this),this.docView=fa(this.state.doc,gV(this),gC(this),this.dom,this),this.domObserver=new gM(this,(e,t,r,n)=>(function(e,t,r,n,i){let s,a,o,l=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,r=fv(e,t);if(r&&!e.state.selection.eq(r)){if(mL&&mH&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,m_(13,"Enter"))))return;let n=e.state.tr.setSelection(r);"pointer"==t?n.setMeta("pointer",!0):"key"==t&&n.scrollIntoView(),l&&n.setMeta("composition",l),e.dispatch(n)}return}let d=e.state.doc.resolve(t),c=d.sharedDepth(r);t=d.before(c+1),r=e.state.doc.resolve(r).after(c+1);let u=e.state.selection,p=function(e,t,r){let n,{node:i,fromOffset:s,toOffset:a,from:o,to:l}=e.docView.parseRange(t,r),d=e.domSelectionRange(),c=d.anchorNode;if(c&&e.dom.contains(1==c.nodeType?c:c.parentNode)&&(n=[{node:c,offset:d.anchorOffset}],mT(d)||n.push({node:d.focusNode,offset:d.focusOffset})),mL&&8===e.input.lastKeyCode)for(let e=a;e>s;e--){let t=i.childNodes[e-1],r=t.pmViewDesc;if("BR"==t.nodeName&&!r){a=e;break}if(!r||r.size)break}let u=e.state.doc,p=e.someProp("domParser")||pH.fromSchema(e.state.schema),h=u.resolve(o),m=null,f=p.parse(i,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:s,to:a,preserveWhitespace:"pre"!=h.parent.type.whitespace||"full",findPositions:n,ruleFromNode:gR,context:h});if(n&&null!=n[0].pos){let e=n[0].pos,t=n[1]&&n[1].pos;null==t&&(t=e),m={anchor:e+o,head:t+o}}return{doc:f,sel:m,from:o,to:l}}(e,t,r),h=e.state.doc,m=h.slice(p.from,p.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(s=e.state.selection.to,a="end"):(s=e.state.selection.from,a="start"),e.input.lastKeyCode=null;let f=function(e,t,r,n,i){let s=e.findDiffStart(t,r);if(null==s)return null;let{a:a,b:o}=e.findDiffEnd(t,r+e.size,r+t.size);if("end"==i){let e=Math.max(0,s-Math.min(a,o));n-=a+e-s}if(a<s&&e.size<t.size){let e=n<=s&&n>=a?s-n:0;(s-=e)&&s<t.size&&gZ(t.textBetween(s-1,s+1))&&(s+=e?1:-1),o=s+(o-a),a=s}else if(o<s){let t=n<=s&&n>=o?s-n:0;(s-=t)&&s<e.size&&gZ(e.textBetween(s-1,s+1))&&(s+=t?1:-1),a=s+(a-o),o=s}return{start:s,endA:a,endB:o}}(m.content,p.doc.content,p.from,s,a);if(f&&e.input.domChangeCount++,(mZ&&e.input.lastIOSEnter>Date.now()-225||mH)&&i.some(e=>1==e.nodeType&&!gL.test(e.nodeName))&&(!f||f.endA>=f.endB)&&e.someProp("handleKeyDown",t=>t(e,m_(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!f)if(n&&u instanceof hD&&!u.empty&&u.$head.sameParent(u.$anchor)&&!e.composing&&!(p.sel&&p.sel.anchor!=p.sel.head))f={start:u.from,endA:u.to,endB:u.to};else{if(p.sel){let t=gU(e,e.state.doc,p.sel);if(t&&!t.eq(e.state.selection)){let r=e.state.tr.setSelection(t);l&&r.setMeta("composition",l),e.dispatch(r)}}return}e.state.selection.from<e.state.selection.to&&f.start==f.endB&&e.state.selection instanceof hD&&(f.start>e.state.selection.from&&f.start<=e.state.selection.from+2&&e.state.selection.from>=p.from?f.start=e.state.selection.from:f.endA<e.state.selection.to&&f.endA>=e.state.selection.to-2&&e.state.selection.to<=p.to&&(f.endB+=e.state.selection.to-f.endA,f.endA=e.state.selection.to)),mz&&mP<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>p.from&&" Â "==p.doc.textBetween(f.start-p.from-1,f.start-p.from+1)&&(f.start--,f.endA--,f.endB--);let g=p.doc.resolveNoCache(f.start-p.from),y=p.doc.resolveNoCache(f.endB-p.from),x=h.resolve(f.start),b=g.sameParent(y)&&g.parent.inlineContent&&x.end()>=f.endA;if((mZ&&e.input.lastIOSEnter>Date.now()-225&&(!b||i.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!b&&g.pos<p.doc.content.size&&(!g.sameParent(y)||!g.parent.inlineContent)&&g.pos<y.pos&&!/\S/.test(p.doc.textBetween(g.pos,y.pos,"","")))&&e.someProp("handleKeyDown",t=>t(e,m_(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>f.start&&function(e,t,r,n,i){if(r-t<=i.pos-n.pos||gF(n,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!n.parent.isTextblock){let e=s.nodeAfter;return null!=e&&r==t+e.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=e.resolve(gF(s,!0,!0));return!(!a.parent.isTextblock||a.pos>r||gF(a,!0,!1)<r)&&n.parent.content.cut(n.parentOffset).eq(a.parent.content)}(h,f.start,f.endA,g,y)&&e.someProp("handleKeyDown",t=>t(e,m_(8,"Backspace")))){mH&&mL&&e.domObserver.suppressSelectionUpdates();return}mL&&f.endB==f.start&&(e.input.lastChromeDelete=Date.now()),mH&&!b&&g.start()!=y.start()&&0==y.parentOffset&&g.depth==y.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==f.endA&&(f.endB-=2,y=p.doc.resolveNoCache(f.endB-p.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,m_(13,"Enter"))})},20));let v=f.start,k=f.endA,w=t=>{let r=t||e.state.tr.replace(v,k,p.doc.slice(f.start-p.from,f.endB-p.from));if(p.sel){let t=gU(e,r.doc,p.sel);t&&!(mL&&e.composing&&t.empty&&(f.start!=f.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==v||t.head==r.mapping.map(k)-1)||mz&&t.empty&&t.head==v)&&r.setSelection(t)}return l&&r.setMeta("composition",l),r.scrollIntoView()};if(b)if(g.pos==y.pos){mz&&mP<=11&&0==g.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>fw(e),20));let t=w(e.state.tr.delete(v,k)),r=h.resolve(f.start).marksAcross(h.resolve(f.endA));r&&t.ensureMarks(r),e.dispatch(t)}else if(f.endA==f.endB&&(o=function(e,t){let r=e.firstChild.marks,n=t.firstChild.marks,i=r,s=n,a,o,l;for(let e=0;e<n.length;e++)i=n[e].removeFromSet(i);for(let e=0;e<r.length;e++)s=r[e].removeFromSet(s);if(1==i.length&&0==s.length)o=i[0],a="add",l=e=>e.mark(o.addToSet(e.marks));else{if(0!=i.length||1!=s.length)return null;o=s[0],a="remove",l=e=>e.mark(o.removeFromSet(e.marks))}let d=[];for(let e=0;e<t.childCount;e++)d.push(l(t.child(e)));if(pd.from(d).eq(e))return{mark:o,type:a}}(g.parent.content.cut(g.parentOffset,y.parentOffset),x.parent.content.cut(x.parentOffset,f.endA-x.start())))){let t=w(e.state.tr);"add"==o.type?t.addMark(v,k,o.mark):t.removeMark(v,k,o.mark),e.dispatch(t)}else if(g.parent.child(g.index()).isText&&g.index()==y.index()-!y.textOffset){let t=g.parent.textBetween(g.parentOffset,y.parentOffset),r=()=>w(e.state.tr.insertText(t,v,k));e.someProp("handleTextInput",n=>n(e,v,k,t,r))||e.dispatch(r())}else e.dispatch(w());else e.dispatch(w())})(this,e,t,r,n)),this.domObserver.start(),function(e){for(let t in f0){let r=f0[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let r=t.target;r!=e.dom;r=r.parentNode)if(!r||11==r.nodeType||r.pmViewDesc&&r.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||f3(e,t)||!e.editable&&t.type in f1||r(e,t)},f2[t]?{passive:!0}:void 0)}mF&&e.dom.addEventListener("input",()=>null),f6(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;for(let t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&f6(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(gq),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let e in this._props)t[e]=this._props[e];for(let r in t.state=this.state,e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r,n,i;let s=this.state,a=!1,o=!1;e.storedMarks&&this.composing&&(gs(this),o=!0),this.state=e;let l=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(l||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=gK(this);(function(e,t){let r=0,n=0;for(let n in e){if(e[n]!=t[n])return!0;r++}for(let e in t)n++;return r!=n})(e,this.nodeViews)&&(this.nodeViews=e,a=!0)}(l||t.handleDOMEvents!=this._props.handleDOMEvents)&&f6(this),this.editable=gW(this),gH(this);let d=gC(this),c=gV(this),u=s.plugins==e.plugins||s.doc.eq(e.doc)?e.scrollToSelection>s.scrollToSelection?"to selection":"preserve":"reset",p=a||!this.docView.matchesNode(e.doc,c,d);(p||!e.selection.eq(s.selection))&&(o=!0);let h="preserve"==u&&o&&null==this.dom.style.overflowAnchor&&function(e){let t,r,n=e.dom.getBoundingClientRect(),i=Math.max(0,n.top);for(let s=(n.left+n.right)/2,a=i+1;a<Math.min(innerHeight,n.bottom);a+=5){let n=e.root.elementFromPoint(s,a);if(!n||n==e.dom||!e.dom.contains(n))continue;let o=n.getBoundingClientRect();if(o.top>=i-20){t=n,r=o.top;break}}return{refDOM:t,refTop:r,stack:mG(e.dom)}}(this);if(o){let t,r,o;this.domObserver.stop();let l=p&&(mz||mL)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&(n=s.selection,i=e.selection,o=Math.min(n.$anchor.sharedDepth(n.head),i.$anchor.sharedDepth(i.head)),n.$anchor.start(o)!=i.$anchor.start(o));if(p){let t=mL?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let r=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=mS(e=e.childNodes[t-1])}else{if(!e.parentNode||mj(e))return null;t=my(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),n=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||mj(e))return null;t=my(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(r&&n&&r!=n){let t=n.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(r==i||n==i)return i;if(!t||!t.isText(n.nodeValue))return n;if(e.input.compositionNode==n){let e=r.pmViewDesc;if(!(!e||!e.isText(r.nodeValue)))return n}}return r||n}(this)),(a||!this.docView.update(e.doc,c,d,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=fa(e.doc,c,d,this.dom,this)),t&&!this.trackWrites&&(l=!0)}l||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(t=this.docView.domFromPos(this.state.selection.anchor,0),r=this.domSelectionRange(),mw(t.node,t.offset,r.anchorNode,r.anchorOffset)))?fw(this,l):(fT(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),(null==(r=this.dragging)?void 0:r.node)&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),"reset"==u?this.dom.scrollTop=0:"to selection"==u?this.scrollToSelection():h&&function({refDOM:e,refTop:t,stack:r}){let n=e?e.getBoundingClientRect().top:0;mY(r,0==n?0:n-t)}(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof hL){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&mJ(this,t.getBoundingClientRect(),e)}else mJ(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let r=e.node,n=-1;if(this.state.doc.nodeAt(r.from)==r.node)n=r.from;else{let e=r.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==r.node&&(n=e)}this.dragging=new gc(e.slice,e.move,n<0?void 0:hL.create(this.state.doc,n))}someProp(e,t){let r=this._props&&this._props[e],n;if(null!=r&&(n=t?t(r):r))return n;for(let r=0;r<this.directPlugins.length;r++){let i=this.directPlugins[r].props[e];if(null!=i&&(n=t?t(i):i))return n}let i=this.state.plugins;if(i)for(let r=0;r<i.length;r++){let s=i[r].props[e];if(null!=s&&(n=t?t(s):s))return n}}hasFocus(){if(mz){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(mX)return e.focus(mX);let t=mG(e);e.focus(null==mX?{get preventScroll(){return mX={preventScroll:!0},!0}}:void 0),mX||(mX=!1,mY(t,0))}(this.dom),fw(this),this.domObserver.start()}get root(){let e=this._root;if(null==e){for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return e||document}updateRoot(){this._root=null}posAtCoords(e){return function(e,t){var r;let n,i,s=e.dom.ownerDocument,a,o=0,l=function(e,t,r){if(e.caretPositionFromPoint)try{let n=e.caretPositionFromPoint(t,r);if(n)return{node:n.offsetNode,offset:Math.min(mS(n.offsetNode),n.offset)}}catch(e){}if(e.caretRangeFromPoint){let n=e.caretRangeFromPoint(t,r);if(n)return{node:n.startContainer,offset:Math.min(mS(n.startContainer),n.startOffset)}}}(s,t.left,t.top);l&&({node:a,offset:o}=l);let d=(e.root.elementFromPoint?e.root:s).elementFromPoint(t.left,t.top);if(!d||!e.dom.contains(1!=d.nodeType?d.parentNode:d)){let r=e.dom.getBoundingClientRect();if(!mQ(t,r)||!(d=function e(t,r,n){let i=t.childNodes.length;if(i&&n.top<n.bottom)for(let s=Math.max(0,Math.min(i-1,Math.floor(i*(r.top-n.top)/(n.bottom-n.top))-2)),a=s;;){let n=t.childNodes[a];if(1==n.nodeType){let t=n.getClientRects();for(let i=0;i<t.length;i++){let s=t[i];if(mQ(r,s))return e(n,r,s)}}if((a=(a+1)%i)==s)break}return t}(e.dom,t,r)))return null}if(mF)for(let e=d;a&&e;e=mx(e))e.draggable&&(a=void 0);if(d=(n=(r=d).parentNode)&&/^li$/i.test(n.nodeName)&&t.left<r.getBoundingClientRect().left?n:r,a){let r;if(mD&&1==a.nodeType&&(o=Math.min(o,a.childNodes.length))<a.childNodes.length){let e=a.childNodes[o],r;"IMG"==e.nodeName&&(r=e.getBoundingClientRect()).right<=t.left&&r.bottom>t.top&&o++}mW&&o&&1==a.nodeType&&1==(r=a.childNodes[o-1]).nodeType&&"false"==r.contentEditable&&r.getBoundingClientRect().top>=t.top&&o--,a==e.dom&&o==a.childNodes.length-1&&1==a.lastChild.nodeType&&t.top>a.lastChild.getBoundingClientRect().bottom?i=e.state.doc.content.size:(0==o||1!=a.nodeType||"BR"!=a.childNodes[o-1].nodeName)&&(i=function(e,t,r,n){let i=-1;for(let r=t,s=!1;r!=e.dom;){let t=e.docView.nearestDesc(r,!0),a;if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent||!t.contentDOM)&&((a=t.dom.getBoundingClientRect()).width||a.height)&&(t.node.isBlock&&t.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(t.dom.nodeName)&&(!s&&a.left>n.left||a.top>n.top?i=t.posBefore:(!s&&a.right<n.left||a.bottom<n.top)&&(i=t.posAfter),s=!0),!t.contentDOM&&i<0&&!t.node.isText))return(t.node.isBlock?n.top<(a.top+a.bottom)/2:n.left<(a.left+a.right)/2)?t.posBefore:t.posAfter;r=t.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,r,-1)}(e,a,o,t))}null==i&&(i=function(e,t,r){let{node:n,offset:i}=function e(t,r){let n,i,s,a=2e8,o,l=0,d=r.top,c=r.top;for(let e=t.firstChild,u=0;e;e=e.nextSibling,u++){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=mv(e).getClientRects()}for(let p=0;p<t.length;p++){let h=t[p];if(h.top<=d&&h.bottom>=c){d=Math.max(h.bottom,d),c=Math.min(h.top,c);let t=h.left>r.left?h.left-r.left:h.right<r.left?r.left-h.right:0;if(t<a){s=e,a=t,o=t&&3==s.nodeType?{left:h.right<r.left?h.right:h.left,top:r.top}:r,1==e.nodeType&&t&&(l=u+ +(r.left>=(h.left+h.right)/2));continue}}else h.top>r.top&&!n&&h.left<=r.left&&h.right>=r.left&&(n=e,i={left:Math.max(h.left,Math.min(h.right,r.left)),top:h.top});!s&&(r.left>=h.right&&r.top>=h.top||r.left>=h.left&&r.top>=h.bottom)&&(l=u+1)}}return(!s&&n&&(s=n,o=i,a=0),s&&3==s.nodeType)?function(e,t){let r=e.nodeValue.length,n=document.createRange();for(let i=0;i<r;i++){n.setEnd(e,i+1),n.setStart(e,i);let r=m1(n,1);if(r.top!=r.bottom&&mQ(t,r))return{node:e,offset:i+ +(t.left>=(r.left+r.right)/2)}}return{node:e,offset:0}}(s,o):!s||a&&1==s.nodeType?{node:t,offset:l}:e(s,o)}(t,r),s=-1;if(1==n.nodeType&&!n.firstChild){let e=n.getBoundingClientRect();s=e.left!=e.right&&r.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(n,i,s)}(e,d,t));let c=e.docView.nearestDesc(d,!0);return{pos:i,inside:c?c.posAtStart-c.border:-1}}(this,e)}coordsAtPos(e,t=1){return m4(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let n=this.docView.posFromDOM(e,t,r);if(null==n)throw RangeError("DOM position not inside the editor");return n}endOfTextblock(e,t){return function(e,t,r){let n,i;return m7==t&&m8==r?fe:(m7=t,m8=r,fe="up"==r||"down"==r?(n=t.selection,i="up"==r?n.$from:n.$to,m3(e,t,()=>{let{node:t}=e.docView.domFromPos(i.pos,"up"==r?-1:1);for(;;){let r=e.docView.nearestDesc(t,!0);if(!r)break;if(r.node.isBlock){t=r.contentDOM||r.dom;break}t=r.dom.parentNode}let n=m4(e,i.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=mv(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let i=t[e];if(i.bottom>i.top+1&&("up"==r?n.top-i.top>(i.bottom-n.top)*2:i.bottom-n.bottom>(n.bottom-i.top)*2))return!1}}return!0})):function(e,t,r){let{$head:n}=t.selection;if(!n.parent.isTextblock)return!1;let i=n.parentOffset,s=i==n.parent.content.size,a=e.domSelection();return a?m9.test(n.parent.textContent)&&a.modify?m3(e,t,()=>{let{focusNode:t,focusOffset:i,anchorNode:s,anchorOffset:o}=e.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",r,"character");let d=n.depth?e.docView.domAfterPos(n.before()):e.dom,{focusNode:c,focusOffset:u}=e.domSelectionRange(),p=c&&!d.contains(1==c.nodeType?c:c.parentNode)||t==c&&i==u;try{a.collapse(s,o),t&&(t!=s||i!=o)&&a.extend&&a.extend(t,i)}catch(e){}return null!=l&&(a.caretBidiLevel=l),p}):"left"==r||"backward"==r?!i:s:n.pos==n.start()||n.pos==n.end()}(e,t,r))}(this,t||this.state,e)}pasteHTML(e,t){return gl(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return gl(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return fV(this,e)}destroy(){if(this.docView){for(let e in this.domObserver.stop(),this.input.eventHandlers)this.dom.removeEventListener(e,this.input.eventHandlers[e]);clearTimeout(this.input.composingTimeout),clearTimeout(this.input.lastIOSEnterFallbackTimeout),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],gC(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,mk()}}get isDestroyed(){return null==this.docView}dispatchEvent(e){!f3(this,e)&&f0[e.type]&&(this.editable||!(e.type in f1))&&f0[e.type](this,e)}domSelectionRange(){let e=this.domSelection();return e?mF&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){let r;if(t.getComposedRanges){let r=t.getComposedRanges(e.root)[0];if(r)return gD(e,r)}function n(e){e.preventDefault(),e.stopImmediatePropagation(),r=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0),r?gD(e,r):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function gV(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",r=>{if("function"==typeof r&&(r=r(e.state)),r)for(let e in r)"class"==e?t.class+=" "+r[e]:"style"==e?t.style=(t.style?t.style+";":"")+r[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(r[e]))}),t.translate||(t.translate="no"),[gy.node(0,e.state.doc.content.size,t)]}function gH(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:gy.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function gW(e){return!e.someProp("editable",t=>!1===t(e.state))}function gK(e){let t=Object.create(null);function r(e){for(let r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r])}return e.someProp("nodeViews",r),e.someProp("markViews",r),t}function gq(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw RangeError("Plugins passed directly to the view must not have a state component")}gB.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};for(var gJ={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gG={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},gY="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),gX="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),gQ=0;gQ<10;gQ++)gJ[48+gQ]=gJ[96+gQ]=String(gQ);for(var gQ=1;gQ<=24;gQ++)gJ[gQ+111]="F"+gQ;for(var gQ=65;gQ<=90;gQ++)gJ[gQ]=String.fromCharCode(gQ+32),gG[gQ]=String.fromCharCode(gQ);for(var g0 in gJ)gG.hasOwnProperty(g0)||(gG[g0]=gJ[g0]);let g1="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),g2="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function g4(e,t,r=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),r&&t.shiftKey&&(e="Shift-"+e),e}function g5(e){let t=function(e){let t=Object.create(null);for(let r in e)t[function(e){let t,r,n,i,s=e.split(/-(?!$)/),a=s[s.length-1];"Space"==a&&(a=" ");for(let e=0;e<s.length-1;e++){let a=s[e];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))n=!0;else if(/^mod$/i.test(a))g1?i=!0:r=!0;else throw Error("Unrecognized modifier name: "+a)}return t&&(a="Alt-"+a),r&&(a="Ctrl-"+a),i&&(a="Meta-"+a),n&&(a="Shift-"+a),a}(r)]=e[r];return t}(e);return function(e,r){var n;let i=("Esc"==(n=!(gY&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||gX&&r.shiftKey&&r.key&&1==r.key.length||"Unidentified"==r.key)&&r.key||(r.shiftKey?gG:gJ)[r.keyCode]||r.key||"Unidentified")&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n),s,a=t[g4(i,r)];if(a&&a(e.state,e.dispatch,e))return!0;if(1==i.length&&" "!=i){if(r.shiftKey){let n=t[g4(i,r,!1)];if(n&&n(e.state,e.dispatch,e))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(g2&&r.ctrlKey&&r.altKey)&&(s=gJ[r.keyCode])&&s!=i){let n=t[g4(s,r)];if(n&&n(e.state,e.dispatch,e))return!0}}return!1}}var g6=Object.defineProperty,g3=(e,t)=>{for(var r in t)g6(e,r,{get:t[r],enumerable:!0})};function g9(e){let{state:t,transaction:r}=e,{selection:n}=r,{doc:i}=r,{storedMarks:s}=r;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return n},get doc(){return i},get tr(){return n=r.selection,i=r.doc,s=r.storedMarks,r}}}var g7=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:t,state:r}=this,{view:n}=t,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,(...e)=>{let r=t(...e)(s);return i.getMeta("preventDispatch")||this.hasCustomState||n.dispatch(i),r}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){let{rawCommands:r,editor:n,state:i}=this,{view:s}=n,a=[],o=!!e,l=e||i.tr,d=()=>(o||!t||l.getMeta("preventDispatch")||this.hasCustomState||s.dispatch(l),a.every(e=>!0===e)),c={...Object.fromEntries(Object.entries(r).map(([e,r])=>[e,(...e)=>{let n=this.buildProps(l,t),i=r(...e)(n);return a.push(i),c}])),run:d};return c}createCan(e){let{rawCommands:t,state:r}=this,n=e||r.tr,i=this.buildProps(n,!1);return{...Object.fromEntries(Object.entries(t).map(([e,t])=>[e,(...e)=>t(...e)({...i,dispatch:void 0})])),chain:()=>this.createChain(n,!1)}}buildProps(e,t=!0){let{rawCommands:r,editor:n,state:i}=this,{view:s}=n,a={tr:e,editor:n,view:s,state:g9({state:i,transaction:e}),dispatch:t?()=>void 0:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([e,t])=>[e,(...e)=>t(...e)(a)]))}};return a}},g8={};g3(g8,{blur:()=>ye,clearContent:()=>yt,clearNodes:()=>yr,command:()=>yn,createParagraphNear:()=>yi,cut:()=>ys,deleteCurrentNode:()=>ya,deleteNode:()=>yl,deleteRange:()=>yd,deleteSelection:()=>yc,enter:()=>yu,exitCode:()=>yp,extendMarkRange:()=>yb,first:()=>yv,focus:()=>yS,forEach:()=>yj,insertContent:()=>yT,insertContentAt:()=>yA,joinBackward:()=>yM,joinDown:()=>yE,joinForward:()=>yz,joinItemBackward:()=>yP,joinItemForward:()=>yD,joinTextblockBackward:()=>yR,joinTextblockForward:()=>yL,joinUp:()=>yO,keyboardShortcut:()=>yF,lift:()=>yB,liftEmptyBlock:()=>yV,liftListItem:()=>yH,newlineInCode:()=>yW,resetAttributes:()=>yJ,scrollIntoView:()=>yG,selectAll:()=>yY,selectNodeBackward:()=>yX,selectNodeForward:()=>yQ,selectParentNode:()=>y0,selectTextblockEnd:()=>y1,selectTextblockStart:()=>y2,setContent:()=>y5,setMark:()=>x$,setMeta:()=>xS,setNode:()=>xj,setNodeSelection:()=>xT,setTextDirection:()=>x_,setTextSelection:()=>xI,sinkListItem:()=>xC,splitBlock:()=>xO,splitListItem:()=>xE,toggleList:()=>xP,toggleMark:()=>xD,toggleNode:()=>xR,toggleWrap:()=>xL,undoInputRule:()=>xU,unsetAllMarks:()=>xF,unsetMark:()=>xZ,unsetTextDirection:()=>xB,updateAttributes:()=>xV,wrapIn:()=>xH,wrapInList:()=>xW});var ye=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var r;e.isDestroyed||(t.dom.blur(),null==(r=null==window?void 0:window.getSelection())||r.removeAllRanges())}),!0),yt=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),yr=()=>({state:e,tr:t,dispatch:r})=>{let{selection:n}=t,{ranges:i}=n;return!r||(i.forEach(({$from:r,$to:n})=>{e.doc.nodesBetween(r.pos,n.pos,(e,r)=>{if(e.type.isText)return;let{doc:n,mapping:i}=t,s=n.resolve(i.map(r)),a=n.resolve(i.map(r+e.nodeSize)),o=s.blockRange(a);if(!o)return;let l=hc(o);if(e.type.isTextblock){let{defaultType:e}=s.parent.contentMatchAt(s.index());t.setNodeMarkup(o.start,e)}(l||0===l)&&t.lift(o,l)})}),!0)},yn=e=>t=>e(t),yi=()=>({state:e,dispatch:t})=>ms(e,t),ys=(e,t)=>({editor:r,tr:n})=>{let{state:i}=r,s=i.doc.slice(e.from,e.to);n.deleteRange(e.from,e.to);let a=n.mapping.map(t);return n.insert(a,s.content),n.setSelection(new hD(n.doc.resolve(Math.max(a-1,0)))),!0},ya=()=>({tr:e,dispatch:t})=>{let{selection:r}=e,n=r.$anchor.node();if(n.content.size>0)return!1;let i=e.selection.$anchor;for(let r=i.depth;r>0;r-=1)if(i.node(r).type===n.type){if(t){let t=i.before(r),n=i.after(r);e.delete(t,n).scrollIntoView()}return!0}return!1};function yo(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var yl=e=>({tr:t,state:r,dispatch:n})=>{let i=yo(e,r.schema),s=t.selection.$anchor;for(let e=s.depth;e>0;e-=1)if(s.node(e).type===i){if(n){let r=s.before(e),n=s.after(e);t.delete(r,n).scrollIntoView()}return!0}return!1},yd=e=>({tr:t,dispatch:r})=>{let{from:n,to:i}=e;return r&&t.delete(n,i),!0},yc=()=>({state:e,dispatch:t})=>h1(e,t),yu=()=>({commands:e})=>e.keyboardShortcut("Enter"),yp=()=>({state:e,dispatch:t})=>mi(e,t);function yh(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function ym(e,t,r={strict:!0}){let n=Object.keys(t);return!n.length||n.every(n=>r.strict?t[n]===e[n]:yh(t[n])?t[n].test(e[n]):t[n]===e[n])}function yf(e,t,r={}){return e.find(e=>e.type===t&&ym(Object.fromEntries(Object.keys(r).map(t=>[t,e.attrs[t]])),r))}function yg(e,t,r={}){return!!yf(e,t,r)}function yy(e,t,r){var n;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if(i.node&&i.node.marks.some(e=>e.type===t)||(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(e=>e.type===t)||(r=r||(null==(n=i.node.marks[0])?void 0:n.attrs),!yf([...i.node.marks],t,r)))return;let s=i.index,a=e.start()+i.offset,o=s+1,l=a+i.node.nodeSize;for(;s>0&&yg([...e.parent.child(s-1).marks],t,r);)s-=1,a-=e.parent.child(s).nodeSize;for(;o<e.parent.childCount&&yg([...e.parent.child(o).marks],t,r);)l+=e.parent.child(o).nodeSize,o+=1;return{from:a,to:l}}function yx(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var yb=(e,t={})=>({tr:r,state:n,dispatch:i})=>{let s=yx(e,n.schema),{doc:a,selection:o}=r,{$from:l,from:d,to:c}=o;if(i){let e=yy(l,s,t);if(e&&e.from<=d&&e.to>=c){let t=hD.create(a,e.from,e.to);r.setSelection(t)}}return!0},yv=e=>t=>{let r="function"==typeof e?e(t):e;for(let e=0;e<r.length;e+=1)if(r[e](t))return!0;return!1};function yk(e){return e instanceof hD}function yw(e=0,t=0,r=0){return Math.min(Math.max(e,t),r)}function yN(e,t=null){if(!t)return null;let r=hE.atStart(e),n=hE.atEnd(e);if("start"===t||!0===t)return r;if("end"===t)return n;let i=r.from,s=n.to;return"all"===t?hD.create(e,yw(0,i,s),yw(e.content.size,i,s)):hD.create(e,yw(t,i,s),yw(t,i,s))}function y$(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var yS=(e=null,t={})=>({editor:r,view:n,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};let a=()=>{(y$()||"Android"===navigator.platform||/android/i.test(navigator.userAgent))&&n.dom.focus(),requestAnimationFrame(()=>{!r.isDestroyed&&(n.focus(),(null==t?void 0:t.scrollIntoView)&&r.commands.scrollIntoView())})};if(n.hasFocus()&&null===e||!1===e)return!0;if(s&&null===e&&!yk(r.state.selection))return a(),!0;let o=yN(i.doc,e)||r.state.selection,l=r.state.selection.eq(o);return s&&(l||i.setSelection(o),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},yj=(e,t)=>r=>e.every((e,n)=>t(e,{...r,index:n})),yT=(e,t)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},e,t),y_=e=>{let t=e.childNodes;for(let r=t.length-1;r>=0;r-=1){let n=t[r];3===n.nodeType&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?e.removeChild(n):1===n.nodeType&&y_(n)}return e};function yI(e){if("undefined"==typeof window)throw Error("[tiptap error]: there is no window object available, so this function cannot be used");let t=`<body>${e}</body>`;return y_(new window.DOMParser().parseFromString(t,"text/html").body)}function yC(e,t,r){if(e instanceof p_||e instanceof pd)return e;r={slice:!0,parseOptions:{},...r};let n="object"==typeof e&&null!==e,i="string"==typeof e;if(n)try{if(Array.isArray(e)&&e.length>0)return pd.fromArray(e.map(e=>t.nodeFromJSON(e)));let n=t.nodeFromJSON(e);return r.errorOnInvalidContent&&n.check(),n}catch(n){if(r.errorOnInvalidContent)throw Error("[tiptap error]: Invalid JSON content",{cause:n});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",n),yC("",t,r)}if(i){if(r.errorOnInvalidContent){let n=!1,i="",s=new pB({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(n=!0,i="string"==typeof e?e:e.outerHTML,null)}]}})});if(r.slice?pH.fromSchema(s).parseSlice(yI(e),r.parseOptions):pH.fromSchema(s).parse(yI(e),r.parseOptions),r.errorOnInvalidContent&&n)throw Error("[tiptap error]: Invalid HTML content",{cause:Error(`Invalid element found: ${i}`)})}let n=pH.fromSchema(t);return r.slice?n.parseSlice(yI(e),r.parseOptions).content:n.parse(yI(e),r.parseOptions)}return yC("",t,r)}var yA=(e,t,r)=>({tr:n,dispatch:i,editor:s})=>{var a;if(i){let i,o;r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let l=e=>{s.emit("contentError",{editor:s,error:e,disableCollaboration:()=>{"collaboration"in s.storage&&"object"==typeof s.storage.collaboration&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{yC(t,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(e){l(e)}try{i=yC(t,s.schema,{parseOptions:d,errorOnInvalidContent:null!=(a=r.errorOnInvalidContent)?a:s.options.enableContentCheck})}catch(e){return l(e),!1}let{from:c,to:u}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},p=!0,h=!0;if((!("type"in i)?i:[i]).forEach(e=>{e.check(),p=!!p&&e.isText&&0===e.marks.length,h=!!h&&e.isBlock}),c===u&&h){let{parent:e}=n.doc.resolve(c);!e.isTextblock||e.type.spec.code||e.childCount||(c-=1,u+=1)}if(p){if(Array.isArray(t))o=t.map(e=>e.text||"").join("");else if(t instanceof pd){let e="";t.forEach(t=>{t.text&&(e+=t.text)}),o=e}else o="object"==typeof t&&t&&t.text?t.text:t;n.insertText(o,c,u)}else{o=i;let e=n.doc.resolve(c),t=e.node(),r=0===e.parentOffset,s=t.isText||t.isTextblock,a=t.content.size>0;r&&s&&a&&(c=Math.max(0,c-1)),n.replaceWith(c,u,o)}r.updateSelection&&function(e,t,r){let n=e.steps.length-1;if(n<t)return;let i=e.steps[n];if(!(i instanceof ha||i instanceof ho))return;let s=e.mapping.maps[n],a=0;s.forEach((e,t,r,n)=>{0===a&&(a=n)}),e.setSelection(hE.near(e.doc.resolve(a),-1))}(n,n.steps.length-1,0),r.applyInputRules&&n.setMeta("applyInputRules",{from:c,text:o}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:c,text:o})}return!0},yO=()=>({state:e,dispatch:t})=>((e,t)=>{let r=e.selection,n=r instanceof hL,i;if(n){if(r.node.isTextblock||!hg(e.doc,r.from))return!1;i=r.from}else if(null==(i=hx(e.doc,r.from,-1)))return!1;if(t){let r=e.tr.join(i);n&&r.setSelection(hL.create(r.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(r.scrollIntoView())}return!0})(e,t),yE=()=>({state:e,dispatch:t})=>((e,t)=>{let r=e.selection,n;if(r instanceof hL){if(r.node.isTextblock||!hg(e.doc,r.to))return!1;n=r.to}else if(null==(n=hx(e.doc,r.to,1)))return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0})(e,t),yM=()=>({state:e,dispatch:t})=>h4(e,t),yz=()=>({state:e,dispatch:t})=>h8(e,t),yP=()=>({state:e,dispatch:t,tr:r})=>{try{let n=hx(e.doc,e.selection.$from.pos,-1);if(null==n)return!1;return r.join(n,2),t&&t(r),!0}catch{return!1}},yD=()=>({state:e,dispatch:t,tr:r})=>{try{let n=hx(e.doc,e.selection.$from.pos,1);if(null==n)return!1;return r.join(n,2),t&&t(r),!0}catch{return!1}},yR=()=>({state:e,dispatch:t})=>((e,t,r)=>{let n=h2(e,r);if(!n)return!1;let i=h9(n);return!!i&&h5(e,i,t)})(e,t),yL=()=>({state:e,dispatch:t})=>((e,t,r)=>{let n=h7(e,r);if(!n)return!1;let i=mt(n);return!!i&&h5(e,i,t)})(e,t);function yU(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}var yF=e=>({editor:t,view:r,tr:n,dispatch:i})=>{let s=(function(e){let t,r,n,i,s=e.split(/-(?!$)/),a=s[s.length-1];"Space"===a&&(a=" ");for(let e=0;e<s.length-1;e+=1){let a=s[e];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))n=!0;else if(/^mod$/i.test(a))y$()||yU()?i=!0:r=!0;else throw Error(`Unrecognized modifier name: ${a}`)}return t&&(a=`Alt-${a}`),r&&(a=`Ctrl-${a}`),i&&(a=`Meta-${a}`),n&&(a=`Shift-${a}`),a})(e).split(/-(?!$)/),a=s.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),o=new KeyboardEvent("keydown",{key:"Space"===a?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{r.someProp("handleKeyDown",e=>e(r,o))});return null==l||l.steps.forEach(e=>{let t=e.map(n.mapping);t&&i&&n.maybeStep(t)}),!0};function yZ(e,t,r={}){let{from:n,to:i,empty:s}=e.selection,a=t?yo(t,e.schema):null,o=[];e.doc.nodesBetween(n,i,(e,t)=>{if(e.isText)return;let r=Math.max(n,t),s=Math.min(i,t+e.nodeSize);o.push({node:e,from:r,to:s})});let l=i-n,d=o.filter(e=>!a||a.name===e.node.type.name).filter(e=>ym(e.node.attrs,r,{strict:!1}));return s?!!d.length:d.reduce((e,t)=>e+t.to-t.from,0)>=l}var yB=(e,t={})=>({state:r,dispatch:n})=>{let i=yo(e,r.schema);return!!yZ(r,i,t)&&((e,t)=>{let{$from:r,$to:n}=e.selection,i=r.blockRange(n),s=i&&hc(i);return null!=s&&(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)})(r,n)},yV=()=>({state:e,dispatch:t})=>ma(e,t),yH=e=>({state:t,dispatch:r})=>{var n;return(n=yo(e,t.schema),function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,e=>e.childCount>0&&e.firstChild.type==n);return!!s&&(!t||(r.node(s.depth-1).type==n?function(e,t,r,n){let i=e.tr,s=n.end,a=n.$to.end(n.depth);s<a&&(i.step(new ho(s-1,a,s,a,new pf(pd.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new pj(i.doc.resolve(n.$from.pos),i.doc.resolve(a),n.depth));let o=hc(n);if(null==o)return!1;i.lift(n,o);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return hg(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),t(i.scrollIntoView()),!0}(e,t,n,s):function(e,t,r){let n=e.tr,i=r.parent;for(let e=r.end,t=r.endIndex-1,s=r.startIndex;t>s;t--)e-=i.child(t).nodeSize,n.delete(e-1,e+1);let s=n.doc.resolve(r.start),a=s.nodeAfter;if(n.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let o=0==r.startIndex,l=r.endIndex==i.childCount,d=s.node(-1),c=s.index(-1);if(!d.canReplace(c+ +!o,c+1,a.content.append(l?pd.empty:pd.from(i))))return!1;let u=s.pos,p=u+a.nodeSize;return n.step(new ho(u-!!o,p+ +!!l,u+1,p-1,new pf((o?pd.empty:pd.from(i.copy(pd.empty))).append(l?pd.empty:pd.from(i.copy(pd.empty))),+!o,+!l),+!o)),t(n.scrollIntoView()),!0}(e,t,s)))})(t,r)},yW=()=>({state:e,dispatch:t})=>mr(e,t);function yK(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function yq(e,t){let r="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,n)=>(r.includes(n)||(t[n]=e[n]),t),{})}var yJ=(e,t)=>({tr:r,state:n,dispatch:i})=>{let s=null,a=null,o=yK("string"==typeof e?e:e.name,n.schema);if(!o)return!1;"node"===o&&(s=yo(e,n.schema)),"mark"===o&&(a=yx(e,n.schema));let l=!1;return r.selection.ranges.forEach(e=>{n.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,n)=>{s&&s===e.type&&(l=!0,i&&r.setNodeMarkup(n,void 0,yq(e.attrs,t))),a&&e.marks.length&&e.marks.forEach(s=>{a===s.type&&(l=!0,i&&r.addMark(n,n+e.nodeSize,a.create(yq(s.attrs,t))))})})}),l},yG=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),yY=()=>({tr:e,dispatch:t})=>{if(t){let t=new hF(e.doc);e.setSelection(t)}return!0},yX=()=>({state:e,dispatch:t})=>h3(e,t),yQ=()=>({state:e,dispatch:t})=>me(e,t),y0=()=>({state:e,dispatch:t})=>((e,t)=>{let{$from:r,to:n}=e.selection,i,s=r.sharedDepth(n);return 0!=s&&(i=r.before(s),t&&t(e.tr.setSelection(hL.create(e.doc,i))),!0)})(e,t),y1=()=>({state:e,dispatch:t})=>mc(e,t),y2=()=>({state:e,dispatch:t})=>md(e,t);function y4(e,t,r={},n={}){return yC(e,t,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var y5=(e,{errorOnInvalidContent:t,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:i,tr:s,dispatch:a,commands:o})=>{let{doc:l}=s;if("full"!==n.preserveWhitespace){let o=y4(e,i.schema,n,{errorOnInvalidContent:null!=t?t:i.options.enableContentCheck});return a&&s.replaceWith(0,l.content.size,o).setMeta("preventUpdate",!r),!0}return a&&s.setMeta("preventUpdate",!r),o.insertContentAt({from:0,to:l.content.size},e,{parseOptions:n,errorOnInvalidContent:null!=t?t:i.options.enableContentCheck})};function y6(e,t){let r=yx(t,e.schema),{from:n,to:i,empty:s}=e.selection,a=[];s?(e.storedMarks&&a.push(...e.storedMarks),a.push(...e.selection.$head.marks())):e.doc.nodesBetween(n,i,e=>{a.push(...e.marks)});let o=a.find(e=>e.type.name===r.name);return o?{...o.attrs}:{}}function y3(e,t){let r=new hA(e);return t.forEach(e=>{e.steps.forEach(e=>{r.step(e)})}),r}function y9(e){return t=>(function(e,t){for(let r=e.depth;r>0;r-=1){let n=e.node(r);if(t(n))return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:n}}})(t.$from,e)}function y7(e,t,r){return void 0===e.config[t]&&e.parent?y7(e.parent,t,r):"function"==typeof e.config[t]?e.config[t].bind({...r,parent:e.parent?y7(e.parent,t,r):null}):e.config[t]}function y8(e){return e.map(e=>{let t={name:e.name,options:e.options,storage:e.storage},r=y7(e,"addExtensions",t);return r?[e,...y8(r())]:e}).flat(10)}function xe(e,t){let r=p0.fromSchema(t).serializeFragment(e),n=document.implementation.createHTMLDocument().createElement("div");return n.appendChild(r),n.innerHTML}function xt(e){return"function"==typeof e}function xr(e,t,...r){return xt(e)?t?e.bind(t)(...r):e(...r):e}function xn(e){let t=e.filter(e=>"extension"===e.type);return{baseExtensions:t,nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function xi(e){let t=[],{nodeExtensions:r,markExtensions:n}=xn(e),i=[...r,...n],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{let r={name:e.name,options:e.options,storage:e.storage,extensions:i},n=y7(e,"addGlobalAttributes",r);n&&n().forEach(e=>{e.types.forEach(r=>{Object.entries(e.attributes).forEach(([e,n])=>{t.push({type:r,name:e,attribute:{...s,...n}})})})})}),i.forEach(e=>{let r={name:e.name,options:e.options,storage:e.storage},n=y7(e,"addAttributes",r);n&&Object.entries(n()).forEach(([r,n])=>{let i={...s,...n};"function"==typeof(null==i?void 0:i.default)&&(i.default=i.default()),(null==i?void 0:i.isRequired)&&(null==i?void 0:i.default)===void 0&&delete i.default,t.push({type:e.name,name:r,attribute:i})})}),t}function xs(...e){return e.filter(e=>!!e).reduce((e,t)=>{let r={...e};return Object.entries(t).forEach(([e,t])=>{if(!r[e]){r[e]=t;return}if("class"===e){let n=t?String(t).split(" "):[],i=r[e]?r[e].split(" "):[],s=n.filter(e=>!i.includes(e));r[e]=[...i,...s].join(" ")}else if("style"===e){let n=t?t.split(";").map(e=>e.trim()).filter(Boolean):[],i=r[e]?r[e].split(";").map(e=>e.trim()).filter(Boolean):[],s=new Map;i.forEach(e=>{let[t,r]=e.split(":").map(e=>e.trim());s.set(t,r)}),n.forEach(e=>{let[t,r]=e.split(":").map(e=>e.trim());s.set(t,r)}),r[e]=Array.from(s.entries()).map(([e,t])=>`${e}: ${t}`).join("; ")}else r[e]=t}),r},{})}function xa(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>xs(e,t),{})}function xo(e,t){return"style"in e?e:{...e,getAttrs:r=>{let n=e.getAttrs?e.getAttrs(r):e.attrs;if(!1===n)return!1;let i=t.reduce((e,t)=>{var n;let i=t.attribute.parseHTML?t.attribute.parseHTML(r):"string"!=typeof(n=r.getAttribute(t.name))?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):"true"===n||"false"!==n&&n;return null==i?e:{...e,[t.name]:i}},{});return{...n,...i}}}}function xl(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>!("attrs"===e&&function(e={}){return 0===Object.keys(e).length&&e.constructor===Object}(t))&&null!=t))}function xd(e){var t,r;let n={};return!(null==(t=null==e?void 0:e.attribute)?void 0:t.isRequired)&&"default"in((null==e?void 0:e.attribute)||{})&&(n.default=e.attribute.default),(null==(r=null==e?void 0:e.attribute)?void 0:r.validate)!==void 0&&(n.validate=e.attribute.validate),[e.name,n]}function xc(e){return e.sort((e,t)=>{let r=y7(e,"priority")||100,n=y7(t,"priority")||100;return r>n?-1:+(r<n)})}function xu(e){var t;let r=xc(y8(e)),n=Array.from(new Set((t=r.map(e=>e.name)).filter((e,r)=>t.indexOf(e)!==r)));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(e=>`'${e}'`).join(", ")}]. This can lead to issues.`),r}function xp(e,t,r){let{from:n,to:i}=t,{blockSeparator:s="\n\n",textSerializers:a={}}=r||{},o="";return e.nodesBetween(n,i,(e,r,l,d)=>{var c;e.isBlock&&r>n&&(o+=s);let u=null==a?void 0:a[e.type.name];if(u)return l&&(o+=u({node:e,pos:r,parent:l,index:d,range:t})),!1;e.isText&&(o+=null==(c=null==e?void 0:e.text)?void 0:c.slice(Math.max(n,r)-r,i-r))}),o}function xh(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function xm(e,t){let r=yK("string"==typeof t?t:t.name,e.schema);return"node"===r?function(e,t){let r=yo(t,e.schema),{from:n,to:i}=e.selection,s=[];e.doc.nodesBetween(n,i,e=>{s.push(e)});let a=s.reverse().find(e=>e.type.name===r.name);return a?{...a.attrs}:{}}(e,t):"mark"===r?y6(e,t):{}}function xf(e){let t,{mapping:r,steps:n}=e,i=[];return r.maps.forEach((e,t)=>{let s=[];if(e.ranges.length)e.forEach((e,t)=>{s.push({from:e,to:t})});else{let{from:e,to:r}=n[t];if(void 0===e||void 0===r)return;s.push({from:e,to:r})}s.forEach(({from:e,to:n})=>{let s=r.slice(t).map(e,-1),a=r.slice(t).map(n),o=r.invert().map(s,-1),l=r.invert().map(a);i.push({oldRange:{from:o,to:l},newRange:{from:s,to:a}})})}),1===(t=function(e,t=JSON.stringify){let r={};return e.filter(e=>{let n=t(e);return!Object.prototype.hasOwnProperty.call(r,n)&&(r[n]=!0)})}(i)).length?t:t.filter((e,r)=>!t.filter((e,t)=>t!==r).some(t=>e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to))}function xg(e,t,r){let n=[];return e===t?r.resolve(e).marks().forEach(t=>{let i=yy(r.resolve(e),t.type);i&&n.push({mark:t,...i})}):r.nodesBetween(e,t,(e,t)=>{e&&(null==e?void 0:e.nodeSize)!==void 0&&n.push(...e.marks.map(r=>({from:t,to:t+e.nodeSize,mark:r})))}),n}function xy(e,t){return t.nodes[e]||t.marks[e]||null}function xx(e,t,r){return Object.fromEntries(Object.entries(r).filter(([r])=>{let n=e.find(e=>e.type===t&&e.name===r);return!!n&&n.attribute.keepOnSplit}))}function xb(e,t,r={}){let{empty:n,ranges:i}=e.selection,s=t?yx(t,e.schema):null;if(n)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!s||s.name===e.type.name).find(e=>ym(e.attrs,r,{strict:!1}));let a=0,o=[];if(i.forEach(({$from:t,$to:r})=>{let n=t.pos,i=r.pos;e.doc.nodesBetween(n,i,(e,t)=>{if(!e.isText&&!e.marks.length)return;let r=Math.max(n,t),s=Math.min(i,t+e.nodeSize);a+=s-r,o.push(...e.marks.map(e=>({mark:e,from:r,to:s})))})}),0===a)return!1;let l=o.filter(e=>!s||s.name===e.mark.type.name).filter(e=>ym(e.mark.attrs,r,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),d=o.filter(e=>!s||e.mark.type!==s&&e.mark.type.excludes(s)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+d:l)>=a}function xv(e,t){return Array.isArray(t)?t.some(t=>("string"==typeof t?t:t.name)===e.name):t}function xk(e,t){let{nodeExtensions:r}=xn(t),n=r.find(t=>t.name===e);if(!n)return!1;let i={name:n.name,options:n.options,storage:n.storage},s=xr(y7(n,"group",i));return"string"==typeof s&&s.split(" ").includes("list")}function xw(e,{checkChildren:t=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!=(n=e.text)?n:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(t){let n=!0;return e.content.forEach(e=>{!1!==n&&(xw(e,{ignoreWhitespace:r,checkChildren:t})||(n=!1))}),n}return!1}function xN(e){return e instanceof hL}var x$=(e,t={})=>({tr:r,state:n,dispatch:i})=>{let{selection:s}=r,{empty:a,ranges:o}=s,l=yx(e,n.schema);if(i)if(a){let e=y6(n,l);r.addStoredMark(l.create({...e,...t}))}else o.forEach(e=>{let i=e.$from.pos,s=e.$to.pos;n.doc.nodesBetween(i,s,(e,n)=>{let a=Math.max(n,i),o=Math.min(n+e.nodeSize,s);e.marks.find(e=>e.type===l)?e.marks.forEach(e=>{l===e.type&&r.addMark(a,o,l.create({...e.attrs,...t}))}):r.addMark(a,o,l.create(t))})});return function(e,t,r){var n;let{selection:i}=t,s=null;if(yk(i)&&(s=i.$cursor),s){let t=null!=(n=e.storedMarks)?n:s.marks();return s.parent.type.allowsMarkType(r)&&(!!r.isInSet(t)||!t.some(e=>e.type.excludes(r)))}let{ranges:a}=i;return a.some(({$from:t,$to:n})=>{let i=0===t.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(r);return e.doc.nodesBetween(t.pos,n.pos,(e,t,n)=>{if(i)return!1;if(e.isInline){let t=!n||n.type.allowsMarkType(r),s=!!r.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(r));i=t&&s}return!i}),i})}(n,r,l)},xS=(e,t)=>({tr:r})=>(r.setMeta(e,t),!0),xj=(e,t={})=>({state:r,dispatch:n,chain:i})=>{let s,a=yo(e,r.schema);return(r.selection.$anchor.sameParent(r.selection.$head)&&(s=r.selection.$anchor.parent.attrs),a.isTextblock)?i().command(({commands:e})=>!!mu(a,{...s,...t})(r)||e.clearNodes()).command(({state:e})=>mu(a,{...s,...t})(e,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},xT=e=>({tr:t,dispatch:r})=>{if(r){let{doc:r}=t,n=yw(e,0,r.content.size),i=hL.create(r,n);t.setSelection(i)}return!0},x_=(e,t)=>({tr:r,state:n,dispatch:i})=>{let s,a,{selection:o}=n;return"number"==typeof t?(s=t,a=t):t&&"from"in t&&"to"in t?(s=t.from,a=t.to):(s=o.from,a=o.to),i&&r.doc.nodesBetween(s,a,(t,n)=>{t.isText||r.setNodeMarkup(n,void 0,{...t.attrs,dir:e})}),!0},xI=e=>({tr:t,dispatch:r})=>{if(r){let{doc:r}=t,{from:n,to:i}="number"==typeof e?{from:e,to:e}:e,s=hD.atStart(r).from,a=hD.atEnd(r).to,o=yw(n,s,a),l=yw(i,s,a),d=hD.create(r,o,l);t.setSelection(d)}return!0},xC=e=>({state:t,dispatch:r})=>{var n;return(n=yo(e,t.schema),function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,e=>e.childCount>0&&e.firstChild.type==n);if(!s)return!1;let a=s.startIndex;if(0==a)return!1;let o=s.parent,l=o.child(a-1);if(l.type!=n)return!1;if(t){let r=l.lastChild&&l.lastChild.type==o.type,i=pd.from(r?n.create():null),a=new pf(pd.from(n.create(null,pd.from(o.type.create(null,i)))),r?3:1,0),d=s.start,c=s.end;t(e.tr.step(new ho(d-(r?3:1),c,d,c,a,1,!0)).scrollIntoView())}return!0})(t,r)};function xA(e,t){let r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(r){let n=r.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(n)}}var xO=({keepMarks:e=!0}={})=>({tr:t,state:r,dispatch:n,editor:i})=>{let{selection:s,doc:a}=t,{$from:o,$to:l}=s,d=xx(i.extensionManager.attributes,o.node().type.name,o.node().attrs);if(s instanceof hL&&s.node.isBlock)return!!o.parentOffset&&!!hf(a,o.pos)&&(n&&(e&&xA(r,i.extensionManager.splittableMarks),t.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;let c=l.parentOffset===l.parent.content.size,u=0===o.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){let{type:r}=e.edge(t);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}(o.node(-1).contentMatchAt(o.indexAfter(-1))),p=c&&u?[{type:u,attrs:d}]:void 0,h=hf(t.doc,t.mapping.map(o.pos),1,p);if(!p&&!h&&hf(t.doc,t.mapping.map(o.pos),1,u?[{type:u}]:void 0)&&(h=!0,p=u?[{type:u,attrs:d}]:void 0),n){if(h&&(s instanceof hD&&t.deleteSelection(),t.split(t.mapping.map(o.pos),1,p),u&&!c&&!o.parentOffset&&o.parent.type!==u)){let e=t.mapping.map(o.before()),r=t.doc.resolve(e);o.node(-1).canReplaceWith(r.index(),r.index()+1,u)&&t.setNodeMarkup(t.mapping.map(o.before()),u)}e&&xA(r,i.extensionManager.splittableMarks),t.scrollIntoView()}return h},xE=(e,t={})=>({tr:r,state:n,dispatch:i,editor:s})=>{var a;let o=yo(e,n.schema),{$from:l,$to:d}=n.selection,c=n.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(d))return!1;let u=l.node(-1);if(u.type!==o)return!1;let p=s.extensionManager.attributes;if(0===l.parent.content.size&&l.node(-1).childCount===l.indexAfter(-1)){if(2===l.depth||l.node(-3).type!==o||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let e=pd.empty,n=l.index(-1)?1:l.index(-2)?2:3;for(let t=l.depth-n;t>=l.depth-3;t-=1)e=pd.from(l.node(t).copy(e));let i=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,s={...xx(p,l.node().type.name,l.node().attrs),...t},d=(null==(a=o.contentMatch.defaultType)?void 0:a.createAndFill(s))||void 0;e=e.append(pd.from(o.createAndFill(null,d)||void 0));let c=l.before(l.depth-(n-1));r.replace(c,l.after(-i),new pf(e,4-n,0));let u=-1;r.doc.nodesBetween(c,r.doc.content.size,(e,t)=>{if(u>-1)return!1;e.isTextblock&&0===e.content.size&&(u=t+1)}),u>-1&&r.setSelection(hD.near(r.doc.resolve(u))),r.scrollIntoView()}return!0}let h=d.pos===l.end()?u.contentMatchAt(0).defaultType:null,m={...xx(p,u.type.name,u.attrs),...t},f={...xx(p,l.node().type.name,l.node().attrs),...t};r.delete(l.pos,d.pos);let g=h?[{type:o,attrs:m},{type:h,attrs:f}]:[{type:o,attrs:m}];if(!hf(r.doc,l.pos,2))return!1;if(i){let{selection:e,storedMarks:t}=n,{splittableMarks:a}=s.extensionManager,o=t||e.$to.parentOffset&&e.$from.marks();if(r.split(l.pos,2,g).scrollIntoView(),!o||!i)return!0;let d=o.filter(e=>a.includes(e.type.name));r.ensureMarks(d)}return!0},xM=(e,t)=>{let r=y9(e=>e.type===t)(e.selection);if(!r)return!0;let n=e.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(void 0===n)return!0;let i=e.doc.nodeAt(n);return!(r.node.type===(null==i?void 0:i.type)&&hg(e.doc,r.pos))||(e.join(r.pos),!0)},xz=(e,t)=>{let r=y9(e=>e.type===t)(e.selection);if(!r)return!0;let n=e.doc.resolve(r.start).after(r.depth);if(void 0===n)return!0;let i=e.doc.nodeAt(n);return!(r.node.type===(null==i?void 0:i.type)&&hg(e.doc,n))||(e.join(n),!0)},xP=(e,t,r,n={})=>({editor:i,tr:s,state:a,dispatch:o,chain:l,commands:d,can:c})=>{let{extensions:u,splittableMarks:p}=i.extensionManager,h=yo(e,a.schema),m=yo(t,a.schema),{selection:f,storedMarks:g}=a,{$from:y,$to:x}=f,b=y.blockRange(x),v=g||f.$to.parentOffset&&f.$from.marks();if(!b)return!1;let k=y9(e=>xk(e.type.name,u))(f);if(b.depth>=1&&k&&b.depth-k.depth<=1){if(k.node.type===h)return d.liftListItem(m);if(xk(k.node.type.name,u)&&h.validContent(k.node.content)&&o)return l().command(()=>(s.setNodeMarkup(k.pos,h),!0)).command(()=>xM(s,h)).command(()=>xz(s,h)).run()}return r&&v&&o?l().command(()=>{let e=c().wrapInList(h,n),t=v.filter(e=>p.includes(e.type.name));return s.ensureMarks(t),!!e||d.clearNodes()}).wrapInList(h,n).command(()=>xM(s,h)).command(()=>xz(s,h)).run():l().command(()=>!!c().wrapInList(h,n)||d.clearNodes()).wrapInList(h,n).command(()=>xM(s,h)).command(()=>xz(s,h)).run()},xD=(e,t={},r={})=>({state:n,commands:i})=>{let{extendEmptyMarkRange:s=!1}=r,a=yx(e,n.schema);return xb(n,a,t)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,t)},xR=(e,t,r={})=>({state:n,commands:i})=>{let s,a=yo(e,n.schema),o=yo(t,n.schema),l=yZ(n,a,r);return(n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),l)?i.setNode(o,s):i.setNode(a,{...s,...r})},xL=(e,t={})=>({state:r,commands:n})=>{let i=yo(e,r.schema);return yZ(r,i,t)?n.lift(i):n.wrapIn(i,t)},xU=()=>({state:e,dispatch:t})=>{let r=e.plugins;for(let n=0;n<r.length;n+=1){let i,s=r[n];if(s.spec.isInputRules&&(i=s.getState(e))){if(t){let t=e.tr,r=i.transform;for(let e=r.steps.length-1;e>=0;e-=1)t.step(r.steps[e].invert(r.docs[e]));if(i.text){let r=t.doc.resolve(i.from).marks();t.replaceWith(i.from,i.to,e.schema.text(i.text,r))}else t.delete(i.from,i.to)}return!0}}return!1},xF=()=>({tr:e,dispatch:t})=>{let{selection:r}=e,{empty:n,ranges:i}=r;return!!n||(t&&i.forEach(t=>{e.removeMark(t.$from.pos,t.$to.pos)}),!0)},xZ=(e,t={})=>({tr:r,state:n,dispatch:i})=>{var s;let{extendEmptyMarkRange:a=!1}=t,{selection:o}=r,l=yx(e,n.schema),{$from:d,empty:c,ranges:u}=o;if(!i)return!0;if(c&&a){let{from:e,to:t}=o,n=null==(s=d.marks().find(e=>e.type===l))?void 0:s.attrs,i=yy(d,l,n);i&&(e=i.from,t=i.to),r.removeMark(e,t,l)}else u.forEach(e=>{r.removeMark(e.$from.pos,e.$to.pos,l)});return r.removeStoredMark(l),!0},xB=e=>({tr:t,state:r,dispatch:n})=>{let i,s,{selection:a}=r;return"number"==typeof e?(i=e,s=e):e&&"from"in e&&"to"in e?(i=e.from,s=e.to):(i=a.from,s=a.to),n&&t.doc.nodesBetween(i,s,(e,r)=>{if(e.isText)return;let n={...e.attrs};delete n.dir,t.setNodeMarkup(r,void 0,n)}),!0},xV=(e,t={})=>({tr:r,state:n,dispatch:i})=>{let s=null,a=null,o=yK("string"==typeof e?e:e.name,n.schema);if(!o)return!1;"node"===o&&(s=yo(e,n.schema)),"mark"===o&&(a=yx(e,n.schema));let l=!1;return r.selection.ranges.forEach(e=>{let o,d,c,u,p=e.$from.pos,h=e.$to.pos;r.selection.empty?n.doc.nodesBetween(p,h,(e,t)=>{s&&s===e.type&&(l=!0,c=Math.max(t,p),u=Math.min(t+e.nodeSize,h),o=t,d=e)}):n.doc.nodesBetween(p,h,(e,n)=>{n<p&&s&&s===e.type&&(l=!0,c=Math.max(n,p),u=Math.min(n+e.nodeSize,h),o=n,d=e),n>=p&&n<=h&&(s&&s===e.type&&(l=!0,i&&r.setNodeMarkup(n,void 0,{...e.attrs,...t})),a&&e.marks.length&&e.marks.forEach(s=>{if(a===s.type&&(l=!0,i)){let i=Math.max(n,p),o=Math.min(n+e.nodeSize,h);r.addMark(i,o,a.create({...s.attrs,...t}))}}))}),d&&(void 0!==o&&i&&r.setNodeMarkup(o,void 0,{...d.attrs,...t}),a&&d.marks.length&&d.marks.forEach(e=>{a===e.type&&i&&r.addMark(c,u,a.create({...e.attrs,...t}))}))}),l},xH=(e,t={})=>({state:r,dispatch:n})=>(function(e,t=null){return function(r,n){let{$from:i,$to:s}=r.selection,a=i.blockRange(s),o=a&&hu(a,e,t);return!!o&&(n&&n(r.tr.wrap(a,o).scrollIntoView()),!0)}})(yo(e,r.schema),t)(r,n),xW=(e,t={})=>({state:r,dispatch:n})=>(function(e,t=null){return function(r,n){let{$from:i,$to:s}=r.selection,a=i.blockRange(s);if(!a)return!1;let o=n?r.tr:null;return!!function(e,t,r,n=null){let i=!1,s=t,a=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(r)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=a.resolve(t.start-2);s=new pj(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new pj(t.$from,a.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let o=hu(s,r,n,t);return!!o&&(e&&function(e,t,r,n,i){let s=pd.empty;for(let e=r.length-1;e>=0;e--)s=pd.from(r[e].type.create(r[e].attrs,s));e.step(new ho(t.start-2*!!n,t.end,t.start,t.end,new pf(s,0,0),r.length,!0));let a=0;for(let e=0;e<r.length;e++)r[e].type==i&&(a=e+1);let o=r.length-a,l=t.start+r.length-2*!!n,d=t.parent;for(let r=t.startIndex,n=t.endIndex,i=!0;r<n;r++,i=!1)!i&&hf(e.doc,l,o)&&(e.split(l,o),l+=2*o),l+=d.child(r).nodeSize}(e,t,o,i,r),!0)}(o,a,e,t)&&(n&&n(o.scrollIntoView()),!0)}})(yo(e,r.schema),t)(r,n),xK=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){let r=this.callbacks[e];return r&&r.forEach(e=>e.apply(this,t)),this}off(e,t){let r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(e=>e!==t):delete this.callbacks[e]),this}once(e,t){let r=(...n)=>{this.off(e,r),t.apply(this,n)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}},xq=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=null==(t=e.undoable)||t}};function xJ(e){var t;let{editor:r,from:n,to:i,text:s,rules:a,plugin:o}=e,{view:l}=r;if(l.composing)return!1;let d=l.state.doc.resolve(n);if(d.parent.type.spec.code||(null==(t=d.nodeBefore||d.nodeAfter)?void 0:t.marks.find(e=>e.type.spec.code)))return!1;let c=!1,u=((e,t=500)=>{let r="",n=e.parentOffset;return e.parent.nodesBetween(Math.max(0,n-t),n,(e,t,i,s)=>{var a,o;let l=(null==(o=(a=e.type.spec).toText)?void 0:o.call(a,{node:e,pos:t,parent:i,index:s}))||e.textContent||"%leaf%";r+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,n-t))}),r})(d)+s;return a.forEach(e=>{if(c)return;let t=((e,t)=>{if(yh(t))return t.exec(e);let r=t(e);if(!r)return null;let n=[r.text];return n.index=r.index,n.input=e,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n})(u,e.find);if(!t)return;let a=l.state.tr,d=g9({state:l.state,transaction:a}),p={from:n-(t[0].length-s.length),to:i},{commands:h,chain:m,can:f}=new g7({editor:r,state:d});null!==e.handler({state:d,range:p,match:t,commands:h,chain:m,can:f})&&a.steps.length&&(e.undoable&&a.setMeta(o,{transform:a,from:n,to:i,text:s}),l.dispatch(a),c=!0)}),c}function xG(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}var xY=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...xr(y7(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...xr(y7(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){let t=this.extend({...this.config,addOptions:()=>(function e(t,r){let n={...t};return xG(t)&&xG(r)&&Object.keys(r).forEach(i=>{xG(r[i])&&xG(t[i])?n[i]=e(t[i],r[i]):n[i]=r[i]}),n})(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){let t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},xX=class e extends xY{constructor(){super(...arguments),this.type="mark"}static create(t={}){return new e("function"==typeof t?t():t)}static handleExit({editor:e,mark:t}){let{tr:r}=e.state,n=e.state.selection.$from;if(n.pos===n.end()){let i=n.marks();if(!i.find(e=>(null==e?void 0:e.type.name)===t.name))return!1;let s=i.find(e=>(null==e?void 0:e.type.name)===t.name);return s&&r.removeStoredMark(s),r.insertText(" ",n.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){let t="function"==typeof e?e():e;return super.extend(t)}},xQ=class{constructor(e){this.find=e.find,this.handler=e.handler}},x0=null,x1=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=xu(e),this.schema=function(e,t){var r;let n=xi(e),{nodeExtensions:i,markExtensions:s}=xn(e),a=null==(r=i.find(e=>y7(e,"topNode")))?void 0:r.name;return new pB({topNode:a,nodes:Object.fromEntries(i.map(r=>{let i=n.filter(e=>e.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:t},a=xl({...e.reduce((e,t)=>{let n=y7(t,"extendNodeSchema",s);return{...e,...n?n(r):{}}},{}),content:xr(y7(r,"content",s)),marks:xr(y7(r,"marks",s)),group:xr(y7(r,"group",s)),inline:xr(y7(r,"inline",s)),atom:xr(y7(r,"atom",s)),selectable:xr(y7(r,"selectable",s)),draggable:xr(y7(r,"draggable",s)),code:xr(y7(r,"code",s)),whitespace:xr(y7(r,"whitespace",s)),linebreakReplacement:xr(y7(r,"linebreakReplacement",s)),defining:xr(y7(r,"defining",s)),isolating:xr(y7(r,"isolating",s)),attrs:Object.fromEntries(i.map(xd))}),o=xr(y7(r,"parseHTML",s));o&&(a.parseDOM=o.map(e=>xo(e,i)));let l=y7(r,"renderHTML",s);l&&(a.toDOM=e=>l({node:e,HTMLAttributes:xa(e,i)}));let d=y7(r,"renderText",s);return d&&(a.toText=d),[r.name,a]})),marks:Object.fromEntries(s.map(r=>{let i=n.filter(e=>e.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:t},a=xl({...e.reduce((e,t)=>{let n=y7(t,"extendMarkSchema",s);return{...e,...n?n(r):{}}},{}),inclusive:xr(y7(r,"inclusive",s)),excludes:xr(y7(r,"excludes",s)),group:xr(y7(r,"group",s)),spanning:xr(y7(r,"spanning",s)),code:xr(y7(r,"code",s)),attrs:Object.fromEntries(i.map(xd))}),o=xr(y7(r,"parseHTML",s));o&&(a.parseDOM=o.map(e=>xo(e,i)));let l=y7(r,"renderHTML",s);return l&&(a.toDOM=e=>l({mark:e,HTMLAttributes:xa(e,i)})),[r.name,a]}))})}(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{let r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:xy(t.name,this.schema)},n=y7(t,"addCommands",r);return n?{...e,...n()}:e},{})}get plugins(){let{editor:e}=this;return xc([...this.extensions].reverse()).flatMap(t=>{let r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:xy(t.name,this.schema)},n=[],i=y7(t,"addKeyboardShortcuts",r),s={};if("mark"===t.type&&y7(t,"exitable",r)&&(s.ArrowRight=()=>xX.handleExit({editor:e,mark:t})),i){let t=Object.fromEntries(Object.entries(i()).map(([t,r])=>[t,()=>r({editor:e})]));s={...s,...t}}let a=new hY({props:{handleKeyDown:g5(s)}});n.push(a);let o=y7(t,"addInputRules",r);if(xv(t,e.options.enableInputRules)&&o){let t=o();if(t&&t.length){let r=function(e){let{editor:t,rules:r}=e,n=new hY({state:{init:()=>null,apply(e,i,s){let a=e.getMeta(n);if(a)return a;let o=e.getMeta("applyInputRules");return o&&setTimeout(()=>{let{text:e}=o;"string"==typeof e||(e=xe(pd.from(e),s.schema));let{from:i}=o,a=i+e.length;xJ({editor:t,from:i,to:a,text:e,rules:r,plugin:n})}),e.selectionSet||e.docChanged?null:i}},props:{handleTextInput:(e,i,s,a)=>xJ({editor:t,from:i,to:s,text:a,rules:r,plugin:n}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{let{$cursor:i}=e.state.selection;i&&xJ({editor:t,from:i.pos,to:i.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(e,i){if("Enter"!==i.key)return!1;let{$cursor:s}=e.state.selection;return!!s&&xJ({editor:t,from:s.pos,to:s.pos,text:"\n",rules:r,plugin:n})}},isInputRules:!0});return n}({editor:e,rules:t}),i=Array.isArray(r)?r:[r];n.push(...i)}}let l=y7(t,"addPasteRules",r);if(xv(t,e.options.enablePasteRules)&&l){let t=l();if(t&&t.length){let r=function(e){let t,{editor:r,rules:n}=e,i=null,s=!1,a=!1,o="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{t=null}let l=({state:e,from:n,to:i,rule:s,pasteEvt:a})=>{let l=e.tr;if(function(e){let{editor:t,state:r,from:n,to:i,rule:s,pasteEvent:a,dropEvent:o}=e,{commands:l,chain:d,can:c}=new g7({editor:t,state:r}),u=[];return r.doc.nodesBetween(n,i,(e,t)=>{var p,h,m,f,g;if((null==(h=null==(p=e.type)?void 0:p.spec)?void 0:h.code)||!(e.isText||e.isTextblock||e.isInline))return;let y=null!=(g=null!=(f=null==(m=e.content)?void 0:m.size)?f:e.nodeSize)?g:0,x=Math.max(n,t),b=Math.min(i,t+y);x>=b||((e,t,r)=>{if(yh(t))return[...e.matchAll(t)];let n=t(e,r);return n?n.map(t=>{let r=[t.text];return r.index=t.index,r.input=e,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),r.push(t.replaceWith)),r}):[]})(e.isText?e.text||"":e.textBetween(x-t,b-t,void 0,"ï¿¼"),s.find,a).forEach(e=>{if(void 0===e.index)return;let t=x+e.index+1,n=t+e[0].length,i={from:r.tr.mapping.map(t),to:r.tr.mapping.map(n)},p=s.handler({state:r,range:i,match:e,commands:l,chain:d,can:c,pasteEvent:a,dropEvent:o});u.push(p)})}),u.every(e=>null!==e)}({editor:r,state:g9({state:e,transaction:l}),from:Math.max(n-1,0),to:i.b-1,rule:s,pasteEvent:a,dropEvent:t})&&l.steps.length){try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{t=null}return o="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,l}};return n.map(e=>new hY({view(e){let t=t=>{var n;(i=(null==(n=e.dom.parentElement)?void 0:n.contains(t.target))?e.dom.parentElement:null)&&(x0=r)},n=()=>{x0&&(x0=null)};return window.addEventListener("dragstart",t),window.addEventListener("dragend",n),{destroy(){window.removeEventListener("dragstart",t),window.removeEventListener("dragend",n)}}},props:{handleDOMEvents:{drop:(e,r)=>{if(a=i===e.dom.parentElement,t=r,!a){let e=x0;(null==e?void 0:e.isEditable)&&setTimeout(()=>{let t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})},10)}return!1},paste:(e,t)=>{var r;let n=null==(r=t.clipboardData)?void 0:r.getData("text/html");return o=t,s=!!(null==n?void 0:n.includes("data-pm-slice")),!1}}},appendTransaction:(t,r,n)=>{let i=t[0],d="paste"===i.getMeta("uiEvent")&&!s,c="drop"===i.getMeta("uiEvent")&&!a,u=i.getMeta("applyPasteRules"),p=!!u;if(!d&&!c&&!p)return;if(p){var h,m;let t,{text:r}=u;"string"==typeof r||(r=xe(pd.from(r),n.schema));let{from:i}=u,s=i+r.length;return l({rule:e,state:n,from:i,to:{b:s},pasteEvt:(h=r,null==(m=(t=new ClipboardEvent("paste",{clipboardData:new DataTransfer})).clipboardData)||m.setData("text/html",h),t)})}let f=r.doc.content.findDiffStart(n.doc.content),g=r.doc.content.findDiffEnd(n.doc.content);if("number"==typeof f&&g&&f!==g.b)return l({rule:e,state:n,from:f,to:g,pasteEvt:o})}}))}({editor:e,rules:t});n.push(...r)}}let d=y7(t,"addProseMirrorPlugins",r);if(d){let e=d();n.push(...e)}return n})}get attributes(){return xi(this.extensions)}get nodeViews(){let{editor:e}=this,{nodeExtensions:t}=xn(this.extensions);return Object.fromEntries(t.filter(e=>!!y7(e,"addNodeView")).map(t=>{let r=this.attributes.filter(e=>e.type===t.name),n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:yo(t.name,this.schema)},i=y7(t,"addNodeView",n);if(!i)return[];let s=i();return s?[t.name,(n,i,a,o,l)=>{let d=xa(n,r);return s({node:n,view:i,getPos:a,decorations:o,innerDecorations:l,editor:e,extension:t,HTMLAttributes:d})}]:[]}))}get markViews(){let{editor:e}=this,{markExtensions:t}=xn(this.extensions);return Object.fromEntries(t.filter(e=>!!y7(e,"addMarkView")).map(t=>{let r=this.attributes.filter(e=>e.type===t.name),n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:yx(t.name,this.schema)},i=y7(t,"addMarkView",n);return i?[t.name,(n,s,a)=>{let o=xa(n,r);return i()({mark:n,view:s,inline:a,editor:e,extension:t,HTMLAttributes:o,updateAttributes:t=>{!function(e,t,r={}){let{state:n}=t,{doc:i,tr:s}=n;i.descendants((t,n)=>{let i=s.mapping.map(n),a=s.mapping.map(n)+t.nodeSize,o=null;if(t.marks.forEach(t=>{if(t!==e)return!1;o=t}),!o)return;let l=!1;if(Object.keys(r).forEach(e=>{r[e]!==o.attrs[e]&&(l=!0)}),l){let t=e.type.create({...e.attrs,...r});s.removeMark(i,a,e.type),s.addMark(i,a,t)}}),s.docChanged&&t.view.dispatch(s)}(n,e,t)}})}]:[]}))}setupExtensions(){let e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(e=>[e.name,e.storage])),e.forEach(e=>{var t;let r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:xy(e.name,this.schema)};"mark"===e.type&&(null==(t=xr(y7(e,"keepOnSplit",r)))||t)&&this.splittableMarks.push(e.name);let n=y7(e,"onBeforeCreate",r),i=y7(e,"onCreate",r),s=y7(e,"onUpdate",r),a=y7(e,"onSelectionUpdate",r),o=y7(e,"onTransaction",r),l=y7(e,"onFocus",r),d=y7(e,"onBlur",r),c=y7(e,"onDestroy",r);n&&this.editor.on("beforeCreate",n),i&&this.editor.on("create",i),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),o&&this.editor.on("transaction",o),l&&this.editor.on("focus",l),d&&this.editor.on("blur",d),c&&this.editor.on("destroy",c)})}};x1.resolve=xu,x1.sort=xc,x1.flatten=y8,g3({},{ClipboardTextSerializer:()=>x4,Commands:()=>x5,Delete:()=>x6,Drop:()=>x3,Editable:()=>x9,FocusEvents:()=>x8,Keymap:()=>be,Paste:()=>bt,Tabindex:()=>br,TextDirection:()=>bn,focusEventsPluginKey:()=>x7});var x2=class e extends xY{constructor(){super(...arguments),this.type="extension"}static create(t={}){return new e("function"==typeof t?t():t)}configure(e){return super.configure(e)}extend(e){let t="function"==typeof e?e():e;return super.extend(t)}},x4=x2.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new hY({key:new h0("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:e}=this,{state:t,schema:r}=e,{doc:n,selection:i}=t,{ranges:s}=i,a=Math.min(...s.map(e=>e.$from.pos)),o=Math.max(...s.map(e=>e.$to.pos)),l=xh(r);return xp(n,{from:a,to:o},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),x5=x2.create({name:"commands",addCommands:()=>({...g8})}),x6=x2.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var r,n,i;let s=()=>{var r,n,i,s;if(null!=(s=null==(i=null==(n=null==(r=this.editor.options.coreExtensionOptions)?void 0:r.delete)?void 0:n.filterTransaction)?void 0:i.call(n,e))?s:e.getMeta("y-sync$"))return;let a=y3(e.before,[e,...t]);xf(a).forEach(t=>{a.mapping.mapResult(t.oldRange.from).deletedAfter&&a.mapping.mapResult(t.oldRange.to).deletedBefore&&a.before.nodesBetween(t.oldRange.from,t.oldRange.to,(r,n)=>{let i=n+r.nodeSize-2,s=t.oldRange.from<=n&&i<=t.oldRange.to;this.editor.emit("delete",{type:"node",node:r,from:n,to:i,newFrom:a.mapping.map(n),newTo:a.mapping.map(i),deletedRange:t.oldRange,newRange:t.newRange,partial:!s,editor:this.editor,transaction:e,combinedTransform:a})})});let o=a.mapping;a.steps.forEach((t,r)=>{var n,i;if(t instanceof hn){let s=o.slice(r).map(t.from,-1),l=o.slice(r).map(t.to),d=o.invert().map(s,-1),c=o.invert().map(l),u=null==(n=a.doc.nodeAt(s-1))?void 0:n.marks.some(e=>e.eq(t.mark)),p=null==(i=a.doc.nodeAt(l))?void 0:i.marks.some(e=>e.eq(t.mark));this.editor.emit("delete",{type:"mark",mark:t.mark,from:t.from,to:t.to,deletedRange:{from:d,to:c},newRange:{from:s,to:l},partial:!!(p||u),editor:this.editor,transaction:e,combinedTransform:a})}})};null==(i=null==(n=null==(r=this.editor.options.coreExtensionOptions)?void 0:r.delete)?void 0:n.async)||i?setTimeout(s,0):s()}}),x3=x2.create({name:"drop",addProseMirrorPlugins(){return[new hY({key:new h0("tiptapDrop"),props:{handleDrop:(e,t,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:r,moved:n})}}})]}}),x9=x2.create({name:"editable",addProseMirrorPlugins(){return[new hY({key:new h0("editable"),props:{editable:()=>this.editor.options.editable}})]}}),x7=new h0("focusEvents"),x8=x2.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:e}=this;return[new hY({key:x7,props:{handleDOMEvents:{focus:(t,r)=>{e.isFocused=!0;let n=e.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return t.dispatch(n),!1},blur:(t,r)=>{e.isFocused=!1;let n=e.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return t.dispatch(n),!1}}}})]}}),be=x2.create({name:"keymap",addKeyboardShortcuts(){let e=()=>this.editor.commands.first(({commands:e})=>[()=>e.undoInputRule(),()=>e.command(({tr:t})=>{let{selection:r,doc:n}=t,{empty:i,$anchor:s}=r,{pos:a,parent:o}=s,l=s.parent.isTextblock&&a>0?t.doc.resolve(a-1):s,d=l.parent.type.spec.isolating,c=s.pos-s.parentOffset,u=d&&1===l.parent.childCount?c===s.pos:hE.atStart(n).from===a;return!!i&&!!o.type.isTextblock&&!o.textContent.length&&!!u&&(!u||"paragraph"!==s.parent.type.name)&&e.clearNodes()}),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:e})=>[()=>e.deleteSelection(),()=>e.deleteCurrentNode(),()=>e.joinForward(),()=>e.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},n={...r},i={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return y$()||yU()?i:n},addProseMirrorPlugins(){return[new hY({key:new h0("clearDocument"),appendTransaction:(e,t,r)=>{if(e.some(e=>e.getMeta("composition")))return;let n=e.some(e=>e.docChanged)&&!t.doc.eq(r.doc),i=e.some(e=>e.getMeta("preventClearDocument"));if(!n||i)return;let{empty:s,from:a,to:o}=t.selection,l=hE.atStart(t.doc).from,d=hE.atEnd(t.doc).to;if(s||a!==l||o!==d||!xw(r.doc))return;let c=r.tr,u=g9({state:r,transaction:c}),{commands:p}=new g7({editor:this.editor,state:u});if(p.clearNodes(),c.steps.length)return c}})]}}),bt=x2.create({name:"paste",addProseMirrorPlugins(){return[new hY({key:new h0("tiptapPaste"),props:{handlePaste:(e,t,r)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:r})}}})]}}),br=x2.create({name:"tabindex",addProseMirrorPlugins(){return[new hY({key:new h0("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),bn=x2.create({name:"textDirection",addOptions:()=>({direction:void 0}),addGlobalAttributes(){if(!this.options.direction)return[];let{nodeExtensions:e}=xn(this.extensions);return[{types:e.filter(e=>"text"!==e.name).map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{let t=e.getAttribute("dir");return t&&("ltr"===t||"rtl"===t||"auto"===t)?t:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new hY({key:new h0("textDirection"),props:{attributes:()=>{let e=this.options.direction;return e?{dir:e}:{}}}})]}}),bi=class e{constructor(e,t,r=!1,n=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=n}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!=(e=this.actualDepth)?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(0===this.content.size)return void console.error(`You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+ +!this.node.isText}get parent(){if(0===this.depth)return null;let t=this.resolvedPos.start(this.resolvedPos.depth-1);return new e(this.resolvedPos.doc.resolve(t),this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new e(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new e(t,this.editor)}get children(){let t=[];return this.node.content.forEach((r,n)=>{let i=r.isBlock&&!r.isTextblock,s=r.isAtom&&!r.isText,a=this.pos+n+ +!s;if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;let o=this.resolvedPos.doc.resolve(a);if(!i&&o.depth<=this.depth)return;let l=new e(o,this.editor,i,i?r:null);i&&(l.actualDepth=this.depth+1),t.push(new e(o,this.editor,i,i?r:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){let e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,n=this.parent;for(;n&&!r;){if(n.node.type.name===e)if(Object.keys(t).length>0){let e=n.node.attrs,r=Object.keys(t);for(let n=0;n<r.length;n+=1){let i=r[n];if(e[i]!==t[i])break}}else r=n;n=n.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let n=[];if(!this.children||0===this.children.length)return n;let i=Object.keys(t);return this.children.forEach(s=>{r&&n.length>0||(s.node.type.name===e&&i.every(e=>t[e]===s.node.attrs[e])&&n.push(s),r&&n.length>0||(n=n.concat(s.querySelectorAll(e,t,r))))}),n}setAttribute(e){let{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},bs=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`,ba=class extends xK{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:"undefined"!=typeof document?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:e})=>{throw e},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:e,slice:t,moved:r})=>this.options.onDrop(e,t,r)),this.on("paste",({event:e,slice:t})=>this.options.onPaste(e,t)),this.on("delete",this.options.onDelete);const t=this.createDoc(),r=yN(t,this.options.autofocus);this.editorState=hG.create({doc:t,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if("undefined"==typeof document)throw Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(!1!==this.options.autofocus&&null!==this.options.autofocus&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){let e=this.editorView.dom;(null==e?void 0:e.editor)&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{"function"==typeof this.css.remove?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&"undefined"!=typeof document&&(this.css=function(e,t,r){let n=document.querySelector("style[data-tiptap-style]");if(null!==n)return n;let i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}(bs,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},this.editorView&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if("state"===t)return this.editorState;if(t in e)return Reflect.get(e,t);throw Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){let r=xt(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(e){if(this.isDestroyed)return;let t=this.state.plugins,r=t;if([].concat(e).forEach(e=>{let t="string"==typeof e?`${e}$`:e.key;r=r.filter(e=>!e.key.startsWith(t))}),t.length===r.length)return;let n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var e,t;let r=[...this.options.enableCoreExtensions?[x9,x4.configure({blockSeparator:null==(t=null==(e=this.options.coreExtensionOptions)?void 0:e.clipboardTextSerializer)?void 0:t.blockSeparator}),x5,x8,be,br,x3,bt,x6,bn.configure({direction:this.options.textDirection})].filter(e=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new x1(r,this)}createCommandManager(){this.commandManager=new g7({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=y4(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&"object"==typeof this.storage.collaboration&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),e=y4(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new gB(e,{...this.options.editorProps,attributes:{role:"textbox",...null==(t=this.options.editorProps)?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});let r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.prependClass(),this.injectCSS(),this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;let t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(e=>{var t;return null==(t=this.capturedTransaction)?void 0:t.step(e)});return}let{state:t,transactions:r}=this.state.applyTransaction(e),n=!this.state.selection.eq(t.selection),i=r.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});let a=r.findLast(e=>e.getMeta("focus")||e.getMeta("blur")),o=null==a?void 0:a.getMeta("focus"),l=null==a?void 0:a.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:a}),l&&this.emit("blur",{editor:this,event:l.event,transaction:a}),e.getMeta("preventUpdate")||!r.some(e=>e.docChanged)||s.doc.eq(t.doc)||this.emit("update",{editor:this,transaction:e,appendedTransactions:r.slice(1)})}getAttributes(e){return xm(this.state,e)}isActive(e,t){let r="string"==typeof e?e:null,n="string"==typeof e?t:e;return function(e,t,r={}){if(!t)return yZ(e,null,r)||xb(e,null,r);let n=yK(t,e.schema);return"node"===n?yZ(e,t,r):"mark"===n&&xb(e,t,r)}(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return xe(this.state.doc.content,this.schema)}getText(e){var t,r;let n,{blockSeparator:i="\n\n",textSerializers:s={}}=e||{};return t=this.state.doc,r={blockSeparator:i,textSerializers:{...xh(this.schema),...s}},n={from:0,to:t.content.size},xp(t,n,r)}get isEmpty(){return xw(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return null==(t=null==(e=this.editorView)?void 0:e.isDestroyed)||t}$node(e,t){var r;return(null==(r=this.$doc)?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return(null==(r=this.$doc)?void 0:r.querySelectorAll(e,t))||null}$pos(e){return new bi(this.state.doc.resolve(e),this)}get $doc(){return this.$pos(0)}};function bo(e){return new xq({find:e.find,handler:({state:t,range:r,match:n})=>{let i=xr(e.getAttributes,void 0,n);if(!1===i||null===i)return null;let{tr:s}=t,a=n[n.length-1],o=n[0];if(a){let n=o.search(/\S/),l=r.from+o.indexOf(a),d=l+a.length;if(xg(r.from,r.to,t.doc).filter(t=>t.mark.type.excluded.find(r=>r===e.type&&r!==t.mark.type)).filter(e=>e.to>l).length)return null;d<r.to&&s.delete(d,r.to),l>r.from&&s.delete(r.from+n,l);let c=r.from+n+a.length;s.addMark(r.from+n,c,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function bl(e){return new xq({find:e.find,handler:({state:t,range:r,match:n})=>{let i=xr(e.getAttributes,void 0,n)||{},{tr:s}=t,a=r.from,o=r.to,l=e.type.create(i);if(n[1]){let e=a+n[0].lastIndexOf(n[1]);e>o?e=o:o=e+n[1].length;let t=n[0][n[0].length-1];s.insertText(t,a+n[0].length-1),s.replaceWith(e,o,l)}else if(n[0]){let t=e.type.isInline?a:a-1;s.insert(t,e.type.create(i)).delete(s.mapping.map(a),s.mapping.map(o))}s.scrollIntoView()},undoable:e.undoable})}function bd(e){return new xq({find:e.find,handler:({state:t,range:r,match:n})=>{let i=t.doc.resolve(r.from),s=xr(e.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,s)},undoable:e.undoable})}function bc(e){return new xq({find:e.find,handler:({state:t,range:r,match:n,chain:i})=>{let s=xr(e.getAttributes,void 0,n)||{},a=t.tr.delete(r.from,r.to),o=a.doc.resolve(r.from).blockRange(),l=o&&hu(o,e.type,s);if(!l)return null;if(a.wrap(o,l),e.keepMarks&&e.editor){let{selection:r,storedMarks:n}=t,{splittableMarks:i}=e.editor.extensionManager,s=n||r.$to.parentOffset&&r.$from.marks();if(s){let e=s.filter(e=>i.includes(e.type.name));a.ensureMarks(e)}}if(e.keepAttributes){let t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";i().updateAttributes(t,s).run()}let d=a.doc.resolve(r.from-1).nodeBefore;d&&d.type===e.type&&hg(a.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(n,d))&&a.join(r.from-1)},undoable:e.undoable})}var bu=class{constructor(e){var t,r,n,i,s;this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.handleMouseMove=e=>{if(!this.isResizing||!this.activeHandle)return;let t=e.clientX-this.startX,r=e.clientY-this.startY;this.handleResize(t,r)},this.handleTouchMove=e=>{if(!this.isResizing||!this.activeHandle)return;let t=e.touches[0];if(!t)return;let r=t.clientX-this.startX,n=t.clientY-this.startY;this.handleResize(r,n)},this.handleMouseUp=()=>{if(!this.isResizing)return;let e=this.element.offsetWidth,t=this.element.offsetHeight;this.onCommit(e,t),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=e=>{"Shift"===e.key&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=e=>{"Shift"===e.key&&(this.isShiftKeyPressed=!1)},this.node=e.node,this.element=e.element,this.contentElement=e.contentElement,this.getPos=e.getPos,this.onResize=e.onResize,this.onCommit=e.onCommit,this.onUpdate=e.onUpdate,(null==(t=e.options)?void 0:t.min)&&(this.minSize={...this.minSize,...e.options.min}),(null==(r=e.options)?void 0:r.max)&&(this.maxSize=e.options.max),(null==(n=null==e?void 0:e.options)?void 0:n.directions)&&(this.directions=e.options.directions),(null==(i=e.options)?void 0:i.preserveAspectRatio)&&(this.preserveAspectRatio=e.options.preserveAspectRatio),(null==(s=e.options)?void 0:s.className)&&(this.classNames={container:e.options.className.container||"",wrapper:e.options.className.wrapper||"",handle:e.options.className.handle||"",resizing:e.options.className.resizing||""}),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles()}get dom(){return this.container}get contentDOM(){return this.contentElement}update(e,t,r){return e.type===this.node.type&&(this.node=e,!this.onUpdate||this.onUpdate(e,t,r))}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.container.remove()}createContainer(){let e=document.createElement("div");return e.dataset.resizeContainer="",e.dataset.node=this.node.type.name,e.style.display="flex",e.style.justifyContent="flex-start",e.style.alignItems="flex-start",this.classNames.container&&(e.className=this.classNames.container),e.appendChild(this.wrapper),e}createWrapper(){let e=document.createElement("div");return e.style.position="relative",e.style.display="block",e.dataset.resizeWrapper="",this.classNames.wrapper&&(e.className=this.classNames.wrapper),e.appendChild(this.element),e}createHandle(e){let t=document.createElement("div");return t.dataset.resizeHandle=e,t.style.position="absolute",this.classNames.handle&&(t.className=this.classNames.handle),t}positionHandle(e,t){let r=t.includes("top"),n=t.includes("bottom"),i=t.includes("left"),s=t.includes("right");r&&(e.style.top="0"),n&&(e.style.bottom="0"),i&&(e.style.left="0"),s&&(e.style.right="0"),("top"===t||"bottom"===t)&&(e.style.left="0",e.style.right="0"),("left"===t||"right"===t)&&(e.style.top="0",e.style.bottom="0")}attachHandles(){this.directions.forEach(e=>{let t=this.createHandle(e);this.positionHandle(t,e),t.addEventListener("mousedown",t=>this.handleResizeStart(t,e)),t.addEventListener("touchstart",t=>this.handleResizeStart(t,e)),this.wrapper.appendChild(t)})}applyInitialSize(){let e=this.node.attrs.width,t=this.node.attrs.height;e?(this.element.style.width=`${e}px`,this.initialWidth=e):this.initialWidth=this.element.offsetWidth,t?(this.element.style.height=`${t}px`,this.initialHeight=t):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(e,t){e.preventDefault(),e.stopPropagation(),this.isResizing=!0,this.activeHandle=t,"touches"in e?(this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY):(this.startX=e.clientX,this.startY=e.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(e,t){if(!this.activeHandle)return;let r=this.preserveAspectRatio||this.isShiftKeyPressed,{width:n,height:i}=this.calculateNewDimensions(this.activeHandle,e,t),s=this.applyConstraints(n,i,r);this.element.style.width=`${s.width}px`,this.element.style.height=`${s.height}px`,this.onResize&&this.onResize(s.width,s.height)}calculateNewDimensions(e,t,r){let n=this.startWidth,i=this.startHeight,s=e.includes("right"),a=e.includes("left"),o=e.includes("bottom"),l=e.includes("top");return(s?n=this.startWidth+t:a&&(n=this.startWidth-t),o?i=this.startHeight+r:l&&(i=this.startHeight-r),("right"===e||"left"===e)&&(n=this.startWidth+(s?t:-t)),("top"===e||"bottom"===e)&&(i=this.startHeight+(o?r:-r)),this.preserveAspectRatio||this.isShiftKeyPressed)?this.applyAspectRatio(n,i,e):{width:n,height:i}}applyConstraints(e,t,r){var n,i,s,a;if(!r){let r=Math.max(this.minSize.width,e),s=Math.max(this.minSize.height,t);return(null==(n=this.maxSize)?void 0:n.width)&&(r=Math.min(this.maxSize.width,r)),(null==(i=this.maxSize)?void 0:i.height)&&(s=Math.min(this.maxSize.height,s)),{width:r,height:s}}let o=e,l=t;return o<this.minSize.width&&(l=(o=this.minSize.width)/this.aspectRatio),l<this.minSize.height&&(o=(l=this.minSize.height)*this.aspectRatio),(null==(s=this.maxSize)?void 0:s.width)&&o>this.maxSize.width&&(l=(o=this.maxSize.width)/this.aspectRatio),(null==(a=this.maxSize)?void 0:a.height)&&l>this.maxSize.height&&(o=(l=this.maxSize.height)*this.aspectRatio),{width:o,height:l}}applyAspectRatio(e,t,r){return"left"===r||"right"===r?{width:e,height:e/this.aspectRatio}:"top"===r||"bottom"===r?{width:t*this.aspectRatio,height:t}:{width:e,height:e/this.aspectRatio}}};function bp(e){if(!(null==e?void 0:e.trim()))return{};let t={},r=[],n=e.replace(/["']([^"']*)["']/g,e=>(r.push(e),`__QUOTED_${r.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);i&&(t.class=i.map(e=>e.trim().slice(1)).join(" "));let s=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(t.id=s[1]),Array.from(n.matchAll(/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g)).forEach(([,e,n])=>{var i;let s=r[parseInt((null==(i=n.match(/__QUOTED_(\d+)__/))?void 0:i[1])||"0",10)];s&&(t[e]=s.slice(1,-1))});let a=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return a&&a.split(/\s+/).filter(Boolean).forEach(e=>{e.match(/^[a-zA-Z][\w-]*$/)&&(t[e]=!0)}),t}function bh(e){if(!e||0===Object.keys(e).length)return"";let t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(e=>t.push(`.${e}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([e,r])=>{"class"!==e&&"id"!==e&&(!0===r?t.push(e):!1!==r&&null!=r&&t.push(`${e}="${String(r)}"`))}),t.join(" ")}function bm(e){let{nodeName:t,name:r,parseAttributes:n=bp,serializeAttributes:i=bh,defaultAttributes:s={},requiredAttributes:a=[],allowedAttributes:o}=e,l=r||t;return{parseMarkdown:(e,r)=>{let n={...s,...e.attributes};return r.createNode(t,n,[])},markdownTokenizer:{name:t,level:"block",start(e){var t;let r=RegExp(`^:::${l}(?:\\s|$)`,"m"),n=null==(t=e.match(r))?void 0:t.index;return void 0!==n?n:-1},tokenize(e,r,i){let s=RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),o=e.match(s);if(!o)return;let d=n(o[1]||"");if(!a.find(e=>!(e in d)))return{type:t,raw:o[0],attributes:d}}},renderMarkdown:e=>{let t=i((e=>{if(!o)return e;let t={};return o.forEach(r=>{r in e&&(t[r]=e[r])}),t})(e.attrs||{})),r=t?` {${t}}`:"";return`:::${l}${r} :::`}}}function bf(e){let{nodeName:t,name:r,getContent:n,parseAttributes:i=bp,serializeAttributes:s=bh,defaultAttributes:a={},content:o="block",allowedAttributes:l}=e,d=r||t;return{parseMarkdown:(e,r)=>{let i;if(n){let t=n(e);i="string"==typeof t?[{type:"text",text:t}]:t}else i="block"===o?r.parseChildren(e.tokens||[]):r.parseInline(e.tokens||[]);let s={...a,...e.attributes};return r.createNode(t,s,i)},markdownTokenizer:{name:t,level:"block",start(e){var t;let r=RegExp(`^:::${d}`,"m"),n=null==(t=e.match(r))?void 0:t.index;return void 0!==n?n:-1},tokenize(e,r,n){var s;let a=RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),l=e.match(a);if(!l)return;let[c,u=""]=l,p=i(u),h=1,m=c.length,f="",g=/^:::([\w-]*)(\s.*)?/gm,y=e.slice(m);for(g.lastIndex=0;;){let r=g.exec(y);if(null===r)break;let i=r.index,a=r[1];if(null==(s=r[2])||!s.endsWith(":::")){if(a)h+=1;else if(0==(h-=1)){let s=y.slice(0,i);f=s.trim();let a=e.slice(0,m+i+r[0].length),l=[];if(f)if("block"===o)for((l=n.blockTokens(s)).forEach(e=>{e.text&&(!e.tokens||0===e.tokens.length)&&(e.tokens=n.inlineTokens(e.text))});l.length>0;){let e=l[l.length-1];if("paragraph"!==e.type||e.text&&""!==e.text.trim())break;l.pop()}else l=n.inlineTokens(f);return{type:t,raw:a,attributes:p,content:f,tokens:l}}}}}},renderMarkdown:(e,t)=>{let r=s((e=>{if(!l)return e;let t={};return l.forEach(r=>{r in e&&(t[r]=e[r])}),t})(e.attrs||{})),n=r?` {${r}}`:"",i=t.renderChildren(e.content||[],"\n\n");return`:::${d}${n}

${i}

:::`}}}function bg(e){if(!e.trim())return{};let t={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g,n=r.exec(e);for(;null!==n;){let[,i,s,a]=n;t[i]=s||a,n=r.exec(e)}return t}function by(e){return Object.entries(e).filter(([,e])=>null!=e).map(([e,t])=>`${e}="${t}"`).join(" ")}function bx(e){let{nodeName:t,name:r,getContent:n,parseAttributes:i=bg,serializeAttributes:s=by,defaultAttributes:a={},selfClosing:o=!1,allowedAttributes:l}=e,d=r||t,c=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(e,r)=>{let i={...a,...e.attributes};if(o)return r.createNode(t,i);let s=n?n(e):e.content||"";return s?r.createNode(t,i,[r.createTextNode(s)]):r.createNode(t,i,[])},markdownTokenizer:{name:t,level:"inline",start(e){let t=o?RegExp(`\\[${c}\\s*[^\\]]*\\]`):RegExp(`\\[${c}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${c}\\]`),r=e.match(t),n=null==r?void 0:r.index;return void 0!==n?n:-1},tokenize(e,r,n){let s=o?RegExp(`^\\[${c}\\s*([^\\]]*)\\]`):RegExp(`^\\[${c}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${c}\\]`),a=e.match(s);if(!a)return;let l="",d="";if(o){let[,e]=a;d=e}else{let[,e,t]=a;d=e,l=t||""}let u=i(d.trim());return{type:t,raw:a[0],content:l.trim(),attributes:u}}},renderMarkdown:e=>{let t="";n?t=n(e):e.content&&e.content.length>0&&(t=e.content.filter(e=>"text"===e.type).map(e=>e.text).join(""));let r=s((e=>{if(!l)return e;let t={};return l.forEach(r=>{r in e&&(t[r]=e[r])}),t})(e.attrs||{})),i=r?` ${r}`:"";return o?`[${d}${i}]`:`[${d}${i}]${t}[/${d}]`}}}function bb(e,t,r){var n,i,s,a;let o=e.split("\n"),l=[],d="",c=0,u=t.baseIndentSize||2;for(;c<o.length;){let e,p=o[c],h=p.match(t.itemPattern);if(!h)if(l.length>0)break;else{if(""!==p.trim())return;c+=1,d=`${d}${p}
`;continue}let m=t.extractItemData(h),{indentLevel:f,mainContent:g}=m;d=`${d}${p}
`;let y=[g];for(c+=1;c<o.length;){let e=o[c];if(""===e.trim()){let t=o.slice(c+1).findIndex(e=>""!==e.trim());if(-1===t)break;if(((null==(i=null==(n=o[c+1+t].match(/^(\s*)/))?void 0:n[1])?void 0:i.length)||0)>f){y.push(e),d=`${d}${e}
`,c+=1;continue}break}if(((null==(a=null==(s=e.match(/^(\s*)/))?void 0:s[1])?void 0:a.length)||0)>f)y.push(e),d=`${d}${e}
`,c+=1;else break}let x=y.slice(1);if(x.length>0){let n=x.map(e=>e.slice(f+u)).join("\n");n.trim()&&(e=t.customNestedParser?t.customNestedParser(n):r.blockTokens(n))}let b=t.createToken(m,e);l.push(b)}if(0!==l.length)return{items:l,raw:d}}function bv(e,t,r,n){if(!e||!Array.isArray(e.content))return"";let i="function"==typeof r?r(n):r,[s,...a]=e.content,o=t.renderChildren([s]),l=[`${i}${o}`];return a&&a.length>0&&a.forEach(e=>{let r=t.renderChildren([e]);if(r){let e=r.split("\n").map(e=>e?t.indent(e):"").join("\n");l.push(e)}}),l.join("\n")}g3({},{createAtomBlockMarkdownSpec:()=>bm,createBlockMarkdownSpec:()=>bf,createInlineMarkdownSpec:()=>bx,parseAttributes:()=>bp,parseIndentedBlocks:()=>bb,renderNestedMarkdownContent:()=>bv,serializeAttributes:()=>bh});var bk=class e extends xY{constructor(){super(...arguments),this.type="node"}static create(t={}){return new e("function"==typeof t?t():t)}configure(e){return super.configure(e)}extend(e){let t="function"==typeof e?e():e;return super.extend(t)}};function bw(e){return new xQ({find:e.find,handler:({state:t,range:r,match:n,pasteEvent:i})=>{let s=xr(e.getAttributes,void 0,n,i);if(!1===s||null===s)return null;let{tr:a}=t,o=n[n.length-1],l=n[0],d=r.to;if(o){let n=l.search(/\S/),i=r.from+l.indexOf(o),c=i+o.length;if(xg(r.from,r.to,t.doc).filter(t=>t.mark.type.excluded.find(r=>r===e.type&&r!==t.mark.type)).filter(e=>e.to>i).length)return null;c<r.to&&a.delete(c,r.to),i>r.from&&a.delete(r.from+n,i),d=r.from+n+o.length,a.addMark(r.from+n,d,e.type.create(s||{})),a.removeStoredMark(e.type)}}})}var bN=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,b$=bk.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",xs(this.options.HTMLAttributes,e)]},parseMarkdown:(e,t)=>t.createNode("image",{src:e.href,title:e.title,alt:e.text}),renderMarkdown:e=>{var t,r,n,i,s,a;let o=null!=(r=null==(t=e.attrs)?void 0:t.src)?r:"",l=null!=(i=null==(n=e.attrs)?void 0:n.alt)?i:"",d=null!=(a=null==(s=e.attrs)?void 0:s.title)?a:"";return d?`![${l}](${o} "${d}")`:`![${l}](${o})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||"undefined"==typeof document||!this.editor.isEditable)return null;let{directions:e,minWidth:t,minHeight:r,alwaysPreserveAspectRatio:n}=this.options.resize;return({node:i,getPos:s,HTMLAttributes:a})=>{let o=document.createElement("img");Object.entries(a).forEach(([e,t])=>{if(null!=t)switch(e){case"width":case"height":break;default:o.setAttribute(e,t)}}),o.src=a.src;let l=new bu({element:o,node:i,getPos:s,onResize:(e,t)=>{o.style.width=`${e}px`,o.style.height=`${t}px`},onCommit:(e,t)=>{let r=s();void 0!==r&&this.editor.chain().setNodeSelection(r).updateAttributes(this.name,{width:e,height:t}).run()},onUpdate:(e,t,r)=>e.type===i.type,options:{directions:e,min:{width:t,height:r},preserveAspectRatio:!0===n}}),d=l.dom;return d.style.visibility="hidden",d.style.pointerEvents="none",o.onload=()=>{d.style.visibility="",d.style.pointerEvents=""},l}},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[bl({find:bN,type:this.type,getAttributes:e=>{let[,,t,r,n]=e;return{src:r,alt:t,title:n}}})]}});let bS="numeric",bj="ascii",bT="alpha",b_="asciinumeric",bI="alphanumeric",bC="domain",bA="emoji",bO="whitespace";function bE(e,t,r){for(let n in t[bS]&&(t[b_]=!0,t[bI]=!0),t[bj]&&(t[b_]=!0,t[bT]=!0),t[b_]&&(t[bI]=!0),t[bT]&&(t[bI]=!0),t[bI]&&(t[bC]=!0),t[bA]&&(t[bC]=!0),t){let t=(n in r||(r[n]=[]),r[n]);0>t.indexOf(e)&&t.push(e)}}function bM(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}bM.groups={},bM.prototype={accepts(){return!!this.t},go(e){let t=this.j[e];if(t)return t;for(let t=0;t<this.jr.length;t++){let r=this.jr[t][0],n=this.jr[t][1];if(n&&r.test(e))return n}return this.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,r,n){for(let i=0;i<e.length;i++)this.tt(e[i],t,r,n)},tr(e,t,r,n){let i;return n=n||bM.groups,t&&t.j?i=t:(i=new bM(t),r&&n&&bE(t,r,n)),this.jr.push([e,i]),i},ts(e,t,r,n){let i=this,s=e.length;if(!s)return i;for(let t=0;t<s-1;t++)i=i.tt(e[t]);return i.tt(e[s-1],t,r,n)},tt(e,t,r,n){if(n=n||bM.groups,t&&t.j)return this.j[e]=t,t;let i,s=this.go(e);return s?(Object.assign((i=new bM).j,s.j),i.jr.push.apply(i.jr,s.jr),i.jd=s.jd,i.t=s.t):i=new bM,t&&(n&&(i.t&&"string"==typeof i.t?bE(t,Object.assign(function(e,t){let r={};for(let n in t)t[n].indexOf(e)>=0&&(r[n]=!0);return r}(i.t,n),r),n):r&&bE(t,r,n)),i.t=t),this.j[e]=i,i}};let bz=(e,t,r,n,i)=>e.ta(t,r,n,i),bP=(e,t,r,n,i)=>e.tr(t,r,n,i),bD=(e,t,r,n,i)=>e.ts(t,r,n,i),bR=(e,t,r,n,i)=>e.tt(t,r,n,i),bL="WORD",bU="UWORD",bF="ASCIINUMERICAL",bZ="ALPHANUMERICAL",bB="LOCALHOST",bV="UTLD",bH="SCHEME",bW="SLASH_SCHEME",bK="OPENBRACE",bq="CLOSEBRACE",bJ="OPENBRACKET",bG="CLOSEBRACKET",bY="OPENPAREN",bX="CLOSEPAREN",bQ="OPENANGLEBRACKET",b0="CLOSEANGLEBRACKET",b1="FULLWIDTHLEFTPAREN",b2="FULLWIDTHRIGHTPAREN",b4="LEFTCORNERBRACKET",b5="RIGHTCORNERBRACKET",b6="LEFTWHITECORNERBRACKET",b3="RIGHTWHITECORNERBRACKET",b9="FULLWIDTHLESSTHAN",b7="FULLWIDTHGREATERTHAN",b8="AMPERSAND",ve="APOSTROPHE",vt="ASTERISK",vr="BACKSLASH",vn="BACKTICK",vi="CARET",vs="COLON",va="COMMA",vo="DOLLAR",vl="EQUALS",vd="EXCLAMATION",vc="HYPHEN",vu="PERCENT",vp="PIPE",vh="PLUS",vm="POUND",vf="QUERY",vg="QUOTE",vy="FULLWIDTHMIDDLEDOT",vx="SEMI",vb="SLASH",vv="TILDE",vk="UNDERSCORE",vw="EMOJI";var vN=Object.freeze({__proto__:null,ALPHANUMERICAL:bZ,AMPERSAND:b8,APOSTROPHE:ve,ASCIINUMERICAL:bF,ASTERISK:vt,AT:"AT",BACKSLASH:vr,BACKTICK:vn,CARET:vi,CLOSEANGLEBRACKET:b0,CLOSEBRACE:bq,CLOSEBRACKET:bG,CLOSEPAREN:bX,COLON:vs,COMMA:va,DOLLAR:vo,DOT:"DOT",EMOJI:vw,EQUALS:vl,EXCLAMATION:vd,FULLWIDTHGREATERTHAN:b7,FULLWIDTHLEFTPAREN:b1,FULLWIDTHLESSTHAN:b9,FULLWIDTHMIDDLEDOT:vy,FULLWIDTHRIGHTPAREN:b2,HYPHEN:vc,LEFTCORNERBRACKET:b4,LEFTWHITECORNERBRACKET:b6,LOCALHOST:bB,NL:"NL",NUM:"NUM",OPENANGLEBRACKET:bQ,OPENBRACE:bK,OPENBRACKET:bJ,OPENPAREN:bY,PERCENT:vu,PIPE:vp,PLUS:vh,POUND:vm,QUERY:vf,QUOTE:vg,RIGHTCORNERBRACKET:b5,RIGHTWHITECORNERBRACKET:b3,SCHEME:bH,SEMI:vx,SLASH:vb,SLASH_SCHEME:bW,SYM:"SYM",TILDE:vv,TLD:"TLD",UNDERSCORE:vk,UTLD:bV,UWORD:bU,WORD:bL,WS:"WS"});let v$=/[a-z]/,vS=/\p{L}/u,vj=/\p{Emoji}/u,vT=/\d/,v_=/\s/,vI=null,vC=null;function vA(e,t){let r=function(e){let t=[],r=e.length,n=0;for(;n<r;){let i,s=e.charCodeAt(n),a=s<55296||s>56319||n+1===r||(i=e.charCodeAt(n+1))<56320||i>57343?e[n]:e.slice(n,n+2);t.push(a),n+=a.length}return t}(t.replace(/[A-Z]/g,e=>e.toLowerCase())),n=r.length,i=[],s=0,a=0;for(;a<n;){let o=e,l=null,d=0,c=null,u=-1,p=-1;for(;a<n&&(l=o.go(r[a]));)(o=l).accepts()?(u=0,p=0,c=o):u>=0&&(u+=r[a].length,p++),d+=r[a].length,s+=r[a].length,a++;s-=u,a-=p,d-=u,i.push({t:c.t,v:t.slice(s-d,s),s:s-d,e:s})}return i}function vO(e,t,r,n,i){let s,a=t.length;for(let r=0;r<a-1;r++){let a=t[r];e.j[a]?s=e.j[a]:((s=new bM(n)).jr=i.slice(),e.j[a]=s),e=s}return(s=new bM(r)).jr=i.slice(),e.j[t[a-1]]=s,s}function vE(e){let t=[],r=[],n=0;for(;n<e.length;){let i=0;for(;"0123456789".indexOf(e[n+i])>=0;)i++;if(i>0){t.push(r.join(""));for(let t=parseInt(e.substring(n,n+i),10);t>0;t--)r.pop();n+=i}else r.push(e[n]),n++}return t}let vM={defaultProtocol:"http",events:null,format:vP,formatHref:vP,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function vz(e,t=null){let r=Object.assign({},vM);e&&(r=Object.assign(r,e instanceof vz?e.o:e));let n=r.ignoreTags,i=[];for(let e=0;e<n.length;e++)i.push(n[e].toUpperCase());this.o=r,t&&(this.defaultRender=t),this.ignoreTags=i}function vP(e){return e}function vD(e,t){this.t="token",this.v=e,this.tk=t}function vR(e,t){class r extends vD{constructor(t,r){super(t,r),this.t=e}}for(let e in t)r.prototype[e]=t[e];return r.t=e,r}vz.prototype={o:vM,ignoreTags:[],defaultRender:e=>e,check(e){return this.get("validate",e.toString(),e)},get(e,t,r){let n=null!=t,i=this.o[e];return i&&("object"==typeof i?"function"==typeof(i=r.t in i?i[r.t]:vM[e])&&n&&(i=i(t,r)):"function"==typeof i&&n&&(i=i(t,r.t,r))),i},getObj(e,t,r){let n=this.o[e];return"function"==typeof n&&null!=t&&(n=n(t,r.t,r)),n},render(e){let t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}},vD.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){let t=this.toString(),r=e.get("truncate",t,this),n=e.get("format",t,this);return r&&n.length>r?n.substring(0,r)+"â€¦":n},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=vM.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){let t=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",t,this),n=e.get("tagName",t,this),i=this.toFormattedString(e),s={},a=e.get("className",t,this),o=e.get("target",t,this),l=e.get("rel",t,this),d=e.getObj("attributes",t,this),c=e.getObj("events",t,this);return s.href=r,a&&(s.class=a),o&&(s.target=o),l&&(s.rel=l),d&&Object.assign(s,d),{tagName:n,attributes:s,content:i,eventListeners:c}}};let vL=vR("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),vU=vR("text"),vF=vR("nl"),vZ=vR("url",{isLink:!0,toHref(e=vM.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){let e=this.tk;return e.length>=2&&e[0].t!==bB&&e[1].t===vs}}),vB=e=>new bM(e);function vV(e,t,r){let n=r[0].s,i=r[r.length-1].e;return new e(t.slice(n,i),r)}let vH="undefined"!=typeof console&&console&&console.warn||(()=>{}),vW={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function vK(e,t=!1){if(vW.initialized&&vH(`linkifyjs: already initialized - will not register custom scheme "${e}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);vW.customSchemes.push([e,t])}function vq(e){return vW.initialized||function(){vW.scanner=function(e=[]){let t={};bM.groups=t;let r=new bM;null==vI&&(vI=vE("aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mÃ¶gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==vC&&(vC=vE("ÎµÎ»1Ï…2Ð±Ð³1ÐµÐ»3Ð´ÐµÑ‚Ð¸4ÐµÑŽ2ÐºÐ°Ñ‚Ð¾Ð»Ð¸Ðº6Ð¾Ð¼3Ð¼ÐºÐ´2Ð¾Ð½1ÑÐºÐ²Ð°6Ð¾Ð½Ð»Ð°Ð¹Ð½5Ñ€Ð³3Ñ€ÑƒÑ2Ñ„2ÑÐ°Ð¹Ñ‚3Ñ€Ð±3ÑƒÐºÑ€3Ò›Ð°Ð·3Õ°Õ¡Õµ3×™×©×¨××œ5×§×•×3Ø§Ø¨ÙˆØ¸Ø¨ÙŠ5Ø±Ø§Ù…ÙƒÙˆ5Ù„Ø§Ø±Ø¯Ù†4Ø¨Ø­Ø±ÙŠÙ†5Ø¬Ø²Ø§Ø¦Ø±5Ø³Ø¹ÙˆØ¯ÙŠØ©6Ø¹Ù„ÙŠØ§Ù†5Ù…ØºØ±Ø¨5Ù…Ø§Ø±Ø§Øª5ÛŒØ±Ø§Ù†5Ø¨Ø§Ø±Øª2Ø²Ø§Ø±4ÙŠØªÙƒ3Ú¾Ø§Ø±Øª5ØªÙˆÙ†Ø³4Ø³ÙˆØ¯Ø§Ù†3Ø±ÙŠØ©5Ø´Ø¨ÙƒØ©4Ø¹Ø±Ø§Ù‚2Ø¨2Ù…Ø§Ù†4ÙÙ„Ø³Ø·ÙŠÙ†6Ù‚Ø·Ø±3ÙƒØ§Ø«ÙˆÙ„ÙŠÙƒ6ÙˆÙ…3Ù…ØµØ±2Ù„ÙŠØ³ÙŠØ§5ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§7Ù‚Ø¹4Ù‡Ù…Ø±Ø§Ù‡5Ù¾Ø§Ú©Ø³ØªØ§Ù†7Ú€Ø§Ø±Øª4à¤•à¥‰à¤®3à¤¨à¥‡à¤Ÿ3à¤­à¤¾à¤°à¤¤0à¤®à¥3à¥‹à¤¤5à¤¸à¤‚à¤—à¤ à¤¨5à¦¬à¦¾à¦‚à¦²à¦¾5à¦­à¦¾à¦°à¦¤2à§°à¦¤4à¨­à¨¾à¨°à¨¤4àª­àª¾àª°àª¤4à¬­à¬¾à¬°à¬¤4à®‡à®¨à¯à®¤à®¿à®¯à®¾6à®²à®™à¯à®•à¯ˆ6à®šà®¿à®™à¯à®•à®ªà¯à®ªà¯‚à®°à¯11à°­à°¾à°°à°¤à±5à²­à²¾à²°à²¤4à´­à´¾à´°à´¤à´‚5à¶½à¶‚à¶šà·4à¸„à¸­à¸¡3à¹„à¸—à¸¢3àº¥àº²àº§3áƒ’áƒ”2ã¿ã‚“ãª3ã‚¢ãƒžã‚¾ãƒ³4ã‚¯ãƒ©ã‚¦ãƒ‰4ã‚°ãƒ¼ã‚°ãƒ«4ã‚³ãƒ 2ã‚¹ãƒˆã‚¢3ã‚»ãƒ¼ãƒ«3ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³6ãƒã‚¤ãƒ³ãƒˆ4ä¸–ç•Œ2ä¸­ä¿¡1å›½1åœ‹1æ–‡ç½‘3äºšé©¬é€Š3ä¼ä¸š2ä½›å±±2ä¿¡æ¯2å¥åº·2å…«å¦2å…¬å¸1ç›Š2å°æ¹¾1ç£2å•†åŸŽ1åº—1æ ‡2å˜‰é‡Œ0å¤§é…’åº—5åœ¨çº¿2å¤§æ‹¿2å¤©ä¸»æ•™3å¨±ä¹2å®¶é›»2å¹¿ä¸œ2å¾®åš2æ…ˆå–„2æˆ‘çˆ±ä½ 3æ‰‹æœº2æ‹›è˜2æ”¿åŠ¡1åºœ2æ–°åŠ å¡2é—»2æ—¶å°š2æ›¸ç±2æœºæž„2æ·¡é©¬é”¡3æ¸¸æˆ2æ¾³é–€2ç‚¹çœ‹2ç§»åŠ¨2ç»„ç»‡æœºæž„4ç½‘å€1åº—1ç«™1ç»œ2è”é€š2è°·æ­Œ2è´­ç‰©2é€šè²©2é›†å›¢2é›»è¨Šç›ˆç§‘4é£žåˆ©æµ¦3é£Ÿå“2é¤åŽ…2é¦™æ ¼é‡Œæ‹‰3æ¸¯2ë‹·ë„·1ì»´2ì‚¼ì„±2í•œêµ­2")),bR(r,"'",ve),bR(r,"{",bK),bR(r,"}",bq),bR(r,"[",bJ),bR(r,"]",bG),bR(r,"(",bY),bR(r,")",bX),bR(r,"<",bQ),bR(r,">",b0),bR(r,"ï¼ˆ",b1),bR(r,"ï¼‰",b2),bR(r,"ã€Œ",b4),bR(r,"ã€",b5),bR(r,"ã€Ž",b6),bR(r,"ã€",b3),bR(r,"ï¼œ",b9),bR(r,"ï¼ž",b7),bR(r,"&",b8),bR(r,"*",vt),bR(r,"@","AT"),bR(r,"`",vn),bR(r,"^",vi),bR(r,":",vs),bR(r,",",va),bR(r,"$",vo),bR(r,".","DOT"),bR(r,"=",vl),bR(r,"!",vd),bR(r,"-",vc),bR(r,"%",vu),bR(r,"|",vp),bR(r,"+",vh),bR(r,"#",vm),bR(r,"?",vf),bR(r,'"',vg),bR(r,"/",vb),bR(r,";",vx),bR(r,"~",vv),bR(r,"_",vk),bR(r,"\\",vr),bR(r,"ãƒ»",vy);let n=bP(r,vT,"NUM",{[bS]:!0});bP(n,vT,n);let i=bP(n,v$,bF,{[b_]:!0}),s=bP(n,vS,bZ,{[bI]:!0}),a=bP(r,v$,bL,{[bj]:!0});bP(a,vT,i),bP(a,v$,a),bP(i,vT,i),bP(i,v$,i);let o=bP(r,vS,bU,{[bT]:!0});bP(o,v$),bP(o,vT,s),bP(o,vS,o),bP(s,vT,s),bP(s,v$),bP(s,vS,s);let l=bR(r,"\n","NL",{[bO]:!0}),d=bR(r,"\r","WS",{[bO]:!0}),c=bP(r,v_,"WS",{[bO]:!0});bR(r,"ï¿¼",c),bR(d,"\n",l),bR(d,"ï¿¼",c),bP(d,v_,c),bR(c,"\r"),bR(c,"\n"),bP(c,v_,c),bR(c,"ï¿¼",c);let u=bP(r,vj,vw,{[bA]:!0});bR(u,"#"),bP(u,vj,u),bR(u,"ï¸",u);let p=bR(u,"â€");bR(p,"#"),bP(p,vj,u);let h=[[v$,a],[vT,i]],m=[[v$,null],[vS,o],[vT,s]];for(let e=0;e<vI.length;e++)vO(r,vI[e],"TLD",bL,h);for(let e=0;e<vC.length;e++)vO(r,vC[e],bV,bU,m);bE("TLD",{tld:!0,ascii:!0},t),bE(bV,{utld:!0,alpha:!0},t),vO(r,"file",bH,bL,h),vO(r,"mailto",bH,bL,h),vO(r,"http",bW,bL,h),vO(r,"https",bW,bL,h),vO(r,"ftp",bW,bL,h),vO(r,"ftps",bW,bL,h),bE(bH,{scheme:!0,ascii:!0},t),bE(bW,{slashscheme:!0,ascii:!0},t),e=e.sort((e,t)=>e[0]>t[0]?1:-1);for(let t=0;t<e.length;t++){let n=e[t][0],i=e[t][1]?{scheme:!0}:{slashscheme:!0};n.indexOf("-")>=0?i[bC]=!0:v$.test(n)?vT.test(n)?i[b_]=!0:i[bj]=!0:i[bS]=!0,bD(r,n,n,i)}return bD(r,"localhost",bB,{ascii:!0}),r.jd=new bM("SYM"),{start:r,tokens:Object.assign({groups:t},vN)}}(vW.customSchemes);for(let e=0;e<vW.tokenQueue.length;e++)vW.tokenQueue[e][1]({scanner:vW.scanner});vW.parser=function({groups:e}){let t=e.domain.concat([b8,vt,"AT",vr,vn,vi,vo,vl,vc,"NUM",vu,vp,vh,vm,vb,"SYM",vv,vk]),r=[ve,vs,va,"DOT",vd,vu,vf,vg,vx,bQ,b0,bK,bq,bG,bJ,bY,bX,b1,b2,b4,b5,b6,b3,b9,b7],n=[b8,ve,vt,vr,vn,vi,vo,vl,vc,bK,bq,vu,vp,vh,vm,vf,vb,"SYM",vv,vk],i=vB(),s=bR(i,vv);bz(s,n,s),bz(s,e.domain,s);let a=vB(),o=vB(),l=vB();bz(i,e.domain,a),bz(i,e.scheme,o),bz(i,e.slashscheme,l),bz(a,n,s),bz(a,e.domain,a);let d=bR(a,"AT");bR(s,"AT",d),bR(o,"AT",d),bR(l,"AT",d);let c=bR(s,"DOT");bz(c,n,s),bz(c,e.domain,s);let u=vB();bz(d,e.domain,u),bz(u,e.domain,u);let p=bR(u,"DOT");bz(p,e.domain,u);let h=vB(vL);bz(p,e.tld,h),bz(p,e.utld,h),bR(d,bB,h);let m=bR(u,vc);bR(m,vc,m),bz(m,e.domain,u),bz(h,e.domain,u),bR(h,"DOT",p),bR(h,vc,m),bz(bR(h,vs),e.numeric,vL);let f=bR(a,vc),g=bR(a,"DOT");bR(f,vc,f),bz(f,e.domain,a),bz(g,n,s),bz(g,e.domain,a);let y=vB(vZ);bz(g,e.tld,y),bz(g,e.utld,y),bz(y,e.domain,a),bz(y,n,s),bR(y,"DOT",g),bR(y,vc,f),bR(y,"AT",d);let x=bR(y,vs),b=vB(vZ);bz(x,e.numeric,b);let v=vB(vZ),k=vB();bz(v,t,v),bz(v,r,k),bz(k,t,v),bz(k,r,k),bR(y,vb,v),bR(b,vb,v);let w=bR(o,vs),N=bR(l,vs),$=bR(N,vb),S=bR($,vb);bz(o,e.domain,a),bR(o,"DOT",g),bR(o,vc,f),bz(l,e.domain,a),bR(l,"DOT",g),bR(l,vc,f),bz(w,e.domain,v),bR(w,vb,v),bR(w,vf,v),bz(S,e.domain,v),bz(S,t,v),bR(S,vb,v);let j=[[bK,bq],[bJ,bG],[bY,bX],[bQ,b0],[b1,b2],[b4,b5],[b6,b3],[b9,b7]];for(let e=0;e<j.length;e++){let[n,i]=j[e],s=bR(v,n);bR(k,n,s),bR(s,i,v);let a=vB(vZ);bz(s,t,a);let o=vB();bz(s,r),bz(a,t,a),bz(a,r,o),bz(o,t,a),bz(o,r,o),bR(a,i,v),bR(o,i,v)}return bR(i,bB,y),bR(i,"NL",vF),{start:i,tokens:vN}}(vW.scanner.tokens);for(let e=0;e<vW.pluginQueue.length;e++)vW.pluginQueue[e][1]({scanner:vW.scanner,parser:vW.parser});vW.initialized=!0}(),function(e,t,r){let n=r.length,i=0,s=[],a=[];for(;i<n;){let o=e,l=null,d=null,c=0,u=null,p=-1;for(;i<n&&!(l=o.go(r[i].t));)a.push(r[i++]);for(;i<n&&(d=l||o.go(r[i].t));)l=null,(o=d).accepts()?(p=0,u=o):p>=0&&p++,i++,c++;if(p<0)(i-=c)<n&&(a.push(r[i]),i++);else{a.length>0&&(s.push(vV(vU,t,a)),a=[]),i-=p,c-=p;let e=u.t,n=r.slice(i-c,i);s.push(vV(e,t,n))}}return a.length>0&&s.push(vV(vU,t,a)),s}(vW.parser.start,e,vA(vW.scanner.start,e))}function vJ(e,t=null,r=null){if(t&&"object"==typeof t){if(r)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);r=t,t=null}let n=new vz(r),i=vq(e),s=[];for(let e=0;e<i.length;e++){let r=i[e];r.isLink&&(!t||r.t===t)&&n.check(r)&&s.push(r.toFormattedObject(n))}return s}vq.scan=vA;var vG="[\0- Â áš€á Žâ€€-\u2029âŸã€€]",vY=new RegExp(vG),vX=RegExp(`${vG}$`),vQ=RegExp(vG,"g");function v0(e,t){let r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(e=>{let t="string"==typeof e?e:e.scheme;t&&r.push(t)}),!e||e.replace(vQ,"").match(RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var v1=xX.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{"string"==typeof e?vK(e):vK(e.scheme,e.optionalSlashes)})},onDestroy(){bM.groups={},vW.scanner=null,vW.parser=null,vW.tokenQueue=[],vW.pluginQueue=[],vW.customSchemes=[],vW.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!v0(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}),addAttributes(){return{href:{default:null,parseHTML:e=>e.getAttribute("href")},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{let t=e.getAttribute("href");return!!t&&!!this.options.isAllowedUri(t,{defaultValidate:e=>!!v0(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:e=>!!v0(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",xs(this.options.HTMLAttributes,e),0]:["a",xs(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var r;let n=(null==(r=e.attrs)?void 0:r.href)||"",i=t.renderChildren(e);return`[${i}](${n})`},addCommands(){return{setLink:e=>({chain:t})=>{let{href:r}=e;return!!this.options.isAllowedUri(r,{defaultValidate:e=>!!v0(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&t().setMark(this.name,e).setMeta("preventAutolink",!0).run()},toggleLink:e=>({chain:t})=>{let{href:r}=e||{};return(!r||!!this.options.isAllowedUri(r,{defaultValidate:e=>!!v0(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[bw({find:e=>{let t=[];if(e){let{protocols:r,defaultProtocol:n}=this.options,i=vJ(e).filter(e=>e.isLink&&this.options.isAllowedUri(e.value,{defaultValidate:e=>!!v0(e,r),protocols:r,defaultProtocol:n}));i.length&&i.forEach(e=>{this.options.shouldAutoLink(e.value)&&t.push({text:e.value,data:{href:e.href},index:e.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:null==(t=e.data)?void 0:t.href}}})]},addProseMirrorPlugins(){var e,t,r;let n=[],{protocols:i,defaultProtocol:s}=this.options;return this.options.autolink&&n.push((e={type:this.type,defaultProtocol:this.options.defaultProtocol,validate:e=>this.options.isAllowedUri(e,{defaultValidate:e=>!!v0(e,i),protocols:i,defaultProtocol:s}),shouldAutoLink:this.options.shouldAutoLink},new hY({key:new h0("autolink"),appendTransaction:(t,r,n)=>{let i=t.some(e=>e.docChanged)&&!r.doc.eq(n.doc),s=t.some(e=>e.getMeta("preventAutolink"));if(!i||s)return;let{tr:a}=n;if(xf(y3(r.doc,[...t])).forEach(({newRange:t})=>{var r,i;let s,o,l,d=(r=n.doc,i=e=>e.isTextblock,l=[],r.nodesBetween(t.from,t.to,(e,t)=>{i(e)&&l.push({node:e,pos:t})}),l);if(d.length>1)s=d[0],o=n.doc.textBetween(s.pos,s.pos+s.node.nodeSize,void 0," ");else if(d.length){let e=n.doc.textBetween(t.from,t.to," "," ");if(!vX.test(e))return;s=d[0],o=n.doc.textBetween(s.pos,t.to,void 0," ")}if(s&&o){let t=o.split(vY).filter(Boolean);if(t.length<=0)return!1;let r=t[t.length-1],i=s.pos+o.lastIndexOf(r);if(!r)return!1;let l=vq(r).map(t=>t.toObject(e.defaultProtocol));if(!(1===l.length?l[0].isLink:3===l.length&&!!l[1].isLink&&["()","[]"].includes(l[0].value+l[2].value)))return!1;l.filter(e=>e.isLink).map(e=>({...e,from:i+e.start+1,to:i+e.end+1})).filter(e=>!n.schema.marks.code||!n.doc.rangeHasMark(e.from,e.to,n.schema.marks.code)).filter(t=>e.validate(t.value)).filter(t=>e.shouldAutoLink(t.value)).forEach(t=>{xg(t.from,t.to,n.doc).some(t=>t.mark.type===e.type)||a.addMark(t.from,t.to,e.type.create({href:t.href}))})}}),a.steps.length)return a}}))),!0===this.options.openOnClick&&n.push((t={type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection},new hY({key:new h0("handleClickLink"),props:{handleClick:(e,r,n)=>{var i,s;if(0!==n.button||!e.editable)return!1;let a=null;if(n.target instanceof HTMLAnchorElement)a=n.target;else{let e=n.target,t=[];for(;"DIV"!==e.nodeName;)t.push(e),e=e.parentNode;a=t.find(e=>"A"===e.nodeName)}if(!a)return!1;let o=xm(e.state,t.type.name),l=null!=(i=null==a?void 0:a.href)?i:o.href,d=null!=(s=null==a?void 0:a.target)?s:o.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),!!a&&!!l&&(window.open(l,d),!0)}}}))),this.options.linkOnPaste&&n.push((r={editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink},new hY({key:new h0("handlePasteLink"),props:{handlePaste:(e,t,n)=>{let{shouldAutoLink:i}=r,{state:s}=e,{selection:a}=s,{empty:o}=a;if(o)return!1;let l="";n.content.forEach(e=>{l+=e.textContent});let d=vJ(l,{defaultProtocol:r.defaultProtocol}).find(e=>e.isLink&&e.value===l);return!!l&&!!d&&(void 0===i||!!i(d.href))&&r.editor.commands.setMark(r.type,{href:d.href})}}}))),n}});class v2{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!=(r=t.width)?r:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let r=e=>{this[t](e)};return e.dom.addEventListener(t,r),{name:t,handler:r}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t,r=this.editorView.state.doc.resolve(this.cursorPos),n=!r.parent.inlineContent,i,s=this.editorView.dom,a=s.getBoundingClientRect(),o=a.width/s.offsetWidth,l=a.height/s.offsetHeight;if(n){let e=r.nodeBefore,t=r.nodeAfter;if(e||t){let r=this.editorView.nodeDOM(this.cursorPos-(e?e.nodeSize:0));if(r){let n=r.getBoundingClientRect(),s=e?n.bottom:n.top;e&&t&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let a=this.width/2*l;i={left:n.left,right:n.right,top:s-a,bottom:s+a}}}}if(!i){let e=this.editorView.coordsAtPos(this.cursorPos),t=this.width/2*o;i={left:e.left-t,right:e.left+t,top:e.top,bottom:e.bottom}}let d=this.editorView.dom.offsetParent;if(!this.element&&(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),d&&(d!=document.body||"static"!=getComputedStyle(d).position)){let r=d.getBoundingClientRect(),n=r.width/d.offsetWidth,i=r.height/d.offsetHeight;e=r.left-d.scrollLeft*n,t=r.top-d.scrollTop*i}else e=-pageXOffset,t=-pageYOffset;this.element.style.left=(i.left-e)/o+"px",this.element.style.top=(i.top-t)/l+"px",this.element.style.width=(i.right-i.left)/o+"px",this.element.style.height=(i.bottom-i.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),n=r&&r.type.spec.disableDropCursor,i="function"==typeof n?n(this.editorView,t,e):n;if(t&&!i){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=hb(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class v4 extends hE{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return v4.valid(r)?new v4(r):hE.near(r)}content(){return pf.empty}eq(e){return e instanceof v4&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for GapCursor.fromJSON");return new v4(e.resolve(t.pos))}getBookmark(){return new v5(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let r=e.index(t),n=e.node(t);if(0==r){if(n.type.spec.isolating)return!0;continue}for(let e=n.child(r-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||v6(e.type))return!0;if(e.inlineContent)return!1}}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let r=e.indexAfter(t),n=e.node(t);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let e=n.child(r);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||v6(e.type))return!0;if(e.inlineContent)return!1}}return!0}(e))return!1;let r=t.type.spec.allowGapCursor;if(null!=r)return r;let n=t.contentMatchAt(e.index()).defaultType;return n&&n.isTextblock}static findGapCursorFrom(e,t,r=!1){n:for(;;){if(!r&&v4.valid(e))return e;let n=e.pos,i=null;for(let r=e.depth;;r--){let s=e.node(r);if(t>0?e.indexAfter(r)<s.childCount:e.index(r)>0){i=s.child(t>0?e.indexAfter(r):e.index(r)-1);break}if(0==r)return null;n+=t;let a=e.doc.resolve(n);if(v4.valid(a))return a}for(;;){let s=t>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!hL.isSelectable(i)){e=e.doc.resolve(n+i.nodeSize*t),r=!1;continue n}break}i=s,n+=t;let a=e.doc.resolve(n);if(v4.valid(a))return a}return null}}}v4.prototype.visible=!1,v4.findFrom=v4.findGapCursorFrom,hE.jsonID("gapcursor",v4);class v5{constructor(e){this.pos=e}map(e){return new v5(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return v4.valid(t)?new v4(t):hE.near(t)}}function v6(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}let v3=g5({ArrowLeft:v9("horiz",-1),ArrowRight:v9("horiz",1),ArrowUp:v9("vert",-1),ArrowDown:v9("vert",1)});function v9(e,t){let r="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,n,i){let s=e.selection,a=t>0?s.$to:s.$from,o=s.empty;if(s instanceof hD){if(!i.endOfTextblock(r)||0==a.depth)return!1;o=!1,a=e.doc.resolve(t>0?a.after():a.before())}let l=v4.findGapCursorFrom(a,t,o);return!!l&&(n&&n(e.tr.setSelection(new v4(l))),!0)}}function v7(e,t,r){if(!e||!e.editable)return!1;let n=e.state.doc.resolve(t);if(!v4.valid(n))return!1;let i=e.posAtCoords({left:r.clientX,top:r.clientY});return!(i&&i.inside>-1&&hL.isSelectable(e.state.doc.nodeAt(i.inside)))&&(e.dispatch(e.state.tr.setSelection(new v4(n))),!0)}function v8(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof v4))return!1;let{$from:r}=e.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(e.state.schema.nodes.text);if(!n)return!1;let i=pd.empty;for(let e=n.length-1;e>=0;e--)i=pd.from(n[e].createAndFill(null,i));let s=e.state.tr.replace(r.pos,r.pos,new pf(i,0,0));return s.setSelection(hD.near(s.doc.resolve(r.pos+1))),e.dispatch(s),!1}function ke(e){if(!(e.selection instanceof v4))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",gv.create(e.doc,[gy.widget(e.selection.head,t,{key:"gapcursor"})])}var kt=function(){};kt.prototype.append=function(e){return e.length?(e=kt.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},kt.prototype.prepend=function(e){return e.length?kt.from(e).append(this):this},kt.prototype.appendInner=function(e){return new kn(this,e)},kt.prototype.slice=function(e,t){return(void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t)?kt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},kt.prototype.get=function(e){if(!(e<0)&&!(e>=this.length))return this.getInner(e)},kt.prototype.forEach=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)},kt.prototype.map=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=this.length);var n=[];return this.forEach(function(t,r){return n.push(e(t,r))},t,r),n},kt.from=function(e){return e instanceof kt?e:e&&e.length?new kr(e):kt.empty};var kr=function(e){function t(t){e.call(this),this.values=t}t.__proto__=e,t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,r){return 0==e&&r==this.length?this:new t(this.values.slice(e,r))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,r,n){for(var i=t;i<r;i++)if(!1===e(this.values[i],n+i))return!1},t.prototype.forEachInvertedInner=function(e,t,r,n){for(var i=t-1;i>=r;i--)if(!1===e(this.values[i],n+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(t.prototype,r),t}(kt);kt.empty=new kr([]);var kn=function(e){function t(t,r){e.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return t.__proto__=e,t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,r,n){var i=this.left.length;if(t<i&&!1===this.left.forEachInner(e,t,Math.min(r,i),n)||r>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,r)-i,n+i))return!1},t.prototype.forEachInvertedInner=function(e,t,r,n){var i=this.left.length;if(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(r,i)-i,n+i)||r<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),r,n))return!1},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var r=this.left.length;return t<=r?this.left.slice(e,t):e>=r?this.right.slice(e-r,t-r):this.left.slice(e,r).append(this.right.slice(0,t-r))},t.prototype.leafAppend=function(e){var r=this.right.leafAppend(e);if(r)return new t(this.left,r)},t.prototype.leafPrepend=function(e){var r=this.left.leafPrepend(e);if(r)return new t(r,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(kt);class ki{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){let r,n,i,s;if(0==this.eventCount)return null;let a=this.items.length;for(;;a--)if(this.items.get(a-1).selection){--a;break}t&&(n=(r=this.remapping(a,this.items.length)).maps.length);let o=e.tr,l=[],d=[];return this.items.forEach((e,t)=>{if(!e.step){r||(n=(r=this.remapping(a,t+1)).maps.length),n--,d.push(e);return}if(r){d.push(new ks(e.map));let t=e.step.map(r.slice(n)),i;t&&o.maybeStep(t).doc&&(i=o.mapping.maps[o.mapping.maps.length-1],l.push(new ks(i,void 0,void 0,l.length+d.length))),n--,i&&r.appendMap(i,n)}else o.maybeStep(e.step);if(e.selection)return i=r?e.selection.map(r.slice(n)):e.selection,s=new ki(this.items.slice(0,a).append(d.reverse().concat(l)),this.eventCount-1),!1},this.items.length,0),{remaining:s,transform:o,selection:i}}addTransform(e,t,r,n){var i,s;let a,o=[],l=this.eventCount,d=this.items,c=!n&&d.length?d.get(d.length-1):null;for(let r=0;r<e.steps.length;r++){let i=e.steps[r].invert(e.docs[r]),s=new ks(e.mapping.maps[r],i,t),a;(a=c&&c.merge(s))&&(s=a,r?o.pop():d=d.slice(0,d.length-1)),o.push(s),t&&(l++,t=void 0),n||(c=s)}let u=l-r.depth;return u>ko&&(i=d,s=u,i.forEach((e,t)=>{if(e.selection&&0==s--)return a=t,!1}),d=i.slice(a),l-=u),new ki(d.append(o),l)}remapping(e,t){let r=new p9;return this.items.forEach((t,n)=>{let i=null!=t.mirrorOffset&&n-t.mirrorOffset>=e?r.maps.length-t.mirrorOffset:void 0;r.appendMap(t.map,i)},e,t),r}addMaps(e){return 0==this.eventCount?this:new ki(this.items.append(e.map(e=>new ks(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],n=Math.max(0,this.items.length-t),i=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(e=>{e.selection&&a--},n);let o=t;this.items.forEach(t=>{let n=i.getMirror(--o);if(null==n)return;s=Math.min(s,n);let l=i.maps[n];if(t.step){let s=e.steps[n].invert(e.docs[n]),d=t.selection&&t.selection.map(i.slice(o+1,n));d&&a++,r.push(new ks(l,s,d))}else r.push(new ks(l))},n);let l=[];for(let e=t;e<s;e++)l.push(new ks(i.maps[e]));let d=new ki(this.items.slice(0,n).append(l).append(r),a);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(t=>{!t.step&&e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,n=[],i=0;return this.items.forEach((s,a)=>{if(a>=e)n.push(s),s.selection&&i++;else if(s.step){let e=s.step.map(t.slice(r)),a=e&&e.getMap();if(r--,a&&t.appendMap(a,r),e){let o=s.selection&&s.selection.map(t.slice(r));o&&i++;let l=new ks(a.invert(),e,o),d,c=n.length-1;(d=n.length&&n[c].merge(l))?n[c]=d:n.push(l)}}else s.map&&r--},this.items.length,0),new ki(kt.from(n.reverse()),i)}}ki.empty=new ki(kt.empty,0);class ks{constructor(e,t,r,n){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=n}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new ks(t.getMap().invert(),t,this.selection)}}}class ka{constructor(e,t,r,n,i){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=n,this.prevComposition=i}}let ko=20;function kl(e){let t=[];for(let r=e.length-1;r>=0&&0==t.length;r--)e[r].forEach((e,r,n,i)=>t.push(n,i));return t}function kd(e,t){if(!e)return null;let r=[];for(let n=0;n<e.length;n+=2){let i=t.map(e[n],1),s=t.map(e[n+1],-1);i<=s&&r.push(i,s)}return r}let kc=!1,ku=null;function kp(e){let t=e.plugins;if(ku!=t){kc=!1,ku=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){kc=!0;break}}return kc}let kh=new h0("history"),km=new h0("closeHistory");function kf(e,t){return(r,n)=>{let i=kh.getState(r);if(!i||0==(e?i.undone:i.done).eventCount)return!1;if(n){let s=function(e,t,r){let n=kp(t),i=kh.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,n);if(!s)return null;let a=s.selection.resolve(s.transform.doc),o=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,n),l=new ka(r?o:s.remaining,r?s.remaining:o,null,0,-1);return s.transform.setSelection(a).setMeta(kh,{redo:r,historyState:l})}(i,r,e);s&&n(t?s.scrollIntoView():s)}return!0}}let kg=kf(!1,!0),ky=kf(!0,!0);kf(!1,!1),kf(!0,!1),x2.create({name:"characterCount",addOptions:()=>({limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(e=>""!==e).length}),addStorage:()=>({characters:()=>0,words:()=>0}),onBeforeCreate(){this.storage.characters=e=>{let t=(null==e?void 0:e.node)||this.editor.state.doc;if("textSize"===((null==e?void 0:e.mode)||this.options.mode)){let e=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(e)}return t.nodeSize},this.storage.words=e=>{let t=(null==e?void 0:e.node)||this.editor.state.doc,r=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let e=!1;return[new hY({key:new h0("characterCount"),appendTransaction:(t,r,n)=>{if(e)return;let i=this.options.limit;if(null==i||0===i){e=!0;return}let s=this.storage.characters({node:n.doc});if(s>i){console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);let t=n.tr.deleteRange(0,s-i);return e=!0,t}e=!0},filterTransaction:(e,t)=>{let r=this.options.limit;if(!e.docChanged||0===r||null==r)return!0;let n=this.storage.characters({node:t.doc}),i=this.storage.characters({node:e.doc});if(i<=r||n>r&&i>r&&i<=n)return!0;if(n>r&&i>r&&i>n||!e.getMeta("paste"))return!1;let s=e.selection.$head.pos;return e.deleteRange(s-(i-r),s),!(this.storage.characters({node:e.doc})>r)}})]}});var kx=x2.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[function(e={}){return new hY({view:t=>new v2(t,e)})}(this.options)]}});x2.create({name:"focus",addOptions:()=>({className:"has-focus",mode:"all"}),addProseMirrorPlugins(){return[new hY({key:new h0("focus"),props:{decorations:({doc:e,selection:t})=>{let{isEditable:r,isFocused:n}=this.editor,{anchor:i}=t,s=[];if(!r||!n)return gv.create(e,[]);let a=0;"deepest"===this.options.mode&&e.descendants((e,t)=>{if(!e.isText){if(!(i>=t&&i<=t+e.nodeSize-1))return!1;a+=1}});let o=0;return e.descendants((e,t)=>!e.isText&&!!(i>=t&&i<=t+e.nodeSize-1)&&((o+=1,"deepest"===this.options.mode&&a-o>0||"shallowest"===this.options.mode&&o>1)?"deepest"===this.options.mode:void s.push(gy.node(t,t+e.nodeSize,{class:this.options.className})))),gv.create(e,s)}}})]}});var kb=x2.create({name:"gapCursor",addProseMirrorPlugins:()=>[new hY({props:{decorations:ke,createSelectionBetween:(e,t,r)=>t.pos==r.pos&&v4.valid(r)?new v4(r):null,handleClick:v7,handleKeyDown:v3,handleDOMEvents:{beforeinput:v8}}})],extendNodeSchema(e){var t;let r={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:null!=(t=xr(y7(e,"allowGapCursor",r)))?t:null}}}),kv=x2.create({name:"placeholder",addOptions:()=>({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something â€¦",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}),addProseMirrorPlugins(){return[new hY({key:new h0("placeholder"),props:{decorations:({doc:e,selection:t})=>{let r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=t,i=[];if(!r)return null;let s=this.editor.isEmpty;return e.descendants((e,t)=>{let r=n>=t&&n<=t+e.nodeSize,a=!e.isLeaf&&xw(e);if((r||!this.options.showOnlyCurrent)&&a){let n=[this.options.emptyNodeClass];s&&n.push(this.options.emptyEditorClass);let a=gy.node(t,t+e.nodeSize,{class:n.join(" "),"data-placeholder":"function"==typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:e,pos:t,hasAnchor:r}):this.options.placeholder});i.push(a)}return this.options.includeChildren}),gv.create(e,i)}}})]}});function kk({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(null==t?void 0:t.type)===e}x2.create({name:"selection",addOptions:()=>({className:"selection"}),addProseMirrorPlugins(){let{editor:e,options:t}=this;return[new hY({key:new h0("selection"),props:{decorations:r=>r.selection.empty||e.isFocused||!e.isEditable||xN(r.selection)||e.view.dragging?null:gv.create(r.doc,[gy.inline(r.selection.from,r.selection.to,{class:t.className})])}})]}});var kw=x2.create({name:"trailingNode",addOptions:()=>({node:void 0,notAfter:[]}),addProseMirrorPlugins(){var e;let t=new h0(this.name),r=(null==(e=this.editor.schema.topNodeType.contentMatch.defaultType)?void 0:e.name)||this.options.node||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,e])=>e).filter(e=>(this.options.notAfter||[]).concat(r).includes(e.name));return[new hY({key:t,appendTransaction:(e,n,i)=>{let{doc:s,tr:a,schema:o}=i,l=t.getState(i),d=s.content.size,c=o.nodes[r];if(l)return a.insert(d,c.create())},state:{init:(e,t)=>!kk({node:t.tr.doc.lastChild,types:n}),apply:(e,t)=>!e.docChanged||e.getMeta("__uniqueIDTransaction")?t:!kk({node:e.doc.lastChild,types:n})}})]}}),kN=x2.create({name:"undoRedo",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:e,dispatch:t})=>kg(e,t),redo:()=>({state:e,dispatch:t})=>ky(e,t)}),addProseMirrorPlugins(){return[function(e={}){return new hY({key:kh,state:{init:()=>new ka(ki.empty,ki.empty,null,0,-1),apply:(t,r,n)=>(function(e,t,r,n){let i=r.getMeta(kh),s;if(i)return i.historyState;r.getMeta(km)&&(e=new ka(e.done,e.undone,null,0,-1));let a=r.getMeta("appendedTransaction");if(0==r.steps.length)return e;if(a&&a.getMeta(kh))if(a.getMeta(kh).redo)return new ka(e.done.addTransform(r,void 0,n,kp(t)),e.undone,kl(r.mapping.maps),e.prevTime,e.prevComposition);else return new ka(e.done,e.undone.addTransform(r,void 0,n,kp(t)),null,e.prevTime,e.prevComposition);if(!1===r.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))if(s=r.getMeta("rebased"))return new ka(e.done.rebased(r,s),e.undone.rebased(r,s),kd(e.prevRanges,r.mapping),e.prevTime,e.prevComposition);else return new ka(e.done.addMaps(r.mapping.maps),e.undone.addMaps(r.mapping.maps),kd(e.prevRanges,r.mapping),e.prevTime,e.prevComposition);{let i=r.getMeta("composition"),s=0==e.prevTime||!a&&e.prevComposition!=i&&(e.prevTime<(r.time||0)-n.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let r=!1;return e.mapping.maps[0].forEach((e,n)=>{for(let i=0;i<t.length;i+=2)e<=t[i+1]&&n>=t[i]&&(r=!0)}),r}(r,e.prevRanges)),o=a?kd(e.prevRanges,r.mapping):kl(r.mapping.maps);return new ka(e.done.addTransform(r,s?t.selection.getBookmark():void 0,n,kp(t)),ki.empty,o,r.time,null==i?e.prevComposition:i)}})(r,n,t,e)},config:e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,n="historyUndo"==r?kg:"historyRedo"==r?ky:null;return!!n&&!!e.editable&&(t.preventDefault(),n(e.state,e.dispatch))}}}})}(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-Ñ":()=>this.editor.commands.undo(),"Shift-Mod-Ñ":()=>this.editor.commands.redo()}}}),k$=x2.create({name:"textAlign",addOptions:()=>({types:[],alignments:["left","center","right","justify"],defaultAlignment:null}),addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{let t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>!!this.options.alignments.includes(e)&&this.options.types.map(r=>t.updateAttributes(r,{textAlign:e})).some(e=>e),unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).some(e=>e),toggleTextAlign:e=>({editor:t,commands:r})=>!!this.options.alignments.includes(e)&&(t.isActive({textAlign:e})?r.unsetTextAlign():r.setTextAlign(e))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),kS=(e,t)=>{if("slot"===e)return 0;if(e instanceof Function)return e(t);let{children:r,...n}=null!=t?t:{};if("svg"===e)throw Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,n,r]},kj=/^\s*>\s$/,kT=bk.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:e}){return kS("blockquote",{...xs(this.options.HTMLAttributes,e),children:kS("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";let r=[];return e.content.forEach(e=>{let n=t.renderChildren([e]).split("\n").map(e=>""===e.trim()?">":`> ${e}`);r.push(n.join("\n"))}),r.join(`
>
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[bc({find:kj,type:this.type})]}}),k_=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,kI=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,kC=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,kA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,kO=xX.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return kS("strong",{...xs(this.options.HTMLAttributes,e),children:kS("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[bo({find:k_,type:this.type}),bo({find:kC,type:this.type})]},addPasteRules(){return[bw({find:kI,type:this.type}),bw({find:kA,type:this.type})]}}),kE=/(^|[^`])`([^`]+)`(?!`)$/,kM=/(^|[^`])`([^`]+)`(?!`)/g,kz=xX.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:e}){return["code",xs(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[bo({find:kE,type:this.type})]},addPasteRules(){return[bw({find:kM,type:this.type})]}}),kP=/^```([a-z]+)?[\s\n]$/,kD=/^~~~([a-z]+)?[\s\n]$/,kR=bk.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;let{languageClassPrefix:r}=this.options;if(!r)return null;let n=[...(null==(t=e.firstElementChild)?void 0:t.classList)||[]].filter(e=>e.startsWith(r)).map(e=>e.replace(r,""))[0];return n||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:e,HTMLAttributes:t}){return["pre",xs(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var r;return(null==(r=e.raw)?void 0:r.startsWith("```"))===!1&&"indented"!==e.codeBlockStyle?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var r;let n=(null==(r=e.attrs)?void 0:r.language)||"";return e.content?[`\`\`\`${n}`,t.renderChildren(e.content),"```"].join("\n"):`\`\`\`${n}

\`\`\``},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:e,$anchor:t}=this.editor.state.selection,r=1===t.pos;return!!e&&t.parent.type.name===this.name&&(!!r||!t.parent.textContent.length)&&this.editor.commands.clearNodes()},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;let r=null!=(t=this.options.tabSize)?t:4,{state:n}=e,{selection:i}=n,{$from:s,empty:a}=i;if(s.parent.type!==this.type)return!1;let o=" ".repeat(r);return a?e.commands.insertContent(o):e.commands.command(({tr:e})=>{let{from:t,to:r}=i,s=n.doc.textBetween(t,r,"\n","\n").split("\n").map(e=>o+e).join("\n");return e.replaceWith(t,r,n.schema.text(s)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;let r=null!=(t=this.options.tabSize)?t:4,{state:n}=e,{selection:i}=n,{$from:s,empty:a}=i;return s.parent.type===this.type&&(a?e.commands.command(({tr:e})=>{var t;let{pos:i}=s,a=s.start(),o=s.end(),l=n.doc.textBetween(a,o,"\n","\n").split("\n"),d=0,c=0,u=i-a;for(let e=0;e<l.length;e+=1){if(c+l[e].length>=u){d=e;break}c+=l[e].length+1}let p=Math.min(((null==(t=l[d].match(/^ */))?void 0:t[0])||"").length,r);if(0===p)return!0;let h=a;for(let e=0;e<d;e+=1)h+=l[e].length+1;return e.delete(h,h+p),i-h<=p&&e.setSelection(hD.create(e.doc,h)),!0}):e.commands.command(({tr:e})=>{let{from:t,to:s}=i,a=n.doc.textBetween(t,s,"\n","\n").split("\n").map(e=>{var t;let n=Math.min(((null==(t=e.match(/^ */))?void 0:t[0])||"").length,r);return e.slice(n)}).join("\n");return e.replaceWith(t,s,n.schema.text(a)),!0}))},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;let{state:t}=e,{selection:r}=t,{$from:n,empty:i}=r;if(!i||n.parent.type!==this.type)return!1;let s=n.parentOffset===n.parent.nodeSize-2,a=n.parent.textContent.endsWith("\n\n");return!!s&&!!a&&e.chain().command(({tr:e})=>(e.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;let{state:t}=e,{selection:r,doc:n}=t,{$from:i,empty:s}=r;if(!s||i.parent.type!==this.type||i.parentOffset!==i.parent.nodeSize-2)return!1;let a=i.after();return void 0!==a&&(n.nodeAt(a)?e.commands.command(({tr:e})=>(e.setSelection(hE.near(n.resolve(a))),!0)):e.commands.exitCode())}}},addInputRules(){return[bd({find:kP,type:this.type,getAttributes:e=>({language:e[1]})}),bd({find:kD,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new hY({key:new h0("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;let r=t.clipboardData.getData("text/plain"),n=t.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,s=null==i?void 0:i.mode;if(!r||!s)return!1;let{tr:a,schema:o}=e.state,l=o.text(r.replace(/\r\n?/g,"\n"));return a.replaceSelectionWith(this.type.create({language:s},l)),a.selection.$from.parent.type!==this.type&&a.setSelection(hD.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),e.dispatch(a),!0}}})]}}),kL=bk.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,"\n\n"):""}),kU=bk.create({name:"hardBreak",markdownTokenName:"br",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",xs(this.options.HTMLAttributes,e)]},renderText:()=>"\n",renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:r,editor:n})=>e.first([()=>e.exitCode(),()=>e.command(()=>{let{selection:e,storedMarks:i}=r;if(e.$from.parent.type.spec.isolating)return!1;let{keepMarks:s}=this.options,{splittableMarks:a}=n.extensionManager,o=i||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command(({tr:e,dispatch:t})=>{if(t&&o&&s){let t=o.filter(e=>a.includes(e.type.name));e.ensureMarks(t)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),kF=bk.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){let r=this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0];return[`h${r}`,xs(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var r;let n=(null==(r=e.attrs)?void 0:r.level)?parseInt(e.attrs.level,10):1,i="#".repeat(n);return e.content?`${i} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode(this.name,e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,...{[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}}),{})},addInputRules(){return this.options.levels.map(e=>bd({find:RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),kZ=bk.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{},nextNodeType:"paragraph"}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:e}){return["hr",xs(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!function(e,t){let{selection:r}=e,{$from:n}=r;if(r instanceof hL){let e=n.index();return n.parent.canReplaceWith(e,e+1,t)}let i=n.depth;for(;i>=0;){let e=n.index(i);if(n.node(i).contentMatchAt(e).matchType(t))return!0;i-=1}return!1}(t,t.schema.nodes[this.name]))return!1;let{selection:r}=t,{$to:n}=r,i=e();return xN(r)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:e,tr:t,dispatch:r})=>{if(r){let{$to:r}=t.selection,n=r.end();if(r.nodeAfter)r.nodeAfter.isTextblock?t.setSelection(hD.create(t.doc,r.pos+1)):r.nodeAfter.isBlock?t.setSelection(hL.create(t.doc,r.pos)):t.setSelection(hD.create(t.doc,r.pos));else{let i=e.schema.nodes[this.options.nextNodeType]||r.parent.type.contentMatch.defaultType,s=null==i?void 0:i.create();s&&(t.insert(n,s),t.setSelection(hD.create(t.doc,n+1)))}t.scrollIntoView()}return!0}).run()}}},addInputRules(){return[bl({find:/^(?:---|â€”-|___\s|\*\*\*\s)$/,type:this.type})]}}),kB=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,kV=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,kH=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,kW=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,kK=xX.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",xs(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[bo({find:kB,type:this.type}),bo({find:kH,type:this.type})]},addPasteRules(){return[bw({find:kV,type:this.type}),bw({find:kW,type:this.type})]}}),kq=Object.defineProperty,kJ="textStyle",kG=/^\s*([-+*])\s$/,kY=bk.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:e}){return["ul",xs(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>"list"!==e.type||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,"\n"):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(kJ)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=bc({find:kG,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=bc({find:kG,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(kJ),editor:this.editor})),[e]}}),kX=bk.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",xs(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if("list_item"!==e.type)return[];let r=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(e=>"paragraph"===e.type))r=t.parseChildren(e.tokens);else{let n=e.tokens[0];if(n&&"text"===n.type&&n.tokens&&n.tokens.length>0){if(r=[{type:"paragraph",content:t.parseInline(n.tokens)}],e.tokens.length>1){let n=e.tokens.slice(1),i=t.parseChildren(n);r.push(...i)}}else r=t.parseChildren(e.tokens)}return 0===r.length&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(e,t,r)=>bv(e,t,e=>"bulletList"===e.parentType?"- ":"orderedList"===e.parentType?`${e.index+1}. `:"- ",r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),kQ={},k0={findListItemPos:()=>k2,getNextListDepth:()=>k4,handleBackspace:()=>k9,handleDelete:()=>we,hasListBefore:()=>k5,hasListItemAfter:()=>wt,hasListItemBefore:()=>k6,listItemHasSubList:()=>k3,nextListIsDeeper:()=>k7,nextListIsHigher:()=>k8};for(var k1 in k0)kq(kQ,k1,{get:k0[k1],enumerable:!0});var k2=(e,t)=>{let{$from:r}=t.selection,n=yo(e,t.schema),i=r.depth,s=r.pos,a=null;for(;i>0&&null===a;)r.node(i).type===n?a=i:(i-=1,s-=1);return null===a?null:{$pos:t.doc.resolve(s),depth:a}},k4=(e,t)=>{let r=k2(e,t);if(!r)return!1;let[,n]=((e,t,r,n=20)=>{let i=e.doc.resolve(r),s=n,a=null;for(;s>0&&null===a;){let e=i.node(s);(null==e?void 0:e.type.name)===t?a=e:s-=1}return[a,s]})(t,e,r.$pos.pos+4);return n},k5=(e,t,r)=>{let{$anchor:n}=e.selection,i=Math.max(0,n.pos-2),s=e.doc.resolve(i).node();return!!s&&!!r.includes(s.type.name)},k6=(e,t)=>{var r;let{$anchor:n}=t.selection,i=t.doc.resolve(n.pos-2);return 0!==i.index()&&(null==(r=i.nodeBefore)?void 0:r.type.name)===e},k3=(e,t,r)=>{if(!r)return!1;let n=yo(e,t.schema),i=!1;return r.descendants(e=>{e.type===n&&(i=!0)}),i},k9=(e,t,r)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!yZ(e.state,t)&&k5(e.state,t,r)){let{$anchor:r}=e.state.selection,n=e.state.doc.resolve(r.before()-1),i=[];n.node().descendants((e,r)=>{e.type.name===t&&i.push({node:e,pos:r})});let s=i.at(-1);if(!s)return!1;let a=e.state.doc.resolve(n.start()+s.pos+1);return e.chain().cut({from:r.start()-1,to:r.end()+1},a.end()).joinForward().run()}if(!yZ(e.state,t)||!(e=>{let{$from:t,$to:r}=e.selection;return!(t.parentOffset>0)&&t.pos===r.pos})(e.state))return!1;let n=k2(t,e.state);if(!n)return!1;let i=e.state.doc.resolve(n.$pos.pos-2).node(n.depth),s=k3(t,e.state,i);return k6(t,e.state)&&!s?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},k7=(e,t)=>{let r=k4(e,t),n=k2(e,t);return!!n&&!!r&&r>n.depth},k8=(e,t)=>{let r=k4(e,t),n=k2(e,t);return!!n&&!!r&&r<n.depth},we=(e,t)=>{if(!yZ(e.state,t)||!((e,t)=>{let{$from:r,$to:n,$anchor:i}=e.selection;if(t){let r=y9(e=>e.type.name===t)(e.selection);if(!r)return!1;let n=e.doc.resolve(r.pos+1);return i.pos+1===n.end()}return!(n.parentOffset<n.parent.nodeSize-2)&&r.pos===n.pos})(e.state,t))return!1;let{selection:r}=e.state,{$from:n,$to:i}=r;return!(!r.empty&&n.sameParent(i))&&(k7(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():k8(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward())},wt=(e,t)=>{var r;let{$anchor:n}=t.selection,i=t.doc.resolve(n.pos-n.parentOffset-2);return i.index()!==i.parent.childCount-1&&(null==(r=i.nodeAfter)?void 0:r.type.name)===e},wr=x2.create({name:"listKeymap",addOptions:()=>({listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}),addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r})=>{void 0!==e.state.schema.nodes[r]&&we(e,r)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r})=>{void 0!==e.state.schema.nodes[r]&&we(e,r)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{void 0!==e.state.schema.nodes[r]&&k9(e,r,n)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{void 0!==e.state.schema.nodes[r]&&k9(e,r,n)&&(t=!0)}),t}}}}),wn=/^(\s*)(\d+)\.\s+(.*)$/,wi=/^\s/,ws="textStyle",wa=/^(\d+)\.\s$/,wo=bk.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:e}){let{start:t,...r}=e;return 1===t?["ol",xs(this.options.HTMLAttributes,r),0]:["ol",xs(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{var r;if("list"!==e.type||!e.ordered)return[];let n=e.start||1,i=e.items?(r=e.items,r.map(e=>{if("list_item"!==e.type)return t.parseChildren([e])[0];let r=[];return e.tokens&&e.tokens.length>0&&e.tokens.forEach(e=>{if("paragraph"===e.type||"list"===e.type||"blockquote"===e.type||"code"===e.type)r.push(...t.parseChildren([e]));else if("text"===e.type&&e.tokens){let n=t.parseChildren([e]);r.push({type:"paragraph",content:n})}else{let n=t.parseChildren([e]);n.length>0&&r.push(...n)}}),{type:"listItem",content:r}})):[];return 1!==n?{type:"orderedList",attrs:{start:n},content:i}:{type:"orderedList",content:i}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,"\n"):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{let t=e.match(/^(\s*)(\d+)\.\s+/),r=null==t?void 0:t.index;return void 0!==r?r:-1},tokenize:(e,t,r)=>{var n;let i=e.split("\n"),[s,a]=function(e){let t=[],r=0,n=0;for(;r<e.length;){let i=e[r],s=i.match(wn);if(!s)break;let[,a,o,l]=s,d=a.length,c=l,u=r+1,p=[i];for(;u<e.length;){let t=e[u];if(t.match(wn))break;if(""===t.trim())p.push(t),c+="\n",u+=1;else if(t.match(wi))p.push(t),c+=`
${t.slice(d+2)}`,u+=1;else break}t.push({indent:d,number:parseInt(o,10),content:c.trim(),raw:p.join("\n")}),n=u,r=u}return[t,n]}(i);if(0===s.length)return;let o=function e(t,r,n){var i;let s=[],a=0;for(;a<t.length;){let o=t[a];if(o.indent===r){let l=o.content.split("\n"),d=(null==(i=l[0])?void 0:i.trim())||"",c=[];d&&c.push({type:"paragraph",raw:d,tokens:n.inlineTokens(d)});let u=l.slice(1).join("\n").trim();if(u){let e=n.blockTokens(u);c.push(...e)}let p=a+1,h=[];for(;p<t.length&&t[p].indent>r;)h.push(t[p]),p+=1;if(h.length>0){let t=Math.min(...h.map(e=>e.indent)),r=e(h,t,n);c.push({type:"list",ordered:!0,start:h[0].number,items:r,raw:h.map(e=>e.raw).join("\n")})}s.push({type:"list_item",raw:o.raw,tokens:c}),a=p}else a+=1}return s}(s,0,r);if(0!==o.length)return{type:"list",ordered:!0,start:(null==(n=s[0])?void 0:n.number)||1,items:o,raw:i.slice(0,a).join("\n")}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(ws)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=bc({find:wa,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=bc({find:wa,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(ws)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[e]}}),wl=/^\s*(\[([( |x])?\])\s$/,wd=bk.create({name:"taskItem",addOptions:()=>({nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}),content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes:()=>({checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{let t=e.getAttribute("data-checked");return""===t||"true"===t},renderHTML:e=>({"data-checked":e.checked})}}),parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",xs(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{let r=[];if(e.tokens&&e.tokens.length>0?r.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?r.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):r.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){let n=t.parseChildren(e.nestedTokens);r.push(...n)}return t.createNode("taskItem",{checked:e.checked||!1},r)},renderMarkdown:(e,t)=>{var r;let n=(null==(r=e.attrs)?void 0:r.checked)?"x":" ";return bv(e,t,`- [${n}] `)},addKeyboardShortcuts(){let e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:r,editor:n})=>{let i=document.createElement("li"),s=document.createElement("label"),a=document.createElement("span"),o=document.createElement("input"),l=document.createElement("div"),d=e=>{var t,r;o.ariaLabel=(null==(r=null==(t=this.options.a11y)?void 0:t.checkboxLabel)?void 0:r.call(t,e,o.checked))||`Task item checkbox for ${e.textContent||"empty task item"}`};return d(e),s.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",e=>e.preventDefault()),o.addEventListener("change",t=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){o.checked=!o.checked;return}let{checked:i}=t.target;n.isEditable&&"function"==typeof r&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:e})=>{let t=r();if("number"!=typeof t)return!1;let n=e.doc.nodeAt(t);return e.setNodeMarkup(t,void 0,{...null==n?void 0:n.attrs,checked:i}),!0}).run(),n.isEditable||!this.options.onReadOnlyChecked||this.options.onReadOnlyChecked(e,i)||(o.checked=!o.checked)}),Object.entries(this.options.HTMLAttributes).forEach(([e,t])=>{i.setAttribute(e,t)}),i.dataset.checked=e.attrs.checked,o.checked=e.attrs.checked,s.append(o,a),i.append(s,l),Object.entries(t).forEach(([e,t])=>{i.setAttribute(e,t)}),{dom:i,contentDOM:l,update:e=>e.type===this.type&&(i.dataset.checked=e.attrs.checked,o.checked=e.attrs.checked,d(e),!0)}}},addInputRules(){return[bc({find:wl,type:this.type,getAttributes:e=>({checked:"x"===e[e.length-1]})})]}}),wc=bk.create({name:"taskList",addOptions:()=>({itemTypeName:"taskItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",xs(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,"\n"):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;let r=null==(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))?void 0:t.index;return void 0!==r?r:-1},tokenize(e,t,r){let n=e=>{let t=bb(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:e=>({indentLevel:e[1].length,mainContent:e[4],checked:"x"===e[3].toLowerCase()}),createToken:(e,t)=>({type:"taskItem",raw:"",mainContent:e.mainContent,indentLevel:e.indentLevel,checked:e.checked,text:e.mainContent,tokens:r.inlineTokens(e.mainContent),nestedTokens:t}),customNestedParser:n},r);return t?[{type:"taskList",raw:t.raw,items:t.items}]:r.blockTokens(e)},i=bb(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:e=>({indentLevel:e[1].length,mainContent:e[4],checked:"x"===e[3].toLowerCase()}),createToken:(e,t)=>({type:"taskItem",raw:"",mainContent:e.mainContent,indentLevel:e.indentLevel,checked:e.checked,text:e.mainContent,tokens:r.inlineTokens(e.mainContent),nestedTokens:t}),customNestedParser:n},r);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});x2.create({name:"listKit",addExtensions(){let e=[];return!1!==this.options.bulletList&&e.push(kY.configure(this.options.bulletList)),!1!==this.options.listItem&&e.push(kX.configure(this.options.listItem)),!1!==this.options.listKeymap&&e.push(wr.configure(this.options.listKeymap)),!1!==this.options.orderedList&&e.push(wo.configure(this.options.orderedList)),!1!==this.options.taskItem&&e.push(wd.configure(this.options.taskItem)),!1!==this.options.taskList&&e.push(wc.configure(this.options.taskList)),e}});var wu=bk.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",xs(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{let r=e.tokens||[];return 1===r.length&&"image"===r[0].type?t.parseChildren([r[0]]):t.createNode("paragraph",void 0,t.parseInline(r))},renderMarkdown:(e,t)=>e&&Array.isArray(e.content)?t.renderChildren(e.content):"",addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),wp=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,wh=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,wm=xX.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML({HTMLAttributes:e}){return["s",xs(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[bo({find:wp,type:this.type})]},addPasteRules(){return[bw({find:wh,type:this.type})]}}),wf=bk.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),wg=xX.create({name:"underline",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("underline")&&{}}],renderHTML({HTMLAttributes:e}){return["u",xs(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown:(e,t)=>`++${t.renderChildren(e)}++`,markdownTokenizer:{name:"underline",level:"inline",start:e=>e.indexOf("++"),tokenize(e,t,r){let n=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!n)return;let i=n[2].trim();return{type:"underline",raw:n[0],text:i,tokens:r.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),wy=x2.create({name:"starterKit",addExtensions(){var e,t,r,n;let i=[];return!1!==this.options.bold&&i.push(kO.configure(this.options.bold)),!1!==this.options.blockquote&&i.push(kT.configure(this.options.blockquote)),!1!==this.options.bulletList&&i.push(kY.configure(this.options.bulletList)),!1!==this.options.code&&i.push(kz.configure(this.options.code)),!1!==this.options.codeBlock&&i.push(kR.configure(this.options.codeBlock)),!1!==this.options.document&&i.push(kL.configure(this.options.document)),!1!==this.options.dropcursor&&i.push(kx.configure(this.options.dropcursor)),!1!==this.options.gapcursor&&i.push(kb.configure(this.options.gapcursor)),!1!==this.options.hardBreak&&i.push(kU.configure(this.options.hardBreak)),!1!==this.options.heading&&i.push(kF.configure(this.options.heading)),!1!==this.options.undoRedo&&i.push(kN.configure(this.options.undoRedo)),!1!==this.options.horizontalRule&&i.push(kZ.configure(this.options.horizontalRule)),!1!==this.options.italic&&i.push(kK.configure(this.options.italic)),!1!==this.options.listItem&&i.push(kX.configure(this.options.listItem)),!1!==this.options.listKeymap&&i.push(wr.configure(null==(e=this.options)?void 0:e.listKeymap)),!1!==this.options.link&&i.push(v1.configure(null==(t=this.options)?void 0:t.link)),!1!==this.options.orderedList&&i.push(wo.configure(this.options.orderedList)),!1!==this.options.paragraph&&i.push(wu.configure(this.options.paragraph)),!1!==this.options.strike&&i.push(wm.configure(this.options.strike)),!1!==this.options.text&&i.push(wf.configure(this.options.text)),!1!==this.options.underline&&i.push(wg.configure(null==(r=this.options)?void 0:r.underline)),!1!==this.options.trailingNode&&i.push(kw.configure(null==(n=this.options)?void 0:n.trailingNode)),i}});let wx=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),wb=[],wv=(e,t,r)=>{if(0==e.length-t)return r.classGroupId;let n=e[t],i=r.nextPart.get(n);if(i){let r=wv(e,t+1,i);if(r)return r}let s=r.validators;if(null===s)return;let a=0===t?e.join("-"):e.slice(t).join("-"),o=s.length;for(let e=0;e<o;e++){let t=s[e];if(t.validator(a))return t.classGroupId}},wk=(e,t)=>{let r=wx();for(let n in e)ww(e[n],r,n,t);return r},ww=(e,t,r,n)=>{let i=e.length;for(let s=0;s<i;s++)wN(e[s],t,r,n)},wN=(e,t,r,n)=>{"string"==typeof e?w$(e,t,r):"function"==typeof e?wS(e,t,r,n):wj(e,t,r,n)},w$=(e,t,r)=>{(""===e?t:wT(t,e)).classGroupId=r},wS=(e,t,r,n)=>{w_(e)?ww(e(n),t,r,n):(null===t.validators&&(t.validators=[]),t.validators.push({classGroupId:r,validator:e}))},wj=(e,t,r,n)=>{let i=Object.entries(e),s=i.length;for(let e=0;e<s;e++){let[s,a]=i[e];ww(a,wT(t,s),r,n)}},wT=(e,t)=>{let r=e,n=t.split("-"),i=n.length;for(let e=0;e<i;e++){let t=n[e],i=r.nextPart.get(t);i||(i=wx(),r.nextPart.set(t,i)),r=i}return r},w_=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,wI=[],wC=(e,t,r,n,i)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:i}),wA=/\s+/,wO=e=>{let t;if("string"==typeof e)return e;let r="";for(let n=0;n<e.length;n++)e[n]&&(t=wO(e[n]))&&(r&&(r+=" "),r+=t);return r},wE=[],wM=e=>{let t=t=>t[e]||wE;return t.isThemeGetter=!0,t},wz=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,wP=/^\((?:(\w[\w-]*):)?(.+)\)$/i,wD=/^\d+\/\d+$/,wR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,wF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,wZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wB=e=>wD.test(e),wV=e=>!!e&&!Number.isNaN(Number(e)),wH=e=>!!e&&Number.isInteger(Number(e)),wW=e=>e.endsWith("%")&&wV(e.slice(0,-1)),wK=e=>wR.test(e),wq=()=>!0,wJ=e=>wL.test(e)&&!wU.test(e),wG=()=>!1,wY=e=>wF.test(e),wX=e=>wZ.test(e),wQ=e=>!w1(e)&&!w9(e),w0=e=>Ni(e,Nl,wG),w1=e=>wz.test(e),w2=e=>Ni(e,Nd,wJ),w4=e=>Ni(e,Nc,wV),w5=e=>Ni(e,Na,wG),w6=e=>Ni(e,No,wX),w3=e=>Ni(e,Np,wY),w9=e=>wP.test(e),w7=e=>Ns(e,Nd),w8=e=>Ns(e,Nu),Ne=e=>Ns(e,Na),Nt=e=>Ns(e,Nl),Nr=e=>Ns(e,No),Nn=e=>Ns(e,Np,!0),Ni=(e,t,r)=>{let n=wz.exec(e);return!!n&&(n[1]?t(n[1]):r(n[2]))},Ns=(e,t,r=!1)=>{let n=wP.exec(e);return!!n&&(n[1]?t(n[1]):r)},Na=e=>"position"===e||"percentage"===e,No=e=>"image"===e||"url"===e,Nl=e=>"length"===e||"size"===e||"bg-size"===e,Nd=e=>"length"===e,Nc=e=>"number"===e,Nu=e=>"family-name"===e,Np=e=>"shadow"===e,Nh=((e,...t)=>{let r,n,i,s,a=e=>{let t=n(e);if(t)return t;let s=((e,t)=>{let{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:s}=t,a=[],o=e.trim().split(wA),l="";for(let e=o.length-1;e>=0;e-=1){let t=o[e],{isExternal:d,modifiers:c,hasImportantModifier:u,baseClassName:p,maybePostfixModifierPosition:h}=r(t);if(d){l=t+(l.length>0?" "+l:l);continue}let m=!!h,f=n(m?p.substring(0,h):p);if(!f){if(!m||!(f=n(p))){l=t+(l.length>0?" "+l:l);continue}m=!1}let g=0===c.length?"":1===c.length?c[0]:s(c).join(":"),y=u?g+"!":g,x=y+f;if(a.indexOf(x)>-1)continue;a.push(x);let b=i(f,m);for(let e=0;e<b.length;++e){let t=b[e];a.push(y+t)}l=t+(l.length>0?" "+l:l)}return l})(e,r);return i(e,s),s};return s=o=>{var l;let d;return n=(r={cache:(e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null),i=(i,s)=>{r[i]=s,++t>e&&(t=0,n=r,r=Object.create(null))};return{get(e){let t=r[e];return void 0!==t?t:void 0!==(t=n[e])?(i(e,t),t):void 0},set(e,t){e in r?r[e]=t:i(e,t)}}})((l=t.reduce((e,t)=>t(e),e())).cacheSize),parseClassName:(e=>{let{prefix:t,experimentalParseClassName:r}=e,n=e=>{let t,r=[],n=0,i=0,s=0,a=e.length;for(let o=0;o<a;o++){let a=e[o];if(0===n&&0===i){if(":"===a){r.push(e.slice(s,o)),s=o+1;continue}if("/"===a){t=o;continue}}"["===a?n++:"]"===a?n--:"("===a?i++:")"===a&&i--}let o=0===r.length?e:e.slice(s),l=o,d=!1;return o.endsWith("!")?(l=o.slice(0,-1),d=!0):o.startsWith("!")&&(l=o.slice(1),d=!0),wC(r,d,l,t&&t>s?t-s:void 0)};if(t){let e=t+":",r=n;n=t=>t.startsWith(e)?r(t.slice(e.length)):wC(wI,!1,t,void 0,!0)}if(r){let e=n;n=t=>r({className:t,parseClassName:e})}return n})(l),sortModifiers:(d=new Map,l.orderSensitiveModifiers.forEach((e,t)=>{d.set(e,1e6+t)}),e=>{let t=[],r=[];for(let n=0;n<e.length;n++){let i=e[n],s="["===i[0],a=d.has(i);s||a?(r.length>0&&(r.sort(),t.push(...r),r=[]),t.push(i)):r.push(i)}return r.length>0&&(r.sort(),t.push(...r)),t}),...(e=>{let t=(e=>{let{theme:t,classGroups:r}=e;return wk(r,t)})(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]")){var r;let t,n,i;return -1===(r=e).slice(1,-1).indexOf(":")?void 0:(n=(t=r.slice(1,-1)).indexOf(":"),(i=t.slice(0,n))?"arbitrary.."+i:void 0)}let n=e.split("-"),i=+(""===n[0]&&n.length>1);return wv(n,i,t)},getConflictingClassGroupIds:(e,t)=>{if(t){let t=n[e],i=r[e];if(t){if(i){let e=Array(i.length+t.length);for(let t=0;t<i.length;t++)e[t]=i[t];for(let r=0;r<t.length;r++)e[i.length+r]=t[r];return e}return t}return i||wb}return r[e]||wb}}})(l)}).cache.get,i=r.cache.set,s=a,a(o)},(...e)=>s(((...e)=>{let t,r,n=0,i="";for(;n<e.length;)(t=e[n++])&&(r=wO(t))&&(i&&(i+=" "),i+=r);return i})(...e))})(()=>{let e=wM("color"),t=wM("font"),r=wM("text"),n=wM("font-weight"),i=wM("tracking"),s=wM("leading"),a=wM("breakpoint"),o=wM("container"),l=wM("spacing"),d=wM("radius"),c=wM("shadow"),u=wM("inset-shadow"),p=wM("text-shadow"),h=wM("drop-shadow"),m=wM("blur"),f=wM("perspective"),g=wM("aspect"),y=wM("ease"),x=wM("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],v=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...v(),w9,w1],w=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],$=()=>[w9,w1,l],S=()=>[wB,"full","auto",...$()],j=()=>[wH,"none","subgrid",w9,w1],T=()=>["auto",{span:["full",wH,w9,w1]},wH,w9,w1],_=()=>[wH,"auto",w9,w1],I=()=>["auto","min","max","fr",w9,w1],C=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],A=()=>["start","end","center","stretch","center-safe","end-safe"],O=()=>["auto",...$()],E=()=>[wB,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...$()],M=()=>[e,w9,w1],z=()=>[...v(),Ne,w5,{position:[w9,w1]}],P=()=>["no-repeat",{repeat:["","x","y","space","round"]}],D=()=>["auto","cover","contain",Nt,w0,{size:[w9,w1]}],R=()=>[wW,w7,w2],L=()=>["","none","full",d,w9,w1],U=()=>["",wV,w7,w2],F=()=>["solid","dashed","dotted","double"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>[wV,wW,Ne,w5],V=()=>["","none",m,w9,w1],H=()=>["none",wV,w9,w1],W=()=>["none",wV,w9,w1],K=()=>[wV,w9,w1],q=()=>[wB,"full",...$()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[wK],breakpoint:[wK],color:[wq],container:[wK],"drop-shadow":[wK],ease:["in","out","in-out"],font:[wQ],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[wK],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[wK],shadow:[wK],spacing:["px",wV],text:[wK],"text-shadow":[wK],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wB,w1,w9,g]}],container:["container"],columns:[{columns:[wV,w1,w9,o]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:w()}],"overflow-x":[{"overflow-x":w()}],"overflow-y":[{"overflow-y":w()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:S()}],"inset-x":[{"inset-x":S()}],"inset-y":[{"inset-y":S()}],start:[{start:S()}],end:[{end:S()}],top:[{top:S()}],right:[{right:S()}],bottom:[{bottom:S()}],left:[{left:S()}],visibility:["visible","invisible","collapse"],z:[{z:[wH,"auto",w9,w1]}],basis:[{basis:[wB,"full","auto",o,...$()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[wV,wB,"auto","initial","none",w1]}],grow:[{grow:["",wV,w9,w1]}],shrink:[{shrink:["",wV,w9,w1]}],order:[{order:[wH,"first","last","none",w9,w1]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:T()}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:T()}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":I()}],"auto-rows":[{"auto-rows":I()}],gap:[{gap:$()}],"gap-x":[{"gap-x":$()}],"gap-y":[{"gap-y":$()}],"justify-content":[{justify:[...C(),"normal"]}],"justify-items":[{"justify-items":[...A(),"normal"]}],"justify-self":[{"justify-self":["auto",...A()]}],"align-content":[{content:["normal",...C()]}],"align-items":[{items:[...A(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...A(),{baseline:["","last"]}]}],"place-content":[{"place-content":C()}],"place-items":[{"place-items":[...A(),"baseline"]}],"place-self":[{"place-self":["auto",...A()]}],p:[{p:$()}],px:[{px:$()}],py:[{py:$()}],ps:[{ps:$()}],pe:[{pe:$()}],pt:[{pt:$()}],pr:[{pr:$()}],pb:[{pb:$()}],pl:[{pl:$()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":$()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":$()}],"space-y-reverse":["space-y-reverse"],size:[{size:E()}],w:[{w:[o,"screen",...E()]}],"min-w":[{"min-w":[o,"screen","none",...E()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...E()]}],h:[{h:["screen","lh",...E()]}],"min-h":[{"min-h":["screen","lh","none",...E()]}],"max-h":[{"max-h":["screen","lh",...E()]}],"font-size":[{text:["base",r,w7,w2]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,w9,w4]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",wW,w1]}],"font-family":[{font:[w8,w1,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,w9,w1]}],"line-clamp":[{"line-clamp":[wV,"none",w9,w4]}],leading:[{leading:[s,...$()]}],"list-image":[{"list-image":["none",w9,w1]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",w9,w1]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:[wV,"from-font","auto",w9,w2]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[wV,"auto",w9,w1]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",w9,w1]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",w9,w1]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:z()}],"bg-repeat":[{bg:P()}],"bg-size":[{bg:D()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},wH,w9,w1],radial:["",w9,w1],conic:[wH,w9,w1]},Nr,w6]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:R()}],"gradient-via-pos":[{via:R()}],"gradient-to-pos":[{to:R()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:L()}],"rounded-s":[{"rounded-s":L()}],"rounded-e":[{"rounded-e":L()}],"rounded-t":[{"rounded-t":L()}],"rounded-r":[{"rounded-r":L()}],"rounded-b":[{"rounded-b":L()}],"rounded-l":[{"rounded-l":L()}],"rounded-ss":[{"rounded-ss":L()}],"rounded-se":[{"rounded-se":L()}],"rounded-ee":[{"rounded-ee":L()}],"rounded-es":[{"rounded-es":L()}],"rounded-tl":[{"rounded-tl":L()}],"rounded-tr":[{"rounded-tr":L()}],"rounded-br":[{"rounded-br":L()}],"rounded-bl":[{"rounded-bl":L()}],"border-w":[{border:U()}],"border-w-x":[{"border-x":U()}],"border-w-y":[{"border-y":U()}],"border-w-s":[{"border-s":U()}],"border-w-e":[{"border-e":U()}],"border-w-t":[{"border-t":U()}],"border-w-r":[{"border-r":U()}],"border-w-b":[{"border-b":U()}],"border-w-l":[{"border-l":U()}],"divide-x":[{"divide-x":U()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":U()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...F(),"hidden","none"]}],"divide-style":[{divide:[...F(),"hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:[...F(),"none","hidden"]}],"outline-offset":[{"outline-offset":[wV,w9,w1]}],"outline-w":[{outline:["",wV,w7,w2]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",c,Nn,w3]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",u,Nn,w3]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[wV,w2]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":U()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",p,Nn,w3]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[wV,w9,w1]}],"mix-blend":[{"mix-blend":[...Z(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Z()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[wV]}],"mask-image-linear-from-pos":[{"mask-linear-from":B()}],"mask-image-linear-to-pos":[{"mask-linear-to":B()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":B()}],"mask-image-t-to-pos":[{"mask-t-to":B()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":B()}],"mask-image-r-to-pos":[{"mask-r-to":B()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":B()}],"mask-image-b-to-pos":[{"mask-b-to":B()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":B()}],"mask-image-l-to-pos":[{"mask-l-to":B()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":B()}],"mask-image-x-to-pos":[{"mask-x-to":B()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":B()}],"mask-image-y-to-pos":[{"mask-y-to":B()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[w9,w1]}],"mask-image-radial-from-pos":[{"mask-radial-from":B()}],"mask-image-radial-to-pos":[{"mask-radial-to":B()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":v()}],"mask-image-conic-pos":[{"mask-conic":[wV]}],"mask-image-conic-from-pos":[{"mask-conic-from":B()}],"mask-image-conic-to-pos":[{"mask-conic-to":B()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:z()}],"mask-repeat":[{mask:P()}],"mask-size":[{mask:D()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",w9,w1]}],filter:[{filter:["","none",w9,w1]}],blur:[{blur:V()}],brightness:[{brightness:[wV,w9,w1]}],contrast:[{contrast:[wV,w9,w1]}],"drop-shadow":[{"drop-shadow":["","none",h,Nn,w3]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",wV,w9,w1]}],"hue-rotate":[{"hue-rotate":[wV,w9,w1]}],invert:[{invert:["",wV,w9,w1]}],saturate:[{saturate:[wV,w9,w1]}],sepia:[{sepia:["",wV,w9,w1]}],"backdrop-filter":[{"backdrop-filter":["","none",w9,w1]}],"backdrop-blur":[{"backdrop-blur":V()}],"backdrop-brightness":[{"backdrop-brightness":[wV,w9,w1]}],"backdrop-contrast":[{"backdrop-contrast":[wV,w9,w1]}],"backdrop-grayscale":[{"backdrop-grayscale":["",wV,w9,w1]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[wV,w9,w1]}],"backdrop-invert":[{"backdrop-invert":["",wV,w9,w1]}],"backdrop-opacity":[{"backdrop-opacity":[wV,w9,w1]}],"backdrop-saturate":[{"backdrop-saturate":[wV,w9,w1]}],"backdrop-sepia":[{"backdrop-sepia":["",wV,w9,w1]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":$()}],"border-spacing-x":[{"border-spacing-x":$()}],"border-spacing-y":[{"border-spacing-y":$()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",w9,w1]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[wV,"initial",w9,w1]}],ease:[{ease:["linear","initial",y,w9,w1]}],delay:[{delay:[wV,w9,w1]}],animate:[{animate:["none",x,w9,w1]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[f,w9,w1]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:H()}],"rotate-x":[{"rotate-x":H()}],"rotate-y":[{"rotate-y":H()}],"rotate-z":[{"rotate-z":H()}],scale:[{scale:W()}],"scale-x":[{"scale-x":W()}],"scale-y":[{"scale-y":W()}],"scale-z":[{"scale-z":W()}],"scale-3d":["scale-3d"],skew:[{skew:K()}],"skew-x":[{"skew-x":K()}],"skew-y":[{"skew-y":K()}],transform:[{transform:[w9,w1,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:q()}],"translate-x":[{"translate-x":q()}],"translate-y":[{"translate-y":q()}],"translate-z":[{"translate-z":q()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",w9,w1]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",w9,w1]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[wV,w7,w2,w4]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),Nm=(...e)=>Nh(function(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(n=e(t[r]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}(e))&&(n&&(n+=" "),n+=t);return n}(e)),Nf=xX.create({name:"askai",addOptions:()=>({HTMLAttributes:{class:"ask-ai-highlight"}}),addAttributes:()=>({taskId:{default:null,parseHTML:e=>e.getAttribute("data-ask-ai-task"),renderHTML:e=>({"data-ask-ai-task":e.taskId||void 0})}}),parseHTML:()=>[{tag:"mark[data-ask-ai-task]"}],renderHTML({HTMLAttributes:e}){return["mark",xs(this.options.HTMLAttributes,e),0]},addCommands(){return{setAskAiMark:e=>({chain:t})=>t().setMark(this.name,e).run(),unsetAskAiMark:()=>({chain:e})=>e().unsetMark(this.name).run()}}}),Ng=({initialHtml:e,placeholder:t="Start writing...",className:r,contentClassName:n,contentStyle:a,onChange:o,onReady:l,containerRef:d})=>{let c=(0,s.useRef)(null),u=(0,s.useRef)(null),p=(0,s.useRef)(o),h=(0,s.useRef)(l),m=(0,s.useRef)(n),f=(0,s.useRef)(a);(0,s.useEffect)(()=>{p.current=o},[o]),(0,s.useEffect)(()=>{h.current=l},[l]);let g=(0,s.useMemo)(()=>[wy.configure({heading:{levels:[1,2,3]},link:!1,underline:!1}),v1.configure({autolink:!0,linkOnPaste:!0,openOnClick:!1}),Nf,b$,k$.configure({types:["heading","paragraph"]}),kv.configure({placeholder:t})],[t]);return(0,s.useEffect)(()=>{if(!c.current)return;let t=new ba({element:c.current,extensions:g,content:e,editorProps:{attributes:{class:Nm("editor-content prose prose-lg max-w-none focus:outline-none min-h-full pt-0",n),style:a}},onUpdate:({editor:e})=>{let t=e.getHTML(),r=e.state.doc.textBetween(0,e.state.doc.content.size," ");p.current?.(t,r)}});m.current=n,f.current=a,u.current=t;let r=e=>{let t=u.current;if(!t)return{changed:!1,tr:null};let{state:r}=t,{from:n,to:i}=e?.scope||r.selection,s=n!==i,a=s?n:e?.fallbackToDoc?0:null,o=s?i:e?.fallbackToDoc?r.doc.content.size:null;if(null===a||null===o)return{changed:!1,tr:null};let l=r.tr,d=!1,c=e?.stripQuotes!==!1,p=e?.stripBlockquoteChars!==!1,h=e?.stripAsterisks!==!1;if(r.doc.nodesBetween(a,o,(e,t)=>{if(!e.isText||!e.text)return;let n=t+e.nodeSize,i=Math.max(t,a)-t,s=Math.min(n,o)-t,u=e.text.slice(i,s),m=u;if(h&&(m=m.replace(/\*/g,"")),p&&(m=m.replace(/>/g,"")),c&&(m=m.replace(/[\"â€œâ€ã€Œã€]/g,"")),u===m)return;let f=e.text.slice(0,i)+m+e.text.slice(s),g=l.mapping.map(t),y=l.mapping.map(n);l=l.replaceRangeWith(g,y,r.schema.text(f,e.marks)),d=!0}),d){if(e?.dispatch===!1)return{changed:d,tr:l};t.view.dispatch(l)}return{changed:d,tr:l}},i=()=>{let e=u.current;if(!e)return{boldMarks:0,blockquotes:0,quoteChars:0,blocks:[]};let t=e.state.schema.marks.bold,r=0,n=0,i=0,s=[];return e.state.doc.descendants((e,a)=>{if("blockquote"===e.type.name&&(n+=1),e.isText&&e.text){t&&e.marks.some(e=>e.type===t)&&(r+=1);let n=e.text.match(/[\"â€œâ€ã€Œã€]/g);n&&(i+=n.length)}if(e.isBlock){let r=+("blockquote"===e.type.name),n=+("blockquote"===e.type.name),i=0;e.descendants(e=>{if("blockquote"===e.type.name&&(n+=1),e.isText&&e.text){t&&e.marks.some(e=>e.type===t)&&(r+=1);let n=e.text.match(/[\"â€œâ€ã€Œã€]/g);n&&(i+=n.length)}});let o=e.textBetween(0,e.content.size," "," ").trim();s.push({from:a,to:a+e.nodeSize,text:o,boldMarks:r,blockquotes:n,quoteChars:i,type:e.type.name})}}),{boldMarks:r,blockquotes:n,quoteChars:i,blocks:s}};return h.current&&h.current({getSelectedText:()=>{let{from:e,to:r}=t.state.selection;return e===r?"":t.state.doc.textBetween(e,r," ")},insertHtml:e=>t.chain().focus().insertContent(e).run(),insertImage:(e,r="")=>t.chain().focus().setImage({src:e,alt:r}).run(),getPlainText:()=>t.state.doc.textBetween(0,t.state.doc.content.size," "),getHtml:()=>t.getHTML(),setHtml:e=>t.commands.setContent(e),getSelectionRange:()=>{let{from:e,to:r}=t.state.selection;return{from:e,to:r}},replaceRange:(e,r)=>t.chain().focus().insertContentAt(e,r).run(),markAskAiRange:(e,r)=>{t.chain().setTextSelection(e).setAskAiMark({taskId:r}).run()},clearAskAiMarks:e=>{let t=u.current;if(!t)return;let{state:r}=t,n=r.schema.marks.askai;if(!n)return;let i=r.tr;r.doc.descendants((t,r)=>{t.isText&&t.marks.forEach(s=>{s.type!==n||e&&s.attrs.taskId!==e||(i=i.removeMark(r,r+t.nodeSize,n))})}),i.docChanged&&t.view.dispatch(i)},findAskAiRange:e=>{let t=u.current;if(!t)return null;let{state:r}=t,n=r.schema.marks.askai;if(!n)return null;let i=null,s=null;return(r.doc.descendants((t,r)=>{if(!t.isText||!t.marks.some(t=>t.type===n&&t.attrs.taskId===e))return;let a=r+t.nodeSize;i=null===i?r:Math.min(i,r),s=null===s?a:Math.max(s,a)}),null===i||null===s)?null:{from:i,to:s}},toggleUnderline:()=>t.chain().focus().toggleUnderline().run(),toggleBold:()=>(r(),t.chain().focus().toggleBold().run()),toggleItalic:()=>t.chain().focus().toggleItalic().run(),toggleHeading:e=>t.chain().focus().toggleHeading({level:e}).run(),toggleBlockquote:()=>t.chain().focus().toggleBlockquote().run(),toggleBulletList:()=>t.chain().focus().toggleBulletList().run(),toggleOrderedList:()=>t.chain().focus().toggleOrderedList().run(),setTextAlign:e=>t.chain().focus().setTextAlign(e).run(),setLink:e=>t.chain().focus().extendMarkRange("link").setLink({href:e}).run(),unsetLink:()=>t.chain().focus().unsetLink().run(),undo:()=>t.chain().focus().undo().run(),redo:()=>t.chain().focus().redo().run(),clearBold:e=>{let t=u.current;if(!t)return!1;let{state:n}=t,i=e?.removeBold!==!1,s=e?.removeBlockquotes!==!1,a=e?.removeQuotes!==!1,o=e?.target==="document",l=e?.scope,{from:d,to:c}=n.selection,p=d!==c,h=l?.from??(o||!p?0:d),m=l?.to??(o||!p?n.doc.content.size:c),f=!1,{tr:g,changed:y}=r({fallbackToDoc:o||!p,stripQuotes:a,stripBlockquoteChars:!0,stripAsterisks:!0,scope:{from:h,to:m},dispatch:!1}),x=g||n.tr;if(f=f||y,i){let e=n.schema.marks.bold;e&&n.doc.descendants((t,r)=>{if(!t.isText||!t.marks.some(t=>t.type===e)||r+t.nodeSize<=h||r>=m)return;let n=x.mapping.map(r),i=x.mapping.map(r+t.nodeSize);x=x.removeMark(n,i,e),f=!0})}if(s){let e=n.schema.nodes.blockquote;e&&n.doc.descendants((t,r)=>{if(t.type!==e)return;let n=r+t.nodeSize;if(n<=h||r>=m)return;let i=x.mapping.map(r),s=x.mapping.map(n);x=x.replaceWith(i,s,t.content),f=!0})}return f&&x&&t.view.dispatch(x),f},summarizeFormatting:i,listCleanupTargets:()=>i().blocks.filter(e=>e.boldMarks>0||e.blockquotes>0||e.quoteChars>0),focus:()=>t.chain().focus().run()}),()=>{t.destroy(),u.current=null}},[g]),(0,s.useEffect)(()=>{let e=c.current;if(!e)return;let t=Nm("editor-content prose prose-lg max-w-none focus:outline-none min-h-full",n);e.className!==t&&(e.className=t),a&&Object.assign(e.style,a),m.current=n,f.current=a},[n,a]),(0,s.useEffect)(()=>{let t=u.current;t&&e!==t.getHTML()&&t.commands.setContent(e)},[e]),(0,i.jsx)("div",{ref:d,className:Nm("flex-1 bg-white flex flex-col min-h-0 overflow-hidden relative",r),children:(0,i.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden",children:(0,i.jsx)("div",{className:"h-full overflow-y-auto custom-scrollbar",children:(0,i.jsx)("div",{ref:c,className:"h-full"})})})})},Ny=c("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),Nx=c("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]),Nb=c("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),Nv=c("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),Nk=c("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),Nw=c("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),NN=c("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),N$=c("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),NS=c("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]),Nj=c("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),NT=c("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]),N_=c("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]),NI=c("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]),NC=c("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),NA=c("link-2-off",[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),NO=c("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),NE=c("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]),NM=c("list-todo",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]]),Nz=c("gallery-horizontal-end",[["path",{d:"M2 7v10",key:"a2pl2d"}],["path",{d:"M6 5v14",key:"1kq3d7"}],["rect",{width:"12",height:"18",x:"10",y:"3",rx:"2",key:"13i7bc"}]]),NP=c("gem",[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),ND=({icon:e,command:t,value:r,label:n,onClick:s,active:a,onCommand:o})=>(0,i.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),s?s():t&&o(t,r)},className:Nm("p-2 rounded transition-colors",a?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"),title:n,children:(0,i.jsx)(e,{className:"w-4 h-4"})}),NR=({icon:e,label:t,onClick:r,active:n,disabled:a,loading:o,iconOnly:l=!1,variant:d="solid"})=>{let[c,u]=(0,s.useState)(!1),p=(0,s.useRef)(null),h=()=>{p.current&&window.clearTimeout(p.current),p.current=window.setTimeout(()=>u(!0),2e3)},m=()=>{p.current&&window.clearTimeout(p.current),p.current=null,u(!1)};return(0,s.useEffect)(()=>()=>{p.current&&window.clearTimeout(p.current)},[]),(0,i.jsxs)("div",{className:"relative flex items-center",children:[(0,i.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),a||r()},onMouseEnter:h,onMouseLeave:m,onFocus:h,onBlur:m,disabled:a||o,"aria-label":t,className:Nm("flex items-center gap-1.5 rounded-md text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-200","justify-center",l?"px-2.5 py-2":"px-3 py-1.5","ghost"===d?a||o?"text-indigo-300 border-none bg-transparent cursor-not-allowed":n?"text-indigo-900 border-none bg-transparent":"text-indigo-700 hover:text-indigo-900 border-none bg-transparent":a||o?"bg-indigo-50 text-indigo-300 border border-indigo-100 cursor-not-allowed":n?"bg-indigo-600 text-white border border-indigo-600 shadow-sm":"bg-indigo-50 text-indigo-700 border border-indigo-200 hover:bg-indigo-100"),children:[(0,i.jsx)(e,{className:Nm("w-3.5 h-3.5",o?"animate-spin":"")}),!l&&(0,i.jsx)("span",{children:t}),l&&(0,i.jsx)("span",{className:"sr-only",children:t})]}),c&&(0,i.jsx)("div",{className:"absolute left-1/2 top-full mt-2 -translate-x-1/2 whitespace-nowrap rounded bg-gray-900 px-2 py-1 text-[11px] font-medium text-white shadow-lg z-50",children:t})]})},NL=({onCommand:e,onRemoveBold:t,onOpenImageModal:r,onDownloadAllImages:n,isDownloadingImages:s,onToggleKeyPoints:a,showKeyPoints:o,hasKeyPoints:l,onToggleVisualAssets:d,showVisualAssets:c,onRebrand:u,isRebranding:p,productName:h,onToggleMetaPanel:m,showMetaPanel:f,onUndo:g,onRedo:y,askAiBadgeSlotRef:x,extraActions:b})=>(0,i.jsxs)("div",{className:"flex items-center gap-2 p-2 border-b border-gray-200 bg-gray-50 flex-shrink-0 z-20 overflow-x-auto whitespace-nowrap [scrollbar-width:thin] custom-scrollbar",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 pr-3 mr-1 border-r border-gray-300 flex-shrink-0",children:[l&&(0,i.jsx)(NR,{icon:NM,onClick:a,label:"Key Points",active:o,iconOnly:!0,variant:"ghost"}),(0,i.jsx)(NR,{icon:Nz,onClick:d,label:"Visual Assets",active:c,iconOnly:!0,variant:"ghost"}),(0,i.jsx)(NR,{icon:ex,onClick:r,label:"AI Image",iconOnly:!0,variant:"ghost"}),(0,i.jsx)(NR,{icon:NP,onClick:u,label:"Rebrand",disabled:p||!h,loading:p,iconOnly:!0,variant:"ghost"}),(0,i.jsx)(NR,{icon:em,onClick:m,label:"SEO Meta",active:f,iconOnly:!0,variant:"ghost"}),(0,i.jsx)("div",{ref:x,className:"flex items-center pl-1"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1 flex-nowrap flex-shrink-0",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-1 pr-2 border-r border-gray-300 flex-shrink-0",children:[(0,i.jsx)(ND,{icon:Ny,command:"formatBlock",value:"<h2>",label:"Heading 2",onCommand:e}),(0,i.jsx)(ND,{icon:Nx,command:"formatBlock",value:"<h3>",label:"Heading 3",onCommand:e}),(0,i.jsx)(ND,{icon:Nb,command:"formatBlock",value:"<p>",label:"Paragraph",onCommand:e})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0",children:[(0,i.jsx)(ND,{icon:Nv,command:"bold",label:"Bold",onCommand:e}),(0,i.jsx)(ND,{icon:Nk,command:"italic",label:"Italic",onCommand:e}),(0,i.jsx)(ND,{icon:Nw,command:"underline",label:"Underline",onCommand:e}),(0,i.jsx)(ND,{icon:NN,onClick:t,label:"Remove All Bold Formatting & Quotes",onCommand:e})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0",children:[(0,i.jsx)(ND,{icon:N$,command:"insertUnorderedList",label:"Bullet List",onCommand:e}),(0,i.jsx)(ND,{icon:NS,command:"insertOrderedList",label:"Numbered List",onCommand:e}),(0,i.jsx)(ND,{icon:Nj,command:"formatBlock",value:"<blockquote>",label:"Quote",onCommand:e})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0",children:[(0,i.jsx)(ND,{icon:NT,command:"alignLeft",label:"Align Left",onCommand:e}),(0,i.jsx)(ND,{icon:N_,command:"alignCenter",label:"Align Center",onCommand:e}),(0,i.jsx)(ND,{icon:NI,command:"alignRight",label:"Align Right",onCommand:e})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0",children:[(0,i.jsx)(ND,{icon:NC,onClick:()=>e("link"),label:"Insert Link",onCommand:e}),(0,i.jsx)(ND,{icon:NA,onClick:()=>e("unlink"),label:"Remove Link",onCommand:e})]}),(0,i.jsx)("div",{className:"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0",children:(0,i.jsx)(ND,{icon:s?ep:ec,onClick:n,label:"Download all images in editor",onCommand:e})}),(0,i.jsxs)("div",{className:"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0",children:[(0,i.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),g()},className:"p-2 text-gray-600 hover:bg-gray-100 hover:text-blue-600 rounded transition-colors",title:"Undo",children:(0,i.jsx)(NO,{className:"w-4 h-4"})}),(0,i.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),y()},className:"p-2 text-gray-600 hover:bg-gray-100 hover:text-blue-600 rounded transition-colors",title:"Redo",children:(0,i.jsx)(NE,{className:"w-4 h-4"})})]})]}),b&&(0,i.jsx)("div",{className:"flex items-center gap-2 pl-3 ml-auto flex-shrink-0",children:b})]}),NU=s.default.memo(({point:e,type:t,isChecked:r,isProcessing:n,onToggle:s,onRefine:a,useTiptap:o,isTiptapReady:l})=>(0,i.jsxs)("div",{className:`p-2 rounded-lg text-xs transition-all border group relative ${r?"bg-orange-100/50 border-orange-200 text-gray-500":"bg-white border-orange-100 text-gray-800 hover:border-orange-300 hover:shadow-sm"}`,children:[(0,i.jsxs)("div",{className:"flex items-start gap-2 pr-6 cursor-pointer",onClick:()=>s(e),children:[r?(0,i.jsx)("span",{className:"w-4 h-4 text-orange-500 flex-shrink-0",children:"â˜‘"}):(0,i.jsx)("span",{className:"w-4 h-4 text-orange-300 flex-shrink-0",children:"â˜"}),(0,i.jsxs)("div",{className:"flex-1",children:["brand"===t&&(0,i.jsx)("span",{className:"text-[10px] font-bold text-purple-600 bg-purple-50 px-1 rounded mr-1",children:"USP"}),(0,i.jsx)("span",{className:r?"line-through opacity-75":"",children:e})]})]}),!r&&(0,i.jsx)("button",{onClick:t=>{t.stopPropagation(),o&&!l?alert("Editor not ready."):a(e)},disabled:n,className:"absolute right-1 top-1 p-1.5 bg-white border border-purple-200 text-purple-600 rounded-md hover:bg-purple-50 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity",title:"Auto-insert this point into best paragraph",children:n?(0,i.jsx)("span",{className:"w-3 h-3 inline-block animate-spin",children:"â³"}):(0,i.jsx)("span",{className:"w-3 h-3 inline-block",children:"âœ¨"})})]})),NF=({brandExclusivePoints:e,keyPoints:t,checkedPoints:r,refiningPoint:n,onTogglePoint:s,onRefinePoint:a,useTiptap:o,isTiptapReady:l,uniqueCoveredCount:d,totalPoints:c})=>(0,i.jsxs)("div",{className:"w-72 bg-orange-50/50 border-l border-orange-100 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-200",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsxs)("h4",{className:"text-xs font-bold uppercase text-orange-600 flex items-center gap-2",children:[(0,i.jsx)(NM,{className:"w-4 h-4"}),"Key Points"]}),(0,i.jsxs)("span",{className:"text-[10px] font-bold text-gray-400",children:[d,"/",c]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[e.length>0&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("h5",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-wider flex items-center gap-1",children:[(0,i.jsx)(NP,{className:"w-3 h-3"})," Brand USP"]}),(0,i.jsx)("div",{className:"space-y-1",children:e.map((e,t)=>(0,i.jsx)(NU,{point:e,type:"brand",isChecked:r.includes(e),isProcessing:n===e,onToggle:s||(()=>{}),onRefine:a||(()=>{}),useTiptap:o,isTiptapReady:l},`brand-${t}`))})]}),t.length>0&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("h5",{className:"text-[10px] font-bold text-orange-400 uppercase tracking-wider",children:"General Knowledge"}),(0,i.jsx)("div",{className:"space-y-1",children:t.map((e,t)=>(0,i.jsx)(NU,{point:e,type:"general",isChecked:r.includes(e),isProcessing:n===e,onToggle:s||(()=>{}),onRefine:a||(()=>{}),useTiptap:o,isTiptapReady:l},`gen-${t}`))})]})]})]}),NZ=c("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),NB=c("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),NV=c("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),NH=c("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),NW=c("mouse-pointer-click",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]),NK=({scrapedImages:e,onToggleImage:t,imagePlans:r,isPlanning:n,isBatchProcessing:s,onBatchProcess:a,onAutoPlan:o,onGenerateSinglePlan:l,onUpdatePlanPrompt:d,onInjectImage:c,useTiptap:u,isTiptapReady:p})=>(0,i.jsxs)("div",{className:"w-80 bg-blue-50/50 border-l border-blue-100 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-200 flex flex-col",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsxs)("h4",{className:"text-xs font-bold uppercase text-blue-600 flex items-center gap-2",children:[(0,i.jsx)(Nz,{className:"w-4 h-4"}),"Visual Assets"]}),(0,i.jsxs)("button",{onClick:()=>{u&&!p?alert("Editor not ready."):o()},disabled:n||u&&!p,className:"text-[10px] bg-white border border-blue-200 text-blue-600 px-2 py-1 rounded hover:bg-blue-50 transition-colors flex items-center gap-1",title:"è®“ AI æ ¹æ“šå…§å®¹è‡ªå‹•è¦åŠƒæ’åœ–ä½ç½®èˆ‡æç¤º",children:[n?(0,i.jsx)(ep,{className:"w-3 h-3 animate-spin"}):(0,i.jsx)(em,{className:"w-3 h-3"}),"Auto-Plan"]})]}),e.length>0&&(0,i.jsxs)("div",{className:"mb-4 bg-white p-2 rounded-lg border border-gray-200",children:[(0,i.jsx)("h5",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:"Source References"}),(0,i.jsx)("div",{className:"grid grid-cols-4 gap-2",children:e.map((e,r)=>{let n=e.id||`${e.url||e.altText||"image"}-${r}`;return(0,i.jsxs)("div",{className:`relative aspect-square rounded overflow-hidden group cursor-pointer border transition-all ${e.ignored?"border-gray-300":"border-gray-200 bg-white"} hover:border-blue-200`,title:e.altText,onClick:()=>t({...e,ignored:!e.ignored}),children:[(0,i.jsx)("img",{src:e.url,className:`w-full h-full object-cover transition ${e.ignored?"grayscale opacity-60":""}`}),e.aiDescription&&(0,i.jsx)("div",{className:"absolute top-0 right-0 w-2 h-2 bg-green-500 rounded-full m-1 border border-white"}),e.ignored&&(0,i.jsx)("div",{className:"absolute inset-0 bg-black/30"})]},n)})})]}),0===r.length?(0,i.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 text-center space-y-2 opacity-60",children:[(0,i.jsx)(ex,{className:"w-8 h-8"}),(0,i.jsx)("p",{className:"text-xs",children:"No visual assets planned."}),(0,i.jsx)("p",{className:"text-[10px]",children:'Click "Auto-Plan" to generate ideas based on your content.'})]}):(0,i.jsxs)("div",{className:"space-y-3 pb-20",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center bg-blue-100/50 p-2 rounded-md",children:[(0,i.jsxs)("span",{className:"text-[10px] font-bold text-blue-700",children:[r.filter(e=>"done"===e.status).length,"/",r.length," Ready"]}),(0,i.jsxs)("button",{onClick:a,disabled:s,className:"text-[10px] bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 flex items-center gap-1 disabled:opacity-50",title:"ä¸€æ¬¡ç”Ÿæˆæ‰€æœ‰å°šæœªç”¢å‡ºçš„åœ–åƒ",children:[s?(0,i.jsx)(ep,{className:"w-3 h-3 animate-spin"}):(0,i.jsx)(NZ,{className:"w-3 h-3"}),"Generate All"]})]}),r.map(e=>(0,i.jsxs)("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm space-y-2 group",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("span",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"Prompt"}),(0,i.jsx)("p",{className:"text-[10px] text-gray-600 leading-snug line-clamp-3 hover:line-clamp-none cursor-text focus:outline-none focus:bg-gray-50 rounded",contentEditable:!0,onBlur:t=>d(e.id,t.currentTarget.innerText),dangerouslySetInnerHTML:{__html:e.generatedPrompt}})]}),(0,i.jsx)("div",{className:"flex flex-col gap-1",children:"done"===e.status?(0,i.jsxs)("div",{className:"w-16 h-16 rounded bg-gray-100 overflow-hidden border border-gray-200 relative group/img",children:[(0,i.jsx)("img",{src:e.url,className:"w-full h-full object-cover"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover/img:opacity-100 transition-opacity flex items-center justify-center cursor-pointer",children:(0,i.jsx)(ps,{className:"w-4 h-4 text-white"})})]}):(0,i.jsx)("button",{onClick:()=>l(e),disabled:"generating"===e.status,className:"p-1.5 bg-gray-50 hover:bg-blue-50 text-gray-500 hover:text-blue-600 rounded border border-gray-200 transition-colors",title:"ç”Ÿæˆæ­¤åœ–åƒ",children:"generating"===e.status?(0,i.jsx)(ep,{className:"w-4 h-4 animate-spin text-blue-500"}):(0,i.jsx)(NB,{className:"w-4 h-4"})})})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-1.5 rounded text-[10px] text-gray-500 flex items-center gap-1.5",children:[(0,i.jsx)(NV,{className:"w-3 h-3 text-gray-400"}),(0,i.jsxs)("span",{className:"truncate flex-1",title:e.insertAfter||"No anchor detected",children:['After: "',(e.insertAfter||"N/A").substring(0,25),'..."']})]}),"done"===e.status&&(0,i.jsxs)("div",{className:"flex gap-1 pt-1",children:[(0,i.jsxs)("button",{onClick:()=>c(e,"auto"),className:"flex-1 py-1.5 bg-green-50 text-green-700 border border-green-200 rounded text-[10px] font-bold hover:bg-green-100 transition-colors flex items-center justify-center gap-1",children:[(0,i.jsx)(NH,{className:"w-3 h-3"})," Insert Auto"]}),(0,i.jsxs)("button",{onClick:()=>c(e,"cursor"),className:"flex-1 py-1.5 bg-blue-50 text-blue-700 border border-blue-200 rounded text-[10px] font-bold hover:bg-blue-100 transition-colors flex items-center justify-center gap-1",title:"Insert at current cursor position",children:[(0,i.jsx)(NW,{className:"w-3 h-3"})," Cursor"]})]})]},e.id))]})]}),Nq=({metaTitle:e,metaDescription:t,urlSlug:r,isMetaLoading:n,onGenerateMeta:s,onClose:a,onMetaTitleChange:o,onMetaDescriptionChange:l,onUrlSlugChange:d})=>(0,i.jsxs)("div",{className:"absolute z-30 right-4 top-28 w-full max-w-xl bg-white border border-gray-200 shadow-2xl rounded-xl p-4 space-y-3 animate-in fade-in duration-150",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(em,{className:"w-4 h-4 text-purple-500"}),(0,i.jsx)("span",{className:"text-xs font-bold text-gray-700 uppercase",children:"SEO Meta"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("button",{type:"button",onClick:s,className:"flex items-center gap-1 px-3 py-1.5 text-xs font-semibold text-purple-700 bg-white border border-purple-200 rounded-md hover:bg-purple-50 transition-colors disabled:opacity-60",disabled:n,children:[n?(0,i.jsx)(em,{className:"w-3 h-3 animate-spin"}):(0,i.jsx)(em,{className:"w-3 h-3"}),(0,i.jsx)("span",{children:"Auto-generate"})]}),(0,i.jsx)("button",{type:"button",onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,i.jsx)(po,{className:"w-4 h-4"})})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,i.jsxs)("div",{className:"md:col-span-1",children:[(0,i.jsx)("label",{className:"text-[10px] font-bold uppercase text-gray-500",children:"Meta Title"}),(0,i.jsx)("input",{value:e,onChange:e=>o(e.target.value),className:"w-full mt-1 px-3 py-2 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white",placeholder:"e.g. AI Text Writer Pro â€” é«˜è³ªå…§å®¹ç”Ÿæˆ"})]}),(0,i.jsxs)("div",{className:"md:col-span-1",children:[(0,i.jsx)("label",{className:"text-[10px] font-bold uppercase text-gray-500",children:"Meta Description"}),(0,i.jsx)("textarea",{value:t,onChange:e=>l(e.target.value),className:"w-full mt-1 px-3 py-2 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white h-20 resize-none",placeholder:"140-160 chars summary"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-[10px] font-bold uppercase text-gray-500",children:"URL Slug"}),(0,i.jsx)("input",{value:r,onChange:e=>d(e.target.value),className:"w-full mt-1 px-3 py-2 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white",placeholder:"your-article-slug"})]})]}),NJ=({show:e,imagePrompt:t,onPromptChange:r,onSubmit:n,isLoading:s,onClose:a})=>e?(0,i.jsxs)("div",{className:"absolute z-50 bg-white rounded-lg shadow-2xl border border-gray-200 w-96 p-4 animate-in fade-in zoom-in-95 duration-200",style:{top:50,right:10},children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2 text-pink-600",children:[(0,i.jsx)(ex,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"text-xs font-bold uppercase tracking-wide",children:"AI Image Generator (Nano Banana)"})]}),(0,i.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,i.jsx)(po,{className:"w-4 h-4"})})]}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n()},className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Image Prompt"}),(0,i.jsx)("textarea",{value:t,onChange:e=>r(e.target.value),className:"w-full h-24 p-3 bg-gray-50 rounded-lg border border-gray-200 text-sm focus:border-pink-500 focus:ring-1 focus:ring-pink-500 outline-none resize-none mt-1",placeholder:"Describe the image..."})]}),(0,i.jsxs)("button",{type:"submit",disabled:s||!t,className:"w-full py-2 bg-pink-600 text-white rounded-lg text-sm font-semibold hover:bg-pink-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[s?(0,i.jsx)(ep,{className:"w-4 h-4 animate-spin"}):(0,i.jsx)(ex,{className:"w-4 h-4"}),"Generate Image"]})]})]}):null;var NG=e.i(74080);let NY=c("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),NX=c("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),NQ=c("message-square-plus",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]]),N0=c("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),N1=c("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),N2=({onRunAction:e,onInsert:t,onLockSelectionRange:r,badgeContainerRef:n,onHighlightTask:a})=>{var o;let[l,d]=(0,s.useState)(""),[c,p]=(0,s.useState)(null),[h,m]=(0,s.useState)("edit"),[f,g]=(0,s.useState)(!1),[y,x]=(0,s.useState)(""),[b,v]=(0,s.useState)(""),[k,w]=(0,s.useState)(!1),[N,$]=(0,s.useState)(""),[S,j]=(0,s.useState)([]),[T,_]=(0,s.useState)(null),I=(0,s.useRef)(null),C=(0,s.useRef)({}),A=(0,s.useRef)(null),O=(0,s.useRef)(null),[E,M]=(0,s.useState)({width:72,height:200}),[z,P]=(0,s.useState)(null),D=[{id:"rephrase",label:"Rephrase"},{id:"shorten",label:"Shorten"},{id:"elaborate",label:"Elaborate"},{id:"formal",label:"More formal"},{id:"casual",label:"More casual"},{id:"bulletise",label:"Bulletise"},{id:"summarise",label:"Summarise"}],R=[{id:"bullet",label:"Bullet list",icon:(0,i.jsx)(N$,{className:"w-4 h-4"})},{id:"ordered",label:"Numbered list",icon:(0,i.jsx)(NS,{className:"w-4 h-4"})},{id:"table-2",label:"Table (2 columns)",icon:(0,i.jsx)(N0,{className:"w-4 h-4"})},{id:"table-3",label:"Table (3 columns)",icon:(0,i.jsx)(N0,{className:"w-4 h-4"})},{id:"checklist",label:"Checklist",icon:(0,i.jsx)(N1,{className:"w-4 h-4"})},{id:"quote",label:"Quote block",icon:(0,i.jsx)(Nj,{className:"w-4 h-4"})},{id:"markdown-clean",label:"Markdown clean-up",icon:(0,i.jsx)(em,{className:"w-4 h-4"})}],L=l.length>0&&!!c,U=T?S.find(e=>e.id===T):null,F=S.filter(e=>"done"===e.status).length,Z=S.length,B=U?.status==="running",V=(0,s.useMemo)(()=>{if(!c)return{top:12,left:12};let e=E.width||72,t=E.height||200,r=Math.max(12,Math.min(c.right+8,window.innerWidth-e-12));return{top:Math.max(12,Math.min(c.top+c.height/2-t/2,window.innerHeight-t-12)),left:r}},[c,E]),H=e=>e instanceof Element&&e.closest('[data-askai-ui="true"]'),W=e=>{let t=e.getBoundingClientRect();if(t&&(t.width>0||t.height>0))return t;let r=Array.from(e.getClientRects()).filter(e=>e.width>0||e.height>0);if(0===r.length)return null;let n=Math.min(...r.map(e=>e.left)),i=Math.max(...r.map(e=>e.right)),s=Math.min(...r.map(e=>e.top));return new DOMRect(n,s,i-n,Math.max(...r.map(e=>e.bottom))-s)},K=()=>{d(""),p(null),I.current=null,g(!1)},q=()=>{requestAnimationFrame(()=>{let e=window.getSelection();if(!e||0===e.rangeCount)return void K();let t=e.toString().trim();if(!t)return void K();let r=e.getRangeAt(0),n=W(r);n?(d(t),p(n),I.current=r.cloneRange()):K()})};(0,s.useEffect)(()=>{let e=e=>{H(e.target)||q()},t=()=>{let e=document.activeElement,t=window.getSelection(),r=t?.anchorNode instanceof Element?t.anchorNode:t?.anchorNode?.parentElement;H(e)||H(r)||q()},r=()=>{(()=>{let e=I.current;if(!e)return;let t=W(e);t&&p(t)})()};return document.addEventListener("selectionchange",t),document.addEventListener("mouseup",e),document.addEventListener("keyup",e),window.addEventListener("scroll",r,!0),window.addEventListener("resize",r),()=>{document.removeEventListener("selectionchange",t),document.removeEventListener("mouseup",e),document.removeEventListener("keyup",e),window.removeEventListener("scroll",r,!0),window.removeEventListener("resize",r)}},[]),(0,s.useEffect)(()=>{if(!A.current)return;let e=A.current.getBoundingClientRect();e.width&&e.height&&M(t=>t.width===e.width&&t.height===e.height?t:{width:e.width,height:e.height})},[L,l,f]),(0,s.useEffect)(()=>{if(!T)return;let e=S.find(e=>e.id===T);e&&(v(t=>t||e.title),m(e.mode))},[T,S]);let J=(0,s.useMemo)(()=>{let e=V.left+E.width+12,t=window.innerWidth-256-12;return{top:V.top,left:Math.max(12,Math.min(e,t))}},[V,E]),G=e=>{let t=(e||l||N).trim();return t?(t!==N&&($(t),x("")),t):(alert("è«‹å…ˆé¸å–è¦èª¿æ•´çš„æ–‡å­—ã€‚"),"")},Y=async t=>{let n=G(t.selectedText);if(!n)return;m(t.mode),w(!1),v(Q(t)),P(null);let i=`${Date.now()}-${Math.random().toString(36).slice(2,6)}`;I.current&&(C.current[i]=I.current.cloneRange()),r?.(i),a?.(i);let s={id:i,title:Q(t),selectionText:n,status:"running",mode:t.mode};j(e=>[...e,s]),X(i);try{let r=await (e?e({...t,selectedText:n,taskId:i}):Promise.resolve((()=>{if("format"===t.mode){if("bullet"===t.preset)return`<ul class="list-disc pl-5"><li>${n}</li><li>ç¬¬äºŒé»ž</li></ul>`;if(t.preset?.toString().startsWith("table")){let e="table-3"===t.preset?3:2,r=Array.from({length:e},(e,t)=>`Column ${t+1}`).join("</th><th>");return`<table class="table-auto border-collapse w-full"><thead><tr><th>${r}</th></tr></thead><tbody><tr>${Array.from({length:e},()=>"<td>Value</td>").join("")}</tr></tbody></table>`}return"checklist"===t.preset?`<ul class="list-none pl-0"><li>â˜ ${n}</li><li>â˜ ä¸‹ä¸€æ­¥</li></ul>`:"quote"===t.preset?`<blockquote class="border-l-4 pl-3 italic text-gray-700">${n}</blockquote>`:`<div>${n}</div>`}let e=t.prompt?`ï¼ˆ${t.prompt}ï¼‰`:"";return`<p>${n}${e?" "+e:""}</p>`})()));j(e=>e.map(e=>e.id===i?{...e,html:r,status:"done"}:e)),T===i&&(P(r),v(Q(t)))}catch(r){console.error("Ask AI run failed",r);let e='<p class="text-red-500">AI è¼¸å‡ºå¤±æ•—ï¼Œè«‹é‡è©¦ã€‚</p>';j(t=>t.map(t=>t.id===i?{...t,html:e,status:"error"}:t)),T===i&&(P(e),v(Q(t)))}},X=e=>{if(_(e),!e)return;let t=S.find(t=>t.id===e);t&&(v(t.title),P(t.html||null),m(t.mode))},Q=e=>{if("format"===e.mode){let t=R.find(t=>t.id===e.preset);return t?.label||"Format"}let t=D.find(t=>t.id===e.preset);return t?.label||"Edit"},ee=()=>{let e=window.getSelection();e&&e.removeAllRanges()},et=()=>{Y({mode:"edit",preset:void 0,prompt:y,selectedText:U?.selectionText||N||l})};if("undefined"==typeof document)return null;let er=n?.current,en=(o=er?"inline":"floating",0===Z||k?null:(0,i.jsxs)("button",{type:"button","data-askai-ui":"true",className:`${"inline"===o?"inline-flex items-center gap-2 px-3 py-1.5 rounded-md text-xs font-semibold shadow-sm whitespace-nowrap flex-shrink-0":"fixed z-30 bottom-4 left-4 w-16 h-16 rounded-full flex flex-col items-center justify-center gap-1 shadow-lg"} bg-purple-600 text-white transition-colors hover:bg-purple-500`,onClick:()=>{let e=S[S.length-1];e&&(X(e.id),w(!0))},title:"Ask AI Tasking",children:[(0,i.jsx)("span",{className:"text-[10px] leading-none uppercase tracking-wide",children:"Ask AI"}),(0,i.jsxs)("span",{className:"text-xs font-semibold leading-none",children:[F,"/",Z]})]}));return(0,i.jsxs)(i.Fragment,{children:[(0,NG.createPortal)((0,i.jsxs)(i.Fragment,{children:[L?(0,i.jsxs)("div",{"data-askai-ui":"true",className:"fixed z-30 flex flex-col bg-white border border-gray-200 shadow-lg rounded-full py-3 px-2 gap-3",style:{top:V.top,left:V.left},ref:A,children:[(0,i.jsx)(N4,{icon:(0,i.jsx)(u,{className:"w-4 h-4"}),label:"Edit",onClick:()=>{g(!1),G()&&(m("edit"),v("Edit"),P(null),w(!0),x(""))}}),(0,i.jsx)(N4,{icon:(0,i.jsx)(em,{className:"w-4 h-4"}),label:"Format",active:f,onClick:()=>{g(e=>!e),m("format")}}),(0,i.jsx)(N4,{icon:(0,i.jsx)(NX,{className:"w-4 h-4"}),label:"Shorten",onClick:()=>Y({mode:"edit",preset:"shorten",selectedText:l})}),(0,i.jsx)(N4,{icon:(0,i.jsx)(NQ,{className:"w-4 h-4"}),label:"Add note",onClick:()=>Y({mode:"edit",preset:"elaborate",selectedText:l})})]}):null,f&&L?(0,i.jsxs)(N5,{anchor:J,children:[(0,i.jsx)("div",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Format templates"}),(0,i.jsx)("div",{className:"flex flex-col gap-1",children:R.map(e=>(0,i.jsx)(N6,{label:e.label,icon:e.icon,onClick:()=>{Y({mode:"format",preset:e.id,selectedText:N||l}),g(!1)}},e.id))})]}):null,k?(0,i.jsxs)("div",{"data-askai-ui":"true",className:"fixed inset-0 z-40 flex items-start justify-center overflow-y-auto px-3 py-6",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-black/5 backdrop-blur-[1px]"}),(0,i.jsxs)("div",{className:"relative w-[min(780px,92vw)] bg-white shadow-2xl border border-gray-200 rounded-2xl p-4 max-h-[80vh] flex flex-col overflow-hidden",ref:O,children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-900",children:[(0,i.jsx)(NY,{className:"w-4 h-4 text-purple-500"}),(0,i.jsx)("span",{children:b||("format"===h?"Format":"Edit")}),B&&(0,i.jsx)(ep,{className:"w-4 h-4 animate-spin text-gray-400"})]}),(0,i.jsx)("button",{className:"p-1 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100",onClick:()=>void(w(!1),_(null)),children:(0,i.jsx)(po,{className:"w-4 h-4"})})]}),Z>1&&(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)("select",{className:"w-full px-3 py-2 text-sm border rounded-lg text-gray-700",value:T||"",onChange:e=>{let t=e.target.value;t&&X(t)},children:S.map((e,t)=>(0,i.jsxs)("option",{value:e.id,children:["Task ",t+1," â€” ",e.title," (",e.status,")"]},e.id))})}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-4 pr-1 custom-scrollbar",children:[(0,i.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,i.jsxs)("div",{className:"border border-gray-100 rounded-xl p-3 bg-gray-50 max-h-64 overflow-y-auto custom-scrollbar",children:[(0,i.jsx)("div",{className:"text-xs font-semibold text-gray-500 mb-2",children:"Before"}),(0,i.jsx)("div",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:U?.selectionText||N||l})]}),(0,i.jsxs)("div",{className:"border border-purple-100 rounded-xl p-3 bg-purple-50/60 min-h-[140px] max-h-64 overflow-y-auto custom-scrollbar",children:[(0,i.jsx)("div",{className:"text-xs font-semibold text-purple-600 mb-2",children:"After"}),(0,i.jsx)("div",{className:"text-sm text-gray-900 leading-relaxed",dangerouslySetInnerHTML:{__html:z||'<p class="text-gray-400">ç­‰å¾…ç”Ÿæˆ...</p>'}})]})]}),(0,i.jsx)("div",{className:"flex flex-col gap-3",children:"edit"===h&&(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("textarea",{className:"w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 min-h-[96px] resize-y",placeholder:"åœ¨é€™è£¡è¼¸å…¥æ›´é•·çš„æç¤ºï¼Œæˆ–è²¼ä¸Šå…·é«”çš„ä¿®æ”¹èªªæ˜Ž",value:y,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),et())}}),(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,i.jsx)("button",{className:"px-4 py-2 rounded-lg text-sm font-semibold bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",onClick:et,disabled:!y.trim()||B,children:"Generate"}),(0,i.jsxs)("select",{className:"px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",onChange:e=>{let t=e.target.value;t&&(Y({mode:"edit",preset:t,selectedText:U?.selectionText||N||l}),e.currentTarget.value="")},defaultValue:"",children:[(0,i.jsx)("option",{value:"",disabled:!0,children:"Quick refine"}),D.map(e=>(0,i.jsx)("option",{value:e.id,children:e.label},e.id))]})]})]})})]}),(0,i.jsxs)("div",{className:"mt-3 flex items-center gap-2 justify-end flex-wrap border-t border-gray-100 pt-3 bg-white",children:["edit"!==h&&(0,i.jsxs)("select",{className:"px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",onChange:e=>{let t=e.target.value;t&&(Y({mode:"edit",preset:t,selectedText:U?.selectionText||N||l}),e.currentTarget.value="")},defaultValue:"",children:[(0,i.jsx)("option",{value:"",disabled:!0,children:"Refine"}),D.map(e=>(0,i.jsx)("option",{value:e.id,children:e.label},e.id))]}),!B&&(0,i.jsxs)("button",{className:"px-4 py-2 rounded-lg text-sm font-semibold flex items-center gap-1 bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{let e=S.find(e=>e.id===T),r=e?.html||z;if(!r)return;if(t){t(r,T||void 0),_(null),w(!1),ee();return}let n=T?C.current[T]:I.current;if(!n)return;let i=document.createDocumentFragment(),s=document.createElement("div");for(s.innerHTML=r;s.firstChild;)i.appendChild(s.firstChild);n.deleteContents(),n.insertNode(i),T&&delete C.current[T],_(null),w(!1),ee()},disabled:!z,children:["Replace",(0,i.jsx)(NH,{className:"w-4 h-4"})]})]})]})]}):null]}),document.body),en&&(0,NG.createPortal)(en,er||document.body)]})},N4=({icon:e,label:t,active:r,onClick:n})=>(0,i.jsx)("button",{className:`w-10 h-10 inline-flex items-center justify-center rounded-full border transition-colors ${r?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-blue-300 text-gray-600"}`,onMouseDown:e=>e.preventDefault(),onClick:n,title:t,children:e}),N5=({anchor:e,children:t})=>(0,i.jsx)("div",{"data-askai-ui":"true",className:"fixed z-40 w-64 bg-white border border-gray-200 shadow-xl rounded-2xl p-3",style:{top:e.top,left:e.left},children:t}),N6=({label:e,icon:t,disabled:r,onClick:n})=>(0,i.jsxs)("button",{disabled:r,className:`w-full flex items-center gap-2 px-2 py-2 rounded-lg text-sm ${r?"text-gray-300 cursor-not-allowed":"text-gray-800 hover:bg-gray-50 active:bg-gray-100"}`,onMouseDown:e=>e.preventDefault(),onClick:n,children:[t||(0,i.jsx)(u,{className:"w-4 h-4"}),(0,i.jsx)("span",{children:e})]}),N3=`
    **STRICT VISUAL CATEGORIES (Select ONE):**
    1. **INFOGRAPHIC:** Clean, modern layout using icons, flowcharts, or "lazy pack" style summaries to explain concepts. (Use for: steps, summaries, data).
    2. **BRANDED_LIFESTYLE:** High-end photography. Real people using the product/service in a specific, authentic environment. (Use for: Brand image, emotional connection).
    3. **PRODUCT_INFOGRAPHIC:** Close-up of the product with subtle graphical highlights (lines/arrows) emphasizing a specific feature/spec.
    4. **ECOMMERCE_WHITE_BG:** Pure white background, studio lighting, product isolated. (Use for: Commercial display only).

    **COMPOSITION RULE (Split Screen):**
    - If the context compares two things (Before/After, Good vs Bad, Option A vs B), or needs a macro detail alongside a wide shot, request a "Split Screen (Left/Right)" composition.
    
    **NEGATIVE CONSTRAINTS (ABSOLUTELY FORBIDDEN):**
    - **NO ABSTRACT ART:** No glowing brains, floating digital nodes, surreal metaphors, or "conceptual" 3D renders.
    - **NO TEXT:** Do not try to render specific sentences inside the image (AI cannot spell).
`,N9=(e,t="image/png")=>e?e.startsWith("data:")||e.startsWith("http")?e:`data:${t};base64,${e}`:null,N7=e=>e?Array.isArray(e)?e:[e]:[],N8=(e,t)=>{if(!e)return null;if("string"==typeof e)return N9(e,t||"image/png");if(e.inlineData?.data)return N9(e.inlineData.data,e.inlineData.mimeType||t);let r=e.b64_json||e.base64||e.base64Data||e.data||e.image;if("string"==typeof r)return N9(r,e.mimeType||e.mediaType||t);if(r&&"object"==typeof r&&r!==e){let n=N8(r,e.mimeType||e.mediaType||t);if(n)return n}return"string"==typeof e.text&&e.text.trim().startsWith("data:image")?e.text.trim():e.url&&"string"==typeof e.url?e.url:null},$e=async(e,t="Describe this image in detail.",r=T.FLASH)=>{let n=Date.now();try{let i=await fetch(L("/vision"),{method:"POST",headers:U(),body:JSON.stringify({prompt:t,image:e,model:r})});if(!i.ok){let e=await i.text();throw Error(`Vision API request failed (${i.status}): ${e}`)}let s=await i.json(),a=Date.now()-n,o=(r.includes("flash"),"FLASH"),l=M(s,o);return{data:s.text,...l,duration:a}}catch(e){throw Date.now(),Error(`Failed to analyze image: ${e instanceof Error?e.message:String(e)}`)}},$t=async(e,t)=>{let r=Date.now(),n=e.filter(e=>e.aiDescription).slice(0,5).map(e=>e.aiDescription).join("\n---\n"),i=(({languageInstruction:e,analyzedSamples:t,websiteType:r})=>`
    I need to define a consistent "Visual Identity"(Master Style Prompt) for an article.
    
    <WebsiteContext>
    ${r}
    </WebsiteContext>
    DEFINITION: The type of business this is.
    ACTION: Ensure style matches this industry.
    
    <SourceImageDescriptions>
    ${t&&t.length>0?t:"No source images available. Infer style strictly from Website Context."}
    </SourceImageDescriptions>
    DEFINITION: Descriptions of actual images on the site.
    ACTION: Mimic this existing style.

    TASK:
    Synthesize a ** single, cohesive Visual Style Description** that I can append to every image prompt to ensure consistency.

      Include:
    1. ** Color Palette:** (e.g., "Medical Blue #0055FF and Clean White", or "Warm Earth Tones")
    2. ** Lighting / Mood:** (e.g., "Soft bright studio lighting", "Moody natural light", "Flat vector lighting")
    3. ** Art Medium:** (e.g., "High-resolution Photography", "Minimalist 2D Vector Art", "3D Product Render")
    
    OUTPUT FORMAT:
    Return ONLY the style description string(max 30 words).
  Example: "Photorealistic style with soft daylight, using a clinical white and teal palette, high-end commercial aesthetic."
    
    <LanguageInstruction>
    ${e}
    </LanguageInstruction>
    DEFINITION: Output Language.
    ACTION: Write the style description in English (for AI generation) but if instruction says otherwise, follow it.
`)({languageInstruction:z("zh-TW"),analyzedSamples:n,websiteType:t});try{let e=await W.runText(i,"FLASH");return{data:e.text,usage:e.usage,cost:e.cost,duration:e.duration}}catch(e){return console.error("Visual Style Analysis failed",e),{data:"Clean, modern professional photography with natural lighting.",usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-r}}},$r=async(e,t,r="")=>{let n=Date.now(),i=(({contextText:e,languageInstruction:t,visualStyle:r,guide:n})=>`
    Generate a detailed image generation prompt based on the following context.

  <LanguageInstruction>
  ${t}
  </LanguageInstruction>
  DEFINITION: Output Language.
  ACTION: Write the prompt in English unless specified.
    
    <ContextText>
    ${e}
    </ContextText>
    DEFINITION: The scene usage context.
    ACTION: Describe this scene.
    
    <VisualStyleGuide>
    ${r}
    </VisualStyleGuide>
    DEFINITION: The artistic style.
    ACTION: Apply these visual rules strictly.
    
    <SpecificGuide>
    ${n}
    </SpecificGuide>
    DEFINITION: User specific hints.
    ACTION: Incorporate these hints.

TASK:
    Create a detailed, specific image generation prompt that:
    1. Captures the essence of the context text
    2. Adheres to the visual style guide
    3. Is optimized for AI image generation
    4. Avoids abstract concepts and focuses on concrete, photographable subjects
    
    Return ONLY the image prompt(no explanations or metadata).
    `)({contextText:e,languageInstruction:z(t),visualStyle:r,guide:N3}),s=await W.runText(i,"FLASH");return{data:s.text?.trim()||"",usage:s.usage,cost:s.cost,duration:Date.now()-n}},$n=async e=>{let t=Date.now();try{let r=await fetch(L("/image"),{method:"POST",headers:U(),body:JSON.stringify({prompt:e,model:T.IMAGE_PREVIEW,aspectRatio:"16:9"})}),n=(r.headers.get("content-type")||"").includes("application/json");if(!r.ok){let e=n?await r.json():await r.text(),t="string"==typeof e?e:e?.error||JSON.stringify(e);throw Error(`Image generation failed (${r.status}): ${t}`)}let i=n?await r.json():{image:await r.text()},s=(e=>{if(!e)return null;if("string"==typeof e)return N9(e);let t=N8(e,e.mimeType||e.mediaType);if(t)return t;let r=(e=>{if(!Array.isArray(e))return null;for(let t of e){let e=t?.content?.parts;if(Array.isArray(e))for(let t of e){if(t?.inlineData?.data)return N9(t.inlineData.data,t.inlineData.mimeType);if("string"==typeof t?.text&&t.text.trim().startsWith("data:image"))return t.text.trim()}}return null})(e.candidates||e.response?.candidates);if(r)return r;for(let t of[e.images,e.data?.images,e.response?.images,e.result?.images,e.data,e.result])for(let r of N7(t)){let t=N8(r,e?.mimeType||e?.mediaType);if(t)return t}return e.result?.image?N9(e.result.image):null})(i),a=M(i.totalUsage||i.usageMetadata||i.usage,"IMAGE_GEN");return{data:s,...a,duration:Date.now()-t}}catch(e){throw console.error("Image generation failed",e),e}},$i=async(e,t,r,n="")=>{let i=Date.now(),s=z(r),a=t.length>0?t.length+1:2,o=t.slice(0,30).map(e=>({alt:e.altText,aiAnalysis:e.aiDescription||"N/A"})),l=`
    I have a draft ARTICLE and a list of SOURCE IMAGES.
    I also have a MANDATORY GLOBAL VISUAL STYLE that must be applied to all generated images.

    GLOBAL VISUAL STYLE: "${n||"Clean, modern, professional style"}"
    
    TASK:
    Create a "Visual Asset Plan" for the new article.
    
    ${N3}
    
    **ADDITIONAL CONSTRAINTS:**
    1. **Quantity:** Generate a plan for **MAXIMUM ${a} images**.
    2. **Context & Culture:** Ensure the image description is culturally relevant.
       ${s}
    3. **Insertion Anchor:** Select a unique text phrase (6-12 chars) from the content.
    4. **Unified Style:** In the 'generatedPrompt', you MUST Explicitly describe how the "Global Visual Style" applies to this specific subject. Do NOT frame as an infographic; focus on photography, product, or lifestyle visuals.

    ARTICLE CONTENT:
    ${e.substring(0,2e4)}

    SOURCE IMAGES (Analyzed Reference):
    ${JSON.stringify(o)}
    `;try{let e=await W.runJson(l,"FLASH",{type:K,properties:{plans:{type:q,items:{type:K,properties:{generatedPrompt:{type:J,description:"Detailed prompt including subject + visual style + mood."},category:{type:J,enum:["BRANDED_LIFESTYLE","PRODUCT_DETAIL","ECOMMERCE_WHITE_BG"]},insertAfter:{type:J},rationale:{type:J}},required:["generatedPrompt","category","insertAfter"]}}},required:["plans"]});return{data:(e.data.plans||[]).map((e,t)=>({id:`plan-${Date.now()}-${t}`,category:e.category,generatedPrompt:e.generatedPrompt,insertAfter:e.insertAfter,status:"idle"})),usage:e.usage,cost:e.cost,duration:e.duration}}catch(e){return console.error("Image Planning failed",e),{data:[],usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-i}}},$s=async(e,t,r,n,i)=>{let s=Date.now();if(!(n&&n.trim().length>10)&&t.length<=5&&r.length<=5)return{data:{filteredPoints:t,filteredAuthTerms:r,knowledgeInsights:[]},usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:0};let a=z(i),o=`
    I am writing a specific section titled: "${e}".
    
    I have:
    1. A database of "Key Information Points".
    2. A database of "Authority Terms".
    3. A "BRAND KNOWLEDGE BASE" (Guidelines/Specs).
    
    TASK:
    1. **Filter Data**: Select ONLY the Key Points and Authority Terms strictly relevant to "${e}".
    2. **Agentic Retrieval**: Read the "BRAND KNOWLEDGE BASE". Extract 3-5 specific bullet points (Do's, Don'ts, Specs, Tone) that MUST be applied to this specific section.
       - If nothing is relevant in the KB for this section, return empty list.
    
    ${a}
    
    DATABASE:
    Key Points: ${JSON.stringify(t)}
    Authority Terms: ${JSON.stringify(r)}
    
    BRAND KNOWLEDGE BASE:
    ${n?n.substring(0,3e4):"N/A"}
    `;try{let e=await W.runText(o,"FLASH",{responseMimeType:"application/json",responseSchema:{type:K,properties:{filteredPoints:{type:q,items:{type:J}},filteredAuthTerms:{type:q,items:{type:J}},knowledgeInsights:{type:q,items:{type:J}}}}}),t=JSON.parse(e.text||"{}"),r=M(e.usage,"FLASH");return{data:{filteredPoints:t.filteredPoints||[],filteredAuthTerms:t.filteredAuthTerms||[],knowledgeInsights:t.knowledgeInsights||[]},...r,duration:e.duration}}catch(e){return console.error("Context filter failed",e),{data:{filteredPoints:t,filteredAuthTerms:r,knowledgeInsights:[]},usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-s}}},$a=async(e,t,r,n,i,s=[],a=[],o=null,l=[],d=[],c=0,u={})=>{let p=Date.now(),h=a.length<=1,m=i.slice(0,30),f=await $s(t,l,o?.relevantTerms||[],e.brandKnowledge,e.targetAudience),g=Array.from(new Set([...Array.isArray(u.keyFacts)?u.keyFacts:[],...Array.isArray(u.augment)?u.augment:[],...f.data.filteredPoints])),y=f.data.filteredAuthTerms,x=f.data.knowledgeInsights,{coreQuestion:b,difficulty:v,writingMode:k,solutionAngles:w}=u||{},N=((e,t,r=[],n,i=0,s=!1)=>{if(!n||!n.productName)return"";let a=`### ðŸ’Ž COMMERCIAL & SERVICE STRATEGY (HIGH PRIORITY) 
`,o=!1,l=t?.competitorBrands||[],d=t?.competitorProducts||[],c=[...new Set([...l,...d,...t?.replacementRules||[]])];c.length>0&&(a+=`
        **ðŸ›¡ï¸ SANITIZATION PROTOCOL (ABSOLUTE RULES):**
        You are writing for the brand: **"${n.brandName}"**.
        The Reference Text mentions competitors: ${c.map(e=>`"${e}"`).join(", ")}.

        1. **TOTAL ANNIHILATION:** Never output these competitor words in the final text.
        2. **NO HYBRIDS:** Do NOT write "CompName as ${n.brandName}". That is nonsense.
        3. **SUBJECT SWAP (SEMANTIC REWRITE):**
           - If the reference says: "${l[0]||"Competitor"} offers the best laser..."
           - **REWRITE AS:** "**${n.brandName}** offers the best laser..." (Change the Subject).
           - If the reference discusses a specific machine (e.g., "${d[0]||"OldMachine"}"), replace it with **"${n.productName}"**.
        `),a+=`
    **ðŸ“‰ DENSITY CONTROL (AVOID KEYWORD STUFFING):**
    - **Full Name Rule:** Use the full product name "**${n.productName}**" **MAXIMUM ONCE** in this section.
    - **Natural Variation:** For subsequent mentions, you MUST use variations:
      - The Brand Name: "**${n.brandName}**"
      - Pronouns: "We", "Our team", "The center"
      - Generic: "This technology", "The treatment", "Our service"
    `,s&&i<=2&&(o=!0,a+=`
**ðŸš€ MANDATORY INJECTION:** You have NOT mentioned "${n.brandName}" enough yet. You MUST introduce it here as the solution.
`);let u=e.toLowerCase(),p=r.filter(e=>e.relevanceKeywords.some(e=>u.includes(e.toLowerCase()))),h=u.includes("solution")||u.includes("benefit")||u.includes("guide")||u.includes("how"),m=p;return 0===p.length&&(o||h)&&(m=r.slice(0,2)),m.length>0&&(a+=`
**ðŸ’¡ PROBLEM-SOLUTION WEAVING:**
Integrate the following mapping naturally:
`,m.forEach(e=>{a+=`- Discuss "${e.painPoint}" -> Then present **${n.brandName}** (or ${n.productName}) as the solution using [${e.productFeature}].
`})),a+=`
**CTA:** End with a natural link: [${n.ctaLink}] (Anchor: Check ${n.brandName} pricing/details).
`})(t,e.referenceAnalysis,e.productMapping,e.productBrief,c,h),$=z(e.targetAudience),S=Array.isArray(u.suppress)?u.suppress:[],j=u.isChecklist?"checklist":void 0,T=Array.isArray(u.augment)?u.augment:[],_=Array.isArray(u.subheadings)?u.subheadings:[],I=(({sectionTitle:e,languageInstruction:t,previousSections:r,futureSections:n,generalPlan:i,specificPlan:s,kbInsights:a,keywordPlans:o,relevantAuthTerms:l,points:d,injectionPlan:c,articleTitle:u,coreQuestion:p,difficulty:h,writingMode:m,solutionAngles:f,avoidContent:g,renderMode:y,suppressHints:x,augmentHints:b,subheadings:v,regionReplacements:k,humanWritingVoice:w,regionVoiceDetect:N,replacementRules:$})=>{let S=h||"easy",j=m||("easy"===S?"direct":"multi_solutions");return`You are an expert editor writing the section:
    <SectionTitle>
      ${e}
    </SectionTitle>
    DEFINITION: The title of the specific section you need to write.
    
    <LanguageInstruction>
    ${t}
    </LanguageInstruction>
    DEFINITION: The target language and audience for the article.
    
    ## Context Structure
    <ArticleTopic>
    ${u}
    </ArticleTopic>
    DEFINITION: The main topic of the entire article.

    <PreviousSections>
    ${r.slice(-2).map(e=>e.substring(0,100)+"...").join(" | ")}
    </PreviousSections>
    DEFINITION: Summaries of the immediately preceding sections.

    <UpcomingSections>
    ${n.join(", ")}
    </UpcomingSections>
    DEFINITION: Titles of sections to be written later.


    ## Strategy & Style
    <OverallVoice>
    ${i?.join("; ")||"Professional, authoritative"}
    </OverallVoice>
    DEFINITION: The desired tone and persona for the article.

    <SectionStrategy>
    ${s?.join("; ")||"Explain thoroughly"}
    </SectionStrategy>
    DEFINITION: Specific goals or angles for this section.

    <BrandKnowledge>
    ${a.length>0?a.join("; "):"None"}
    </BrandKnowledge>
    DEFINITION: Background facts or guidelines about the brand.

    ${w?`
    <HumanWritingVoice>
    ${w}
    </HumanWritingVoice>
    DEFINITION: Instructions on how to sound human and not like an AI.
    `:""}

    ${N?`
    <RegionVoiceProfile>
    ${N}
    </RegionVoiceProfile>
    DEFINITION: The detected regional voice composition (e.g., 70% HK / 30% TW).
    INSTRUCTION: Adhere to the dominant regional tone.
    `:""}


    ## Localization & Safety
    ${$&&$.length>0||k&&k.length>0?`
    <LocalizationAndSafety>
    ${$&&$.length>0?`
    **Blocked Terms (DO NOT USE):**
    ${$.map(e=>`- âŒ ${e}`).join("\n")}
    `:""}
    ${k&&k.length>0?`
    **Regional Replacements (MANDATORY):**
    ${k.map(e=>e.replacement?`- "${e.original}" â†’ "${e.replacement}"`:`- "${e.original}" â†’ [REMOVE from text]`).join("\n")}
    `:""}
    </LocalizationAndSafety>
    DEFINITION: Terms to avoid and mandatory vocabulary corrections for the target region.
    INSTRUCTION:
    1. NEVER use any Blocked Terms.
    2. ALWAYS replace "original" terms with their "replacement".
    3. If replacement is [REMOVE], rewrite the sentence to exclude that term entirely.
    `:"(No localization constraints)"}


    ## Task Definition
    <CoreQuestion>
    ${p||"Infer the precise question and answer it"}
    </CoreQuestion>
    DEFINITION: The comprehensive question this section must answer.

    <Difficulty>
    ${S}
    </Difficulty>
    DEFINITION: The complexity level of the topic (easy, medium, unclear).

    <WritingMode>
    ${"direct"===j?"direct answer first":"multi solutions then synthesize"}
    </WritingMode>
    DEFINITION: The structural approach (Direct vs Multi-angle).
    
    ${"multi_solutions"===j?"- Provide 2-3 distinct, non-overlapping solution paths before the final synthesized answer.":"- Lead with a concise, direct answer to the core question."}


    ## Conciseness Constraints
    - ** General Rule **: Cut all fluff. Be crisp and direct. Stop immediately after answering the core question.
    ${/introduction|conclusion|intro|outcome|result|summary|å¼•è¨€|çµå°¾|çµè«–/i.test(e)?"- ** SPECIAL CONSTRAINT **: Target 40~80 words. Write as a SINGLE block of text (one paragraph). Do NOT split into multiple paragraphs.":""} 
    - ** If difficulty = "easy" **: Target < 160 words. Get straight to the point. No preamble.
    - ** If difficulty = "medium" **: Target < 180 words. Explain efficiently using Lists.
    - ** If difficulty = "unclear" **: Focus on clarifying the ambiguity briefly with Lists.


    ## Output Restrictions
    ${"checklist"===y?"- OUTPUT FORMAT: Use checklist/bulleted list. Include every provided Key Fact; do not drop items.":"- OUTPUT FORMAT: Narrative with Markdown as needed."}


    ## Structure Enforcement
    ${v&&v.length>0?`
    <MandatorySubheadings>
    ${v.map((e,t)=>`${t+1}. ${e}`).join("\n")}
    </MandatorySubheadings>
    DEFINITION: The exact H3 subheadings you must use.
    `:"(No predefined subheadings)"}


    ## Solution Angles
    ${"multi_solutions"===j?f&&f.length>0?`
        <DefinedAngles>
        ${f.join("; ")}
        </DefinedAngles>
        DEFINITION: The specific angles/perspectives to cover.
        `:"None provided; create 2 distinct angles.":"Not needed for direct mode."}


    ## Resources & Keywords
    <SemanticKeywords>
    ${o.map(e=>`
    - "${e.word}": ${e.plan?.join("; ")||"Use naturally."}`).join("")}
    </SemanticKeywords>
    DEFINITION: SEO keywords with semantic usage rules.
    INSTRUCTION: Use these words according to their "Semantic Context" rules to maintain the original depth.

    <AuthorityTerms>
    ${l.slice(0,5).join(", ")}
    </AuthorityTerms>
    DEFINITION: Technical or authoritative terms.


    ## Key Facts & Narrative Points
    - ** CRITICAL WRITING RULE **: When writing the main sentence for any Key Fact below, ** minimize the use of commas and symbols **. Use clean, direct sentence structures. 
    <KeyPoints>
    ${d.length>0?d.join("; "):"(No new key points needed for this section, focus on narrative)"}
    </KeyPoints>
    DEFINITION: The core facts and information for this section.


    ## Injection Plan
    ${c}


    ## Exclusion Rules
    ${x&&x.length>0?`
    <StrictExclusion>
    ${x.map(e=>`- ${e}`).join("\n")}
    </StrictExclusion>
    DEFINITION: Topics that are strictly forbidden here.
    `:"(None)"}

    ${g&&g.length>0?`
    <NegativeConstraints>
    ${g.map(e=>`- ${e}`).join("\n")}
    </NegativeConstraints>
    DEFINITION: Content to avoid to prevent repetition/redundancy.
    `:""}


    ## Output Schema
    - Return ONLY the content for this section in JSON format.
    - Use proper Markdown for the content string(H3 for subsections, Lists where appropriate).
    - Do NOT repeat the H2 Title "${e}".
    - Ensure smooth transitions from the previous section.
    - If writing mode is "multi_solutions", list the solution paths clearly, then close with a synthesized recommendation.
    - ** IMPORTANT **: You must populate the "usedPoints" array with the exact strings of any Key Facts you included in the content.
    - ** IMPORTANT **: You must populate "injectedCount" with the number of times you explicitly mentioned the Product Name or Brand Name.
`})({sectionTitle:t,languageInstruction:$,previousSections:s,futureSections:a,generalPlan:n,specificPlan:r,kbInsights:x,keywordPlans:m,relevantAuthTerms:y,points:g,injectionPlan:N,articleTitle:e.title,coreQuestion:b,difficulty:v,writingMode:k,solutionAngles:w,renderMode:j,suppressHints:S,augmentHints:T,subheadings:_,avoidContent:[...a,...s,...g.filter(e=>!g.includes(e)),...S],regionReplacements:e.referenceAnalysis?.regionalReplacements,humanWritingVoice:e.referenceAnalysis?.humanWritingVoice,regionVoiceDetect:e.referenceAnalysis?.regionVoiceDetect,replacementRules:e.referenceAnalysis?.replacementRules}),C=await W.runJson(I,"FLASH",{type:K,properties:{content:{type:J},usedPoints:{type:q,items:{type:J}},injectedCount:{type:"integer",description:"How many times did you mention the Product Name?"}}}),A=C.data||{},O="string"==typeof A.content&&A.content.trim().length>0?A.content:"string"==typeof A.sectionContent?A.sectionContent:"",E=Array.isArray(A.usedPoints)&&A.usedPoints||Array.isArray(A.used_points)&&A.used_points||Array.isArray(A.pointsUsed)&&A.pointsUsed||Array.isArray(A.usedFacts)&&A.usedFacts||[],M=Array.isArray(E)?E.map(e=>("string"==typeof e?e:String(e||"")).trim()).filter(Boolean):[],P=A.injectedCount??A.injected_count??0,D="number"==typeof P?P:Number(P)||0,R={inputCost:C.cost.inputCost+f.cost.inputCost,outputCost:C.cost.outputCost+f.cost.outputCost,totalCost:C.cost.totalCost+f.cost.totalCost};return{data:{content:(O||"").replace(/^##\s+/gm,"### ").replace(/^#\s+/gm,"### ").replace(/<h1>(.*?)<\/h1>/gi,"### $1").replace(/<h2>(.*?)<\/h2>/gi,"### $1"),usedPoints:M||[],injectedCount:D||0},usage:{inputTokens:C.usage.inputTokens+f.usage.inputTokens,outputTokens:C.usage.outputTokens+f.usage.outputTokens,totalTokens:C.usage.totalTokens+f.usage.totalTokens},cost:R,duration:Date.now()-p}},$o=async(e,t,r)=>{let n=(({prompt:e,languageInstruction:t})=>`
    <LanguageInstruction>
    ${t}
    </LanguageInstruction>
    DEFINITION: The language to use.
    ACTION: Follow this instruction.

    <InputPrompt>
    ${e}
    </InputPrompt>
    DEFINITION: The logic or text to process.
    ACTION: Execute this prompt.
`)({prompt:e,languageInstruction:z(t)}),i=await W.runText(n,"FLASH",r);return{data:i.text,usage:i.usage,cost:i.cost,duration:i.duration}},$l=async(e,t,r)=>{let n=Date.now(),i=z(r),s=new DOMParser().parseFromString(e,"text/html"),a=[];if(s.querySelectorAll("p, li").forEach((e,t)=>{let r=e.textContent?.trim()||"";r.length>20&&a.push({id:t,text:r.substring(0,80)+"...",html:e.outerHTML})}),0===a.length)return{data:{originalSnippet:"",newSnippet:""},usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-n};let o=(({pointToInject:e,blocks:t})=>`
    I need to insert this Key Point: 
    <PointToInject>
    "${e}"
    </PointToInject>
    DEFINITION: The fact that must be added.
    ACTION: Find the best place for this fact.
    
    Here is a "Compact Index" of the article paragraphs:
    <ArticleBlocks>
    ${t.map(e=>`[ID: ${e.id}] ${e.text}`).join("\n")}
    </ArticleBlocks>
    DEFINITION: List of paragraph candidates.
    ACTION: Select one ID from this list.

TASK: Identify the SINGLE Best Block ID to insert / merge this point into. 
    Return ONLY the ID(e.g. "5").
    `)({pointToInject:t,blocks:a}),l=await W.runText(o,"FLASH"),d=l.text?.trim().match(/\d+/)?.[0],c=d?parseInt(d):-1,u=a.find(e=>e.id===c);if(!u)return{data:{originalSnippet:"",newSnippet:""},usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-n};let p=(({pointToInject:e,targetHtml:t,languageInstruction:r})=>`
TASK: Rewrite the following HTML Block to naturally include this Key Point.
    
    <KeyPoint>
    "${e}"
    </KeyPoint>
    DEFINITION: Information to weave in.
    ACTION: Merge this into the text naturally.
    
    <TargetHTMLBlock>
    ${t}
    </TargetHTMLBlock>
    DEFINITION: The existing paragraph.
    ACTION: Rewrite this paragraph to include the point.

    RULES:
    1. Keep the original meaning and HTML tag structure(<p>or<li>).
    2. Weave the point in naturally.Do not just append it at the end unless it fits.
    3. <LanguageInstruction>${r}</LanguageInstruction>
    4. Return ONLY the new HTML string.
    `)({pointToInject:t,targetHtml:u.html,languageInstruction:i}),h=await W.runText(p,"FLASH"),m={inputTokens:(l.usage?.inputTokens||0)+(h.usage?.inputTokens||0),outputTokens:(l.usage?.outputTokens||0)+(h.usage?.outputTokens||0),totalTokens:(l.usage?.totalTokens||0)+(h.usage?.totalTokens||0)},f=M(m,"FLASH");return{data:{originalSnippet:u.html,newSnippet:h.text?.trim()||u.html},usage:m,cost:f.cost,duration:Date.now()-n}},$d=k()($(e=>({content:"",status:"idle",generationStep:"idle",error:null,isStopped:!1,analysisResults:null,lastConfig:null,setContent:t=>e(e=>({content:"function"==typeof t?t(e.content):t})),setStatus:t=>e({status:t}),setGenerationStep:t=>e({generationStep:t}),setError:t=>e({error:t}),setAnalysisResults:t=>e({analysisResults:t}),setLastConfig:t=>e({lastConfig:t}),stopGeneration:()=>e({isStopped:!0,status:"completed",generationStep:"idle"}),resetGeneration:()=>e({content:"",status:"idle",generationStep:"idle",error:null,isStopped:!1,analysisResults:null,lastConfig:null})}),{name:"pro_content_writer_generation",storage:w(()=>localStorage),partialize:e=>({content:e.content})})),$c=k()($(e=>({keywordPlans:[],refAnalysis:null,authAnalysis:null,scrapedImages:[],visualStyle:"",brandKnowledge:"",coveredPoints:[],targetAudience:"zh-TW",productMapping:[],activeProductBrief:void 0,articleTitle:"",headingOptimizations:[],languageInstruction:"",hkGroundingResult:null,pendingGroundingResult:null,showGroundingModal:!1,localizedRefAnalysis:null,setKeywordPlans:t=>e({keywordPlans:t}),setRefAnalysis:t=>e({refAnalysis:t}),setAuthAnalysis:t=>e({authAnalysis:t}),setScrapedImages:t=>e({scrapedImages:t}),setVisualStyle:t=>e({visualStyle:t}),setBrandKnowledge:t=>e({brandKnowledge:t}),setCoveredPoints:t=>e(e=>({coveredPoints:"function"==typeof t?t(e.coveredPoints):t})),setTargetAudience:t=>e({targetAudience:t}),setProductMapping:t=>e({productMapping:t}),setActiveProductBrief:t=>e({activeProductBrief:t}),setArticleTitle:t=>e({articleTitle:t}),setHeadingOptimizations:t=>e({headingOptimizations:t}),setLanguageInstruction:t=>e({languageInstruction:t}),setHKGroundingResult:t=>e({hkGroundingResult:t}),setPendingGroundingResult:t=>e({pendingGroundingResult:t}),setShowGroundingModal:t=>e({showGroundingModal:t}),toggleGroundingIssueSelection:t=>e(e=>{if(!e.pendingGroundingResult)return e;let r=e.pendingGroundingResult.issues.map((e,r)=>r===t?{...e,selected:!e.selected}:e);return{pendingGroundingResult:{...e.pendingGroundingResult,issues:r}}}),setLocalizedRefAnalysis:t=>e({localizedRefAnalysis:t}),reset:()=>e({keywordPlans:[],refAnalysis:null,authAnalysis:null,scrapedImages:[],visualStyle:"",brandKnowledge:"",coveredPoints:[],targetAudience:"zh-TW",productMapping:[],activeProductBrief:void 0,articleTitle:"",headingOptimizations:[],languageInstruction:"",hkGroundingResult:null,pendingGroundingResult:null,showGroundingModal:!1,localizedRefAnalysis:null})}),{name:"pro_content_writer_analysis",storage:w(()=>localStorage),partialize:e=>({keywordPlans:e.keywordPlans,refAnalysis:e.refAnalysis,authAnalysis:e.authAnalysis,scrapedImages:e.scrapedImages,visualStyle:e.visualStyle,brandKnowledge:e.brandKnowledge,coveredPoints:e.coveredPoints,targetAudience:e.targetAudience,articleTitle:e.articleTitle,headingOptimizations:e.headingOptimizations,languageInstruction:e.languageInstruction,productMapping:e.productMapping,activeProductBrief:e.activeProductBrief,localizedRefAnalysis:e.localizedRefAnalysis})})),$u=(0,s.createContext)(null),$p=({children:e})=>{let t=$d(),r=$c(),n=C(),a=(0,s.useMemo)(()=>{let e=r.refAnalysis?.structure||[],i=Array.isArray(r.refAnalysis?.keyInformationPoints)?r.refAnalysis.keyInformationPoints:[],s=Array.isArray(r.refAnalysis?.brandExclusivePoints)?r.refAnalysis.brandExclusivePoints:[],a=new Set,o=new Set;return i.forEach(e=>e&&a.add(e)),s.forEach(e=>e&&o.add(e)),e.forEach(e=>{(Array.isArray(e?.keyFacts)?e.keyFacts:[]).forEach(e=>e&&a.add(e)),(Array.isArray(e?.uspNotes)?e.uspNotes:[]).forEach(e=>e&&o.add(e))}),{content:t.content,setContent:e=>t.setContent(e),status:t.status,generationStep:t.generationStep,error:t.error,targetAudience:r.targetAudience,keyPoints:Array.from(a),brandExclusivePoints:Array.from(o),checkedPoints:r.coveredPoints,scrapedImages:r.scrapedImages,visualStyle:r.visualStyle,productBrief:r.activeProductBrief,displayScale:n.displayScale,articleTitle:r.articleTitle,outlineSections:r.refAnalysis?.structure?.map(e=>e.title)||[],onTogglePoint:e=>r.setCoveredPoints(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),onRemoveScrapedImage:e=>r.setScrapedImages(r.scrapedImages.map(t=>{let r=t.id||t.url,n=e.id||e.url;return r&&r===n?{...t,ignored:!t.ignored}:t})),onAddCost:(e,t)=>n.addCost(e?.totalCost||0,t?.totalTokens||0),setArticleTitle:r.setArticleTitle}},[r,t,n.addCost,n.displayScale]);return(0,i.jsx)($u.Provider,{value:a,children:e})},$h=({initialHtml:e,onChange:t,keyPoints:r=[],brandExclusivePoints:n=[],checkedPoints:a=[],scrapedImages:o=[],visualStyle:l="",onTogglePoint:d,targetAudience:c="zh-TW",onAddCost:u,productBrief:p=null,displayScale:h,articleTitle:m,onTitleChange:f,outlineSections:g=[],onRemoveScrapedImage:y,toolbarExtras:x})=>{let b=(0,s.useContext)($u),[v,k]=(0,s.useState)(e),[w,N]=(0,s.useState)(0),[$,S]=(0,s.useState)(0),[j,T]=(0,s.useState)(!1),[_,I]=(0,s.useState)(!1),[C,A]=(0,s.useState)(!1),[O,E]=(0,s.useState)(!1),M=h??b?.displayScale??1,P=(0,s.useRef)(null),D=(0,s.useRef)(null),R=(0,s.useRef)(!1),[L,U]=(0,s.useState)(!1),[F,Z]=(0,s.useState)({boldMarks:0,blockquotes:0,quoteChars:0}),[B,V]=(0,s.useState)([]),[H,W]=(0,s.useState)(new Set),[q,G]=(0,s.useState)(null),[Y,X]=(0,s.useState)(!1),[Q,ee]=(0,s.useState)(null);(0,s.useEffect)(()=>{k(e)},[e]);let et=r.length?r:b?.keyPoints||[],er=n.length?n:b?.brandExclusivePoints||[],en=a.length?a:b?.checkedPoints||[],ei=o.length?o:b?.scrapedImages||[],es=c||b?.targetAudience||"zh-TW",ea=l||b?.visualStyle||"",eo=p||b?.productBrief||null,el=g.length?g:b?.outlineSections||[],{recordHtml:ed,recordMeta:ec,consumeDraft:eu}=(({storageKey:e="ai_writer_editor_autosave_v1",debounceMs:t=3e3})=>{let r=(0,s.useRef)(null),n=(0,s.useRef)(""),i=(0,s.useRef)({}),a=(0,s.useRef)(null),o=(0,s.useRef)("");(0,s.useEffect)(()=>{try{let t=localStorage.getItem(e);if(!t)return;let r=JSON.parse(t);r&&r.html&&(a.current=r)}catch(e){console.warn("Failed to read autosave",e)}},[e]);let l=(0,s.useCallback)(()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{let t={html:n.current||"",...i.current,ts:Date.now()};if(!t.html.trim())return;let r=JSON.stringify(t);if(r!==o.current)try{localStorage.setItem(e,r),o.current=r}catch(e){console.warn("Autosave failed",e)}},t)},[t,e]),d=(0,s.useCallback)(e=>{n.current=e||"",l()},[l]);return{recordHtml:d,recordMeta:(0,s.useCallback)(e=>{i.current={...i.current,...e},l()},[l]),consumeDraft:(0,s.useCallback)(()=>{let e=a.current;return a.current=null,e},[])}})({storageKey:"ai_writer_editor_autosave_v1"}),eh=$c(e=>e.setCoveredPoints),{metaTitle:em,metaDescription:ef,urlSlug:eg,setMetaTitle:ey,setMetaDescription:ex,setUrlSlug:eb,isMetaLoading:ev,generateMeta:ek}=(({editorRef:e,tiptapApi:t,targetAudience:r,context:n,onAddCost:i,onMetaGenerated:a})=>{let[o,l]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[u,p]=(0,s.useState)(""),[h,m]=(0,s.useState)(!1),f=(0,s.useCallback)(async()=>{m(!0);try{let s=(t?.getPlainText?t.getPlainText():e.current?.innerText||"").slice(0,1e3),u=[];if(n.keyPoints.length>0&&u.push(`Key Points: ${n.keyPoints.slice(0,6).join("; ")} `),n.brandExclusivePoints.length>0&&u.push(`Brand USPs: ${n.brandExclusivePoints.slice(0,4).join("; ")} `),(n.productBrief?.brandName||n.productBrief?.productName)&&u.push(`Brand: ${n.productBrief?.brandName||""} Product: ${n.productBrief?.productName||""} USP: ${n.productBrief?.usp||""} `),n.visualStyle&&u.push(`Visual Style: ${n.visualStyle} `),n.outlineSections&&n.outlineSections.length>0){let e=n.outlineSections.slice(0,8).join(" > ");u.push(`Outline: ${e} `)}let h=(({targetAudience:e,contextLines:t,articlePreview:r})=>`
    You are an SEO expert.Generate meta Title, Description, and URL slug for the article.

    <TargetAudience>
    ${e}
    </TargetAudience>
    DEFINITION: Region/Language target.
    ACTION: Optimize for this audience's search habits.

    <Context>
    ${t.join("\n")}
    </Context>
    DEFINITION: Article content highlights.
    ACTION: Base the meta tags on this content.

    <ArticlePreview>
    ${r}
    </ArticlePreview>
    DEFINITION: Snippet of the actual article.
    ACTION: Ensure accuracy to the written text.

    Output JSON:
    { "title": "...", "description": "...", "slug": "..." }
`)({targetAudience:r,contextLines:u,articlePreview:s}),m=await $o(h,r,{responseMimeType:"application/json",responseSchema:{type:K,properties:{title:{type:J},description:{type:J},slug:{type:J}}},generationConfig:{response_mime_type:"application/json"}}),f=JSON.parse(m.data||"{}"),g=f.title||o||"",y=f.description||d||"",x=f.slug||o.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")||"";l(g),c(y),p(x),a?.({title:g,description:y,slug:x}),i?.(m.cost,m.usage)}catch(e){console.error("Meta generation failed",e),alert("Failed to generate meta info. Please try again.")}finally{m(!1)}},[n.brandExclusivePoints,n.keyPoints,n.productBrief,n.visualStyle,n.outlineSections,e,i,a,r]);return{metaTitle:o,metaDescription:d,urlSlug:u,setMetaTitle:l,setMetaDescription:c,setUrlSlug:p,isMetaLoading:h,generateMeta:f}})({editorRef:P,tiptapApi:Q,targetAudience:es,context:{keyPoints:et,brandExclusivePoints:er,productBrief:eo||void 0,visualStyle:ea,outlineSections:el},onAddCost:u}),ew=(0,s.useCallback)(e=>{let t=(e.match(/[\u4e00-\u9fa5]/g)||[]).length,r=e.replace(/[\u4e00-\u9fa5]/g," ").trim().split(/\s+/).filter(Boolean);N(e.length),S(t+r.length)},[]),eN=(0,s.useCallback)(()=>{if(!Q)return;Z(Q.summarizeFormatting?Q.summarizeFormatting():{boldMarks:0,blockquotes:0,quoteChars:0,blocks:[]});let e=Q.listCleanupTargets?Q.listCleanupTargets():[];V(e),W(new Set(e.map((e,t)=>`${e.from}-${e.to}-${t}`)))},[Q]),e$=(0,s.useCallback)(()=>{Q&&(eN(),U(!0))},[eN,Q]),eS=(0,s.useCallback)(()=>{if(!Q)return;let e=B.map((e,t)=>({...e,id:`${e.from}-${e.to}-${t}`})).filter(e=>H.has(e.id)).sort((e,t)=>t.from-e.from);if(0===e.length)return void U(!1);e.forEach(e=>{Q.clearBold?.({removeBold:!0,removeBlockquotes:!0,removeQuotes:!0,scope:{from:e.from,to:e.to}})});let r=Q.getPlainText(),n=Q.getHtml();k(n),t?.(n),b?.setContent?.(n),ew(r),ed(n),U(!1)},[B,b,t,ed,H,Q,ew]),ej=(0,s.useCallback)(()=>{if(Y||!Q)return;let e=(Q.getPlainText?Q.getPlainText():"")||"";if(!e.trim())return;let t=e.toLowerCase(),r=[...er,...et].filter(Boolean).filter(e=>t.includes(e.toLowerCase()));0!==r.length&&(eh(e=>{let t=new Set(e);return r.forEach(e=>t.add(e)),Array.from(t)}),X(!0))},[er,et,Y,eh,Q]),eT=(0,s.useCallback)(async e=>{if(!Q)return void alert("Editor not ready.");G(e),E(!0);try{let r=Q.getHtml(),n=await $l(r,e,es),{originalSnippet:i,newSnippet:s}=n.data||{};if(i&&s){let a=r;if(r.includes(i))a=r.replace(i,s);else{let t=`
                        <div style="border-left: 4px solid #8b5cf6; padding-left: 12px; margin: 16px 0; background: #f5f3ff; padding: 12px; border-radius: 4px;">
                            <p style="font-size: 10px; color: #8b5cf6; font-weight: bold; margin: 0 0 4px 0;">âœ¨ REFINED WITH: ${e}</p>
                            ${s}
                        </div>
                    `;a=r+t}Q.setHtml(a);let o=Q.getPlainText();k(a),t?.(a),b?.setContent?.(a),ew(o),ed(a),u&&u(n.cost,n.usage),(d||b?.onTogglePoint)?.(e)}else alert("AI ç„¡æ³•æ‰¾åˆ°é©åˆçš„æ®µè½æ’å…¥æ­¤é‡é»žã€‚")}catch(e){console.error("Refine failed",e),alert("Refinement failed.")}finally{G(null),E(!1)}},[b,es,u,t,d,ed,Q,ew]),{showImageModal:e_,setShowImageModal:eI,imagePrompt:eC,setImagePrompt:eA,isImageLoading:eO,isDownloadingImages:eE,imagePlans:eM,isPlanning:ez,isBatchProcessing:eP,generateImageFromPrompt:eD,downloadImages:eR,openImageModal:eL,autoPlanImages:eU,updatePlanPrompt:eF,injectImageIntoEditor:eZ,generateSinglePlan:eB,handleBatchProcess:eV}=(({editorRef:e,tiptapApi:t,imageContainerRef:r,targetAudience:n,visualStyle:i,scrapedImages:a,onAddCost:o,handleInput:l,saveSelection:d,restoreSelection:c})=>{let[u,p]=(0,s.useState)(!1),[h,m]=(0,s.useState)(""),[f,g]=(0,s.useState)(!1),[y,x]=(0,s.useState)(!1),[b,v]=(0,s.useState)([]),[k,w]=(0,s.useState)(!1),[N,$]=(0,s.useState)(!1),S=(0,s.useCallback)(async()=>{d(),p(!0),g(!0),m("Analyzing context...");let r="";if(t?.getPlainText)r=t.getPlainText().substring(0,200);else if(e.current){let t=e.current.innerText,n=window.getSelection();if(n&&n.rangeCount>0){let i=n.getRangeAt(0),s=i.cloneRange();s.selectNodeContents(e.current),s.setEnd(i.startContainer,i.startOffset);let a=s.toString().length,o=Math.max(0,a-100),l=Math.min(t.length,a+100);r=t.substring(o,l)}else r=t.substring(0,200)}try{let e=await $r(r,n,i||"");m(e.data),o?.(e.cost,e.usage)}catch(e){m("Create a realistic image relevant to this article.")}finally{g(!1)}},[e,o,d,n,i]),j=(0,s.useCallback)(async r=>{if(r){g(!0);try{let n=await $n(r);if(n.data){let i=`<img src="${n.data}" alt="${r}" style="max-width: 100%; height: auto; border-radius: 8px; margin: 20px 0;" /><br/>`;t?t.insertImage(n.data,r):(c(),document.execCommand("insertHTML",!1,i),e.current&&l({currentTarget:e.current})),o?.(n.cost,n.usage),p(!1)}else alert("Image generation returned no data.")}catch(e){console.error("Image generation error",e),alert("Failed to generate image.")}finally{g(!1)}}},[e,l,o,c]),T=(0,s.useCallback)(async()=>{let t=(r?.current||e.current||document.body).querySelectorAll("img");if(0===t.length)return void alert("No images found in the editor to download.");if(!confirm(`Found ${t.length} images in the article. Download them now?`))return;x(!0);let n=document.createElement("a");n.style.display="none",document.body.appendChild(n);try{for(let e=0;e<t.length;e++){let r=t[e].src,i=r.includes("image/jpeg")?"jpg":"png",s=`article-image-${Date.now()}-${e+1}.${i}`;if(r.startsWith("data:"))n.href=r,n.download=s,n.click();else try{let e=await fetch(r),t=await e.blob(),i=URL.createObjectURL(t);n.href=i,n.download=s,n.click(),URL.revokeObjectURL(i)}catch(e){console.warn(`Failed to download ${r}, opening in new tab instead.`),window.open(r,"_blank")}await new Promise(e=>setTimeout(e,200))}}catch(e){console.error("Download failed",e),alert("Some images could not be downloaded.")}finally{document.body.removeChild(n),x(!1)}},[e]),_=(0,s.useCallback)((e,t)=>{v(r=>r.map(r=>r.id===e?{...r,generatedPrompt:t}:r))},[]),I=(0,s.useCallback)((r,n="auto")=>{if(!r.url)return;let i=`<img src="${r.url}" alt="${r.generatedPrompt}" style="max-width: 100%; height: auto; border-radius: 8px; margin: 24px 0; display: block; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);" />`,s=r.insertAfter?.trim()||"",a=(e,t)=>{let r=r=>!!r&&!!e.includes(r)&&(t(e.replace(r,`${r}<br/>${i}`)),!0);if(r(s))return!0;for(let e of s.split(/[ï¼Œ,ã€‚.\n\t\sã€ï¼š:]+/).filter(e=>e.length>=4).sort((e,t)=>t.length-e.length))if(r(e))return!0;return!1};if(t){let e=()=>t.insertImage(r.url,r.generatedPrompt);return"cursor"!==n&&s&&t.getHtml&&t.setHtml?void(a(t.getHtml(),e=>t.setHtml(e))||e()):void e()}if(e.current){if("cursor"===n){c(),document.execCommand("insertHTML",!1,i),l({currentTarget:e.current});return}a(e.current.innerHTML,t=>{e.current.innerHTML=t,l({currentTarget:e.current})})||alert(`Could not find anchor: "...${s.substring(0,15)}...". 

Please place your cursor in the text and click the "Cursor" button to insert manually.`)}},[e,l,c,t]),C=(0,s.useCallback)(async e=>{if("generating"!==e.status){v(t=>t.map(t=>t.id===e.id?{...t,status:"generating"}:t));try{let t=await $n(e.generatedPrompt);if(t.data){let r={...e,status:"done",url:t.data||void 0};v(t=>t.map(t=>t.id===e.id?r:t)),o?.(t.cost,t.usage)}else v(t=>t.map(t=>t.id===e.id?{...t,status:"error"}:t))}catch(t){console.error("Single generation failed",t),v(t=>t.map(t=>t.id===e.id?{...t,status:"error"}:t))}}},[o]),A=(0,s.useCallback)(async()=>{if(N)return;$(!0);let e=b.filter(e=>"done"!==e.status).map(e=>C(e));await Promise.all(e),$(!1)},[C,b,N]),O=(0,s.useCallback)(async()=>{if(!k){w(!0);try{let r=t?.getPlainText?t.getPlainText():e.current?.innerText||"",s=await $i(r,a,n,i||"");v(s.data),o?.(s.cost,s.usage)}catch(e){console.error("Auto-plan failed",e),alert("Failed to plan images.")}finally{w(!1)}}},[e,o,a,n,i,k]);return{showImageModal:u,setShowImageModal:p,imagePrompt:h,setImagePrompt:m,isImageLoading:f,isDownloadingImages:y,imagePlans:b,isPlanning:k,isBatchProcessing:N,openImageModal:S,generateImageFromPrompt:j,downloadImages:T,autoPlanImages:O,updatePlanPrompt:_,injectImageIntoEditor:I,generateSinglePlan:C,handleBatchProcess:A}})({editorRef:P,tiptapApi:Q,imageContainerRef:P,targetAudience:es,visualStyle:ea,scrapedImages:ei,onAddCost:u,handleInput:()=>{let e=Q?.getPlainText?Q.getPlainText():P.current?.innerText||"",r=Q?.getHtml?Q.getHtml():P.current?.innerHTML||"";t?.(r),b?.setContent?.(r),ew(e),ed(r)},saveSelection:()=>null,restoreSelection:()=>{}}),{runAskAiAction:eH,handleAskAiInsert:eW,clearAskAiState:eK,lockAskAiRange:eq,highlightAskAiTarget:eJ}=(({tiptapApi:e,targetAudience:t,onAddCost:r,setIsAiLoading:n,updateCountsFromText:i,onChange:a})=>{let o=(0,s.useRef)({}),l=(0,s.useRef)(null),d=(0,s.useRef)(null),c=(0,s.useRef)(0),u=(0,s.useCallback)(()=>{d.current=null},[e]),p=(0,s.useCallback)((e,r)=>{let n=z(t);if("format"===e.mode){let t="";switch(e.preset){case"bullet":t="Convert to a bullet list.";break;case"ordered":t="Convert to an ordered (numbered) list.";break;case"table-2":t="Present as a 2-column table (Header + Row values).";break;case"table-3":t="Present as a 3-column table (Header + Row values).";break;case"checklist":t="Convert to a checklist with unchecked boxes.";break;case"quote":t="Wrap as a highlighted quote block.";break;case"markdown-clean":t="Clean up Markdown/HTML, fix nesting, and keep structure minimal.";break;default:t="Reformat cleanly."}return`TARGET CONTENT: """${r}"""
TASK: ${t} Return ONLY the formatted HTML/Markdown.

${n}`}let i=(()=>{switch(e.preset){case"rephrase":return"Rephrase for clarity while keeping meaning. Ensure the tone is natural and professional.";case"shorten":return"CRITICAL: Condense the text by 30-50%. Remove all fluff, redundancy, and filler words. Keep ONLY the core message.";case"elaborate":return"Expand with 1-2 concise sentences to add clarity.";case"formal":return"Rewrite in a more formal tone.";case"casual":return"Rewrite in a friendlier, more casual tone.";case"bulletise":return"Convert into concise bullet points.";case"summarise":return"Summarise into a brief paragraph or 2 bullets.";default:return e.prompt||"Improve the text with better flow."}})();return`TARGET TEXT: """${r}"""
INSTRUCTION: ${i}${e.prompt?`
CUSTOM PROMPT: ${e.prompt}`:""}

${n}

TASK: Return ONLY the rewritten result in HTML/Markdown.`},[t]),h=(0,s.useCallback)(t=>{if(!e)return null;let r=e.getSelectionRange?.()||null;return r&&(l.current=r,t&&(o.current[t]=r,e.markAskAiRange?.(r,t))),r},[e]);return{runAskAiAction:(0,s.useCallback)(async i=>{if(!e)throw alert("Editor not ready."),Error("Editor not ready");let s=(i.taskId?e.findAskAiRange?.(i.taskId):null)||(i.taskId?o.current[i.taskId]:null)||l.current||e.getSelectionRange?.()||null;d.current=i.mode,s&&(l.current=s,i.taskId&&(o.current[i.taskId]=s));let a=(i.selectedText||e.getSelectedText?.()||"").trim();if(!a)throw alert("è«‹å…ˆé¸å–è¦èª¿æ•´çš„æ–‡å­—ã€‚"),Error("No selection");s&&i.taskId&&e.markAskAiRange?.(s,i.taskId);let u=p(i,a);c.current+=1,n(!0);try{let e=await $o(u,t),n=pe.parse(e.data||"",{async:!1});return r?.(e.cost,e.usage),n}catch(e){throw console.error("AI Edit failed",e),alert("Failed to generate content. Please try again."),e}finally{c.current=Math.max(0,c.current-1),n(c.current>0)}},[p,r,n,t,e]),handleAskAiInsert:(0,s.useCallback)((t,r)=>{if(!e)return;let n=(r?e.findAskAiRange?.(r):null)||(r?o.current[r]:null)||l.current||e.getSelectionRange?.();d.current,n?e.replaceRange(n,t):e.insertHtml(t),r&&(delete o.current[r],e.clearAskAiMarks?.(r)),u(),i(e.getPlainText()),a?.(e.getHtml())},[u,a,e,i]),clearAskAiState:u,lockAskAiRange:h,highlightAskAiTarget:t=>{let r=e?.findAskAiRange?.(t);r&&e?.markAskAiRange?.(r,t)}}})({tiptapApi:Q,targetAudience:es,onAddCost:u,setIsAiLoading:E,updateCountsFromText:e=>ew(e),onChange:e=>{k(e),t?.(e),b?.setContent?.(e),ed(e)}}),eG=(0,s.useMemo)(()=>Array.from(new Set(en)).length,[en]),eY=et.length+er.length,eX=(0,s.useMemo)(()=>`${e}||${et.join("||")}||${er.join("||")}`,[e,er,et]);return(0,s.useEffect)(()=>{if(!Q||R.current)return;let e=eu();e&&e.html&&(k(e.html),Q.setHtml(e.html),ew(Q.getPlainText()),e.metaTitle&&ey(e.metaTitle),e.metaDescription&&ex(e.metaDescription),e.urlSlug&&eb(e.urlSlug),e.articleTitle&&(f?.(e.articleTitle),b?.setArticleTitle?.(e.articleTitle))),R.current=!0},[eu,b,f,Q,ew,ey,ex,eb]),(0,s.useEffect)(()=>{ec({metaTitle:em,metaDescription:ef,urlSlug:eg,articleTitle:m||b?.articleTitle||""})},[m,b?.articleTitle,ef,em,ec,eg]),(0,s.useEffect)(()=>{X(!1)},[eX]),(0,i.jsxs)("div",{className:"rte-container flex flex-col h-full w-full min-h-0 bg-white overflow-hidden relative",children:[(0,i.jsxs)("div",{className:"rte-header flex flex-col gap-3 px-4 py-3 border-b border-gray-200 bg-white",children:[(0,i.jsx)("div",{className:"mb-1",children:(0,i.jsx)("input",{value:m||b?.articleTitle||"",onChange:e=>{f?.(e.target.value),b?.setArticleTitle?.(e.target.value)},className:"w-full text-2xl font-bold text-gray-800 placeholder-gray-300 border-none focus:ring-0 focus:outline-none bg-transparent px-0 py-1",placeholder:"Article Title..."})}),(0,i.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,i.jsxs)("div",{className:"flex-1 min-w-[240px] flex items-center gap-2 bg-gray-100 rounded-full px-4 py-1.5 border border-transparent focus-within:border-blue-300 focus-within:bg-white focus-within:ring-2 focus-within:ring-blue-100 transition-all",children:[(0,i.jsxs)("span",{className:"text-gray-400 flex items-center gap-1 select-none",children:[(0,i.jsx)("span",{className:"text-xs",children:"ðŸ”—"}),(0,i.jsx)("span",{className:"text-xs font-medium",children:"/"})]}),(0,i.jsx)("input",{value:eg,onChange:e=>eb(e.target.value),className:"flex-1 bg-transparent border-none focus:outline-none text-xs font-mono text-gray-600 placeholder-gray-400",placeholder:"url-slug-goes-here"})]}),x&&(0,i.jsx)("div",{className:"flex items-center gap-2 ml-auto",children:x})]})]}),(0,i.jsx)("div",{className:"rte-toolbar-wrapper",children:(0,i.jsx)(NL,{onCommand:(e,t)=>{if(Q)switch(e){case"bold":return Q.toggleBold();case"italic":return Q.toggleItalic();case"underline":return Q.toggleUnderline?.();case"blockquote":return Q.toggleBlockquote();case"insertUnorderedList":return Q.toggleBulletList();case"insertOrderedList":return Q.toggleOrderedList();case"alignLeft":return Q.setTextAlign?.("left");case"alignCenter":return Q.setTextAlign?.("center");case"alignRight":return Q.setTextAlign?.("right");case"formatBlock":if("<h2>"===t)return Q.toggleHeading(2);if("<h3>"===t)return Q.toggleHeading(3);if("<blockquote>"===t)return Q.toggleBlockquote();return Q.toggleHeading(1);case"undo":return Q.undo();case"redo":return Q.redo();case"link":{let e=window.prompt("Enter URL");e&&Q.setLink(e);return}case"unlink":return Q.unsetLink();default:return}},onRemoveBold:e$,onOpenImageModal:eL,onDownloadAllImages:eR,isDownloadingImages:eE,onToggleKeyPoints:()=>{j||ej(),T(!j),I(!1)},showKeyPoints:j,hasKeyPoints:eY>0,onToggleVisualAssets:()=>{I(!_),T(!1)},showVisualAssets:_,onRebrand:()=>{},isRebranding:!1,productName:eo?.productName,onToggleMetaPanel:()=>A(e=>!e),showMetaPanel:C,onUndo:()=>Q?.undo(),onRedo:()=>Q?.redo(),askAiBadgeSlotRef:D})}),(0,i.jsxs)("div",{className:"rte-workspace flex-1 flex flex-row min-h-0 overflow-hidden relative",children:[(0,i.jsxs)("div",{className:"rte-editor-column flex-1 flex flex-col min-h-0 relative group",children:[(0,i.jsx)("div",{className:"rte-scroll-area flex-1 min-h-0 overflow-y-auto",children:(0,i.jsx)("div",{className:"rte-content-wrapper px-6 pb-6 pt-8 min-h-full flex flex-col cursor-text",onClick:e=>{Q&&Q.focus()},children:(0,i.jsx)(Ng,{initialHtml:v,onChange:(e,r)=>{k(e),t?.(e),b?.setContent?.(e),ew(r),ed(e)},onReady:e=>{ee(e),ew(e.getPlainText?e.getPlainText():""),ed(e.getHtml())},containerRef:P,className:"min-h-[420px]",placeholder:"",contentClassName:"prose-lg max-w-none px-0 pb-6 [&>*:first-child]:mt-0",contentStyle:(0,s.useMemo)(()=>({fontSize:`${100*M}%`,lineHeight:"1.6"}),[M])})})}),(0,i.jsx)(N2,{onRunAction:eH,onInsert:(e,t)=>{eW(e,t)},onLockSelectionRange:e=>eq(e),onHighlightTask:e=>{eJ(e)},badgeContainerRef:D}),L&&(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:(0,i.jsxs)("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl border border-gray-200 p-5 space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"æ¸…ç†ç²—é«”èˆ‡å¼•è™Ÿ"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"å‹¾é¸éœ€è¦æ¸…ç†çš„æ®µè½ï¼Œæœƒç§»é™¤ç²—é«”ã€å¼•ç”¨å€å¡Šèˆ‡å¼•è™Ÿã€‚"})]}),(0,i.jsx)("button",{onClick:()=>U(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close cleanup modal",children:(0,i.jsx)(po,{className:"w-4 h-4"})})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"text-xs text-gray-600 bg-gray-50 border border-gray-100 rounded-md p-3 leading-relaxed",children:["å‹¾é¸è¦æ¸…ç†çš„æ®µè½å³å¯ï¼Œç³»çµ±æœƒåŒæ™‚æ¸…é™¤ç²—é«”ã€å¼•ç”¨å€å¡Šèˆ‡å¼•è™Ÿå­—å…ƒã€‚æŽƒæçµæžœï¼šç²—é«” ",F.boldMarks,"ã€å¼•ç”¨ ",F.blockquotes,"ã€å¼•è™Ÿ ",F.quoteChars,"ã€‚"]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("div",{className:"text-xs font-semibold text-gray-700",children:"é¸æ“‡è¦æ¸…ç†çš„æ®µè½"}),(0,i.jsxs)("div",{className:"max-h-48 overflow-y-auto custom-scrollbar space-y-1",children:[B.map((e,t)=>{let r=`${e.from}-${e.to}-${t}`,n=H.has(r);return(0,i.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border border-gray-100 hover:border-gray-200 transition-colors",children:[(0,i.jsx)("input",{type:"checkbox",checked:n,onChange:e=>{W(t=>{let n=new Set(t);return e.target.checked?n.add(r):n.delete(r),n})},className:"mt-1 accent-blue-600"}),(0,i.jsxs)("div",{className:"flex-1 min-w-0 space-y-1",children:[(0,i.jsxs)("div",{className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[(0,i.jsx)("span",{className:"px-2 py-0.5 text-[10px] rounded-full bg-gray-100 text-gray-600 border border-gray-200",children:e.type}),(0,i.jsxs)("span",{className:"text-xs text-gray-500",children:["ç²—é«” ",e.boldMarks," Â· å¼•ç”¨ ",e.blockquotes," Â· å¼•è™Ÿ ",e.quoteChars]})]}),(0,i.jsx)("div",{className:"text-xs text-gray-700 whitespace-pre-wrap break-words leading-relaxed",children:e.text||"ï¼ˆç©ºç™½æ®µè½ï¼‰"})]})]},r)}),0===B.length&&(0,i.jsx)("div",{className:"text-xs text-gray-400 p-2 bg-gray-50 border border-dashed border-gray-200 rounded",children:"æ²’æœ‰æ‰¾åˆ°åŒ…å«ç²—é«”æˆ–å¼•è™Ÿçš„æ®µè½ã€‚"})]})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,i.jsx)("button",{type:"button",onClick:eN,className:"text-blue-600 hover:text-blue-700 font-semibold",children:"é‡æ–°æŽƒæ"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("button",{type:"button",onClick:()=>U(!1),className:"px-3 py-2 rounded-md border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"å–æ¶ˆ"}),(0,i.jsx)("button",{type:"button",onClick:eS,className:"px-3 py-2 rounded-md text-white font-semibold transition-colors bg-blue-600 hover:bg-blue-700",children:"å¥—ç”¨æ¸…ç†"})]})]})]})}),C&&(0,i.jsx)(Nq,{metaTitle:em,metaDescription:ef,urlSlug:eg,isMetaLoading:ev,onGenerateMeta:ek,onClose:()=>A(!1),onMetaTitleChange:ey,onMetaDescriptionChange:ex,onUrlSlugChange:eb}),(0,i.jsx)(NJ,{show:e_,imagePrompt:eC,onPromptChange:eA,onSubmit:()=>eD(eC),isLoading:eO,onClose:()=>eI(!1)})]}),j&&(0,i.jsx)(NF,{brandExclusivePoints:er,keyPoints:et,checkedPoints:en,refiningPoint:q,onTogglePoint:d||b?.onTogglePoint,onRefinePoint:eT,useTiptap:!0,isTiptapReady:!!Q,uniqueCoveredCount:eG,totalPoints:eY,targetAudience:es}),_&&(0,i.jsx)(NK,{scrapedImages:ei,onToggleImage:y||b?.onRemoveScrapedImage||(()=>{}),imagePlans:eM,isPlanning:ez,isBatchProcessing:eP,onBatchProcess:eV,onAutoPlan:eU,onGenerateSinglePlan:eB,onUpdatePlanPrompt:eF,onInjectImage:eZ,useTiptap:!0,isTiptapReady:!!Q})]}),O&&(0,i.jsx)("div",{className:"pointer-events-none fixed bottom-4 right-4 z-40",children:(0,i.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/90 border border-gray-200 rounded-lg shadow-sm text-sm text-gray-700",children:[(0,i.jsx)(ep,{className:"w-4 h-4 animate-spin text-blue-600"}),(0,i.jsx)("span",{children:"AI is working..."})]})}),(0,i.jsxs)("div",{className:"rte-footer px-4 py-2 bg-gray-50/95 backdrop-blur border-t border-gray-200 text-[10px] text-gray-500 font-mono flex items-center justify-end gap-4 select-none sticky bottom-0 z-10",children:[(0,i.jsxs)("span",{children:[$," words"]}),(0,i.jsxs)("span",{children:[w," chars"]})]})]})},$m=c("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),$f=({isOpen:e,content:t,step:r})=>{let n=(0,s.useRef)(null);if((0,s.useEffect)(()=>{n.current&&(n.current.scrollTop=n.current.scrollHeight)},[t]),!e)return null;let a="refining_headings"===r;return(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:(0,i.jsxs)("div",{className:"bg-white w-full max-w-4xl h-[80vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-gray-200 animate-in fade-in zoom-in-95 duration-300",children:[(0,i.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/80 flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${a?"bg-purple-100":"bg-blue-100"}`,children:a?(0,i.jsx)(em,{className:"w-5 h-5 text-purple-600 animate-pulse"}):(0,i.jsx)(ep,{className:"w-5 h-5 text-blue-600 animate-spin"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:(e=>{switch(e){case"writing_content":return"AI æ­£åœ¨æ’°å¯«æ–‡ç« ...";case"refining_headings":return"æ­£åœ¨å„ªåŒ–æ¨™é¡Œ (H2/H3 Swap)...";case"localizing_hk":return"æ­£åœ¨å¥—ç”¨é¦™æ¸¯å¸‚å ´ç”¨èªž...";case"finalizing":return"æ­£åœ¨å®Œæˆæœ€å¾Œä¿®é£¾...";default:return"AI æ­£åœ¨æ€è€ƒ..."}})(r)}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"è«‹ç¨å€™ï¼Œæ–‡ç« ç”Ÿæˆä¸­..."})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs font-medium text-gray-400",children:[(0,i.jsxs)("span",{className:`flex items-center gap-1 ${"writing_content"===r?"text-blue-600":"text-gray-600"}`,children:[(0,i.jsx)(eg,{className:"w-3 h-3"})," æ’°å¯«"]}),(0,i.jsx)("span",{className:"w-4 h-px bg-gray-300"}),(0,i.jsxs)("span",{className:`flex items-center gap-1 ${"refining_headings"===r?"text-purple-600":"finalizing"===r?"text-green-600":""}`,children:[(0,i.jsx)(em,{className:"w-3 h-3"})," å„ªåŒ–"]}),(0,i.jsx)("span",{className:"w-4 h-px bg-gray-300"}),(0,i.jsxs)("span",{className:`flex items-center gap-1 ${"finalizing"===r?"text-green-600":""}`,children:[(0,i.jsx)($m,{className:"w-3 h-3"})," å®Œæˆ"]})]})]}),(0,i.jsx)("div",{className:"flex-1 overflow-hidden relative bg-white",children:(0,i.jsx)("div",{ref:n,className:"absolute inset-0 overflow-y-auto p-8 custom-scrollbar scroll-smooth",children:(0,i.jsxs)("div",{className:"prose prose-lg max-w-none prose-headings:font-bold prose-h1:text-3xl prose-h2:text-2xl prose-p:text-gray-600 prose-p:leading-relaxed",children:[(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:pe.parse(t||"")}}),(0,i.jsx)("span",{className:"inline-block w-2 h-5 bg-blue-500 ml-1 animate-pulse align-middle"})]})})}),(0,i.jsx)("div",{className:"px-6 py-3 border-t border-gray-100 bg-gray-50 text-center text-xs text-gray-400",children:"AI ç”Ÿæˆå…§å®¹åƒ…ä¾›åƒè€ƒï¼Œè«‹å‹™å¿…äººå·¥å¯©é–±ã€‚"})]})})},$g=({onApply:e,onSkip:t})=>{let{pendingGroundingResult:r,showGroundingModal:n,setShowGroundingModal:a,toggleGroundingIssueSelection:o}=$c(),l=r?.issues||[],d=r?.regionLabel||"ç›®æ¨™åœ°å€",c=(0,s.useMemo)(()=>l.filter(e=>e.selected).length,[l]),u=()=>{t(),a(!1)};return n&&r&&0!==l.length?(0,i.jsxs)("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:u}),(0,i.jsxs)("div",{className:"relative bg-white w-full max-w-2xl max-h-[80vh] rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-amber-50/80 to-white flex items-center justify-between gap-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 rounded-xl bg-amber-600 text-white flex items-center justify-center shadow-lg shadow-amber-200",children:(0,i.jsx)(ei,{className:"w-5 h-5"})}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("h3",{className:"text-lg font-bold text-gray-900 leading-tight",children:[d,"å¸‚å ´æœ¬åœ°åŒ–ç¢ºèª"]}),(0,i.jsxs)("p",{className:"text-xs text-gray-500",children:["åµæ¸¬åˆ° ",l.length," å€‹éž",d,"å¯¦é«”ï¼Œè«‹é¸æ“‡è¦æ›¿æ›çš„é …ç›®"]})]})]}),(0,i.jsx)("button",{onClick:u,className:"p-2 rounded-lg hover:bg-gray-100 text-gray-500","aria-label":"Close modal",children:(0,i.jsx)(po,{className:"w-5 h-5"})})]}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsxs)("span",{className:"text-xs text-gray-500",children:["å·²é¸æ“‡ ",c," / ",l.length," é …"]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{onClick:()=>{l.forEach((e,t)=>{l[t].selected||o(t)})},className:"text-xs text-blue-600 hover:underline",children:"å…¨é¸"}),(0,i.jsx)("button",{onClick:()=>{l.forEach((e,t)=>{l[t].selected&&o(t)})},className:"text-xs text-gray-500 hover:underline",children:"å–æ¶ˆå…¨é¸"})]})]}),l.map((e,t)=>(0,i.jsx)("div",{className:`p-4 rounded-xl border transition-all cursor-pointer ${e.selected?"border-amber-200 bg-amber-50/60 shadow-sm":"border-gray-100 bg-white hover:border-gray-200"}`,onClick:()=>o(t),children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsx)("input",{type:"checkbox",checked:e.selected,onChange:()=>o(t),onClick:e=>e.stopPropagation(),className:"mt-1 h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500"}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,i.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-600 uppercase",children:e.type}),(0,i.jsxs)("span",{className:"text-xs text-gray-400",children:["ä¿¡å¿ƒåº¦: ",Math.round(100*e.confidence),"%"]})]}),(0,i.jsxs)("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[(0,i.jsx)("span",{className:"text-sm font-medium text-rose-700 line-through",children:e.original}),(0,i.jsx)(NH,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),(0,i.jsx)("span",{className:"text-sm font-semibold text-emerald-700",children:e.regionEquivalent})]}),e.context&&(0,i.jsx)("p",{className:"mt-1 text-xs text-gray-500 leading-relaxed",children:e.context})]})]})},t))]}),(0,i.jsxs)("div",{className:"px-6 py-4 border-t border-gray-100 bg-gray-50/70 flex items-center justify-between gap-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,i.jsx)(et,{className:"w-4 h-4 text-amber-500"}),"æœªé¸æ“‡çš„é …ç›®å°‡ä¿ç•™åŽŸæ–‡"]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("button",{onClick:u,className:"px-4 py-2 text-sm font-semibold text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition",children:"è·³éŽ (ä¿ç•™åŽŸæ–‡)"}),(0,i.jsxs)("button",{onClick:()=>{e(l.filter(e=>e.selected).map(e=>({original:e.original,regionEquivalent:e.regionEquivalent}))),a(!1)},disabled:0===c,className:"px-4 py-2 text-sm font-semibold text-white bg-gradient-to-r from-amber-600 to-orange-600 rounded-lg shadow-sm hover:brightness-110 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,i.jsx)($m,{className:"w-4 h-4"}),"å¥—ç”¨ ",c," é …æ›¿æ›"]})]})]})]})]}):null},$y=c("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),$x=new class{listeners=[];subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}log(e,t,r,n){let i={stage:e,msg:t,meta:r,duration:n},s=n?` (${n}ms)`:"",a=r?` ${JSON.stringify(r)}`:"";console.log(`[${e}] ${t}${s}${a}`),this.listeners.forEach(e=>e(i))}warn(e,t,r){console.warn(`[${e}] ${t}`,r),this.listeners.forEach(n=>n({stage:e,msg:`WARNING: ${t}`,meta:{error:r}}))}error(e,t,r){console.error(`[${e}] ${t}`,r),this.listeners.forEach(n=>n({stage:e,msg:`ERROR: ${t}`,meta:{error:r}}))}},$b=e=>(e||"").replace(/^#+\s*/,"").replace(/\*\*/g,"").replace(/["â€œâ€]/g,"").trim(),$v=e=>{let t=Array.isArray(e)?e.filter(e=>e&&(e.h3_before||e.h3_after||e.before||e.after)).map(e=>{let t=$b(e.h3_before||e.before||""),r=$b("string"==typeof e.h3_after?e.h3_after:e.after||t)||t,n="string"==typeof e.h3_reason?e.h3_reason:"string"==typeof e.reason?e.reason:"";return{h3_before:t,h3_after:r,...n?{h3_reason:n}:{}}}):[];return t.length?t:void 0},$k=e=>{if(!Array.isArray(e))return[];let t=new Set,r=[];return e.forEach(e=>{let n=$b("string"==typeof e?e:e?.text);if(!n)return;let i=n.toLowerCase();if(t.has(i))return;t.add(i);let s="string"==typeof e?.reason?e.reason.trim():"";r.push({text:n,...s?{reason:s}:{}})}),r},$w=async(e,t,r)=>{let n=Date.now(),i=z(r),s=(e,t)=>({inputTokens:(e.inputTokens||0)+(t.inputTokens||0),outputTokens:(e.outputTokens||0)+(t.outputTokens||0),totalTokens:(e.totalTokens||0)+(t.totalTokens||0)}),a=(e,t)=>({inputCost:(e.inputCost||0)+(t.inputCost||0),outputCost:(e.outputCost||0)+(t.outputCost||0),totalCost:(e.totalCost||0)+(t.totalCost||0)}),o=async t=>{let r;$x.log("refining_headings",`Refining ${t.length} headings...`);let s=(({articleTitle:e,headings:t,languageInstruction:r})=>`
    You are cleaning and unifying article section headings.

    <ArticleTitle>
    "${e}"
    </ArticleTitle>
    DEFINITION: The context of the article.
    ACTION: Ensure headings fit this topic.

    <OriginalHeadings>
    ${t.map((e,t)=>`${t+1}. ${e}`).join("\n")}
    </OriginalHeadings>
    DEFINITION: The current raw headings.
    ACTION: Refine these specific headings.

    <LanguageInstruction>
    ${r}
    </LanguageInstruction>
    DEFINITION: Target Language.
    ACTION: Write optimized headings in this language.

    STEP BY STEP:
    1) Clarify role: H2 = main section headline; H3 = supporting subpoint under its H2.
    2) Keep it natural, concise, and engaging.Preserve the original intent / angle.Use everyday, conversational wording(ç”Ÿæ´»åŒ–) instead of stiff or academic phrasing.
    3) Make the H2 clickable: concise(â‰¤ 60 chars).
    4) Rewrite H2 with ** 5 options in this exact order ** (all must differ from h2_before):
    - Option 1(ç¶“å…¸ç‰ˆ): Professional writer version - clear, informative.
    - Option 2(ç·¨è¼¯ç²¾é¸): Editor's pick - concise with strategic keywords.
    - Option 3(å¸ç›ç‰ˆ): Power words + emotional hooks(å¿…å­¸ã€ç§’æ‡‚ã€çˆ†æ¬¾ã€ç¥žç´š).
    - Option 4(ç—›é»žç‰ˆ): Pain - point / FOMO angle - address fears or desires.
    - Option 5(ç”Ÿæ´»åŒ–): Lifestyle / conversational - like friend's advice, slang allowed.
    - H2_after = your single best pick among those 5 options.
    5) ** CRITICAL **: h2_after text MUST demonstrate what h2_reason describes.Example:
    - If reason says "ä½¿ç”¨ç”Ÿæ´»åŒ–æƒ…å¢ƒã€Œä¸‹ç­å›žå®¶ã€", then h2_after MUST contain "ä¸‹ç­å›žå®¶".
    - If reason says "åŠ å…¥æµè¡Œèªžã€ŒUP UPã€", then h2_after MUST contain "UP UP".
    - Each option's text MUST match what its reason describes.
    6) Rewrite / support H3(if any exist or if you invent them):
    - Keep H3 ultra - compact: product / feature name or a 2 - 6 word keyword fragment.
    - Align with the chosen H2_after without repeating it.
    7) Validate: no duplicates, no vague fillers.Reject identical before / after.

      OUTPUT(JSON only):
    {
      "headings": [
        {
          "h2_before": "...",
          "h2_after": "...",
          "h2_reason": "why this angle/keywords",
          "h2_options": [
            { "text": "option 1", "reason": "reasoning" },
            { "text": "option 2", "reason": "reasoning" },
            { "text": "option 3", "reason": "reasoning" }
          ],
          "h3": [
            { "h3_before": "...", "h3_after": "...", "h3_reason": "supporting angle & search phrasing" }
          ]
        }
      ]
    }
    - Array length MUST equal the number of ORIGINAL HEADINGS and keep the same order.
        - Always include every field; set "h3": [] when none.
        - "h2_before" must exactly match the provided heading text.
        - If no H3s were provided, return "h3": [].
        - If a heading is already good, repeat it in "h2_after".
    `)({articleTitle:e,headings:t,languageInstruction:i}),a=await W.runJson(s,"FLASH",{type:K,properties:{headings:{type:q,items:{type:K,properties:{h2_before:{type:J},h2_after:{type:J},h2_reason:{type:J},h2_options:{type:q,items:{type:K,properties:{text:{type:J},reason:{type:J}},required:["text"]}},h3:{type:q,items:{type:K,properties:{h3_before:{type:J},h3_after:{type:J},h3_reason:{type:J}},required:["h3_after"]}}},required:["h2_before","h2_after","h2_options","h3"]}}},required:["headings"]}),o=Array.isArray(a.data?.headings)?a.data.headings:[],l=[],d=[];for(let e=0;e<t.length;e++){let r=t[e]||"",n=$b(r),i=o.find(e=>$b(e?.h2_before)===n||$b(e?.before)===n)||o[e]||{},s=$b(i?.h2_before||i?.before||r)||n,a=$k(i?.h2_options),c="string"==typeof i?.h2_after?i.h2_after:"string"==typeof i?.after?i.after:r,u=$v(Array.isArray(i?.h3)?i.h3:[]),p="string"==typeof i?.h2_reason?i.h2_reason:"string"==typeof i?.reason?i.reason:"",h=l.length;l.push(s);let m=a.map(e=>{let t=l.length;return l.push(e.text),t});d.push({before:n,h2Before:s,options:a,rawAfter:c,h3:u,h2Reason:p,baseIndex:h,optionIndices:m})}let c=[];if(l.length>0)try{$x.log("refining_headings",`Batch embedding ${l.length} texts...`),c=await c5(l)}catch(e){$x.warn("refining_headings","Batch embedding failed",e)}return{data:d.map(e=>{let{before:t,h2Before:r,options:n,rawAfter:i,h3:s,h2Reason:a,baseIndex:o,optionIndices:l}=e,{text:d,optionsWithScores:u,needsManual:p}=((e,t,r,n,i)=>{let s=$b(e),a=$b(r)||s;if(!t.length)return{text:a,optionsWithScores:[],needsManual:!0};let o=t.map((e,t)=>{let r=i[t],s=n&&r?c6(n,r):void 0;return{...e,score:s}}),l=o.filter(e=>e.text&&e.text.toLowerCase()!==s.toLowerCase()).reduce((e,t)=>(t.score??-1)>(e?.score??-1)?t:e,null);if(!l)return{text:a,optionsWithScores:o,needsManual:!0};let d=(l.score??0)>.995||l.text.toLowerCase()===s.toLowerCase();return{text:l.text||a,optionsWithScores:o,needsManual:d}})(r,n,i||t,c[o],l.map(e=>c[e]));return{before:t,after:d||r,h2_before:r,h2_after:d,...a?{h2_reason:a}:{},...u.length?{h2_options:u}:{},...s?{h3:s}:{},...p?{needs_manual:!0}:{}}}),usage:E(a.usage),cost:(r=a.cost,{inputCost:r?.inputCost||0,outputCost:r?.outputCost||0,totalCost:r?.totalCost||0}),duration:Date.now()-n}};if(t.length<=12)return{...await o(t),duration:Date.now()-n};let l=[],d={inputTokens:0,outputTokens:0,totalTokens:0},c={inputCost:0,outputCost:0,totalCost:0};for(let e=0;e<t.length;e+=12){let r=t.slice(e,e+12),n=await o(r);l=l.concat(n.data||[]),d=s(d,n.usage),c=a(c,n.cost)}return{data:l,usage:d,cost:c,duration:Date.now()-n}},$N=({isOpen:e,onClose:t,onApply:r})=>{let{content:n}=$d(),{targetAudience:a,articleTitle:o,headingOptimizations:l,setHeadingOptimizations:d}=$c(),[c,u]=(0,s.useState)(!1),[p,h]=(0,s.useState)({}),[m,f]=(0,s.useState)(0),g=async()=>{u(!0);let e=(e=>{let t=Array.from(new DOMParser().parseFromString(e,"text/html").querySelectorAll("h2")).map(e=>e.textContent?.trim()||"");if(0===t.length){let r=e.match(/^##\s+(.+)$/gm);r&&(t=r.map(e=>e.replace(/^##\s+/,"").trim()))}return t.filter(Boolean)})(n);if(0===e.length){alert("No H2 headings found in the content to optimize."),u(!1);return}try{let t=await $w(o||"Article",e,a);if(t.data){let r=t.data.map((t,r)=>({h2_before:e[r]||t.h2_before,h2_after:t.h2_after,h2_reason:t.h2_reason,h2_options:t.h2_options,h3:t.h3}));d(r);let n={};r.forEach((e,t)=>{n[t]=e.h2_after}),h(n)}}catch(e){console.error("Failed to optimize headings",e),alert("Failed to optimize headings. Please try again.")}finally{u(!1)}};return((0,s.useEffect)(()=>{if(e&&0===l.length&&!c);else if(e&&l.length>0){let e={};l.forEach((t,r)=>{e[r]=p[r]||t.h2_after}),h(e)}},[e]),e)?(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-[2px] p-4 animate-in fade-in duration-200",children:(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-800 w-full max-w-4xl max-h-[85vh] rounded-xl shadow-2xl flex flex-col overflow-hidden border border-gray-200 dark:border-gray-700",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100 dark:border-gray-700 bg-gradient-to-r from-blue-50/50 to-purple-50/50 dark:from-gray-800 dark:to-gray-800",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-lg text-blue-600 dark:text-blue-400",children:(0,i.jsx)(em,{className:"w-5 h-5"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:"Heading Optimizer"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"AI-powered refinement for high-impact H2s"})]})]}),(0,i.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:(0,i.jsx)(po,{className:"w-5 h-5 text-gray-500"})})]}),(0,i.jsx)("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50/50 dark:bg-gray-900/50 custom-scrollbar",children:0!==l.length||c?c?(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center h-64",children:[(0,i.jsx)(ep,{className:"w-8 h-8 text-blue-600 animate-spin mb-4"}),(0,i.jsx)("p",{className:"text-gray-600 font-medium",children:"Analyzing article structure..."}),(0,i.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Generating high-converting headline variations"})]}):(0,i.jsx)("div",{className:"space-y-4",children:l.map((e,t)=>{let r=m===t,n=p[t]!==e.h2_before;return(0,i.jsxs)("div",{className:`bg-white dark:bg-gray-800 rounded-lg border transition-all duration-200 ${r?"border-blue-300 shadow-md ring-1 ring-blue-100":"border-gray-200 hover:border-blue-200"}`,children:[(0,i.jsxs)("div",{className:"flex items-center gap-4 p-4 cursor-pointer",onClick:()=>f(r?null:t),children:[(0,i.jsx)("button",{className:"p-1 text-gray-400 hover:text-gray-600",children:r?(0,i.jsx)(en,{className:"w-4 h-4"}):(0,i.jsx)($y,{className:"w-4 h-4"})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-0.5",children:["Section ",t+1]}),(0,i.jsxs)("div",{className:"font-medium text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[p[t]||e.h2_before,n&&(0,i.jsx)("span",{className:"px-1.5 py-0.5 bg-green-100 text-green-700 text-[10px] rounded border border-green-200 font-bold",children:"UPDATED"})]})]}),!r&&n&&(0,i.jsxs)("div",{className:"text-xs text-gray-400 italic",children:["Original: ",e.h2_before]})]}),r&&(0,i.jsx)("div",{className:"border-t border-gray-100 dark:border-gray-700 p-4 bg-gray-50/50 dark:bg-gray-800/50",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,i.jsxs)("label",{className:`relative flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all ${p[t]===e.h2_before?"bg-white border-gray-400 ring-1 ring-gray-200":"bg-gray-50/50 border-transparent hover:bg-white hover:border-gray-200"}`,onClick:()=>h(r=>({...r,[t]:e.h2_before})),children:[(0,i.jsx)("div",{className:`mt-0.5 w-4 h-4 rounded-full border flex items-center justify-center ${p[t]===e.h2_before?"border-gray-600 bg-gray-600":"border-gray-300 bg-white"}`,children:p[t]===e.h2_before&&(0,i.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-white"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm font-semibold text-gray-700",children:"Original"}),(0,i.jsx)("div",{className:"text-sm text-gray-600 mt-0.5",children:e.h2_before})]})]}),e.h2_options?.map((e,r)=>(0,i.jsxs)("label",{className:`relative flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all ${p[t]===e.text?"bg-blue-50 border-blue-400 ring-1 ring-blue-200":"bg-white border-gray-200 hover:border-blue-300 shadow-sm"}`,onClick:()=>h(r=>({...r,[t]:e.text})),children:[(0,i.jsx)("div",{className:`mt-0.5 w-4 h-4 rounded-full border flex items-center justify-center ${p[t]===e.text?"border-blue-500 bg-blue-500":"border-gray-300 bg-white"}`,children:p[t]===e.text&&(0,i.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-white"})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"text-sm font-semibold text-gray-800",children:e.text}),e.score&&(0,i.jsxs)("span",{className:"text-[10px] font-bold text-blue-600 bg-blue-100 px-1.5 py-0.5 rounded px-1",children:["Score: ",e.score]})]}),e.reason&&(0,i.jsx)("div",{className:"text-xs text-gray-500 mt-1 leading-snug",children:e.reason})]})]},r))]})})]},t)})}):(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mb-4",children:(0,i.jsx)(NY,{className:"w-8 h-8 text-blue-500"})}),(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Ready to Optimize?"}),(0,i.jsx)("p",{className:"text-gray-500 max-w-sm mb-6",children:"We will analyze your article's structure and suggest 5 variations for each H2 heading (Professional, Emotional, Viral, etc.)."}),(0,i.jsxs)("button",{onClick:g,className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm shadow-blue-200 transition-all flex items-center gap-2",children:[(0,i.jsx)(em,{className:"w-4 h-4"}),"Generate Suggestions"]})]})}),(0,i.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex items-center justify-between",children:[(0,i.jsx)("div",{className:"text-sm text-gray-500",children:l.length>0&&(0,i.jsxs)("button",{onClick:g,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-600 hover:text-blue-600 hover:bg-gray-100 rounded-md transition-colors",children:[(0,i.jsx)(NB,{className:"w-3.5 h-3.5"}),"Re-analyze"]})}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,i.jsxs)("button",{onClick:()=>{let e=n;l.forEach((t,r)=>{let n=p[r];if(!n||n===t.h2_before)return;let i=t.h2_before.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=RegExp(`(<h2[^>]*>)\\s*${i}\\s*(<\\/h2>)`,"i");if(s.test(e)){e=e.replace(s,`$1${n}$2`);return}let a=RegExp(`(##\\s+)${i}(\\n|$)`,"i");if(a.test(e)){e=e.replace(a,`$1${n}$2`);return}}),r(e),t()},disabled:0===l.length,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white text-sm font-semibold rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[(0,i.jsx)(pr,{className:"w-4 h-4"}),"Apply Selected Headings"]})]})]})]})}):null},$$=({viewMode:e,onChangeView:t,onCopyHtml:r,onCopyMarkdown:n,onOptimizeHeadings:s,copied:a,variant:o="light"})=>{let l="dark"===o,d=l?"bg-blue-900/40 text-blue-100 border border-blue-500/40":"bg-blue-50 text-blue-700 border border-blue-200 shadow-sm",c=l?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-600 hover:bg-gray-50";return(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,i.jsxs)("div",{className:`flex items-center rounded-md overflow-hidden ${l?"border-gray-700 bg-gray-800 text-gray-200":"border-gray-200 bg-white text-gray-700"}`,children:[(0,i.jsxs)("button",{onClick:()=>t("visual"),className:`flex items-center gap-1 px-3 py-1.5 transition-colors ${"visual"===e?d:c}`,children:[(0,i.jsx)(ps,{className:"w-3.5 h-3.5"}),(0,i.jsx)("span",{className:"font-semibold",children:"Visual Editor"})]}),(0,i.jsxs)("button",{onClick:()=>t("code"),className:`flex items-center gap-1 px-3 py-1.5 transition-colors ${"code"===e?d:c}`,children:[(0,i.jsx)(pi,{className:"w-3.5 h-3.5"}),(0,i.jsx)("span",{className:"font-semibold",children:"HTML Source"})]})]}),(0,i.jsx)("button",{onClick:n,className:`flex items-center gap-1.5 px-3 py-1.5 font-medium rounded-md transition-colors ${l?"bg-amber-900/30 text-amber-200 border border-amber-800 hover:bg-amber-900/50":"bg-amber-50 text-amber-700 border border-amber-200 hover:bg-amber-100"}`,title:"Copy Markdown",children:(0,i.jsx)("span",{children:"Copy MD"})}),(0,i.jsx)("div",{className:"w-px h-5 bg-gray-200 dark:bg-gray-700 mx-1"}),(0,i.jsxs)("button",{onClick:s,className:`flex items-center gap-1.5 px-3 py-1.5 font-medium rounded-md transition-colors border ${l?"bg-indigo-900/20 text-indigo-300 border-indigo-800 hover:bg-indigo-900/40":"bg-indigo-50 text-indigo-700 border-indigo-200 hover:bg-indigo-100"}`,title:"Refine H2/H3 Headings with AI",children:[(0,i.jsx)(em,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"Opt. Headings"})]}),(0,i.jsxs)("button",{onClick:r,className:`flex items-center gap-1 px-3 py-1.5 font-semibold rounded-md transition-colors ${l?"bg-gray-800 border border-gray-700 text-gray-200 hover:bg-gray-700":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,title:"Copy HTML Source",children:[a?(0,i.jsx)(pr,{className:"w-4 h-4 text-green-500"}):(0,i.jsx)(pt,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:a?"text-green-600":"",children:a?"Copied":"HTML"})]})]})},$S=({content:e,status:t,error:r,generationStep:n,keyInformationPoints:a=[],brandExclusivePoints:o=[],coveredPoints:l=[],targetAudience:d="zh-TW",scrapedImages:c=[],visualStyle:u="",onTogglePoint:p,onRemoveScrapedImage:h,onAddCost:m,savedProfiles:f=[],onLoadProfile:g,onRequestUrlMode:y,productBrief:x,displayScale:b=1,articleTitle:v="",onTitleChange:k,outlineSections:w=[]})=>{let[N,$]=(0,s.useState)(!1),[S,j]=(0,s.useState)("visual"),[T,_]=(0,s.useState)(""),[I,C]=(0,s.useState)(!1),{pendingGroundingResult:A,showGroundingModal:O,setPendingGroundingResult:E,setShowGroundingModal:M}=$c(),z=$d(),P="analyzing"===t,D=(0,s.useCallback)(e=>{if(0===e.length)return void E(null);let t=z.content;for(let r of e)if(r.original&&r.regionEquivalent){let e=RegExp(r.original.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");t=t.replace(e,r.regionEquivalent)}z.setContent(t),E(null),console.log(`[RegionGrounding] Applied ${e.length} replacements`)},[z,E]),R=(0,s.useCallback)(()=>{E(null),console.log("[RegionGrounding] User skipped all replacements")},[E]);(0,s.useEffect)(()=>{"analyzing"===t&&_("")},[t]),(0,s.useEffect)(()=>{"completed"===t&&e&&_(pe.parse(e,{async:!1}))},[t,e]);let L=()=>{navigator.clipboard.writeText(T||e),$(!0),setTimeout(()=>$(!1),2e3)},U=()=>{let e=T.replace(/<p[^>]*>/gi,"").replace(/<\/p>/gi,"\n\n").replace(/<br\s*\/?>/gi,"\n").replace(/<div[^>]*>/gi,"").replace(/<\/div>/gi,"\n").replace(/<hr[^>]*>/gi,"\n---\n").replace(/<h1[^>]*>(.*?)<\/h1>/gi,"# $1\n\n").replace(/<h2[^>]*>(.*?)<\/h2>/gi,"## $1\n\n").replace(/<h3[^>]*>(.*?)<\/h3>/gi,"### $1\n\n").replace(/<h4[^>]*>(.*?)<\/h4>/gi,"#### $1\n\n").replace(/<strong[^>]*>(.*?)<\/strong>/gi,"**$1**").replace(/<b[^>]*>(.*?)<\/b>/gi,"**$1**").replace(/<em[^>]*>(.*?)<\/em>/gi,"*$1*").replace(/<i[^>]*>(.*?)<\/i>/gi,"*$1*").replace(/<ul[^>]*>/gi,"").replace(/<\/ul>/gi,"\n").replace(/<ol[^>]*>/gi,"").replace(/<\/ol>/gi,"\n").replace(/<li[^>]*>(.*?)<\/li>/gi,"- $1\n").replace(/<img[^>]*src="([^"]*)"[^>]*alt="([^"]*)"[^>]*>/gi,"![$2]($1)").replace(/<img[^>]*src="([^"]*)"[^>]*>/gi,"![]($1)").replace(/<a[^>]*href="([^"]*)"[^>]*>(.*?)<\/a>/gi,"[$2]($1)").replace(/<blockquote[^>]*>/gi,"> ").replace(/<\/blockquote>/gi,"\n\n").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/\n\s*\n\s*\n/g,"\n\n").trim();navigator.clipboard.writeText(e),alert("Markdown copied to clipboard!")},F=(e="light")=>(0,i.jsx)($$,{viewMode:S,onChangeView:j,onCopyHtml:L,onCopyMarkdown:U,onOptimizeHeadings:()=>C(!0),copied:N,variant:e});return"error"===t?(0,i.jsx)("div",{className:"flex-1 flex items-center justify-center p-10 bg-gray-50",children:(0,i.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 max-w-lg flex items-start space-x-4 text-red-700",children:[(0,i.jsx)(pn,{className:"w-6 h-6 flex-shrink-0"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-lg",children:"Generation Failed"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r})]})]})}):(0,i.jsx)("div",{className:"flex flex-col h-full w-full",children:(0,i.jsxs)("div",{className:"flex-1 overflow-hidden bg-white relative w-full h-full min-h-0",children:[(0,i.jsx)("div",{className:"w-full h-full min-h-0 transition-opacity duration-300",children:"visual"===S?(0,i.jsx)($p,{children:(0,i.jsx)($h,{initialHtml:T,onChange:_,displayScale:b,articleTitle:v,onTitleChange:k,toolbarExtras:F("light")})}):(0,i.jsxs)("div",{className:"h-full w-full bg-gray-900 flex flex-col",children:[(0,i.jsxs)("div",{className:"bg-gray-800 text-gray-200 px-4 py-2 text-xs font-mono flex flex-wrap items-center justify-between gap-3 border-b border-gray-700",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(pa,{className:"w-3 h-3"}),(0,i.jsx)("span",{children:"source.html"}),(0,i.jsxs)("span",{className:"text-[11px] text-gray-400",children:[T.length," chars"]})]}),F("dark")]}),(0,i.jsx)("textarea",{className:"flex-1 w-full p-6 font-mono text-sm bg-gray-900 text-gray-100 focus:outline-none resize-none custom-scrollbar leading-relaxed",value:T,onChange:e=>_(e.target.value),spellCheck:!1,placeholder:"<!-- HTML content will appear here -->"})]})}),P&&(0,i.jsx)(()=>(0,i.jsx)("div",{className:"absolute inset-0 z-40 bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center",children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-4 animate-in fade-in zoom-in-95 duration-500",children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"w-16 h-16 rounded-full border-4 border-blue-100 border-t-blue-500 animate-spin"}),(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)(em,{className:"w-6 h-6 text-blue-500 animate-pulse"})})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-800 tracking-tight",children:(e=>{switch(e){case"parsing_product":return"æ­£åœ¨è®€å–ç”¢å“è³‡è¨Š";case"nlp_analysis":return"æ­£åœ¨æ•´ç†é‡é»žå­—è©ž";case"extracting_structure":return"æ­£åœ¨æ­¸ç´æ®µè½æž¶æ§‹";case"analyzing_visuals":return"æ­£åœ¨åµæ¸¬åœ–ç‰‡é¢¨æ ¼";case"planning_keywords":return"æ­£åœ¨è¦åŠƒå¸¸ç”¨è©žèˆ‡ä¾‹å¥";case"mapping_product":return"æ­£åœ¨é…å°ç—›é»žèˆ‡è³£é»ž";case"localizing_hk":return"æ­£åœ¨å¥—ç”¨é¦™æ¸¯å¸‚å ´ç”¨èªž";default:return"AI æ­£åœ¨æº–å‚™"}})(n)}),(0,i.jsx)("p",{className:"text-sm text-gray-500 font-medium mt-1",children:"è«‹æŸ¥çœ‹å³å´é¢æ¿ä»¥ç²å–å³æ™‚åˆ†æžçµæžœ..."})]})]})}),{}),(0,i.jsx)($g,{onApply:D,onSkip:R}),(0,i.jsx)($N,{isOpen:I,onClose:()=>C(!1),onApply:e=>{_(e),z.setContent(e)}}),(0,i.jsx)($f,{isOpen:"streaming"===t,content:e,step:n||"writing_content"})]})})},$j=c("brain-circuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]),$T=c("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),$_=c("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),$I=c("list-checks",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]]),$C=c("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),$A=c("chart-no-axes-column",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]]),$O=c("file-search",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]]),$E=c("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]),$M=c("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),$z=c("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),$P=c("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),$D=({keywordPlans:e,referenceAnalysis:t,authorityAnalysis:r,productMapping:n=[],productBrief:a,headingOptimizations:o=[],targetAudience:l,languageInstruction:d,isLoading:c,status:u,onStop:h,brandKnowledge:f,setBrandKnowledge:g,displayScale:y=1,onSearchLocalAlternatives:x,isSearchingAlternatives:b=!1})=>{let v=$c(e=>e.visualStyle),[k,w]=(0,s.useState)("analysis"),[N,$]=(0,s.useState)(!1),[S,j]=(0,s.useState)(!1),T=(0,s.useMemo)(()=>e.filter(e=>{let t=(e.word||"").trim();return!!t&&t.split(/\s+/).filter(Boolean).length<=3&&t.length<=15}),[e]),_={"zh-TW":"ç¹é«”ä¸­æ–‡ï¼ˆå°ç£ï¼‰","zh-HK":"ç¹é«”ä¸­æ–‡ï¼ˆé¦™æ¸¯ï¼‰","zh-MY":"ç°¡é«”ä¸­æ–‡ï¼ˆé¦¬ä¾†è¥¿äºžï¼‰"}[l]||l||"æœªè¨­å®š",I=async()=>{let e=(d||_||"").trim();if(e)try{await navigator.clipboard.writeText(e),j(!0),setTimeout(()=>j(!1),1200)}catch(e){console.warn("Copy failed",e)}},C=T.length>0||null!==t||null!==r||n.length>0,A=f&&f.trim().length>0,O=e=>{let t=e.target.files?.[0];if(!t)return;let r=new FileReader;r.onload=e=>{if(e.target?.result){let t=e.target.result;g(f?f+"\n\n"+t:t)}},r.readAsText(t)};return(0,i.jsxs)("div",{className:"flex flex-col h-full bg-slate-50/80 w-full border-l border-gray-200 font-sans",style:1!==y?{transform:`scale(${y})`,transformOrigin:"top left",width:`${100/y}%`,height:`${100/y}%`}:void 0,children:[(0,i.jsxs)("div",{className:"flex items-center px-2 pt-2 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm flex-shrink-0 z-10 justify-between gap-2",children:[(0,i.jsxs)("div",{className:"flex flex-1 items-center",children:[(0,i.jsxs)("button",{onClick:()=>w("analysis"),className:`flex-1 pb-2 pt-1 text-xs font-bold uppercase tracking-wider flex items-center justify-center gap-2 border-b-2 transition-colors ${"analysis"===k?"border-indigo-600 text-indigo-700":"border-transparent text-gray-400 hover:text-gray-600"}`,children:[(0,i.jsx)($A,{className:"w-3.5 h-3.5"}),"Analysis"]}),(0,i.jsxs)("button",{onClick:()=>w("knowledge"),className:`flex-1 pb-2 pt-1 text-xs font-bold uppercase tracking-wider flex items-center justify-center gap-2 border-b-2 transition-colors relative ${"knowledge"===k?"border-indigo-600 text-indigo-700":"border-transparent text-gray-400 hover:text-gray-600"}`,children:[(0,i.jsx)(ed,{className:"w-3.5 h-3.5"}),"Knowledge",A&&(0,i.jsx)("span",{className:"absolute top-1 right-6 w-1.5 h-1.5 bg-green-500 rounded-full ring-2 ring-white"})]})]}),("analyzing"===u||"streaming"===u)&&(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-indigo-50 text-indigo-600 rounded-md border border-indigo-100",children:[(0,i.jsx)("div",{className:"w-2 h-2 rounded-full bg-indigo-600 animate-pulse"}),(0,i.jsx)("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Analyzing..."})]}),(0,i.jsxs)("button",{onClick:h,className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold text-red-600 bg-red-50 border border-red-100 rounded-lg hover:bg-red-100 transition-colors active:scale-95 whitespace-nowrap",title:"åœæ­¢åˆ†æž",children:[(0,i.jsx)($M,{className:"w-3.5 h-3.5"}),(0,i.jsx)("span",{children:"åœæ­¢"})]})]})]}),"analysis"===k?(0,i.jsx)(()=>c&&!C?(0,i.jsxs)("div",{className:"flex flex-col h-full p-8 items-center justify-center bg-white/50 space-y-6",children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"w-16 h-16 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin"}),(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)($j,{className:"w-6 h-6 text-indigo-600 animate-pulse"})})]}),(0,i.jsxs)("div",{className:"text-center space-y-2",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Analyzing Content"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide font-medium",children:"Parallel Analysis: Structure & Voice Strategy..."})]})]}):C?(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[(0,i.jsxs)("div",{className:"bg-white rounded-xl border border-indigo-100 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between gap-3 bg-indigo-50",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)($z,{className:"w-4 h-4 text-indigo-600"}),(0,i.jsxs)("div",{className:"leading-tight",children:[(0,i.jsx)("span",{className:"block text-xs font-extrabold uppercase tracking-wider text-indigo-800",children:"èªžè¨€è¨­å®š"}),(0,i.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,i.jsx)("span",{className:"text-xs font-semibold text-indigo-700 bg-white/70 px-2 py-0.5 rounded-full border border-indigo-100",children:_}),(0,i.jsx)("span",{className:"text-xs text-indigo-500 font-semibold bg-indigo-100/60 px-2 py-0.5 rounded-full border border-indigo-200",children:l||"æœªè¨­å®š"})]})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("button",{onClick:I,className:"h-8 w-8 flex items-center justify-center rounded-md border border-indigo-100 bg-white text-indigo-600 hover:bg-indigo-50 active:scale-95 transition",title:"è¤‡è£½å®Œæ•´èªžè¨€æŒ‡ä»¤",children:S?(0,i.jsx)(pr,{className:"w-3.5 h-3.5"}):(0,i.jsx)(pt,{className:"w-3.5 h-3.5"})}),(0,i.jsx)("button",{onClick:()=>$(e=>!e),className:"h-8 px-3 text-xs font-semibold text-indigo-700 rounded-md border border-indigo-100 bg-white hover:bg-indigo-50 active:scale-95 transition",children:N?"æ”¶èµ·":"å…¨æ–‡"})]})]}),(0,i.jsx)("div",{className:`p-3 text-sm text-gray-700 leading-snug ${N?"whitespace-pre-line":""}`,children:((e,t)=>{let r=e.trim();if(!r)return"å°šæœªè¼‰å…¥èªžè¨€æŒ‡ä»¤ã€‚è«‹åœ¨è¨­å®šä¸­é¸æ“‡ç›®æ¨™å—çœ¾ã€‚";if(t)return r;let n=r.replace(/\s+/g," ").trim();return n.length>220?`${n.slice(0,220)}â€¦`:n})(d||"",N)})]}),a&&a.productName&&(0,i.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden group hover:shadow-md transition-all duration-300",children:[(0,i.jsxs)("div",{className:"px-4 py-2.5 border-b border-gray-50 bg-gradient-to-r from-emerald-50/80 to-white flex items-center gap-2",children:[(0,i.jsx)(eh,{className:"w-3.5 h-3.5 text-emerald-600"}),(0,i.jsx)("h4",{className:"text-xs font-extrabold text-gray-700 uppercase tracking-wider",children:"Service & Product Strategy"})]}),(0,i.jsxs)("div",{className:"p-3 space-y-3",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-1.5 text-xs bg-emerald-50/50 p-3 rounded border border-emerald-100",children:[(0,i.jsx)("span",{className:"font-bold text-emerald-700",children:a.productName}),(0,i.jsx)("span",{className:"text-emerald-600/70 break-words leading-relaxed",children:a.usp})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("h5",{className:"text-xs font-bold text-gray-400 uppercase",children:"Injection Map"}),0===n.length?(0,i.jsx)("p",{className:"text-xs text-gray-400 italic",children:"No specific mappings generated."}):n.map((e,r)=>{var n;let s=(n=e.relevanceKeywords,t?.structure?t.structure.filter(e=>n.some(t=>e.title.toLowerCase().includes(t.toLowerCase()))).map(e=>e.title):[]);return(0,i.jsxs)("div",{className:"bg-gray-50 rounded p-3 border border-gray-100 flex flex-col gap-2",children:[(0,i.jsxs)("div",{className:"flex items-start gap-2",children:[(0,i.jsx)("div",{className:"mt-0.5 w-1.5 h-1.5 rounded-full bg-red-400 flex-shrink-0",title:"Pain Point"}),(0,i.jsx)("span",{className:"text-xs text-gray-700 leading-relaxed break-words",children:e.painPoint})]}),(0,i.jsxs)("div",{className:"flex items-start gap-2 pl-3.5",children:[(0,i.jsx)(NH,{className:"w-3 h-3 text-gray-300 flex-shrink-0 mt-0.5"}),(0,i.jsx)("span",{className:"text-xs font-bold text-emerald-600 leading-relaxed break-words",children:e.productFeature})]}),s.length>0&&(0,i.jsx)("div",{className:"mt-1 pl-3.5 flex flex-wrap gap-1.5",children:s.map((e,t)=>(0,i.jsxs)("span",{className:"text-xs px-2 py-1 bg-blue-50 text-blue-600 rounded border border-blue-100 break-words",children:["ðŸ“ ",e]},t))})]},r)})]})]})]}),t&&(0,i.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden group hover:shadow-md transition-all duration-300",children:[(0,i.jsxs)("div",{className:"px-4 py-2.5 border-b border-gray-50 bg-gradient-to-r from-pink-50/80 to-white flex items-center gap-2",children:[(0,i.jsx)("div",{className:"w-3.5 h-3.5 text-pink-600 flex items-center justify-center",children:(0,i.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-full h-full",children:[(0,i.jsx)("circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}),(0,i.jsx)("circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}),(0,i.jsx)("circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}),(0,i.jsx)("circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}),(0,i.jsx)("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]})}),(0,i.jsx)("h4",{className:"text-xs font-extrabold text-gray-700 uppercase tracking-wider",children:"Visual Style"})]}),(0,i.jsx)("div",{className:"p-3",children:(0,i.jsxs)("p",{className:"text-sm text-gray-600 leading-relaxed italic",children:['"',v||"Clean, modern professional photography with natural lighting.",'"']})})]}),t&&(t.regionalReplacements&&t.regionalReplacements.length>0||t.replacementRules&&t.replacementRules.length>0)&&(0,i.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden group hover:shadow-md transition-all duration-300",children:[(0,i.jsxs)("div",{className:"px-4 py-2.5 border-b border-gray-50 bg-gradient-to-r from-amber-50/80 to-white flex items-center gap-2",children:[(0,i.jsx)($_,{className:"w-3.5 h-3.5 text-amber-600"}),(0,i.jsx)("h4",{className:"text-xs font-extrabold text-gray-700 uppercase tracking-wider",children:"Localization & Safety"})]}),(0,i.jsxs)("div",{className:"p-3 space-y-3",children:[t.regionalReplacements&&t.regionalReplacements.length>0&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("div",{className:"flex items-center justify-between",children:(0,i.jsxs)("h5",{className:"text-xs font-bold text-gray-400 uppercase flex items-center gap-1",children:["Regional Corrections",(0,i.jsx)("span",{className:"bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded-full text-[10px]",children:t.regionalReplacements.length})]})}),(0,i.jsx)("ul",{className:"grid grid-cols-1 gap-2 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:t.regionalReplacements.map((e,t)=>(0,i.jsxs)("li",{className:`rounded p-2 border flex flex-col gap-1 ${e.replacement?"bg-amber-50/50 border-amber-100":"bg-red-50/50 border-red-100"}`,children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs font-medium text-gray-800 flex-wrap",children:[(0,i.jsx)("span",{className:"text-red-500 line-through decoration-red-500/50",children:e.original}),(0,i.jsx)("span",{className:"text-gray-400",children:"â†’"}),e.replacement?(0,i.jsx)("span",{className:"text-emerald-600 font-bold",children:e.replacement}):(0,i.jsx)("span",{className:"text-red-500 font-bold italic",children:"(åˆªé™¤)"})]}),e.reason&&(0,i.jsx)("span",{className:"text-[10px] text-gray-500 leading-snug",children:e.reason})]},t))})]}),(t.competitorBrands&&t.competitorBrands.length>0||t.competitorProducts&&t.competitorProducts.length>0)&&(0,i.jsxs)("div",{className:`space-y-2 ${t.regionalReplacements?.length?"pt-2 border-t border-gray-100":""}`,children:[(0,i.jsx)("div",{className:"flex items-center justify-between",children:(0,i.jsxs)("h5",{className:"text-xs font-bold text-gray-400 uppercase flex items-center gap-1",children:["Blocked Terms",(0,i.jsx)("span",{className:"bg-red-100 text-red-700 px-1.5 py-0.5 rounded-full text-[10px]",children:(t.competitorBrands?.length||0)+(t.competitorProducts?.length||0)})]})}),(t.competitorBrands?.length||0)+(t.competitorProducts?.length||0)>=3&&(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2.5 space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-start gap-2",children:[(0,i.jsx)("span",{className:"text-blue-600 text-sm",children:"ðŸ’¡"}),(0,i.jsxs)("p",{className:"text-xs text-blue-700 leading-relaxed",children:["åµæ¸¬åˆ° ",(0,i.jsx)("strong",{children:(t.competitorBrands?.length||0)+(t.competitorProducts?.length||0)})," å€‹å“ç‰Œ/ç”¢å“éœ€è¦æœ¬åœ°æ›¿æ›"]})]}),(0,i.jsxs)("button",{className:"w-full px-3 py-1.5 bg-blue-600 text-white text-xs font-semibold rounded-md hover:bg-blue-700 active:scale-[0.98] transition-all flex items-center justify-center gap-1.5 disabled:opacity-50 disabled:cursor-not-allowed",onClick:x,disabled:b||!x,children:[b?(0,i.jsx)(ep,{className:"w-3.5 h-3.5 animate-spin"}):(0,i.jsx)($P,{className:"w-3.5 h-3.5"}),"æœå°‹æœ¬åœ°æ›¿ä»£å“ç‰Œ"]})]}),(0,i.jsxs)("ul",{className:"space-y-1.5",children:[t.competitorBrands?.map((e,t)=>(0,i.jsxs)("li",{className:"text-xs text-gray-600 flex items-center justify-between gap-2 bg-gray-50 rounded px-2 py-1.5 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-red-400 font-bold",children:"[-]"}),(0,i.jsx)("span",{className:"break-words font-medium",children:e})]}),(0,i.jsx)("span",{className:"px-1.5 py-0.5 bg-purple-100 text-purple-700 text-[10px] font-semibold rounded-full",children:"å“ç‰Œ"})]},`brand-${t}`)),t.competitorProducts?.map((e,t)=>(0,i.jsxs)("li",{className:"text-xs text-gray-600 flex items-center justify-between gap-2 bg-gray-50 rounded px-2 py-1.5 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-red-400 font-bold",children:"[-]"}),(0,i.jsx)("span",{className:"break-words font-medium",children:e})]}),(0,i.jsx)("span",{className:"px-1.5 py-0.5 bg-amber-100 text-amber-700 text-[10px] font-semibold rounded-full",children:"ç”¢å“"})]},`product-${t}`))]})]})]})]}),t&&(t.generalPlan.length>0||t.humanWritingVoice)&&(0,i.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden group hover:shadow-md transition-all duration-300",children:[(0,i.jsxs)("div",{className:"px-4 py-2.5 border-b border-gray-50 bg-gradient-to-r from-purple-50/80 to-white flex items-center gap-2",children:[(0,i.jsx)($T,{className:"w-3.5 h-3.5 text-purple-600"}),(0,i.jsx)("h4",{className:"text-xs font-extrabold text-gray-700 uppercase tracking-wider",children:"Voice Strategy"})]}),(0,i.jsxs)("div",{className:"p-3",children:[(0,i.jsx)("div",{className:"space-y-2",children:t.generalPlan.map((e,t)=>(0,i.jsxs)("div",{className:"flex gap-2.5 items-start",children:[(0,i.jsx)("div",{className:"w-1 h-1 mt-2 rounded-full bg-purple-400 flex-shrink-0"}),(0,i.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:e})]},t))}),(0,i.jsxs)("div",{className:"mt-3 pt-3 border-t border-purple-50 space-y-2",children:[t.regionVoiceDetect&&"Match"!==t.regionVoiceDetect&&(0,i.jsxs)("div",{className:"bg-rose-50 border border-rose-100 rounded-md p-2 flex gap-2 items-start",children:[(0,i.jsx)("div",{className:"mt-0.5 text-rose-500",children:"âš ï¸"}),(0,i.jsxs)("div",{className:"space-y-0.5",children:[(0,i.jsx)("p",{className:"text-xs font-bold text-rose-700 uppercase",children:"Region Voice %"}),(0,i.jsx)("p",{className:"text-xs text-rose-600 leading-relaxed",children:t.regionVoiceDetect})]})]}),t.humanWritingVoice&&(0,i.jsxs)("div",{className:"flex gap-2 items-start bg-purple-50/50 p-2 rounded-md border border-purple-50",children:[(0,i.jsx)("div",{className:"mt-0.5 text-xs",children:"ðŸ—£ï¸"}),(0,i.jsxs)("div",{className:"space-y-0.5",children:[(0,i.jsx)("p",{className:"text-xs font-bold text-purple-700 uppercase",children:"Human Writing Voice"}),(0,i.jsxs)("p",{className:"text-xs text-purple-600 leading-relaxed italic",children:['"',t.humanWritingVoice,'"']})]})]})]})]})]}),r&&r.relevantTerms.length>0&&(0,i.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden group hover:shadow-md transition-all duration-300",children:[(0,i.jsxs)("div",{className:"px-4 py-2.5 border-b border-gray-50 bg-gradient-to-r from-teal-50/80 to-white flex items-center gap-2",children:[(0,i.jsx)($_,{className:"w-3.5 h-3.5 text-teal-600"}),(0,i.jsx)("h4",{className:"text-sm font-extrabold text-gray-700 uppercase tracking-wider",children:"Core Topic"})]}),(0,i.jsxs)("div",{className:"p-4 space-y-3",children:[(0,i.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[r.relevantTerms.slice(0,8).map((e,t)=>(0,i.jsx)("span",{className:"px-2 py-1 bg-teal-50 text-teal-700 border border-teal-100 rounded text-sm font-semibold",children:e},t)),r.relevantTerms.length>8&&(0,i.jsxs)("span",{className:"px-2 py-1 text-gray-400 text-sm font-medium bg-gray-50 rounded border border-gray-100",children:["+",r.relevantTerms.length-8," more"]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 rounded-lg p-2.5 border border-gray-100",children:[(0,i.jsxs)("h5",{className:"text-sm font-bold text-gray-400 mb-2 uppercase flex items-center gap-1",children:[(0,i.jsx)(p,{className:"w-3 h-3 text-amber-400"})," Integration Plan"]}),(0,i.jsx)("ul",{className:"space-y-1.5",children:(r.combinations||[]).map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-gray-600 flex items-start gap-1.5 leading-snug",children:[(0,i.jsx)("span",{className:"text-teal-400 mt-0.5",children:"â€¢"}),(0,i.jsx)("span",{children:e})]},t))})]})]})]}),t&&t.structure.length>0&&(0,i.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden group hover:shadow-md transition-all duration-300",children:[(0,i.jsxs)("div",{className:"px-4 py-2.5 border-b border-gray-50 bg-gradient-to-r from-blue-50/80 to-white flex items-center gap-2",children:[(0,i.jsx)(m,{className:"w-3.5 h-3.5 text-blue-600"}),(0,i.jsx)("h4",{className:"text-xs font-extrabold text-gray-700 uppercase tracking-wider",children:"Narrative Structure (Outline)"})]}),(0,i.jsxs)("div",{className:"relative py-2 max-h-96 overflow-y-auto custom-scrollbar",children:[(0,i.jsx)("div",{className:"absolute left-5 top-4 bottom-4 w-px bg-gray-100"}),(0,i.jsx)("div",{className:"relative z-10",children:t.structure.map((e,t)=>{var r;let n,s,a=e.writingMode||("easy"===e.difficulty?"direct":"multi_solutions"),o=e.solutionAngles?.filter(Boolean).slice(0,2)||[];return(0,i.jsxs)("div",{className:"px-4 py-3 pl-10 relative hover:bg-blue-50/30 transition-colors group/item",children:[(0,i.jsx)("div",{className:"absolute left-3 top-3.5 w-4 h-4 rounded-full border-2 border-white bg-blue-50 text-blue-600 flex items-center justify-center shadow-sm text-xs font-bold z-10 group-hover/item:bg-blue-600 group-hover/item:text-white transition-all",children:t+1}),(0,i.jsxs)("div",{className:"flex items-start justify-between gap-3 pr-1",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h5",{className:"text-sm font-bold text-gray-800 mb-1 leading-normal break-words",children:e.title}),e.coreQuestion&&(0,i.jsxs)("p",{className:"text-xs text-gray-500 leading-relaxed break-words",children:["Q: ",e.coreQuestion]})]}),(r=e.difficulty,s=(n={easy:{label:"Easy",bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-100"},medium:{label:"Medium",bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-100"},unclear:{label:"Unclear",bg:"bg-rose-50",text:"text-rose-700",border:"border-rose-100"}})[r||"easy"]||n.easy,(0,i.jsx)("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full border ${s.bg} ${s.text} ${s.border}`,children:s.label}))]}),e.narrativePlan&&e.narrativePlan.length>0&&(0,i.jsxs)("div",{className:"mt-1.5 space-y-1",children:[e.narrativePlan.slice(0,3).map((e,t)=>(0,i.jsx)("p",{className:"text-xs text-gray-400 leading-relaxed break-words",children:e},t)),e.narrativePlan.length>3&&(0,i.jsxs)("p",{className:"text-[10px] text-gray-300",children:["+",e.narrativePlan.length-3," more"]})]}),(0,i.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.isChecklist&&(0,i.jsx)("span",{className:"text-[10px] px-2 py-1 rounded-full bg-emerald-50 text-emerald-700 border border-emerald-100",children:"Checklist"}),e.uspNotes&&e.uspNotes.slice(0,2).map((e,t)=>(0,i.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded-full bg-purple-50 text-purple-700 border border-purple-100 break-words",children:["USP: ",e]},`usp-${t}`)),e.augment&&e.augment.slice(0,2).map((e,t)=>(0,i.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded-full bg-amber-50 text-amber-700 border border-amber-100 break-words",children:["+ ",e]},`aug-${t}`)),e.suppress&&e.suppress.slice(0,2).map((e,t)=>(0,i.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded-full bg-rose-50 text-rose-700 border border-rose-100 break-words",children:["- ",e]},`sup-${t}`))]}),Array.isArray(e.subheadings)&&e.subheadings.length>0&&(0,i.jsx)("div",{className:"mt-2 pl-6 border-l border-blue-100 space-y-1",children:e.subheadings.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-start gap-1.5 text-xs text-gray-600 leading-snug break-words",children:[(0,i.jsx)("span",{className:"text-blue-400 mt-0.5",children:"â†³"}),(0,i.jsx)("span",{className:"font-medium",children:e})]},t))}),"multi_solutions"===a&&o.length>0&&(0,i.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:o.map((e,t)=>(0,i.jsx)("span",{className:"text-xs px-2 py-1 rounded-full border border-blue-100 bg-blue-50 text-blue-700 break-words",children:e},t))}),e.uspNotes&&e.uspNotes.length>0&&(0,i.jsx)("div",{className:"mt-2 pl-6 border-l border-purple-100 space-y-1",children:e.uspNotes.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-start gap-1.5 text-[11px] text-purple-700 leading-snug break-words",children:[(0,i.jsx)("span",{className:"text-purple-300 mt-0.5",children:"â˜…"}),(0,i.jsx)("span",{children:e})]},`usp-list-${t}`))}),e.keyFacts&&e.keyFacts.length>0&&(0,i.jsx)("div",{className:"mt-2 pl-6 border-l border-gray-100 space-y-1",children:e.keyFacts.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-start gap-1.5 text-[11px] text-gray-700 leading-snug break-words",children:[(0,i.jsx)("span",{className:"text-gray-400 mt-0.5",children:"â€¢"}),(0,i.jsx)("span",{children:e})]},t))}),e.sentenceStartFeatures&&e.sentenceStartFeatures.length>0&&(0,i.jsxs)("div",{className:"mt-2 pl-6 border-l border-indigo-100 space-y-1",children:[(0,i.jsx)("div",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-tight mb-0.5",children:"Sentence Starts"}),e.sentenceStartFeatures.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-start gap-1.5 text-[11px] text-indigo-600 leading-snug break-words",children:[(0,i.jsx)("span",{className:"text-indigo-300 mt-0.5",children:"â–·"}),(0,i.jsx)("span",{children:e})]},`start-${t}`))]}),e.sentenceEndFeatures&&e.sentenceEndFeatures.length>0&&(0,i.jsxs)("div",{className:"mt-2 pl-6 border-l border-rose-100 space-y-1",children:[(0,i.jsx)("div",{className:"text-[10px] font-bold text-rose-400 uppercase tracking-tight mb-0.5",children:"Sentence Ends"}),e.sentenceEndFeatures.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-start gap-1.5 text-[11px] text-rose-600 leading-snug break-words",children:[(0,i.jsx)("span",{className:"text-rose-300 mt-0.5",children:"â—"}),(0,i.jsx)("span",{children:e})]},`end-${t}`))]})]},t)})})]})]}),T.length>0&&(0,i.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden group hover:shadow-md transition-all duration-300",children:[(0,i.jsxs)("div",{className:"px-4 py-2.5 border-b border-gray-50 bg-gradient-to-r from-indigo-50/80 to-white flex items-center gap-2",children:[(0,i.jsx)($I,{className:"w-3.5 h-3.5 text-indigo-600"}),(0,i.jsx)("h4",{className:"text-xs font-extrabold text-gray-700 uppercase tracking-wider",children:"Semantic Keywords"})]}),(0,i.jsx)("div",{className:"p-3 space-y-3",children:T.map((e,r)=>(0,i.jsxs)("div",{className:"bg-gray-50/50 rounded-lg p-2.5 border border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-1.5 gap-2 flex-wrap",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,i.jsx)($C,{className:"w-3 h-3 text-indigo-300"}),(0,i.jsx)("span",{className:"text-sm font-bold text-gray-800",children:e.word})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[e.isSentenceStart&&(0,i.jsx)("span",{className:"px-1.5 py-0.5 rounded-full bg-indigo-100 text-indigo-700 border border-indigo-200 text-[9px] font-bold",children:"START"}),e.isSentenceEnd&&(0,i.jsx)("span",{className:"px-1.5 py-0.5 rounded-full bg-rose-100 text-rose-700 border border-rose-200 text-[9px] font-bold",children:"END"}),e.isPrefix&&(0,i.jsx)("span",{className:"px-1.5 py-0.5 rounded-full bg-amber-100 text-amber-700 border border-amber-200 text-[9px] font-bold",children:"PRE"}),e.isSuffix&&(0,i.jsx)("span",{className:"px-1.5 py-0.5 rounded-full bg-teal-100 text-teal-700 border border-teal-200 text-[9px] font-bold",children:"SUF"}),((e,r=[])=>{let n=(e||"").trim().toLowerCase();if(!n)return[{label:"Unknown",variant:"unknown"}];let i=t?.structure||[],s=0;i.forEach(e=>{(e.title||"").toLowerCase().includes(n)&&s++,(e.subheadings||[]).forEach(e=>{(e||"").toLowerCase().includes(n)&&s++})});let a=r.length,o=[];return s>0&&o.push({label:s>=a?"Heading-heavy":"Heading",variant:"heading"}),a>0&&o.push({label:a>s?"Body-heavy":"Body",variant:"body"}),0===o.length&&o.push({label:"Unknown",variant:"unknown"}),o.slice(0,2)})(e.word,e.snippets).map((e,t)=>{let r="heading"===e.variant?"bg-blue-50 text-blue-700 border-blue-100":"body"===e.variant?"bg-slate-50 text-slate-700 border-slate-200":"bg-gray-50 text-gray-500 border-gray-200";return(0,i.jsx)("span",{className:`px-2 py-0.5 rounded-full border text-[10px] font-semibold flex items-center gap-1 ${r}`,children:e.label},t)})]})]}),(0,i.jsxs)("div",{className:"space-y-1",children:[e.plan.map((e,t)=>(0,i.jsxs)("div",{className:"text-xs text-gray-600 flex items-start gap-1.5",children:[(0,i.jsx)("span",{className:"text-indigo-300 mt-px",children:"â€¢"}),(0,i.jsx)("span",{className:"leading-snug opacity-90",children:e})]},t)),e.exampleSentence&&(0,i.jsxs)("div",{className:"mt-2 text-xs text-gray-500 italic border-l-2 border-indigo-100 pl-2",children:['"',e.exampleSentence,'"']})]})]},r))})]})]}):(0,i.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center opacity-60",children:[(0,i.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-2xl flex items-center justify-center mb-6 rotate-3",children:(0,i.jsx)($O,{className:"w-8 h-8 text-gray-400"})}),(0,i.jsx)("h4",{className:"text-base font-bold text-gray-700 mb-2",children:"No Data Available"}),(0,i.jsx)("p",{className:"text-xs text-gray-500 max-w-[200px] leading-relaxed",children:"Start a generation to see NLP insights, structural breakdown, and authority signals here."})]}),{}):(0,i.jsx)(()=>(0,i.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 bg-slate-50/50",children:[(0,i.jsxs)("div",{className:"p-4 bg-white border-b border-gray-200 space-y-3",children:[(0,i.jsx)("div",{className:"flex items-center justify-between",children:(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Upload or paste Brand Guidelines, Product Specs, or Whitepapers here."})}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)("label",{className:"flex-1 cursor-pointer",children:[(0,i.jsx)("input",{type:"file",className:"hidden",accept:".txt,.md,.json",onChange:O}),(0,i.jsxs)("div",{className:"px-3 py-2 bg-indigo-50 border border-indigo-100 rounded-lg text-indigo-700 text-xs font-bold hover:bg-indigo-100 transition-colors flex items-center justify-center gap-2",children:[(0,i.jsx)($E,{className:"w-3.5 h-3.5"}),"Load File"]})]}),(0,i.jsx)("button",{onClick:()=>g(""),className:"px-3 py-2 bg-white border border-gray-200 rounded-lg text-gray-500 hover:text-red-500 hover:bg-red-50 hover:border-red-100 transition-colors",title:"Clear Knowledge Base",children:(0,i.jsx)(po,{className:"w-3.5 h-3.5"})})]})]}),(0,i.jsxs)("div",{className:"flex-1 p-0 relative group",children:[(0,i.jsx)("textarea",{value:f,onChange:e=>g(e.target.value),placeholder:"Paste heavy documentation here...",className:"w-full h-full p-4 bg-gray-50 resize-none outline-none text-xs font-mono text-gray-600 leading-relaxed focus:bg-white transition-colors custom-scrollbar"}),!f&&(0,i.jsxs)("div",{className:"absolute inset-0 pointer-events-none flex flex-col items-center justify-center text-gray-300 p-8 text-center",children:[(0,i.jsx)(ed,{className:"w-12 h-12 mb-3 opacity-20"}),(0,i.jsx)("p",{className:"text-sm font-bold",children:"Knowledge Base Empty"}),(0,i.jsx)("p",{className:"text-[10px] mt-1",children:"This context is used by RAG to enhance section generation."})]})]}),(0,i.jsxs)("div",{className:"p-2 bg-white border-t border-gray-200 flex justify-between items-center text-[10px] text-gray-400 font-mono",children:[(0,i.jsxs)("span",{children:[f.length," chars"]}),(0,i.jsx)("span",{className:f.length>0?"text-green-600 font-bold":"",children:f.length>0?"RAG Active":"Inactive"})]})]}),{})]})},$R=c("git-commit-horizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]),$L=[{version:"v1.5.0",date:"2025.12",description:"æ ¸å¿ƒæ¨¡åž‹å‡ç´šï¼šå…¨é¢æŽ¡ç”¨ Google æœ€æ–° Gemini 3 Flash Preview æ¨¡åž‹ï¼Œå¤§å¹…æå‡ç”Ÿæˆé€Ÿåº¦èˆ‡å…§å®¹æº–ç¢ºåº¦ï¼Œä¸¦å„ªåŒ–é•·æ–‡æœ¬è™•ç†èƒ½åŠ›ã€‚"},{version:"v1.4.0",date:"2025.12",description:"åŠŸèƒ½é‡æ§‹èˆ‡å„ªåŒ–ï¼šå°‡é—œéµè©žåˆ†æžå‡ç´šç‚ºã€Œé«˜é »è©žå½™ (Frequent Words)ã€ä¸¦å¢žåŠ ä¾‹å¥æå–åŠŸèƒ½ï¼›æ–°å¢žã€Œå€åŸŸåŒ–èˆ‡å®‰å…¨ (Localization & Safety)ã€æª¢æŸ¥é¢æ¿ä»¥å¼·åŒ–å…§å®¹åˆè¦ã€‚åº•å±¤å‰‡é€éŽä¸¦è¡ŒåŒ–è™•ç†ä¿®å¾©äº†åŒæ­¥å•é¡Œï¼Œé¡¯è‘—æå‡åˆ†æžé€Ÿåº¦ã€‚"},{version:"v1.3.0",date:"2025.03",description:"é«”é©—å¤§å¹…å‡ç´šï¼šæŽ¨å‡ºã€Œå…¨åŸŸè¦–è¦ºè­˜åˆ¥ç³»çµ± (VIS)ã€ï¼Œç¢ºä¿ç”Ÿæˆåœ–ç‰‡é¢¨æ ¼çš„ä¸€è‡´æ€§ã€‚æ–°å¢žã€Œæ¸¸æ¨™è™•æ’å…¥ã€åŠŸèƒ½ï¼Œè®“åœ–ç‰‡ç´ æèƒ½ä¸€éµæ”¾å…¥æ–‡ç« ã€‚åŒæ™‚å„ªåŒ–äº†åº•å±¤è™•ç†æ•ˆèƒ½ï¼Œæå‡æ•´é«”å›žæ‡‰é€Ÿåº¦ã€‚"},{version:"v1.2.0",date:"2025.02",description:"æ•´åˆ Gemini 3 Pro (Nano Banana) ç”Ÿæˆé«˜ä¿çœŸåœ–åƒï¼Œä¸¦æ”¯æ´ä¾†æºåœ–ç‰‡çš„ AI è¦–è¦ºç†è§£ã€‚"},{version:"v1.1.0",date:"2025.01",description:"æ–°å¢žçŸ¥è­˜åº« RAG æª¢ç´¢èˆ‡ç«¶çˆ­å°æ‰‹æ¸…æ´— (Competitor Sanitization) å”è­°ã€‚"},{version:"v1.0.0",date:"2024.12",description:"æ ¸å¿ƒã€Œåˆ†æž-è¦åŠƒ-å¯«ä½œã€æž¶æ§‹ä¸Šç·šï¼Œå…·å‚™æ·±åº¦çµæ§‹æå–åŠŸèƒ½ã€‚"}],$U=({isOpen:e,onClose:t})=>e?(0,i.jsxs)("div",{className:"fixed inset-0 z-[60] flex justify-end",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),(0,i.jsxs)("div",{className:"relative w-full max-w-sm bg-white h-full shadow-2xl border-l border-gray-200 flex flex-col animate-in slide-in-from-right duration-300",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-5 border-b border-gray-100 bg-gray-50/50",children:[(0,i.jsxs)("h2",{className:"text-base font-bold text-gray-800 flex items-center gap-2",children:[(0,i.jsx)($R,{className:"w-4 h-4 text-blue-600"}),"æ›´æ–°æ—¥èªŒ"]}),(0,i.jsx)("button",{onClick:t,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,i.jsx)(po,{className:"w-4 h-4"})})]}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",children:[(0,i.jsxs)("div",{className:"mb-10",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Ai Text Writer Pro"}),(0,i.jsx)("p",{className:"text-sm text-gray-500 leading-relaxed",children:"å°ˆç‚ºé«˜è½‰æ›çŽ‡ç·¨è¼¯å…§å®¹è¨­è¨ˆçš„å°ˆæ¥­ç´š AI å¯«ä½œå·¥ä½œå€ï¼Œåˆ©ç”¨æ·±åº¦çµæ§‹åˆ†æžèˆ‡ RAG æŠ€è¡“ï¼Œå¡«è£œé€šç”¨ LLM è¼¸å‡ºèˆ‡å°ˆæ¥­å…§å®¹ä¹‹é–“çš„å·®è·ã€‚"})]}),(0,i.jsxs)("div",{className:"space-y-8 relative",children:[(0,i.jsx)("div",{className:"absolute left-[3px] top-2 bottom-2 w-px bg-gray-100"}),$L.map((e,t)=>(0,i.jsxs)("div",{className:"relative pl-6",children:[(0,i.jsx)("div",{className:`absolute left-0 top-1.5 w-1.5 h-1.5 rounded-full ring-4 ring-white ${0===t?"bg-blue-600":"bg-gray-300"}`}),(0,i.jsxs)("div",{className:"flex flex-col gap-1 mb-2",children:[(0,i.jsx)("span",{className:`text-sm font-bold ${0===t?"text-blue-700":"text-gray-900"}`,children:e.version}),(0,i.jsx)("span",{className:"text-xs text-gray-400 font-mono tracking-wide",children:e.date})]}),(0,i.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.description})]},t))]})]})]})]}):null,$F=async e=>{let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")},$Z=({passwordHash:e="",onUnlock:t})=>{let[r,n]=(0,s.useState)(""),[a,o]=(0,s.useState)(""),[l,d]=(0,s.useState)(!1),c=async n=>{if(n.preventDefault(),o(""),!e)return void o("Password is not configured. Please set VITE_APP_GUARD_HASH.");d(!0);try{await $F(r.trim())===e?t():o("Incorrect password.")}catch(e){console.error("Password hash failed",e),o("Something went wrong. Please try again.")}finally{d(!1)}};return(0,i.jsx)("div",{className:"min-h-screen w-full bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white flex items-center justify-center p-6",children:(0,i.jsxs)("div",{className:"w-full max-w-md bg-slate-900/70 border border-slate-700 rounded-2xl shadow-2xl p-6 backdrop-blur",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Restricted Area"}),(0,i.jsx)("h1",{className:"text-xl font-semibold text-white mt-1",children:"Enter Access Code"})]})}),(0,i.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{className:"text-sm text-slate-300",children:"Password"}),(0,i.jsx)("input",{type:"password",value:r,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 rounded-lg bg-slate-800 border border-slate-700 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter password",autoFocus:!0})]}),a&&(0,i.jsx)("div",{className:"text-sm text-red-400 bg-red-950/40 border border-red-800 rounded-lg px-3 py-2",children:a}),(0,i.jsx)("button",{type:"submit",disabled:l,className:"w-full py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors disabled:opacity-60",children:l?"Verifying...":"Unlock"})]})]})})},$B=async e=>{if(!e||0===e.trim().length)return[];try{let t=await fetch("https://corsproxy.io/?"+encodeURIComponent("https://nlp.award-seo.com/api/v1/tokenize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,min_length:2,stop_words:[]})});if(!t.ok)return console.warn("NLP API Error:",t.status,t.statusText),[];let r=await t.json();if("ok"===r.status&&r.data&&r.data.frequencies)return r.data.frequencies.filter(e=>e.token.length>1).sort((e,t)=>t.count-e.count);return[]}catch(e){return console.error("NLP Service Error:",e),[]}};class $V{value;next;constructor(e){this.value=e}}class $H{#a;#o;#l;constructor(){this.clear()}enqueue(e){let t=new $V(e);this.#a?this.#o.next=t:this.#a=t,this.#o=t,this.#l++}dequeue(){let e=this.#a;if(e)return this.#a=this.#a.next,this.#l--,this.#a||(this.#o=void 0),e.value}peek(){if(this.#a)return this.#a.value}clear(){this.#a=void 0,this.#o=void 0,this.#l=0}get size(){return this.#l}*[Symbol.iterator](){let e=this.#a;for(;e;)yield e.value,e=e.next}*drain(){for(;this.#a;)yield this.dequeue()}}function $W(e){if(!((Number.isInteger(e)||e===1/0)&&e>0))throw TypeError("Expected `concurrency` to be a number from 1 and up")}let $K=async(e,t,r)=>{var n;let i,s,a,o,l,d=Date.now(),c=new Map;t.forEach(e=>{let t=(e.token||"").toLowerCase().trim();t&&!c.has(t)&&c.set(t,e)});let u=Array.from(c.values()).slice(0,30).map(t=>({word:t.token,snippets:((e,t,r=100)=>{let n;if(!e||!t)return[];let i=RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"),s=[],a=0;for(;null!==(n=i.exec(e))&&a<50;){a++;let i=Math.max(0,n.index-r),o=Math.min(e.length,n.index+t.length+r),l="..."+e.substring(i,o).replace(/\s+/g," ").trim()+"...";s.push(l)}return Array.from(new Set(s)).slice(0,3)})(e,t.token,80).slice(0,2).map(e=>((e,t=160)=>e.length>t?`${e.slice(0,t-3)}...`:e)(e))})),p=z(r),h=($W(n=2),i=new $H,s=0,a=()=>{s<n&&i.size>0&&(s++,i.dequeue()())},o=async(e,t,r)=>{let n=(async()=>e(...r))();t(n);try{await n}catch{}s--,a()},Object.defineProperties(l=(e,...t)=>new Promise(r=>{new Promise(e=>{i.enqueue(e)}).then(o.bind(void 0,e,r,t)),s<n&&a()}),{activeCount:{get:()=>s},pendingCount:{get:()=>i.size},clearQueue:{value(){i.clear()}},concurrency:{get:()=>n,set(e){$W(e),n=e,queueMicrotask(()=>{for(;s<n&&i.size>0;)a()})}},map:{async value(e,t){return Promise.all(Array.from(e,(e,r)=>this(t,e,r)))}}}),l),m=((e,t)=>{let r=[];for(let n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r})(u,10);console.log(`[SemanticKeywords] Processing ${u.length} words in ${m.length} batches (Concurrency: 2)...`);let f=m.map((e,t)=>h(async()=>{let r=1200*t;r>0&&await new Promise(e=>setTimeout(e,r));let n=(({languageInstruction:e,analysisPayloadString:t})=>`
    I have a list of High - Frequency Keywords and their "Context Snippets" from a Reference Text.

      TASK:
    For each keyword, analyze its context snippets to understand the specific ** Sentence Structure ** and ** Syntactic placement **.
    Generate a "Usage Action Plan" (Max 3 actionable points).
    Extract a ** SINGLE, SHORT ** "Example Sentence" (Max 40 chars/15 words).

      <LanguageInstruction>
      ${e}
      </LanguageInstruction>

    The Action Plan must be specific about the ** Sentence Context **:
    1. ** Placement **: Where does it appear? (Start/Middle/End/Transition)
    2. ** Collocations **: What words appear around it?
    3. ** Tone **: What function does it serve? (e.g., Is it a prefix/suffix?)

    STRICT RULES:
    - You MUST provide a "plan" with exactly 3 points and one "exampleSentence" for EVERY keyword.
    - If a keyword's context is unclear, use your knowledge of the language/style to provide a generic but accurate action plan.
    - NEVER return an empty array or null for "plan" or "exampleSentence".

          INPUT DATA:
    <AnalysisPayload>
    ${t}
    </AnalysisPayload>
    DEFINITION: JSON list of keywords and snippets.
    ACTION: Analyze these specific snippets.

    OUTPUT JSON(array):
    [
      {
        "word": "keyword",
        "plan": ["actionable guidance 1", "actionable guidance 2", "actionable guidance 3"],
        "exampleSentence": "ONE short sentence (< 15 words) from the text. NO explanations.",
        "isSentenceStart": true/false,
        "isSentenceEnd": true/false,
        "isPrefix": true/false,
        "isSuffix": true/false
      }
    ]
    Return JSON only.
    `)({analysisPayloadString:JSON.stringify(e,null,2),languageInstruction:p});try{console.log(`[SemanticKeywords] Starting batch ${t+1}/${m.length}...`);let r=await W.runJson(n,"FLASH",{type:q,items:{type:K,properties:{word:{type:J},plan:{type:q,items:{type:J}},exampleSentence:{type:J},isSentenceStart:{type:G},isSentenceEnd:{type:G},isPrefix:{type:G},isSuffix:{type:G}},required:["word","plan","exampleSentence"]}});if(console.log(`[SemanticKeywords] Batch ${t+1} Result:`,{requested:e.length,received:r.data?.length||0,duration:r.duration}),!r.data||0===r.data.length)return console.warn(`[SemanticKeywords] Batch ${t+1} returned NO data. Batch payload:`,e.map(e=>e.word)),{data:[],usage:r.usage,cost:r.cost,duration:r.duration};return{data:r.data.map(e=>({...e,plan:Array.isArray(e.plan)?e.plan:[e.plan].filter(Boolean)})),usage:r.usage,cost:r.cost,duration:r.duration}}catch(e){return console.warn(`[SemanticKeywords] Batch ${t+1} failed`,e),{data:[],usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:0}}})),g=await Promise.all(f),y=[],x={inputTokens:0,outputTokens:0,totalTokens:0},b={inputCost:0,outputCost:0,totalCost:0};g.forEach(e=>{e.data&&(y=y.concat(e.data)),e.usage&&(x.inputTokens+=e.usage.inputTokens||0,x.outputTokens+=e.usage.outputTokens||0,x.totalTokens+=e.usage.totalTokens||0),e.cost&&(b.inputCost+=e.cost.inputCost||0,b.outputCost+=e.cost.outputCost||0,b.totalCost+=e.cost.totalCost||0)});let v=new Set;return{data:y.reduce((e,t)=>{let r=(t.word||"").toLowerCase().trim();if(!r||v.has(r))return e;v.add(r);let n=u.find(e=>e.word===t.word)||u.find(e=>(e.word||"").toLowerCase()===r);return e.push({word:t.word,plan:t.plan||[],snippets:n?n.snippets:[],exampleSentence:t.exampleSentence||"",isSentenceStart:!!t.isSentenceStart,isSentenceEnd:!!t.isSentenceEnd,isPrefix:!!t.isPrefix,isSuffix:!!t.isSuffix}),e},[]),usage:E(x),cost:b,duration:Date.now()-d}},$q=async(e,t,r,n)=>{let i=Date.now(),s=e.length>3e3?e.slice(0,3e3)+"...(truncated)":e,a=(({languageInstruction:e,authorityTerms:t,websiteType:r,title:n})=>`
    ## Task
    Analyze the Authority Terms for this article and surface only the most credible, relevant ones.

    DEFINITION: The main goal of this analysis.
    ACTION: Filter and propose strategic combinations of terms.
    
    <WebsiteType>
    ${r}
    </WebsiteType>
    DEFINITION: The industry/niche.
    ACTION: Judge credibility based on this context.

    <ArticleTitle>
    ${n}
    </ArticleTitle>
    DEFINITION: Topic context.
    ACTION: Ensure terms are relevant to this topic.

    <CandidateTerms>
    ${t}
    </CandidateTerms>
    DEFINITION: List of potential terms.
    ACTION: Filter this list.
    
    <LanguageInstruction>
    ${e}
    </LanguageInstruction>
    DEFINITION: The language for the output.
    ACTION: Provide the output in this language.

    ## Goals
    - Keep only terms that strengthen trust / credibility for this topic and site type.
    - Drop vague, unrelated, or unverifiable claims.
    - Propose strategic combinations of 2 - 3 terms to reinforce authority.

    DEFINITION: Specific objectives for the analysis.
    ACTION: Ensure the output meets these goals.
    
    OUTPUT JSON:
    {
          "relevantTerms": ["best-fit term 1", "best-fit term 2"],
        "combinations": ["term A + term B in intro", "term C in meta description"]
    }
    Return JSON only.`)({authorityTerms:s,title:t,websiteType:r,languageInstruction:z(n)});try{let e,t=await W.runJson(a,"FLASH",{type:K,properties:{relevantTerms:{type:q,items:{type:J},description:"Filtered high-relevance authority terms"},combinations:{type:q,items:{type:J},description:"Strategic ways to combine these terms"}},required:["relevantTerms","combinations"]});return{data:t.data,usage:(e=t.usage,E(e)),cost:t.cost,duration:t.duration}}catch(e){return console.error("Authority analysis failed",e),{data:{relevantTerms:[],combinations:[]},usage:E(e?.usage),cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-i}}},$J=e=>{"analyzing"===$d.getState().status?console.log(`[Analysis Log]: ${e}`):console.log(`[Background Log]: ${e}`)},$G=(e,t=5)=>{let r=e.slice(0,t),n=e.length>t?` +${e.length-t}`:"";return r.join(", ")+n},$Y=async(e,t)=>{if(!e||e.length<50)return{data:[],usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:0};let r=Date.now(),n=(({content:e,targetAudience:t})=>`
    TASK: Analyze the content for ** Regional Terminology ** and ** Brand Availability ** conflicts in: ${t}.

    <TargetAudience>
    ${t}
    </TargetAudience>

    Using Google Search (Grounding), verify:
    1. ** Brand Availability **: Are mentioned brands/products actually available/popular in ${t}? (e.g. A Taiwan-only clinic appearing in a Hong Kong article is a mismatch).
    2. ** Regional Vocabulary **: Replace obvious dialect terms (e.g. "è¦–é »" -> "å½±ç‰‡" for TW).

    <ContentSnippet>
    ${e.slice(0,15e3)}...
    </ContentSnippet>

    OUTPUT JSON:
    [
      { "original": "Wrong Term", "replacement": "Correct Term", "reason": "Reason (e.g. 'Taiwan-only brand')" }
    ]
    Return JSON only. If no issues, return [].
    `)({content:e,targetAudience:t}),i=await W.runJson(n,"FLASH",{type:q,items:{type:K,properties:{original:{type:J},replacement:{type:J},reason:{type:J}},required:["original","replacement","reason"]}});return{data:i.data||[],usage:i.usage,cost:i.cost,duration:Date.now()-r}},$X=()=>$d.getState().isStopped,$Q=async e=>{let t=$d.getState(),r=$c.getState(),n=C.getState();t.setStatus("analyzing"),r.setScrapedImages(e.scrapedImages||[]),r.setTargetAudience(e.targetAudience),r.setArticleTitle(e.title||"");let i=z(e.targetAudience);r.setLanguageInstruction(i),console.info("[LangConfig]",{targetAudience:e.targetAudience,languageInstruction:i}),$J(`èªžè¨€è¨­å®šï¼š${(e=>{switch(e){case"zh-HK":return"ç¹é«”ä¸­æ–‡ï¼ˆé¦™æ¸¯ï¼‰";case"zh-MY":return"ç°¡é«”ä¸­æ–‡ï¼ˆé¦¬ä¾†è¥¿äºžï¼‰";default:return"ç¹é«”ä¸­æ–‡ï¼ˆå°ç£ï¼‰"}})(e.targetAudience)}ï¼ˆ${e.targetAudience}ï¼‰`),$J("Starting analysis...");let s={...e,brandKnowledge:r.brandKnowledge},a=async()=>{let i=e.productBrief,a=[];if(!i&&e.productRawText&&e.productRawText.length>5){if($X())return{mapping:[]};t.setGenerationStep("parsing_product"),$J("Parsing product brief and CTA...");let r=await X(e.productRawText);console.log(`[Timer] Product Context Parse: ${r.duration}ms`),i=r.data,$J("Product brief parsed."),n.addCost(r.cost.totalCost,r.usage.totalTokens)}if(i&&i.productName){if($X())return{brief:i,mapping:[]};t.setGenerationStep("mapping_product"),$J("Mapping pain points to product features...");let e=await Q(i,s.targetAudience);if(console.log(`[Timer] Product Mapping: ${e.duration}ms`),a=e.data,r.setProductMapping(a),a.length>0){let e=a[0];$J(`Product-feature mapping ready (${a.length}). e.g., ${e.painPoint} â†’ ${e.productFeature}`)}else $J("Product-feature mapping ready (no matches found).");n.addCost(e.cost.totalCost,e.usage.totalTokens)}return r.setActiveProductBrief(i),{brief:i,mapping:a}},o=async()=>{if($X())return;t.setGenerationStep("nlp_analysis"),$J("Running NLP keyword scan...");let e=await $B(s.referenceContent),i=C.getState(),a=Math.floor(s.referenceContent.length/i.keywordCharDivisor),o=Math.max(i.minKeywords,Math.min(i.maxKeywords,a)),l=e.slice(0,o),d=$G(l.map(e=>e.token),6);if($J(`NLP scan found ${e.length} keywords. Using top ${l.length} (Ratio: 1/${i.keywordCharDivisor}, Min: ${i.minKeywords}): ${d}`),l.length>0&&!$X()){t.setGenerationStep("planning_keywords");try{$J(`Planning keyword strategy (top ${l.length})...`);let t=await $K(s.referenceContent,e,s.targetAudience);console.log(`[Timer] Keyword Action Plan: ${t.duration}ms`),console.log(`[SemanticKeywords] Final aggregated plans: ${t.data.length} / ${l.length}`),r.setKeywordPlans(t.data);let i=$G(t.data.map(e=>e.word),6);$J(`Keyword plan ready (${t.data.length}). Focus: ${i}`),n.addCost(t.cost.totalCost,t.usage.totalTokens)}catch(e){console.warn("Action Plan extraction failed",e),$J("Keyword planning failed (continuing).")}}},l=async()=>{if($X())return;t.setGenerationStep("extracting_structure"),$J("Extracting reference structure and authority signals...");let[e,i]=await Promise.all([cY(s.referenceContent,s.targetAudience),$q(s.authorityTerms||"",s.title,s.websiteType||"General Professional Website",s.targetAudience)]);if(console.log(`[Timer] Narrative Structure (Outline): ${e.duration}ms`),console.log(`[Timer] Authority Analysis: ${i.duration}ms`),$J(`Structure extracted (${e.data?.structure?.length||0} sections).`),$J("Authority terms mapped."),e.data?.structure?.length){let t=$G(e.data.structure.map(e=>e.title),6);$J(`Sections: ${t}`)}return i.data?.relevantTerms?.length&&$J(`Authority terms: ${$G(i.data.relevantTerms,6)}`),n.addCost(e.cost.totalCost,e.usage.totalTokens),n.addCost(i.cost.totalCost,i.usage.totalTokens),r.setRefAnalysis(e.data),r.setAuthAnalysis(i.data),{structRes:e,authRes:i}},d=async()=>{if($X())return;t.setGenerationStep("analyzing_visuals"),$J("Analyzing source images and visual identity...");let i=e.scrapedImages||[],a=i.slice(0,5),o=[...i];if(a.length>0){for(let e=0;e<a.length&&!$X();e++){let t=a[e];if(t.url)try{let r=await $e(t.url);o[e]={...o[e],aiDescription:r.data},n.addCost(r.cost.totalCost,r.usage.totalTokens)}catch(e){console.warn(`Failed to analyze image ${t.url}`,e)}}r.setScrapedImages(o)}try{let e=await $t(o,s.websiteType||"Modern Business");r.setVisualStyle(e.data),$J(`âœ“ Visual style extracted: ${e.data}`),n.addCost(e.cost.totalCost,e.usage.totalTokens)}catch(e){console.warn("Failed to extract visual style",e),$J("Visual style extraction skipped.")}},c=async()=>{if(!$X()){t.setGenerationStep("localizing_hk"),$J("Analyzing regional terminology & brand grounding...");try{let e=await $Y(s.referenceContent,s.targetAudience);if(console.log(`[Timer] Regional Analysis: ${e.duration}ms`),e.data&&e.data.length>0)return $J(`Regional analysis found ${e.data.length} terms to correct.`),e.data;return $J("Regional analysis: No major issues found."),[]}catch(e){return console.warn("Regional analysis failed",e),$J("Regional analysis failed (continuing)."),[]}}};$J("Dispatching analysis tasks with burst protection...");let u=await a();await new Promise(e=>setTimeout(e,1e3));let[p,h,m,f]=await Promise.all([l(),(async()=>(await new Promise(e=>setTimeout(e,1e3)),d()))(),(async()=>(await new Promise(e=>setTimeout(e,2e3)),c()))(),(async()=>(await new Promise(e=>setTimeout(e,3e3)),o()))()]);return p?.structRes?.data&&(p.structRes.data.regionalReplacements=m,r.refAnalysis&&r.setRefAnalysis({...r.refAnalysis,regionalReplacements:m})),$J("All analysis tasks completed. Preparing to write..."),t.setGenerationStep("idle"),{productResult:u,structureResult:p,keywordPromise:Promise.resolve(f),visualPromise:Promise.resolve(h),regionalPromise:Promise.resolve(m)}},$0=e=>(e||"").replace(/^#+\s*/,"").replace(/["â€œâ€]/g,"").trim(),$1=async(e,t)=>{let r=$d.getState(),n=$c.getState(),i=C.getState(),{productResult:s,structureResult:a}=t,o=s?.brief,l=s?.mapping||[],d=a?.structRes.data,c=a?.authRes.data,u=[],p=!1;e.sampleOutline&&e.sampleOutline.trim().length>0?(u=e.sampleOutline.split("\n").map(e=>e.trim()).filter(e=>e.length>0).map(e=>({title:e})),p=!0):d?.structure&&d.structure.length>0?(u=[...d.structure],d.introText&&d.introText.trim().length>0&&u.unshift({title:"å‰è¨€",narrativePlan:[d.introText],subheadings:[],difficulty:"easy"}),p=!1):u=[{title:"Introduction"},{title:"Core Concepts"},{title:"Benefits"},{title:"Applications"},{title:"Conclusion"}],r.setStatus("streaming"),r.setGenerationStep("writing_content"),r.setContent("");let h=n.headingOptimizations||[],m=!p&&h.length>0,f=Array(u.length).fill(""),g=u.map(e=>(e=>{let t=$0(e);if(!m)return t;let r=h.find(e=>{let r=$0(e.h2_before),n=$0(e.h2_after);return r===t||n===t});if(!r)return t;let n=(r.h2_options||[]).map(e=>({text:$0(e.text||""),score:"number"==typeof e.score?e.score:void 0})).filter(e=>e.text&&"number"==typeof e.score).sort((e,t)=>(t.score??-1/0)-(e.score??-1/0)),i=$0(r.h2_after||r.h2_before||t);return $0(n[0]?.text||i||t)})(e.title)),y=[...Array.isArray(d?.keyInformationPoints)?d.keyInformationPoints:[],...Array.isArray(d?.brandExclusivePoints)?d.brandExclusivePoints:[]],x=Array.from(new Set([...(d?.structure||[]).flatMap(e=>[...Array.isArray(e?.keyFacts)?e.keyFacts:[],...Array.isArray(e?.uspNotes)?e.uspNotes:[]]).filter(Boolean),...y])).filter(Boolean),b={...e,productBrief:o,referenceAnalysis:d,authorityAnalysis:c},v=!!e.autoImagePlan,k=(e,t)=>{let r=$0(g[e]||u[e]?.title||`Section ${e+1}`),n="string"==typeof t?t:f[e];return n?`## ${r}

${n}`:`## ${r}

_(Writing...)_`},w=()=>{var e,t;return e=u,t=f.map((e,t)=>e?k(t,e):""),`> ðŸ“‘ **Active Blueprint:** Turbo Mode

`+e.map((e,r)=>{let n=t[r];return n||`> â³ **Writing Section:** ${e.title}...`}).join("\n\n")},N=p?"**User Custom Outline**":"**AI Narrative Structure (Outline)**",$=`> ðŸ“‘ **Active Blueprint:** ${N}

`;r.setContent($);let S=u.map(async(e,t)=>{if($d.getState().isStopped)return;let s=u.map(e=>e.title),a=s.slice(t+1),o=d?.structure.find(t=>t.title===e.title)?.narrativePlan,p=e.specificPlan||o,h=d?.structure.find(t=>t.title===e.title),m=Array.from(new Set([...Array.isArray(e.keyFacts)?e.keyFacts:[],...Array.isArray(e.uspNotes)?e.uspNotes:[],...Array.isArray(h?.keyFacts)?h.keyFacts:[],...Array.isArray(h?.uspNotes)?h.uspNotes:[],...x])).filter(Boolean),g={...b,productMapping:l},y=t>0?[`[Preceding Section: ${s[t-1]}]`]:[];try{let s=await $a(g,e.title,p,d?.generalPlan,$c.getState().keywordPlans||[],y,a,c,m,[],0,e);if(!$d.getState().isStopped){var v;f[t]=(v=s.data.content)?v.replace(/^\s*<h[1-6][^>]*>.*?<\/h[1-6]>\s*/i,"").replace(/^\s*#{1,6}\s.*(\r?\n|$)/,"").trim():"",console.log(`[Timer - Turbo] Section '${e.title}': ${s.duration}ms`),r.setContent(w()),i.addCost(s.cost.totalCost,s.usage.totalTokens),s.data.usedPoints&&s.data.usedPoints.length>0&&n.setCoveredPoints(e=>{let t=s.data.usedPoints.filter(t=>!e.includes(t));return[...e,...t]})}}catch(n){console.error(`Parallel gen error for ${e.title}`,n),f[t]="",r.setContent(w())}});if(await Promise.all(S),$d.getState().isStopped||r.setContent(f.map((e,t)=>k(t)).join("\n\n")),!$d.getState().isStopped){if(v){r.setGenerationStep("generating_images");let t=f.join("\n\n");try{$J("Planning visual assets...");let r=await $i(t,n.scrapedImages,e.targetAudience,n.visualStyle);console.log(`[Images] Planned ${r.data.length} images`),$J(`Visual plan ready: ${r.data.length} images.`),i.addCost(r.cost.totalCost,r.usage.totalTokens);let s=r.data.map(async e=>{if(!$d.getState().isStopped)try{let t=e.category||e.insertAfter||e.id;$J(`Generating image: ${t}...`);let r=await $n(e.generatedPrompt);r.data&&(console.log(`[Images] Generated: ${e.id}`),i.addCost(r.cost.totalCost,r.usage.totalTokens))}catch(t){console.error(`Failed to generate image ${e.id}`,t)}});await Promise.all(s),$J("Image generation completed.")}catch(e){console.error("Image generation phase failed",e),$J("Image generation failed.")}}else $J("Skipping auto image planning (manual only).");r.setGenerationStep("finalizing"),r.setStatus("completed"),r.setGenerationStep("idle")}},$2=async e=>{let t=$d.getState();$d.getState().resetGeneration(),C.getState().resetSessionStats();try{localStorage.removeItem("ai_writer_editor_autosave_v1")}catch(e){console.warn("Failed to clear editor autosave",e)}let r=$c.getState();r.setKeywordPlans([]),r.setRefAnalysis(null),r.setAuthAnalysis(null),r.setScrapedImages([]),r.setVisualStyle(""),r.setCoveredPoints([]),r.setProductMapping([]),r.setActiveProductBrief(void 0),r.setArticleTitle(""),r.setHeadingOptimizations([]),t.setError(null),t.setLastConfig(e);try{let r=await $Q(e);if($d.getState().isStopped)return;t.setAnalysisResults(r),t.setStatus("analysis_ready"),t.setGenerationStep("idle")}catch(e){console.error(e),t.setError(e.message||"An unexpected error occurred during generation."),t.setStatus("error"),t.setGenerationStep("idle")}},$4=async()=>{let e=$d.getState(),t=e.analysisResults,r=e.lastConfig;if(!t||!r){e.setError("å°šæœªå®Œæˆåˆ†æžï¼Œç„¡æ³•ç”Ÿæˆæ®µè½ã€‚è«‹å…ˆåŸ·è¡Œåˆ†æžã€‚"),e.setStatus("error");return}let n=[];if(t.structureResult?.structRes?.data?.structure?.length||n.push("æ–‡ç« æž¶æ§‹ (Structure)"),t.structureResult?.authRes?.data||n.push("æ¬Šå¨åˆ†æž (Authority)"),$c.getState().keywordPlans?.length||n.push("é—œéµå­—è¦åŠƒ (Keywords)"),n.length>0){let t=`åµæ¸¬åˆ°éƒ¨åˆ†åˆ†æžè³‡æ–™ç¼ºå¤±ï¼š
${n.map(e=>`- ${e}`).join("\n")}

æ˜¯å¦ä»è¦å˜—è©¦ç”Ÿæˆï¼Ÿ(é¸æ“‡ã€Œå–æ¶ˆã€å°‡é‡æ–°åŸ·è¡Œåˆ†æž)`;if(!window.confirm(t))return void e.setStatus("idle")}e.setError(null);try{await $1(r,t)}catch(t){console.error(t),e.setError(t?.message||"ç”Ÿæˆæ®µè½æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹é‡è©¦ã€‚"),e.setStatus("error"),e.setGenerationStep("idle")}},$5={"zh-TW":{name:"å°ç£",currency:"NT$/æ–°å°å¹£",excludeRegions:["HK","CN","MY"],examples:["è¦çš®","momoè³¼ç‰©","å°åŒ—æ·é‹","å¥ä¿","é«˜éµ","å…¨è¯","7-11"]},"zh-HK":{name:"é¦™æ¸¯",currency:"HKD/$æ¸¯å¹£",excludeRegions:["TW","CN","MY"],examples:["HKTVmall","æ¸¯éµ","OKä¾¿åˆ©åº—","å…«é”é€š","å¼·ç©é‡‘"]},"zh-MY":{name:"é¦¬ä¾†è¥¿äºž",currency:"RM/é¦¬å¹£",excludeRegions:["TW","HK","CN"],examples:["Lazada","Shopee","Grab","Touch 'n Go","EPF"]}},$6=async(e,t)=>{let r=$5[t];if(0===e.length||!r)return{mappings:[],usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:0};let n=e.map(e=>`- ${e.text} (${e.type})`).join("\n"),i=`
ä½ æ˜¯ä¸€ä½${r.name}å¸‚å ´å°ˆå®¶ã€‚è«‹ç‚ºä»¥ä¸‹éž${r.name}å¯¦é«”æ‰¾å‡º${r.name}é©åˆçš„æ›¿ä»£é¸é …ã€‚

**éœ€è¦æŸ¥æ‰¾æ›¿ä»£çš„å¯¦é«”ï¼š**
${n}

**æ›¿ä»£é¸é …å„ªå…ˆé †åºï¼ˆè«‹ä¾åºå˜—è©¦ï¼‰ï¼š**
1. **ç›´æŽ¥å°æ‡‰** - ${r.name}å¸‚å ´ä¸­åŠŸèƒ½ç›¸åŒçš„å“ç‰Œ/æœå‹™ï¼ˆå¦‚ï¼šå°ç£ã€Œå…¨è¯ã€â†’ é¦™æ¸¯ã€Œç™¾ä½³/æƒ åº·ã€ï¼‰
2. **åŒé¡žæ›¿ä»£** - åŒå“é¡žä¸­${r.name}è¼ƒçŸ¥åçš„å“ç‰Œï¼ˆå¦‚ï¼šå°ç£æœè£å“ç‰Œ â†’ ä»»ä½•é¦™æ¸¯çŸ¥åæœè£å“ç‰Œï¼‰
3. **é€šç”¨æè¿°** - å¦‚æžœæ‰¾ä¸åˆ°å…·é«”å“ç‰Œï¼Œä½¿ç”¨é€šç”¨æè¿°ï¼ˆå¦‚ï¼šã€ŒéŸŒ RENã€â†’ã€Œæœ¬åœ°é‹å‹•æœé£¾å“ç‰Œã€æˆ–ã€ŒçŸ¥åé‹å‹•æœè£åº—ã€ï¼‰
4. **åˆªé™¤** - åªæœ‰åœ¨å®Œå…¨ç„¡æ³•æè¿°æ™‚æ‰ä½¿ç”¨ã€Œ[åˆªé™¤]ã€

**é‡è¦è¦å‰‡ï¼š**
- ç›¡é‡æä¾›æ›¿ä»£ï¼Œä¸è¦è¼•æ˜“ä½¿ç”¨ã€Œ[åˆªé™¤]ã€
- é€šç”¨æè¿°ä¹Ÿæ˜¯å¯æŽ¥å—çš„æ›¿ä»£ï¼ˆå¦‚ã€Œå¤§åž‹è—¥å¦é€£éŽ–åº—ã€ã€ã€Œæœ¬åœ°é›»å•†å¹³å°ã€ï¼‰
- æ¯å€‹è¼¸å…¥çš„å¯¦é«”éƒ½å¿…é ˆæœ‰ä¸€å€‹å°æ‡‰çš„è¼¸å‡º`,s={type:"object",properties:{mappings:{type:"array",items:{type:"object",properties:{type:{type:"string",description:"entity|brand|regulation|currency|location|service"},original:{type:"string",description:"åŽŸå¯¦é«”åç¨±"},regionEquivalent:{type:"string",description:`${r.name}å°æ‡‰çš„çœŸå¯¦å“ç‰Œ/æœå‹™åç¨±ï¼Œå¦‚æ‰¾ä¸åˆ°å‰‡å¡« "[åˆªé™¤]"`},confidence:{type:"number",description:"0.0-1.0 ç½®ä¿¡åº¦"},context:{type:"string",description:"èªªæ˜Žç‚ºä½•é€™æ˜¯åˆé©çš„æ›¿ä»£ï¼Œæˆ–ç‚ºä½•å»ºè­°åˆªé™¤"},sourceRegion:{type:"string",description:"ä¾†æºåœ°å€"}},required:["original","regionEquivalent","context"]}}},required:["mappings"]},a=await W.runJsonWithSearch(i,"FLASH",s),o=a.data.mappings||[];return{mappings:e.map(e=>{let t=o.find(t=>t.original===e.text);return t?{...t,regionEquivalent:"[åˆªé™¤]"===t.regionEquivalent?"":t.regionEquivalent}:{type:e.type,original:e.text,regionEquivalent:"",confidence:0,context:"æœªæ‰¾åˆ°åˆé©æ›¿ä»£ï¼Œå»ºè­°å¾žå…§å®¹ä¸­ç§»é™¤",sourceRegion:e.region}}),usage:a.usage,cost:a.cost,duration:a.duration}},$3=async(e,t,r)=>{let n=$5[r];if(!n||0===t.length)return{localizedGeneralPlan:e.generalPlan,localizedConversionPlan:e.conversionPlan,localizedSections:e.sections,usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:0};let i=t.map(e=>e.replacement?`- ã€Œ${e.original}ã€â†’ã€Œ${e.replacement}ã€${e.reason?`ï¼ˆ${e.reason}ï¼‰`:""}`:`- ã€Œ${e.original}ã€â†’ åˆªé™¤æ­¤è©žï¼Œé‡å¯«ç›¸é—œå¥å­ä½¿å…¶é€šé †`).join("\n"),s=JSON.stringify({generalPlan:e.generalPlan,conversionPlan:e.conversionPlan,sections:e.sections.map(e=>({title:e.title,narrativePlan:e.narrativePlan||[],keyFacts:e.keyFacts||[],uspNotes:e.uspNotes||[],subheadings:e.subheadings||[]}))},null,2),a=`
ä½ æ˜¯ä¸€ä½${n.name}å¸‚å ´å…§å®¹æœ¬åœ°åŒ–å°ˆå®¶ã€‚è«‹å°‡ä»¥ä¸‹æ®µè½è¨ˆåŠƒé€²è¡Œæœ¬åœ°åŒ–æ”¹å¯«ï¼Œä½¿å…¶å®Œå…¨é©åˆ${n.name}è®€è€…ã€‚

**æœ¬åœ°åŒ–æ›¿æ›æŒ‡å¼•ï¼š**
${i}

**åŽŸå§‹æ®µè½è¨ˆåŠƒï¼š**
${s}

**æœ¬åœ°åŒ–è¦å‰‡ï¼š**
1. æ‡‰ç”¨ä¸Šè¿°æ›¿æ›æŒ‡å¼•ï¼Œå°‡éž${n.name}çš„å“ç‰Œ/æœå‹™/å¯¦é«”æ›¿æ›ç‚ºé©ç•¶çš„æ›¿ä»£
2. å¦‚æžœæ›¿æ›å¾Œå¥å­ä¸é€šé †ï¼Œè«‹é©åº¦æ”¹å¯«ä½¿å…¶è‡ªç„¶
3. å¦‚æžœæŸè©žéœ€è¦åˆªé™¤ï¼Œè«‹é‡å¯«è©²å¥å­ä½¿å…¶æ„æ€å®Œæ•´ï¼Œä¸è¦ç•™ä¸‹ç©ºç™½
4. ä¿æŒåŽŸæœ‰çš„çµæ§‹å’Œæ ¼å¼ï¼ˆæ•¸çµ„ã€æ¨™é¡Œç­‰ï¼‰
5. å°æ–¼ generalPlan å’Œ conversionPlanï¼Œç¢ºä¿ç­–ç•¥ä»ç„¶é©ç”¨æ–¼${n.name}å¸‚å ´

**è«‹è¼¸å‡º JSONï¼Œæ ¼å¼èˆ‡è¼¸å…¥ç›¸åŒï¼š**
{
  "generalPlan": ["æœ¬åœ°åŒ–å¾Œçš„ç­–ç•¥..."],
  "conversionPlan": ["æœ¬åœ°åŒ–å¾Œçš„è½‰æ›ç­–ç•¥..."],
  "sections": [
    {
      "title": "æœ¬åœ°åŒ–å¾Œçš„æ¨™é¡Œ",
      "narrativePlan": ["æœ¬åœ°åŒ–å¾Œçš„æ•˜äº‹è¨ˆåŠƒ..."],
      "keyFacts": ["æœ¬åœ°åŒ–å¾Œçš„é—œéµäº‹å¯¦..."],
      "uspNotes": ["æœ¬åœ°åŒ–å¾Œçš„è³£é»ž..."],
      "subheadings": ["æœ¬åœ°åŒ–å¾Œçš„å­æ¨™é¡Œ..."]
    }
  ]
}

åªè¼¸å‡º JSONï¼Œä¸è¦å…¶ä»–æ–‡å­—ã€‚`,o={type:"object",properties:{generalPlan:{type:"array",items:{type:"string"}},conversionPlan:{type:"array",items:{type:"string"}},sections:{type:"array",items:{type:"object",properties:{title:{type:"string"},narrativePlan:{type:"array",items:{type:"string"}},keyFacts:{type:"array",items:{type:"string"}},uspNotes:{type:"array",items:{type:"string"}},subheadings:{type:"array",items:{type:"string"}}}}}},required:["generalPlan","conversionPlan","sections"]},l=await W.runJson(a,"FLASH",o);return{localizedGeneralPlan:l.data.generalPlan||e.generalPlan,localizedConversionPlan:l.data.conversionPlan||e.conversionPlan,localizedSections:l.data.sections||e.sections,usage:l.usage,cost:l.cost,duration:l.duration}},$9=c("circle-dot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]),$7=c("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),$8=c("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Se=c("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),St=({open:e,onClose:t,items:r,onSave:n})=>{let[a,o]=(0,s.useState)([]),[l,d]=(0,s.useState)(null),[c,p]=(0,s.useState)("");(0,s.useEffect)(()=>{e&&(o(r.map(e=>({...e,action:e.replacement?"replace":"delete",customReplacement:e.replacement}))),d(null),p(""))},[e,r]);let h=(e,t)=>{o(r=>r.map((r,n)=>n===e?{...r,action:t,customReplacement:"keep"===t?"":r.customReplacement}:r))},m=()=>{d(null),p("")},f=(0,s.useMemo)(()=>{let e=a.filter(e=>"replace"===e.action).length;return{replaceCount:e,keepCount:a.filter(e=>"keep"===e.action).length,deleteCount:a.filter(e=>"delete"===e.action).length}},[a]);return e?(0,i.jsxs)("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),(0,i.jsxs)("div",{className:"relative bg-white w-full max-w-2xl max-h-[80vh] rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-amber-50 to-orange-50 flex items-center justify-between gap-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 rounded-xl bg-amber-600 text-white flex items-center justify-center shadow-lg shadow-amber-200",children:(0,i.jsx)(NB,{className:"w-5 h-5"})}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-900 leading-tight",children:"æœ¬åœ°æ›¿æ›ç·¨è¼¯å™¨"}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"é¸æ“‡æ›¿æ›ã€ä¿ç•™åŽŸæ–‡æˆ–åˆªé™¤å„é …ç›®"})]})]}),(0,i.jsx)("button",{onClick:t,className:"p-2 rounded-lg hover:bg-white/80 text-gray-500 transition","aria-label":"Close modal",children:(0,i.jsx)(po,{className:"w-5 h-5"})})]}),(0,i.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-3",children:0===a.length?(0,i.jsx)("p",{className:"text-sm text-gray-500 text-center py-8",children:"æ²’æœ‰éœ€è¦æ›¿æ›çš„é …ç›®ã€‚"}):a.map((e,t)=>(0,i.jsxs)("div",{className:`rounded-xl border p-4 transition-all ${"replace"===e.action?"bg-amber-50/50 border-amber-200":"keep"===e.action?"bg-blue-50/50 border-blue-200":"bg-red-50/50 border-red-200"}`,children:[(0,i.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[(0,i.jsx)("span",{className:"text-red-500 line-through font-medium",children:e.original}),"keep"!==e.action&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(NH,{className:"w-4 h-4 text-gray-400"}),l===t?(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("input",{type:"text",value:c,onChange:e=>p(e.target.value),className:"px-2 py-1 text-sm border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-200",placeholder:"è¼¸å…¥æ›¿æ›æ–‡å­—...",autoFocus:!0}),(0,i.jsx)("button",{onClick:()=>{o(e=>e.map((e,r)=>r===t?{...e,customReplacement:c,action:"replace"}:e)),d(null),p("")},className:"p-1.5 rounded-lg bg-emerald-100 text-emerald-700 hover:bg-emerald-200 transition",children:(0,i.jsx)(pr,{className:"w-4 h-4"})}),(0,i.jsx)("button",{onClick:m,className:"p-1.5 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition",children:(0,i.jsx)(po,{className:"w-4 h-4"})})]}):(0,i.jsxs)(i.Fragment,{children:["delete"===e.action?(0,i.jsx)("span",{className:"text-red-500 font-semibold italic",children:"(åˆªé™¤)"}):(0,i.jsx)("span",{className:"text-emerald-600 font-semibold",children:e.customReplacement||e.replacement||"(æœªè¨­å®š)"}),"replace"===e.action&&(0,i.jsx)("button",{onClick:()=>{d(t),p(a[t]?.customReplacement||"")},className:"p-1 rounded-lg hover:bg-amber-100 text-amber-600 transition",title:"ç·¨è¼¯æ›¿æ›æ–‡å­—",children:(0,i.jsx)(u,{className:"w-3.5 h-3.5"})})]})]}),"keep"===e.action&&(0,i.jsx)("span",{className:"text-blue-600 font-semibold",children:"(ä¿ç•™åŽŸæ–‡)"})]}),e.reason&&(0,i.jsx)("p",{className:"text-xs text-gray-500 leading-relaxed",children:e.reason})]})}),(0,i.jsxs)("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:[(0,i.jsxs)("button",{onClick:()=>h(t,"replace"),className:`px-3 py-1.5 text-xs font-semibold rounded-lg border transition flex items-center gap-1.5 ${"replace"===e.action?"bg-amber-600 text-white border-amber-600":"bg-white text-amber-700 border-amber-200 hover:bg-amber-50"}`,children:[(0,i.jsx)(NB,{className:"w-3.5 h-3.5"}),"æ›¿æ›"]}),(0,i.jsxs)("button",{onClick:()=>h(t,"keep"),className:`px-3 py-1.5 text-xs font-semibold rounded-lg border transition flex items-center gap-1.5 ${"keep"===e.action?"bg-blue-600 text-white border-blue-600":"bg-white text-blue-700 border-blue-200 hover:bg-blue-50"}`,children:[(0,i.jsx)(Se,{className:"w-3.5 h-3.5"}),"ä¿ç•™"]}),(0,i.jsxs)("button",{onClick:()=>h(t,"delete"),className:`px-3 py-1.5 text-xs font-semibold rounded-lg border transition flex items-center gap-1.5 ${"delete"===e.action?"bg-red-600 text-white border-red-600":"bg-white text-red-700 border-red-200 hover:bg-red-50"}`,children:[(0,i.jsx)(eo,{className:"w-3.5 h-3.5"}),"åˆªé™¤"]})]})]},t))}),(0,i.jsxs)("div",{className:"px-6 py-4 border-t border-gray-100 bg-gray-50/50 flex items-center justify-between gap-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,i.jsxs)("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded-full font-semibold",children:["æ›¿æ›: ",f.replaceCount]}),(0,i.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full font-semibold",children:["ä¿ç•™: ",f.keepCount]}),(0,i.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full font-semibold",children:["åˆªé™¤: ",f.deleteCount]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm font-semibold text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition",children:"å–æ¶ˆ"}),(0,i.jsx)("button",{onClick:()=>{n(a),t()},className:"px-4 py-2 text-sm font-semibold text-white bg-gradient-to-r from-amber-600 to-orange-600 rounded-lg shadow-sm hover:brightness-110 transition",children:"å„²å­˜è®Šæ›´"})]})]})]})]}):null},Sr=e=>e.split("\n").map(e=>e.trim()).filter(Boolean),Sn=({open:e,onClose:t,sections:r,generalPlan:n=[],conversionPlan:a=[],regionalReplacements:o=[],localizedSections:l,localizedGeneralPlan:d,localizedConversionPlan:c,isLocalizing:u=!1,onStartWriting:p,onSavePlan:h,onLocalizeAll:f,onSaveReplacements:g})=>{let[y,x]=(0,s.useState)([]),[b,v]=(0,s.useState)(new Set),[k,w]=(0,s.useState)(!1),[N,$]=(0,s.useState)(!1),S=!!(l&&l.length>0),j=k&&S?l:r,T=k&&S?d||[]:n,_=k&&S?c||[]:a,I=async()=>{0!==o.length&&f&&(await f(),w(!0))};(0,s.useEffect)(()=>{e&&(x((j||[]).map(e=>({...e,selected:!0,narrativeText:(e.narrativePlan||[]).join("\n"),keyFactsText:(e.keyFacts||[]).join("\n"),uspText:(e.uspNotes||[]).join("\n"),subheadingsText:(e.subheadings||[]).join("\n")}))),v(new Set))},[e,j,k]);let C=(0,s.useMemo)(()=>y.length>0&&y.every(e=>e.selected),[y]),A=(0,s.useMemo)(()=>y.some(e=>e.selected),[y]),O=(e=!1)=>y.filter(t=>!e||t.selected).map(e=>({...e,narrativePlan:Sr(e.narrativeText),keyFacts:Sr(e.keyFactsText),uspNotes:Sr(e.uspText),subheadings:Sr(e.subheadingsText)})),E=(e=!1)=>{let r=O(e),n=O(!1);h&&h(n),e&&p&&p(r),e||t()},M=(0,s.useMemo)(()=>y.map((e,t)=>({data:{...e,narrativePlan:Sr(e.narrativeText),keyFacts:Sr(e.keyFactsText),uspNotes:Sr(e.uspText),subheadings:Sr(e.subheadingsText)},selected:e.selected,idx:t})),[y]);return e?(0,i.jsxs)("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:t}),(0,i.jsxs)("div",{className:"relative bg-white w-full max-w-6xl h-[85vh] rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/70 flex items-center justify-between gap-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 rounded-xl bg-blue-600 text-white flex items-center justify-center shadow-lg shadow-blue-200",children:(0,i.jsx)(m,{className:"w-5 h-5"})}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-900 leading-tight",children:"æ®µè½è¨ˆåŠƒé è¦½"}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"å¯åœ¨å¯«ä½œå‰èª¿æ•´æ®µè½å…§å®¹èˆ‡å‹¾é¸è¦å¯«çš„æ®µè½ã€‚"})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("button",{onClick:()=>{0===y.length||x(y.map(e=>({...e,selected:!C})))},className:`px-3 py-2 text-sm font-semibold rounded-lg border ${C?"bg-gray-50 text-gray-700 border-gray-200":"bg-blue-50 text-blue-700 border-blue-200"}`,children:C?"å–æ¶ˆå…¨é¸":"å…¨é¸"}),S&&(0,i.jsxs)("button",{onClick:()=>w(!k),className:`px-3 py-2 text-sm font-semibold rounded-lg border flex items-center gap-1.5 transition ${k?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-50 text-gray-600 border-gray-200"}`,children:[(0,i.jsx)($z,{className:"w-4 h-4"}),k?"æœ¬åœ°åŒ–ç‰ˆæœ¬ âœ“":"åŽŸç‰ˆ"]}),(0,i.jsx)("button",{onClick:()=>E(!1),className:"px-3 py-2 text-sm font-semibold text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition",children:"å„²å­˜è¨ˆåŠƒ"}),(0,i.jsxs)("button",{onClick:I,className:"px-3 py-2 text-sm font-semibold text-amber-700 bg-amber-50 border border-amber-200 rounded-lg hover:bg-amber-100 transition flex items-center gap-1.5 disabled:opacity-50",disabled:0===o.length||u,children:[(0,i.jsx)($z,{className:"w-4 h-4"}),u?"è™•ç†ä¸­...":"å…¨éƒ¨æ®µè½æœ¬åœ°åŒ–"]}),(0,i.jsx)("button",{onClick:()=>E(!0),className:"px-3 py-2 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg shadow-sm hover:brightness-110 transition disabled:opacity-50",disabled:!p||!A,children:"ç«‹å³é–‹å§‹å¯«ä½œ"}),(0,i.jsx)("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100 text-gray-500","aria-label":"Close plan modal",children:(0,i.jsx)(po,{className:"w-5 h-5"})})]})]}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[(0,i.jsx)("aside",{className:"w-full lg:w-72 border-r border-gray-100 bg-white/80",children:(0,i.jsxs)("div",{className:"p-4 space-y-3 h-full overflow-y-auto custom-scrollbar",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase tracking-wide",children:[(0,i.jsx)(NV,{className:"w-4 h-4 text-blue-600"}),"Global Plan",k&&S&&(0,i.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 bg-emerald-100 text-emerald-700 rounded-full",children:"æœ¬åœ°åŒ–"})]}),T.length>0?(0,i.jsx)("ul",{className:"space-y-2",children:T.map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[(0,i.jsx)("span",{className:"text-blue-400 mt-1",children:"â€¢"}),(0,i.jsx)("span",{className:"leading-snug",children:e})]},t))}):(0,i.jsx)("p",{className:"text-sm text-gray-400",children:"å°šæœªæœ‰å…¨åŸŸå¯«ä½œè¦å‰‡ã€‚"}),(0,i.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase tracking-wide",children:[(0,i.jsx)($T,{className:"w-4 h-4 text-emerald-600"}),"Conversion Plan",k&&S&&(0,i.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 bg-emerald-100 text-emerald-700 rounded-full",children:"æœ¬åœ°åŒ–"})]}),_.length>0?(0,i.jsx)("ul",{className:"mt-2 space-y-2",children:_.map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[(0,i.jsx)("span",{className:"text-emerald-400 mt-1",children:"â€¢"}),(0,i.jsx)("span",{className:"leading-snug",children:e})]},t))}):(0,i.jsx)("p",{className:"text-sm text-gray-400",children:"å°šæœªæœ‰è½‰æ›ç­–ç•¥ã€‚"})]}),o.length>0&&(0,i.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase tracking-wide",children:[(0,i.jsx)(NB,{className:"w-4 h-4 text-amber-600"}),"éœ€è¦æ›¿æ› (",o.length,")"]}),(0,i.jsxs)("button",{onClick:()=>$(!0),className:"p-1.5 rounded-lg bg-amber-100 text-amber-700 hover:bg-amber-200 transition flex items-center gap-1 text-xs font-semibold",title:"ç·¨è¼¯æ›¿æ›è¦å‰‡",children:[(0,i.jsx)(eN,{className:"w-3.5 h-3.5"}),"ç·¨è¼¯"]})]}),(0,i.jsx)("ul",{className:"mt-2 space-y-2",children:o.map((e,t)=>(0,i.jsxs)("li",{className:`text-sm rounded p-2 border ${e.replacement?"bg-amber-50/50 border-amber-100":"bg-red-50/50 border-red-100"}`,children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,i.jsx)("span",{className:"text-red-500 line-through text-xs",children:e.original}),(0,i.jsx)("span",{className:"text-gray-400",children:"â†’"}),e.replacement?(0,i.jsx)("span",{className:"text-emerald-600 font-semibold text-xs",children:e.replacement}):(0,i.jsx)("span",{className:"text-red-500 font-semibold italic text-xs",children:"(åˆªé™¤)"})]}),e.reason&&(0,i.jsx)("p",{className:"text-[10px] text-gray-500 mt-1",children:e.reason})]},t))})]})]})}),(0,i.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-white",children:0===y.length?(0,i.jsx)("div",{className:"h-full flex items-center justify-center text-sm text-gray-500",children:"å°šæœªç”¢ç”Ÿæ®µè½è¨ˆåŠƒï¼Œè«‹å…ˆåŸ·è¡Œåˆ†æžã€‚"}):(0,i.jsx)("div",{className:"p-4 space-y-3",children:M.map(e=>{var t;let r,n,s=b.has(e.idx);return(0,i.jsxs)("div",{className:"border border-gray-100 rounded-xl p-4 shadow-[0_2px_6px_rgba(0,0,0,0.03)] bg-white hover:shadow-md transition",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[(0,i.jsxs)("label",{className:"flex items-start gap-2 cursor-pointer select-none",children:[(0,i.jsx)("input",{type:"checkbox",className:"mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:e.selected,onChange:t=>x(r=>r.map((r,n)=>n===e.idx?{...r,selected:t.target.checked}:r))}),(0,i.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center font-bold",children:e.idx+1})]}),(0,i.jsx)("div",{className:"flex-1",children:s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{value:e.data.title,onChange:t=>x(r=>r.map((r,n)=>n===e.idx?{...r,title:t.target.value}:r)),className:"text-base font-bold text-gray-900 leading-tight break-words w-full bg-white border border-gray-200 rounded-lg px-2 py-1"}),(0,i.jsx)("input",{value:e.data.coreQuestion||"",onChange:t=>x(r=>r.map((r,n)=>n===e.idx?{...r,coreQuestion:t.target.value}:r)),placeholder:"Core question (å¯ç©ºç™½)",className:"mt-1 text-xs text-gray-600 w-full bg-white border border-gray-200 rounded-lg px-2 py-1"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h4",{className:"text-base font-bold text-gray-900 leading-tight break-words",children:e.data.title}),e.data.coreQuestion?(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5 break-words",children:["Q: ",e.data.coreQuestion]}):null]})})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[e.data.isChecklist&&(0,i.jsxs)("span",{className:"px-2 py-0.5 text-[11px] font-bold rounded-full border bg-teal-50 text-teal-700 border-teal-100 flex items-center gap-1",children:[(0,i.jsx)(N1,{className:"w-3 h-3"}),"Checklist"]}),(t=e.data.difficulty,n=(r={easy:{label:"Easy",bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-100"},medium:{label:"Medium",bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-100"},unclear:{label:"Unclear",bg:"bg-rose-50",text:"text-rose-700",border:"border-rose-100"}})[t||"easy"]||r.easy,(0,i.jsx)("span",{className:`px-2 py-0.5 text-[11px] font-bold rounded-full border ${n.bg} ${n.text} ${n.border}`,children:n.label})),(0,i.jsxs)("button",{onClick:()=>v(t=>{let r=new Set(t);return r.has(e.idx)?r.delete(e.idx):r.add(e.idx),r}),className:"text-xs font-semibold text-blue-700 hover:underline flex items-center gap-1",children:[(0,i.jsx)($7,{className:"w-3.5 h-3.5"}),s?"å®Œæˆ":"ç·¨è¼¯"]})]})]}),(0,i.jsxs)("div",{className:"mt-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-blue-700 uppercase tracking-wide",children:[(0,i.jsx)(em,{className:"w-4 h-4"}),"Narrative Plan"]}),s?(0,i.jsx)("textarea",{value:y[e.idx]?.narrativeText||"",onChange:t=>x(r=>r.map((r,n)=>n===e.idx?{...r,narrativeText:t.target.value}:r)),className:"mt-2 w-full border border-blue-100 rounded-lg p-3 text-sm text-gray-700 bg-blue-50/40 focus:outline-none focus:ring-2 focus:ring-blue-200",rows:3,placeholder:"æ¯è¡Œä¸€å€‹é‡é»ž"}):(0,i.jsxs)("ul",{className:"mt-2 space-y-1.5",children:[(e.data.narrativePlan||[]).map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-gray-700 leading-snug flex items-start gap-2",children:[(0,i.jsx)("span",{className:"text-blue-400 mt-1",children:"â€¢"}),(0,i.jsx)("span",{className:"break-words",children:e})]},t)),0===(e.data.narrativePlan||[]).length&&(0,i.jsx)("li",{className:"text-sm text-gray-400",children:"æœªæä¾› narrative plan"})]})]}),(0,i.jsxs)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,i.jsxs)("div",{className:"border border-gray-100 rounded-lg p-3 bg-gray-50/70",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-600 uppercase tracking-wide",children:[(0,i.jsx)($I,{className:"w-4 h-4 text-gray-500"}),"Key Facts"]}),s?(0,i.jsx)("textarea",{value:y[e.idx]?.keyFactsText||"",onChange:t=>x(r=>r.map((r,n)=>n===e.idx?{...r,keyFactsText:t.target.value}:r)),className:"mt-2 w-full border border-gray-200 rounded-lg p-2 text-sm text-gray-700 bg-white focus:outline-none focus:ring-2 focus:ring-gray-200 max-h-40 overflow-y-auto",rows:4,placeholder:"æ¯è¡Œä¸€æ¢ key fact"}):(0,i.jsxs)("ul",{className:"mt-2 space-y-1 max-h-40 overflow-y-auto pr-1 custom-scrollbar",children:[(e.data.keyFacts||[]).map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-gray-700 flex items-start gap-2 leading-snug",children:[(0,i.jsx)("span",{className:"text-gray-400 mt-1",children:"â€¢"}),(0,i.jsx)("span",{className:"break-words",children:e})]},t)),0===(e.data.keyFacts||[]).length&&(0,i.jsx)("li",{className:"text-sm text-gray-400",children:"æœªæä¾› key facts"})]})]}),(0,i.jsxs)("div",{className:"border border-purple-100 rounded-lg p-3 bg-purple-50/60",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-700 uppercase tracking-wide",children:[(0,i.jsx)($9,{className:"w-4 h-4"}),"USP / è³£é»ž"]}),s?(0,i.jsx)("textarea",{value:y[e.idx]?.uspText||"",onChange:t=>x(r=>r.map((r,n)=>n===e.idx?{...r,uspText:t.target.value}:r)),className:"mt-2 w-full border border-purple-100 rounded-lg p-2 text-sm text-purple-800 bg-white focus:outline-none focus:ring-2 focus:ring-purple-200",rows:3,placeholder:"æ¯è¡Œä¸€å€‹ USP"}):(0,i.jsxs)("ul",{className:"mt-2 space-y-1",children:[(e.data.uspNotes||[]).map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-purple-700 flex items-start gap-2 leading-snug",children:[(0,i.jsx)("span",{className:"text-purple-300 mt-1",children:"â€¢"}),(0,i.jsx)("span",{className:"break-words",children:e})]},t)),0===(e.data.uspNotes||[]).length&&(0,i.jsx)("li",{className:"text-sm text-purple-400",children:"æœªæä¾› USP"})]})]})]}),(0,i.jsxs)("div",{className:"mt-3 p-3 rounded-lg border border-amber-100 bg-amber-50/60",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-amber-700 uppercase tracking-wide",children:[(0,i.jsx)(NH,{className:"w-4 h-4"}),"å»ºè­°å­æ¨™é¡Œ (H3)"]}),s?(0,i.jsx)("textarea",{value:y[e.idx]?.subheadingsText||"",onChange:t=>x(r=>r.map((r,n)=>n===e.idx?{...r,subheadingsText:t.target.value}:r)),className:"mt-2 w-full border border-amber-100 rounded-lg p-2 text-sm text-amber-800 bg-white focus:outline-none focus:ring-2 focus:ring-amber-200",rows:2,placeholder:"æ¯è¡Œä¸€å€‹ H3 å»ºè­°"}):(0,i.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(e.data.subheadings||[]).map((e,t)=>(0,i.jsx)("span",{className:"text-xs px-2.5 py-1 rounded-full bg-white border border-amber-200 text-amber-700 break-words",children:e},t)),0===(e.data.subheadings||[]).length&&(0,i.jsx)("span",{className:"text-xs text-amber-500",children:"æœªæä¾› H3 å»ºè­°"})]})]}),e.data.suppress&&e.data.suppress.length>0&&(0,i.jsxs)("div",{className:"mt-3 p-3 rounded-lg border border-rose-100 bg-rose-50/60",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-rose-700 uppercase tracking-wide",children:[(0,i.jsx)($8,{className:"w-4 h-4"}),"ä¸æ‡‰æœ‰ (Suppress)"]}),(0,i.jsx)("ul",{className:"mt-2 space-y-1",children:e.data.suppress.map((e,t)=>(0,i.jsxs)("li",{className:"text-sm text-rose-700 flex items-start gap-2 leading-snug",children:[(0,i.jsx)("span",{className:"text-rose-300 mt-1",children:"-"}),(0,i.jsx)("span",{className:"break-words",children:e})]},t))})]})]},`${e.data.title}-${e.idx}`)})})})]})]}),(0,i.jsx)(St,{open:N,onClose:()=>$(!1),items:o,onSave:e=>{g&&g(e),$(!1)}})]}):null},Si=c("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),Ss=c("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Sa=c("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),So=({open:e,onClose:t})=>{let{modelFlash:r,modelImage:n,keywordCharDivisor:s,minKeywords:a,maxKeywords:o,setModelFlash:l,setModelImage:d,setKeywordCharDivisor:c,setMinKeywords:u,setMaxKeywords:p,resetSettings:h}=C();return e?(0,i.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-md",onClick:t}),(0,i.jsxs)("div",{className:"relative bg-white w-full max-w-lg rounded-3xl shadow-2xl border border-gray-100 flex flex-col overflow-hidden animate-in fade-in zoom-in duration-200",children:[(0,i.jsxs)("div",{className:"px-8 py-6 border-b border-gray-50 bg-gradient-to-br from-gray-50 to-white flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-gray-900 text-white flex items-center justify-center shadow-xl shadow-gray-200",children:(0,i.jsx)(x,{className:"w-6 h-6"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-xl font-black text-gray-900 tracking-tight",children:"System Settings"}),(0,i.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Configure models and magic numbers"})]})]}),(0,i.jsx)("button",{onClick:t,className:"p-2 rounded-xl hover:bg-gray-100 text-gray-400 hover:text-gray-900 transition-all",children:(0,i.jsx)(po,{className:"w-6 h-6"})})]}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:[(0,i.jsxs)("section",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-gray-900",children:[(0,i.jsx)(Si,{className:"w-5 h-5 text-blue-600"}),(0,i.jsx)("h4",{className:"font-bold text-sm uppercase tracking-widest",children:"AI Core Models"})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{className:"text-xs font-bold text-gray-500 ml-1",children:"Text Analysis & Writing (FLASH)"}),(0,i.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-2xl text-sm font-mono focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all",placeholder:"e.g. gemini-3-flash-preview"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{className:"text-xs font-bold text-gray-500 ml-1",children:"Vision & Image Understanding"}),(0,i.jsx)("input",{type:"text",value:n,onChange:e=>d(e.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-2xl text-sm font-mono focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all",placeholder:"e.g. google/gemini-2.5-flash-image"})]})]})]}),(0,i.jsxs)("section",{className:"space-y-4 pt-4 border-t border-gray-50",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-gray-900",children:[(0,i.jsx)($C,{className:"w-5 h-5 text-emerald-600"}),(0,i.jsx)("h4",{className:"font-bold text-sm uppercase tracking-widest",children:"Keyword Logic (NLP)"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,i.jsx)("label",{className:"text-xs font-bold text-gray-500 ml-1",children:"Char count divisor (1 keyword per X chars)"}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("input",{type:"range",min:"50",max:"1000",step:"50",value:s,onChange:e=>c(parseInt(e.target.value)),className:"flex-1 accent-gray-900"}),(0,i.jsx)("span",{className:"w-12 text-center font-bold text-gray-900 bg-gray-50 py-1 rounded-lg border border-gray-100",children:s})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{className:"text-xs font-bold text-gray-500 ml-1",children:"Min Keywords"}),(0,i.jsx)("input",{type:"number",value:a,onChange:e=>u(parseInt(e.target.value)),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{className:"text-xs font-bold text-gray-500 ml-1",children:"Max Keywords"}),(0,i.jsx)("input",{type:"number",value:o,onChange:e=>p(parseInt(e.target.value)),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all"})]})]}),(0,i.jsx)("p",{className:"text-[10px] text-gray-400 italic leading-tight",children:"Calculation: limit = clamp(min, max, floor(content_length / divisor))"})]})]}),(0,i.jsxs)("div",{className:"px-8 py-6 bg-gray-50/50 border-t border-gray-50 flex items-center justify-between",children:[(0,i.jsxs)("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 text-xs font-bold text-gray-400 hover:text-red-500 transition-colors",children:[(0,i.jsx)(Ss,{className:"w-3.5 h-3.5"}),"Reset Defaults"]}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("button",{onClick:t,className:"px-6 py-2.5 text-sm font-bold text-gray-600 hover:text-gray-900 transition-colors",children:"Cancel"}),(0,i.jsxs)("button",{onClick:t,className:"flex items-center gap-2 px-8 py-2.5 bg-gray-900 text-white text-sm font-bold rounded-2xl shadow-xl shadow-gray-200 hover:shadow-gray-300 active:scale-95 transition-all",children:[(0,i.jsx)(Sa,{className:"w-4 h-4"}),"Save Config"]})]})]})]})]}):null},Sl="app_access_granted",Sd="app_access_granted_at";function Sc(){let e,t,r,n,a,o,l,d=(0,s.useMemo)(()=>"8549a21a0ae3c2595e3736d2f90ac96ec0d2a390d6eacac74fa2c6ae1c40ea4f",[]),c=C(),u=$d(),p=$c(),{isUnlocked:h,unlock:m}=function(){let[e,t]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=localStorage.getItem(Sl),r=localStorage.getItem(Sd);if("1"===e&&r){let e=Number(r);if(!Number.isNaN(e)&&Date.now()-e<6048e5)return void t(!0)}localStorage.removeItem(Sl),localStorage.removeItem(Sd)},[]),{isUnlocked:e,unlock:()=>{localStorage.setItem(Sl,"1"),localStorage.setItem(Sd,Date.now().toString()),t(!0)}}}(),{structurePoints:f}=function(){let e=$d(),t=$c(),{contentScore:r,setContentScore:n}=C(),i=(0,s.useMemo)(()=>{let e=t.refAnalysis?.structure||[],r=new Set,n=new Set,i=Array.isArray(t.refAnalysis?.keyInformationPoints)?t.refAnalysis?.keyInformationPoints:[],s=Array.isArray(t.refAnalysis?.brandExclusivePoints)?t.refAnalysis?.brandExclusivePoints:[];return i.forEach(e=>{e&&r.add(e)}),s.forEach(e=>{e&&n.add(e)}),e.forEach(e=>{(Array.isArray(e?.keyFacts)?e.keyFacts:[]).forEach(e=>{e&&r.add(e)}),(Array.isArray(e?.uspNotes)?e.uspNotes:[]).forEach(e=>{e&&n.add(e)})}),{general:Array.from(r),brand:Array.from(n)}},[t.refAnalysis]);return(0,s.useEffect)(()=>{if(!e.content||"idle"===e.status){let e={value:0,label:"Start Writing",color:"text-gray-300"};r.value!==e.value&&n(e);return}let s=0,a=0;if(t.keywordPlans.length>0){let r=(e.content||"").toLowerCase();s+=50*(t.keywordPlans.filter(e=>e.word&&r.includes(e.word.toLowerCase())).length/t.keywordPlans.length),a++}let o=i.general.length+i.brand.length;o>0?(s+=50*(t.coveredPoints.length/o),a++):s+=50,0===t.keywordPlans.length&&(s*=2);let l="Needs Work",d="text-red-500";(s=Math.min(100,Math.round(s)))>=80?(l="Excellent",d="text-emerald-500"):s>=50&&(l="Good",d="text-amber-500");let c={value:s,label:l,color:d};(r.value!==c.value||r.label!==c.label)&&n(c)},[e.content,t.keywordPlans,t.coveredPoints,t.refAnalysis,i,e.status,r.value,r.label,n]),{structurePoints:i}}(),{generate:g,startWriting:y,stop:x}=(e=cH({mutationFn:e=>$2(e)}),t=cH({mutationFn:()=>$4()}),r=(0,s.useCallback)(async t=>{let r=$d.getState(),n=!!r.analysisResults,i=(r.content||"").trim().length>0;(!n&&!i||window.confirm("å·²ç¶“æœ‰åˆ†æžçµæžœæˆ–å…§å®¹ï¼Œé‡æ–°åˆ†æžæœƒè¦†è“‹ç›®å‰çš„è³‡æ–™ï¼Œç¢ºå®šè¦ç¹¼çºŒå—Žï¼Ÿ"))&&await e.mutateAsync(t)},[e]),{generate:r,startWriting:(0,s.useCallback)(async()=>{await t.mutateAsync()},[t]),stop:(0,s.useCallback)(()=>{$d.getState().stopGeneration()},[]),status:e.status});n=$d(),a=$c(),o=(0,s.useRef)(!1),l=(0,s.useRef)(!1),(0,s.useEffect)(()=>{if(o.current)return;let e=["pro_content_writer_analysis","pro_content_writer_generation","pro_content_writer_inputs_simple_v4","ai_writer_editor_autosave_v1"];!e.some(e=>localStorage.getItem(e))||(o.current=!0,window.confirm("åµæ¸¬åˆ°ä¸Šæ¬¡çš„è³‡æ–™ï¼Œæ˜¯å¦æ¢å¾©? é¸æ“‡ã€Œå–æ¶ˆã€å°‡æ¸…ç©ºä¸¦é‡æ–°é–‹å§‹ã€‚")||(e.forEach(e=>localStorage.removeItem(e)),a.reset(),n.resetGeneration()))},[a,n]),(0,s.useEffect)(()=>{let e;if(l.current||"idle"!==n.status||n.analysisResults||!(a.refAnalysis?.structure?.length||a.keywordPlans.length||a.authAnalysis))return;let t=localStorage.getItem("pro_content_writer_inputs_simple_v4");if(!t)return;try{e=JSON.parse(t)}catch(e){return}let r=(e?.title||a.articleTitle||"").trim(),i=(e?.referenceContent||"").trim();if(!r||!i)return;let s={title:r,referenceContent:i,sampleOutline:e?.sampleOutline||"",authorityTerms:e?.authorityTerms||"",websiteType:e?.websiteType||"",targetAudience:e?.targetAudience||a.targetAudience||"zh-TW",useRag:!!e?.useRag,autoImagePlan:!!e?.autoImagePlan,productRawText:e?.productRawText||"",scrapedImages:e?.scrapedImages||a.scrapedImages||[],brandKnowledge:a.brandKnowledge};(!s.productRawText?.trim()||a.activeProductBrief?.productName)&&(n.setLastConfig(s),n.setAnalysisResults({productResult:{brief:a.activeProductBrief,mapping:a.productMapping},structureResult:{structRes:{data:a.refAnalysis},authRes:{data:a.authAnalysis}}}),n.setStatus("analysis_ready"),n.setGenerationStep("idle"),n.setError(null),l.current=!0)},[a,n]);let[b,v]=(0,s.useState)(!1),[k,w]=(0,s.useState)(!1);(0,s.useEffect)(()=>{"analyzing"!==u.status||c.showSidebar||c.setShowSidebar(!0)},[u.status,c]),(0,s.useEffect)(()=>{let e=!!p.refAnalysis?.structure?.length;"analysis_ready"===u.status&&e&&!c.showPlanModal&&"idle"===u.generationStep&&c.setShowPlanModal(!0)},[u.status,u.generationStep,p.refAnalysis?.structure,c]);let N=async e=>{if(c.setActiveProfile(e),p.setTargetAudience(e.targetAudience),p.setBrandKnowledge(e.brandKnowledge||""),e.productRawText){let t=await X(e.productRawText);p.setActiveProductBrief(t.data)}},$=async()=>{let e=p.refAnalysis;if(!e)return;let t=[...(e.competitorBrands||[]).map(e=>({text:e,type:"brand",region:"OTHER"})),...(e.competitorProducts||[]).map(e=>({text:e,type:"service",region:"OTHER"}))];if(0!==t.length){v(!0);try{let r=await $6(t,p.targetAudience);if(c.addCost(r.cost.totalCost,r.usage.totalTokens),r.mappings.length>0){let t=e.regionalReplacements||[],n=r.mappings.map(e=>({original:e.original,replacement:e.regionEquivalent,reason:e.context})),i=[...t];n.forEach(e=>{i.some(t=>t.original===e.original)||i.push(e)}),p.setRefAnalysis({...e,regionalReplacements:i})}}catch(e){console.error("[App] Search local alternatives failed",e)}finally{v(!1)}}};return h?(0,i.jsxs)("div",{className:"flex flex-col h-screen overflow-hidden",children:[(0,i.jsx)(A,{sessionCost:c.sessionCost,sessionTokens:c.sessionTokens,showInput:c.showInput,showSidebar:c.showSidebar,onToggleInput:c.toggleInput,onToggleSidebar:c.toggleSidebar,onToggleChangelog:()=>c.setShowChangelog(!0),onToggleSettings:()=>c.setShowSettings(!0),contentScore:c.contentScore,displayScale:c.displayScale,onDisplayScaleChange:c.setDisplayScale}),(0,i.jsx)($U,{isOpen:c.showChangelog,onClose:()=>c.setShowChangelog(!1)}),(0,i.jsx)(So,{open:c.showSettings,onClose:()=>c.setShowSettings(!1)}),(0,i.jsxs)("main",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden h-[calc(100vh-64px)] min-h-0 bg-gray-100 p-4 gap-4",children:[c.showInput&&(0,i.jsx)("section",{className:"w-full lg:w-[380px] bg-white rounded-2xl shadow-sm border border-gray-200/60 flex flex-col overflow-auto z-20 transition-all duration-300",children:(0,i.jsx)(c7,{onGenerate:g,onGenerateSections:y,isGenerating:"analyzing"===u.status||"streaming"===u.status,isWriting:"streaming"===u.status,canGenerateSections:"analysis_ready"===u.status,currentStep:u.generationStep,onAddCost:(e,t)=>c.addCost(e.totalCost,t.totalTokens),savedProfiles:c.savedProfiles,setSavedProfiles:c.setSavedProfiles,activeProfile:c.activeProfile,onSetActiveProfile:c.setActiveProfile,inputType:c.inputType,setInputType:c.setInputType,brandKnowledge:p.brandKnowledge,onShowPlan:()=>c.setShowPlanModal(!0),hasPlan:!!p.refAnalysis?.structure?.length})}),(0,i.jsx)("section",{className:"flex-1 bg-white rounded-2xl shadow-sm border border-gray-200/60 flex flex-col min-h-0 relative overflow-hidden",children:(0,i.jsx)($S,{content:u.content,status:u.status,error:u.error,generationStep:u.generationStep,coveredPoints:p.coveredPoints,targetAudience:p.targetAudience,scrapedImages:p.scrapedImages,visualStyle:p.visualStyle,onRemoveScrapedImage:e=>{let t=e.id||e.url||e.altText;if(!t)return;let r=p.scrapedImages.map((e,r)=>(e.id||e.url||e.altText||`${r}`)!==t?e:{...e,ignored:!e.ignored});p.setScrapedImages(r)},onTogglePoint:e=>{p.setCoveredPoints(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},onAddCost:(e,t)=>c.addCost(e.totalCost,t.totalTokens),savedProfiles:c.savedProfiles,onLoadProfile:N,onRequestUrlMode:()=>c.setInputType("url"),productBrief:p.activeProductBrief,displayScale:c.displayScale,articleTitle:p.articleTitle,onTitleChange:p.setArticleTitle,outlineSections:p.refAnalysis?.structure?.map(e=>e.title)||[],keyInformationPoints:f.general,brandExclusivePoints:f.brand})}),c.showSidebar&&(0,i.jsx)("section",{className:"hidden lg:flex w-[380px] bg-white rounded-2xl shadow-sm border border-gray-200/60 flex-col overflow-auto z-10 transition-all duration-300",children:(0,i.jsx)($D,{keywordPlans:p.keywordPlans,referenceAnalysis:p.refAnalysis,authorityAnalysis:p.authAnalysis,productMapping:p.productMapping,productBrief:p.activeProductBrief,headingOptimizations:p.headingOptimizations,targetAudience:p.targetAudience,languageInstruction:p.languageInstruction,isLoading:"analyzing"===u.status,status:u.status,onStop:x,brandKnowledge:p.brandKnowledge,setBrandKnowledge:p.setBrandKnowledge,displayScale:c.displayScale,onSearchLocalAlternatives:$,isSearchingAlternatives:b})})]}),(0,i.jsx)(Sn,{open:c.showPlanModal,onClose:()=>c.setShowPlanModal(!1),sections:p.refAnalysis?.structure||[],generalPlan:p.refAnalysis?.generalPlan,conversionPlan:p.refAnalysis?.conversionPlan,regionalReplacements:p.refAnalysis?.regionalReplacements,localizedSections:p.localizedRefAnalysis?.structure,localizedGeneralPlan:p.localizedRefAnalysis?.generalPlan,localizedConversionPlan:p.localizedRefAnalysis?.conversionPlan,onSavePlan:e=>{let t=p.refAnalysis;t&&p.setRefAnalysis({...t,structure:e})},onLocalizeAll:async()=>{let e=p.refAnalysis;if(e&&e.regionalReplacements?.length){w(!0);try{let t=await $3({generalPlan:e.generalPlan||[],conversionPlan:e.conversionPlan||[],sections:e.structure.map(e=>({title:e.title,narrativePlan:e.narrativePlan,keyFacts:e.keyFacts,uspNotes:e.uspNotes,subheadings:e.subheadings}))},e.regionalReplacements,p.targetAudience);c.addCost(t.cost.totalCost,t.usage.totalTokens);let r=e.structure.map((e,r)=>({...e,title:t.localizedSections[r]?.title||e.title,narrativePlan:t.localizedSections[r]?.narrativePlan||e.narrativePlan,keyFacts:t.localizedSections[r]?.keyFacts||e.keyFacts,uspNotes:t.localizedSections[r]?.uspNotes||e.uspNotes,subheadings:t.localizedSections[r]?.subheadings||e.subheadings}));p.setLocalizedRefAnalysis({...e,structure:r,generalPlan:t.localizedGeneralPlan,conversionPlan:t.localizedConversionPlan})}catch(e){console.error("[App] AI Plan localization failed",e)}finally{w(!1)}}},isLocalizing:k,onStartWriting:e=>{let t=p.refAnalysis;t&&p.setRefAnalysis({...t,structure:e}),c.setShowPlanModal(!1),y()},onSaveReplacements:e=>{let t=p.refAnalysis;t&&p.setRefAnalysis({...t,regionalReplacements:e.filter(e=>"keep"!==e.action).map(e=>({original:e.original,replacement:"delete"===e.action?"":e.customReplacement||e.replacement,reason:e.reason}))})}})]}):(0,i.jsx)($Z,{passwordHash:d,onUnlock:m})}e.s(["default",()=>Sc],52683)}]);