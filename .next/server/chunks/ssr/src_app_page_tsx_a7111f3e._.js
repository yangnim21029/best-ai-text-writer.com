module.exports=[40777,a=>{"use strict";var b,c,d=a.i(87924),e=a.i(72131);let f=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},g=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var h={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,e.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:f="",children:i,iconNode:j,...k},l)=>(0,e.createElement)("svg",{ref:l,...h,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:g("lucide",f),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,b])=>(0,e.createElement)(a,b)),...Array.isArray(i)?i:[i]])),j=(a,b)=>{let c=(0,e.forwardRef)(({className:c,...d},h)=>(0,e.createElement)(i,{ref:h,iconNode:b,className:g(`lucide-${f(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,c),...d}));return c.displayName=f(a),c},k=j("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),l=j("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),m=j("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),n=j("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),o=j("panel-left-close",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]),p=j("panel-right-close",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]]),q=j("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),r=j("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),s=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},t=a=>{let b=a?s(a):s,c=a=>(function(a,b=a=>a){let c=e.default.useSyncExternalStore(a.subscribe,e.default.useCallback(()=>b(a.getState()),[a,b]),e.default.useCallback(()=>b(a.getInitialState()),[a,b]));return e.default.useDebugValue(c),c})(b,a);return Object.assign(c,b),c},u=a=>a?t(a):t;function v(a,b){let c;try{c=a()}catch(a){return}return{getItem:a=>{var d;let e=a=>null===a?null:JSON.parse(a,null==b?void 0:b.reviver),f=null!=(d=c.getItem(a))?d:null;return f instanceof Promise?f.then(e):e(f)},setItem:(a,d)=>c.setItem(a,JSON.stringify(d,null==b?void 0:b.replacer)),removeItem:a=>c.removeItem(a)}}let w=a=>b=>{try{let c=a(b);if(c instanceof Promise)return c;return{then:a=>w(a)(c),catch(a){return this}}}catch(a){return{then(a){return this},catch:b=>w(b)(a)}}},x=(a,b)=>(c,d,e)=>{let f,g={storage:v(()=>localStorage),partialize:a=>a,version:0,merge:(a,b)=>({...b,...a}),...b},h=!1,i=new Set,j=new Set,k=g.storage;if(!k)return a((...a)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),c(...a)},d,e);let l=()=>{let a=g.partialize({...d()});return k.setItem(g.name,{state:a,version:g.version})},m=e.setState;e.setState=(a,b)=>(m(a,b),l());let n=a((...a)=>(c(...a),l()),d,e);e.getInitialState=()=>n;let o=()=>{var a,b;if(!k)return;h=!1,i.forEach(a=>{var b;return a(null!=(b=d())?b:n)});let e=(null==(b=g.onRehydrateStorage)?void 0:b.call(g,null!=(a=d())?a:n))||void 0;return w(k.getItem.bind(k))(g.name).then(a=>{if(a)if("number"!=typeof a.version||a.version===g.version)return[!1,a.state];else{if(g.migrate){let b=g.migrate(a.state,a.version);return b instanceof Promise?b.then(a=>[!0,a]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(a=>{var b;let[e,h]=a;if(c(f=g.merge(h,null!=(b=d())?b:n),!0),e)return l()}).then(()=>{null==e||e(f,void 0),f=d(),h=!0,j.forEach(a=>a(f))}).catch(a=>{null==e||e(void 0,a)})};return e.persist={setOptions:a=>{g={...g,...a},a.storage&&(k=a.storage)},clearStorage:()=>{null==k||k.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>o(),hasHydrated:()=>h,onHydrate:a=>(i.add(a),()=>{i.delete(a)}),onFinishHydration:a=>(j.add(a),()=>{j.delete(a)})},g.skipHydration||o(),f||n},y={get url(){return`file://${a.P("src/config/constants.ts")}`}},z=y.env?y.env:process.env,A={FLASH:"gemini-3-flash-preview",IMAGE_PREVIEW:"google/gemini-2.5-flash-image"},B=z?.VITE_EMBED_MODEL_ID||z?.VITE_AI_EMBED_MODEL_ID||z?.AI_EMBED_MODEL_ID||"gemini-embedding-001",C={FLASH:{input:3e-7,output:3e-7},IMAGE_PREVIEW:{input:3e-7,output:3e-5},IMAGE_GEN:{input:3e-7,output:3e-5}},D=u()(x(a=>({showInput:!0,showSidebar:!0,showChangelog:!1,showPlanModal:!1,showSettings:!1,inputType:"url",displayScale:1.1,contentScore:{value:0,label:"Start Writing",color:"text-gray-400"},sessionCost:0,sessionTokens:0,modelFlash:A.FLASH,modelImage:A.IMAGE_PREVIEW,keywordCharDivisor:200,minKeywords:10,maxKeywords:30,savedProfiles:[],activeProfile:null,toggleInput:()=>a(a=>({showInput:!a.showInput})),toggleSidebar:()=>a(a=>({showSidebar:!a.showSidebar})),setShowSidebar:b=>a({showSidebar:b}),setShowChangelog:b=>a({showChangelog:b}),setShowPlanModal:b=>a({showPlanModal:b}),setShowSettings:b=>a({showSettings:b}),setInputType:b=>a({inputType:b}),setDisplayScale:b=>a({displayScale:b}),setContentScore:b=>a({contentScore:b}),addCost:(b,c)=>a(a=>({sessionCost:Number(a.sessionCost||0)+Number(b||0),sessionTokens:Number(a.sessionTokens||0)+Number(c||0)})),resetSessionStats:()=>a({sessionCost:0,sessionTokens:0}),setModelFlash:b=>a({modelFlash:b}),setModelImage:b=>a({modelImage:b}),setKeywordCharDivisor:b=>a({keywordCharDivisor:b}),setMinKeywords:b=>a({minKeywords:b}),setMaxKeywords:b=>a({maxKeywords:b}),resetSettings:()=>a({modelFlash:A.FLASH,modelImage:A.IMAGE_PREVIEW,keywordCharDivisor:200,minKeywords:10,maxKeywords:30}),setSavedProfiles:b=>a({savedProfiles:b}),setActiveProfile:b=>a({activeProfile:b}),addProfile:b=>a(a=>({savedProfiles:[...a.savedProfiles,b],activeProfile:b})),updateProfile:b=>a(a=>({savedProfiles:a.savedProfiles.map(a=>a.id===b.id?b:a),activeProfile:a.activeProfile?.id===b.id?b:a.activeProfile})),deleteProfile:b=>a(a=>({savedProfiles:a.savedProfiles.filter(a=>a.id!==b),activeProfile:a.activeProfile?.id===b?null:a.activeProfile}))}),{name:"pro_content_writer_app_v1",storage:v(()=>localStorage)})),E=({sessionCost:a=0,sessionTokens:b=0,showInput:c,showSidebar:e,onToggleInput:f,onToggleSidebar:g,onToggleChangelog:h,onToggleSettings:i,contentScore:j,displayScale:s,onDisplayScaleChange:t})=>{let{modelFlash:u}=D();return(0,d.jsxs)("header",{className:"bg-white h-16 flex items-center justify-between px-6 flex-shrink-0 z-30 shadow-sm relative",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 p-2 rounded-xl shadow-md shadow-blue-200",children:(0,d.jsx)(k,{className:"w-5 h-5 text-white"})}),(0,d.jsxs)("div",{className:"hidden md:flex flex-col",children:[(0,d.jsxs)("h1",{className:"text-lg font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600 leading-tight",children:["Ai Text Writer ",(0,d.jsx)("span",{className:"text-blue-600",children:"Pro"})," - Best AI Content Generator"]}),(0,d.jsxs)("button",{onClick:h,className:"text-[10px] text-gray-400 hover:text-blue-600 transition-colors flex items-center gap-1 w-fit group",children:[(0,d.jsx)(q,{className:"w-3 h-3 group-hover:rotate-12 transition-transform"}),(0,d.jsx)("span",{children:"v1.4.0 Changelog"})]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-1 bg-gray-50 p-1 rounded-lg ml-4 border border-gray-100",children:[(0,d.jsx)("button",{onClick:f,className:`p-1.5 rounded-md transition-all ${c?"bg-white text-blue-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,title:"Toggle Input Panel",children:(0,d.jsx)(o,{className:`w-4 h-4 transition-transform ${!c?"rotate-180":""}`})}),(0,d.jsx)("button",{onClick:g,className:`p-1.5 rounded-md transition-all ${e?"bg-white text-blue-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,title:"Toggle Analysis Sidebar",children:(0,d.jsx)(p,{className:`w-4 h-4 transition-transform ${!e?"rotate-180":""}`})})]}),(0,d.jsxs)("div",{className:"hidden md:flex items-center gap-1 bg-gray-50 p-1 rounded-lg border border-gray-100 ml-2",children:[(0,d.jsx)("button",{onClick:()=>t(s-.1),className:"px-2 py-1 text-[10px] font-bold text-gray-500 hover:text-gray-700 hover:bg-white rounded",title:"ç¸®å°é¡¯ç¤ºå­—ç´š",children:"A-"}),(0,d.jsxs)("div",{className:"px-2 py-1 text-[10px] font-bold text-gray-500 bg-white rounded border border-gray-100",children:[Math.round(100*s),"%"]}),(0,d.jsx)("button",{onClick:()=>t(s+.1),className:"px-2 py-1 text-[10px] font-bold text-gray-500 hover:text-gray-700 hover:bg-white rounded",title:"æ”¾å¤§é¡¯ç¤ºå­—ç´š",children:"A+"})]})]}),(0,d.jsxs)("div",{className:"hidden xl:flex items-center gap-3 mx-auto",children:[(0,d.jsxs)("div",{className:"flex flex-col items-end",children:[(0,d.jsx)("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Content Score"}),(0,d.jsx)("span",{className:`text-sm font-bold ${j.color}`,children:j.label})]}),(0,d.jsxs)("div",{className:"relative w-10 h-10 flex items-center justify-center",children:[(0,d.jsxs)("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[(0,d.jsx)("path",{className:"text-gray-100",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3"}),(0,d.jsx)("path",{className:`${j.color} transition-all duration-1000 ease-out`,strokeDasharray:`${j.value}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"3"})]}),(0,d.jsx)("span",{className:`absolute text-[10px] font-bold ${j.color}`,children:j.value})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsxs)("div",{className:"flex items-center bg-gray-50 rounded-lg border border-gray-200 p-1",children:[(0,d.jsxs)("div",{className:"flex flex-col items-end px-3 py-0.5 border-r border-gray-200",children:[(0,d.jsxs)("span",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-wider flex items-center gap-1",children:[(0,d.jsx)(n,{className:"w-3 h-3"})," Tokens"]}),(0,d.jsx)("span",{className:"text-sm font-mono font-medium text-gray-600",children:b.toLocaleString()})]}),(0,d.jsxs)("div",{className:"flex flex-col items-end px-3 py-0.5",children:[(0,d.jsxs)("span",{className:"text-[10px] text-emerald-600/70 font-bold uppercase tracking-wider flex items-center gap-1",children:[(0,d.jsx)(m,{className:"w-3 h-3"})," Cost"]}),(0,d.jsxs)("span",{className:"text-lg font-mono font-bold text-emerald-600 leading-none",children:["$",Number(a||0).toFixed(4)]})]})]}),(0,d.jsxs)("div",{className:"hidden md:flex items-center space-x-1.5 px-3 py-1.5 bg-amber-50 text-amber-700 border border-amber-200 rounded-full shadow-sm",children:[(0,d.jsx)(l,{className:"w-3.5 h-3.5 fill-amber-500 text-amber-600"}),(0,d.jsx)("span",{className:"text-xs font-semibold",children:u})]}),(0,d.jsx)("button",{onClick:i,className:"p-2 transition-all text-gray-400 hover:text-gray-900 hover:bg-gray-100 rounded-xl",title:"System Settings",children:(0,d.jsx)(r,{className:"w-5 h-5"})})]})]})},F=(...a)=>{for(let b of a){let a="string"==typeof b?Number(b):b;if("number"==typeof a&&Number.isFinite(a))return a}return 0},G=a=>{let b=(a?a.totalUsage||a.usage?a.totalUsage||a.usage:a.data?.totalUsage||a.data?.usage?a.data.totalUsage||a.data.usage:a.metadata?.totalUsage||a.metadata?.usage?a.metadata.totalUsage||a.metadata.usage:a:null)||{},c=F(b.inputTokens,b.promptTokens,b.prompt_tokens,b.input_tokens,b.promptTokenCount,b.inputTokenCount,b.tokens?.inputTokens,b.tokens?.promptTokens),d=F(b.outputTokens,b.completionTokens,b.output_tokens,b.completion_tokens,b.candidatesTokenCount,b.outputTokenCount,b.tokens?.outputTokens,b.tokens?.completionTokens),e=F(b.totalTokens,b.total_tokens,b.totalTokenCount,b.tokens?.totalTokens);return e?!c&&d&&e>=d?c=e-d:!d&&c&&e>=c?d=e-c:c||d||(c=e):e=c+d,{inputTokens:c,outputTokens:d,totalTokens:e}},H=(a,b)=>{let c=G(a),d=C[b],e=c.inputTokens*d.input,f=c.outputTokens*d.output;return{usage:c,cost:{inputCost:e,outputCost:f,totalCost:e+f}}},I=a=>{switch(a){case"zh-HK":return`
          **OUTPUT LANGUAGE:** Traditional Chinese (Hong Kong).
          - Use Hong Kong specific vocabulary (e.g., 'è³ªç´ ' instead of 'å“è³ª', 'äº’è¯ç¶²' instead of 'ç¶²éš›ç¶²è·¯', 'æ™ºèƒ½æ‰‹æ©Ÿ').
          - Style should be natural for Hong Kong readers (Standard Written Chinese with HK nuances).
          - **STRICTLY FORBIDDEN:** Spoken Cantonese particles (e.g., å˜…, ä¿‚, å’—, ä½¢, å’) unless explicitly requested.
          - Maintain a professional written tone (Standard Written Chinese).

          `;case"zh-MY":return`
          **OUTPUT LANGUAGE:** Simplified Chinese (Malaysia).
          - Use Simplified characters.
          - Use Malaysia-specific Chinese vocabulary and context where applicable (e.g., 'å·´åˆ¹' for market, 'å·´å£«' for bus, local currency references if needed).
          - Tone: Relatable to Malaysian Chinese readers.

          `;default:return`
          **OUTPUT LANGUAGE:** Traditional Chinese (Taiwan).
          - Use Taiwan specific vocabulary (e.g., 'å“è³ª', 'ç¶²éš›ç¶²è·¯', 'è¨ˆç¨‹è»Š').
          - Style should be natural for Taiwanese readers.
          - **STRICTLY FORBIDDEN:** Cantonese particles (e.g., å˜…, ä¿‚, å’—, ä½¢, å’) and Hong Kong specific vocabulary (e.g., 'è³ªç´ ').
          - Ensure the tone is standard written Chinese suitable for Taiwan.

          `}},J={attempts:2,delayMs:300},K=process.env,L=K.AI_BASE_URL||"",M=K.AI_PATH||"/ai",N=a=>{let b=M.startsWith("/")?M:`/${M}`;return`${L}${b}${a}`},O=()=>{let a=K.VITE_AI_TOKEN||K.AI_TOKEN,b={"Content-Type":"application/json"};return a&&(b.Authorization=`Bearer ${a}`),b},P=a=>{let b=a?.content;return b?"string"==typeof b?b:Array.isArray(b)?b.map(a=>"string"==typeof a?a:"string"==typeof a?.text?a.text:"string"==typeof a?.value?a.value:"string"==typeof a?.data?.text?a.data.text:"").filter(Boolean).join(""):"":""},Q=async a=>{let b,c,d=a.getReader(),e=new TextDecoder,f="",g="",h=()=>{let a;for(f.includes("\r\n")&&(f=f.replace(/\r\n/g,"\n"));-1!==(a=f.indexOf("\n\n"));){let d,e=f.slice(0,a).trim();if(f=f.slice(a+2),!e)continue;let h="",i=[];for(let a of e.split("\n")){let b=a.trim();b&&!b.startsWith(":")&&(b.startsWith("event:")?h=b.slice(6).trim():b.startsWith("data:")&&i.push(b.slice(5).trim()))}let j=i.join("\n").trim();if(!j)continue;try{d=JSON.parse(j)}catch{continue}let k=d.type||d.event||d.kind||h;if("text-delta"===k){let a=d.textDelta??d.delta??d.text;"string"==typeof a&&(g+=a)}else if("message"===k){let a=P(d.message);a&&(g+=a),c=d.message?.metadata?.totalUsage||d.message?.metadata?.usage||c}else"object"===k?b=d.object??b:"finish"===k?(c=d.message?.metadata?.totalUsage||d.message?.metadata?.usage||d.usage||d.totalUsage||c,void 0!==d.object&&(b=d.object)):"string"==typeof d.text&&(g+=d.text)}};for(;;){let{value:a,done:b}=await d.read();if(f+=e.decode(a||new Uint8Array,{stream:!b}),h(),b)break}return h(),{text:g,object:b,usageMetadata:c}},R=a=>{let b=a?.data&&"object"==typeof a.data?a.data:a,c=b?.candidates||a?.candidates||b?.response?.candidates||a?.response?.candidates,d=b?.totalUsage||b?.usageMetadata||b?.usage||a?.totalUsage||a?.usageMetadata||a?.usage||b?.response?.totalUsage||b?.response?.usageMetadata,e=b?.object;if(b?.object!==void 0)return{text:"string"==typeof b.text?b.text:JSON.stringify(b.object),object:b.object,usageMetadata:d,candidates:c};let f=b?.text||a?.text||b?.response?.text||a?.response?.text||(a=>{if(!Array.isArray(a))return"";for(let b of a){let a=b?.content?.parts;if(Array.isArray(a)){let b=a.map(a=>a?.text||"").filter(Boolean).join("");if(b)return b}}return""})(c)||("string"==typeof b?b:""),g=(a=>{let b,c;if("string"!=typeof a||!a.includes("data:"))return null;let d=a.split(/data:\s*/).slice(1);if(0===d.length)return null;let e="";for(let a of d){let d,f=a.split(/\n/)[0].trim();if(!f||"[DONE]"===f)continue;try{d=JSON.parse(f)}catch{continue}let g=d.type||d.event||d.kind;if("text-delta"===g){let a=d.textDelta??d.delta??d.text;"string"==typeof a&&(e+=a)}else if("message"===g){let a=P(d.message);a&&(e+=a),b=d.message?.metadata?.totalUsage||d.message?.metadata?.usage||b}else"object"===g?c=d.object??c:"finish"===g?(b=d.message?.metadata?.totalUsage||d.message?.metadata?.usage||d.usage||d.totalUsage||b,void 0!==d.object&&(c=d.object)):"string"!=typeof d.text||g||(e+=d.text)}return{text:e.trim()||a.trim(),usageMetadata:b,object:c}})(f);return g&&(f=g.text,e=e??g.object,d=d??g.usageMetadata),{text:f,usageMetadata:d,candidates:c,object:e}};class S{controller;signal;constructor(a){this.controller=new AbortController,this.signal=this.controller.signal,a.forEach(a=>{a&&(a.aborted?this.controller.abort(a.reason):a.addEventListener("abort",()=>this.controller.abort(a.reason)))})}}let T=new class{async request({model:a,contents:b,config:c,timeoutMs:d,signal:e},f={}){let{attempts:g,delayMs:h}={...J,...f},i=new AbortController,j=e?new S([e,i.signal]).signal:i.signal,k=(a=>{if(!a)return"";if("string"==typeof a)return a;if(Array.isArray(a)){let b=[];for(let c of a)if("string"==typeof c)b.push(c);else if(c?.parts?.length){let a=c.parts.map(a=>a?.text||"").filter(Boolean).join("");a&&b.push(a)}else c?.text&&b.push(c.text);return b.join("\n\n")}if(a?.parts?.length)return a.parts.map(a=>a?.text||"").filter(Boolean).join("");if(a?.text)return a.text;try{return JSON.stringify(a)}catch{return""}})(b),l={model:a};if(k&&(l.prompt=k),c){let{responseSchema:a,responseMimeType:b,providerOptions:d,...e}=c;a&&(l.schema=a,l.responseSchema=a),b&&(l.responseMimeType=b),d&&(l.providerOptions=d),Object.keys(e).length>0&&(l.config=e)}b&&"string"!=typeof b&&(l.contents=b);let m=null;for(let a=0;a<g;a++){let b=setTimeout(()=>{console.error("[GenAIClient] Request TIMEOUT after",d||12e4,"ms"),i.abort("GenAI request timed out")},d||12e4);try{console.log("[GenAIClient] Request payload:",JSON.stringify(l,null,2)),console.log("[GenAIClient] Request URL:",N("/generate"));let a=O(),c=async b=>fetch(N(b),{method:"POST",headers:a,body:JSON.stringify(l),signal:j}),d=await c("/generate");404===d.status&&(d=await c("/stream"));let e=d.headers.get("content-type")||"",f=e.includes("application/json"),g=e.includes("text/event-stream");if(!d.ok){let a=f?await d.json():await d.text(),b="string"==typeof a?a:a.error||JSON.stringify(a);throw Error(`Failed to generate content (HTTP ${d.status}): ${b}`)}if(g){if(!d.body)throw Error("Stream response missing body");let a=await Q(d.body);return clearTimeout(b),a}let h=f?await d.json():{text:await d.text()};return clearTimeout(b),R(h)}catch(e){m=e,clearTimeout(b);let c=e?.message||"",d=c.includes("503")||c.includes("UNAVAILABLE")||c.toLowerCase().includes("overloaded");if(a<g-1&&d){let b=h*(a+1);console.warn(`GenAI retry (${a+1}/${g}) after ${b}ms due to: ${c}`),await new Promise(a=>setTimeout(a,b));continue}a<g-1&&await new Promise(a=>setTimeout(a,h))}}throw m instanceof Error?m:Error(`GenAI request failed: ${String(m)}`)}},U=new class{getModel(a){let b=D.getState();return"FLASH"===a?b.modelFlash:"IMAGE_PREVIEW"===a?b.modelImage:A[a]}async runText(a,b="FLASH",c){let d=Date.now(),e=this.getModel(b);try{let f=await T.request({model:e,contents:a,config:c}),{usage:g,cost:h}=H(f.usageMetadata,b);return{text:f.text,usage:g,cost:h,duration:Date.now()-d}}catch(a){throw console.error(`[AIService] runText failed for ${b}`,a),a}}async runJson(a,b="FLASH",c){let d=Date.now(),e=this.getModel(b);try{let f,g=await T.request({model:e,contents:a,config:{responseMimeType:"application/json",responseSchema:c}}),{usage:h,cost:i}=H(g.usageMetadata,b);if(g.object)f=g.object;else try{let a=g.text.replace(/```(?:json)?\n?|\n?```/gi,"").trim();f=JSON.parse(a)}catch(a){throw Error(`Failed to parse JSON response: ${g.text.substring(0,100)}...`)}return{data:f,usage:h,cost:i,duration:Date.now()-d}}catch(a){throw console.error(`[AIService] runJson failed for ${b}`,a),a}}async runJsonWithSearch(a,b="FLASH",c){let d=Date.now(),e=this.getModel(b);try{let f,g=await T.request({model:e,contents:a,config:{responseMimeType:"application/json",responseSchema:c,providerOptions:{vertex:{useSearchGrounding:!0}}}}),{usage:h,cost:i}=H(g.usageMetadata,b);if(g.object)f=g.object;else try{let a=g.text.replace(/```(?:json)?\n?|\n?```/gi,"").trim();f=JSON.parse(a)}catch(a){throw Error(`Failed to parse JSON response: ${g.text.substring(0,100)}...`)}return{data:f,usage:h,cost:i,duration:Date.now()-d}}catch(a){throw console.error(`[AIService] runJsonWithSearch failed for ${b}`,a),a}}},V="object",W="array",X="string",Y="boolean",Z=async(a,b,c)=>{let d=Date.now(),e=(({productBrief:a,articleTopic:b,languageInstruction:c})=>`
    I have a Product and an Article Topic.

    <ProductDetails>
    PRODUCT: ${a.productName} (${a.usp})
    </ProductDetails>
    DEFINITION: The product being marketed.
    ACTION: Find features of this product that match the topic.
    
    <ArticleTopic>
    TOPIC: ${b}
    </ArticleTopic>
    DEFINITION: The subject of the article.
    ACTION: Identify pain points within this topic.
    
    <LanguageInstruction>
    ${c}
    </LanguageInstruction>
    DEFINITION: Target Language.
    ACTION: Output in this language.

    TASK:
    Identify 3 - 5 "Problem-Solution Mappings".
    For each mapping:
    1. ** Pain Point **: A specific problem the reader has related to the Topic.
    2. ** Product Feature **: The specific feature of the product that solves it.
    3. ** Relevance Keywords **: List of keywords(from the topic) where this mapping is most relevant.
    
    OUTPUT JSON:
    [
      { "painPoint": "...", "productFeature": "...", "relevanceKeywords": ["...", "..."] }
    ]
      `)({productBrief:a,articleTopic:b,languageInstruction:I(c)});try{let a=await U.runJson(e,"FLASH",{type:W,items:{type:V,properties:{painPoint:{type:X},productFeature:{type:X},relevanceKeywords:{type:W,items:{type:X}}},required:["painPoint","productFeature","relevanceKeywords"]}});return{data:a.data,usage:a.usage,cost:a.cost,duration:a.duration}}catch(a){return console.error("Brand Content Summarization Failed",a),{data:[],usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-d}}},$=async a=>{let b=Date.now(),c=(({rawText:a})=>`
    ## Task
    Extract product / service information from the following text.

    DEFINITION: The main objective.
    ACTION: Analyze the provided text to identify product-related data.

    <RawText>
    "${a}"
    </RawText>
    DEFINITION: Source text.
    ACTION: Analyze this text for product data.

    ## Instructions
    - Identify Brand Name, Product Name, Unique Selling Point(USP), Target Audience, and Key Features.
    - Focus on concise extraction, not rewriting.

    DEFINITION: Guidelines for extraction.
    ACTION: Follow these guidelines for the output.
    
    OUTPUT JSON:
{
  "brandName": "...",
    "productName": "...",
      "usp": "...",
        "targetAudience": "...",
          "features": ["...", "..."]
}
`)({rawText:a});try{let a=await U.runJson(c,"FLASH",{type:V,properties:{brandName:{type:X},productName:{type:X},usp:{type:X},primaryPainPoint:{type:X},ctaLink:{type:X}},required:["brandName","productName","usp","ctaLink"]}),b=a.data;return{data:{brandName:b.brandName||"",productName:b.productName||"",usp:b.usp||"",ctaLink:b.ctaLink||"",targetPainPoints:b.primaryPainPoint},usage:a.usage,cost:a.cost,duration:a.duration}}catch(a){return console.error("Product Context Parsing Failed",a),{data:{brandName:"",productName:"",usp:"",ctaLink:""},usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-b}}},_=async(a,b,c="General Content")=>Z(a,c,b),aa=async(a,b)=>{let c=Date.now(),d=(({urls:a,languageInstruction:b})=>`
    You are a web crawler and marketing copywriter.
    Crawl and summarize the following URLs to extract the brand's own service/product details, contact info, and unique selling points.
    
    <TargetURLs>
    ${a.join("\n")}
    </TargetURLs>
    DEFINITION: The list of pages to digest.
    ACTION: Synthesize information from these pages only.
    
    <LanguageInstruction>
    ${b}
    </LanguageInstruction>
    DEFINITION: Target Language.
    ACTION: Write the summary in this language.

    OUTPUT: A concise paragraph(200 - 300 words) summarizing the brand / service with contact info if present.
    `)({urls:a,languageInstruction:I(b)});try{let a=await U.runText(d,"FLASH");return{data:a.text,usage:a.usage,cost:a.cost,duration:a.duration}}catch(a){return console.error("Brand Summary Failed",a),{data:"",usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-c}}},ab=j("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ac=j("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),ad=j("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ae=j("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),af=j("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ag=j("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),ah=j("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),ai=({register:a,targetAudience:b,websiteType:c,authorityTerms:f,savedProfiles:g,activeProfile:h,brandKnowledge:i,onCreateProfile:j,onUpdateProfile:k,onDeleteProfile:l,onLoadProfile:m})=>{let[n,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)(!1),[t,u]=(0,e.useState)(""),v=(0,e.useMemo)(()=>(a=>{switch(a){case"zh-TW":return{flag:"ðŸ‡¹ðŸ‡¼",name:"Taiwan"};case"zh-HK":return{flag:"ðŸ‡­ðŸ‡°",name:"Hong Kong"};case"zh-MY":return{flag:"ðŸ‡²ðŸ‡¾",name:"Malaysia"};default:return{flag:"ðŸŒ",name:"Global"}}})(b),[b]),w=()=>{let a=j(t);a&&(u(""),s(!1),q(!1),alert(`Profile "${a.name}" saved!`))};return(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("h3",{className:"text-[10px] font-bold uppercase text-gray-400 tracking-wider px-1 flex items-center gap-1",children:[(0,d.jsx)(ac,{className:"w-3 h-3"})," Website Profile",(0,d.jsxs)("span",{className:"bg-red-100 text-red-600 border border-red-200 px-2 py-0.5 rounded text-[10px] font-bold flex items-center gap-1 animate-pulse",children:[(0,d.jsx)(ab,{className:"w-3 h-3"}),"BETA / UNSTABLE"]})]}),(0,d.jsxs)("div",{className:`bg-white rounded-xl border border-gray-200 shadow-[0_2px_8px_rgba(0,0,0,0.02)] overflow-hidden transition-all duration-300 ${n?"ring-2 ring-indigo-50/50":"hover:shadow-md"}`,children:[(0,d.jsxs)("div",{className:"p-3 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors group",onClick:()=>o(!n),children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-9 h-9 rounded-full bg-indigo-50 flex items-center justify-center border border-indigo-100 flex-shrink-0 group-hover:bg-indigo-100 transition-colors",children:(0,d.jsx)("span",{className:"text-sm font-bold text-indigo-600",children:h?h.name.charAt(0).toUpperCase():"U"})}),(0,d.jsxs)("div",{className:"min-w-0",children:[(0,d.jsx)("p",{className:"text-xs font-bold text-gray-800 truncate max-w-[180px]",children:h?h.name:"Unsaved Profile"}),(0,d.jsxs)("div",{className:"flex items-center gap-2 text-[10px] text-gray-500",children:[(0,d.jsxs)("span",{className:"flex items-center gap-1 bg-gray-100 px-1.5 rounded text-gray-600",children:[v.flag," ",v.name]}),!n&&c&&(0,d.jsx)("span",{className:"truncate max-w-[100px] border-l border-gray-200 pl-2",children:c})]})]})]}),(0,d.jsx)("button",{type:"button",className:"text-gray-400 p-1 rounded hover:bg-gray-200/50 transition-colors",children:(0,d.jsx)(ad,{className:`w-4 h-4 transition-transform duration-300 ${n?"rotate-180":""}`})})]}),n&&(0,d.jsx)("div",{className:"p-4 pt-0 border-t border-gray-50 animate-in slide-in-from-top-1 fade-in duration-200",children:(0,d.jsxs)("div",{className:"pt-3 space-y-4",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("button",{type:"button",onClick:()=>{q(!p),s(!1),u("")},className:"w-full text-[10px] font-bold text-indigo-600 bg-indigo-50 hover:bg-indigo-100 px-3 py-2 rounded-lg transition-colors flex items-center justify-between border border-indigo-100",children:[(0,d.jsxs)("span",{className:"flex items-center gap-2",children:[(0,d.jsx)(ac,{className:"w-3.5 h-3.5"}),"Manage Profiles"]}),(0,d.jsx)(ad,{className:"w-3.5 h-3.5"})]}),p&&(0,d.jsxs)("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-xl shadow-xl z-50 animate-in fade-in zoom-in-95 duration-100 overflow-hidden",children:[(0,d.jsxs)("div",{className:"p-2 space-y-1 bg-gray-50/50 border-b border-gray-100",children:[h&&(0,d.jsxs)("button",{type:"button",onClick:()=>{k()&&(alert("Profile Updated Successfully!"),q(!1))},className:"w-full flex items-center gap-2 px-3 py-2 text-[10px] font-bold text-indigo-700 bg-indigo-50 hover:bg-indigo-100 rounded-lg transition-colors",children:[(0,d.jsx)(ag,{className:"w-3 h-3"}),'Update "',h.name,'"']}),r?(0,d.jsxs)("div",{className:"p-1 space-y-2 bg-white rounded border border-gray-200",children:[(0,d.jsx)("input",{autoFocus:!0,type:"text",value:t,onChange:a=>u(a.target.value),placeholder:"New Profile Name...",className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:border-indigo-500 outline-none",onKeyDown:a=>"Enter"===a.key&&w()}),(0,d.jsxs)("div",{className:"flex gap-1",children:[(0,d.jsx)("button",{type:"button",onClick:w,className:"flex-1 bg-indigo-600 text-white text-[10px] py-1 rounded hover:bg-indigo-700",children:"Save"}),(0,d.jsx)("button",{type:"button",onClick:()=>s(!1),className:"flex-1 bg-gray-100 text-gray-600 text-[10px] py-1 rounded hover:bg-gray-200",children:"Cancel"})]})]}):(0,d.jsxs)("button",{type:"button",onClick:()=>s(!0),className:"w-full flex items-center gap-2 px-3 py-2 text-[10px] font-bold text-gray-700 bg-white border border-gray-200 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,d.jsx)(af,{className:"w-3 h-3"}),"Save as New Profile"]})]}),(0,d.jsxs)("div",{className:"max-h-48 overflow-y-auto custom-scrollbar p-1",children:[(0,d.jsx)("div",{className:"text-[9px] font-bold text-gray-400 uppercase px-3 py-1",children:"Existing Profiles"}),0===g.length?(0,d.jsx)("p",{className:"text-[10px] text-gray-400 p-3 text-center italic",children:"No saved profiles yet."}):g.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between hover:bg-gray-50 rounded-lg px-3 py-2 group/item cursor-pointer",onClick:()=>{m(a),q(!1),o(!0)},children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,d.jsx)("div",{className:`w-1.5 h-1.5 rounded-full flex-shrink-0 ${h?.id===a.id?"bg-green-500":"bg-indigo-300"}`}),(0,d.jsx)("span",{className:`text-xs font-medium truncate ${h?.id===a.id?"text-indigo-700 font-bold":"text-gray-700"}`,children:a.name})]}),(0,d.jsx)("button",{type:"button",onClick:b=>{var c;return c=a.id,void(b.stopPropagation(),confirm("Delete this profile?")&&l(c))},className:"text-gray-300 hover:text-red-500 p-1 rounded-md hover:bg-red-50 transition-all opacity-0 group-hover/item:opacity-100",children:(0,d.jsx)(ah,{className:"w-3 h-3"})})]},a.id))]})]})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsxs)("label",{className:"flex items-center gap-1.5 text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:[(0,d.jsx)(ae,{className:"w-3 h-3"})," Target Region"]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("select",{...a("targetAudience"),className:"w-full pl-3 pr-8 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs font-medium text-gray-700 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 outline-none appearance-none transition-all cursor-pointer hover:bg-gray-50",children:[(0,d.jsx)("option",{value:"zh-TW",children:"ðŸ‡¹ðŸ‡¼ Taiwan (Traditional)"}),(0,d.jsx)("option",{value:"zh-HK",children:"ðŸ‡­ðŸ‡° Hong Kong (Traditional)"}),(0,d.jsx)("option",{value:"zh-MY",children:"ðŸ‡²ðŸ‡¾ Malaysia (Simplified)"})]}),(0,d.jsx)(ad,{className:"absolute right-3 top-2.5 w-3.5 h-3.5 text-gray-400 pointer-events-none"})]})]}),(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsx)("label",{className:"flex items-center gap-1.5 text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Website Context"}),(0,d.jsx)("input",{type:"text",...a("websiteType"),placeholder:"e.g. High-End Skincare E-commerce...",className:"w-full px-3 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs text-gray-700 placeholder-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 outline-none transition-all"})]}),(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsx)("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Authority Attribute Terms"}),(0,d.jsx)("textarea",{...a("authorityTerms"),placeholder:"Brand attributes, ingredients, certifications...",className:"w-full h-20 px-3 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs text-gray-700 placeholder-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 outline-none resize-y custom-scrollbar transition-all"})]})]})]})})]})]})},aj=j("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),ak=j("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),al=j("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),am=j("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),an=j("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]),ao=j("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),ap=({register:a,productMode:b,setProductMode:c,productRawText:f,isSummarizingProduct:g,canAnalyzeFromUrls:h,savedProfiles:i,activeProfile:j,onCreateProfile:k,onUpdateProfile:l,onLoadProductFromProfile:m,onAnalyzeFromUrls:n})=>{let[o,p]=(0,e.useState)(!1),[q,r]=(0,e.useState)(!1),s=async()=>{await n()};return(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("h3",{className:"text-[10px] font-bold uppercase text-gray-400 tracking-wider px-1 flex items-center gap-1",children:[(0,d.jsx)(an,{className:"w-3 h-3"})," Our Service And Products"]}),(0,d.jsxs)("div",{className:`bg-white rounded-xl border border-gray-200 shadow-[0_2px_8px_rgba(0,0,0,0.02)] overflow-hidden transition-all duration-300 ${o?"ring-2 ring-emerald-50/50":"hover:shadow-md"}`,children:[(0,d.jsxs)("div",{className:"p-3 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors group",onClick:()=>p(!o),children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-9 h-9 rounded-full bg-emerald-50 flex items-center justify-center border border-emerald-100 flex-shrink-0 group-hover:bg-emerald-100 transition-colors",children:(0,d.jsx)(an,{className:"w-4 h-4 text-emerald-600"})}),(0,d.jsxs)("div",{className:"min-w-0",children:[(0,d.jsx)("p",{className:"text-xs font-bold text-gray-800",children:"Our Service & Product"}),(0,d.jsx)("div",{className:"flex items-center gap-2 text-[10px] text-gray-500",children:f?(0,d.jsxs)("span",{className:"truncate max-w-[180px] text-emerald-600 font-medium",children:[f.substring(0,30),"..."]}):(0,d.jsx)("span",{className:"text-gray-400",children:"Not Configured"})})]})]}),(0,d.jsx)(ad,{className:`w-4 h-4 text-gray-400 transition-transform duration-300 ${o?"rotate-180":""}`})]}),o&&(0,d.jsxs)("div",{className:"p-4 pt-0 border-t border-gray-50 animate-in slide-in-from-top-1 fade-in duration-200 mt-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1 flex-1 p-1 bg-gray-50 rounded-lg",children:[(0,d.jsxs)("button",{type:"button",onClick:()=>c("text"),className:`flex-1 text-[10px] py-1.5 rounded-md font-semibold transition-all flex items-center justify-center gap-1.5 ${"text"===b?"bg-white shadow text-emerald-600":"text-gray-500 hover:text-gray-700"}`,children:[(0,d.jsx)(al,{className:"w-3 h-3"})," Text Input"]}),(0,d.jsxs)("button",{type:"button",onClick:()=>c("url"),className:`flex-1 text-[10px] py-1.5 rounded-md font-semibold transition-all flex items-center justify-center gap-1.5 ${"url"===b?"bg-white shadow text-emerald-600":"text-gray-500 hover:text-gray-700"}`,children:[(0,d.jsx)(ak,{className:"w-3 h-3"})," From URL"]})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("button",{type:"button",onClick:()=>r(!q),className:"h-full px-3 py-1.5 bg-white border border-gray-200 text-gray-600 rounded-lg text-[10px] font-bold hover:border-emerald-300 hover:text-emerald-600 transition-colors flex items-center gap-1 shadow-sm whitespace-nowrap",children:[(0,d.jsx)(aj,{className:"w-3.5 h-3.5"}),(0,d.jsx)("span",{className:"hidden sm:inline",children:"Manage Service"}),(0,d.jsx)(ad,{className:"w-3 h-3"})]}),q&&(0,d.jsxs)("div",{className:"absolute top-full right-0 mt-2 w-56 bg-white border border-gray-200 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-100",children:[(0,d.jsxs)("div",{className:"p-2 space-y-1 bg-gray-50/50 border-b border-gray-100",children:[j&&(0,d.jsxs)("button",{type:"button",onClick:()=>{l()&&(alert("Profile Updated Successfully!"),r(!1))},className:"w-full flex items-center gap-2 px-3 py-2 text-[10px] font-bold text-emerald-700 bg-emerald-50 hover:bg-emerald-100 rounded-lg transition-colors",children:[(0,d.jsx)(ag,{className:"w-3 h-3"}),'Update Service in "',j.name,'"']}),(0,d.jsxs)("button",{type:"button",onClick:()=>{let a=prompt("Profile name to save this service/product?");if(!a)return;let b=k(a);b&&(alert(`Profile "${b.name}" saved!`),r(!1))},className:"w-full flex items-center gap-2 px-3 py-2 text-[10px] font-bold text-gray-700 bg-white border border-gray-200 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,d.jsx)(af,{className:"w-3 h-3"}),"Save Service as New Profile"]})]}),(0,d.jsx)("div",{className:"p-2 bg-gray-50 border-b border-gray-100 text-[9px] font-bold text-gray-400 uppercase",children:"Load from Profile"}),(0,d.jsx)("div",{className:"max-h-40 overflow-y-auto custom-scrollbar p-1",children:0===i.length?(0,d.jsx)("p",{className:"text-[10px] text-gray-400 p-2 text-center",children:"No profiles found."}):i.map(a=>(0,d.jsxs)("button",{type:"button",onClick:()=>{m(a),c("text"),r(!1)},className:"w-full text-left px-3 py-2 text-[10px] text-gray-700 hover:bg-emerald-50 hover:text-emerald-700 rounded-lg transition-colors truncate flex items-center justify-between",children:[(0,d.jsx)("span",{children:a.name}),j?.id===a.id&&(0,d.jsx)("span",{className:"text-[8px] bg-green-100 text-green-600 px-1 rounded",children:"Active"})]},a.id))})]})]})]}),"text"===b?(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsx)("label",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Our Service & Product Details"}),(0,d.jsx)("textarea",{...a("productRawText"),className:"w-full h-48 px-3 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 outline-none custom-scrollbar",placeholder:"Paste details about YOUR Service/Product here. e.g. Store: City Dental Clinic Service: Painless Implants Address: 123 Main St, Taipei Phone: 02-1234-5678 USP: 20 years experience, 24hr emergency."})]}):(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsx)("label",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Product / Service Page URLs"}),(0,d.jsx)("textarea",{...a("productUrlList"),className:"w-full h-32 px-3 py-2 bg-gray-50/50 rounded-lg border border-gray-200 text-xs focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 outline-none custom-scrollbar font-mono",placeholder:"https://example.com/product-a https://example.com/about-us"}),(0,d.jsx)("p",{className:"text-[9px] text-gray-400",children:"One URL per line. AI will summarize key services and contact info."})]}),(0,d.jsxs)("button",{type:"button",onClick:s,disabled:g||!h,className:"w-full py-2 bg-emerald-50 border border-emerald-100 text-emerald-700 rounded-lg text-xs font-bold hover:bg-emerald-100 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[g?(0,d.jsx)(am,{className:"w-3.5 h-3.5 animate-spin"}):(0,d.jsx)(ao,{className:"w-3.5 h-3.5"}),g?"Analyzing...":"Analyze & Summarize"]})]}),(0,d.jsxs)("div",{className:"text-[10px] text-gray-400 italic bg-gray-50 p-2 rounded flex items-center gap-2",children:[(0,d.jsx)(ao,{className:"w-3 h-3 text-purple-400"}),"AI will extract OUR Brand info to replace competitors in the article."]})]})]})]})},aq=j("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),ar=j("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),as=j("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),at=j("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),au=a=>{let b=new Set;return a.filter((a,c)=>{let d=a.url?.trim()?`url:${a.url.trim()}`:a.altText?.trim()?`alt:${a.altText.trim()}`:`idx:${c}`;return!b.has(d)&&(b.add(d),!0)})},av=({register:a,errors:b,inputType:c,setInputType:f,urlValue:g,refWordCount:h,refCharCount:i,scrapedImages:j,onFetchUrl:k,isFetchingUrl:l,onToggleScrapedImage:m,onRequestSemanticFilter:n,canSemanticFilter:o})=>{let[p,q]=e.default.useState(!1),r=e.default.useMemo(()=>au(j),[j]),s=e.default.useMemo(()=>r.map((a,b)=>({img:a,idx:b})).sort((a,b)=>{let c=!!a.img.ignored;return!!b.img.ignored===c?a.idx-b.idx:c?1:-1}).map(({img:a})=>a),[r]),t=p?s:s.slice(0,24),u=s.length-t.length,v=async()=>{await k()};return(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("h3",{className:"text-[10px] font-bold uppercase text-gray-400 tracking-wider px-1 flex items-center gap-1",children:[(0,d.jsx)(aq,{className:"w-3 h-3"})," Source Material"]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_8px_rgba(0,0,0,0.02)] p-4 space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-1.5",children:[(0,d.jsx)("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Article Topic"}),(0,d.jsx)("input",{type:"text",...a("title"),placeholder:"e.g. Advanced React Patterns",className:`w-full px-3 py-2 bg-white rounded-lg border text-sm font-medium text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all ${b.title?"border-red-500":"border-gray-200"}`}),b.title&&(0,d.jsx)("p",{className:"text-[10px] text-red-500",children:b.title.message})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide flex items-center gap-2",children:["Reference Content",r.length>0&&(0,d.jsxs)("span",{className:"text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-100 text-[9px] flex items-center gap-1",children:[(0,d.jsx)(as,{className:"w-3 h-3"})," ",r.length," Images"]}),(0,d.jsx)("span",{className:"text-amber-500 bg-amber-50 px-1 rounded text-[9px] ml-auto border border-amber-100",children:"Required"})]}),(0,d.jsxs)("div",{className:"flex bg-gray-100 p-0.5 rounded-lg",children:[(0,d.jsx)("button",{type:"button",onClick:()=>f("text"),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${"text"===c?"bg-white shadow-sm text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Paste Text"}),(0,d.jsx)("button",{type:"button",onClick:()=>f("url"),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${"url"===c?"bg-white shadow-sm text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"From URL"})]})]}),"text"===c?(0,d.jsxs)("div",{className:"relative group",children:[(0,d.jsx)("textarea",{...a("referenceContent"),placeholder:"Paste your source text here...",className:`w-full h-36 px-3 py-2 bg-gray-50 rounded-lg border text-xs font-mono text-gray-600 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none resize-none custom-scrollbar transition-all group-hover:bg-white ${b.referenceContent?"border-red-500":"border-gray-200"}`}),b.referenceContent&&(0,d.jsx)("p",{className:"text-[10px] text-red-500",children:b.referenceContent.message}),(0,d.jsxs)("div",{className:"flex justify-between items-center mt-1 gap-2 flex-wrap",children:[(0,d.jsxs)("span",{className:"text-[10px] text-gray-400 font-mono",children:[h," words | ",i," chars"]}),(0,d.jsxs)("button",{type:"button",onClick:n,disabled:!o,className:`inline-flex items-center gap-1 px-2 py-1 rounded-md border text-[10px] font-semibold transition-colors ${o?"border-blue-200 text-blue-600 bg-blue-50 hover:bg-blue-100":"border-gray-200 text-gray-400 bg-gray-100 cursor-not-allowed"}`,children:[(0,d.jsx)(ar,{className:"w-3 h-3"}),"èªžæ„éŽæ¿¾ (ç©ºç™½è¡Œåˆ†æ®µ)"]})]})]}):(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)("div",{className:"relative flex-1",children:[(0,d.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:(0,d.jsx)(at,{className:"w-3.5 h-3.5 text-gray-400"})}),(0,d.jsx)("input",{type:"url",...a("urlInput"),placeholder:"https://example.com/article",className:"w-full pl-9 pr-3 py-2 bg-white rounded-lg border border-gray-200 text-xs text-gray-700 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all",autoFocus:!0})]}),(0,d.jsx)("button",{type:"button",onClick:v,disabled:l||!g,className:"px-3 py-2 bg-blue-50 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm flex items-center justify-center min-w-[40px]",children:l?(0,d.jsx)(am,{className:"w-4 h-4 animate-spin"}):(0,d.jsx)(ak,{className:"w-4 h-4"})})]}),r.length>0&&(0,d.jsxs)("div",{className:"mt-3 bg-gray-50 rounded-lg p-2 border border-gray-100",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,d.jsxs)("h5",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide flex items-center gap-1.5",children:[(0,d.jsx)(as,{className:"w-3 h-3"})," Extracted Visuals"]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[s.length>24&&(0,d.jsx)("button",{type:"button",onClick:()=>q(a=>!a),className:"text-[9px] font-semibold text-blue-600 bg-blue-50 px-2 py-0.5 rounded border border-blue-100 hover:bg-blue-100 transition-colors",children:p?"Collapse":`Show All (${s.length})`}),(0,d.jsx)("span",{className:"text-[9px] bg-indigo-50 text-indigo-600 px-1.5 py-0.5 rounded border border-indigo-100 font-medium",children:"AI will analyze first 5 images during generation"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-4 gap-2 max-h-32 overflow-y-auto custom-scrollbar p-1",children:[t.map((a,b)=>{let c=a.id||`${a.url||a.altText||"image"}-${b}`,e=!!a.ignored;return(0,d.jsxs)("div",{className:`relative group rounded-md overflow-hidden border aspect-square shadow-sm transition-all ${e?"border-gray-300":"border-gray-200 bg-white"} ${m?"cursor-pointer hover:border-blue-200":""}`,onClick:()=>m?.(a),title:e?"Click to include again":"Click to ignore this image",children:[(0,d.jsx)("div",{className:"absolute top-1 right-1 z-10",children:(0,d.jsx)("input",{type:"checkbox",checked:!e,readOnly:!m,onChange:b=>{b.stopPropagation(),m?.(a)},onClick:a=>a.stopPropagation(),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-label":e?"Include image":"Exclude image"})}),a.url?(0,d.jsx)("img",{src:a.url,loading:"lazy",alt:a.altText,className:`w-full h-full object-cover transition ${e?"grayscale opacity-60":""}`}):(0,d.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 text-gray-300",children:(0,d.jsx)(as,{className:"w-4 h-4"})}),e&&(0,d.jsx)("div",{className:"absolute inset-0 bg-black/30"})]},c)}),u>0&&!p&&(0,d.jsxs)("button",{type:"button",onClick:()=>q(!0),className:"flex items-center justify-center text-[10px] font-semibold text-blue-600 bg-white border border-blue-100 rounded-md h-full min-h-[72px] hover:bg-blue-50 transition-colors col-span-4",children:["+ ",u," more"]})]})]})]})]})]})},aw=j("layout-template",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]),ax=j("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);var ay=a=>a instanceof Date,az=a=>null==a,aA=a=>!az(a)&&!Array.isArray(a)&&"object"==typeof a&&!ay(a);function aB(a){let b,c=Array.isArray(a);if("undefined"!=typeof FileList&&FileList,a instanceof Date)b=new Date(a);else{let d;if(!(c||aA(a)))return a;if(b=c?[]:Object.create(Object.getPrototypeOf(a)),c||aA(d=a.constructor&&a.constructor.prototype)&&d.hasOwnProperty("isPrototypeOf"))for(let c in a)a.hasOwnProperty(c)&&(b[c]=aB(a[c]));else b=a}return b}var aC=a=>void 0===a,aD=a=>Array.isArray(a)?a.filter(Boolean):[],aE=a=>aD(a.replace(/["|']|\]/g,"").split(/\.|\[/)),aF=(a,b,c)=>{if(!b||!aA(a))return c;let d=(/^\w*$/.test(b)?[b]:aE(b)).reduce((a,b)=>az(a)?a:a[b],a);return aC(d)||d===a?aC(a[b])?c:a[b]:d},aG=(a,b,c)=>{let d=-1,e=/^\w*$/.test(b)?[b]:aE(b),f=e.length,g=f-1;for(;++d<f;){let b=e[d],f=c;if(d!==g){let c=a[b];f=aA(c)||Array.isArray(c)?c:isNaN(+e[d+1])?{}:[]}if("__proto__"===b||"constructor"===b||"prototype"===b)return;a[b]=f,a=a[b]}};let aH="onChange",aI="onSubmit",aJ="maxLength",aK="minLength",aL="pattern",aM="required";e.default.createContext(null).displayName="HookFormContext";let aN=e.default.useEffect;var aO=a=>"string"==typeof a,aP=a=>az(a)||"object"!=typeof a;function aQ(a,b,c=new WeakSet){if(aP(a)||aP(b))return Object.is(a,b);if(ay(a)&&ay(b))return a.getTime()===b.getTime();let d=Object.keys(a),e=Object.keys(b);if(d.length!==e.length)return!1;if(c.has(a)||c.has(b))return!0;for(let f of(c.add(a),c.add(b),d)){let d=a[f];if(!e.includes(f))return!1;if("ref"!==f){let a=b[f];if(ay(d)&&ay(a)||aA(d)&&aA(a)||Array.isArray(d)&&Array.isArray(a)?!aQ(d,a,c):!Object.is(d,a))return!1}}return!0}var aR=(a,b,c,d,e)=>b?{...c[a],types:{...c[a]&&c[a].types?c[a].types:{},[d]:e||!0}}:{},aS=a=>Array.isArray(a)?a:[a],aT=()=>{let a=[];return{get observers(){return a},next:b=>{for(let c of a)c.next&&c.next(b)},subscribe:b=>(a.push(b),{unsubscribe:()=>{a=a.filter(a=>a!==b)}}),unsubscribe:()=>{a=[]}}},aU=a=>aA(a)&&!Object.keys(a).length,aV=a=>"function"==typeof a,aW=a=>!1;function aX(a,b){let c=Array.isArray(b)?b:/^\w*$/.test(b)?[b]:aE(b),d=1===c.length?a:function(a,b){let c=b.slice(0,-1).length,d=0;for(;d<c;)a=aC(a)?d++:a[b[d++]];return a}(a,c),e=c.length-1,f=c[e];return d&&delete d[f],0!==e&&(aA(d)&&aU(d)||Array.isArray(d)&&function(a){for(let b in a)if(a.hasOwnProperty(b)&&!aC(a[b]))return!1;return!0}(d))&&aX(a,c.slice(0,-1)),a}function aY(a){return Array.isArray(a)||aA(a)&&!(a=>{for(let b in a)if(aV(a[b]))return!0;return!1})(a)}function aZ(a,b={}){for(let c in a){let d=a[c];aY(d)?(b[c]=Array.isArray(d)?[]:{},aZ(d,b[c])):aC(d)||(b[c]=!0)}return b}function a$(a,b,c){for(let d in c||(c=aZ(b)),a){let e=a[d];if(aY(e))aC(b)||aP(c[d])?c[d]=aZ(e,Array.isArray(e)?[]:{}):a$(e,az(b)?{}:b[d],c[d]);else{let a=b[d];c[d]=!aQ(e,a)}}return c}let a_={value:!1,isValid:!1},a0={value:!0,isValid:!0};var a1=a=>{if(Array.isArray(a)){if(a.length>1){let b=a.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:b,isValid:!!b.length}}return a[0].checked&&!a[0].disabled?a[0].attributes&&!aC(a[0].attributes.value)?aC(a[0].value)||""===a[0].value?a0:{value:a[0].value,isValid:!0}:a0:a_}return a_},a2=(a,{valueAsNumber:b,valueAsDate:c,setValueAs:d})=>aC(a)?a:b?""===a?NaN:a?+a:a:c&&aO(a)?new Date(a):d?d(a):a;let a3={isValid:!1,value:null};var a4=a=>Array.isArray(a)?a.reduce((a,b)=>b&&b.checked&&!b.disabled?{isValid:!0,value:b.value}:a,a3):a3;function a5(a){let b=a.ref;return"file"===b.type?b.files:"radio"===b.type?a4(a.refs).value:"select-multiple"===b.type?[...b.selectedOptions].map(({value:a})=>a):"checkbox"===b.type?a1(a.refs).value:a2(aC(b.value)?a.ref.value:b.value,a)}var a6=a=>aC(a)?a:a instanceof RegExp?a.source:aA(a)?a.value instanceof RegExp?a.value.source:a.value:a,a7=a=>({isOnSubmit:!a||a===aI,isOnBlur:"onBlur"===a,isOnChange:a===aH,isOnAll:"all"===a,isOnTouch:"onTouched"===a});let a8="AsyncFunction";var a9=a=>!!a&&!!a.validate&&!!(aV(a.validate)&&a.validate.constructor.name===a8||aA(a.validate)&&Object.values(a.validate).find(a=>a.constructor.name===a8)),ba=(a,b,c)=>!c&&(b.watchAll||b.watch.has(a)||[...b.watch].some(b=>a.startsWith(b)&&/^\.\w+/.test(a.slice(b.length))));let bb=(a,b,c,d)=>{for(let e of c||Object.keys(a)){let c=aF(a,e);if(c){let{_f:a,...f}=c;if(a){if(a.refs&&a.refs[0]&&b(a.refs[0],e)&&!d)return!0;else if(a.ref&&b(a.ref,a.name)&&!d)return!0;else if(bb(f,b))break}else if(aA(f)&&bb(f,b))break}}};function bc(a,b,c){let d=aF(a,c);if(d||/^\w*$/.test(c))return{error:d,name:c};let e=c.split(".");for(;e.length;){let d=e.join("."),f=aF(b,d),g=aF(a,d);if(f&&!Array.isArray(f)&&c!==d)break;if(g&&g.type)return{name:d,error:g};if(g&&g.root&&g.root.type)return{name:`${d}.root`,error:g.root};e.pop()}return{name:c}}var bd=(a,b,c)=>{let d=aS(aF(a,c));return aG(d,"root",b[c]),aG(a,c,d),a};function be(a,b,c="validate"){if(aO(a)||Array.isArray(a)&&a.every(aO)||"boolean"==typeof a&&!a)return{type:c,message:aO(a)?a:"",ref:b}}var bf=a=>!aA(a)||a instanceof RegExp?{value:a,message:""}:a,bg=async(a,b,c,d,e,f)=>{let{ref:g,refs:h,required:i,maxLength:j,minLength:k,min:l,max:m,pattern:n,validate:o,name:p,valueAsNumber:q,mount:r}=a._f,s=aF(c,p);if(!r||b.has(p))return{};let t=h?h[0]:g,u=a=>{e&&t.reportValidity&&(t.setCustomValidity("boolean"==typeof a?"":a||""),t.reportValidity())},v={},w="radio"===g.type,x="checkbox"===g.type,y=(q||"file"===g.type)&&aC(g.value)&&aC(s)||""===s||Array.isArray(s)&&!s.length,z=aR.bind(null,p,d,v),A=(a,b,c,d=aJ,e=aK)=>{let f=a?b:c;v[p]={type:a?d:e,message:f,ref:g,...z(a?d:e,f)}};if(f?!Array.isArray(s)||!s.length:i&&(!(w||x)&&(y||az(s))||"boolean"==typeof s&&!s||x&&!a1(h).isValid||w&&!a4(h).isValid)){let{value:a,message:b}=aO(i)?{value:!!i,message:i}:bf(i);if(a&&(v[p]={type:aM,message:b,ref:t,...z(aM,b)},!d))return u(b),v}if(!y&&(!az(l)||!az(m))){let a,b,c=bf(m),e=bf(l);if(az(s)||isNaN(s)){let d=g.valueAsDate||new Date(s),f=a=>new Date(new Date().toDateString()+" "+a),h="time"==g.type,i="week"==g.type;aO(c.value)&&s&&(a=h?f(s)>f(c.value):i?s>c.value:d>new Date(c.value)),aO(e.value)&&s&&(b=h?f(s)<f(e.value):i?s<e.value:d<new Date(e.value))}else{let d=g.valueAsNumber||(s?+s:s);az(c.value)||(a=d>c.value),az(e.value)||(b=d<e.value)}if((a||b)&&(A(!!a,c.message,e.message,"max","min"),!d))return u(v[p].message),v}if((j||k)&&!y&&(aO(s)||f&&Array.isArray(s))){let a=bf(j),b=bf(k),c=!az(a.value)&&s.length>+a.value,e=!az(b.value)&&s.length<+b.value;if((c||e)&&(A(c,a.message,b.message),!d))return u(v[p].message),v}if(n&&!y&&aO(s)){let{value:a,message:b}=bf(n);if(a instanceof RegExp&&!s.match(a)&&(v[p]={type:aL,message:b,ref:g,...z(aL,b)},!d))return u(b),v}if(o){if(aV(o)){let a=be(await o(s,c),t);if(a&&(v[p]={...a,...z("validate",a.message)},!d))return u(a.message),v}else if(aA(o)){let a={};for(let b in o){if(!aU(a)&&!d)break;let e=be(await o[b](s,c),t,b);e&&(a={...e,...z(b,e.message)},u(e.message),d&&(v[p]=a))}if(!aU(a)&&(v[p]={ref:t,...a},!d))return v}}return u(!0),v};let bh={mode:aI,reValidateMode:aH,shouldFocusError:!0},bi=(a,b,c)=>{if(a&&"reportValidity"in a){let d=aF(c,b);a.setCustomValidity(d&&d.message||""),a.reportValidity()}},bj=(a,b)=>{for(let c in b.fields){let d=b.fields[c];d&&d.ref&&"reportValidity"in d.ref?bi(d.ref,c,a):d&&d.refs&&d.refs.forEach(b=>bi(b,c,a))}},bk=(a,b)=>{b.shouldUseNativeValidation&&bj(a,b);let c={};for(let d in a){let e=aF(b.fields,d),f=Object.assign(a[d]||{},{ref:e&&e.ref});if(bl(b.names||Object.keys(a),d)){let a=Object.assign({},aF(c,d));aG(a,"root",f),aG(c,d,a)}else aG(c,d,f)}return c},bl=(a,b)=>{let c=bm(b);return a.some(a=>bm(a).match(`^${c}\\.\\d+`))};function bm(a){return a.replace(/\]|\[/g,"")}let bn=Object.freeze({status:"aborted"});function bo(a,b,c){function d(c,d){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:d,constr:g,traits:new Set},enumerable:!1}),c._zod.traits.has(a))return;c._zod.traits.add(a),b(c,d);let e=g.prototype,f=Object.keys(e);for(let a=0;a<f.length;a++){let b=f[a];b in c||(c[b]=e[b].bind(c))}}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}let bp=Symbol("zod_brand");class bq extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class br extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}let bs={};function bt(a){return a&&Object.assign(bs,a),bs}function bu(a){return a}function bv(a){return a}function bw(a){}function bx(a){throw Error()}function by(a){}function bz(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}function bA(a,b="|"){return a.map(a=>b1(a)).join(b)}function bB(a,b){return"bigint"==typeof b?b.toString():b}function bC(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function bD(a){return null==a}function bE(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}function bF(a,b){let c=(a.toString().split(".")[1]||"").length,d=b.toString(),e=(d.split(".")[1]||"").length;if(0===e&&/\d?e-\d?/.test(d)){let a=d.match(/\d?e-(\d?)/);a?.[1]&&(e=Number.parseInt(a[1]))}let f=c>e?c:e;return Number.parseInt(a.toFixed(f).replace(".",""))%Number.parseInt(b.toFixed(f).replace(".",""))/10**f}a.s(["$ZodAsyncError",()=>bq,"$ZodEncodeError",()=>br,"$brand",0,bp,"$constructor",()=>bo,"NEVER",0,bn,"config",()=>bt,"globalConfig",0,bs],34449);let bG=Symbol("evaluating");function bH(a,b,c){let d;Object.defineProperty(a,b,{get(){if(d!==bG)return void 0===d&&(d=bG,d=c()),d},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function bI(a){return Object.create(Object.getPrototypeOf(a),Object.getOwnPropertyDescriptors(a))}function bJ(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}function bK(...a){let b={};for(let c of a)Object.assign(b,Object.getOwnPropertyDescriptors(c));return Object.defineProperties({},b)}function bL(a){return bK(a._zod.def)}function bM(a,b){return b?b.reduce((a,b)=>a?.[b],a):a}function bN(a){let b=Object.keys(a);return Promise.all(b.map(b=>a[b])).then(a=>{let c={};for(let d=0;d<b.length;d++)c[b[d]]=a[d];return c})}function bO(a=10){let b="abcdefghijklmnopqrstuvwxyz",c="";for(let d=0;d<a;d++)c+=b[Math.floor(Math.random()*b.length)];return c}function bP(a){return JSON.stringify(a)}function bQ(a){return a.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}let bR="captureStackTrace"in Error?Error.captureStackTrace:(...a)=>{};function bS(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}let bT=bC(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function bU(a){if(!1===bS(a))return!1;let b=a.constructor;if(void 0===b||"function"!=typeof b)return!0;let c=b.prototype;return!1!==bS(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}function bV(a){return bU(a)?{...a}:Array.isArray(a)?[...a]:a}function bW(a){let b=0;for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b++;return b}let bX=new Set(["string","number","symbol"]),bY=new Set(["string","number","bigint","boolean","symbol","undefined"]);function bZ(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b$(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d}function b_(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}function b0(a){let b;return new Proxy({},{get:(c,d,e)=>(b??(b=a()),Reflect.get(b,d,e)),set:(c,d,e,f)=>(b??(b=a()),Reflect.set(b,d,e,f)),has:(c,d)=>(b??(b=a()),Reflect.has(b,d)),deleteProperty:(c,d)=>(b??(b=a()),Reflect.deleteProperty(b,d)),ownKeys:c=>(b??(b=a()),Reflect.ownKeys(b)),getOwnPropertyDescriptor:(c,d)=>(b??(b=a()),Reflect.getOwnPropertyDescriptor(b,d)),defineProperty:(c,d,e)=>(b??(b=a()),Reflect.defineProperty(b,d,e))})}function b1(a){return"bigint"==typeof a?a.toString()+"n":"string"==typeof a?`"${a}"`:`${a}`}function b2(a){return Object.keys(a).filter(b=>"optional"===a[b]._zod.optin&&"optional"===a[b]._zod.optout)}let b3={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},b4={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function b5(a,b){let c=a._zod.def,d=bK(a._zod.def,{get shape(){let a={};for(let d in b){if(!(d in c.shape))throw Error(`Unrecognized key: "${d}"`);b[d]&&(a[d]=c.shape[d])}return bJ(this,"shape",a),a},checks:[]});return b$(a,d)}function b6(a,b){let c=a._zod.def,d=bK(a._zod.def,{get shape(){let d={...a._zod.def.shape};for(let a in b){if(!(a in c.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&delete d[a]}return bJ(this,"shape",d),d},checks:[]});return b$(a,d)}function b7(a,b){if(!bU(b))throw Error("Invalid input to extend: expected a plain object");let c=a._zod.def.checks;if(c&&c.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let d=bK(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b};return bJ(this,"shape",c),c},checks:[]});return b$(a,d)}function b8(a,b){if(!bU(b))throw Error("Invalid input to safeExtend: expected a plain object");let c={...a._zod.def,get shape(){let c={...a._zod.def.shape,...b};return bJ(this,"shape",c),c},checks:a._zod.def.checks};return b$(a,c)}function b9(a,b){let c=bK(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b._zod.def.shape};return bJ(this,"shape",c),c},get catchall(){return b._zod.def.catchall},checks:[]});return b$(a,c)}function ca(a,b,c){let d=bK(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in d))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=a?new a({type:"optional",innerType:d[b]}):d[b])}else for(let b in d)e[b]=a?new a({type:"optional",innerType:d[b]}):d[b];return bJ(this,"shape",e),e},checks:[]});return b$(b,d)}function cb(a,b,c){let d=bK(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in e))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=new a({type:"nonoptional",innerType:d[b]}))}else for(let b in d)e[b]=new a({type:"nonoptional",innerType:d[b]});return bJ(this,"shape",e),e},checks:[]});return b$(b,d)}function cc(a,b=0){if(!0===a.aborted)return!0;for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function cd(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function ce(a){return"string"==typeof a?a:a?.message}function cf(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=ce(a.inst?._zod.def?.error?.(a))??ce(b?.error?.(a))??ce(c.customError?.(a))??ce(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}function cg(a){return a instanceof Set?"set":a instanceof Map?"map":a instanceof File?"file":"unknown"}function ch(a){return Array.isArray(a)?"array":"string"==typeof a?"string":"unknown"}function ci(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}function cj(a){return Object.entries(a).filter(([a,b])=>Number.isNaN(Number.parseInt(a,10))).map(a=>a[1])}function ck(a){let b=atob(a),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c}function cl(a){let b="";for(let c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return btoa(b)}function cm(a){let b=a.replace(/-/g,"+").replace(/_/g,"/"),c="=".repeat((4-b.length%4)%4);return ck(b+c)}function cn(a){return cl(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function co(a){let b=a.replace(/^0x/,"");if(b.length%2!=0)throw Error("Invalid hex string length");let c=new Uint8Array(b.length/2);for(let a=0;a<b.length;a+=2)c[a/2]=Number.parseInt(b.slice(a,a+2),16);return c}function cp(a){return Array.from(a).map(a=>a.toString(16).padStart(2,"0")).join("")}class cq{constructor(...a){}}a.s(["BIGINT_FORMAT_RANGES",0,b4,"Class",()=>cq,"NUMBER_FORMAT_RANGES",0,b3,"aborted",()=>cc,"allowsEval",0,bT,"assert",()=>by,"assertEqual",()=>bu,"assertIs",()=>bw,"assertNever",()=>bx,"assertNotEqual",()=>bv,"assignProp",()=>bJ,"base64ToUint8Array",()=>ck,"base64urlToUint8Array",()=>cm,"cached",()=>bC,"captureStackTrace",0,bR,"cleanEnum",()=>cj,"cleanRegex",()=>bE,"clone",()=>b$,"cloneDef",()=>bL,"createTransparentProxy",()=>b0,"defineLazy",()=>bH,"esc",()=>bP,"escapeRegex",()=>bZ,"extend",()=>b7,"finalizeIssue",()=>cf,"floatSafeRemainder",()=>bF,"getElementAtPath",()=>bM,"getEnumValues",()=>bz,"getLengthableOrigin",()=>ch,"getParsedType",0,a=>{let b=typeof a;switch(b){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(a)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return"promise";if("undefined"!=typeof Map&&a instanceof Map)return"map";if("undefined"!=typeof Set&&a instanceof Set)return"set";if("undefined"!=typeof Date&&a instanceof Date)return"date";if("undefined"!=typeof File&&a instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${b}`)}},"getSizableOrigin",()=>cg,"hexToUint8Array",()=>co,"isObject",()=>bS,"isPlainObject",()=>bU,"issue",()=>ci,"joinValues",()=>bA,"jsonStringifyReplacer",()=>bB,"merge",()=>b9,"mergeDefs",()=>bK,"normalizeParams",()=>b_,"nullish",()=>bD,"numKeys",()=>bW,"objectClone",()=>bI,"omit",()=>b6,"optionalKeys",()=>b2,"partial",()=>ca,"pick",()=>b5,"prefixIssues",()=>cd,"primitiveTypes",0,bY,"promiseAllObject",()=>bN,"propertyKeyTypes",0,bX,"randomString",()=>bO,"required",()=>cb,"safeExtend",()=>b8,"shallowClone",()=>bV,"slugify",()=>bQ,"stringifyPrimitive",()=>b1,"uint8ArrayToBase64",()=>cl,"uint8ArrayToBase64url",()=>cn,"uint8ArrayToHex",()=>cp,"unwrapMessage",()=>ce],66446);let cr=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),a.message=JSON.stringify(b,bB,2),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},cs=bo("$ZodError",cr),ct=bo("$ZodError",cr,{Parent:Error});function cu(a,b=a=>a.message){let c={},d=[];for(let e of a.issues)e.path.length>0?(c[e.path[0]]=c[e.path[0]]||[],c[e.path[0]].push(b(e))):d.push(b(e));return{formErrors:d,fieldErrors:c}}function cv(a,b=a=>a.message){let c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code&&e.errors.length)e.errors.map(a=>d({issues:a}));else if("invalid_key"===e.code)d({issues:e.issues});else if("invalid_element"===e.code)d({issues:e.issues});else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(a),c}function cw(a,b=a=>a.message){let c={errors:[]},d=(a,e=[])=>{var f,g;for(let h of a.issues)if("invalid_union"===h.code&&h.errors.length)h.errors.map(a=>d({issues:a},h.path));else if("invalid_key"===h.code)d({issues:h.issues},h.path);else if("invalid_element"===h.code)d({issues:h.issues},h.path);else{let a=[...e,...h.path];if(0===a.length){c.errors.push(b(h));continue}let d=c,i=0;for(;i<a.length;){let c=a[i],e=i===a.length-1;"string"==typeof c?(d.properties??(d.properties={}),(f=d.properties)[c]??(f[c]={errors:[]}),d=d.properties[c]):(d.items??(d.items=[]),(g=d.items)[c]??(g[c]={errors:[]}),d=d.items[c]),e&&d.errors.push(b(h)),i++}}};return d(a),c}function cx(a){let b=[];for(let c of a.map(a=>"object"==typeof a?a.key:a))"number"==typeof c?b.push(`[${c}]`):"symbol"==typeof c?b.push(`[${JSON.stringify(String(c))}]`):/[^\w$]/.test(c)?b.push(`[${JSON.stringify(c)}]`):(b.length&&b.push("."),b.push(c));return b.join("")}function cy(a){let b=[];for(let c of[...a.issues].sort((a,b)=>(a.path??[]).length-(b.path??[]).length))b.push(`âœ– ${c.message}`),c.path?.length&&b.push(`  â†’ at ${cx(c.path)}`);return b.join("\n")}a.s(["$ZodError",0,cs,"$ZodRealError",0,ct,"flattenError",()=>cu,"formatError",()=>cv,"prettifyError",()=>cy,"toDotPath",()=>cx,"treeifyError",()=>cw],62890);let cz=a=>(b,c,d,e)=>{let f=d?Object.assign(d,{async:!1}):{async:!1},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise)throw new bq;if(g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>cf(a,f,bt())));throw bR(b,e?.callee),b}return g.value},cA=cz(ct),cB=a=>async(b,c,d,e)=>{let f=d?Object.assign(d,{async:!0}):{async:!0},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise&&(g=await g),g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>cf(a,f,bt())));throw bR(b,e?.callee),b}return g.value},cC=cB(ct),cD=a=>(b,c,d)=>{let e=d?{...d,async:!1}:{async:!1},f=b._zod.run({value:c,issues:[]},e);if(f instanceof Promise)throw new bq;return f.issues.length?{success:!1,error:new(a??cs)(f.issues.map(a=>cf(a,e,bt())))}:{success:!0,data:f.value}},cE=cD(ct),cF=a=>async(b,c,d)=>{let e=d?Object.assign(d,{async:!0}):{async:!0},f=b._zod.run({value:c,issues:[]},e);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new a(f.issues.map(a=>cf(a,e,bt())))}:{success:!0,data:f.value}},cG=cF(ct),cH=a=>(b,c,d)=>{let e=d?Object.assign(d,{direction:"backward"}):{direction:"backward"};return cz(a)(b,c,e)},cI=cH(ct),cJ=a=>(b,c,d)=>cz(a)(b,c,d),cK=cJ(ct),cL=a=>async(b,c,d)=>{let e=d?Object.assign(d,{direction:"backward"}):{direction:"backward"};return cB(a)(b,c,e)},cM=cL(ct),cN=a=>async(b,c,d)=>cB(a)(b,c,d),cO=cN(ct),cP=a=>(b,c,d)=>{let e=d?Object.assign(d,{direction:"backward"}):{direction:"backward"};return cD(a)(b,c,e)},cQ=cP(ct),cR=a=>(b,c,d)=>cD(a)(b,c,d),cS=cR(ct),cT=a=>async(b,c,d)=>{let e=d?Object.assign(d,{direction:"backward"}):{direction:"backward"};return cF(a)(b,c,e)},cU=cT(ct),cV=a=>async(b,c,d)=>cF(a)(b,c,d),cW=cV(ct);a.s(["_decode",0,cJ,"_decodeAsync",0,cN,"_encode",0,cH,"_encodeAsync",0,cL,"_parse",0,cz,"_parseAsync",0,cB,"_safeDecode",0,cR,"_safeDecodeAsync",0,cV,"_safeEncode",0,cP,"_safeEncodeAsync",0,cT,"_safeParse",0,cD,"_safeParseAsync",0,cF,"decode",0,cK,"decodeAsync",0,cO,"encode",0,cI,"encodeAsync",0,cM,"parse",0,cA,"parseAsync",0,cC,"safeDecode",0,cS,"safeDecodeAsync",0,cW,"safeEncode",0,cQ,"safeEncodeAsync",0,cU,"safeParse",0,cE,"safeParseAsync",0,cG],86372);let cX=/^[cC][^\s-]{8,}$/,cY=/^[0-9a-z]+$/,cZ=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,c$=/^[0-9a-vA-V]{20}$/,c_=/^[A-Za-z0-9]{27}$/,c0=/^[a-zA-Z0-9_-]{21}$/,c1=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,c2=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,c3=a=>a?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${a}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,c4=c3(4),c5=c3(6),c6=c3(7),c7=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,c8=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u;function c9(){return RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}let da=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,db=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,dc=a=>{let b=bZ(a??":");return RegExp(`^(?:[0-9A-F]{2}${b}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${b}){5}[0-9a-f]{2}$`)},dd=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,de=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,df=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,dg=/^[A-Za-z0-9_-]*$/,dh=/^\+(?:[0-9]){6,14}[0-9]$/,di="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",dj=RegExp(`^${di}$`);function dk(a){let b="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof a.precision?-1===a.precision?`${b}`:0===a.precision?`${b}:[0-5]\\d`:`${b}:[0-5]\\d\\.\\d{${a.precision}}`:`${b}(?::[0-5]\\d(?:\\.\\d+)?)?`}function dl(a){return RegExp(`^${dk(a)}$`)}function dm(a){let b=dk({precision:a.precision}),c=["Z"];a.local&&c.push(""),a.offset&&c.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let d=`${b}(?:${c.join("|")})`;return RegExp(`^${di}T(?:${d})$`)}let dn=a=>{let b=a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${b}$`)},dp=/^-?\d+n?$/,dq=/^-?\d+$/,dr=/^-?\d+(?:\.\d+)?/,ds=/^(?:true|false)$/i,dt=/^null$/i,du=/^undefined$/i,dv=/^[^A-Z]*$/,dw=/^[^a-z]*$/;function dx(a,b){return RegExp(`^[A-Za-z0-9+/]{${a}}${b}$`)}function dy(a){return RegExp(`^[A-Za-z0-9_-]{${a}}$`)}let dz=dx(22,"=="),dA=dy(22),dB=dx(27,"="),dC=dy(27),dD=dx(43,"="),dE=dy(43),dF=dx(64,""),dG=dy(64),dH=dx(86,"=="),dI=dy(86);a.s(["base64",0,df,"base64url",0,dg,"bigint",0,dp,"boolean",0,ds,"browserEmail",0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"cidrv4",0,dd,"cidrv6",0,de,"cuid",0,cX,"cuid2",0,cY,"date",0,dj,"datetime",()=>dm,"domain",0,/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,"duration",0,c1,"e164",0,dh,"email",0,c7,"emoji",()=>c9,"extendedDuration",0,/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,"guid",0,c2,"hex",0,/^[0-9a-fA-F]*$/,"hostname",0,/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,"html5Email",0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"idnEmail",0,c8,"integer",0,dq,"ipv4",0,da,"ipv6",0,db,"ksuid",0,c_,"lowercase",0,dv,"mac",0,dc,"md5_base64",0,dz,"md5_base64url",0,dA,"md5_hex",0,/^[0-9a-fA-F]{32}$/,"nanoid",0,c0,"null",()=>dt,"number",0,dr,"rfc5322Email",0,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"sha1_base64",0,dB,"sha1_base64url",0,dC,"sha1_hex",0,/^[0-9a-fA-F]{40}$/,"sha256_base64",0,dD,"sha256_base64url",0,dE,"sha256_hex",0,/^[0-9a-fA-F]{64}$/,"sha384_base64",0,dF,"sha384_base64url",0,dG,"sha384_hex",0,/^[0-9a-fA-F]{96}$/,"sha512_base64",0,dH,"sha512_base64url",0,dI,"sha512_hex",0,/^[0-9a-fA-F]{128}$/,"string",0,dn,"time",()=>dl,"ulid",0,cZ,"undefined",()=>du,"unicodeEmail",0,c8,"uppercase",0,dw,"uuid",0,c3,"uuid4",0,c4,"uuid6",0,c5,"uuid7",0,c6,"xid",0,c$],45976);let dJ=bo("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),dK={number:"number",bigint:"bigint",object:"date"},dL=bo("$ZodCheckLessThan",(a,b)=>{dJ.init(a,b);let c=dK[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.maximum:c.exclusiveMaximum)??1/0;b.value<d&&(b.inclusive?c.maximum=b.value:c.exclusiveMaximum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value<=b.value:d.value<b.value)||d.issues.push({origin:c,code:"too_big",maximum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),dM=bo("$ZodCheckGreaterThan",(a,b)=>{dJ.init(a,b);let c=dK[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.minimum:c.exclusiveMinimum)??-1/0;b.value>d&&(b.inclusive?c.minimum=b.value:c.exclusiveMinimum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value>=b.value:d.value>b.value)||d.issues.push({origin:c,code:"too_small",minimum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),dN=bo("$ZodCheckMultipleOf",(a,b)=>{dJ.init(a,b),a._zod.onattach.push(a=>{var c;(c=a._zod.bag).multipleOf??(c.multipleOf=b.value)}),a._zod.check=c=>{if(typeof c.value!=typeof b.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof c.value?c.value%b.value===BigInt(0):0===bF(c.value,b.value))||c.issues.push({origin:typeof c.value,code:"not_multiple_of",divisor:b.value,input:c.value,inst:a,continue:!b.abort})}}),dO=bo("$ZodCheckNumberFormat",(a,b)=>{dJ.init(a,b),b.format=b.format||"float64";let c=b.format?.includes("int"),d=c?"int":"number",[e,f]=b3[b.format];a._zod.onattach.push(a=>{let d=a._zod.bag;d.format=b.format,d.minimum=e,d.maximum=f,c&&(d.pattern=dq)}),a._zod.check=g=>{let h=g.value;if(c){if(!Number.isInteger(h))return void g.issues.push({expected:d,format:b.format,code:"invalid_type",continue:!1,input:h,inst:a});if(!Number.isSafeInteger(h))return void(h>0?g.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}):g.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}))}h<e&&g.issues.push({origin:"number",input:h,code:"too_small",minimum:e,inclusive:!0,inst:a,continue:!b.abort}),h>f&&g.issues.push({origin:"number",input:h,code:"too_big",maximum:f,inst:a})}}),dP=bo("$ZodCheckBigIntFormat",(a,b)=>{dJ.init(a,b);let[c,d]=b4[b.format];a._zod.onattach.push(a=>{let e=a._zod.bag;e.format=b.format,e.minimum=c,e.maximum=d}),a._zod.check=e=>{let f=e.value;f<c&&e.issues.push({origin:"bigint",input:f,code:"too_small",minimum:c,inclusive:!0,inst:a,continue:!b.abort}),f>d&&e.issues.push({origin:"bigint",input:f,code:"too_big",maximum:d,inst:a})}}),dQ=bo("$ZodCheckMaxSize",(a,b)=>{var c;dJ.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!bD(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;d.size<=b.maximum||c.issues.push({origin:cg(d),code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),dR=bo("$ZodCheckMinSize",(a,b)=>{var c;dJ.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!bD(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;d.size>=b.minimum||c.issues.push({origin:cg(d),code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),dS=bo("$ZodCheckSizeEquals",(a,b)=>{var c;dJ.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!bD(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.size,c.maximum=b.size,c.size=b.size}),a._zod.check=c=>{let d=c.value,e=d.size;if(e===b.size)return;let f=e>b.size;c.issues.push({origin:cg(d),...f?{code:"too_big",maximum:b.size}:{code:"too_small",minimum:b.size},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),dT=bo("$ZodCheckMaxLength",(a,b)=>{var c;dJ.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!bD(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;if(d.length<=b.maximum)return;let e=ch(d);c.issues.push({origin:e,code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),dU=bo("$ZodCheckMinLength",(a,b)=>{var c;dJ.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!bD(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;if(d.length>=b.minimum)return;let e=ch(d);c.issues.push({origin:e,code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),dV=bo("$ZodCheckLengthEquals",(a,b)=>{var c;dJ.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!bD(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.length,c.maximum=b.length,c.length=b.length}),a._zod.check=c=>{let d=c.value,e=d.length;if(e===b.length)return;let f=ch(d),g=e>b.length;c.issues.push({origin:f,...g?{code:"too_big",maximum:b.length}:{code:"too_small",minimum:b.length},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),dW=bo("$ZodCheckStringFormat",(a,b)=>{var c,d;dJ.init(a,b),a._zod.onattach.push(a=>{let c=a._zod.bag;c.format=b.format,b.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(b.pattern))}),b.pattern?(c=a._zod).check??(c.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:b.format,input:c.value,...b.pattern?{pattern:b.pattern.toString()}:{},inst:a,continue:!b.abort})}):(d=a._zod).check??(d.check=()=>{})}),dX=bo("$ZodCheckRegex",(a,b)=>{dW.init(a,b),a._zod.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:"regex",input:c.value,pattern:b.pattern.toString(),inst:a,continue:!b.abort})}}),dY=bo("$ZodCheckLowerCase",(a,b)=>{b.pattern??(b.pattern=dv),dW.init(a,b)}),dZ=bo("$ZodCheckUpperCase",(a,b)=>{b.pattern??(b.pattern=dw),dW.init(a,b)}),d$=bo("$ZodCheckIncludes",(a,b)=>{dJ.init(a,b);let c=bZ(b.includes),d=new RegExp("number"==typeof b.position?`^.{${b.position}}${c}`:c);b.pattern=d,a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(d)}),a._zod.check=c=>{c.value.includes(b.includes,b.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:b.includes,input:c.value,inst:a,continue:!b.abort})}}),d_=bo("$ZodCheckStartsWith",(a,b)=>{dJ.init(a,b);let c=RegExp(`^${bZ(b.prefix)}.*`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.startsWith(b.prefix)||c.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:b.prefix,input:c.value,inst:a,continue:!b.abort})}}),d0=bo("$ZodCheckEndsWith",(a,b)=>{dJ.init(a,b);let c=RegExp(`.*${bZ(b.suffix)}$`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.endsWith(b.suffix)||c.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:b.suffix,input:c.value,inst:a,continue:!b.abort})}});function d1(a,b,c){a.issues.length&&b.issues.push(...cd(c,a.issues))}let d2=bo("$ZodCheckProperty",(a,b)=>{dJ.init(a,b),a._zod.check=a=>{let c=b.schema._zod.run({value:a.value[b.property],issues:[]},{});if(c instanceof Promise)return c.then(c=>d1(c,a,b.property));d1(c,a,b.property)}}),d3=bo("$ZodCheckMimeType",(a,b)=>{dJ.init(a,b);let c=new Set(b.mime);a._zod.onattach.push(a=>{a._zod.bag.mime=b.mime}),a._zod.check=d=>{c.has(d.value.type)||d.issues.push({code:"invalid_value",values:b.mime,input:d.value.type,inst:a,continue:!b.abort})}}),d4=bo("$ZodCheckOverwrite",(a,b)=>{dJ.init(a,b),a._zod.check=a=>{a.value=b.tx(a.value)}});a.s(["$ZodCheck",0,dJ,"$ZodCheckBigIntFormat",0,dP,"$ZodCheckEndsWith",0,d0,"$ZodCheckGreaterThan",0,dM,"$ZodCheckIncludes",0,d$,"$ZodCheckLengthEquals",0,dV,"$ZodCheckLessThan",0,dL,"$ZodCheckLowerCase",0,dY,"$ZodCheckMaxLength",0,dT,"$ZodCheckMaxSize",0,dQ,"$ZodCheckMimeType",0,d3,"$ZodCheckMinLength",0,dU,"$ZodCheckMinSize",0,dR,"$ZodCheckMultipleOf",0,dN,"$ZodCheckNumberFormat",0,dO,"$ZodCheckOverwrite",0,d4,"$ZodCheckProperty",0,d2,"$ZodCheckRegex",0,dX,"$ZodCheckSizeEquals",0,dS,"$ZodCheckStartsWith",0,d_,"$ZodCheckStringFormat",0,dW,"$ZodCheckUpperCase",0,dZ],31362);class d5{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split("\n").filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join("\n"))}}a.s(["Doc",()=>d5],14087);let d6={major:4,minor:1,patch:13};a.s(["version",0,d6],81767);let d7=bo("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=d6;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,e=cc(a);for(let f of b){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(e)continue;let b=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new bq;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,a.issues.length!==b&&(e||(e=cc(a,b)))});else{if(a.issues.length===b)continue;e||(e=cc(a,b))}}return d?d.then(()=>a):a},c=(c,e,f)=>{if(cc(c))return c.aborted=!0,c;let g=b(e,d,f);if(g instanceof Promise){if(!1===f.async)throw new bq;return g.then(b=>a._zod.parse(b,f))}return a._zod.parse(g,f)};a._zod.run=(e,f)=>{if(f.skipChecks)return a._zod.parse(e,f);if("backward"===f.direction){let b=a._zod.parse({value:e.value,issues:[]},{...f,skipChecks:!0});return b instanceof Promise?b.then(a=>c(a,e,f)):c(b,e,f)}let g=a._zod.parse(e,f);if(g instanceof Promise){if(!1===f.async)throw new bq;return g.then(a=>b(a,d,f))}return b(g,d,f)}}a["~standard"]={validate:b=>{try{let c=cE(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return cG(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),d8=bo("$ZodString",(a,b)=>{d7.init(a,b),a._zod.pattern=[...a?._zod.bag?.patterns??[]].pop()??dn(a._zod.bag),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=String(c.value)}catch(a){}return"string"==typeof c.value||c.issues.push({expected:"string",code:"invalid_type",input:c.value,inst:a}),c}}),d9=bo("$ZodStringFormat",(a,b)=>{dW.init(a,b),d8.init(a,b)}),ea=bo("$ZodGUID",(a,b)=>{b.pattern??(b.pattern=c2),d9.init(a,b)}),eb=bo("$ZodUUID",(a,b)=>{if(b.version){let a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[b.version];if(void 0===a)throw Error(`Invalid UUID version: "${b.version}"`);b.pattern??(b.pattern=c3(a))}else b.pattern??(b.pattern=c3());d9.init(a,b)}),ec=bo("$ZodEmail",(a,b)=>{b.pattern??(b.pattern=c7),d9.init(a,b)}),ed=bo("$ZodURL",(a,b)=>{d9.init(a,b),a._zod.check=c=>{try{let d=c.value.trim(),e=new URL(d);b.hostname&&(b.hostname.lastIndex=0,b.hostname.test(e.hostname)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:b.hostname.source,input:c.value,inst:a,continue:!b.abort})),b.protocol&&(b.protocol.lastIndex=0,b.protocol.test(e.protocol.endsWith(":")?e.protocol.slice(0,-1):e.protocol)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:b.protocol.source,input:c.value,inst:a,continue:!b.abort})),b.normalize?c.value=e.href:c.value=d;return}catch(d){c.issues.push({code:"invalid_format",format:"url",input:c.value,inst:a,continue:!b.abort})}}}),ee=bo("$ZodEmoji",(a,b)=>{b.pattern??(b.pattern=c9()),d9.init(a,b)}),ef=bo("$ZodNanoID",(a,b)=>{b.pattern??(b.pattern=c0),d9.init(a,b)}),eg=bo("$ZodCUID",(a,b)=>{b.pattern??(b.pattern=cX),d9.init(a,b)}),eh=bo("$ZodCUID2",(a,b)=>{b.pattern??(b.pattern=cY),d9.init(a,b)}),ei=bo("$ZodULID",(a,b)=>{b.pattern??(b.pattern=cZ),d9.init(a,b)}),ej=bo("$ZodXID",(a,b)=>{b.pattern??(b.pattern=c$),d9.init(a,b)}),ek=bo("$ZodKSUID",(a,b)=>{b.pattern??(b.pattern=c_),d9.init(a,b)}),el=bo("$ZodISODateTime",(a,b)=>{b.pattern??(b.pattern=dm(b)),d9.init(a,b)}),em=bo("$ZodISODate",(a,b)=>{b.pattern??(b.pattern=dj),d9.init(a,b)}),en=bo("$ZodISOTime",(a,b)=>{b.pattern??(b.pattern=dl(b)),d9.init(a,b)}),eo=bo("$ZodISODuration",(a,b)=>{b.pattern??(b.pattern=c1),d9.init(a,b)}),ep=bo("$ZodIPv4",(a,b)=>{b.pattern??(b.pattern=da),d9.init(a,b),a._zod.bag.format="ipv4"}),eq=bo("$ZodIPv6",(a,b)=>{b.pattern??(b.pattern=db),d9.init(a,b),a._zod.bag.format="ipv6",a._zod.check=c=>{try{new URL(`http://[${c.value}]`)}catch{c.issues.push({code:"invalid_format",format:"ipv6",input:c.value,inst:a,continue:!b.abort})}}}),er=bo("$ZodMAC",(a,b)=>{b.pattern??(b.pattern=dc(b.delimiter)),d9.init(a,b),a._zod.bag.format="mac"}),es=bo("$ZodCIDRv4",(a,b)=>{b.pattern??(b.pattern=dd),d9.init(a,b)}),et=bo("$ZodCIDRv6",(a,b)=>{b.pattern??(b.pattern=de),d9.init(a,b),a._zod.check=c=>{let d=c.value.split("/");try{if(2!==d.length)throw Error();let[a,b]=d;if(!b)throw Error();let c=Number(b);if(`${c}`!==b||c<0||c>128)throw Error();new URL(`http://[${a}]`)}catch{c.issues.push({code:"invalid_format",format:"cidrv6",input:c.value,inst:a,continue:!b.abort})}}});function eu(a){if(""===a)return!0;if(a.length%4!=0)return!1;try{return atob(a),!0}catch{return!1}}let ev=bo("$ZodBase64",(a,b)=>{b.pattern??(b.pattern=df),d9.init(a,b),a._zod.bag.contentEncoding="base64",a._zod.check=c=>{eu(c.value)||c.issues.push({code:"invalid_format",format:"base64",input:c.value,inst:a,continue:!b.abort})}});function ew(a){if(!dg.test(a))return!1;let b=a.replace(/[-_]/g,a=>"-"===a?"+":"/");return eu(b.padEnd(4*Math.ceil(b.length/4),"="))}let ex=bo("$ZodBase64URL",(a,b)=>{b.pattern??(b.pattern=dg),d9.init(a,b),a._zod.bag.contentEncoding="base64url",a._zod.check=c=>{ew(c.value)||c.issues.push({code:"invalid_format",format:"base64url",input:c.value,inst:a,continue:!b.abort})}}),ey=bo("$ZodE164",(a,b)=>{b.pattern??(b.pattern=dh),d9.init(a,b)});function ez(a,b=null){try{let c=a.split(".");if(3!==c.length)return!1;let[d]=c;if(!d)return!1;let e=JSON.parse(atob(d));if("typ"in e&&e?.typ!=="JWT"||!e.alg||b&&(!("alg"in e)||e.alg!==b))return!1;return!0}catch{return!1}}let eA=bo("$ZodJWT",(a,b)=>{d9.init(a,b),a._zod.check=c=>{ez(c.value,b.alg)||c.issues.push({code:"invalid_format",format:"jwt",input:c.value,inst:a,continue:!b.abort})}}),eB=bo("$ZodCustomStringFormat",(a,b)=>{d9.init(a,b),a._zod.check=c=>{b.fn(c.value)||c.issues.push({code:"invalid_format",format:b.format,input:c.value,inst:a,continue:!b.abort})}}),eC=bo("$ZodNumber",(a,b)=>{d7.init(a,b),a._zod.pattern=a._zod.bag.pattern??dr,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=Number(c.value)}catch(a){}let e=c.value;if("number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e))return c;let f="number"==typeof e?Number.isNaN(e)?"NaN":Number.isFinite(e)?void 0:"Infinity":void 0;return c.issues.push({expected:"number",code:"invalid_type",input:e,inst:a,...f?{received:f}:{}}),c}}),eD=bo("$ZodNumberFormat",(a,b)=>{dO.init(a,b),eC.init(a,b)}),eE=bo("$ZodBoolean",(a,b)=>{d7.init(a,b),a._zod.pattern=ds,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=!!c.value}catch(a){}let e=c.value;return"boolean"==typeof e||c.issues.push({expected:"boolean",code:"invalid_type",input:e,inst:a}),c}}),eF=bo("$ZodBigInt",(a,b)=>{d7.init(a,b),a._zod.pattern=dp,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=BigInt(c.value)}catch(a){}return"bigint"==typeof c.value||c.issues.push({expected:"bigint",code:"invalid_type",input:c.value,inst:a}),c}}),eG=bo("$ZodBigIntFormat",(a,b)=>{dP.init(a,b),eF.init(a,b)}),eH=bo("$ZodSymbol",(a,b)=>{d7.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return"symbol"==typeof d||b.issues.push({expected:"symbol",code:"invalid_type",input:d,inst:a}),b}}),eI=bo("$ZodUndefined",(a,b)=>{d7.init(a,b),a._zod.pattern=du,a._zod.values=new Set([void 0]),a._zod.optin="optional",a._zod.optout="optional",a._zod.parse=(b,c)=>{let d=b.value;return void 0===d||b.issues.push({expected:"undefined",code:"invalid_type",input:d,inst:a}),b}}),eJ=bo("$ZodNull",(a,b)=>{d7.init(a,b),a._zod.pattern=dt,a._zod.values=new Set([null]),a._zod.parse=(b,c)=>{let d=b.value;return null===d||b.issues.push({expected:"null",code:"invalid_type",input:d,inst:a}),b}}),eK=bo("$ZodAny",(a,b)=>{d7.init(a,b),a._zod.parse=a=>a}),eL=bo("$ZodUnknown",(a,b)=>{d7.init(a,b),a._zod.parse=a=>a}),eM=bo("$ZodNever",(a,b)=>{d7.init(a,b),a._zod.parse=(b,c)=>(b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:a}),b)}),eN=bo("$ZodVoid",(a,b)=>{d7.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return void 0===d||b.issues.push({expected:"void",code:"invalid_type",input:d,inst:a}),b}}),eO=bo("$ZodDate",(a,b)=>{d7.init(a,b),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=new Date(c.value)}catch(a){}let e=c.value,f=e instanceof Date;return f&&!Number.isNaN(e.getTime())||c.issues.push({expected:"date",code:"invalid_type",input:e,...f?{received:"Invalid Date"}:{},inst:a}),c}});function eP(a,b,c){a.issues.length&&b.issues.push(...cd(c,a.issues)),b.value[c]=a.value}let eQ=bo("$ZodArray",(a,b)=>{d7.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>eP(b,c,a))):eP(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function eR(a,b,c,d){a.issues.length&&b.issues.push(...cd(c,a.issues)),void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}function eS(a){let b=Object.keys(a.shape);for(let c of b)if(!a.shape?.[c]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${c}": expected a Zod schema`);let c=b2(a.shape);return{...a,keys:b,keySet:new Set(b),numKeys:b.length,optionalKeys:new Set(c)}}function eT(a,b,c,d,e,f){let g=[],h=e.keySet,i=e.catchall._zod,j=i.def.type;for(let e in b){if(h.has(e))continue;if("never"===j){g.push(e);continue}let f=i.run({value:b[e],issues:[]},d);f instanceof Promise?a.push(f.then(a=>eR(a,c,e,b))):eR(f,c,e,b)}return(g.length&&c.issues.push({code:"unrecognized_keys",keys:g,input:b,inst:f}),a.length)?Promise.all(a).then(()=>c):c}let eU=bo("$ZodObject",(a,b)=>{let c;d7.init(a,b);let d=Object.getOwnPropertyDescriptor(b,"shape");if(!d?.get){let a=b.shape;Object.defineProperty(b,"shape",{get:()=>{let c={...a};return Object.defineProperty(b,"shape",{value:c}),c}})}let e=bC(()=>eS(b));bH(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=b.catchall;a._zod.parse=(b,d)=>{c??(c=e.value);let g=b.value;if(!bS(g))return b.issues.push({expected:"object",code:"invalid_type",input:g,inst:a}),b;b.value={};let h=[],i=c.shape;for(let a of c.keys){let c=i[a]._zod.run({value:g[a],issues:[]},d);c instanceof Promise?h.push(c.then(c=>eR(c,b,a,g))):eR(c,b,a,g)}return f?eT(h,g,b,d,e.value,a):h.length?Promise.all(h).then(()=>b):b}}),eV=bo("$ZodObjectJIT",(a,b)=>{let c,d;eU.init(a,b);let e=a._zod.parse,f=bC(()=>eS(b)),g=!bs.jitless,h=g&&bT.value,i=b.catchall;a._zod.parse=(j,k)=>{d??(d=f.value);let l=j.value;return bS(l)?g&&h&&k?.async===!1&&!0!==k.jitless?(c||(c=(a=>{let b=new d5(["shape","payload","ctx"]),c=f.value,d=a=>{let b=bP(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let e=Object.create(null),g=0;for(let a of c.keys)e[a]=`key_${g++}`;for(let a of(b.write("const newResult = {};"),c.keys)){let c=e[a],f=bP(a);b.write(`const ${c} = ${d(a)};`),b.write(`
        if (${c}.issues.length) {
          payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${f}, ...iss.path] : [${f}]
          })));
        }
        
        
        if (${c}.value === undefined) {
          if (${f} in input) {
            newResult[${f}] = undefined;
          }
        } else {
          newResult[${f}] = ${c}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),j=c(j,k),i)?eT([],l,j,k,d,a):j:e(j,k):(j.issues.push({expected:"object",code:"invalid_type",input:l,inst:a}),j)}});function eW(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;let e=a.filter(a=>!cc(a));return 1===e.length?(b.value=e[0].value,e[0]):(b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>cf(a,d,bt())))}),b)}let eX=bo("$ZodUnion",(a,b)=>{d7.init(a,b),bH(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),bH(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),bH(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),bH(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>bE(a.source)).join("|")})$`)}});let c=1===b.options.length,d=b.options[0]._zod.run;a._zod.parse=(e,f)=>{if(c)return d(e,f);let g=!1,h=[];for(let a of b.options){let b=a._zod.run({value:e.value,issues:[]},f);if(b instanceof Promise)h.push(b),g=!0;else{if(0===b.issues.length)return b;h.push(b)}}return g?Promise.all(h).then(b=>eW(b,e,a,f)):eW(h,e,a,f)}}),eY=bo("$ZodDiscriminatedUnion",(a,b)=>{eX.init(a,b);let c=a._zod.parse;bH(a._zod,"propValues",()=>{let a={};for(let c of b.options){let d=c._zod.propValues;if(!d||0===Object.keys(d).length)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(c)}"`);for(let[b,c]of Object.entries(d))for(let d of(a[b]||(a[b]=new Set),c))a[b].add(d)}return a});let d=bC(()=>{let a=b.options,c=new Map;for(let d of a){let a=d._zod.propValues?.[b.discriminator];if(!a||0===a.size)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(d)}"`);for(let b of a){if(c.has(b))throw Error(`Duplicate discriminator value "${String(b)}"`);c.set(b,d)}}return c});a._zod.parse=(e,f)=>{let g=e.value;if(!bS(g))return e.issues.push({code:"invalid_type",expected:"object",input:g,inst:a}),e;let h=d.value.get(g?.[b.discriminator]);return h?h._zod.run(e,f):b.unionFallback?c(e,f):(e.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:b.discriminator,input:g,path:[b.discriminator],inst:a}),e)}}),eZ=bo("$ZodIntersection",(a,b)=>{d7.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>e$(a,b,c)):e$(a,e,f)}});function e$(a,b,c){if(b.issues.length&&a.issues.push(...b.issues),c.issues.length&&a.issues.push(...c.issues),cc(a))return a;let d=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(bU(b)&&bU(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!d.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(d.mergeErrorPath)}`);return a.value=d.data,a}let e_=bo("$ZodTuple",(a,b)=>{d7.init(a,b);let c=b.items;a._zod.parse=(d,e)=>{let f=d.value;if(!Array.isArray(f))return d.issues.push({input:f,inst:a,expected:"tuple",code:"invalid_type"}),d;d.value=[];let g=[],h=[...c].reverse().findIndex(a=>"optional"!==a._zod.optin),i=-1===h?0:c.length-h;if(!b.rest){let b=f.length>c.length,e=f.length<i-1;if(b||e)return d.issues.push({...b?{code:"too_big",maximum:c.length}:{code:"too_small",minimum:c.length},input:f,inst:a,origin:"array"}),d}let j=-1;for(let a of c){if(++j>=f.length&&j>=i)continue;let b=a._zod.run({value:f[j],issues:[]},e);b instanceof Promise?g.push(b.then(a=>e0(a,d,j))):e0(b,d,j)}if(b.rest)for(let a of f.slice(c.length)){j++;let c=b.rest._zod.run({value:a,issues:[]},e);c instanceof Promise?g.push(c.then(a=>e0(a,d,j))):e0(c,d,j)}return g.length?Promise.all(g).then(()=>d):d}});function e0(a,b,c){a.issues.length&&b.issues.push(...cd(c,a.issues)),b.value[c]=a.value}let e1=bo("$ZodRecord",(a,b)=>{d7.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!bU(e))return c.issues.push({expected:"record",code:"invalid_type",input:e,inst:a}),c;let f=[],g=b.keyType._zod.values;if(g){let h;c.value={};let i=new Set;for(let a of g)if("string"==typeof a||"number"==typeof a||"symbol"==typeof a){i.add("number"==typeof a?a.toString():a);let g=b.valueType._zod.run({value:e[a],issues:[]},d);g instanceof Promise?f.push(g.then(b=>{b.issues.length&&c.issues.push(...cd(a,b.issues)),c.value[a]=b.value})):(g.issues.length&&c.issues.push(...cd(a,g.issues)),c.value[a]=g.value)}for(let a in e)i.has(a)||(h=h??[]).push(a);h&&h.length>0&&c.issues.push({code:"unrecognized_keys",input:e,inst:a,keys:h})}else for(let g of(c.value={},Reflect.ownKeys(e))){if("__proto__"===g)continue;let h=b.keyType._zod.run({value:g,issues:[]},d);if(h instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(h.issues.length){c.issues.push({code:"invalid_key",origin:"record",issues:h.issues.map(a=>cf(a,d,bt())),input:g,path:[g],inst:a}),c.value[h.value]=h.value;continue}let i=b.valueType._zod.run({value:e[g],issues:[]},d);i instanceof Promise?f.push(i.then(a=>{a.issues.length&&c.issues.push(...cd(g,a.issues)),c.value[h.value]=a.value})):(i.issues.length&&c.issues.push(...cd(g,i.issues)),c.value[h.value]=i.value)}return f.length?Promise.all(f).then(()=>c):c}}),e2=bo("$ZodMap",(a,b)=>{d7.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!(e instanceof Map))return c.issues.push({expected:"map",code:"invalid_type",input:e,inst:a}),c;let f=[];for(let[g,h]of(c.value=new Map,e)){let i=b.keyType._zod.run({value:g,issues:[]},d),j=b.valueType._zod.run({value:h,issues:[]},d);i instanceof Promise||j instanceof Promise?f.push(Promise.all([i,j]).then(([b,f])=>{e3(b,f,c,g,e,a,d)})):e3(i,j,c,g,e,a,d)}return f.length?Promise.all(f).then(()=>c):c}});function e3(a,b,c,d,e,f,g){a.issues.length&&(bX.has(typeof d)?c.issues.push(...cd(d,a.issues)):c.issues.push({code:"invalid_key",origin:"map",input:e,inst:f,issues:a.issues.map(a=>cf(a,g,bt()))})),b.issues.length&&(bX.has(typeof d)?c.issues.push(...cd(d,b.issues)):c.issues.push({origin:"map",code:"invalid_element",input:e,inst:f,key:d,issues:b.issues.map(a=>cf(a,g,bt()))})),c.value.set(a.value,b.value)}let e4=bo("$ZodSet",(a,b)=>{d7.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!(e instanceof Set))return c.issues.push({input:e,inst:a,expected:"set",code:"invalid_type"}),c;let f=[];for(let a of(c.value=new Set,e)){let e=b.valueType._zod.run({value:a,issues:[]},d);e instanceof Promise?f.push(e.then(a=>e5(a,c))):e5(e,c)}return f.length?Promise.all(f).then(()=>c):c}});function e5(a,b){a.issues.length&&b.issues.push(...a.issues),b.value.add(a.value)}let e6=bo("$ZodEnum",(a,b)=>{d7.init(a,b);let c=bz(b.entries),d=new Set(c);a._zod.values=d,a._zod.pattern=RegExp(`^(${c.filter(a=>bX.has(typeof a)).map(a=>"string"==typeof a?bZ(a):a.toString()).join("|")})$`),a._zod.parse=(b,e)=>{let f=b.value;return d.has(f)||b.issues.push({code:"invalid_value",values:c,input:f,inst:a}),b}}),e7=bo("$ZodLiteral",(a,b)=>{if(d7.init(a,b),0===b.values.length)throw Error("Cannot create literal schema with no valid values");let c=new Set(b.values);a._zod.values=c,a._zod.pattern=RegExp(`^(${b.values.map(a=>"string"==typeof a?bZ(a):a?bZ(a.toString()):String(a)).join("|")})$`),a._zod.parse=(d,e)=>{let f=d.value;return c.has(f)||d.issues.push({code:"invalid_value",values:b.values,input:f,inst:a}),d}}),e8=bo("$ZodFile",(a,b)=>{d7.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return d instanceof File||b.issues.push({expected:"file",code:"invalid_type",input:d,inst:a}),b}}),e9=bo("$ZodTransform",(a,b)=>{d7.init(a,b),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new br(a.constructor.name);let e=b.transform(c.value,c);if(d.async)return(e instanceof Promise?e:Promise.resolve(e)).then(a=>(c.value=a,c));if(e instanceof Promise)throw new bq;return c.value=e,c}});function fa(a,b){return a.issues.length&&void 0===b?{issues:[],value:void 0}:a}let fb=bo("$ZodOptional",(a,b)=>{d7.init(a,b),a._zod.optin="optional",a._zod.optout="optional",bH(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),bH(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${bE(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>{if("optional"===b.innerType._zod.optin){let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>fa(b,a.value)):fa(d,a.value)}return void 0===a.value?a:b.innerType._zod.run(a,c)}}),fc=bo("$ZodNullable",(a,b)=>{d7.init(a,b),bH(a._zod,"optin",()=>b.innerType._zod.optin),bH(a._zod,"optout",()=>b.innerType._zod.optout),bH(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${bE(a.source)}|null)$`):void 0}),bH(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),fd=bo("$ZodDefault",(a,b)=>{d7.init(a,b),a._zod.optin="optional",bH(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>fe(a,b)):fe(d,b)}});function fe(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}let ff=bo("$ZodPrefault",(a,b)=>{d7.init(a,b),a._zod.optin="optional",bH(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>("backward"===c.direction||void 0===a.value&&(a.value=b.defaultValue),b.innerType._zod.run(a,c))}),fg=bo("$ZodNonOptional",(a,b)=>{d7.init(a,b),bH(a._zod,"values",()=>{let a=b.innerType._zod.values;return a?new Set([...a].filter(a=>void 0!==a)):void 0}),a._zod.parse=(c,d)=>{let e=b.innerType._zod.run(c,d);return e instanceof Promise?e.then(b=>fh(b,a)):fh(e,a)}});function fh(a,b){return a.issues.length||void 0!==a.value||a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:b}),a}let fi=bo("$ZodSuccess",(a,b)=>{d7.init(a,b),a._zod.parse=(a,c)=>{if("backward"===c.direction)throw new br("ZodSuccess");let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>(a.value=0===b.issues.length,a)):(a.value=0===d.issues.length,a)}}),fj=bo("$ZodCatch",(a,b)=>{d7.init(a,b),bH(a._zod,"optin",()=>b.innerType._zod.optin),bH(a._zod,"optout",()=>b.innerType._zod.optout),bH(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(d=>(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>cf(a,c,bt()))},input:a.value}),a.issues=[]),a)):(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>cf(a,c,bt()))},input:a.value}),a.issues=[]),a)}}),fk=bo("$ZodNaN",(a,b)=>{d7.init(a,b),a._zod.parse=(b,c)=>("number"==typeof b.value&&Number.isNaN(b.value)||b.issues.push({input:b.value,inst:a,expected:"nan",code:"invalid_type"}),b)}),fl=bo("$ZodPipe",(a,b)=>{d7.init(a,b),bH(a._zod,"values",()=>b.in._zod.values),bH(a._zod,"optin",()=>b.in._zod.optin),bH(a._zod,"optout",()=>b.out._zod.optout),bH(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("backward"===c.direction){let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>fm(a,b.in,c)):fm(d,b.in,c)}let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>fm(a,b.out,c)):fm(d,b.out,c)}});function fm(a,b,c){return a.issues.length?(a.aborted=!0,a):b._zod.run({value:a.value,issues:a.issues},c)}let fn=bo("$ZodCodec",(a,b)=>{d7.init(a,b),bH(a._zod,"values",()=>b.in._zod.values),bH(a._zod,"optin",()=>b.in._zod.optin),bH(a._zod,"optout",()=>b.out._zod.optout),bH(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("forward"===(c.direction||"forward")){let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>fo(a,b,c)):fo(d,b,c)}{let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>fo(a,b,c)):fo(d,b,c)}}});function fo(a,b,c){if(a.issues.length)return a.aborted=!0,a;if("forward"===(c.direction||"forward")){let d=b.transform(a.value,a);return d instanceof Promise?d.then(d=>fp(a,d,b.out,c)):fp(a,d,b.out,c)}{let d=b.reverseTransform(a.value,a);return d instanceof Promise?d.then(d=>fp(a,d,b.in,c)):fp(a,d,b.in,c)}}function fp(a,b,c,d){return a.issues.length?(a.aborted=!0,a):c._zod.run({value:b,issues:a.issues},d)}let fq=bo("$ZodReadonly",(a,b)=>{d7.init(a,b),bH(a._zod,"propValues",()=>b.innerType._zod.propValues),bH(a._zod,"values",()=>b.innerType._zod.values),bH(a._zod,"optin",()=>b.innerType?._zod?.optin),bH(a._zod,"optout",()=>b.innerType?._zod?.optout),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(fr):fr(d)}});function fr(a){return a.value=Object.freeze(a.value),a}let fs=bo("$ZodTemplateLiteral",(a,b)=>{d7.init(a,b);let c=[];for(let a of b.parts)if("object"==typeof a&&null!==a){if(!a._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...a._zod.traits].shift()}`);let b=a._zod.pattern instanceof RegExp?a._zod.pattern.source:a._zod.pattern;if(!b)throw Error(`Invalid template literal part: ${a._zod.traits}`);let d=+!!b.startsWith("^"),e=b.endsWith("$")?b.length-1:b.length;c.push(b.slice(d,e))}else if(null===a||bY.has(typeof a))c.push(bZ(`${a}`));else throw Error(`Invalid template literal part: ${a}`);a._zod.pattern=RegExp(`^${c.join("")}$`),a._zod.parse=(c,d)=>("string"!=typeof c.value?c.issues.push({input:c.value,inst:a,expected:"template_literal",code:"invalid_type"}):(a._zod.pattern.lastIndex=0,a._zod.pattern.test(c.value)||c.issues.push({input:c.value,inst:a,code:"invalid_format",format:b.format??"template_literal",pattern:a._zod.pattern.source})),c)}),ft=bo("$ZodFunction",(a,b)=>(d7.init(a,b),a._def=b,a._zod.def=b,a.implement=b=>{if("function"!=typeof b)throw Error("implement() must be called with a function");return function(...c){let d=Reflect.apply(b,this,a._def.input?cA(a._def.input,c):c);return a._def.output?cA(a._def.output,d):d}},a.implementAsync=b=>{if("function"!=typeof b)throw Error("implementAsync() must be called with a function");return async function(...c){let d=a._def.input?await cC(a._def.input,c):c,e=await Reflect.apply(b,this,d);return a._def.output?await cC(a._def.output,e):e}},a._zod.parse=(b,c)=>("function"!=typeof b.value?b.issues.push({code:"invalid_type",expected:"function",input:b.value,inst:a}):a._def.output&&"promise"===a._def.output._zod.def.type?b.value=a.implementAsync(b.value):b.value=a.implement(b.value),b),a.input=(...b)=>{let c=a.constructor;return new c(Array.isArray(b[0])?{type:"function",input:new e_({type:"tuple",items:b[0],rest:b[1]}),output:a._def.output}:{type:"function",input:b[0],output:a._def.output})},a.output=b=>new a.constructor({type:"function",input:a._def.input,output:b}),a)),fu=bo("$ZodPromise",(a,b)=>{d7.init(a,b),a._zod.parse=(a,c)=>Promise.resolve(a.value).then(a=>b.innerType._zod.run({value:a,issues:[]},c))}),fv=bo("$ZodLazy",(a,b)=>{d7.init(a,b),bH(a._zod,"innerType",()=>b.getter()),bH(a._zod,"pattern",()=>a._zod.innerType?._zod?.pattern),bH(a._zod,"propValues",()=>a._zod.innerType?._zod?.propValues),bH(a._zod,"optin",()=>a._zod.innerType?._zod?.optin??void 0),bH(a._zod,"optout",()=>a._zod.innerType?._zod?.optout??void 0),a._zod.parse=(b,c)=>a._zod.innerType._zod.run(b,c)}),fw=bo("$ZodCustom",(a,b)=>{dJ.init(a,b),d7.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>fx(b,c,d,a));fx(e,c,d,a)}});function fx(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(ci(a))}}function fy(a,b,c,d){let e=Math.abs(a),f=e%10,g=e%100;return g>=11&&g<=19?d:1===f?b:f>=2&&f<=4?c:d}function fz(){let a,b;return{localeError:(a={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}},b={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},c=>{switch(c.code){case"invalid_type":return`Invalid input: expected ${c.expected}, received ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Invalid input: expected ${b1(c.values[0])}`;return`Invalid option: expected one of ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Too big: expected ${c.origin??"value"} to have ${b}${c.maximum.toString()} ${d.unit??"elements"}`;return`Too big: expected ${c.origin??"value"} to be ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Too small: expected ${c.origin} to have ${b}${c.minimum.toString()} ${d.unit}`;return`Too small: expected ${c.origin} to be ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Invalid string: must start with "${c.prefix}"`;if("ends_with"===c.format)return`Invalid string: must end with "${c.suffix}"`;if("includes"===c.format)return`Invalid string: must include "${c.includes}"`;if("regex"===c.format)return`Invalid string: must match pattern ${c.pattern}`;return`Invalid ${b[c.format]??c.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${c.divisor}`;case"unrecognized_keys":return`Unrecognized key${c.keys.length>1?"s":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`Invalid key in ${c.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${c.origin}`}})}}function fA(){let a,b;return{localeError:(a={string:{unit:"ážáž½áž¢áž€áŸ’ážŸážš",verb:"áž‚áž½ážšáž˜áž¶áž“"},file:{unit:"áž”áŸƒ",verb:"áž‚áž½ážšáž˜áž¶áž“"},array:{unit:"áž’áž¶ážáž»",verb:"áž‚áž½ážšáž˜áž¶áž“"},set:{unit:"áž’áž¶ážáž»",verb:"áž‚áž½ážšáž˜áž¶áž“"}},b={regex:"áž‘áž·áž“áŸ’áž“áž“áŸáž™áž”áž‰áŸ’áž…áž¼áž›",email:"áž¢áž¶ážŸáž™ážŠáŸ’áž‹áž¶áž“áž¢áŸŠáž¸áž˜áŸ‚áž›",url:"URL",emoji:"ážŸáž‰áŸ’áž‰áž¶áž¢áž¶ážšáž˜áŸ’áž˜ážŽáŸ",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"áž€áž¶áž›áž”ážšáž·áž…áŸ’áž†áŸáž‘ áž“áž·áž„áž˜áŸ‰áŸ„áž„ ISO",date:"áž€áž¶áž›áž”ážšáž·áž…áŸ’áž†áŸáž‘ ISO",time:"áž˜áŸ‰áŸ„áž„ ISO",duration:"ážšáž™áŸˆáž–áŸáž› ISO",ipv4:"áž¢áž¶ážŸáž™ážŠáŸ’áž‹áž¶áž“ IPv4",ipv6:"áž¢áž¶ážŸáž™ážŠáŸ’áž‹áž¶áž“ IPv6",cidrv4:"ážŠáŸ‚áž“áž¢áž¶ážŸáž™ážŠáŸ’áž‹áž¶áž“ IPv4",cidrv6:"ážŠáŸ‚áž“áž¢áž¶ážŸáž™ážŠáŸ’áž‹áž¶áž“ IPv6",base64:"ážáŸ’ážŸáŸ‚áž¢áž€áŸ’ážŸážšáž¢áŸŠáž·áž€áž¼ážŠ base64",base64url:"ážáŸ’ážŸáŸ‚áž¢áž€áŸ’ážŸážšáž¢áŸŠáž·áž€áž¼ážŠ base64url",json_string:"ážáŸ’ážŸáŸ‚áž¢áž€áŸ’ážŸážš JSON",e164:"áž›áŸáž E.164",jwt:"JWT",template_literal:"áž‘áž·áž“áŸ’áž“áž“áŸáž™áž”áž‰áŸ’áž…áž¼áž›"},c=>{switch(c.code){case"invalid_type":return`áž‘áž·áž“áŸ’áž“áž“áŸáž™áž”áž‰áŸ’áž…áž¼áž›áž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœáž€áž¶ážš ${c.expected} áž”áŸ‰áž»áž“áŸ’ážáŸ‚áž‘áž‘áž½áž›áž”áž¶áž“ ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"áž˜áž·áž“áž˜áŸ‚áž“áž‡áž¶áž›áŸáž (NaN)":"áž›áŸáž";case"object":if(Array.isArray(a))return"áž¢áž¶ážšáŸ (Array)";if(null===a)return"áž‚áŸ’áž˜áž¶áž“ážáž˜áŸ’áž›áŸƒ (null)";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`áž‘áž·áž“áŸ’áž“áž“áŸáž™áž”áž‰áŸ’áž…áž¼áž›áž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœáž€áž¶ážš ${b1(c.values[0])}`;return`áž‡áž˜áŸ’ážšáž¾ážŸáž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœáž‡áž¶áž˜áž½áž™áž€áŸ’áž“áž»áž„áž…áŸ†ážŽáŸ„áž˜ ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`áž’áŸ†áž–áŸáž€áŸ– ážáŸ’ážšáž¼ážœáž€áž¶ážš ${c.origin??"ážáž˜áŸ’áž›áŸƒ"} ${b} ${c.maximum.toString()} ${d.unit??"áž’áž¶ážáž»"}`;return`áž’áŸ†áž–áŸáž€áŸ– ážáŸ’ážšáž¼ážœáž€áž¶ážš ${c.origin??"ážáž˜áŸ’áž›áŸƒ"} ${b} ${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`ážáž¼áž…áž–áŸáž€áŸ– ážáŸ’ážšáž¼ážœáž€áž¶ážš ${c.origin} ${b} ${c.minimum.toString()} ${d.unit}`;return`ážáž¼áž…áž–áŸáž€áŸ– ážáŸ’ážšáž¼ážœáž€áž¶ážš ${c.origin} ${b} ${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`ážáŸ’ážŸáŸ‚áž¢áž€áŸ’ážŸážšáž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœáž…áž¶áž”áŸ‹áž•áŸ’ážáž¾áž˜ážŠáŸ„áž™ "${c.prefix}"`;if("ends_with"===c.format)return`ážáŸ’ážŸáŸ‚áž¢áž€áŸ’ážŸážšáž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœáž”áž‰áŸ’áž…áž”áŸ‹ážŠáŸ„áž™ "${c.suffix}"`;if("includes"===c.format)return`ážáŸ’ážŸáŸ‚áž¢áž€áŸ’ážŸážšáž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœáž˜áž¶áž“ "${c.includes}"`;if("regex"===c.format)return`ážáŸ’ážŸáŸ‚áž¢áž€áŸ’ážŸážšáž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœážáŸ‚áž•áŸ’áž‚áž¼áž•áŸ’áž‚áž„áž“áž¹áž„áž‘áž˜áŸ’ážšáž„áŸ‹ážŠáŸ‚áž›áž”áž¶áž“áž€áŸ†ážŽážáŸ‹ ${c.pattern}`;return`áž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ${b[c.format]??c.format}`;case"not_multiple_of":return`áž›áŸážáž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáŸ– ážáŸ’ážšáž¼ážœážáŸ‚áž‡áž¶áž–áž áž»áž‚áž»ážŽáž“áŸƒ ${c.divisor}`;case"unrecognized_keys":return`ážšáž€ážƒáž¾áž‰ážŸáŸ„áž˜áž·áž“ážŸáŸ’áž‚áž¶áž›áŸ‹áŸ– ${bA(c.keys,", ")}`;case"invalid_key":return`ážŸáŸ„áž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáž“áŸ…áž€áŸ’áž“áž»áž„ ${c.origin}`;case"invalid_union":default:return`áž‘áž·áž“áŸ’áž“áž“áŸáž™áž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœ`;case"invalid_element":return`áž‘áž·áž“áŸ’áž“áž“áŸáž™áž˜áž·áž“ážáŸ’ážšáž¹áž˜ážáŸ’ážšáž¼ážœáž“áŸ…áž€áŸ’áž“áž»áž„ ${c.origin}`}})}}a.s(["$ZodAny",0,eK,"$ZodArray",0,eQ,"$ZodBase64",0,ev,"$ZodBase64URL",0,ex,"$ZodBigInt",0,eF,"$ZodBigIntFormat",0,eG,"$ZodBoolean",0,eE,"$ZodCIDRv4",0,es,"$ZodCIDRv6",0,et,"$ZodCUID",0,eg,"$ZodCUID2",0,eh,"$ZodCatch",0,fj,"$ZodCodec",0,fn,"$ZodCustom",0,fw,"$ZodCustomStringFormat",0,eB,"$ZodDate",0,eO,"$ZodDefault",0,fd,"$ZodDiscriminatedUnion",0,eY,"$ZodE164",0,ey,"$ZodEmail",0,ec,"$ZodEmoji",0,ee,"$ZodEnum",0,e6,"$ZodFile",0,e8,"$ZodFunction",0,ft,"$ZodGUID",0,ea,"$ZodIPv4",0,ep,"$ZodIPv6",0,eq,"$ZodISODate",0,em,"$ZodISODateTime",0,el,"$ZodISODuration",0,eo,"$ZodISOTime",0,en,"$ZodIntersection",0,eZ,"$ZodJWT",0,eA,"$ZodKSUID",0,ek,"$ZodLazy",0,fv,"$ZodLiteral",0,e7,"$ZodMAC",0,er,"$ZodMap",0,e2,"$ZodNaN",0,fk,"$ZodNanoID",0,ef,"$ZodNever",0,eM,"$ZodNonOptional",0,fg,"$ZodNull",0,eJ,"$ZodNullable",0,fc,"$ZodNumber",0,eC,"$ZodNumberFormat",0,eD,"$ZodObject",0,eU,"$ZodObjectJIT",0,eV,"$ZodOptional",0,fb,"$ZodPipe",0,fl,"$ZodPrefault",0,ff,"$ZodPromise",0,fu,"$ZodReadonly",0,fq,"$ZodRecord",0,e1,"$ZodSet",0,e4,"$ZodString",0,d8,"$ZodStringFormat",0,d9,"$ZodSuccess",0,fi,"$ZodSymbol",0,eH,"$ZodTemplateLiteral",0,fs,"$ZodTransform",0,e9,"$ZodTuple",0,e_,"$ZodType",0,d7,"$ZodULID",0,ei,"$ZodURL",0,ed,"$ZodUUID",0,eb,"$ZodUndefined",0,eI,"$ZodUnion",0,eX,"$ZodUnknown",0,eL,"$ZodVoid",0,eN,"$ZodXID",0,ej,"isValidBase64",()=>eu,"isValidBase64URL",()=>ew,"isValidJWT",()=>ez],26766);let fB=(a,b)=>{switch(a){case"number":return Number.isNaN(b)?"NaN":"skaiÄius";case"bigint":return"sveikasis skaiÄius";case"string":return"eilutÄ—";case"boolean":return"loginÄ— reikÅ¡mÄ—";case"undefined":case"void":return"neapibrÄ—Å¾ta reikÅ¡mÄ—";case"function":return"funkcija";case"symbol":return"simbolis";case"object":if(void 0===b)return"neÅ¾inomas objektas";if(null===b)return"nulinÄ— reikÅ¡mÄ—";if(Array.isArray(b))return"masyvas";if(Object.getPrototypeOf(b)!==Object.prototype&&b.constructor)return b.constructor.name;return"objektas";case"null":return"nulinÄ— reikÅ¡mÄ—"}return a},fC=a=>a.charAt(0).toUpperCase()+a.slice(1);function fD(a){let b=Math.abs(a),c=b%10,d=b%100;return d>=11&&d<=19||0===c?"many":1===c?"one":"few"}function fE(a,b,c,d){let e=Math.abs(a),f=e%10,g=e%100;return g>=11&&g<=19?d:1===f?b:f>=2&&f<=4?c:d}function fF(){let a,b;return{localeError:(a={string:{unit:"ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ–Ð²",verb:"Ð¼Ð°Ñ‚Ð¸Ð¼Ðµ"},file:{unit:"Ð±Ð°Ð¹Ñ‚Ñ–Ð²",verb:"Ð¼Ð°Ñ‚Ð¸Ð¼Ðµ"},array:{unit:"ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ–Ð²",verb:"Ð¼Ð°Ñ‚Ð¸Ð¼Ðµ"},set:{unit:"ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ–Ð²",verb:"Ð¼Ð°Ñ‚Ð¸Ð¼Ðµ"}},b={regex:"Ð²Ñ…Ñ–Ð´Ð½Ñ– Ð´Ð°Ð½Ñ–",email:"Ð°Ð´Ñ€ÐµÑÐ° ÐµÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ñ— Ð¿Ð¾ÑˆÑ‚Ð¸",url:"URL",emoji:"ÐµÐ¼Ð¾Ð´Ð·Ñ–",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"Ð´Ð°Ñ‚Ð° Ñ‚Ð° Ñ‡Ð°Ñ ISO",date:"Ð´Ð°Ñ‚Ð° ISO",time:"Ñ‡Ð°Ñ ISO",duration:"Ñ‚Ñ€Ð¸Ð²Ð°Ð»Ñ–ÑÑ‚ÑŒ ISO",ipv4:"Ð°Ð´Ñ€ÐµÑÐ° IPv4",ipv6:"Ð°Ð´Ñ€ÐµÑÐ° IPv6",cidrv4:"Ð´Ñ–Ð°Ð¿Ð°Ð·Ð¾Ð½ IPv4",cidrv6:"Ð´Ñ–Ð°Ð¿Ð°Ð·Ð¾Ð½ IPv6",base64:"Ñ€ÑÐ´Ð¾Ðº Ñƒ ÐºÐ¾Ð´ÑƒÐ²Ð°Ð½Ð½Ñ– base64",base64url:"Ñ€ÑÐ´Ð¾Ðº Ñƒ ÐºÐ¾Ð´ÑƒÐ²Ð°Ð½Ð½Ñ– base64url",json_string:"Ñ€ÑÐ´Ð¾Ðº JSON",e164:"Ð½Ð¾Ð¼ÐµÑ€ E.164",jwt:"JWT",template_literal:"Ð²Ñ…Ñ–Ð´Ð½Ñ– Ð´Ð°Ð½Ñ–"},c=>{switch(c.code){case"invalid_type":return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ– Ð²Ñ…Ñ–Ð´Ð½Ñ– Ð´Ð°Ð½Ñ–: Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚ÑŒÑÑ ${c.expected}, Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ð½Ð¾ ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"Ñ‡Ð¸ÑÐ»Ð¾";case"object":if(Array.isArray(a))return"Ð¼Ð°ÑÐ¸Ð²";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ– Ð²Ñ…Ñ–Ð´Ð½Ñ– Ð´Ð°Ð½Ñ–: Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚ÑŒÑÑ ${b1(c.values[0])}`;return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð° Ð¾Ð¿Ñ†Ñ–Ñ: Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚ÑŒÑÑ Ð¾Ð´Ð½Ðµ Ð· ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð¾ Ð²ÐµÐ»Ð¸ÐºÐµ: Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚ÑŒÑÑ, Ñ‰Ð¾ ${c.origin??"Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ñ"} ${d.verb} ${b}${c.maximum.toString()} ${d.unit??"ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ–Ð²"}`;return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð¾ Ð²ÐµÐ»Ð¸ÐºÐµ: Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚ÑŒÑÑ, Ñ‰Ð¾ ${c.origin??"Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ñ"} Ð±ÑƒÐ´Ðµ ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð¾ Ð¼Ð°Ð»Ðµ: Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚ÑŒÑÑ, Ñ‰Ð¾ ${c.origin} ${d.verb} ${b}${c.minimum.toString()} ${d.unit}`;return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð¾ Ð¼Ð°Ð»Ðµ: Ð¾Ñ‡Ñ–ÐºÑƒÑ”Ñ‚ÑŒÑÑ, Ñ‰Ð¾ ${c.origin} Ð±ÑƒÐ´Ðµ ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¸Ð¹ Ñ€ÑÐ´Ð¾Ðº: Ð¿Ð¾Ð²Ð¸Ð½ÐµÐ½ Ð¿Ð¾Ñ‡Ð¸Ð½Ð°Ñ‚Ð¸ÑÑ Ð· "${c.prefix}"`;if("ends_with"===c.format)return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¸Ð¹ Ñ€ÑÐ´Ð¾Ðº: Ð¿Ð¾Ð²Ð¸Ð½ÐµÐ½ Ð·Ð°ÐºÑ–Ð½Ñ‡ÑƒÐ²Ð°Ñ‚Ð¸ÑÑ Ð½Ð° "${c.suffix}"`;if("includes"===c.format)return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¸Ð¹ Ñ€ÑÐ´Ð¾Ðº: Ð¿Ð¾Ð²Ð¸Ð½ÐµÐ½ Ð¼Ñ–ÑÑ‚Ð¸Ñ‚Ð¸ "${c.includes}"`;if("regex"===c.format)return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¸Ð¹ Ñ€ÑÐ´Ð¾Ðº: Ð¿Ð¾Ð²Ð¸Ð½ÐµÐ½ Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ð°Ñ‚Ð¸ ÑˆÐ°Ð±Ð»Ð¾Ð½Ñƒ ${c.pattern}`;return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¸Ð¹ ${b[c.format]??c.format}`;case"not_multiple_of":return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ðµ Ñ‡Ð¸ÑÐ»Ð¾: Ð¿Ð¾Ð²Ð¸Ð½Ð½Ð¾ Ð±ÑƒÑ‚Ð¸ ÐºÑ€Ð°Ñ‚Ð½Ð¸Ð¼ ${c.divisor}`;case"unrecognized_keys":return`ÐÐµÑ€Ð¾Ð·Ð¿Ñ–Ð·Ð½Ð°Ð½Ð¸Ð¹ ÐºÐ»ÑŽÑ‡${c.keys.length>1?"Ñ–":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¸Ð¹ ÐºÐ»ÑŽÑ‡ Ñƒ ${c.origin}`;case"invalid_union":return"ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ– Ð²Ñ…Ñ–Ð´Ð½Ñ– Ð´Ð°Ð½Ñ–";case"invalid_element":return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ñ Ñƒ ${c.origin}`;default:return`ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ– Ð²Ñ…Ñ–Ð´Ð½Ñ– Ð´Ð°Ð½Ñ–`}})}}a.s([],92685);let fG=Symbol("ZodOutput"),fH=Symbol("ZodInput");class fI{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...b){let c=b[0];if(this._map.set(a,c),c&&"object"==typeof c&&"id"in c){if(this._idmap.has(c.id))throw Error(`ID ${c.id} already exists in the registry`);this._idmap.set(c.id,a)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){let b=this._map.get(a);return b&&"object"==typeof b&&"id"in b&&this._idmap.delete(b.id),this._map.delete(a),this}get(a){let b=a._zod.parent;if(b){let c={...this.get(b)??{}};delete c.id;let d={...c,...this._map.get(a)};return Object.keys(d).length?d:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}function fJ(){return new fI}(b=globalThis).__zod_globalRegistry??(b.__zod_globalRegistry=fJ());let fK=globalThis.__zod_globalRegistry;function fL(a,b){return new a({type:"string",...b_(b)})}function fM(a,b){return new a({type:"string",coerce:!0,...b_(b)})}function fN(a,b){return new a({type:"string",format:"email",check:"string_format",abort:!1,...b_(b)})}function fO(a,b){return new a({type:"string",format:"guid",check:"string_format",abort:!1,...b_(b)})}function fP(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,...b_(b)})}function fQ(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...b_(b)})}function fR(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...b_(b)})}function fS(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...b_(b)})}function fT(a,b){return new a({type:"string",format:"url",check:"string_format",abort:!1,...b_(b)})}function fU(a,b){return new a({type:"string",format:"emoji",check:"string_format",abort:!1,...b_(b)})}function fV(a,b){return new a({type:"string",format:"nanoid",check:"string_format",abort:!1,...b_(b)})}function fW(a,b){return new a({type:"string",format:"cuid",check:"string_format",abort:!1,...b_(b)})}function fX(a,b){return new a({type:"string",format:"cuid2",check:"string_format",abort:!1,...b_(b)})}function fY(a,b){return new a({type:"string",format:"ulid",check:"string_format",abort:!1,...b_(b)})}function fZ(a,b){return new a({type:"string",format:"xid",check:"string_format",abort:!1,...b_(b)})}function f$(a,b){return new a({type:"string",format:"ksuid",check:"string_format",abort:!1,...b_(b)})}function f_(a,b){return new a({type:"string",format:"ipv4",check:"string_format",abort:!1,...b_(b)})}function f0(a,b){return new a({type:"string",format:"ipv6",check:"string_format",abort:!1,...b_(b)})}function f1(a,b){return new a({type:"string",format:"mac",check:"string_format",abort:!1,...b_(b)})}function f2(a,b){return new a({type:"string",format:"cidrv4",check:"string_format",abort:!1,...b_(b)})}function f3(a,b){return new a({type:"string",format:"cidrv6",check:"string_format",abort:!1,...b_(b)})}function f4(a,b){return new a({type:"string",format:"base64",check:"string_format",abort:!1,...b_(b)})}function f5(a,b){return new a({type:"string",format:"base64url",check:"string_format",abort:!1,...b_(b)})}function f6(a,b){return new a({type:"string",format:"e164",check:"string_format",abort:!1,...b_(b)})}function f7(a,b){return new a({type:"string",format:"jwt",check:"string_format",abort:!1,...b_(b)})}a.s(["$ZodRegistry",()=>fI,"$input",0,fH,"$output",0,fG,"globalRegistry",0,fK,"registry",()=>fJ],42407);let f8={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function f9(a,b){return new a({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...b_(b)})}function ga(a,b){return new a({type:"string",format:"date",check:"string_format",...b_(b)})}function gb(a,b){return new a({type:"string",format:"time",check:"string_format",precision:null,...b_(b)})}function gc(a,b){return new a({type:"string",format:"duration",check:"string_format",...b_(b)})}function gd(a,b){return new a({type:"number",checks:[],...b_(b)})}function ge(a,b){return new a({type:"number",coerce:!0,checks:[],...b_(b)})}function gf(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"safeint",...b_(b)})}function gg(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"float32",...b_(b)})}function gh(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"float64",...b_(b)})}function gi(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"int32",...b_(b)})}function gj(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"uint32",...b_(b)})}function gk(a,b){return new a({type:"boolean",...b_(b)})}function gl(a,b){return new a({type:"boolean",coerce:!0,...b_(b)})}function gm(a,b){return new a({type:"bigint",...b_(b)})}function gn(a,b){return new a({type:"bigint",coerce:!0,...b_(b)})}function go(a,b){return new a({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...b_(b)})}function gp(a,b){return new a({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...b_(b)})}function gq(a,b){return new a({type:"symbol",...b_(b)})}function gr(a,b){return new a({type:"undefined",...b_(b)})}function gs(a,b){return new a({type:"null",...b_(b)})}function gt(a){return new a({type:"any"})}function gu(a){return new a({type:"unknown"})}function gv(a,b){return new a({type:"never",...b_(b)})}function gw(a,b){return new a({type:"void",...b_(b)})}function gx(a,b){return new a({type:"date",...b_(b)})}function gy(a,b){return new a({type:"date",coerce:!0,...b_(b)})}function gz(a,b){return new a({type:"nan",...b_(b)})}function gA(a,b){return new dL({check:"less_than",...b_(b),value:a,inclusive:!1})}function gB(a,b){return new dL({check:"less_than",...b_(b),value:a,inclusive:!0})}function gC(a,b){return new dM({check:"greater_than",...b_(b),value:a,inclusive:!1})}function gD(a,b){return new dM({check:"greater_than",...b_(b),value:a,inclusive:!0})}function gE(a){return gC(0,a)}function gF(a){return gA(0,a)}function gG(a){return gB(0,a)}function gH(a){return gD(0,a)}function gI(a,b){return new dN({check:"multiple_of",...b_(b),value:a})}function gJ(a,b){return new dQ({check:"max_size",...b_(b),maximum:a})}function gK(a,b){return new dR({check:"min_size",...b_(b),minimum:a})}function gL(a,b){return new dS({check:"size_equals",...b_(b),size:a})}function gM(a,b){return new dT({check:"max_length",...b_(b),maximum:a})}function gN(a,b){return new dU({check:"min_length",...b_(b),minimum:a})}function gO(a,b){return new dV({check:"length_equals",...b_(b),length:a})}function gP(a,b){return new dX({check:"string_format",format:"regex",...b_(b),pattern:a})}function gQ(a){return new dY({check:"string_format",format:"lowercase",...b_(a)})}function gR(a){return new dZ({check:"string_format",format:"uppercase",...b_(a)})}function gS(a,b){return new d$({check:"string_format",format:"includes",...b_(b),includes:a})}function gT(a,b){return new d_({check:"string_format",format:"starts_with",...b_(b),prefix:a})}function gU(a,b){return new d0({check:"string_format",format:"ends_with",...b_(b),suffix:a})}function gV(a,b,c){return new d2({check:"property",property:a,schema:b,...b_(c)})}function gW(a,b){return new d3({check:"mime_type",mime:a,...b_(b)})}function gX(a){return new d4({check:"overwrite",tx:a})}function gY(a){return gX(b=>b.normalize(a))}function gZ(){return gX(a=>a.trim())}function g$(){return gX(a=>a.toLowerCase())}function g_(){return gX(a=>a.toUpperCase())}function g0(){return gX(a=>bQ(a))}function g1(a,b,c){return new a({type:"array",element:b,...b_(c)})}function g2(a,b,c){return new a({type:"union",options:b,...b_(c)})}function g3(a,b,c,d){return new a({type:"union",options:c,discriminator:b,...b_(d)})}function g4(a,b,c){return new a({type:"intersection",left:b,right:c})}function g5(a,b,c,d){let e=c instanceof d7,f=e?d:c;return new a({type:"tuple",items:b,rest:e?c:null,...b_(f)})}function g6(a,b,c,d){return new a({type:"record",keyType:b,valueType:c,...b_(d)})}function g7(a,b,c,d){return new a({type:"map",keyType:b,valueType:c,...b_(d)})}function g8(a,b,c){return new a({type:"set",valueType:b,...b_(c)})}function g9(a,b,c){return new a({type:"enum",entries:Array.isArray(b)?Object.fromEntries(b.map(a=>[a,a])):b,...b_(c)})}function ha(a,b,c){return new a({type:"enum",entries:b,...b_(c)})}function hb(a,b,c){return new a({type:"literal",values:Array.isArray(b)?b:[b],...b_(c)})}function hc(a,b){return new a({type:"file",...b_(b)})}function hd(a,b){return new a({type:"transform",transform:b})}function he(a,b){return new a({type:"optional",innerType:b})}function hf(a,b){return new a({type:"nullable",innerType:b})}function hg(a,b,c){return new a({type:"default",innerType:b,get defaultValue(){return"function"==typeof c?c():bV(c)}})}function hh(a,b,c){return new a({type:"nonoptional",innerType:b,...b_(c)})}function hi(a,b){return new a({type:"success",innerType:b})}function hj(a,b,c){return new a({type:"catch",innerType:b,catchValue:"function"==typeof c?c:()=>c})}function hk(a,b,c){return new a({type:"pipe",in:b,out:c})}function hl(a,b){return new a({type:"readonly",innerType:b})}function hm(a,b,c){return new a({type:"template_literal",parts:b,...b_(c)})}function hn(a,b){return new a({type:"lazy",getter:b})}function ho(a,b){return new a({type:"promise",innerType:b})}function hp(a,b,c){let d=b_(c);return d.abort??(d.abort=!0),new a({type:"custom",check:"custom",fn:b,...d})}function hq(a,b,c){return new a({type:"custom",check:"custom",fn:b,...b_(c)})}function hr(a){let b=hs(c=>(c.addIssue=a=>{"string"==typeof a?c.issues.push(ci(a,c.value,b._zod.def)):(a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=c.value),a.inst??(a.inst=b),a.continue??(a.continue=!b._zod.def.abort),c.issues.push(ci(a)))},a(c.value,c)));return b}function hs(a,b){let c=new dJ({check:"custom",...b_(b)});return c._zod.check=a,c}function ht(a){let b=new dJ({check:"describe"});return b._zod.onattach=[b=>{let c=fK.get(b)??{};fK.add(b,{...c,description:a})}],b._zod.check=()=>{},b}function hu(a){let b=new dJ({check:"meta"});return b._zod.onattach=[b=>{let c=fK.get(b)??{};fK.add(b,{...c,...a})}],b._zod.check=()=>{},b}function hv(a,b){let c=b_(b),d=c.truthy??["true","1","yes","on","y","enabled"],e=c.falsy??["false","0","no","off","n","disabled"];"sensitive"!==c.case&&(d=d.map(a=>"string"==typeof a?a.toLowerCase():a),e=e.map(a=>"string"==typeof a?a.toLowerCase():a));let f=new Set(d),g=new Set(e),h=a.Codec??fn,i=a.Boolean??eE,j=new h({type:"pipe",in:new(a.String??d8)({type:"string",error:c.error}),out:new i({type:"boolean",error:c.error}),transform:(a,b)=>{let d=a;return"sensitive"!==c.case&&(d=d.toLowerCase()),!!f.has(d)||!g.has(d)&&(b.issues.push({code:"invalid_value",expected:"stringbool",values:[...f,...g],input:b.value,inst:j,continue:!1}),{})},reverseTransform:(a,b)=>!0===a?d[0]||"true":e[0]||"false",error:c.error});return j}function hw(a,b,c,d={}){let e=b_(d),f={...b_(d),check:"string_format",type:"string",format:b,fn:"function"==typeof c?c:a=>c.test(a),...e};return c instanceof RegExp&&(f.pattern=c),new a(f)}a.s(["TimePrecision",0,f8,"_any",()=>gt,"_array",()=>g1,"_base64",()=>f4,"_base64url",()=>f5,"_bigint",()=>gm,"_boolean",()=>gk,"_catch",()=>hj,"_check",()=>hs,"_cidrv4",()=>f2,"_cidrv6",()=>f3,"_coercedBigint",()=>gn,"_coercedBoolean",()=>gl,"_coercedDate",()=>gy,"_coercedNumber",()=>ge,"_coercedString",()=>fM,"_cuid",()=>fW,"_cuid2",()=>fX,"_custom",()=>hp,"_date",()=>gx,"_default",()=>hg,"_discriminatedUnion",()=>g3,"_e164",()=>f6,"_email",()=>fN,"_emoji",()=>fU,"_endsWith",()=>gU,"_enum",()=>g9,"_file",()=>hc,"_float32",()=>gg,"_float64",()=>gh,"_gt",()=>gC,"_gte",()=>gD,"_guid",()=>fO,"_includes",()=>gS,"_int",()=>gf,"_int32",()=>gi,"_int64",()=>go,"_intersection",()=>g4,"_ipv4",()=>f_,"_ipv6",()=>f0,"_isoDate",()=>ga,"_isoDateTime",()=>f9,"_isoDuration",()=>gc,"_isoTime",()=>gb,"_jwt",()=>f7,"_ksuid",()=>f$,"_lazy",()=>hn,"_length",()=>gO,"_literal",()=>hb,"_lowercase",()=>gQ,"_lt",()=>gA,"_lte",()=>gB,"_mac",()=>f1,"_map",()=>g7,"_max",()=>gB,"_maxLength",()=>gM,"_maxSize",()=>gJ,"_mime",()=>gW,"_min",()=>gD,"_minLength",()=>gN,"_minSize",()=>gK,"_multipleOf",()=>gI,"_nan",()=>gz,"_nanoid",()=>fV,"_nativeEnum",()=>ha,"_negative",()=>gF,"_never",()=>gv,"_nonnegative",()=>gH,"_nonoptional",()=>hh,"_nonpositive",()=>gG,"_normalize",()=>gY,"_null",()=>gs,"_nullable",()=>hf,"_number",()=>gd,"_optional",()=>he,"_overwrite",()=>gX,"_pipe",()=>hk,"_positive",()=>gE,"_promise",()=>ho,"_property",()=>gV,"_readonly",()=>hl,"_record",()=>g6,"_refine",()=>hq,"_regex",()=>gP,"_set",()=>g8,"_size",()=>gL,"_slugify",()=>g0,"_startsWith",()=>gT,"_string",()=>fL,"_stringFormat",()=>hw,"_stringbool",()=>hv,"_success",()=>hi,"_superRefine",()=>hr,"_symbol",()=>gq,"_templateLiteral",()=>hm,"_toLowerCase",()=>g$,"_toUpperCase",()=>g_,"_transform",()=>hd,"_trim",()=>gZ,"_tuple",()=>g5,"_uint32",()=>gj,"_uint64",()=>gp,"_ulid",()=>fY,"_undefined",()=>gr,"_union",()=>g2,"_unknown",()=>gu,"_uppercase",()=>gR,"_url",()=>fT,"_uuid",()=>fP,"_uuidv4",()=>fQ,"_uuidv6",()=>fR,"_uuidv7",()=>fS,"_void",()=>gw,"_xid",()=>fZ,"describe",()=>ht,"meta",()=>hu],82387);class hx{constructor(a){this.counter=0,this.metadataRegistry=a?.metadata??fK,this.target=a?.target??"draft-2020-12",this.unrepresentable=a?.unrepresentable??"throw",this.override=a?.override??(()=>{}),this.io=a?.io??"output",this.seen=new Map}process(a,b={path:[],schemaPath:[]}){var c;let d=a._zod.def,e=this.seen.get(a);if(e)return e.count++,b.schemaPath.includes(a)&&(e.cycle=b.path),e.schema;let f={schema:{},count:1,cycle:void 0,path:b.path};this.seen.set(a,f);let g=a._zod.toJSONSchema?.();if(g)f.schema=g;else{let c={...b,schemaPath:[...b.schemaPath,a],path:b.path},e=a._zod.parent;if(e)f.ref=e,this.process(e,c),this.seen.get(e).isParent=!0;else{let b=f.schema;switch(d.type){case"string":{b.type="string";let{minimum:c,maximum:d,format:e,patterns:g,contentEncoding:h}=a._zod.bag;if("number"==typeof c&&(b.minLength=c),"number"==typeof d&&(b.maxLength=d),e&&(b.format=({guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""})[e]??e,""===b.format&&delete b.format),h&&(b.contentEncoding=h),g&&g.size>0){let a=[...g];1===a.length?b.pattern=a[0].source:a.length>1&&(f.schema.allOf=[...a.map(a=>({..."draft-7"===this.target||"draft-4"===this.target||"openapi-3.0"===this.target?{type:"string"}:{},pattern:a.source}))])}break}case"number":{let{minimum:c,maximum:d,format:e,multipleOf:f,exclusiveMaximum:g,exclusiveMinimum:h}=a._zod.bag;"string"==typeof e&&e.includes("int")?b.type="integer":b.type="number","number"==typeof h&&("draft-4"===this.target||"openapi-3.0"===this.target?(b.minimum=h,b.exclusiveMinimum=!0):b.exclusiveMinimum=h),"number"==typeof c&&(b.minimum=c,"number"==typeof h&&"draft-4"!==this.target&&(h>=c?delete b.minimum:delete b.exclusiveMinimum)),"number"==typeof g&&("draft-4"===this.target||"openapi-3.0"===this.target?(b.maximum=g,b.exclusiveMaximum=!0):b.exclusiveMaximum=g),"number"==typeof d&&(b.maximum=d,"number"==typeof g&&"draft-4"!==this.target&&(g<=d?delete b.maximum:delete b.exclusiveMaximum)),"number"==typeof f&&(b.multipleOf=f);break}case"boolean":case"success":b.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema");break;case"null":"openapi-3.0"===this.target?(b.type="string",b.nullable=!0,b.enum=[null]):b.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw Error("Void cannot be represented in JSON Schema");break;case"never":b.not={};break;case"date":if("throw"===this.unrepresentable)throw Error("Date cannot be represented in JSON Schema");break;case"array":{let{minimum:e,maximum:f}=a._zod.bag;"number"==typeof e&&(b.minItems=e),"number"==typeof f&&(b.maxItems=f),b.type="array",b.items=this.process(d.element,{...c,path:[...c.path,"items"]});break}case"object":{b.type="object",b.properties={};let a=d.shape;for(let d in a)b.properties[d]=this.process(a[d],{...c,path:[...c.path,"properties",d]});let e=new Set([...new Set(Object.keys(a))].filter(a=>{let b=d.shape[a]._zod;return"input"===this.io?void 0===b.optin:void 0===b.optout}));e.size>0&&(b.required=Array.from(e)),d.catchall?._zod.def.type==="never"?b.additionalProperties=!1:d.catchall?d.catchall&&(b.additionalProperties=this.process(d.catchall,{...c,path:[...c.path,"additionalProperties"]})):"output"===this.io&&(b.additionalProperties=!1);break}case"union":{let a=void 0!==d.discriminator,e=d.options.map((b,d)=>this.process(b,{...c,path:[...c.path,a?"oneOf":"anyOf",d]}));a?b.oneOf=e:b.anyOf=e;break}case"intersection":{let a=this.process(d.left,{...c,path:[...c.path,"allOf",0]}),e=this.process(d.right,{...c,path:[...c.path,"allOf",1]}),f=a=>"allOf"in a&&1===Object.keys(a).length;b.allOf=[...f(a)?a.allOf:[a],...f(e)?e.allOf:[e]];break}case"tuple":{b.type="array";let e="draft-2020-12"===this.target?"prefixItems":"items",f="draft-2020-12"===this.target||"openapi-3.0"===this.target?"items":"additionalItems",g=d.items.map((a,b)=>this.process(a,{...c,path:[...c.path,e,b]})),h=d.rest?this.process(d.rest,{...c,path:[...c.path,f,..."openapi-3.0"===this.target?[d.items.length]:[]]}):null;"draft-2020-12"===this.target?(b.prefixItems=g,h&&(b.items=h)):"openapi-3.0"===this.target?(b.items={anyOf:g},h&&b.items.anyOf.push(h),b.minItems=g.length,h||(b.maxItems=g.length)):(b.items=g,h&&(b.additionalItems=h));let{minimum:i,maximum:j}=a._zod.bag;"number"==typeof i&&(b.minItems=i),"number"==typeof j&&(b.maxItems=j);break}case"record":b.type="object",("draft-7"===this.target||"draft-2020-12"===this.target)&&(b.propertyNames=this.process(d.keyType,{...c,path:[...c.path,"propertyNames"]})),b.additionalProperties=this.process(d.valueType,{...c,path:[...c.path,"additionalProperties"]});break;case"map":if("throw"===this.unrepresentable)throw Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw Error("Set cannot be represented in JSON Schema");break;case"enum":{let a=bz(d.entries);a.every(a=>"number"==typeof a)&&(b.type="number"),a.every(a=>"string"==typeof a)&&(b.type="string"),b.enum=a;break}case"literal":{let a=[];for(let b of d.values)if(void 0===b){if("throw"===this.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof b)if("throw"===this.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else a.push(Number(b));else a.push(b);if(0===a.length);else if(1===a.length){let c=a[0];b.type=null===c?"null":typeof c,"draft-4"===this.target||"openapi-3.0"===this.target?b.enum=[c]:b.const=c}else a.every(a=>"number"==typeof a)&&(b.type="number"),a.every(a=>"string"==typeof a)&&(b.type="string"),a.every(a=>"boolean"==typeof a)&&(b.type="string"),a.every(a=>null===a)&&(b.type="null"),b.enum=a;break}case"file":{let c={type:"string",format:"binary",contentEncoding:"binary"},{minimum:d,maximum:e,mime:f}=a._zod.bag;void 0!==d&&(c.minLength=d),void 0!==e&&(c.maxLength=e),f?1===f.length?(c.contentMediaType=f[0],Object.assign(b,c)):b.anyOf=f.map(a=>({...c,contentMediaType:a})):Object.assign(b,c);break}case"transform":if("throw"===this.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema");break;case"nullable":{let a=this.process(d.innerType,c);"openapi-3.0"===this.target?(f.ref=d.innerType,b.nullable=!0):b.anyOf=[a,{type:"null"}];break}case"nonoptional":case"promise":case"optional":this.process(d.innerType,c),f.ref=d.innerType;break;case"default":this.process(d.innerType,c),f.ref=d.innerType,b.default=JSON.parse(JSON.stringify(d.defaultValue));break;case"prefault":this.process(d.innerType,c),f.ref=d.innerType,"input"===this.io&&(b._prefault=JSON.parse(JSON.stringify(d.defaultValue)));break;case"catch":{let a;this.process(d.innerType,c),f.ref=d.innerType;try{a=d.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}b.default=a;break}case"nan":if("throw"===this.unrepresentable)throw Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{let c=a._zod.pattern;if(!c)throw Error("Pattern not found in template literal");b.type="string",b.pattern=c.source;break}case"pipe":{let a="input"===this.io?"transform"===d.in._zod.def.type?d.out:d.in:d.out;this.process(a,c),f.ref=a;break}case"readonly":this.process(d.innerType,c),f.ref=d.innerType,b.readOnly=!0;break;case"lazy":{let b=a._zod.innerType;this.process(b,c),f.ref=b;break}case"custom":if("throw"===this.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema");break;case"function":if("throw"===this.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")}}}let h=this.metadataRegistry.get(a);return h&&Object.assign(f.schema,h),"input"===this.io&&function a(b,c){let d=c??{seen:new Set};if(d.seen.has(b))return!1;d.seen.add(b);let e=b._zod.def;if("transform"===e.type)return!0;if("array"===e.type)return a(e.element,d);if("set"===e.type)return a(e.valueType,d);if("lazy"===e.type)return a(e.getter(),d);if("promise"===e.type||"optional"===e.type||"nonoptional"===e.type||"nullable"===e.type||"readonly"===e.type||"default"===e.type||"prefault"===e.type)return a(e.innerType,d);if("intersection"===e.type)return a(e.left,d)||a(e.right,d);if("record"===e.type||"map"===e.type)return a(e.keyType,d)||a(e.valueType,d);if("pipe"===e.type)return a(e.in,d)||a(e.out,d);if("object"===e.type){for(let b in e.shape)if(a(e.shape[b],d))return!0;return!1}if("union"===e.type){for(let b of e.options)if(a(b,d))return!0;return!1}if("tuple"===e.type){for(let b of e.items)if(a(b,d))return!0;if(e.rest&&a(e.rest,d))return!0}return!1}(a)&&(delete f.schema.examples,delete f.schema.default),"input"===this.io&&f.schema._prefault&&((c=f.schema).default??(c.default=f.schema._prefault)),delete f.schema._prefault,this.seen.get(a).schema}emit(a,b){let c={cycles:b?.cycles??"ref",reused:b?.reused??"inline",external:b?.external??void 0},d=this.seen.get(a);if(!d)throw Error("Unprocessed schema. This is a bug in Zod.");let e=a=>{let b="draft-2020-12"===this.target?"$defs":"definitions";if(c.external){let d=c.external.registry.get(a[0])?.id,e=c.external.uri??(a=>a);if(d)return{ref:e(d)};let f=a[1].defId??a[1].schema.id??`schema${this.counter++}`;return a[1].defId=f,{defId:f,ref:`${e("__shared")}#/${b}/${f}`}}if(a[1]===d)return{ref:"#"};let e=`#/${b}/`,f=a[1].schema.id??`__schema${this.counter++}`;return{defId:f,ref:e+f}},f=a=>{if(a[1].schema.$ref)return;let b=a[1],{ref:c,defId:d}=e(a);b.def={...b.schema},d&&(b.defId=d);let f=b.schema;for(let a in f)delete f[a];f.$ref=c};if("throw"===c.cycles)for(let a of this.seen.entries()){let b=a[1];if(b.cycle)throw Error(`Cycle detected: #/${b.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let b of this.seen.entries()){let d=b[1];if(a===b[0]){f(b);continue}if(c.external){let d=c.external.registry.get(b[0])?.id;if(a!==b[0]&&d){f(b);continue}}if(this.metadataRegistry.get(b[0])?.id||d.cycle||d.count>1&&"ref"===c.reused){f(b);continue}}let g=(a,b)=>{let c=this.seen.get(a),d=c.def??c.schema,e={...d};if(null===c.ref)return;let f=c.ref;if(c.ref=null,f){g(f,b);let a=this.seen.get(f).schema;a.$ref&&("draft-7"===b.target||"draft-4"===b.target||"openapi-3.0"===b.target)?(d.allOf=d.allOf??[],d.allOf.push(a)):(Object.assign(d,a),Object.assign(d,e))}c.isParent||this.override({zodSchema:a,jsonSchema:d,path:c.path??[]})};for(let a of[...this.seen.entries()].reverse())g(a[0],{target:this.target});let h={};if("draft-2020-12"===this.target?h.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?h.$schema="http://json-schema.org/draft-07/schema#":"draft-4"===this.target?h.$schema="http://json-schema.org/draft-04/schema#":"openapi-3.0"===this.target||console.warn(`Invalid target: ${this.target}`),c.external?.uri){let b=c.external.registry.get(a)?.id;if(!b)throw Error("Schema is missing an `id` property");h.$id=c.external.uri(b)}Object.assign(h,d.def);let i=c.external?.defs??{};for(let a of this.seen.entries()){let b=a[1];b.def&&b.defId&&(i[b.defId]=b.def)}c.external||Object.keys(i).length>0&&("draft-2020-12"===this.target?h.$defs=i:h.definitions=i);try{return JSON.parse(JSON.stringify(h))}catch(a){throw Error("Error converting schema to JSON.")}}}function hy(a,b){if(a instanceof fI){let c=new hx(b),d={};for(let b of a._idmap.entries()){let[a,d]=b;c.process(d)}let e={},f={registry:a,uri:b?.uri,defs:d};for(let d of a._idmap.entries()){let[a,g]=d;e[a]=c.emit(g,{...b,external:f})}return Object.keys(d).length>0&&(e.__shared={["draft-2020-12"===c.target?"$defs":"definitions"]:d}),{schemas:e}}let c=new hx(b);return c.process(a),c.emit(a,b)}function hz(a,b){try{var c=a()}catch(a){return b(a)}return c&&c.then?c.then(void 0,b):c}a.s(["JSONSchemaGenerator",()=>hx,"toJSONSchema",()=>hy],17889),a.s([],68593),a.s([],19622),a.s(["ZodAny",()=>ja,"ZodArray",()=>jk,"ZodBase64",()=>iE,"ZodBase64URL",()=>iG,"ZodBigInt",()=>i_,"ZodBigIntFormat",()=>i1,"ZodBoolean",()=>iZ,"ZodCIDRv4",()=>iA,"ZodCIDRv6",()=>iC,"ZodCUID",()=>ij,"ZodCUID2",()=>il,"ZodCatch",()=>j0,"ZodCodec",()=>j6,"ZodCustom",()=>ki,"ZodCustomStringFormat",()=>iM,"ZodDate",()=>ji,"ZodDefault",()=>jU,"ZodDiscriminatedUnion",()=>jt,"ZodE164",()=>iI,"ZodEmail",()=>h2,"ZodEmoji",()=>ie,"ZodEnum",()=>jG,"ZodFile",()=>jL,"ZodFunction",()=>kg,"ZodGUID",()=>h4,"ZodIPv4",()=>iu,"ZodIPv6",()=>iy,"ZodIntersection",()=>jv,"ZodJWT",()=>iK,"ZodKSUID",()=>is,"ZodLazy",()=>kc,"ZodLiteral",()=>jJ,"ZodMAC",()=>iw,"ZodMap",()=>jC,"ZodNaN",()=>j2,"ZodNanoID",()=>ih,"ZodNever",()=>je,"ZodNonOptional",()=>jY,"ZodNull",()=>i8,"ZodNullable",()=>jR,"ZodNumber",()=>iR,"ZodNumberFormat",()=>iT,"ZodObject",()=>jn,"ZodOptional",()=>jP,"ZodPipe",()=>j4,"ZodPrefault",()=>jW,"ZodPromise",()=>ke,"ZodReadonly",()=>j8,"ZodRecord",()=>jz,"ZodSet",()=>jE,"ZodString",()=>h_,"ZodStringFormat",()=>h1,"ZodSuccess",()=>j$,"ZodSymbol",()=>i4,"ZodTemplateLiteral",()=>ka,"ZodTransform",()=>jN,"ZodTuple",()=>jx,"ZodType",()=>hZ,"ZodULID",()=>io,"ZodURL",()=>ib,"ZodUUID",()=>h6,"ZodUndefined",()=>i6,"ZodUnion",()=>jr,"ZodUnknown",()=>jc,"ZodVoid",()=>jg,"ZodXID",()=>iq,"_ZodString",()=>h$,"_default",()=>jV,"_function",()=>kh,"any",()=>jb,"array",()=>jl,"base64",()=>iF,"base64url",()=>iH,"bigint",()=>i0,"boolean",()=>i$,"catch",()=>j1,"check",()=>kj,"cidrv4",()=>iB,"cidrv6",()=>iD,"codec",()=>j7,"cuid",()=>ik,"cuid2",()=>im,"custom",()=>kk,"date",()=>jj,"describe",()=>kn,"discriminatedUnion",()=>ju,"e164",()=>iJ,"email",()=>h3,"emoji",()=>ig,"enum",()=>jH,"file",()=>jM,"float32",()=>iV,"float64",()=>iW,"function",()=>kh,"guid",()=>h5,"hash",()=>iQ,"hex",()=>iP,"hostname",()=>iO,"httpUrl",()=>id,"instanceof",()=>kp,"int",()=>iU,"int32",()=>iX,"int64",()=>i2,"intersection",()=>jw,"ipv4",()=>iv,"ipv6",()=>iz,"json",()=>kr,"jwt",()=>iL,"keyof",()=>jm,"ksuid",()=>it,"lazy",()=>kd,"literal",()=>jK,"looseObject",()=>jq,"mac",()=>ix,"map",()=>jD,"meta",()=>ko,"nan",()=>j3,"nanoid",()=>ii,"nativeEnum",()=>jI,"never",()=>jf,"nonoptional",()=>jZ,"null",()=>i9,"nullable",()=>jS,"nullish",()=>jT,"number",()=>iS,"object",()=>jo,"optional",()=>jQ,"partialRecord",()=>jB,"pipe",()=>j5,"prefault",()=>jX,"preprocess",()=>ks,"promise",()=>kf,"readonly",()=>j9,"record",()=>jA,"refine",()=>kl,"set",()=>jF,"strictObject",()=>jp,"string",()=>h0,"stringFormat",()=>iN,"stringbool",()=>kq,"success",()=>j_,"superRefine",()=>km,"symbol",()=>i5,"templateLiteral",()=>kb,"transform",()=>jO,"tuple",()=>jy,"uint32",()=>iY,"uint64",()=>i3,"ulid",()=>ip,"undefined",()=>i7,"union",()=>js,"unknown",()=>jd,"url",()=>ic,"uuid",()=>h7,"uuidv4",()=>h8,"uuidv6",()=>h9,"uuidv7",()=>ia,"void",()=>jh,"xid",()=>ir],54714),a.i(26766),a.s(["$ZodAny",0,eK,"$ZodArray",0,eQ,"$ZodBase64",0,ev,"$ZodBase64URL",0,ex,"$ZodBigInt",0,eF,"$ZodBigIntFormat",0,eG,"$ZodBoolean",0,eE,"$ZodCIDRv4",0,es,"$ZodCIDRv6",0,et,"$ZodCUID",0,eg,"$ZodCUID2",0,eh,"$ZodCatch",0,fj,"$ZodCodec",0,fn,"$ZodCustom",0,fw,"$ZodCustomStringFormat",0,eB,"$ZodDate",0,eO,"$ZodDefault",0,fd,"$ZodDiscriminatedUnion",0,eY,"$ZodE164",0,ey,"$ZodEmail",0,ec,"$ZodEmoji",0,ee,"$ZodEnum",0,e6,"$ZodFile",0,e8,"$ZodFunction",0,ft,"$ZodGUID",0,ea,"$ZodIPv4",0,ep,"$ZodIPv6",0,eq,"$ZodISODate",0,em,"$ZodISODateTime",0,el,"$ZodISODuration",0,eo,"$ZodISOTime",0,en,"$ZodIntersection",0,eZ,"$ZodJWT",0,eA,"$ZodKSUID",0,ek,"$ZodLazy",0,fv,"$ZodLiteral",0,e7,"$ZodMAC",0,er,"$ZodMap",0,e2,"$ZodNaN",0,fk,"$ZodNanoID",0,ef,"$ZodNever",0,eM,"$ZodNonOptional",0,fg,"$ZodNull",0,eJ,"$ZodNullable",0,fc,"$ZodNumber",0,eC,"$ZodNumberFormat",0,eD,"$ZodObject",0,eU,"$ZodObjectJIT",0,eV,"$ZodOptional",0,fb,"$ZodPipe",0,fl,"$ZodPrefault",0,ff,"$ZodPromise",0,fu,"$ZodReadonly",0,fq,"$ZodRecord",0,e1,"$ZodSet",0,e4,"$ZodString",0,d8,"$ZodStringFormat",0,d9,"$ZodSuccess",0,fi,"$ZodSymbol",0,eH,"$ZodTemplateLiteral",0,fs,"$ZodTransform",0,e9,"$ZodTuple",0,e_,"$ZodType",0,d7,"$ZodULID",0,ei,"$ZodURL",0,ed,"$ZodUUID",0,eb,"$ZodUndefined",0,eI,"$ZodUnion",0,eX,"$ZodUnknown",0,eL,"$ZodVoid",0,eN,"$ZodXID",0,ej,"clone",()=>b$,"isValidBase64",()=>eu,"isValidBase64URL",()=>ew,"isValidJWT",()=>ez],24349);var hA=a.i(45976),hA=hA,hB=a.i(66446),hB=hB;a.s([],77889),a.s(["ZodISODate",()=>hE,"ZodISODateTime",()=>hC,"ZodISODuration",()=>hI,"ZodISOTime",()=>hG,"date",()=>hF,"datetime",()=>hD,"duration",()=>hJ,"time",()=>hH],6794);let hC=bo("ZodISODateTime",(a,b)=>{el.init(a,b),h1.init(a,b)});function hD(a){return f9(hC,a)}let hE=bo("ZodISODate",(a,b)=>{em.init(a,b),h1.init(a,b)});function hF(a){return ga(hE,a)}let hG=bo("ZodISOTime",(a,b)=>{en.init(a,b),h1.init(a,b)});function hH(a){return gb(hG,a)}let hI=bo("ZodISODuration",(a,b)=>{eo.init(a,b),h1.init(a,b)});function hJ(a){return gc(hI,a)}let hK=(a,b)=>{cs.init(a,b),a.name="ZodError",Object.defineProperties(a,{format:{value:b=>cv(a,b)},flatten:{value:b=>cu(a,b)},addIssue:{value:b=>{a.issues.push(b),a.message=JSON.stringify(a.issues,bB,2)}},addIssues:{value:b=>{a.issues.push(...b),a.message=JSON.stringify(a.issues,bB,2)}},isEmpty:{get:()=>0===a.issues.length}})},hL=bo("ZodError",hK),hM=bo("ZodError",hK,{Parent:Error});a.s(["ZodError",0,hL,"ZodRealError",0,hM],77818);let hN=cz(hM),hO=cB(hM),hP=cD(hM),hQ=cF(hM),hR=cH(hM),hS=cJ(hM),hT=cL(hM),hU=cN(hM),hV=cP(hM),hW=cR(hM),hX=cT(hM),hY=cV(hM);a.s(["decode",0,hS,"decodeAsync",0,hU,"encode",0,hR,"encodeAsync",0,hT,"parse",0,hN,"parseAsync",0,hO,"safeDecode",0,hW,"safeDecodeAsync",0,hY,"safeEncode",0,hV,"safeEncodeAsync",0,hX,"safeParse",0,hP,"safeParseAsync",0,hQ],51725);let hZ=bo("ZodType",(a,b)=>(d7.init(a,b),a.def=b,a.type=b.type,Object.defineProperty(a,"_def",{value:b}),a.check=(...c)=>a.clone(hB.mergeDefs(b,{checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]})),a.clone=(b,c)=>b$(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a),a.parse=(b,c)=>hN(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>hP(a,b,c),a.parseAsync=async(b,c)=>hO(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>hQ(a,b,c),a.spa=a.safeParseAsync,a.encode=(b,c)=>hR(a,b,c),a.decode=(b,c)=>hS(a,b,c),a.encodeAsync=async(b,c)=>hT(a,b,c),a.decodeAsync=async(b,c)=>hU(a,b,c),a.safeEncode=(b,c)=>hV(a,b,c),a.safeDecode=(b,c)=>hW(a,b,c),a.safeEncodeAsync=async(b,c)=>hX(a,b,c),a.safeDecodeAsync=async(b,c)=>hY(a,b,c),a.refine=(b,c)=>a.check(kl(b,c)),a.superRefine=b=>a.check(hr(b)),a.overwrite=b=>a.check(gX(b)),a.optional=()=>jQ(a),a.nullable=()=>jS(a),a.nullish=()=>jQ(jS(a)),a.nonoptional=b=>jZ(a,b),a.array=()=>jl(a),a.or=b=>js([a,b]),a.and=b=>jw(a,b),a.transform=b=>j5(a,jO(b)),a.default=b=>jV(a,b),a.prefault=b=>jX(a,b),a.catch=b=>j1(a,b),a.pipe=b=>j5(a,b),a.readonly=()=>j9(a),a.describe=b=>{let c=a.clone();return fK.add(c,{description:b}),c},Object.defineProperty(a,"description",{get:()=>fK.get(a)?.description,configurable:!0}),a.meta=(...b)=>{if(0===b.length)return fK.get(a);let c=a.clone();return fK.add(c,b[0]),c},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a)),h$=bo("_ZodString",(a,b)=>{d8.init(a,b),hZ.init(a,b);let c=a._zod.bag;a.format=c.format??null,a.minLength=c.minimum??null,a.maxLength=c.maximum??null,a.regex=(...b)=>a.check(gP(...b)),a.includes=(...b)=>a.check(gS(...b)),a.startsWith=(...b)=>a.check(gT(...b)),a.endsWith=(...b)=>a.check(gU(...b)),a.min=(...b)=>a.check(gN(...b)),a.max=(...b)=>a.check(gM(...b)),a.length=(...b)=>a.check(gO(...b)),a.nonempty=(...b)=>a.check(gN(1,...b)),a.lowercase=b=>a.check(gQ(b)),a.uppercase=b=>a.check(gR(b)),a.trim=()=>a.check(gZ()),a.normalize=(...b)=>a.check(gY(...b)),a.toLowerCase=()=>a.check(g$()),a.toUpperCase=()=>a.check(g_()),a.slugify=()=>a.check(g0())}),h_=bo("ZodString",(a,b)=>{d8.init(a,b),h$.init(a,b),a.email=b=>a.check(fN(h2,b)),a.url=b=>a.check(fT(ib,b)),a.jwt=b=>a.check(f7(iK,b)),a.emoji=b=>a.check(fU(ie,b)),a.guid=b=>a.check(fO(h4,b)),a.uuid=b=>a.check(fP(h6,b)),a.uuidv4=b=>a.check(fQ(h6,b)),a.uuidv6=b=>a.check(fR(h6,b)),a.uuidv7=b=>a.check(fS(h6,b)),a.nanoid=b=>a.check(fV(ih,b)),a.guid=b=>a.check(fO(h4,b)),a.cuid=b=>a.check(fW(ij,b)),a.cuid2=b=>a.check(fX(il,b)),a.ulid=b=>a.check(fY(io,b)),a.base64=b=>a.check(f4(iE,b)),a.base64url=b=>a.check(f5(iG,b)),a.xid=b=>a.check(fZ(iq,b)),a.ksuid=b=>a.check(f$(is,b)),a.ipv4=b=>a.check(f_(iu,b)),a.ipv6=b=>a.check(f0(iy,b)),a.cidrv4=b=>a.check(f2(iA,b)),a.cidrv6=b=>a.check(f3(iC,b)),a.e164=b=>a.check(f6(iI,b)),a.datetime=b=>a.check(hD(b)),a.date=b=>a.check(hF(b)),a.time=b=>a.check(hH(b)),a.duration=b=>a.check(hJ(b))});function h0(a){return fL(h_,a)}let h1=bo("ZodStringFormat",(a,b)=>{d9.init(a,b),h$.init(a,b)}),h2=bo("ZodEmail",(a,b)=>{ec.init(a,b),h1.init(a,b)});function h3(a){return fN(h2,a)}let h4=bo("ZodGUID",(a,b)=>{ea.init(a,b),h1.init(a,b)});function h5(a){return fO(h4,a)}let h6=bo("ZodUUID",(a,b)=>{eb.init(a,b),h1.init(a,b)});function h7(a){return fP(h6,a)}function h8(a){return fQ(h6,a)}function h9(a){return fR(h6,a)}function ia(a){return fS(h6,a)}let ib=bo("ZodURL",(a,b)=>{ed.init(a,b),h1.init(a,b)});function ic(a){return fT(ib,a)}function id(a){return fT(ib,{protocol:/^https?$/,hostname:hA.domain,...hB.normalizeParams(a)})}let ie=bo("ZodEmoji",(a,b)=>{ee.init(a,b),h1.init(a,b)});function ig(a){return fU(ie,a)}let ih=bo("ZodNanoID",(a,b)=>{ef.init(a,b),h1.init(a,b)});function ii(a){return fV(ih,a)}let ij=bo("ZodCUID",(a,b)=>{eg.init(a,b),h1.init(a,b)});function ik(a){return fW(ij,a)}let il=bo("ZodCUID2",(a,b)=>{eh.init(a,b),h1.init(a,b)});function im(a){return fX(il,a)}let io=bo("ZodULID",(a,b)=>{ei.init(a,b),h1.init(a,b)});function ip(a){return fY(io,a)}let iq=bo("ZodXID",(a,b)=>{ej.init(a,b),h1.init(a,b)});function ir(a){return fZ(iq,a)}let is=bo("ZodKSUID",(a,b)=>{ek.init(a,b),h1.init(a,b)});function it(a){return f$(is,a)}let iu=bo("ZodIPv4",(a,b)=>{ep.init(a,b),h1.init(a,b)});function iv(a){return f_(iu,a)}let iw=bo("ZodMAC",(a,b)=>{er.init(a,b),h1.init(a,b)});function ix(a){return f1(iw,a)}let iy=bo("ZodIPv6",(a,b)=>{eq.init(a,b),h1.init(a,b)});function iz(a){return f0(iy,a)}let iA=bo("ZodCIDRv4",(a,b)=>{es.init(a,b),h1.init(a,b)});function iB(a){return f2(iA,a)}let iC=bo("ZodCIDRv6",(a,b)=>{et.init(a,b),h1.init(a,b)});function iD(a){return f3(iC,a)}let iE=bo("ZodBase64",(a,b)=>{ev.init(a,b),h1.init(a,b)});function iF(a){return f4(iE,a)}let iG=bo("ZodBase64URL",(a,b)=>{ex.init(a,b),h1.init(a,b)});function iH(a){return f5(iG,a)}let iI=bo("ZodE164",(a,b)=>{ey.init(a,b),h1.init(a,b)});function iJ(a){return f6(iI,a)}let iK=bo("ZodJWT",(a,b)=>{eA.init(a,b),h1.init(a,b)});function iL(a){return f7(iK,a)}let iM=bo("ZodCustomStringFormat",(a,b)=>{eB.init(a,b),h1.init(a,b)});function iN(a,b,c={}){return hw(iM,a,b,c)}function iO(a){return hw(iM,"hostname",hA.hostname,a)}function iP(a){return hw(iM,"hex",hA.hex,a)}function iQ(a,b){let c=b?.enc??"hex",d=`${a}_${c}`,e=hA[d];if(!e)throw Error(`Unrecognized hash format: ${d}`);return hw(iM,d,e,b)}let iR=bo("ZodNumber",(a,b)=>{eC.init(a,b),hZ.init(a,b),a.gt=(b,c)=>a.check(gC(b,c)),a.gte=(b,c)=>a.check(gD(b,c)),a.min=(b,c)=>a.check(gD(b,c)),a.lt=(b,c)=>a.check(gA(b,c)),a.lte=(b,c)=>a.check(gB(b,c)),a.max=(b,c)=>a.check(gB(b,c)),a.int=b=>a.check(iU(b)),a.safe=b=>a.check(iU(b)),a.positive=b=>a.check(gC(0,b)),a.nonnegative=b=>a.check(gD(0,b)),a.negative=b=>a.check(gA(0,b)),a.nonpositive=b=>a.check(gB(0,b)),a.multipleOf=(b,c)=>a.check(gI(b,c)),a.step=(b,c)=>a.check(gI(b,c)),a.finite=()=>a;let c=a._zod.bag;a.minValue=Math.max(c.minimum??-1/0,c.exclusiveMinimum??-1/0)??null,a.maxValue=Math.min(c.maximum??1/0,c.exclusiveMaximum??1/0)??null,a.isInt=(c.format??"").includes("int")||Number.isSafeInteger(c.multipleOf??.5),a.isFinite=!0,a.format=c.format??null});function iS(a){return gd(iR,a)}let iT=bo("ZodNumberFormat",(a,b)=>{eD.init(a,b),iR.init(a,b)});function iU(a){return gf(iT,a)}function iV(a){return gg(iT,a)}function iW(a){return gh(iT,a)}function iX(a){return gi(iT,a)}function iY(a){return gj(iT,a)}let iZ=bo("ZodBoolean",(a,b)=>{eE.init(a,b),hZ.init(a,b)});function i$(a){return gk(iZ,a)}let i_=bo("ZodBigInt",(a,b)=>{eF.init(a,b),hZ.init(a,b),a.gte=(b,c)=>a.check(gD(b,c)),a.min=(b,c)=>a.check(gD(b,c)),a.gt=(b,c)=>a.check(gC(b,c)),a.gte=(b,c)=>a.check(gD(b,c)),a.min=(b,c)=>a.check(gD(b,c)),a.lt=(b,c)=>a.check(gA(b,c)),a.lte=(b,c)=>a.check(gB(b,c)),a.max=(b,c)=>a.check(gB(b,c)),a.positive=b=>a.check(gC(BigInt(0),b)),a.negative=b=>a.check(gA(BigInt(0),b)),a.nonpositive=b=>a.check(gB(BigInt(0),b)),a.nonnegative=b=>a.check(gD(BigInt(0),b)),a.multipleOf=(b,c)=>a.check(gI(b,c));let c=a._zod.bag;a.minValue=c.minimum??null,a.maxValue=c.maximum??null,a.format=c.format??null});function i0(a){return gm(i_,a)}let i1=bo("ZodBigIntFormat",(a,b)=>{eG.init(a,b),i_.init(a,b)});function i2(a){return go(i1,a)}function i3(a){return gp(i1,a)}let i4=bo("ZodSymbol",(a,b)=>{eH.init(a,b),hZ.init(a,b)});function i5(a){return gq(i4,a)}let i6=bo("ZodUndefined",(a,b)=>{eI.init(a,b),hZ.init(a,b)});function i7(a){return gr(i6,a)}let i8=bo("ZodNull",(a,b)=>{eJ.init(a,b),hZ.init(a,b)});function i9(a){return gs(i8,a)}let ja=bo("ZodAny",(a,b)=>{eK.init(a,b),hZ.init(a,b)});function jb(){return gt(ja)}let jc=bo("ZodUnknown",(a,b)=>{eL.init(a,b),hZ.init(a,b)});function jd(){return gu(jc)}let je=bo("ZodNever",(a,b)=>{eM.init(a,b),hZ.init(a,b)});function jf(a){return gv(je,a)}let jg=bo("ZodVoid",(a,b)=>{eN.init(a,b),hZ.init(a,b)});function jh(a){return gw(jg,a)}let ji=bo("ZodDate",(a,b)=>{eO.init(a,b),hZ.init(a,b),a.min=(b,c)=>a.check(gD(b,c)),a.max=(b,c)=>a.check(gB(b,c));let c=a._zod.bag;a.minDate=c.minimum?new Date(c.minimum):null,a.maxDate=c.maximum?new Date(c.maximum):null});function jj(a){return gx(ji,a)}let jk=bo("ZodArray",(a,b)=>{eQ.init(a,b),hZ.init(a,b),a.element=b.element,a.min=(b,c)=>a.check(gN(b,c)),a.nonempty=b=>a.check(gN(1,b)),a.max=(b,c)=>a.check(gM(b,c)),a.length=(b,c)=>a.check(gO(b,c)),a.unwrap=()=>a.element});function jl(a,b){return g1(jk,a,b)}function jm(a){return jH(Object.keys(a._zod.def.shape))}let jn=bo("ZodObject",(a,b)=>{eV.init(a,b),hZ.init(a,b),hB.defineLazy(a,"shape",()=>b.shape),a.keyof=()=>jH(Object.keys(a._zod.def.shape)),a.catchall=b=>a.clone({...a._zod.def,catchall:b}),a.passthrough=()=>a.clone({...a._zod.def,catchall:jd()}),a.loose=()=>a.clone({...a._zod.def,catchall:jd()}),a.strict=()=>a.clone({...a._zod.def,catchall:jf()}),a.strip=()=>a.clone({...a._zod.def,catchall:void 0}),a.extend=b=>hB.extend(a,b),a.safeExtend=b=>hB.safeExtend(a,b),a.merge=b=>hB.merge(a,b),a.pick=b=>hB.pick(a,b),a.omit=b=>hB.omit(a,b),a.partial=(...b)=>hB.partial(jP,a,b[0]),a.required=(...b)=>hB.required(jY,a,b[0])});function jo(a,b){return new jn({type:"object",shape:a??{},...hB.normalizeParams(b)})}function jp(a,b){return new jn({type:"object",shape:a,catchall:jf(),...hB.normalizeParams(b)})}function jq(a,b){return new jn({type:"object",shape:a,catchall:jd(),...hB.normalizeParams(b)})}let jr=bo("ZodUnion",(a,b)=>{eX.init(a,b),hZ.init(a,b),a.options=b.options});function js(a,b){return new jr({type:"union",options:a,...hB.normalizeParams(b)})}let jt=bo("ZodDiscriminatedUnion",(a,b)=>{jr.init(a,b),eY.init(a,b)});function ju(a,b,c){return new jt({type:"union",options:b,discriminator:a,...hB.normalizeParams(c)})}let jv=bo("ZodIntersection",(a,b)=>{eZ.init(a,b),hZ.init(a,b)});function jw(a,b){return new jv({type:"intersection",left:a,right:b})}let jx=bo("ZodTuple",(a,b)=>{e_.init(a,b),hZ.init(a,b),a.rest=b=>a.clone({...a._zod.def,rest:b})});function jy(a,b,c){let d=b instanceof d7,e=d?c:b;return new jx({type:"tuple",items:a,rest:d?b:null,...hB.normalizeParams(e)})}let jz=bo("ZodRecord",(a,b)=>{e1.init(a,b),hZ.init(a,b),a.keyType=b.keyType,a.valueType=b.valueType});function jA(a,b,c){return new jz({type:"record",keyType:a,valueType:b,...hB.normalizeParams(c)})}function jB(a,b,c){let d=b$(a);return d._zod.values=void 0,new jz({type:"record",keyType:d,valueType:b,...hB.normalizeParams(c)})}let jC=bo("ZodMap",(a,b)=>{e2.init(a,b),hZ.init(a,b),a.keyType=b.keyType,a.valueType=b.valueType});function jD(a,b,c){return new jC({type:"map",keyType:a,valueType:b,...hB.normalizeParams(c)})}let jE=bo("ZodSet",(a,b)=>{e4.init(a,b),hZ.init(a,b),a.min=(...b)=>a.check(gK(...b)),a.nonempty=b=>a.check(gK(1,b)),a.max=(...b)=>a.check(gJ(...b)),a.size=(...b)=>a.check(gL(...b))});function jF(a,b){return new jE({type:"set",valueType:a,...hB.normalizeParams(b)})}let jG=bo("ZodEnum",(a,b)=>{e6.init(a,b),hZ.init(a,b),a.enum=b.entries,a.options=Object.values(b.entries);let c=new Set(Object.keys(b.entries));a.extract=(a,d)=>{let e={};for(let d of a)if(c.has(d))e[d]=b.entries[d];else throw Error(`Key ${d} not found in enum`);return new jG({...b,checks:[],...hB.normalizeParams(d),entries:e})},a.exclude=(a,d)=>{let e={...b.entries};for(let b of a)if(c.has(b))delete e[b];else throw Error(`Key ${b} not found in enum`);return new jG({...b,checks:[],...hB.normalizeParams(d),entries:e})}});function jH(a,b){return new jG({type:"enum",entries:Array.isArray(a)?Object.fromEntries(a.map(a=>[a,a])):a,...hB.normalizeParams(b)})}function jI(a,b){return new jG({type:"enum",entries:a,...hB.normalizeParams(b)})}let jJ=bo("ZodLiteral",(a,b)=>{e7.init(a,b),hZ.init(a,b),a.values=new Set(b.values),Object.defineProperty(a,"value",{get(){if(b.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return b.values[0]}})});function jK(a,b){return new jJ({type:"literal",values:Array.isArray(a)?a:[a],...hB.normalizeParams(b)})}let jL=bo("ZodFile",(a,b)=>{e8.init(a,b),hZ.init(a,b),a.min=(b,c)=>a.check(gK(b,c)),a.max=(b,c)=>a.check(gJ(b,c)),a.mime=(b,c)=>a.check(gW(Array.isArray(b)?b:[b],c))});function jM(a){return hc(jL,a)}let jN=bo("ZodTransform",(a,b)=>{e9.init(a,b),hZ.init(a,b),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new br(a.constructor.name);c.addIssue=d=>{"string"==typeof d?c.issues.push(hB.issue(d,c.value,b)):(d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=c.value),d.inst??(d.inst=a),c.issues.push(hB.issue(d)))};let e=b.transform(c.value,c);return e instanceof Promise?e.then(a=>(c.value=a,c)):(c.value=e,c)}});function jO(a){return new jN({type:"transform",transform:a})}let jP=bo("ZodOptional",(a,b)=>{fb.init(a,b),hZ.init(a,b),a.unwrap=()=>a._zod.def.innerType});function jQ(a){return new jP({type:"optional",innerType:a})}let jR=bo("ZodNullable",(a,b)=>{fc.init(a,b),hZ.init(a,b),a.unwrap=()=>a._zod.def.innerType});function jS(a){return new jR({type:"nullable",innerType:a})}function jT(a){return jQ(jS(a))}let jU=bo("ZodDefault",(a,b)=>{fd.init(a,b),hZ.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap});function jV(a,b){return new jU({type:"default",innerType:a,get defaultValue(){return"function"==typeof b?b():hB.shallowClone(b)}})}let jW=bo("ZodPrefault",(a,b)=>{ff.init(a,b),hZ.init(a,b),a.unwrap=()=>a._zod.def.innerType});function jX(a,b){return new jW({type:"prefault",innerType:a,get defaultValue(){return"function"==typeof b?b():hB.shallowClone(b)}})}let jY=bo("ZodNonOptional",(a,b)=>{fg.init(a,b),hZ.init(a,b),a.unwrap=()=>a._zod.def.innerType});function jZ(a,b){return new jY({type:"nonoptional",innerType:a,...hB.normalizeParams(b)})}let j$=bo("ZodSuccess",(a,b)=>{fi.init(a,b),hZ.init(a,b),a.unwrap=()=>a._zod.def.innerType});function j_(a){return new j$({type:"success",innerType:a})}let j0=bo("ZodCatch",(a,b)=>{fj.init(a,b),hZ.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap});function j1(a,b){return new j0({type:"catch",innerType:a,catchValue:"function"==typeof b?b:()=>b})}let j2=bo("ZodNaN",(a,b)=>{fk.init(a,b),hZ.init(a,b)});function j3(a){return gz(j2,a)}let j4=bo("ZodPipe",(a,b)=>{fl.init(a,b),hZ.init(a,b),a.in=b.in,a.out=b.out});function j5(a,b){return new j4({type:"pipe",in:a,out:b})}let j6=bo("ZodCodec",(a,b)=>{j4.init(a,b),fn.init(a,b)});function j7(a,b,c){return new j6({type:"pipe",in:a,out:b,transform:c.decode,reverseTransform:c.encode})}let j8=bo("ZodReadonly",(a,b)=>{fq.init(a,b),hZ.init(a,b),a.unwrap=()=>a._zod.def.innerType});function j9(a){return new j8({type:"readonly",innerType:a})}let ka=bo("ZodTemplateLiteral",(a,b)=>{fs.init(a,b),hZ.init(a,b)});function kb(a,b){return new ka({type:"template_literal",parts:a,...hB.normalizeParams(b)})}let kc=bo("ZodLazy",(a,b)=>{fv.init(a,b),hZ.init(a,b),a.unwrap=()=>a._zod.def.getter()});function kd(a){return new kc({type:"lazy",getter:a})}let ke=bo("ZodPromise",(a,b)=>{fu.init(a,b),hZ.init(a,b),a.unwrap=()=>a._zod.def.innerType});function kf(a){return new ke({type:"promise",innerType:a})}let kg=bo("ZodFunction",(a,b)=>{ft.init(a,b),hZ.init(a,b)});function kh(a){return new kg({type:"function",input:Array.isArray(a?.input)?jy(a?.input):a?.input??jl(jd()),output:a?.output??jd()})}let ki=bo("ZodCustom",(a,b)=>{fw.init(a,b),hZ.init(a,b)});function kj(a){let b=new dJ({check:"custom"});return b._zod.check=a,b}function kk(a,b){return hp(ki,a??(()=>!0),b)}function kl(a,b={}){return hq(ki,a,b)}function km(a){return hr(a)}let kn=ht,ko=hu;function kp(a,b={error:`Input not instance of ${a.name}`}){let c=new ki({type:"custom",check:"custom",fn:b=>b instanceof a,abort:!0,...hB.normalizeParams(b)});return c._zod.bag.Class=a,c}let kq=(...a)=>hv({Codec:j6,Boolean:iZ,String:h_},...a);function kr(a){let b=kd(()=>js([h0(a),iS(),i$(),i9(),jl(b),jA(h0(),b)]));return b}function ks(a,b){return j5(jO(a),b)}let kt={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function ku(a){bt({customError:a})}function kv(){return bt().customError}function kw(a){return fM(h_,a)}function kx(a){return ge(iR,a)}function ky(a){return gl(iZ,a)}function kz(a){return gn(i_,a)}function kA(a){return gy(ji,a)}c||(c={}),a.s(["ZodFirstPartyTypeKind",()=>c,"ZodIssueCode",0,kt,"getErrorMap",()=>kv,"setErrorMap",()=>ku],69002),a.s(["bigint",()=>kz,"boolean",()=>ky,"date",()=>kA,"number",()=>kx,"string",()=>kw],15712),bt(fz()),a.s([],50420),a.i(50420),a.i(19622),a.i(34449),a.i(86372),a.i(62890),a.i(24349),a.i(31362),a.i(81767);var kB=hB,kC=hA;a.i(92685),a.s(["ar",0,function(){let a,b;return{localeError:(a={string:{unit:"Ø­Ø±Ù",verb:"Ø£Ù† ÙŠØ­ÙˆÙŠ"},file:{unit:"Ø¨Ø§ÙŠØª",verb:"Ø£Ù† ÙŠØ­ÙˆÙŠ"},array:{unit:"Ø¹Ù†ØµØ±",verb:"Ø£Ù† ÙŠØ­ÙˆÙŠ"},set:{unit:"Ø¹Ù†ØµØ±",verb:"Ø£Ù† ÙŠØ­ÙˆÙŠ"}},b={regex:"Ù…Ø¯Ø®Ù„",email:"Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",url:"Ø±Ø§Ø¨Ø·",emoji:"Ø¥ÙŠÙ…ÙˆØ¬ÙŠ",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø¨Ù…Ø¹ÙŠØ§Ø± ISO",date:"ØªØ§Ø±ÙŠØ® Ø¨Ù…Ø¹ÙŠØ§Ø± ISO",time:"ÙˆÙ‚Øª Ø¨Ù…Ø¹ÙŠØ§Ø± ISO",duration:"Ù…Ø¯Ø© Ø¨Ù…Ø¹ÙŠØ§Ø± ISO",ipv4:"Ø¹Ù†ÙˆØ§Ù† IPv4",ipv6:"Ø¹Ù†ÙˆØ§Ù† IPv6",cidrv4:"Ù…Ø¯Ù‰ Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨ØµÙŠØºØ© IPv4",cidrv6:"Ù…Ø¯Ù‰ Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨ØµÙŠØºØ© IPv6",base64:"Ù†ÙŽØµ Ø¨ØªØ±Ù…ÙŠØ² base64-encoded",base64url:"Ù†ÙŽØµ Ø¨ØªØ±Ù…ÙŠØ² base64url-encoded",json_string:"Ù†ÙŽØµ Ø¹Ù„Ù‰ Ù‡ÙŠØ¦Ø© JSON",e164:"Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¨Ù…Ø¹ÙŠØ§Ø± E.164",jwt:"JWT",template_literal:"Ù…Ø¯Ø®Ù„"},c=>{switch(c.code){case"invalid_type":return`Ù…Ø¯Ø®Ù„Ø§Øª ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„Ø©: ÙŠÙØªØ±Ø¶ Ø¥Ø¯Ø®Ø§Ù„ ${c.expected}ØŒ ÙˆÙ„ÙƒÙ† ØªÙ… Ø¥Ø¯Ø®Ø§Ù„ ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Ù…Ø¯Ø®Ù„Ø§Øª ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„Ø©: ÙŠÙØªØ±Ø¶ Ø¥Ø¯Ø®Ø§Ù„ ${b1(c.values[0])}`;return`Ø§Ø®ØªÙŠØ§Ø± ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„: ÙŠØªÙˆÙ‚Ø¹ Ø§Ù†ØªÙ‚Ø§Ø¡ Ø£Ø­Ø¯ Ù‡Ø°Ù‡ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª: ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return` Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù„Ø§Ø²Ù…: ÙŠÙØªØ±Ø¶ Ø£Ù† ØªÙƒÙˆÙ† ${c.origin??"Ø§Ù„Ù‚ÙŠÙ…Ø©"} ${b} ${c.maximum.toString()} ${d.unit??"Ø¹Ù†ØµØ±"}`;return`Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù„Ø§Ø²Ù…: ÙŠÙØªØ±Ø¶ Ø£Ù† ØªÙƒÙˆÙ† ${c.origin??"Ø§Ù„Ù‚ÙŠÙ…Ø©"} ${b} ${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Ø£ØµØºØ± Ù…Ù† Ø§Ù„Ù„Ø§Ø²Ù…: ÙŠÙØªØ±Ø¶ Ù„Ù€ ${c.origin} Ø£Ù† ÙŠÙƒÙˆÙ† ${b} ${c.minimum.toString()} ${d.unit}`;return`Ø£ØµØºØ± Ù…Ù† Ø§Ù„Ù„Ø§Ø²Ù…: ÙŠÙØªØ±Ø¶ Ù„Ù€ ${c.origin} Ø£Ù† ÙŠÙƒÙˆÙ† ${b} ${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Ù†ÙŽØµ ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„: ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ "${c.prefix}"`;if("ends_with"===c.format)return`Ù†ÙŽØµ ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„: ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙ†ØªÙ‡ÙŠ Ø¨Ù€ "${c.suffix}"`;if("includes"===c.format)return`Ù†ÙŽØµ ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„: ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªØ¶Ù…Ù‘ÙŽÙ† "${c.includes}"`;if("regex"===c.format)return`Ù†ÙŽØµ ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„: ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ·Ø§Ø¨Ù‚ Ø§Ù„Ù†Ù…Ø· ${c.pattern}`;return`${b[c.format]??c.format} ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„`;case"not_multiple_of":return`Ø±Ù‚Ù… ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„: ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…Ù† Ù…Ø¶Ø§Ø¹ÙØ§Øª ${c.divisor}`;case"unrecognized_keys":return`Ù…Ø¹Ø±Ù${c.keys.length>1?"Ø§Øª":""} ØºØ±ÙŠØ¨${c.keys.length>1?"Ø©":""}: ${bA(c.keys,"ØŒ ")}`;case"invalid_key":return`Ù…Ø¹Ø±Ù ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„ ÙÙŠ ${c.origin}`;case"invalid_union":default:return"Ù…Ø¯Ø®Ù„ ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„";case"invalid_element":return`Ù…Ø¯Ø®Ù„ ØºÙŠØ± Ù…Ù‚Ø¨ÙˆÙ„ ÙÙŠ ${c.origin}`}})}},"az",0,function(){let a,b;return{localeError:(a={string:{unit:"simvol",verb:"olmalÄ±dÄ±r"},file:{unit:"bayt",verb:"olmalÄ±dÄ±r"},array:{unit:"element",verb:"olmalÄ±dÄ±r"},set:{unit:"element",verb:"olmalÄ±dÄ±r"}},b={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},c=>{switch(c.code){case"invalid_type":return`YanlÄ±ÅŸ dÉ™yÉ™r: g\xf6zlÉ™nilÉ™n ${c.expected}, daxil olan ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`YanlÄ±ÅŸ dÉ™yÉ™r: g\xf6zlÉ™nilÉ™n ${b1(c.values[0])}`;return`YanlÄ±ÅŸ se\xe7im: aÅŸaÄŸÄ±dakÄ±lardan biri olmalÄ±dÄ±r: ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`\xc7ox b\xf6y\xfck: g\xf6zlÉ™nilÉ™n ${c.origin??"dÉ™yÉ™r"} ${b}${c.maximum.toString()} ${d.unit??"element"}`;return`\xc7ox b\xf6y\xfck: g\xf6zlÉ™nilÉ™n ${c.origin??"dÉ™yÉ™r"} ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`\xc7ox ki\xe7ik: g\xf6zlÉ™nilÉ™n ${c.origin} ${b}${c.minimum.toString()} ${d.unit}`;return`\xc7ox ki\xe7ik: g\xf6zlÉ™nilÉ™n ${c.origin} ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`YanlÄ±ÅŸ mÉ™tn: "${c.prefix}" ilÉ™ baÅŸlamalÄ±dÄ±r`;if("ends_with"===c.format)return`YanlÄ±ÅŸ mÉ™tn: "${c.suffix}" ilÉ™ bitmÉ™lidir`;if("includes"===c.format)return`YanlÄ±ÅŸ mÉ™tn: "${c.includes}" daxil olmalÄ±dÄ±r`;if("regex"===c.format)return`YanlÄ±ÅŸ mÉ™tn: ${c.pattern} ÅŸablonuna uyÄŸun olmalÄ±dÄ±r`;return`YanlÄ±ÅŸ ${b[c.format]??c.format}`;case"not_multiple_of":return`YanlÄ±ÅŸ É™dÉ™d: ${c.divisor} ilÉ™ b\xf6l\xfcnÉ™ bilÉ™n olmalÄ±dÄ±r`;case"unrecognized_keys":return`TanÄ±nmayan a\xe7ar${c.keys.length>1?"lar":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`${c.origin} daxilindÉ™ yanlÄ±ÅŸ a\xe7ar`;case"invalid_union":return"YanlÄ±ÅŸ dÉ™yÉ™r";case"invalid_element":return`${c.origin} daxilindÉ™ yanlÄ±ÅŸ dÉ™yÉ™r`;default:return`YanlÄ±ÅŸ dÉ™yÉ™r`}})}},"be",0,function(){let a,b;return{localeError:(a={string:{unit:{one:"ÑÑ–Ð¼Ð²Ð°Ð»",few:"ÑÑ–Ð¼Ð²Ð°Ð»Ñ‹",many:"ÑÑ–Ð¼Ð²Ð°Ð»Ð°Ñž"},verb:"Ð¼ÐµÑ†ÑŒ"},array:{unit:{one:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",few:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹",many:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñž"},verb:"Ð¼ÐµÑ†ÑŒ"},set:{unit:{one:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",few:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹",many:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñž"},verb:"Ð¼ÐµÑ†ÑŒ"},file:{unit:{one:"Ð±Ð°Ð¹Ñ‚",few:"Ð±Ð°Ð¹Ñ‚Ñ‹",many:"Ð±Ð°Ð¹Ñ‚Ð°Ñž"},verb:"Ð¼ÐµÑ†ÑŒ"}},b={regex:"ÑƒÐ²Ð¾Ð´",email:"email Ð°Ð´Ñ€Ð°Ñ",url:"URL",emoji:"ÑÐ¼Ð¾Ð´Ð·Ñ–",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO Ð´Ð°Ñ‚Ð° Ñ– Ñ‡Ð°Ñ",date:"ISO Ð´Ð°Ñ‚Ð°",time:"ISO Ñ‡Ð°Ñ",duration:"ISO Ð¿Ñ€Ð°Ñ†ÑÐ³Ð»Ð°ÑÑ†ÑŒ",ipv4:"IPv4 Ð°Ð´Ñ€Ð°Ñ",ipv6:"IPv6 Ð°Ð´Ñ€Ð°Ñ",cidrv4:"IPv4 Ð´Ñ‹ÑÐ¿Ð°Ð·Ð¾Ð½",cidrv6:"IPv6 Ð´Ñ‹ÑÐ¿Ð°Ð·Ð¾Ð½",base64:"Ñ€Ð°Ð´Ð¾Ðº Ñƒ Ñ„Ð°Ñ€Ð¼Ð°Ñ†Ðµ base64",base64url:"Ñ€Ð°Ð´Ð¾Ðº Ñƒ Ñ„Ð°Ñ€Ð¼Ð°Ñ†Ðµ base64url",json_string:"JSON Ñ€Ð°Ð´Ð¾Ðº",e164:"Ð½ÑƒÐ¼Ð°Ñ€ E.164",jwt:"JWT",template_literal:"ÑƒÐ²Ð¾Ð´"},c=>{switch(c.code){case"invalid_type":return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ ÑžÐ²Ð¾Ð´: Ñ‡Ð°ÐºÐ°ÑžÑÑ ${c.expected}, Ð°Ñ‚Ñ€Ñ‹Ð¼Ð°Ð½Ð° ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"Ð»Ñ–Ðº";case"object":if(Array.isArray(a))return"Ð¼Ð°ÑÑ–Ñž";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ ÑžÐ²Ð¾Ð´: Ñ‡Ð°ÐºÐ°Ð»Ð°ÑÑ ${b1(c.values[0])}`;return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ Ð²Ð°Ñ€Ñ‹ÑÐ½Ñ‚: Ñ‡Ð°ÐºÐ°ÑžÑÑ Ð°Ð´Ð·Ñ–Ð½ Ð· ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d){let a=fy(Number(c.maximum),d.unit.one,d.unit.few,d.unit.many);return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð° Ð²ÑÐ»Ñ–ÐºÑ–: Ñ‡Ð°ÐºÐ°Ð»Ð°ÑÑ, ÑˆÑ‚Ð¾ ${c.origin??"Ð·Ð½Ð°Ñ‡ÑÐ½Ð½Ðµ"} Ð¿Ð°Ð²Ñ–Ð½Ð½Ð° ${d.verb} ${b}${c.maximum.toString()} ${a}`}return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð° Ð²ÑÐ»Ñ–ÐºÑ–: Ñ‡Ð°ÐºÐ°Ð»Ð°ÑÑ, ÑˆÑ‚Ð¾ ${c.origin??"Ð·Ð½Ð°Ñ‡ÑÐ½Ð½Ðµ"} Ð¿Ð°Ð²Ñ–Ð½Ð½Ð° Ð±Ñ‹Ñ†ÑŒ ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d){let a=fy(Number(c.minimum),d.unit.one,d.unit.few,d.unit.many);return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð° Ð¼Ð°Ð»Ñ‹: Ñ‡Ð°ÐºÐ°Ð»Ð°ÑÑ, ÑˆÑ‚Ð¾ ${c.origin} Ð¿Ð°Ð²Ñ–Ð½Ð½Ð° ${d.verb} ${b}${c.minimum.toString()} ${a}`}return`Ð—Ð°Ð½Ð°Ð´Ñ‚Ð° Ð¼Ð°Ð»Ñ‹: Ñ‡Ð°ÐºÐ°Ð»Ð°ÑÑ, ÑˆÑ‚Ð¾ ${c.origin} Ð¿Ð°Ð²Ñ–Ð½Ð½Ð° Ð±Ñ‹Ñ†ÑŒ ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ Ñ€Ð°Ð´Ð¾Ðº: Ð¿Ð°Ð²Ñ–Ð½ÐµÐ½ Ð¿Ð°Ñ‡Ñ‹Ð½Ð°Ñ†Ñ†Ð° Ð· "${c.prefix}"`;if("ends_with"===c.format)return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ Ñ€Ð°Ð´Ð¾Ðº: Ð¿Ð°Ð²Ñ–Ð½ÐµÐ½ Ð·Ð°ÐºÐ°Ð½Ñ‡Ð²Ð°Ñ†Ñ†Ð° Ð½Ð° "${c.suffix}"`;if("includes"===c.format)return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ Ñ€Ð°Ð´Ð¾Ðº: Ð¿Ð°Ð²Ñ–Ð½ÐµÐ½ Ð·Ð¼ÑÑˆÑ‡Ð°Ñ†ÑŒ "${c.includes}"`;if("regex"===c.format)return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ Ñ€Ð°Ð´Ð¾Ðº: Ð¿Ð°Ð²Ñ–Ð½ÐµÐ½ Ð°Ð´Ð¿Ð°Ð²ÑÐ´Ð°Ñ†ÑŒ ÑˆÐ°Ð±Ð»Ð¾Ð½Ñƒ ${c.pattern}`;return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ ${b[c.format]??c.format}`;case"not_multiple_of":return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ Ð»Ñ–Ðº: Ð¿Ð°Ð²Ñ–Ð½ÐµÐ½ Ð±Ñ‹Ñ†ÑŒ ÐºÑ€Ð°Ñ‚Ð½Ñ‹Ð¼ ${c.divisor}`;case"unrecognized_keys":return`ÐÐµÑ€Ð°ÑÐ¿Ð°Ð·Ð½Ð°Ð½Ñ‹ ${c.keys.length>1?"ÐºÐ»ÑŽÑ‡Ñ‹":"ÐºÐ»ÑŽÑ‡"}: ${bA(c.keys,", ")}`;case"invalid_key":return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ ÐºÐ»ÑŽÑ‡ Ñƒ ${c.origin}`;case"invalid_union":return"ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ ÑžÐ²Ð¾Ð´";case"invalid_element":return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ð°Ðµ Ð·Ð½Ð°Ñ‡ÑÐ½Ð½Ðµ Ñž ${c.origin}`;default:return`ÐÑÐ¿Ñ€Ð°Ð²Ñ–Ð»ÑŒÐ½Ñ‹ ÑžÐ²Ð¾Ð´`}})}},"bg",0,function(){let a,b;return{localeError:(a={string:{unit:"ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°",verb:"Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð°"},file:{unit:"Ð±Ð°Ð¹Ñ‚Ð°",verb:"Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð°"},array:{unit:"ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°",verb:"Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð°"},set:{unit:"ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°",verb:"Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð°"}},b={regex:"Ð²Ñ…Ð¾Ð´",email:"Ð¸Ð¼ÐµÐ¹Ð» Ð°Ð´Ñ€ÐµÑ",url:"URL",emoji:"ÐµÐ¼Ð¾Ð´Ð¶Ð¸",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO Ð²Ñ€ÐµÐ¼Ðµ",date:"ISO Ð´Ð°Ñ‚Ð°",time:"ISO Ð²Ñ€ÐµÐ¼Ðµ",duration:"ISO Ð¿Ñ€Ð¾Ð´ÑŠÐ»Ð¶Ð¸Ñ‚ÐµÐ»Ð½Ð¾ÑÑ‚",ipv4:"IPv4 Ð°Ð´Ñ€ÐµÑ",ipv6:"IPv6 Ð°Ð´Ñ€ÐµÑ",cidrv4:"IPv4 Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½",cidrv6:"IPv6 Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½",base64:"base64-ÐºÐ¾Ð´Ð¸Ñ€Ð°Ð½ Ð½Ð¸Ð·",base64url:"base64url-ÐºÐ¾Ð´Ð¸Ñ€Ð°Ð½ Ð½Ð¸Ð·",json_string:"JSON Ð½Ð¸Ð·",e164:"E.164 Ð½Ð¾Ð¼ÐµÑ€",jwt:"JWT",template_literal:"Ð²Ñ…Ð¾Ð´"},c=>{switch(c.code){case"invalid_type":return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð²Ñ…Ð¾Ð´: Ð¾Ñ‡Ð°ÐºÐ²Ð°Ð½ ${c.expected}, Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½ ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"Ñ‡Ð¸ÑÐ»Ð¾";case"object":if(Array.isArray(a))return"Ð¼Ð°ÑÐ¸Ð²";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð²Ñ…Ð¾Ð´: Ð¾Ñ‡Ð°ÐºÐ²Ð°Ð½ ${b1(c.values[0])}`;return`ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð° Ð¾Ð¿Ñ†Ð¸Ñ: Ð¾Ñ‡Ð°ÐºÐ²Ð°Ð½Ð¾ ÐµÐ´Ð½Ð¾ Ð¾Ñ‚ ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Ð¢Ð²ÑŠÑ€Ð´Ðµ Ð³Ð¾Ð»ÑÐ¼Ð¾: Ð¾Ñ‡Ð°ÐºÐ²Ð° ÑÐµ ${c.origin??"ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚"} Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð° ${b}${c.maximum.toString()} ${d.unit??"ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°"}`;return`Ð¢Ð²ÑŠÑ€Ð´Ðµ Ð³Ð¾Ð»ÑÐ¼Ð¾: Ð¾Ñ‡Ð°ÐºÐ²Ð° ÑÐµ ${c.origin??"ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚"} Ð´Ð° Ð±ÑŠÐ´Ðµ ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Ð¢Ð²ÑŠÑ€Ð´Ðµ Ð¼Ð°Ð»ÐºÐ¾: Ð¾Ñ‡Ð°ÐºÐ²Ð° ÑÐµ ${c.origin} Ð´Ð° ÑÑŠÐ´ÑŠÑ€Ð¶Ð° ${b}${c.minimum.toString()} ${d.unit}`;return`Ð¢Ð²ÑŠÑ€Ð´Ðµ Ð¼Ð°Ð»ÐºÐ¾: Ð¾Ñ‡Ð°ÐºÐ²Ð° ÑÐµ ${c.origin} Ð´Ð° Ð±ÑŠÐ´Ðµ ${b}${c.minimum.toString()}`}case"invalid_format":{if("starts_with"===c.format)return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð½Ð¸Ð·: Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ð·Ð°Ð¿Ð¾Ñ‡Ð²Ð° Ñ "${c.prefix}"`;if("ends_with"===c.format)return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð½Ð¸Ð·: Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ð·Ð°Ð²ÑŠÑ€ÑˆÐ²Ð° Ñ "${c.suffix}"`;if("includes"===c.format)return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð½Ð¸Ð·: Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ð²ÐºÐ»ÑŽÑ‡Ð²Ð° "${c.includes}"`;if("regex"===c.format)return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð½Ð¸Ð·: Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° ÑÑŠÐ²Ð¿Ð°Ð´Ð° Ñ ${c.pattern}`;let a="ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½";return"emoji"===c.format&&(a="ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð¾"),"datetime"===c.format&&(a="ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð¾"),"date"===c.format&&(a="ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð°"),"time"===c.format&&(a="ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð¾"),"duration"===c.format&&(a="ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð°"),`${a} ${b[c.format]??c.format}`}case"not_multiple_of":return`ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð¾ Ñ‡Ð¸ÑÐ»Ð¾: Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ð±ÑŠÐ´Ðµ ÐºÑ€Ð°Ñ‚Ð½Ð¾ Ð½Ð° ${c.divisor}`;case"unrecognized_keys":return`ÐÐµÑ€Ð°Ð·Ð¿Ð¾Ð·Ð½Ð°Ñ‚${c.keys.length>1?"Ð¸":""} ÐºÐ»ÑŽÑ‡${c.keys.length>1?"Ð¾Ð²Ðµ":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ ÐºÐ»ÑŽÑ‡ Ð² ${c.origin}`;case"invalid_union":return"ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð²Ñ…Ð¾Ð´";case"invalid_element":return`ÐÐµÐ²Ð°Ð»Ð¸Ð´Ð½Ð° ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚ Ð² ${c.origin}`;default:return`ÐÐµÐ²Ð°Ð»Ð¸Ð´ÐµÐ½ Ð²Ñ…Ð¾Ð´`}})}},"ca",0,function(){let a,b;return{localeError:(a={string:{unit:"carÃ cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}},b={regex:"entrada",email:"adreÃ§a electrÃ²nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adreÃ§a IPv4",ipv6:"adreÃ§a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"nÃºmero E.164",jwt:"JWT",template_literal:"entrada"},c=>{switch(c.code){case"invalid_type":return`Tipus inv\xe0lid: s'esperava ${c.expected}, s'ha rebut ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Valor inv\xe0lid: s'esperava ${b1(c.values[0])}`;return`Opci\xf3 inv\xe0lida: s'esperava una de ${bA(c.values," o ")}`;case"too_big":{let b=c.inclusive?"com a mÃ xim":"menys de",d=a[c.origin]??null;if(d)return`Massa gran: s'esperava que ${c.origin??"el valor"} contingu\xe9s ${b} ${c.maximum.toString()} ${d.unit??"elements"}`;return`Massa gran: s'esperava que ${c.origin??"el valor"} fos ${b} ${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?"com a mÃ­nim":"mÃ©s de",d=a[c.origin]??null;if(d)return`Massa petit: s'esperava que ${c.origin} contingu\xe9s ${b} ${c.minimum.toString()} ${d.unit}`;return`Massa petit: s'esperava que ${c.origin} fos ${b} ${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Format inv\xe0lid: ha de comen\xe7ar amb "${c.prefix}"`;if("ends_with"===c.format)return`Format inv\xe0lid: ha d'acabar amb "${c.suffix}"`;if("includes"===c.format)return`Format inv\xe0lid: ha d'incloure "${c.includes}"`;if("regex"===c.format)return`Format inv\xe0lid: ha de coincidir amb el patr\xf3 ${c.pattern}`;return`Format inv\xe0lid per a ${b[c.format]??c.format}`;case"not_multiple_of":return`N\xfamero inv\xe0lid: ha de ser m\xfaltiple de ${c.divisor}`;case"unrecognized_keys":return`Clau${c.keys.length>1?"s":""} no reconeguda${c.keys.length>1?"s":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`Clau inv\xe0lida a ${c.origin}`;case"invalid_union":return"Entrada invÃ lida";case"invalid_element":return`Element inv\xe0lid a ${c.origin}`;default:return`Entrada inv\xe0lida`}})}},"cs",0,function(){let a,b;return{localeError:(a={string:{unit:"znakÅ¯",verb:"mÃ­t"},file:{unit:"bajtÅ¯",verb:"mÃ­t"},array:{unit:"prvkÅ¯",verb:"mÃ­t"},set:{unit:"prvkÅ¯",verb:"mÃ­t"}},b={regex:"regulÃ¡rnÃ­ vÃ½raz",email:"e-mailovÃ¡ adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a Äas ve formÃ¡tu ISO",date:"datum ve formÃ¡tu ISO",time:"Äas ve formÃ¡tu ISO",duration:"doba trvÃ¡nÃ­ ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"Å™etÄ›zec zakÃ³dovanÃ½ ve formÃ¡tu base64",base64url:"Å™etÄ›zec zakÃ³dovanÃ½ ve formÃ¡tu base64url",json_string:"Å™etÄ›zec ve formÃ¡tu JSON",e164:"ÄÃ­slo E.164",jwt:"JWT",template_literal:"vstup"},c=>{switch(c.code){case"invalid_type":return`Neplatn\xfd vstup: oÄek\xe1v\xe1no ${c.expected}, obdrÅ¾eno ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"ÄÃ­slo";case"string":return"Å™etÄ›zec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":if(Array.isArray(a))return"pole";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Neplatn\xfd vstup: oÄek\xe1v\xe1no ${b1(c.values[0])}`;return`Neplatn\xe1 moÅ¾nost: oÄek\xe1v\xe1na jedna z hodnot ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Hodnota je pÅ™\xedliÅ¡ velk\xe1: ${c.origin??"hodnota"} mus\xed m\xedt ${b}${c.maximum.toString()} ${d.unit??"prvkÅ¯"}`;return`Hodnota je pÅ™\xedliÅ¡ velk\xe1: ${c.origin??"hodnota"} mus\xed b\xfdt ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Hodnota je pÅ™\xedliÅ¡ mal\xe1: ${c.origin??"hodnota"} mus\xed m\xedt ${b}${c.minimum.toString()} ${d.unit??"prvkÅ¯"}`;return`Hodnota je pÅ™\xedliÅ¡ mal\xe1: ${c.origin??"hodnota"} mus\xed b\xfdt ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Neplatn\xfd Å™etÄ›zec: mus\xed zaÄ\xednat na "${c.prefix}"`;if("ends_with"===c.format)return`Neplatn\xfd Å™etÄ›zec: mus\xed konÄit na "${c.suffix}"`;if("includes"===c.format)return`Neplatn\xfd Å™etÄ›zec: mus\xed obsahovat "${c.includes}"`;if("regex"===c.format)return`Neplatn\xfd Å™etÄ›zec: mus\xed odpov\xeddat vzoru ${c.pattern}`;return`Neplatn\xfd form\xe1t ${b[c.format]??c.format}`;case"not_multiple_of":return`Neplatn\xe9 Ä\xedslo: mus\xed b\xfdt n\xe1sobkem ${c.divisor}`;case"unrecognized_keys":return`Nezn\xe1m\xe9 kl\xedÄe: ${bA(c.keys,", ")}`;case"invalid_key":return`Neplatn\xfd kl\xedÄ v ${c.origin}`;case"invalid_union":return"NeplatnÃ½ vstup";case"invalid_element":return`Neplatn\xe1 hodnota v ${c.origin}`;default:return`Neplatn\xfd vstup`}})}},"da",0,function(){let a,b,c;return{localeError:(a={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},b={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"sÃ¦t",file:"fil"},c={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslÃ¦t",date:"ISO-dato",time:"ISO-klokkeslÃ¦t",duration:"ISO-varighed",ipv4:"IPv4-omrÃ¥de",ipv6:"IPv6-omrÃ¥de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},d=>{var e,f,g,h;switch(d.code){case"invalid_type":return`Ugyldigt input: forventede ${b[e=d.expected]??e}, fik ${b[f=(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"tal";case"object":if(Array.isArray(a))return"liste";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name;return"objekt"}return b})(d.input)]??f}`;case"invalid_value":if(1===d.values.length)return`Ugyldig v\xe6rdi: forventede ${b1(d.values[0])}`;return`Ugyldigt valg: forventede en af f\xf8lgende ${bA(d.values,"|")}`;case"too_big":{let c=d.inclusive?"<=":"<",e=a[d.origin]??null,f=b[g=d.origin]??g;if(e)return`For stor: forventede ${f??"value"} ${e.verb} ${c} ${d.maximum.toString()} ${e.unit??"elementer"}`;return`For stor: forventede ${f??"value"} havde ${c} ${d.maximum.toString()}`}case"too_small":{let c=d.inclusive?">=":">",e=a[d.origin]??null,f=b[h=d.origin]??h;if(e)return`For lille: forventede ${f} ${e.verb} ${c} ${d.minimum.toString()} ${e.unit}`;return`For lille: forventede ${f} havde ${c} ${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Ugyldig streng: skal starte med "${d.prefix}"`;if("ends_with"===d.format)return`Ugyldig streng: skal ende med "${d.suffix}"`;if("includes"===d.format)return`Ugyldig streng: skal indeholde "${d.includes}"`;if("regex"===d.format)return`Ugyldig streng: skal matche m\xf8nsteret ${d.pattern}`;return`Ugyldig ${c[d.format]??d.format}`;case"not_multiple_of":return`Ugyldigt tal: skal v\xe6re deleligt med ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"Ukendte nÃ¸gler":"Ukendt nÃ¸gle"}: ${bA(d.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8gle i ${d.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xe6rdi i ${d.origin}`;default:return"Ugyldigt input"}})}},"de",0,function(){let a,b;return{localeError:(a={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}},b={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},c=>{switch(c.code){case"invalid_type":return`Ung\xfcltige Eingabe: erwartet ${c.expected}, erhalten ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"Zahl";case"object":if(Array.isArray(a))return"Array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Ung\xfcltige Eingabe: erwartet ${b1(c.values[0])}`;return`Ung\xfcltige Option: erwartet eine von ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Zu gro\xdf: erwartet, dass ${c.origin??"Wert"} ${b}${c.maximum.toString()} ${d.unit??"Elemente"} hat`;return`Zu gro\xdf: erwartet, dass ${c.origin??"Wert"} ${b}${c.maximum.toString()} ist`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Zu klein: erwartet, dass ${c.origin} ${b}${c.minimum.toString()} ${d.unit} hat`;return`Zu klein: erwartet, dass ${c.origin} ${b}${c.minimum.toString()} ist`}case"invalid_format":if("starts_with"===c.format)return`Ung\xfcltiger String: muss mit "${c.prefix}" beginnen`;if("ends_with"===c.format)return`Ung\xfcltiger String: muss mit "${c.suffix}" enden`;if("includes"===c.format)return`Ung\xfcltiger String: muss "${c.includes}" enthalten`;if("regex"===c.format)return`Ung\xfcltiger String: muss dem Muster ${c.pattern} entsprechen`;return`Ung\xfcltig: ${b[c.format]??c.format}`;case"not_multiple_of":return`Ung\xfcltige Zahl: muss ein Vielfaches von ${c.divisor} sein`;case"unrecognized_keys":return`${c.keys.length>1?"Unbekannte SchlÃ¼ssel":"Unbekannter SchlÃ¼ssel"}: ${bA(c.keys,", ")}`;case"invalid_key":return`Ung\xfcltiger Schl\xfcssel in ${c.origin}`;case"invalid_union":return"UngÃ¼ltige Eingabe";case"invalid_element":return`Ung\xfcltiger Wert in ${c.origin}`;default:return`Ung\xfcltige Eingabe`}})}},"en",0,fz,"eo",0,function(){let a,b;return{localeError:(a={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}},b={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoÄio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daÅ­ro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},c=>{switch(c.code){case"invalid_type":return`Nevalida enigo: atendiÄis ${c.expected}, riceviÄis ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"nombro";case"object":if(Array.isArray(a))return"tabelo";if(null===a)return"senvalora";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Nevalida enigo: atendiÄis ${b1(c.values[0])}`;return`Nevalida opcio: atendiÄis unu el ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Tro granda: atendiÄis ke ${c.origin??"valoro"} havu ${b}${c.maximum.toString()} ${d.unit??"elementojn"}`;return`Tro granda: atendiÄis ke ${c.origin??"valoro"} havu ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Tro malgranda: atendiÄis ke ${c.origin} havu ${b}${c.minimum.toString()} ${d.unit}`;return`Tro malgranda: atendiÄis ke ${c.origin} estu ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Nevalida karaktraro: devas komenciÄi per "${c.prefix}"`;if("ends_with"===c.format)return`Nevalida karaktraro: devas finiÄi per "${c.suffix}"`;if("includes"===c.format)return`Nevalida karaktraro: devas inkluzivi "${c.includes}"`;if("regex"===c.format)return`Nevalida karaktraro: devas kongrui kun la modelo ${c.pattern}`;return`Nevalida ${b[c.format]??c.format}`;case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${c.divisor}`;case"unrecognized_keys":return`Nekonata${c.keys.length>1?"j":""} Ålosilo${c.keys.length>1?"j":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`Nevalida Ålosilo en ${c.origin}`;case"invalid_union":default:return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${c.origin}`}})}},"es",0,function(){return{localeError:(()=>{let a={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},b={string:"texto",number:"nÃºmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"nÃºmero grande",symbol:"sÃ­mbolo",undefined:"indefinido",null:"nulo",function:"funciÃ³n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraciÃ³n",union:"uniÃ³n",literal:"literal",promise:"promesa",void:"vacÃ­o",never:"nunca",unknown:"desconocido",any:"cualquiera"};function c(a){return b[a]??a}let d={regex:"entrada",email:"direcciÃ³n de correo electrÃ³nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraciÃ³n ISO",ipv4:"direcciÃ³n IPv4",ipv6:"direcciÃ³n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"nÃºmero E.164",jwt:"JWT",template_literal:"entrada"};return b=>{switch(b.code){case"invalid_type":return`Entrada inv\xe1lida: se esperaba ${c(b.expected)}, recibido ${c((a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype)return a.constructor.name;return"object"}return b})(b.input))}`;case"invalid_value":if(1===b.values.length)return`Entrada inv\xe1lida: se esperaba ${b1(b.values[0])}`;return`Opci\xf3n inv\xe1lida: se esperaba una de ${bA(b.values,"|")}`;case"too_big":{let d=b.inclusive?"<=":"<",e=a[b.origin]??null,f=c(b.origin);if(e)return`Demasiado grande: se esperaba que ${f??"valor"} tuviera ${d}${b.maximum.toString()} ${e.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${f??"valor"} fuera ${d}${b.maximum.toString()}`}case"too_small":{let d=b.inclusive?">=":">",e=a[b.origin]??null,f=c(b.origin);if(e)return`Demasiado peque\xf1o: se esperaba que ${f} tuviera ${d}${b.minimum.toString()} ${e.unit}`;return`Demasiado peque\xf1o: se esperaba que ${f} fuera ${d}${b.minimum.toString()}`}case"invalid_format":if("starts_with"===b.format)return`Cadena inv\xe1lida: debe comenzar con "${b.prefix}"`;if("ends_with"===b.format)return`Cadena inv\xe1lida: debe terminar en "${b.suffix}"`;if("includes"===b.format)return`Cadena inv\xe1lida: debe incluir "${b.includes}"`;if("regex"===b.format)return`Cadena inv\xe1lida: debe coincidir con el patr\xf3n ${b.pattern}`;return`Inv\xe1lido ${d[b.format]??b.format}`;case"not_multiple_of":return`N\xfamero inv\xe1lido: debe ser m\xfaltiplo de ${b.divisor}`;case"unrecognized_keys":return`Llave${b.keys.length>1?"s":""} desconocida${b.keys.length>1?"s":""}: ${bA(b.keys,", ")}`;case"invalid_key":return`Llave inv\xe1lida en ${c(b.origin)}`;case"invalid_union":return"Entrada invÃ¡lida";case"invalid_element":return`Valor inv\xe1lido en ${c(b.origin)}`;default:return`Entrada inv\xe1lida`}}})()}},"fa",0,function(){let a,b;return{localeError:(a={string:{unit:"Ú©Ø§Ø±Ø§Ú©ØªØ±",verb:"Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯"},file:{unit:"Ø¨Ø§ÛŒØª",verb:"Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯"},array:{unit:"Ø¢ÛŒØªÙ…",verb:"Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯"},set:{unit:"Ø¢ÛŒØªÙ…",verb:"Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯"}},b={regex:"ÙˆØ±ÙˆØ¯ÛŒ",email:"Ø¢Ø¯Ø±Ø³ Ø§ÛŒÙ…ÛŒÙ„",url:"URL",emoji:"Ø§ÛŒÙ…ÙˆØ¬ÛŒ",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ØªØ§Ø±ÛŒØ® Ùˆ Ø²Ù…Ø§Ù† Ø§ÛŒØ²Ùˆ",date:"ØªØ§Ø±ÛŒØ® Ø§ÛŒØ²Ùˆ",time:"Ø²Ù…Ø§Ù† Ø§ÛŒØ²Ùˆ",duration:"Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ø§ÛŒØ²Ùˆ",ipv4:"IPv4 Ø¢Ø¯Ø±Ø³",ipv6:"IPv6 Ø¢Ø¯Ø±Ø³",cidrv4:"IPv4 Ø¯Ø§Ù…Ù†Ù‡",cidrv6:"IPv6 Ø¯Ø§Ù…Ù†Ù‡",base64:"base64-encoded Ø±Ø´ØªÙ‡",base64url:"base64url-encoded Ø±Ø´ØªÙ‡",json_string:"JSON Ø±Ø´ØªÙ‡",e164:"E.164 Ø¹Ø¯Ø¯",jwt:"JWT",template_literal:"ÙˆØ±ÙˆØ¯ÛŒ"},c=>{switch(c.code){case"invalid_type":return`ÙˆØ±ÙˆØ¯ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ù…ÛŒâ€ŒØ¨Ø§ÛŒØ³Øª ${c.expected} Ù…ÛŒâ€ŒØ¨ÙˆØ¯ØŒ ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"Ø¹Ø¯Ø¯";case"object":if(Array.isArray(a))return"Ø¢Ø±Ø§ÛŒÙ‡";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)} Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯`;case"invalid_value":if(1===c.values.length)return`ÙˆØ±ÙˆØ¯ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ù…ÛŒâ€ŒØ¨Ø§ÛŒØ³Øª ${b1(c.values[0])} Ù…ÛŒâ€ŒØ¨ÙˆØ¯`;return`Ú¯Ø²ÛŒÙ†Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ù…ÛŒâ€ŒØ¨Ø§ÛŒØ³Øª ÛŒÚ©ÛŒ Ø§Ø² ${bA(c.values,"|")} Ù…ÛŒâ€ŒØ¨ÙˆØ¯`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Ø®ÛŒÙ„ÛŒ Ø¨Ø²Ø±Ú¯: ${c.origin??"Ù…Ù‚Ø¯Ø§Ø±"} Ø¨Ø§ÛŒØ¯ ${b}${c.maximum.toString()} ${d.unit??"Ø¹Ù†ØµØ±"} Ø¨Ø§Ø´Ø¯`;return`Ø®ÛŒÙ„ÛŒ Ø¨Ø²Ø±Ú¯: ${c.origin??"Ù…Ù‚Ø¯Ø§Ø±"} Ø¨Ø§ÛŒØ¯ ${b}${c.maximum.toString()} Ø¨Ø§Ø´Ø¯`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Ø®ÛŒÙ„ÛŒ Ú©ÙˆÚ†Ú©: ${c.origin} Ø¨Ø§ÛŒØ¯ ${b}${c.minimum.toString()} ${d.unit} Ø¨Ø§Ø´Ø¯`;return`Ø®ÛŒÙ„ÛŒ Ú©ÙˆÚ†Ú©: ${c.origin} Ø¨Ø§ÛŒØ¯ ${b}${c.minimum.toString()} Ø¨Ø§Ø´Ø¯`}case"invalid_format":if("starts_with"===c.format)return`Ø±Ø´ØªÙ‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ø¨Ø§ÛŒØ¯ Ø¨Ø§ "${c.prefix}" Ø´Ø±ÙˆØ¹ Ø´ÙˆØ¯`;if("ends_with"===c.format)return`Ø±Ø´ØªÙ‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ø¨Ø§ÛŒØ¯ Ø¨Ø§ "${c.suffix}" ØªÙ…Ø§Ù… Ø´ÙˆØ¯`;if("includes"===c.format)return`Ø±Ø´ØªÙ‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ø¨Ø§ÛŒØ¯ Ø´Ø§Ù…Ù„ "${c.includes}" Ø¨Ø§Ø´Ø¯`;if("regex"===c.format)return`Ø±Ø´ØªÙ‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ø¨Ø§ÛŒØ¯ Ø¨Ø§ Ø§Ù„Ú¯ÙˆÛŒ ${c.pattern} Ù…Ø·Ø§Ø¨Ù‚Øª Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯`;return`${b[c.format]??c.format} Ù†Ø§Ù…Ø¹ØªØ¨Ø±`;case"not_multiple_of":return`Ø¹Ø¯Ø¯ Ù†Ø§Ù…Ø¹ØªØ¨Ø±: Ø¨Ø§ÛŒØ¯ Ù…Ø¶Ø±Ø¨ ${c.divisor} Ø¨Ø§Ø´Ø¯`;case"unrecognized_keys":return`Ú©Ù„ÛŒØ¯${c.keys.length>1?"Ù‡Ø§ÛŒ":""} Ù†Ø§Ø´Ù†Ø§Ø³: ${bA(c.keys,", ")}`;case"invalid_key":return`Ú©Ù„ÛŒØ¯ Ù†Ø§Ø´Ù†Ø§Ø³ Ø¯Ø± ${c.origin}`;case"invalid_union":default:return`ÙˆØ±ÙˆØ¯ÛŒ Ù†Ø§Ù…Ø¹ØªØ¨Ø±`;case"invalid_element":return`Ù…Ù‚Ø¯Ø§Ø± Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø¯Ø± ${c.origin}`}})}},"fi",0,function(){let a,b;return{localeError:(a={string:{unit:"merkkiÃ¤",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"pÃ¤ivÃ¤mÃ¤Ã¤rÃ¤n"}},b={regex:"sÃ¤Ã¤nnÃ¶llinen lauseke",email:"sÃ¤hkÃ¶postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-pÃ¤ivÃ¤mÃ¤Ã¤rÃ¤",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},c=>{switch(c.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${c.expected}, oli ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Virheellinen sy\xf6te: t\xe4ytyy olla ${b1(c.values[0])}`;return`Virheellinen valinta: t\xe4ytyy olla yksi seuraavista: ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Liian suuri: ${d.subject} t\xe4ytyy olla ${b}${c.maximum.toString()} ${d.unit}`.trim();return`Liian suuri: arvon t\xe4ytyy olla ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Liian pieni: ${d.subject} t\xe4ytyy olla ${b}${c.minimum.toString()} ${d.unit}`.trim();return`Liian pieni: arvon t\xe4ytyy olla ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Virheellinen sy\xf6te: t\xe4ytyy alkaa "${c.prefix}"`;if("ends_with"===c.format)return`Virheellinen sy\xf6te: t\xe4ytyy loppua "${c.suffix}"`;if("includes"===c.format)return`Virheellinen sy\xf6te: t\xe4ytyy sis\xe4lt\xe4\xe4 "${c.includes}"`;if("regex"===c.format)return`Virheellinen sy\xf6te: t\xe4ytyy vastata s\xe4\xe4nn\xf6llist\xe4 lauseketta ${c.pattern}`;return`Virheellinen ${b[c.format]??c.format}`;case"not_multiple_of":return`Virheellinen luku: t\xe4ytyy olla luvun ${c.divisor} monikerta`;case"unrecognized_keys":return`${c.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${bA(c.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return`Virheellinen sy\xf6te`}})}},"fr",0,function(){let a,b;return{localeError:(a={string:{unit:"caractÃ¨res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"Ã©lÃ©ments",verb:"avoir"},set:{unit:"Ã©lÃ©ments",verb:"avoir"}},b={regex:"entrÃ©e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"durÃ©e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaÃ®ne encodÃ©e en base64",base64url:"chaÃ®ne encodÃ©e en base64url",json_string:"chaÃ®ne JSON",e164:"numÃ©ro E.164",jwt:"JWT",template_literal:"entrÃ©e"},c=>{switch(c.code){case"invalid_type":return`Entr\xe9e invalide : ${c.expected} attendu, ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"nombre";case"object":if(Array.isArray(a))return"tableau";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)} re\xe7u`;case"invalid_value":if(1===c.values.length)return`Entr\xe9e invalide : ${b1(c.values[0])} attendu`;return`Option invalide : une valeur parmi ${bA(c.values,"|")} attendue`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Trop grand : ${c.origin??"valeur"} doit ${d.verb} ${b}${c.maximum.toString()} ${d.unit??"Ã©lÃ©ment(s)"}`;return`Trop grand : ${c.origin??"valeur"} doit \xeatre ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Trop petit : ${c.origin} doit ${d.verb} ${b}${c.minimum.toString()} ${d.unit}`;return`Trop petit : ${c.origin} doit \xeatre ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Cha\xeene invalide : doit commencer par "${c.prefix}"`;if("ends_with"===c.format)return`Cha\xeene invalide : doit se terminer par "${c.suffix}"`;if("includes"===c.format)return`Cha\xeene invalide : doit inclure "${c.includes}"`;if("regex"===c.format)return`Cha\xeene invalide : doit correspondre au mod\xe8le ${c.pattern}`;return`${b[c.format]??c.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${c.divisor}`;case"unrecognized_keys":return`Cl\xe9${c.keys.length>1?"s":""} non reconnue${c.keys.length>1?"s":""} : ${bA(c.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${c.origin}`;case"invalid_union":return"EntrÃ©e invalide";case"invalid_element":return`Valeur invalide dans ${c.origin}`;default:return`Entr\xe9e invalide`}})}},"frCA",0,function(){let a,b;return{localeError:(a={string:{unit:"caractÃ¨res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"Ã©lÃ©ments",verb:"avoir"},set:{unit:"Ã©lÃ©ments",verb:"avoir"}},b={regex:"entrÃ©e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"durÃ©e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaÃ®ne encodÃ©e en base64",base64url:"chaÃ®ne encodÃ©e en base64url",json_string:"chaÃ®ne JSON",e164:"numÃ©ro E.164",jwt:"JWT",template_literal:"entrÃ©e"},c=>{switch(c.code){case"invalid_type":return`Entr\xe9e invalide : attendu ${c.expected}, re\xe7u ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Entr\xe9e invalide : attendu ${b1(c.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"â‰¤":"<",d=a[c.origin]??null;if(d)return`Trop grand : attendu que ${c.origin??"la valeur"} ait ${b}${c.maximum.toString()} ${d.unit}`;return`Trop grand : attendu que ${c.origin??"la valeur"} soit ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?"â‰¥":">",d=a[c.origin]??null;if(d)return`Trop petit : attendu que ${c.origin} ait ${b}${c.minimum.toString()} ${d.unit}`;return`Trop petit : attendu que ${c.origin} soit ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Cha\xeene invalide : doit commencer par "${c.prefix}"`;if("ends_with"===c.format)return`Cha\xeene invalide : doit se terminer par "${c.suffix}"`;if("includes"===c.format)return`Cha\xeene invalide : doit inclure "${c.includes}"`;if("regex"===c.format)return`Cha\xeene invalide : doit correspondre au motif ${c.pattern}`;return`${b[c.format]??c.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${c.divisor}`;case"unrecognized_keys":return`Cl\xe9${c.keys.length>1?"s":""} non reconnue${c.keys.length>1?"s":""} : ${bA(c.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${c.origin}`;case"invalid_union":return"EntrÃ©e invalide";case"invalid_element":return`Valeur invalide dans ${c.origin}`;default:return`Entr\xe9e invalide`}})}},"he",0,function(){let a,b,c,d,e,f,g,h;return{localeError:(a={string:{label:"×ž×—×¨×•×–×ª",gender:"f"},number:{label:"×ž×¡×¤×¨",gender:"m"},boolean:{label:"×¢×¨×š ×‘×•×œ×™×× ×™",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"×ª××¨×™×š",gender:"m"},array:{label:"×ž×¢×¨×š",gender:"m"},object:{label:"××•×‘×™×™×§×˜",gender:"m"},null:{label:"×¢×¨×š ×¨×™×§ (null)",gender:"m"},undefined:{label:"×¢×¨×š ×œ× ×ž×•×’×“×¨ (undefined)",gender:"m"},symbol:{label:"×¡×™×ž×‘×•×œ (Symbol)",gender:"m"},function:{label:"×¤×•× ×§×¦×™×”",gender:"f"},map:{label:"×ž×¤×” (Map)",gender:"f"},set:{label:"×§×‘×•×¦×” (Set)",gender:"f"},file:{label:"×§×•×‘×¥",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"×¢×¨×š ×œ× ×™×“×•×¢",gender:"m"},value:{label:"×¢×¨×š",gender:"m"}},b={string:{unit:"×ª×•×•×™×",shortLabel:"×§×¦×¨",longLabel:"××¨×•×š"},file:{unit:"×‘×™×™×˜×™×",shortLabel:"×§×˜×Ÿ",longLabel:"×’×“×•×œ"},array:{unit:"×¤×¨×™×˜×™×",shortLabel:"×§×˜×Ÿ",longLabel:"×’×“×•×œ"},set:{unit:"×¤×¨×™×˜×™×",shortLabel:"×§×˜×Ÿ",longLabel:"×’×“×•×œ"},number:{unit:"",shortLabel:"×§×˜×Ÿ",longLabel:"×’×“×•×œ"}},c=b=>b?a[b]:void 0,d=b=>{let d=c(b);return d?d.label:b??a.unknown.label},e=a=>`×”${d(a)}`,f=a=>{let b=c(a);return"f"===(b?.gender??"m")?"×¦×¨×™×›×” ×œ×”×™×•×ª":"×¦×¨×™×š ×œ×”×™×•×ª"},g=a=>a?b[a]??null:null,h={regex:{label:"×§×œ×˜",gender:"m"},email:{label:"×›×ª×•×‘×ª ××™×ž×™×™×œ",gender:"f"},url:{label:"×›×ª×•×‘×ª ×¨×©×ª",gender:"f"},emoji:{label:"××™×ž×•×’'×™",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"×ª××¨×™×š ×•×–×ž×Ÿ ISO",gender:"m"},date:{label:"×ª××¨×™×š ISO",gender:"m"},time:{label:"×–×ž×Ÿ ISO",gender:"m"},duration:{label:"×ž×©×š ×–×ž×Ÿ ISO",gender:"m"},ipv4:{label:"×›×ª×•×‘×ª IPv4",gender:"f"},ipv6:{label:"×›×ª×•×‘×ª IPv6",gender:"f"},cidrv4:{label:"×˜×•×•×— IPv4",gender:"m"},cidrv6:{label:"×˜×•×•×— IPv6",gender:"m"},base64:{label:"×ž×—×¨×•×–×ª ×‘×‘×¡×™×¡ 64",gender:"f"},base64url:{label:"×ž×—×¨×•×–×ª ×‘×‘×¡×™×¡ 64 ×œ×›×ª×•×‘×•×ª ×¨×©×ª",gender:"f"},json_string:{label:"×ž×—×¨×•×–×ª JSON",gender:"f"},e164:{label:"×ž×¡×¤×¨ E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"×§×œ×˜",gender:"m"},includes:{label:"×§×œ×˜",gender:"m"},lowercase:{label:"×§×œ×˜",gender:"m"},starts_with:{label:"×§×œ×˜",gender:"m"},uppercase:{label:"×§×œ×˜",gender:"m"}},b=>{switch(b.code){case"invalid_type":{let c=d(b.expected),e=(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name;return"object";default:return b}})(b.input),f=a[e]?.label??e;return`×§×œ×˜ ×œ× ×ª×§×™×Ÿ: ×¦×¨×™×š ×œ×”×™×•×ª ${c}, ×”×ª×§×‘×œ ${f}`}case"invalid_value":{if(1===b.values.length)return`×¢×¨×š ×œ× ×ª×§×™×Ÿ: ×”×¢×¨×š ×—×™×™×‘ ×œ×”×™×•×ª ${b1(b.values[0])}`;let a=b.values.map(a=>b1(a));if(2===b.values.length)return`×¢×¨×š ×œ× ×ª×§×™×Ÿ: ×”××¤×©×¨×•×™×•×ª ×”×ž×ª××™×ž×•×ª ×”×Ÿ ${a[0]} ××• ${a[1]}`;let c=a[a.length-1],d=a.slice(0,-1).join(", ");return`×¢×¨×š ×œ× ×ª×§×™×Ÿ: ×”××¤×©×¨×•×™×•×ª ×”×ž×ª××™×ž×•×ª ×”×Ÿ ${d} ××• ${c}`}case"too_big":{let a=g(b.origin),c=e(b.origin??"value");if("string"===b.origin)return`${a?.longLabel??"××¨×•×š"} ×ž×“×™: ${c} ×¦×¨×™×›×” ×œ×”×›×™×œ ${b.maximum.toString()} ${a?.unit??""} ${b.inclusive?"××• ×¤×—×•×ª":"×œ×›×œ ×”×™×•×ª×¨"}`.trim();if("number"===b.origin){let a=b.inclusive?`×§×˜×Ÿ ××• ×©×•×•×” ×œ-${b.maximum}`:`×§×˜×Ÿ ×ž-${b.maximum}`;return`×’×“×•×œ ×ž×“×™: ${c} ×¦×¨×™×š ×œ×”×™×•×ª ${a}`}if("array"===b.origin||"set"===b.origin){let d="set"===b.origin?"×¦×¨×™×›×”":"×¦×¨×™×š",e=b.inclusive?`${b.maximum} ${a?.unit??""} ××• ×¤×—×•×ª`:`×¤×—×•×ª ×ž-${b.maximum} ${a?.unit??""}`;return`×’×“×•×œ ×ž×“×™: ${c} ${d} ×œ×”×›×™×œ ${e}`.trim()}let d=b.inclusive?"<=":"<",h=f(b.origin??"value");if(a?.unit)return`${a.longLabel} ×ž×“×™: ${c} ${h} ${d}${b.maximum.toString()} ${a.unit}`;return`${a?.longLabel??"×’×“×•×œ"} ×ž×“×™: ${c} ${h} ${d}${b.maximum.toString()}`}case"too_small":{let a=g(b.origin),c=e(b.origin??"value");if("string"===b.origin)return`${a?.shortLabel??"×§×¦×¨"} ×ž×“×™: ${c} ×¦×¨×™×›×” ×œ×”×›×™×œ ${b.minimum.toString()} ${a?.unit??""} ${b.inclusive?"××• ×™×•×ª×¨":"×œ×¤×—×•×ª"}`.trim();if("number"===b.origin){let a=b.inclusive?`×’×“×•×œ ××• ×©×•×•×” ×œ-${b.minimum}`:`×’×“×•×œ ×ž-${b.minimum}`;return`×§×˜×Ÿ ×ž×“×™: ${c} ×¦×¨×™×š ×œ×”×™×•×ª ${a}`}if("array"===b.origin||"set"===b.origin){let d="set"===b.origin?"×¦×¨×™×›×”":"×¦×¨×™×š";if(1===b.minimum&&b.inclusive){let a=(b.origin,"×œ×¤×—×•×ª ×¤×¨×™×˜ ××—×“");return`×§×˜×Ÿ ×ž×“×™: ${c} ${d} ×œ×”×›×™×œ ${a}`}let e=b.inclusive?`${b.minimum} ${a?.unit??""} ××• ×™×•×ª×¨`:`×™×•×ª×¨ ×ž-${b.minimum} ${a?.unit??""}`;return`×§×˜×Ÿ ×ž×“×™: ${c} ${d} ×œ×”×›×™×œ ${e}`.trim()}let d=b.inclusive?">=":">",h=f(b.origin??"value");if(a?.unit)return`${a.shortLabel} ×ž×“×™: ${c} ${h} ${d}${b.minimum.toString()} ${a.unit}`;return`${a?.shortLabel??"×§×˜×Ÿ"} ×ž×“×™: ${c} ${h} ${d}${b.minimum.toString()}`}case"invalid_format":{if("starts_with"===b.format)return`×”×ž×—×¨×•×–×ª ×—×™×™×‘×ª ×œ×”×ª×—×™×œ ×‘ "${b.prefix}"`;if("ends_with"===b.format)return`×”×ž×—×¨×•×–×ª ×—×™×™×‘×ª ×œ×”×¡×ª×™×™× ×‘ "${b.suffix}"`;if("includes"===b.format)return`×”×ž×—×¨×•×–×ª ×—×™×™×‘×ª ×œ×›×œ×•×œ "${b.includes}"`;if("regex"===b.format)return`×”×ž×—×¨×•×–×ª ×—×™×™×‘×ª ×œ×”×ª××™× ×œ×ª×‘× ×™×ª ${b.pattern}`;let a=h[b.format],c=a?.label??b.format,d=a?.gender??"m";return`${c} ×œ× ${"f"===d?"×ª×§×™× ×”":"×ª×§×™×Ÿ"}`}case"not_multiple_of":return`×ž×¡×¤×¨ ×œ× ×ª×§×™×Ÿ: ×—×™×™×‘ ×œ×”×™×•×ª ×ž×›×¤×œ×” ×©×œ ${b.divisor}`;case"unrecognized_keys":return`×ž×¤×ª×—${b.keys.length>1?"×•×ª":""} ×œ× ×ž×–×•×”${b.keys.length>1?"×™×":"×”"}: ${bA(b.keys,", ")}`;case"invalid_key":return`×©×“×” ×œ× ×ª×§×™×Ÿ ×‘××•×‘×™×™×§×˜`;case"invalid_union":return"×§×œ×˜ ×œ× ×ª×§×™×Ÿ";case"invalid_element":{let a=e(b.origin??"array");return`×¢×¨×š ×œ× ×ª×§×™×Ÿ ×‘${a}`}default:return`×§×œ×˜ ×œ× ×ª×§×™×Ÿ`}})}},"hu",0,function(){let a,b;return{localeError:(a={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}},b={regex:"bemenet",email:"email cÃ­m",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO idÅ‘bÃ©lyeg",date:"ISO dÃ¡tum",time:"ISO idÅ‘",duration:"ISO idÅ‘intervallum",ipv4:"IPv4 cÃ­m",ipv6:"IPv6 cÃ­m",cidrv4:"IPv4 tartomÃ¡ny",cidrv6:"IPv6 tartomÃ¡ny",base64:"base64-kÃ³dolt string",base64url:"base64url-kÃ³dolt string",json_string:"JSON string",e164:"E.164 szÃ¡m",jwt:"JWT",template_literal:"bemenet"},c=>{switch(c.code){case"invalid_type":return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${c.expected}, a kapott \xe9rt\xe9k ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"szÃ¡m";case"object":if(Array.isArray(a))return"tÃ¶mb";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${b1(c.values[0])}`;return`\xc9rv\xe9nytelen opci\xf3: valamelyik \xe9rt\xe9k v\xe1rt ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`T\xfal nagy: ${c.origin??"Ã©rtÃ©k"} m\xe9rete t\xfal nagy ${b}${c.maximum.toString()} ${d.unit??"elem"}`;return`T\xfal nagy: a bemeneti \xe9rt\xe9k ${c.origin??"Ã©rtÃ©k"} t\xfal nagy: ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${c.origin} m\xe9rete t\xfal kicsi ${b}${c.minimum.toString()} ${d.unit}`;return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${c.origin} t\xfal kicsi ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`\xc9rv\xe9nytelen string: "${c.prefix}" \xe9rt\xe9kkel kell kezdÅ‘dnie`;if("ends_with"===c.format)return`\xc9rv\xe9nytelen string: "${c.suffix}" \xe9rt\xe9kkel kell v\xe9gzÅ‘dnie`;if("includes"===c.format)return`\xc9rv\xe9nytelen string: "${c.includes}" \xe9rt\xe9ket kell tartalmaznia`;if("regex"===c.format)return`\xc9rv\xe9nytelen string: ${c.pattern} mint\xe1nak kell megfelelnie`;return`\xc9rv\xe9nytelen ${b[c.format]??c.format}`;case"not_multiple_of":return`\xc9rv\xe9nytelen sz\xe1m: ${c.divisor} t\xf6bbsz\xf6r\xf6s\xe9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${c.keys.length>1?"s":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`\xc9rv\xe9nytelen kulcs ${c.origin}`;case"invalid_union":return"Ã‰rvÃ©nytelen bemenet";case"invalid_element":return`\xc9rv\xe9nytelen \xe9rt\xe9k: ${c.origin}`;default:return`\xc9rv\xe9nytelen bemenet`}})}},"id",0,function(){let a,b;return{localeError:(a={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}},b={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},c=>{switch(c.code){case"invalid_type":return`Input tidak valid: diharapkan ${c.expected}, diterima ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Input tidak valid: diharapkan ${b1(c.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Terlalu besar: diharapkan ${c.origin??"value"} memiliki ${b}${c.maximum.toString()} ${d.unit??"elemen"}`;return`Terlalu besar: diharapkan ${c.origin??"value"} menjadi ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Terlalu kecil: diharapkan ${c.origin} memiliki ${b}${c.minimum.toString()} ${d.unit}`;return`Terlalu kecil: diharapkan ${c.origin} menjadi ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`String tidak valid: harus dimulai dengan "${c.prefix}"`;if("ends_with"===c.format)return`String tidak valid: harus berakhir dengan "${c.suffix}"`;if("includes"===c.format)return`String tidak valid: harus menyertakan "${c.includes}"`;if("regex"===c.format)return`String tidak valid: harus sesuai pola ${c.pattern}`;return`${b[c.format]??c.format} tidak valid`;case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${c.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${c.keys.length>1?"s":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${c.origin}`;case"invalid_union":default:return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${c.origin}`}})}},"is",0,function(){let a,b;return{localeError:(a={string:{unit:"stafi",verb:"aÃ° hafa"},file:{unit:"bÃ¦ti",verb:"aÃ° hafa"},array:{unit:"hluti",verb:"aÃ° hafa"},set:{unit:"hluti",verb:"aÃ° hafa"}},b={regex:"gildi",email:"netfang",url:"vefslÃ³Ã°",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og tÃ­mi",date:"ISO dagsetning",time:"ISO tÃ­mi",duration:"ISO tÃ­malengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 tÃ¶lugildi",jwt:"JWT",template_literal:"gildi"},c=>{switch(c.code){case"invalid_type":return`Rangt gildi: \xde\xfa sl\xf3st inn ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"nÃºmer";case"object":if(Array.isArray(a))return"fylki";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)} \xfear sem \xe1 a\xf0 vera ${c.expected}`;case"invalid_value":if(1===c.values.length)return`Rangt gildi: gert r\xe1\xf0 fyrir ${b1(c.values[0])}`;return`\xd3gilt val: m\xe1 vera eitt af eftirfarandi ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${c.origin??"gildi"} hafi ${b}${c.maximum.toString()} ${d.unit??"hluti"}`;return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${c.origin??"gildi"} s\xe9 ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${c.origin} hafi ${b}${c.minimum.toString()} ${d.unit}`;return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${c.origin} s\xe9 ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 byrja \xe1 "${c.prefix}"`;if("ends_with"===c.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 enda \xe1 "${c.suffix}"`;if("includes"===c.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 innihalda "${c.includes}"`;if("regex"===c.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 fylgja mynstri ${c.pattern}`;return`Rangt ${b[c.format]??c.format}`;case"not_multiple_of":return`R\xf6ng tala: ver\xf0ur a\xf0 vera margfeldi af ${c.divisor}`;case"unrecognized_keys":return`\xd3\xfeekkt ${c.keys.length>1?"ir lyklar":"ur lykill"}: ${bA(c.keys,", ")}`;case"invalid_key":return`Rangur lykill \xed ${c.origin}`;case"invalid_union":default:return"Rangt gildi";case"invalid_element":return`Rangt gildi \xed ${c.origin}`}})}},"it",0,function(){let a,b;return{localeError:(a={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}},b={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},c=>{switch(c.code){case"invalid_type":return`Input non valido: atteso ${c.expected}, ricevuto ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"numero";case"object":if(Array.isArray(a))return"vettore";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Input non valido: atteso ${b1(c.values[0])}`;return`Opzione non valida: atteso uno tra ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Troppo grande: ${c.origin??"valore"} deve avere ${b}${c.maximum.toString()} ${d.unit??"elementi"}`;return`Troppo grande: ${c.origin??"valore"} deve essere ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Troppo piccolo: ${c.origin} deve avere ${b}${c.minimum.toString()} ${d.unit}`;return`Troppo piccolo: ${c.origin} deve essere ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Stringa non valida: deve iniziare con "${c.prefix}"`;if("ends_with"===c.format)return`Stringa non valida: deve terminare con "${c.suffix}"`;if("includes"===c.format)return`Stringa non valida: deve includere "${c.includes}"`;if("regex"===c.format)return`Stringa non valida: deve corrispondere al pattern ${c.pattern}`;return`Invalid ${b[c.format]??c.format}`;case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${c.divisor}`;case"unrecognized_keys":return`Chiav${c.keys.length>1?"i":"e"} non riconosciut${c.keys.length>1?"e":"a"}: ${bA(c.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${c.origin}`;case"invalid_union":default:return"Input non valido";case"invalid_element":return`Valore non valido in ${c.origin}`}})}},"ja",0,function(){let a,b;return{localeError:(a={string:{unit:"æ–‡å­—",verb:"ã§ã‚ã‚‹"},file:{unit:"ãƒã‚¤ãƒˆ",verb:"ã§ã‚ã‚‹"},array:{unit:"è¦ç´ ",verb:"ã§ã‚ã‚‹"},set:{unit:"è¦ç´ ",verb:"ã§ã‚ã‚‹"}},b={regex:"å…¥åŠ›å€¤",email:"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",url:"URL",emoji:"çµµæ–‡å­—",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISOæ—¥æ™‚",date:"ISOæ—¥ä»˜",time:"ISOæ™‚åˆ»",duration:"ISOæœŸé–“",ipv4:"IPv4ã‚¢ãƒ‰ãƒ¬ã‚¹",ipv6:"IPv6ã‚¢ãƒ‰ãƒ¬ã‚¹",cidrv4:"IPv4ç¯„å›²",cidrv6:"IPv6ç¯„å›²",base64:"base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰æ–‡å­—åˆ—",base64url:"base64urlã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰æ–‡å­—åˆ—",json_string:"JSONæ–‡å­—åˆ—",e164:"E.164ç•ªå·",jwt:"JWT",template_literal:"å…¥åŠ›å€¤"},c=>{switch(c.code){case"invalid_type":return`ç„¡åŠ¹ãªå…¥åŠ›: ${c.expected}ãŒæœŸå¾…ã•ã‚Œã¾ã—ãŸãŒã€${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"æ•°å€¤";case"object":if(Array.isArray(a))return"é…åˆ—";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}ãŒå…¥åŠ›ã•ã‚Œã¾ã—ãŸ`;case"invalid_value":if(1===c.values.length)return`ç„¡åŠ¹ãªå…¥åŠ›: ${b1(c.values[0])}ãŒæœŸå¾…ã•ã‚Œã¾ã—ãŸ`;return`ç„¡åŠ¹ãªé¸æŠž: ${bA(c.values,"ã€")}ã®ã„ãšã‚Œã‹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™`;case"too_big":{let b=c.inclusive?"ä»¥ä¸‹ã§ã‚ã‚‹":"ã‚ˆã‚Šå°ã•ã„",d=a[c.origin]??null;if(d)return`å¤§ãã™ãŽã‚‹å€¤: ${c.origin??"å€¤"}ã¯${c.maximum.toString()}${d.unit??"è¦ç´ "}${b}å¿…è¦ãŒã‚ã‚Šã¾ã™`;return`å¤§ãã™ãŽã‚‹å€¤: ${c.origin??"å€¤"}ã¯${c.maximum.toString()}${b}å¿…è¦ãŒã‚ã‚Šã¾ã™`}case"too_small":{let b=c.inclusive?"ä»¥ä¸Šã§ã‚ã‚‹":"ã‚ˆã‚Šå¤§ãã„",d=a[c.origin]??null;if(d)return`å°ã•ã™ãŽã‚‹å€¤: ${c.origin}ã¯${c.minimum.toString()}${d.unit}${b}å¿…è¦ãŒã‚ã‚Šã¾ã™`;return`å°ã•ã™ãŽã‚‹å€¤: ${c.origin}ã¯${c.minimum.toString()}${b}å¿…è¦ãŒã‚ã‚Šã¾ã™`}case"invalid_format":if("starts_with"===c.format)return`ç„¡åŠ¹ãªæ–‡å­—åˆ—: "${c.prefix}"ã§å§‹ã¾ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™`;if("ends_with"===c.format)return`ç„¡åŠ¹ãªæ–‡å­—åˆ—: "${c.suffix}"ã§çµ‚ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™`;if("includes"===c.format)return`ç„¡åŠ¹ãªæ–‡å­—åˆ—: "${c.includes}"ã‚’å«ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™`;if("regex"===c.format)return`ç„¡åŠ¹ãªæ–‡å­—åˆ—: ãƒ‘ã‚¿ãƒ¼ãƒ³${c.pattern}ã«ä¸€è‡´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™`;return`ç„¡åŠ¹ãª${b[c.format]??c.format}`;case"not_multiple_of":return`ç„¡åŠ¹ãªæ•°å€¤: ${c.divisor}ã®å€æ•°ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™`;case"unrecognized_keys":return`èªè­˜ã•ã‚Œã¦ã„ãªã„ã‚­ãƒ¼${c.keys.length>1?"ç¾¤":""}: ${bA(c.keys,"ã€")}`;case"invalid_key":return`${c.origin}å†…ã®ç„¡åŠ¹ãªã‚­ãƒ¼`;case"invalid_union":return"ç„¡åŠ¹ãªå…¥åŠ›";case"invalid_element":return`${c.origin}å†…ã®ç„¡åŠ¹ãªå€¤`;default:return`ç„¡åŠ¹ãªå…¥åŠ›`}})}},"ka",0,function(){let a,b;return{localeError:(a={string:{unit:"áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒ",verb:"áƒ£áƒœáƒ“áƒ áƒ¨áƒ”áƒ˜áƒªáƒáƒ•áƒ“áƒ”áƒ¡"},file:{unit:"áƒ‘áƒáƒ˜áƒ¢áƒ˜",verb:"áƒ£áƒœáƒ“áƒ áƒ¨áƒ”áƒ˜áƒªáƒáƒ•áƒ“áƒ”áƒ¡"},array:{unit:"áƒ”áƒšáƒ”áƒ›áƒ”áƒœáƒ¢áƒ˜",verb:"áƒ£áƒœáƒ“áƒ áƒ¨áƒ”áƒ˜áƒªáƒáƒ•áƒ“áƒ”áƒ¡"},set:{unit:"áƒ”áƒšáƒ”áƒ›áƒ”áƒœáƒ¢áƒ˜",verb:"áƒ£áƒœáƒ“áƒ áƒ¨áƒ”áƒ˜áƒªáƒáƒ•áƒ“áƒ”áƒ¡"}},b={regex:"áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ",email:"áƒ”áƒš-áƒ¤áƒáƒ¡áƒ¢áƒ˜áƒ¡ áƒ›áƒ˜áƒ¡áƒáƒ›áƒáƒ áƒ—áƒ˜",url:"URL",emoji:"áƒ”áƒ›áƒáƒ¯áƒ˜",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"áƒ—áƒáƒ áƒ˜áƒ¦áƒ˜-áƒ“áƒ áƒ",date:"áƒ—áƒáƒ áƒ˜áƒ¦áƒ˜",time:"áƒ“áƒ áƒ",duration:"áƒ®áƒáƒœáƒ’áƒ áƒ«áƒšáƒ˜áƒ•áƒáƒ‘áƒ",ipv4:"IPv4 áƒ›áƒ˜áƒ¡áƒáƒ›áƒáƒ áƒ—áƒ˜",ipv6:"IPv6 áƒ›áƒ˜áƒ¡áƒáƒ›áƒáƒ áƒ—áƒ˜",cidrv4:"IPv4 áƒ“áƒ˜áƒáƒžáƒáƒ–áƒáƒœáƒ˜",cidrv6:"IPv6 áƒ“áƒ˜áƒáƒžáƒáƒ–áƒáƒœáƒ˜",base64:"base64-áƒ™áƒáƒ“áƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜",base64url:"base64url-áƒ™áƒáƒ“áƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜",json_string:"JSON áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜",e164:"E.164 áƒœáƒáƒ›áƒ”áƒ áƒ˜",jwt:"JWT",template_literal:"áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ"},c=>{switch(c.code){case"invalid_type":return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ: áƒ›áƒáƒ¡áƒáƒšáƒáƒ“áƒœáƒ”áƒšáƒ˜ ${c.expected}, áƒ›áƒ˜áƒ¦áƒ”áƒ‘áƒ£áƒšáƒ˜ ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"áƒ áƒ˜áƒªáƒ®áƒ•áƒ˜";case"object":if(Array.isArray(a))return"áƒ›áƒáƒ¡áƒ˜áƒ•áƒ˜";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return({string:"áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜",boolean:"áƒ‘áƒ£áƒšáƒ”áƒáƒœáƒ˜",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ"})[b]??b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ: áƒ›áƒáƒ¡áƒáƒšáƒáƒ“áƒœáƒ”áƒšáƒ˜ ${b1(c.values[0])}`;return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ•áƒáƒ áƒ˜áƒáƒœáƒ¢áƒ˜: áƒ›áƒáƒ¡áƒáƒšáƒáƒ“áƒœáƒ”áƒšáƒ˜áƒ áƒ”áƒ áƒ—-áƒ”áƒ áƒ—áƒ˜ ${bA(c.values,"|")}-áƒ“áƒáƒœ`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`áƒ–áƒ”áƒ“áƒ›áƒ”áƒ¢áƒáƒ“ áƒ“áƒ˜áƒ“áƒ˜: áƒ›áƒáƒ¡áƒáƒšáƒáƒ“áƒœáƒ”áƒšáƒ˜ ${c.origin??"áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ"} ${d.verb} ${b}${c.maximum.toString()} ${d.unit}`;return`áƒ–áƒ”áƒ“áƒ›áƒ”áƒ¢áƒáƒ“ áƒ“áƒ˜áƒ“áƒ˜: áƒ›áƒáƒ¡áƒáƒšáƒáƒ“áƒœáƒ”áƒšáƒ˜ ${c.origin??"áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ"} áƒ˜áƒ§áƒáƒ¡ ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`áƒ–áƒ”áƒ“áƒ›áƒ”áƒ¢áƒáƒ“ áƒžáƒáƒ¢áƒáƒ áƒ: áƒ›áƒáƒ¡áƒáƒšáƒáƒ“áƒœáƒ”áƒšáƒ˜ ${c.origin} ${d.verb} ${b}${c.minimum.toString()} ${d.unit}`;return`áƒ–áƒ”áƒ“áƒ›áƒ”áƒ¢áƒáƒ“ áƒžáƒáƒ¢áƒáƒ áƒ: áƒ›áƒáƒ¡áƒáƒšáƒáƒ“áƒœáƒ”áƒšáƒ˜ ${c.origin} áƒ˜áƒ§áƒáƒ¡ ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜: áƒ£áƒœáƒ“áƒ áƒ˜áƒ¬áƒ§áƒ”áƒ‘áƒáƒ“áƒ”áƒ¡ "${c.prefix}"-áƒ˜áƒ—`;if("ends_with"===c.format)return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜: áƒ£áƒœáƒ“áƒ áƒ›áƒ—áƒáƒ•áƒ áƒ“áƒ”áƒ‘áƒáƒ“áƒ”áƒ¡ "${c.suffix}"-áƒ˜áƒ—`;if("includes"===c.format)return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜: áƒ£áƒœáƒ“áƒ áƒ¨áƒ”áƒ˜áƒªáƒáƒ•áƒ“áƒ”áƒ¡ "${c.includes}"-áƒ¡`;if("regex"===c.format)return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¡áƒ¢áƒ áƒ˜áƒœáƒ’áƒ˜: áƒ£áƒœáƒ“áƒ áƒ¨áƒ”áƒ”áƒ¡áƒáƒ‘áƒáƒ›áƒ”áƒ‘áƒáƒ“áƒ”áƒ¡ áƒ¨áƒáƒ‘áƒšáƒáƒœáƒ¡ ${c.pattern}`;return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ ${b[c.format]??c.format}`;case"not_multiple_of":return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ áƒ˜áƒªáƒ®áƒ•áƒ˜: áƒ£áƒœáƒ“áƒ áƒ˜áƒ§áƒáƒ¡ ${c.divisor}-áƒ˜áƒ¡ áƒ¯áƒ”áƒ áƒáƒ“áƒ˜`;case"unrecognized_keys":return`áƒ£áƒªáƒœáƒáƒ‘áƒ˜ áƒ’áƒáƒ¡áƒáƒ¦áƒ”áƒ‘${c.keys.length>1?"áƒ”áƒ‘áƒ˜":"áƒ˜"}: ${bA(c.keys,", ")}`;case"invalid_key":return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ’áƒáƒ¡áƒáƒ¦áƒ”áƒ‘áƒ˜ ${c.origin}-áƒ¨áƒ˜`;case"invalid_union":return"áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ";case"invalid_element":return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ ${c.origin}-áƒ¨áƒ˜`;default:return`áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ`}})}},"kh",0,function(){return fA()},"km",0,fA,"ko",0,function(){let a,b;return{localeError:(a={string:{unit:"ë¬¸ìž",verb:"to have"},file:{unit:"ë°”ì´íŠ¸",verb:"to have"},array:{unit:"ê°œ",verb:"to have"},set:{unit:"ê°œ",verb:"to have"}},b={regex:"ìž…ë ¥",email:"ì´ë©”ì¼ ì£¼ì†Œ",url:"URL",emoji:"ì´ëª¨ì§€",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ë‚ ì§œì‹œê°„",date:"ISO ë‚ ì§œ",time:"ISO ì‹œê°„",duration:"ISO ê¸°ê°„",ipv4:"IPv4 ì£¼ì†Œ",ipv6:"IPv6 ì£¼ì†Œ",cidrv4:"IPv4 ë²”ìœ„",cidrv6:"IPv6 ë²”ìœ„",base64:"base64 ì¸ì½”ë”© ë¬¸ìžì—´",base64url:"base64url ì¸ì½”ë”© ë¬¸ìžì—´",json_string:"JSON ë¬¸ìžì—´",e164:"E.164 ë²ˆí˜¸",jwt:"JWT",template_literal:"ìž…ë ¥"},c=>{switch(c.code){case"invalid_type":return`ìž˜ëª»ëœ ìž…ë ¥: ì˜ˆìƒ íƒ€ìž…ì€ ${c.expected}, ë°›ì€ íƒ€ìž…ì€ ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}ìž…ë‹ˆë‹¤`;case"invalid_value":if(1===c.values.length)return`ìž˜ëª»ëœ ìž…ë ¥: ê°’ì€ ${b1(c.values[0])} ì´ì–´ì•¼ í•©ë‹ˆë‹¤`;return`ìž˜ëª»ëœ ì˜µì…˜: ${bA(c.values,"ë˜ëŠ” ")} ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤`;case"too_big":{let b=c.inclusive?"ì´í•˜":"ë¯¸ë§Œ",d="ë¯¸ë§Œ"===b?"ì´ì–´ì•¼ í•©ë‹ˆë‹¤":"ì—¬ì•¼ í•©ë‹ˆë‹¤",e=a[c.origin]??null,f=e?.unit??"ìš”ì†Œ";if(e)return`${c.origin??"ê°’"}ì´ ë„ˆë¬´ í½ë‹ˆë‹¤: ${c.maximum.toString()}${f} ${b}${d}`;return`${c.origin??"ê°’"}ì´ ë„ˆë¬´ í½ë‹ˆë‹¤: ${c.maximum.toString()} ${b}${d}`}case"too_small":{let b=c.inclusive?"ì´ìƒ":"ì´ˆê³¼",d="ì´ìƒ"===b?"ì´ì–´ì•¼ í•©ë‹ˆë‹¤":"ì—¬ì•¼ í•©ë‹ˆë‹¤",e=a[c.origin]??null,f=e?.unit??"ìš”ì†Œ";if(e)return`${c.origin??"ê°’"}ì´ ë„ˆë¬´ ìž‘ìŠµë‹ˆë‹¤: ${c.minimum.toString()}${f} ${b}${d}`;return`${c.origin??"ê°’"}ì´ ë„ˆë¬´ ìž‘ìŠµë‹ˆë‹¤: ${c.minimum.toString()} ${b}${d}`}case"invalid_format":if("starts_with"===c.format)return`ìž˜ëª»ëœ ë¬¸ìžì—´: "${c.prefix}"(ìœ¼)ë¡œ ì‹œìž‘í•´ì•¼ í•©ë‹ˆë‹¤`;if("ends_with"===c.format)return`ìž˜ëª»ëœ ë¬¸ìžì—´: "${c.suffix}"(ìœ¼)ë¡œ ëë‚˜ì•¼ í•©ë‹ˆë‹¤`;if("includes"===c.format)return`ìž˜ëª»ëœ ë¬¸ìžì—´: "${c.includes}"ì„(ë¥¼) í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤`;if("regex"===c.format)return`ìž˜ëª»ëœ ë¬¸ìžì—´: ì •ê·œì‹ ${c.pattern} íŒ¨í„´ê³¼ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤`;return`ìž˜ëª»ëœ ${b[c.format]??c.format}`;case"not_multiple_of":return`ìž˜ëª»ëœ ìˆ«ìž: ${c.divisor}ì˜ ë°°ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤`;case"unrecognized_keys":return`ì¸ì‹í•  ìˆ˜ ì—†ëŠ” í‚¤: ${bA(c.keys,", ")}`;case"invalid_key":return`ìž˜ëª»ëœ í‚¤: ${c.origin}`;case"invalid_union":default:return`ìž˜ëª»ëœ ìž…ë ¥`;case"invalid_element":return`ìž˜ëª»ëœ ê°’: ${c.origin}`}})}},"lt",0,function(){return{localeError:(()=>{let a={string:{unit:{one:"simbolis",few:"simboliai",many:"simboliÅ³"},verb:{smaller:{inclusive:"turi bÅ«ti ne ilgesnÄ— kaip",notInclusive:"turi bÅ«ti trumpesnÄ— kaip"},bigger:{inclusive:"turi bÅ«ti ne trumpesnÄ— kaip",notInclusive:"turi bÅ«ti ilgesnÄ— kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"baitÅ³"},verb:{smaller:{inclusive:"turi bÅ«ti ne didesnis kaip",notInclusive:"turi bÅ«ti maÅ¾esnis kaip"},bigger:{inclusive:"turi bÅ«ti ne maÅ¾esnis kaip",notInclusive:"turi bÅ«ti didesnis kaip"}}},array:{unit:{one:"elementÄ…",few:"elementus",many:"elementÅ³"},verb:{smaller:{inclusive:"turi turÄ—ti ne daugiau kaip",notInclusive:"turi turÄ—ti maÅ¾iau kaip"},bigger:{inclusive:"turi turÄ—ti ne maÅ¾iau kaip",notInclusive:"turi turÄ—ti daugiau kaip"}}},set:{unit:{one:"elementÄ…",few:"elementus",many:"elementÅ³"},verb:{smaller:{inclusive:"turi turÄ—ti ne daugiau kaip",notInclusive:"turi turÄ—ti maÅ¾iau kaip"},bigger:{inclusive:"turi turÄ—ti ne maÅ¾iau kaip",notInclusive:"turi turÄ—ti daugiau kaip"}}}};function b(b,c,d,e){let f=a[b]??null;return null===f?f:{unit:f.unit[c],verb:f.verb[e][d?"inclusive":"notInclusive"]}}let c={regex:"Ä¯vestis",email:"el. paÅ¡to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukmÄ—",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 uÅ¾koduota eilutÄ—",base64url:"base64url uÅ¾koduota eilutÄ—",json_string:"JSON eilutÄ—",e164:"E.164 numeris",jwt:"JWT",template_literal:"Ä¯vestis"};return a=>{switch(a.code){case"invalid_type":var d;return`Gautas tipas ${fB(typeof(d=a.input),d)}, o tikÄ—tasi - ${fB(a.expected)}`;case"invalid_value":if(1===a.values.length)return`Privalo bÅ«ti ${b1(a.values[0])}`;return`Privalo bÅ«ti vienas iÅ¡ ${bA(a.values,"|")} pasirinkimÅ³`;case"too_big":{let c=fB(a.origin),d=b(a.origin,fD(Number(a.maximum)),a.inclusive??!1,"smaller");if(d?.verb)return`${fC(c??a.origin??"reikÅ¡mÄ—")} ${d.verb} ${a.maximum.toString()} ${d.unit??"elementÅ³"}`;let e=a.inclusive?"ne didesnis kaip":"maÅ¾esnis kaip";return`${fC(c??a.origin??"reikÅ¡mÄ—")} turi bÅ«ti ${e} ${a.maximum.toString()} ${d?.unit}`}case"too_small":{let c=fB(a.origin),d=b(a.origin,fD(Number(a.minimum)),a.inclusive??!1,"bigger");if(d?.verb)return`${fC(c??a.origin??"reikÅ¡mÄ—")} ${d.verb} ${a.minimum.toString()} ${d.unit??"elementÅ³"}`;let e=a.inclusive?"ne maÅ¾esnis kaip":"didesnis kaip";return`${fC(c??a.origin??"reikÅ¡mÄ—")} turi bÅ«ti ${e} ${a.minimum.toString()} ${d?.unit}`}case"invalid_format":if("starts_with"===a.format)return`EilutÄ— privalo prasidÄ—ti "${a.prefix}"`;if("ends_with"===a.format)return`EilutÄ— privalo pasibaigti "${a.suffix}"`;if("includes"===a.format)return`EilutÄ— privalo Ä¯traukti "${a.includes}"`;if("regex"===a.format)return`EilutÄ— privalo atitikti ${a.pattern}`;return`Neteisingas ${c[a.format]??a.format}`;case"not_multiple_of":return`SkaiÄius privalo bÅ«ti ${a.divisor} kartotinis.`;case"unrecognized_keys":return`NeatpaÅ¾int${a.keys.length>1?"i":"as"} rakt${a.keys.length>1?"ai":"as"}: ${bA(a.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":default:return"Klaidinga Ä¯vestis";case"invalid_element":{let b=fB(a.origin);return`${fC(b??a.origin??"reikÅ¡mÄ—")} turi klaidingÄ… Ä¯vestÄ¯`}}}})()}},"mk",0,function(){let a,b;return{localeError:(a={string:{unit:"Ð·Ð½Ð°Ñ†Ð¸",verb:"Ð´Ð° Ð¸Ð¼Ð°Ð°Ñ‚"},file:{unit:"Ð±Ð°Ñ˜Ñ‚Ð¸",verb:"Ð´Ð° Ð¸Ð¼Ð°Ð°Ñ‚"},array:{unit:"ÑÑ‚Ð°Ð²ÐºÐ¸",verb:"Ð´Ð° Ð¸Ð¼Ð°Ð°Ñ‚"},set:{unit:"ÑÑ‚Ð°Ð²ÐºÐ¸",verb:"Ð´Ð° Ð¸Ð¼Ð°Ð°Ñ‚"}},b={regex:"Ð²Ð½ÐµÑ",email:"Ð°Ð´Ñ€ÐµÑÐ° Ð½Ð° Ðµ-Ð¿Ð¾ÑˆÑ‚Ð°",url:"URL",emoji:"ÐµÐ¼Ð¾ÑŸÐ¸",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO Ð´Ð°Ñ‚ÑƒÐ¼ Ð¸ Ð²Ñ€ÐµÐ¼Ðµ",date:"ISO Ð´Ð°Ñ‚ÑƒÐ¼",time:"ISO Ð²Ñ€ÐµÐ¼Ðµ",duration:"ISO Ð²Ñ€ÐµÐ¼ÐµÑ‚Ñ€Ð°ÐµÑšÐµ",ipv4:"IPv4 Ð°Ð´Ñ€ÐµÑÐ°",ipv6:"IPv6 Ð°Ð´Ñ€ÐµÑÐ°",cidrv4:"IPv4 Ð¾Ð¿ÑÐµÐ³",cidrv6:"IPv6 Ð¾Ð¿ÑÐµÐ³",base64:"base64-ÐµÐ½ÐºÐ¾Ð´Ð¸Ñ€Ð°Ð½Ð° Ð½Ð¸Ð·Ð°",base64url:"base64url-ÐµÐ½ÐºÐ¾Ð´Ð¸Ñ€Ð°Ð½Ð° Ð½Ð¸Ð·Ð°",json_string:"JSON Ð½Ð¸Ð·Ð°",e164:"E.164 Ð±Ñ€Ð¾Ñ˜",jwt:"JWT",template_literal:"Ð²Ð½ÐµÑ"},c=>{switch(c.code){case"invalid_type":return`Ð“Ñ€ÐµÑˆÐµÐ½ Ð²Ð½ÐµÑ: ÑÐµ Ð¾Ñ‡ÐµÐºÑƒÐ²Ð° ${c.expected}, Ð¿Ñ€Ð¸Ð¼ÐµÐ½Ð¾ ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"Ð±Ñ€Ð¾Ñ˜";case"object":if(Array.isArray(a))return"Ð½Ð¸Ð·Ð°";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Invalid input: expected ${b1(c.values[0])}`;return`Ð“Ñ€ÐµÑˆÐ°Ð½Ð° Ð¾Ð¿Ñ†Ð¸Ñ˜Ð°: ÑÐµ Ð¾Ñ‡ÐµÐºÑƒÐ²Ð° ÐµÐ´Ð½Ð° ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`ÐŸÑ€ÐµÐ¼Ð½Ð¾Ð³Ñƒ Ð³Ð¾Ð»ÐµÐ¼: ÑÐµ Ð¾Ñ‡ÐµÐºÑƒÐ²Ð° ${c.origin??"Ð²Ñ€ÐµÐ´Ð½Ð¾ÑÑ‚Ð°"} Ð´Ð° Ð¸Ð¼Ð° ${b}${c.maximum.toString()} ${d.unit??"ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¸"}`;return`ÐŸÑ€ÐµÐ¼Ð½Ð¾Ð³Ñƒ Ð³Ð¾Ð»ÐµÐ¼: ÑÐµ Ð¾Ñ‡ÐµÐºÑƒÐ²Ð° ${c.origin??"Ð²Ñ€ÐµÐ´Ð½Ð¾ÑÑ‚Ð°"} Ð´Ð° Ð±Ð¸Ð´Ðµ ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`ÐŸÑ€ÐµÐ¼Ð½Ð¾Ð³Ñƒ Ð¼Ð°Ð»: ÑÐµ Ð¾Ñ‡ÐµÐºÑƒÐ²Ð° ${c.origin} Ð´Ð° Ð¸Ð¼Ð° ${b}${c.minimum.toString()} ${d.unit}`;return`ÐŸÑ€ÐµÐ¼Ð½Ð¾Ð³Ñƒ Ð¼Ð°Ð»: ÑÐµ Ð¾Ñ‡ÐµÐºÑƒÐ²Ð° ${c.origin} Ð´Ð° Ð±Ð¸Ð´Ðµ ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`ÐÐµÐ²Ð°Ð¶ÐµÑ‡ÐºÐ° Ð½Ð¸Ð·Ð°: Ð¼Ð¾Ñ€Ð° Ð´Ð° Ð·Ð°Ð¿Ð¾Ñ‡Ð½ÑƒÐ²Ð° ÑÐ¾ "${c.prefix}"`;if("ends_with"===c.format)return`ÐÐµÐ²Ð°Ð¶ÐµÑ‡ÐºÐ° Ð½Ð¸Ð·Ð°: Ð¼Ð¾Ñ€Ð° Ð´Ð° Ð·Ð°Ð²Ñ€ÑˆÑƒÐ²Ð° ÑÐ¾ "${c.suffix}"`;if("includes"===c.format)return`ÐÐµÐ²Ð°Ð¶ÐµÑ‡ÐºÐ° Ð½Ð¸Ð·Ð°: Ð¼Ð¾Ñ€Ð° Ð´Ð° Ð²ÐºÐ»ÑƒÑ‡ÑƒÐ²Ð° "${c.includes}"`;if("regex"===c.format)return`ÐÐµÐ²Ð°Ð¶ÐµÑ‡ÐºÐ° Ð½Ð¸Ð·Ð°: Ð¼Ð¾Ñ€Ð° Ð´Ð° Ð¾Ð´Ð³Ð¾Ð°Ñ€Ð° Ð½Ð° Ð¿Ð°Ñ‚ÐµÑ€Ð½Ð¾Ñ‚ ${c.pattern}`;return`Invalid ${b[c.format]??c.format}`;case"not_multiple_of":return`Ð“Ñ€ÐµÑˆÐµÐ½ Ð±Ñ€Ð¾Ñ˜: Ð¼Ð¾Ñ€Ð° Ð´Ð° Ð±Ð¸Ð´Ðµ Ð´ÐµÐ»Ð¸Ð² ÑÐ¾ ${c.divisor}`;case"unrecognized_keys":return`${c.keys.length>1?"ÐÐµÐ¿Ñ€ÐµÐ¿Ð¾Ð·Ð½Ð°ÐµÐ½Ð¸ ÐºÐ»ÑƒÑ‡ÐµÐ²Ð¸":"ÐÐµÐ¿Ñ€ÐµÐ¿Ð¾Ð·Ð½Ð°ÐµÐ½ ÐºÐ»ÑƒÑ‡"}: ${bA(c.keys,", ")}`;case"invalid_key":return`Ð“Ñ€ÐµÑˆÐµÐ½ ÐºÐ»ÑƒÑ‡ Ð²Ð¾ ${c.origin}`;case"invalid_union":return"Ð“Ñ€ÐµÑˆÐµÐ½ Ð²Ð½ÐµÑ";case"invalid_element":return`Ð“Ñ€ÐµÑˆÐ½Ð° Ð²Ñ€ÐµÐ´Ð½Ð¾ÑÑ‚ Ð²Ð¾ ${c.origin}`;default:return`Ð“Ñ€ÐµÑˆÐµÐ½ Ð²Ð½ÐµÑ`}})}},"ms",0,function(){let a,b;return{localeError:(a={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}},b={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},c=>{switch(c.code){case"invalid_type":return`Input tidak sah: dijangka ${c.expected}, diterima ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"nombor";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Input tidak sah: dijangka ${b1(c.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Terlalu besar: dijangka ${c.origin??"nilai"} ${d.verb} ${b}${c.maximum.toString()} ${d.unit??"elemen"}`;return`Terlalu besar: dijangka ${c.origin??"nilai"} adalah ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Terlalu kecil: dijangka ${c.origin} ${d.verb} ${b}${c.minimum.toString()} ${d.unit}`;return`Terlalu kecil: dijangka ${c.origin} adalah ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`String tidak sah: mesti bermula dengan "${c.prefix}"`;if("ends_with"===c.format)return`String tidak sah: mesti berakhir dengan "${c.suffix}"`;if("includes"===c.format)return`String tidak sah: mesti mengandungi "${c.includes}"`;if("regex"===c.format)return`String tidak sah: mesti sepadan dengan corak ${c.pattern}`;return`${b[c.format]??c.format} tidak sah`;case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${c.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${bA(c.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${c.origin}`;case"invalid_union":default:return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${c.origin}`}})}},"nl",0,function(){let a,b;return{localeError:(a={string:{unit:"tekens",verb:"te hebben"},file:{unit:"bytes",verb:"te hebben"},array:{unit:"elementen",verb:"te hebben"},set:{unit:"elementen",verb:"te hebben"}},b={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},c=>{switch(c.code){case"invalid_type":return`Ongeldige invoer: verwacht ${c.expected}, ontving ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"getal";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Ongeldige invoer: verwacht ${b1(c.values[0])}`;return`Ongeldige optie: verwacht \xe9\xe9n van ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Te groot: verwacht dat ${c.origin??"waarde"} ${d.verb} ${b}${c.maximum.toString()} ${d.unit??"elementen"}`;return`Te groot: verwacht dat ${c.origin??"waarde"} ${b}${c.maximum.toString()} is`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Te klein: verwacht dat ${c.origin} ${d.verb} ${b}${c.minimum.toString()} ${d.unit}`;return`Te klein: verwacht dat ${c.origin} ${b}${c.minimum.toString()} is`}case"invalid_format":if("starts_with"===c.format)return`Ongeldige tekst: moet met "${c.prefix}" beginnen`;if("ends_with"===c.format)return`Ongeldige tekst: moet op "${c.suffix}" eindigen`;if("includes"===c.format)return`Ongeldige tekst: moet "${c.includes}" bevatten`;if("regex"===c.format)return`Ongeldige tekst: moet overeenkomen met patroon ${c.pattern}`;return`Ongeldig: ${b[c.format]??c.format}`;case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${c.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${c.keys.length>1?"s":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${c.origin}`;case"invalid_union":default:return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${c.origin}`}})}},"no",0,function(){let a,b;return{localeError:(a={string:{unit:"tegn",verb:"Ã¥ ha"},file:{unit:"bytes",verb:"Ã¥ ha"},array:{unit:"elementer",verb:"Ã¥ inneholde"},set:{unit:"elementer",verb:"Ã¥ inneholde"}},b={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omrÃ¥de",ipv6:"IPv6-omrÃ¥de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},c=>{switch(c.code){case"invalid_type":return`Ugyldig input: forventet ${c.expected}, fikk ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"tall";case"object":if(Array.isArray(a))return"liste";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Ugyldig verdi: forventet ${b1(c.values[0])}`;return`Ugyldig valg: forventet en av ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`For stor(t): forventet ${c.origin??"value"} til \xe5 ha ${b}${c.maximum.toString()} ${d.unit??"elementer"}`;return`For stor(t): forventet ${c.origin??"value"} til \xe5 ha ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`For lite(n): forventet ${c.origin} til \xe5 ha ${b}${c.minimum.toString()} ${d.unit}`;return`For lite(n): forventet ${c.origin} til \xe5 ha ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Ugyldig streng: m\xe5 starte med "${c.prefix}"`;if("ends_with"===c.format)return`Ugyldig streng: m\xe5 ende med "${c.suffix}"`;if("includes"===c.format)return`Ugyldig streng: m\xe5 inneholde "${c.includes}"`;if("regex"===c.format)return`Ugyldig streng: m\xe5 matche m\xf8nsteret ${c.pattern}`;return`Ugyldig ${b[c.format]??c.format}`;case"not_multiple_of":return`Ugyldig tall: m\xe5 v\xe6re et multiplum av ${c.divisor}`;case"unrecognized_keys":return`${c.keys.length>1?"Ukjente nÃ¸kler":"Ukjent nÃ¸kkel"}: ${bA(c.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8kkel i ${c.origin}`;case"invalid_union":default:return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${c.origin}`}})}},"ota",0,function(){let a,b;return{localeError:(a={string:{unit:"harf",verb:"olmalÄ±dÄ±r"},file:{unit:"bayt",verb:"olmalÄ±dÄ±r"},array:{unit:"unsur",verb:"olmalÄ±dÄ±r"},set:{unit:"unsur",verb:"olmalÄ±dÄ±r"}},b={regex:"giren",email:"epostagÃ¢h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengÃ¢mÄ±",date:"ISO tarihi",time:"ISO zamanÄ±",duration:"ISO mÃ¼ddeti",ipv4:"IPv4 niÅŸÃ¢nÄ±",ipv6:"IPv6 niÅŸÃ¢nÄ±",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-ÅŸifreli metin",base64url:"base64url-ÅŸifreli metin",json_string:"JSON metin",e164:"E.164 sayÄ±sÄ±",jwt:"JWT",template_literal:"giren"},c=>{switch(c.code){case"invalid_type":return`F\xe2sit giren: umulan ${c.expected}, alÄ±nan ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"numara";case"object":if(Array.isArray(a))return"saf";if(null===a)return"gayb";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`F\xe2sit giren: umulan ${b1(c.values[0])}`;return`F\xe2sit tercih: m\xfbteberler ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Fazla b\xfcy\xfck: ${c.origin??"value"}, ${b}${c.maximum.toString()} ${d.unit??"elements"} sahip olmalÄ±ydÄ±.`;return`Fazla b\xfcy\xfck: ${c.origin??"value"}, ${b}${c.maximum.toString()} olmalÄ±ydÄ±.`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Fazla k\xfc\xe7\xfck: ${c.origin}, ${b}${c.minimum.toString()} ${d.unit} sahip olmalÄ±ydÄ±.`;return`Fazla k\xfc\xe7\xfck: ${c.origin}, ${b}${c.minimum.toString()} olmalÄ±ydÄ±.`}case"invalid_format":if("starts_with"===c.format)return`F\xe2sit metin: "${c.prefix}" ile baÅŸlamalÄ±.`;if("ends_with"===c.format)return`F\xe2sit metin: "${c.suffix}" ile bitmeli.`;if("includes"===c.format)return`F\xe2sit metin: "${c.includes}" ihtiv\xe2 etmeli.`;if("regex"===c.format)return`F\xe2sit metin: ${c.pattern} nakÅŸÄ±na uymalÄ±.`;return`F\xe2sit ${b[c.format]??c.format}`;case"not_multiple_of":return`F\xe2sit sayÄ±: ${c.divisor} katÄ± olmalÄ±ydÄ±.`;case"unrecognized_keys":return`TanÄ±nmayan anahtar ${c.keys.length>1?"s":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`${c.origin} i\xe7in tanÄ±nmayan anahtar var.`;case"invalid_union":return"Giren tanÄ±namadÄ±.";case"invalid_element":return`${c.origin} i\xe7in tanÄ±nmayan kÄ±ymet var.`;default:return`KÄ±ymet tanÄ±namadÄ±.`}})}},"pl",0,function(){let a,b;return{localeError:(a={string:{unit:"znakÃ³w",verb:"mieÄ‡"},file:{unit:"bajtÃ³w",verb:"mieÄ‡"},array:{unit:"elementÃ³w",verb:"mieÄ‡"},set:{unit:"elementÃ³w",verb:"mieÄ‡"}},b={regex:"wyraÅ¼enie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ciÄ…g znakÃ³w zakodowany w formacie base64",base64url:"ciÄ…g znakÃ³w zakodowany w formacie base64url",json_string:"ciÄ…g znakÃ³w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejÅ›cie"},c=>{switch(c.code){case"invalid_type":return`NieprawidÅ‚owe dane wejÅ›ciowe: oczekiwano ${c.expected}, otrzymano ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"liczba";case"object":if(Array.isArray(a))return"tablica";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`NieprawidÅ‚owe dane wejÅ›ciowe: oczekiwano ${b1(c.values[0])}`;return`NieprawidÅ‚owa opcja: oczekiwano jednej z wartoÅ›ci ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Za duÅ¼a wartoÅ›Ä‡: oczekiwano, Å¼e ${c.origin??"wartoÅ›Ä‡"} bÄ™dzie mieÄ‡ ${b}${c.maximum.toString()} ${d.unit??"elementÃ³w"}`;return`Zbyt duÅ¼(y/a/e): oczekiwano, Å¼e ${c.origin??"wartoÅ›Ä‡"} bÄ™dzie wynosiÄ‡ ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Za maÅ‚a wartoÅ›Ä‡: oczekiwano, Å¼e ${c.origin??"wartoÅ›Ä‡"} bÄ™dzie mieÄ‡ ${b}${c.minimum.toString()} ${d.unit??"elementÃ³w"}`;return`Zbyt maÅ‚(y/a/e): oczekiwano, Å¼e ${c.origin??"wartoÅ›Ä‡"} bÄ™dzie wynosiÄ‡ ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`NieprawidÅ‚owy ciÄ…g znak\xf3w: musi zaczynaÄ‡ siÄ™ od "${c.prefix}"`;if("ends_with"===c.format)return`NieprawidÅ‚owy ciÄ…g znak\xf3w: musi koÅ„czyÄ‡ siÄ™ na "${c.suffix}"`;if("includes"===c.format)return`NieprawidÅ‚owy ciÄ…g znak\xf3w: musi zawieraÄ‡ "${c.includes}"`;if("regex"===c.format)return`NieprawidÅ‚owy ciÄ…g znak\xf3w: musi odpowiadaÄ‡ wzorcowi ${c.pattern}`;return`NieprawidÅ‚ow(y/a/e) ${b[c.format]??c.format}`;case"not_multiple_of":return`NieprawidÅ‚owa liczba: musi byÄ‡ wielokrotnoÅ›ciÄ… ${c.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${c.keys.length>1?"s":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`NieprawidÅ‚owy klucz w ${c.origin}`;case"invalid_union":return"NieprawidÅ‚owe dane wejÅ›ciowe";case"invalid_element":return`NieprawidÅ‚owa wartoÅ›Ä‡ w ${c.origin}`;default:return`NieprawidÅ‚owe dane wejÅ›ciowe`}})}},"ps",0,function(){let a,b;return{localeError:(a={string:{unit:"ØªÙˆÚ©ÙŠ",verb:"ÙˆÙ„Ø±ÙŠ"},file:{unit:"Ø¨Ø§ÛŒÙ¼Ø³",verb:"ÙˆÙ„Ø±ÙŠ"},array:{unit:"ØªÙˆÚ©ÙŠ",verb:"ÙˆÙ„Ø±ÙŠ"},set:{unit:"ØªÙˆÚ©ÙŠ",verb:"ÙˆÙ„Ø±ÙŠ"}},b={regex:"ÙˆØ±ÙˆØ¯ÙŠ",email:"Ø¨Ø±ÛŒÚšÙ†Ø§Ù„ÛŒÚ©",url:"ÛŒÙˆ Ø¢Ø± Ø§Ù„",emoji:"Ø§ÛŒÙ…ÙˆØ¬ÙŠ",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"Ù†ÛŒÙ¼Ù‡ Ø§Ùˆ ÙˆØ®Øª",date:"Ù†ÛÙ¼Ù‡",time:"ÙˆØ®Øª",duration:"Ù…ÙˆØ¯Ù‡",ipv4:"Ø¯ IPv4 Ù¾ØªÙ‡",ipv6:"Ø¯ IPv6 Ù¾ØªÙ‡",cidrv4:"Ø¯ IPv4 Ø³Ø§Ø­Ù‡",cidrv6:"Ø¯ IPv6 Ø³Ø§Ø­Ù‡",base64:"base64-encoded Ù…ØªÙ†",base64url:"base64url-encoded Ù…ØªÙ†",json_string:"JSON Ù…ØªÙ†",e164:"Ø¯ E.164 Ø´Ù…ÛØ±Ù‡",jwt:"JWT",template_literal:"ÙˆØ±ÙˆØ¯ÙŠ"},c=>{switch(c.code){case"invalid_type":return`Ù†Ø§Ø³Ù… ÙˆØ±ÙˆØ¯ÙŠ: Ø¨Ø§ÛŒØ¯ ${c.expected} ÙˆØ§ÛŒ, Ù…Ú«Ø± ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"Ø¹Ø¯Ø¯";case"object":if(Array.isArray(a))return"Ø§Ø±Û";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)} ØªØ±Ù„Ø§Ø³Ù‡ Ø´Ùˆ`;case"invalid_value":if(1===c.values.length)return`Ù†Ø§Ø³Ù… ÙˆØ±ÙˆØ¯ÙŠ: Ø¨Ø§ÛŒØ¯ ${b1(c.values[0])} ÙˆØ§ÛŒ`;return`Ù†Ø§Ø³Ù… Ø§Ù†ØªØ®Ø§Ø¨: Ø¨Ø§ÛŒØ¯ ÛŒÙˆ Ù„Ù‡ ${bA(c.values,"|")} Ú…Ø®Ù‡ ÙˆØ§ÛŒ`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Ú‰ÛŒØ± Ù„ÙˆÛŒ: ${c.origin??"Ø§Ø±Ø²ÚšØª"} Ø¨Ø§ÛŒØ¯ ${b}${c.maximum.toString()} ${d.unit??"Ø¹Ù†ØµØ±ÙˆÙ†Ù‡"} ÙˆÙ„Ø±ÙŠ`;return`Ú‰ÛŒØ± Ù„ÙˆÛŒ: ${c.origin??"Ø§Ø±Ø²ÚšØª"} Ø¨Ø§ÛŒØ¯ ${b}${c.maximum.toString()} ÙˆÙŠ`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Ú‰ÛŒØ± Ú©ÙˆÚ†Ù†ÛŒ: ${c.origin} Ø¨Ø§ÛŒØ¯ ${b}${c.minimum.toString()} ${d.unit} ÙˆÙ„Ø±ÙŠ`;return`Ú‰ÛŒØ± Ú©ÙˆÚ†Ù†ÛŒ: ${c.origin} Ø¨Ø§ÛŒØ¯ ${b}${c.minimum.toString()} ÙˆÙŠ`}case"invalid_format":if("starts_with"===c.format)return`Ù†Ø§Ø³Ù… Ù…ØªÙ†: Ø¨Ø§ÛŒØ¯ Ø¯ "${c.prefix}" Ø³Ø±Ù‡ Ù¾ÛŒÙ„ Ø´ÙŠ`;if("ends_with"===c.format)return`Ù†Ø§Ø³Ù… Ù…ØªÙ†: Ø¨Ø§ÛŒØ¯ Ø¯ "${c.suffix}" Ø³Ø±Ù‡ Ù¾Ø§ÛŒ ØªÙ‡ ÙˆØ±Ø³ÙŠÚ–ÙŠ`;if("includes"===c.format)return`Ù†Ø§Ø³Ù… Ù…ØªÙ†: Ø¨Ø§ÛŒØ¯ "${c.includes}" ÙˆÙ„Ø±ÙŠ`;if("regex"===c.format)return`Ù†Ø§Ø³Ù… Ù…ØªÙ†: Ø¨Ø§ÛŒØ¯ Ø¯ ${c.pattern} Ø³Ø±Ù‡ Ù…Ø·Ø§Ø¨Ù‚Øª ÙˆÙ„Ø±ÙŠ`;return`${b[c.format]??c.format} Ù†Ø§Ø³Ù… Ø¯ÛŒ`;case"not_multiple_of":return`Ù†Ø§Ø³Ù… Ø¹Ø¯Ø¯: Ø¨Ø§ÛŒØ¯ Ø¯ ${c.divisor} Ù…Ø¶Ø±Ø¨ ÙˆÙŠ`;case"unrecognized_keys":return`Ù†Ø§Ø³Ù… ${c.keys.length>1?"Ú©Ù„ÛŒÚ‰ÙˆÙ†Ù‡":"Ú©Ù„ÛŒÚ‰"}: ${bA(c.keys,", ")}`;case"invalid_key":return`Ù†Ø§Ø³Ù… Ú©Ù„ÛŒÚ‰ Ù¾Ù‡ ${c.origin} Ú©Û`;case"invalid_union":default:return`Ù†Ø§Ø³Ù…Ù‡ ÙˆØ±ÙˆØ¯ÙŠ`;case"invalid_element":return`Ù†Ø§Ø³Ù… Ø¹Ù†ØµØ± Ù¾Ù‡ ${c.origin} Ú©Û`}})}},"pt",0,function(){let a,b;return{localeError:(a={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}},b={regex:"padrÃ£o",email:"endereÃ§o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"duraÃ§Ã£o ISO",ipv4:"endereÃ§o IPv4",ipv6:"endereÃ§o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"nÃºmero E.164",jwt:"JWT",template_literal:"entrada"},c=>{switch(c.code){case"invalid_type":return`Tipo inv\xe1lido: esperado ${c.expected}, recebido ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"nÃºmero";case"object":if(Array.isArray(a))return"array";if(null===a)return"nulo";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Entrada inv\xe1lida: esperado ${b1(c.values[0])}`;return`Op\xe7\xe3o inv\xe1lida: esperada uma das ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Muito grande: esperado que ${c.origin??"valor"} tivesse ${b}${c.maximum.toString()} ${d.unit??"elementos"}`;return`Muito grande: esperado que ${c.origin??"valor"} fosse ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Muito pequeno: esperado que ${c.origin} tivesse ${b}${c.minimum.toString()} ${d.unit}`;return`Muito pequeno: esperado que ${c.origin} fosse ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Texto inv\xe1lido: deve come\xe7ar com "${c.prefix}"`;if("ends_with"===c.format)return`Texto inv\xe1lido: deve terminar com "${c.suffix}"`;if("includes"===c.format)return`Texto inv\xe1lido: deve incluir "${c.includes}"`;if("regex"===c.format)return`Texto inv\xe1lido: deve corresponder ao padr\xe3o ${c.pattern}`;return`${b[c.format]??c.format} inv\xe1lido`;case"not_multiple_of":return`N\xfamero inv\xe1lido: deve ser m\xfaltiplo de ${c.divisor}`;case"unrecognized_keys":return`Chave${c.keys.length>1?"s":""} desconhecida${c.keys.length>1?"s":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`Chave inv\xe1lida em ${c.origin}`;case"invalid_union":return"Entrada invÃ¡lida";case"invalid_element":return`Valor inv\xe1lido em ${c.origin}`;default:return`Campo inv\xe1lido`}})}},"ru",0,function(){let a,b;return{localeError:(a={string:{unit:{one:"ÑÐ¸Ð¼Ð²Ð¾Ð»",few:"ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°",many:"ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²"},verb:"Ð¸Ð¼ÐµÑ‚ÑŒ"},file:{unit:{one:"Ð±Ð°Ð¹Ñ‚",few:"Ð±Ð°Ð¹Ñ‚Ð°",many:"Ð±Ð°Ð¹Ñ‚"},verb:"Ð¸Ð¼ÐµÑ‚ÑŒ"},array:{unit:{one:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",few:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°",many:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²"},verb:"Ð¸Ð¼ÐµÑ‚ÑŒ"},set:{unit:{one:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚",few:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°",many:"ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²"},verb:"Ð¸Ð¼ÐµÑ‚ÑŒ"}},b={regex:"Ð²Ð²Ð¾Ð´",email:"email Ð°Ð´Ñ€ÐµÑ",url:"URL",emoji:"ÑÐ¼Ð¾Ð´Ð·Ð¸",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO Ð´Ð°Ñ‚Ð° Ð¸ Ð²Ñ€ÐµÐ¼Ñ",date:"ISO Ð´Ð°Ñ‚Ð°",time:"ISO Ð²Ñ€ÐµÐ¼Ñ",duration:"ISO Ð´Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ",ipv4:"IPv4 Ð°Ð´Ñ€ÐµÑ",ipv6:"IPv6 Ð°Ð´Ñ€ÐµÑ",cidrv4:"IPv4 Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½",cidrv6:"IPv6 Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½",base64:"ÑÑ‚Ñ€Ð¾ÐºÐ° Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ base64",base64url:"ÑÑ‚Ñ€Ð¾ÐºÐ° Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ base64url",json_string:"JSON ÑÑ‚Ñ€Ð¾ÐºÐ°",e164:"Ð½Ð¾Ð¼ÐµÑ€ E.164",jwt:"JWT",template_literal:"Ð²Ð²Ð¾Ð´"},c=>{switch(c.code){case"invalid_type":return`ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð²Ð²Ð¾Ð´: Ð¾Ð¶Ð¸Ð´Ð°Ð»Ð¾ÑÑŒ ${c.expected}, Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¾ ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"Ñ‡Ð¸ÑÐ»Ð¾";case"object":if(Array.isArray(a))return"Ð¼Ð°ÑÑÐ¸Ð²";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð²Ð²Ð¾Ð´: Ð¾Ð¶Ð¸Ð´Ð°Ð»Ð¾ÑÑŒ ${b1(c.values[0])}`;return`ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚: Ð¾Ð¶Ð¸Ð´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð´Ð½Ð¾ Ð¸Ð· ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d){let a=fE(Number(c.maximum),d.unit.one,d.unit.few,d.unit.many);return`Ð¡Ð»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: Ð¾Ð¶Ð¸Ð´Ð°Ð»Ð¾ÑÑŒ, Ñ‡Ñ‚Ð¾ ${c.origin??"Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ"} Ð±ÑƒÐ´ÐµÑ‚ Ð¸Ð¼ÐµÑ‚ÑŒ ${b}${c.maximum.toString()} ${a}`}return`Ð¡Ð»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: Ð¾Ð¶Ð¸Ð´Ð°Ð»Ð¾ÑÑŒ, Ñ‡Ñ‚Ð¾ ${c.origin??"Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ"} Ð±ÑƒÐ´ÐµÑ‚ ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d){let a=fE(Number(c.minimum),d.unit.one,d.unit.few,d.unit.many);return`Ð¡Ð»Ð¸ÑˆÐºÐ¾Ð¼ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: Ð¾Ð¶Ð¸Ð´Ð°Ð»Ð¾ÑÑŒ, Ñ‡Ñ‚Ð¾ ${c.origin} Ð±ÑƒÐ´ÐµÑ‚ Ð¸Ð¼ÐµÑ‚ÑŒ ${b}${c.minimum.toString()} ${a}`}return`Ð¡Ð»Ð¸ÑˆÐºÐ¾Ð¼ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: Ð¾Ð¶Ð¸Ð´Ð°Ð»Ð¾ÑÑŒ, Ñ‡Ñ‚Ð¾ ${c.origin} Ð±ÑƒÐ´ÐµÑ‚ ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`ÐÐµÐ²ÐµÑ€Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ°: Ð´Ð¾Ð»Ð¶Ð½Ð° Ð½Ð°Ñ‡Ð¸Ð½Ð°Ñ‚ÑŒÑÑ Ñ "${c.prefix}"`;if("ends_with"===c.format)return`ÐÐµÐ²ÐµÑ€Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ°: Ð´Ð¾Ð»Ð¶Ð½Ð° Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°Ñ‚ÑŒÑÑ Ð½Ð° "${c.suffix}"`;if("includes"===c.format)return`ÐÐµÐ²ÐµÑ€Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ°: Ð´Ð¾Ð»Ð¶Ð½Ð° ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ "${c.includes}"`;if("regex"===c.format)return`ÐÐµÐ²ÐµÑ€Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ°: Ð´Ð¾Ð»Ð¶Ð½Ð° ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ ÑˆÐ°Ð±Ð»Ð¾Ð½Ñƒ ${c.pattern}`;return`ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ ${b[c.format]??c.format}`;case"not_multiple_of":return`ÐÐµÐ²ÐµÑ€Ð½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾: Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ ÐºÑ€Ð°Ñ‚Ð½Ñ‹Ð¼ ${c.divisor}`;case"unrecognized_keys":return`ÐÐµÑ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð½Ð½${c.keys.length>1?"Ñ‹Ðµ":"Ñ‹Ð¹"} ÐºÐ»ÑŽÑ‡${c.keys.length>1?"Ð¸":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ð² ${c.origin}`;case"invalid_union":return"ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ðµ Ð²Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ";case"invalid_element":return`ÐÐµÐ²ÐµÑ€Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð² ${c.origin}`;default:return`ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ðµ Ð²Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ`}})}},"sl",0,function(){let a,b;return{localeError:(a={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}},b={regex:"vnos",email:"e-poÅ¡tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in Äas",date:"ISO datum",time:"ISO Äas",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 Å¡tevilka",jwt:"JWT",template_literal:"vnos"},c=>{switch(c.code){case"invalid_type":return`Neveljaven vnos: priÄakovano ${c.expected}, prejeto ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"Å¡tevilo";case"object":if(Array.isArray(a))return"tabela";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Neveljaven vnos: priÄakovano ${b1(c.values[0])}`;return`Neveljavna moÅ¾nost: priÄakovano eno izmed ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Preveliko: priÄakovano, da bo ${c.origin??"vrednost"} imelo ${b}${c.maximum.toString()} ${d.unit??"elementov"}`;return`Preveliko: priÄakovano, da bo ${c.origin??"vrednost"} ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Premajhno: priÄakovano, da bo ${c.origin} imelo ${b}${c.minimum.toString()} ${d.unit}`;return`Premajhno: priÄakovano, da bo ${c.origin} ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Neveljaven niz: mora se zaÄeti z "${c.prefix}"`;if("ends_with"===c.format)return`Neveljaven niz: mora se konÄati z "${c.suffix}"`;if("includes"===c.format)return`Neveljaven niz: mora vsebovati "${c.includes}"`;if("regex"===c.format)return`Neveljaven niz: mora ustrezati vzorcu ${c.pattern}`;return`Neveljaven ${b[c.format]??c.format}`;case"not_multiple_of":return`Neveljavno Å¡tevilo: mora biti veÄkratnik ${c.divisor}`;case"unrecognized_keys":return`Neprepoznan${c.keys.length>1?"i kljuÄi":" kljuÄ"}: ${bA(c.keys,", ")}`;case"invalid_key":return`Neveljaven kljuÄ v ${c.origin}`;case"invalid_union":default:return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${c.origin}`}})}},"sv",0,function(){let a,b;return{localeError:(a={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehÃ¥lla"},set:{unit:"objekt",verb:"att innehÃ¥lla"}},b={regex:"reguljÃ¤rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad strÃ¤ng",base64url:"base64url-kodad strÃ¤ng",json_string:"JSON-strÃ¤ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},c=>{switch(c.code){case"invalid_type":return`Ogiltig inmatning: f\xf6rv\xe4ntat ${c.expected}, fick ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"antal";case"object":if(Array.isArray(a))return"lista";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Ogiltig inmatning: f\xf6rv\xe4ntat ${b1(c.values[0])}`;return`Ogiltigt val: f\xf6rv\xe4ntade en av ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`F\xf6r stor(t): f\xf6rv\xe4ntade ${c.origin??"vÃ¤rdet"} att ha ${b}${c.maximum.toString()} ${d.unit??"element"}`;return`F\xf6r stor(t): f\xf6rv\xe4ntat ${c.origin??"vÃ¤rdet"} att ha ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`F\xf6r lite(t): f\xf6rv\xe4ntade ${c.origin??"vÃ¤rdet"} att ha ${b}${c.minimum.toString()} ${d.unit}`;return`F\xf6r lite(t): f\xf6rv\xe4ntade ${c.origin??"vÃ¤rdet"} att ha ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Ogiltig str\xe4ng: m\xe5ste b\xf6rja med "${c.prefix}"`;if("ends_with"===c.format)return`Ogiltig str\xe4ng: m\xe5ste sluta med "${c.suffix}"`;if("includes"===c.format)return`Ogiltig str\xe4ng: m\xe5ste inneh\xe5lla "${c.includes}"`;if("regex"===c.format)return`Ogiltig str\xe4ng: m\xe5ste matcha m\xf6nstret "${c.pattern}"`;return`Ogiltig(t) ${b[c.format]??c.format}`;case"not_multiple_of":return`Ogiltigt tal: m\xe5ste vara en multipel av ${c.divisor}`;case"unrecognized_keys":return`${c.keys.length>1?"OkÃ¤nda nycklar":"OkÃ¤nd nyckel"}: ${bA(c.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${c.origin??"vÃ¤rdet"}`;case"invalid_union":default:return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xe4rde i ${c.origin??"vÃ¤rdet"}`}})}},"ta",0,function(){let a,b;return{localeError:(a={string:{unit:"à®Žà®´à¯à®¤à¯à®¤à¯à®•à¯à®•à®³à¯",verb:"à®•à¯Šà®£à¯à®Ÿà®¿à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯"},file:{unit:"à®ªà¯ˆà®Ÿà¯à®Ÿà¯à®•à®³à¯",verb:"à®•à¯Šà®£à¯à®Ÿà®¿à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯"},array:{unit:"à®‰à®±à¯à®ªà¯à®ªà¯à®•à®³à¯",verb:"à®•à¯Šà®£à¯à®Ÿà®¿à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯"},set:{unit:"à®‰à®±à¯à®ªà¯à®ªà¯à®•à®³à¯",verb:"à®•à¯Šà®£à¯à®Ÿà®¿à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯"}},b={regex:"à®‰à®³à¯à®³à¯€à®Ÿà¯",email:"à®®à®¿à®©à¯à®©à®žà¯à®šà®²à¯ à®®à¯à®•à®µà®°à®¿",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO à®¤à¯‡à®¤à®¿ à®¨à¯‡à®°à®®à¯",date:"ISO à®¤à¯‡à®¤à®¿",time:"ISO à®¨à¯‡à®°à®®à¯",duration:"ISO à®•à®¾à®² à®…à®³à®µà¯",ipv4:"IPv4 à®®à¯à®•à®µà®°à®¿",ipv6:"IPv6 à®®à¯à®•à®µà®°à®¿",cidrv4:"IPv4 à®µà®°à®®à¯à®ªà¯",cidrv6:"IPv6 à®µà®°à®®à¯à®ªà¯",base64:"base64-encoded à®šà®°à®®à¯",base64url:"base64url-encoded à®šà®°à®®à¯",json_string:"JSON à®šà®°à®®à¯",e164:"E.164 à®Žà®£à¯",jwt:"JWT",template_literal:"input"},c=>{switch(c.code){case"invalid_type":return`à®¤à®µà®±à®¾à®© à®‰à®³à¯à®³à¯€à®Ÿà¯: à®Žà®¤à®¿à®°à¯à®ªà®¾à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${c.expected}, à®ªà¯†à®±à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"à®Žà®£à¯ à®…à®²à¯à®²à®¾à®¤à®¤à¯":"à®Žà®£à¯";case"object":if(Array.isArray(a))return"à®…à®£à®¿";if(null===a)return"à®µà¯†à®±à¯à®®à¯ˆ";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`à®¤à®µà®±à®¾à®© à®‰à®³à¯à®³à¯€à®Ÿà¯: à®Žà®¤à®¿à®°à¯à®ªà®¾à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${b1(c.values[0])}`;return`à®¤à®µà®±à®¾à®© à®µà®¿à®°à¯à®ªà¯à®ªà®®à¯: à®Žà®¤à®¿à®°à¯à®ªà®¾à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${bA(c.values,"|")} à®‡à®²à¯ à®’à®©à¯à®±à¯`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`à®®à®¿à®• à®ªà¯†à®°à®¿à®¯à®¤à¯: à®Žà®¤à®¿à®°à¯à®ªà®¾à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${c.origin??"à®®à®¤à®¿à®ªà¯à®ªà¯"} ${b}${c.maximum.toString()} ${d.unit??"à®‰à®±à¯à®ªà¯à®ªà¯à®•à®³à¯"} à®†à®• à®‡à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`;return`à®®à®¿à®• à®ªà¯†à®°à®¿à®¯à®¤à¯: à®Žà®¤à®¿à®°à¯à®ªà®¾à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${c.origin??"à®®à®¤à®¿à®ªà¯à®ªà¯"} ${b}${c.maximum.toString()} à®†à®• à®‡à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`à®®à®¿à®•à®šà¯ à®šà®¿à®±à®¿à®¯à®¤à¯: à®Žà®¤à®¿à®°à¯à®ªà®¾à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${c.origin} ${b}${c.minimum.toString()} ${d.unit} à®†à®• à®‡à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`;return`à®®à®¿à®•à®šà¯ à®šà®¿à®±à®¿à®¯à®¤à¯: à®Žà®¤à®¿à®°à¯à®ªà®¾à®°à¯à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯ ${c.origin} ${b}${c.minimum.toString()} à®†à®• à®‡à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`}case"invalid_format":if("starts_with"===c.format)return`à®¤à®µà®±à®¾à®© à®šà®°à®®à¯: "${c.prefix}" à®‡à®²à¯ à®¤à¯Šà®Ÿà®™à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`;if("ends_with"===c.format)return`à®¤à®µà®±à®¾à®© à®šà®°à®®à¯: "${c.suffix}" à®‡à®²à¯ à®®à¯à®Ÿà®¿à®µà®Ÿà¯ˆà®¯ à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`;if("includes"===c.format)return`à®¤à®µà®±à®¾à®© à®šà®°à®®à¯: "${c.includes}" à® à®‰à®³à¯à®³à®Ÿà®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`;if("regex"===c.format)return`à®¤à®µà®±à®¾à®© à®šà®°à®®à¯: ${c.pattern} à®®à¯à®±à¯ˆà®ªà®¾à®Ÿà¯à®Ÿà¯à®Ÿà®©à¯ à®ªà¯Šà®°à¯à®¨à¯à®¤ à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`;return`à®¤à®µà®±à®¾à®© ${b[c.format]??c.format}`;case"not_multiple_of":return`à®¤à®µà®±à®¾à®© à®Žà®£à¯: ${c.divisor} à®‡à®©à¯ à®ªà®²à®®à®¾à®• à®‡à®°à¯à®•à¯à®• à®µà¯‡à®£à¯à®Ÿà¯à®®à¯`;case"unrecognized_keys":return`à®…à®Ÿà¯ˆà®¯à®¾à®³à®®à¯ à®¤à¯†à®°à®¿à®¯à®¾à®¤ à®µà®¿à®šà¯ˆ${c.keys.length>1?"à®•à®³à¯":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`${c.origin} à®‡à®²à¯ à®¤à®µà®±à®¾à®© à®µà®¿à®šà¯ˆ`;case"invalid_union":return"à®¤à®µà®±à®¾à®© à®‰à®³à¯à®³à¯€à®Ÿà¯";case"invalid_element":return`${c.origin} à®‡à®²à¯ à®¤à®µà®±à®¾à®© à®®à®¤à®¿à®ªà¯à®ªà¯`;default:return`à®¤à®µà®±à®¾à®© à®‰à®³à¯à®³à¯€à®Ÿà¯`}})}},"th",0,function(){let a,b;return{localeError:(a={string:{unit:"à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£",verb:"à¸„à¸§à¸£à¸¡à¸µ"},file:{unit:"à¹„à¸šà¸•à¹Œ",verb:"à¸„à¸§à¸£à¸¡à¸µ"},array:{unit:"à¸£à¸²à¸¢à¸à¸²à¸£",verb:"à¸„à¸§à¸£à¸¡à¸µ"},set:{unit:"à¸£à¸²à¸¢à¸à¸²à¸£",verb:"à¸„à¸§à¸£à¸¡à¸µ"}},b={regex:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸›à¹‰à¸­à¸™",email:"à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸­à¸µà¹€à¸¡à¸¥",url:"URL",emoji:"à¸­à¸´à¹‚à¸¡à¸ˆà¸´",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸§à¸¥à¸²à¹à¸šà¸š ISO",date:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¹à¸šà¸š ISO",time:"à¹€à¸§à¸¥à¸²à¹à¸šà¸š ISO",duration:"à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²à¹à¸šà¸š ISO",ipv4:"à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ IPv4",ipv6:"à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ IPv6",cidrv4:"à¸Šà¹ˆà¸§à¸‡ IP à¹à¸šà¸š IPv4",cidrv6:"à¸Šà¹ˆà¸§à¸‡ IP à¹à¸šà¸š IPv6",base64:"à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸šà¸š Base64",base64url:"à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸šà¸š Base64 à¸ªà¸³à¸«à¸£à¸±à¸š URL",json_string:"à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸šà¸š JSON",e164:"à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸žà¸—à¹Œà¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸›à¸£à¸°à¹€à¸—à¸¨ (E.164)",jwt:"à¹‚à¸—à¹€à¸„à¸™ JWT",template_literal:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸›à¹‰à¸­à¸™"},c=>{switch(c.code){case"invalid_type":return`à¸›à¸£à¸°à¹€à¸ à¸—à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸„à¸§à¸£à¹€à¸›à¹‡à¸™ ${c.expected} à¹à¸•à¹ˆà¹„à¸”à¹‰à¸£à¸±à¸š ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¸•à¸±à¸§à¹€à¸¥à¸‚ (NaN)":"à¸•à¸±à¸§à¹€à¸¥à¸‚";case"object":if(Array.isArray(a))return"à¸­à¸²à¸£à¹Œà¹€à¸£à¸¢à¹Œ (Array)";if(null===a)return"à¹„à¸¡à¹ˆà¸¡à¸µà¸„à¹ˆà¸² (null)";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`à¸„à¹ˆà¸²à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸„à¸§à¸£à¹€à¸›à¹‡à¸™ ${b1(c.values[0])}`;return`à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸„à¸§à¸£à¹€à¸›à¹‡à¸™à¸«à¸™à¸¶à¹ˆà¸‡à¹ƒà¸™ ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™":"à¸™à¹‰à¸­à¸¢à¸à¸§à¹ˆà¸²",d=a[c.origin]??null;if(d)return`à¹€à¸à¸´à¸™à¸à¸³à¸«à¸™à¸”: ${c.origin??"à¸„à¹ˆà¸²"} à¸„à¸§à¸£à¸¡à¸µ${b} ${c.maximum.toString()} ${d.unit??"à¸£à¸²à¸¢à¸à¸²à¸£"}`;return`à¹€à¸à¸´à¸™à¸à¸³à¸«à¸™à¸”: ${c.origin??"à¸„à¹ˆà¸²"} à¸„à¸§à¸£à¸¡à¸µ${b} ${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?"à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢":"à¸¡à¸²à¸à¸à¸§à¹ˆà¸²",d=a[c.origin]??null;if(d)return`à¸™à¹‰à¸­à¸¢à¸à¸§à¹ˆà¸²à¸à¸³à¸«à¸™à¸”: ${c.origin} à¸„à¸§à¸£à¸¡à¸µ${b} ${c.minimum.toString()} ${d.unit}`;return`à¸™à¹‰à¸­à¸¢à¸à¸§à¹ˆà¸²à¸à¸³à¸«à¸™à¸”: ${c.origin} à¸„à¸§à¸£à¸¡à¸µ${b} ${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`à¸£à¸¹à¸›à¹à¸šà¸šà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸‚à¸¶à¹‰à¸™à¸•à¹‰à¸™à¸”à¹‰à¸§à¸¢ "${c.prefix}"`;if("ends_with"===c.format)return`à¸£à¸¹à¸›à¹à¸šà¸šà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸¥à¸‡à¸—à¹‰à¸²à¸¢à¸”à¹‰à¸§à¸¢ "${c.suffix}"`;if("includes"===c.format)return`à¸£à¸¹à¸›à¹à¸šà¸šà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸¡à¸µ "${c.includes}" à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡`;if("regex"===c.format)return`à¸£à¸¹à¸›à¹à¸šà¸šà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸•à¹‰à¸­à¸‡à¸•à¸£à¸‡à¸à¸±à¸šà¸£à¸¹à¸›à¹à¸šà¸šà¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸” ${c.pattern}`;return`à¸£à¸¹à¸›à¹à¸šà¸šà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: ${b[c.format]??c.format}`;case"not_multiple_of":return`à¸•à¸±à¸§à¹€à¸¥à¸‚à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¸•à¹‰à¸­à¸‡à¹€à¸›à¹‡à¸™à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¸«à¸²à¸£à¸”à¹‰à¸§à¸¢ ${c.divisor} à¹„à¸”à¹‰à¸¥à¸‡à¸•à¸±à¸§`;case"unrecognized_keys":return`à¸žà¸šà¸„à¸µà¸¢à¹Œà¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸ˆà¸±à¸: ${bA(c.keys,", ")}`;case"invalid_key":return`à¸„à¸µà¸¢à¹Œà¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¹ƒà¸™ ${c.origin}`;case"invalid_union":return"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡: à¹„à¸¡à¹ˆà¸•à¸£à¸‡à¸à¸±à¸šà¸£à¸¹à¸›à¹à¸šà¸šà¸¢à¸¹à¹€à¸™à¸µà¸¢à¸™à¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸”à¹„à¸§à¹‰";case"invalid_element":return`à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¹ƒà¸™ ${c.origin}`;default:return`à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡`}})}},"tr",0,function(){let a,b;return{localeError:(a={string:{unit:"karakter",verb:"olmalÄ±"},file:{unit:"bayt",verb:"olmalÄ±"},array:{unit:"Ã¶ÄŸe",verb:"olmalÄ±"},set:{unit:"Ã¶ÄŸe",verb:"olmalÄ±"}},b={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO sÃ¼re",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aralÄ±ÄŸÄ±",cidrv6:"IPv6 aralÄ±ÄŸÄ±",base64:"base64 ile ÅŸifrelenmiÅŸ metin",base64url:"base64url ile ÅŸifrelenmiÅŸ metin",json_string:"JSON dizesi",e164:"E.164 sayÄ±sÄ±",jwt:"JWT",template_literal:"Åžablon dizesi"},c=>{switch(c.code){case"invalid_type":return`Ge\xe7ersiz deÄŸer: beklenen ${c.expected}, alÄ±nan ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Ge\xe7ersiz deÄŸer: beklenen ${b1(c.values[0])}`;return`Ge\xe7ersiz se\xe7enek: aÅŸaÄŸÄ±dakilerden biri olmalÄ±: ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`\xc7ok b\xfcy\xfck: beklenen ${c.origin??"deÄŸer"} ${b}${c.maximum.toString()} ${d.unit??"Ã¶ÄŸe"}`;return`\xc7ok b\xfcy\xfck: beklenen ${c.origin??"deÄŸer"} ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`\xc7ok k\xfc\xe7\xfck: beklenen ${c.origin} ${b}${c.minimum.toString()} ${d.unit}`;return`\xc7ok k\xfc\xe7\xfck: beklenen ${c.origin} ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Ge\xe7ersiz metin: "${c.prefix}" ile baÅŸlamalÄ±`;if("ends_with"===c.format)return`Ge\xe7ersiz metin: "${c.suffix}" ile bitmeli`;if("includes"===c.format)return`Ge\xe7ersiz metin: "${c.includes}" i\xe7ermeli`;if("regex"===c.format)return`Ge\xe7ersiz metin: ${c.pattern} desenine uymalÄ±`;return`Ge\xe7ersiz ${b[c.format]??c.format}`;case"not_multiple_of":return`Ge\xe7ersiz sayÄ±: ${c.divisor} ile tam b\xf6l\xfcnebilmeli`;case"unrecognized_keys":return`TanÄ±nmayan anahtar${c.keys.length>1?"lar":""}: ${bA(c.keys,", ")}`;case"invalid_key":return`${c.origin} i\xe7inde ge\xe7ersiz anahtar`;case"invalid_union":return"GeÃ§ersiz deÄŸer";case"invalid_element":return`${c.origin} i\xe7inde ge\xe7ersiz deÄŸer`;default:return`Ge\xe7ersiz deÄŸer`}})}},"ua",0,function(){return fF()},"uk",0,fF,"ur",0,function(){let a,b;return{localeError:(a={string:{unit:"Ø­Ø±ÙˆÙ",verb:"ÛÙˆÙ†Ø§"},file:{unit:"Ø¨Ø§Ø¦Ù¹Ø³",verb:"ÛÙˆÙ†Ø§"},array:{unit:"Ø¢Ø¦Ù¹Ù…Ø²",verb:"ÛÙˆÙ†Ø§"},set:{unit:"Ø¢Ø¦Ù¹Ù…Ø²",verb:"ÛÙˆÙ†Ø§"}},b={regex:"Ø§Ù† Ù¾Ù¹",email:"Ø§ÛŒ Ù…ÛŒÙ„ Ø§ÛŒÚˆØ±ÛŒØ³",url:"ÛŒÙˆ Ø¢Ø± Ø§ÛŒÙ„",emoji:"Ø§ÛŒÙ…ÙˆØ¬ÛŒ",uuid:"ÛŒÙˆ ÛŒÙˆ Ø¢Ø¦ÛŒ ÚˆÛŒ",uuidv4:"ÛŒÙˆ ÛŒÙˆ Ø¢Ø¦ÛŒ ÚˆÛŒ ÙˆÛŒ 4",uuidv6:"ÛŒÙˆ ÛŒÙˆ Ø¢Ø¦ÛŒ ÚˆÛŒ ÙˆÛŒ 6",nanoid:"Ù†ÛŒÙ†Ùˆ Ø¢Ø¦ÛŒ ÚˆÛŒ",guid:"Ø¬ÛŒ ÛŒÙˆ Ø¢Ø¦ÛŒ ÚˆÛŒ",cuid:"Ø³ÛŒ ÛŒÙˆ Ø¢Ø¦ÛŒ ÚˆÛŒ",cuid2:"Ø³ÛŒ ÛŒÙˆ Ø¢Ø¦ÛŒ ÚˆÛŒ 2",ulid:"ÛŒÙˆ Ø§ÛŒÙ„ Ø¢Ø¦ÛŒ ÚˆÛŒ",xid:"Ø§ÛŒÚ©Ø³ Ø¢Ø¦ÛŒ ÚˆÛŒ",ksuid:"Ú©Û’ Ø§ÛŒØ³ ÛŒÙˆ Ø¢Ø¦ÛŒ ÚˆÛŒ",datetime:"Ø¢Ø¦ÛŒ Ø§ÛŒØ³ Ø§Ùˆ ÚˆÛŒÙ¹ Ù¹Ø§Ø¦Ù…",date:"Ø¢Ø¦ÛŒ Ø§ÛŒØ³ Ø§Ùˆ ØªØ§Ø±ÛŒØ®",time:"Ø¢Ø¦ÛŒ Ø§ÛŒØ³ Ø§Ùˆ ÙˆÙ‚Øª",duration:"Ø¢Ø¦ÛŒ Ø§ÛŒØ³ Ø§Ùˆ Ù…Ø¯Øª",ipv4:"Ø¢Ø¦ÛŒ Ù¾ÛŒ ÙˆÛŒ 4 Ø§ÛŒÚˆØ±ÛŒØ³",ipv6:"Ø¢Ø¦ÛŒ Ù¾ÛŒ ÙˆÛŒ 6 Ø§ÛŒÚˆØ±ÛŒØ³",cidrv4:"Ø¢Ø¦ÛŒ Ù¾ÛŒ ÙˆÛŒ 4 Ø±ÛŒÙ†Ø¬",cidrv6:"Ø¢Ø¦ÛŒ Ù¾ÛŒ ÙˆÛŒ 6 Ø±ÛŒÙ†Ø¬",base64:"Ø¨ÛŒØ³ 64 Ø§Ù† Ú©ÙˆÚˆÚˆ Ø³Ù¹Ø±Ù†Ú¯",base64url:"Ø¨ÛŒØ³ 64 ÛŒÙˆ Ø¢Ø± Ø§ÛŒÙ„ Ø§Ù† Ú©ÙˆÚˆÚˆ Ø³Ù¹Ø±Ù†Ú¯",json_string:"Ø¬Û’ Ø§ÛŒØ³ Ø§Ùˆ Ø§ÛŒÙ† Ø³Ù¹Ø±Ù†Ú¯",e164:"Ø§ÛŒ 164 Ù†Ù…Ø¨Ø±",jwt:"Ø¬Û’ ÚˆØ¨Ù„ÛŒÙˆ Ù¹ÛŒ",template_literal:"Ø§Ù† Ù¾Ù¹"},c=>{switch(c.code){case"invalid_type":return`ØºÙ„Ø· Ø§Ù† Ù¾Ù¹: ${c.expected} Ù…ØªÙˆÙ‚Ø¹ ØªÚ¾Ø§ØŒ ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"Ù†Ù…Ø¨Ø±";case"object":if(Array.isArray(a))return"Ø¢Ø±Û’";if(null===a)return"Ù†Ù„";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)} Ù…ÙˆØµÙˆÙ„ ÛÙˆØ§`;case"invalid_value":if(1===c.values.length)return`ØºÙ„Ø· Ø§Ù† Ù¾Ù¹: ${b1(c.values[0])} Ù…ØªÙˆÙ‚Ø¹ ØªÚ¾Ø§`;return`ØºÙ„Ø· Ø¢Ù¾Ø´Ù†: ${bA(c.values,"|")} Ù…ÛŒÚº Ø³Û’ Ø§ÛŒÚ© Ù…ØªÙˆÙ‚Ø¹ ØªÚ¾Ø§`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Ø¨ÛØª Ø¨Ú‘Ø§: ${c.origin??"ÙˆÛŒÙ„ÛŒÙˆ"} Ú©Û’ ${b}${c.maximum.toString()} ${d.unit??"Ø¹Ù†Ø§ØµØ±"} ÛÙˆÙ†Û’ Ù…ØªÙˆÙ‚Ø¹ ØªÚ¾Û’`;return`Ø¨ÛØª Ø¨Ú‘Ø§: ${c.origin??"ÙˆÛŒÙ„ÛŒÙˆ"} Ú©Ø§ ${b}${c.maximum.toString()} ÛÙˆÙ†Ø§ Ù…ØªÙˆÙ‚Ø¹ ØªÚ¾Ø§`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Ø¨ÛØª Ú†Ú¾ÙˆÙ¹Ø§: ${c.origin} Ú©Û’ ${b}${c.minimum.toString()} ${d.unit} ÛÙˆÙ†Û’ Ù…ØªÙˆÙ‚Ø¹ ØªÚ¾Û’`;return`Ø¨ÛØª Ú†Ú¾ÙˆÙ¹Ø§: ${c.origin} Ú©Ø§ ${b}${c.minimum.toString()} ÛÙˆÙ†Ø§ Ù…ØªÙˆÙ‚Ø¹ ØªÚ¾Ø§`}case"invalid_format":if("starts_with"===c.format)return`ØºÙ„Ø· Ø³Ù¹Ø±Ù†Ú¯: "${c.prefix}" Ø³Û’ Ø´Ø±ÙˆØ¹ ÛÙˆÙ†Ø§ Ú†Ø§ÛÛŒÛ’`;if("ends_with"===c.format)return`ØºÙ„Ø· Ø³Ù¹Ø±Ù†Ú¯: "${c.suffix}" Ù¾Ø± Ø®ØªÙ… ÛÙˆÙ†Ø§ Ú†Ø§ÛÛŒÛ’`;if("includes"===c.format)return`ØºÙ„Ø· Ø³Ù¹Ø±Ù†Ú¯: "${c.includes}" Ø´Ø§Ù…Ù„ ÛÙˆÙ†Ø§ Ú†Ø§ÛÛŒÛ’`;if("regex"===c.format)return`ØºÙ„Ø· Ø³Ù¹Ø±Ù†Ú¯: Ù¾ÛŒÙ¹Ø±Ù† ${c.pattern} Ø³Û’ Ù…ÛŒÚ† ÛÙˆÙ†Ø§ Ú†Ø§ÛÛŒÛ’`;return`ØºÙ„Ø· ${b[c.format]??c.format}`;case"not_multiple_of":return`ØºÙ„Ø· Ù†Ù…Ø¨Ø±: ${c.divisor} Ú©Ø§ Ù…Ø¶Ø§Ø¹Ù ÛÙˆÙ†Ø§ Ú†Ø§ÛÛŒÛ’`;case"unrecognized_keys":return`ØºÛŒØ± ØªØ³Ù„ÛŒÙ… Ø´Ø¯Û Ú©ÛŒ${c.keys.length>1?"Ø²":""}: ${bA(c.keys,"ØŒ ")}`;case"invalid_key":return`${c.origin} Ù…ÛŒÚº ØºÙ„Ø· Ú©ÛŒ`;case"invalid_union":return"ØºÙ„Ø· Ø§Ù† Ù¾Ù¹";case"invalid_element":return`${c.origin} Ù…ÛŒÚº ØºÙ„Ø· ÙˆÛŒÙ„ÛŒÙˆ`;default:return`ØºÙ„Ø· Ø§Ù† Ù¾Ù¹`}})}},"vi",0,function(){let a,b;return{localeError:(a={string:{unit:"kÃ½ tá»±",verb:"cÃ³"},file:{unit:"byte",verb:"cÃ³"},array:{unit:"pháº§n tá»­",verb:"cÃ³"},set:{unit:"pháº§n tá»­",verb:"cÃ³"}},b={regex:"Ä‘áº§u vÃ o",email:"Ä‘á»‹a chá»‰ email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngÃ y giá» ISO",date:"ngÃ y ISO",time:"giá» ISO",duration:"khoáº£ng thá»i gian ISO",ipv4:"Ä‘á»‹a chá»‰ IPv4",ipv6:"Ä‘á»‹a chá»‰ IPv6",cidrv4:"dáº£i IPv4",cidrv6:"dáº£i IPv6",base64:"chuá»—i mÃ£ hÃ³a base64",base64url:"chuá»—i mÃ£ hÃ³a base64url",json_string:"chuá»—i JSON",e164:"sá»‘ E.164",jwt:"JWT",template_literal:"Ä‘áº§u vÃ o"},c=>{switch(c.code){case"invalid_type":return`Äáº§u v\xe0o kh\xf4ng há»£p lá»‡: mong Ä‘á»£i ${c.expected}, nháº­n Ä‘Æ°á»£c ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"sá»‘";case"object":if(Array.isArray(a))return"máº£ng";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Äáº§u v\xe0o kh\xf4ng há»£p lá»‡: mong Ä‘á»£i ${b1(c.values[0])}`;return`T\xf9y chá»n kh\xf4ng há»£p lá»‡: mong Ä‘á»£i má»™t trong c\xe1c gi\xe1 trá»‹ ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Qu\xe1 lá»›n: mong Ä‘á»£i ${c.origin??"giÃ¡ trá»‹"} ${d.verb} ${b}${c.maximum.toString()} ${d.unit??"pháº§n tá»­"}`;return`Qu\xe1 lá»›n: mong Ä‘á»£i ${c.origin??"giÃ¡ trá»‹"} ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Qu\xe1 nhá»: mong Ä‘á»£i ${c.origin} ${d.verb} ${b}${c.minimum.toString()} ${d.unit}`;return`Qu\xe1 nhá»: mong Ä‘á»£i ${c.origin} ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Chuá»—i kh\xf4ng há»£p lá»‡: pháº£i báº¯t Ä‘áº§u báº±ng "${c.prefix}"`;if("ends_with"===c.format)return`Chuá»—i kh\xf4ng há»£p lá»‡: pháº£i káº¿t th\xfac báº±ng "${c.suffix}"`;if("includes"===c.format)return`Chuá»—i kh\xf4ng há»£p lá»‡: pháº£i bao gá»“m "${c.includes}"`;if("regex"===c.format)return`Chuá»—i kh\xf4ng há»£p lá»‡: pháº£i khá»›p vá»›i máº«u ${c.pattern}`;return`${b[c.format]??c.format} kh\xf4ng há»£p lá»‡`;case"not_multiple_of":return`Sá»‘ kh\xf4ng há»£p lá»‡: pháº£i l\xe0 bá»™i sá»‘ cá»§a ${c.divisor}`;case"unrecognized_keys":return`Kh\xf3a kh\xf4ng Ä‘Æ°á»£c nháº­n dáº¡ng: ${bA(c.keys,", ")}`;case"invalid_key":return`Kh\xf3a kh\xf4ng há»£p lá»‡ trong ${c.origin}`;case"invalid_union":return"Äáº§u vÃ o khÃ´ng há»£p lá»‡";case"invalid_element":return`Gi\xe1 trá»‹ kh\xf4ng há»£p lá»‡ trong ${c.origin}`;default:return`Äáº§u v\xe0o kh\xf4ng há»£p lá»‡`}})}},"yo",0,function(){let a,b;return{localeError:(a={string:{unit:"Ã mi",verb:"nÃ­"},file:{unit:"bytes",verb:"nÃ­"},array:{unit:"nkan",verb:"nÃ­"},set:{unit:"nkan",verb:"nÃ­"}},b={regex:"áº¹Ì€rá» Ã¬bÃ¡wá»lÃ©",email:"Ã dÃ­ráº¹ÌsÃ¬ Ã¬máº¹ÌlÃ¬",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"Ã kÃ³kÃ² ISO",date:"á»já»Ì ISO",time:"Ã kÃ³kÃ² ISO",duration:"Ã kÃ³kÃ² tÃ³ pÃ© ISO",ipv4:"Ã dÃ­ráº¹ÌsÃ¬ IPv4",ipv6:"Ã dÃ­ráº¹ÌsÃ¬ IPv6",cidrv4:"Ã gbÃ¨gbÃ¨ IPv4",cidrv6:"Ã gbÃ¨gbÃ¨ IPv6",base64:"á»Ì€rá»Ì€ tÃ­ a ká»Ì nÃ­ base64",base64url:"á»Ì€rá»Ì€ base64url",json_string:"á»Ì€rá»Ì€ JSON",e164:"ná»ÌmbÃ  E.164",jwt:"JWT",template_literal:"áº¹Ì€rá» Ã¬bÃ¡wá»lÃ©"},c=>{switch(c.code){case"invalid_type":return`\xccb\xe1wá»l\xe9 aá¹£\xecá¹£e: a n\xed l\xe1ti fi ${c.expected}, \xe0má»Ì€ a r\xed ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"ná»ÌmbÃ ";case"object":if(Array.isArray(a))return"akopá»";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`\xccb\xe1wá»l\xe9 aá¹£\xecá¹£e: a n\xed l\xe1ti fi ${b1(c.values[0])}`;return`\xc0á¹£\xe0y\xe0n aá¹£\xecá¹£e: yan á»Ì€kan l\xe1ra ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`T\xf3 pá»Ì€ j\xf9: a n\xed l\xe1ti jáº¹Ì p\xe9 ${c.origin??"iye"} ${d.verb} ${b}${c.maximum} ${d.unit}`;return`T\xf3 pá»Ì€ j\xf9: a n\xed l\xe1ti jáº¹Ì ${b}${c.maximum}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`K\xe9r\xe9 ju: a n\xed l\xe1ti jáº¹Ì p\xe9 ${c.origin} ${d.verb} ${b}${c.minimum} ${d.unit}`;return`K\xe9r\xe9 ju: a n\xed l\xe1ti jáº¹Ì ${b}${c.minimum}`}case"invalid_format":if("starts_with"===c.format)return`á»ŒÌ€rá»Ì€ aá¹£\xecá¹£e: gbá»Ìdá»Ì€ báº¹Ì€ráº¹Ì€ páº¹Ì€l\xfa "${c.prefix}"`;if("ends_with"===c.format)return`á»ŒÌ€rá»Ì€ aá¹£\xecá¹£e: gbá»Ìdá»Ì€ par\xed páº¹Ì€l\xfa "${c.suffix}"`;if("includes"===c.format)return`á»ŒÌ€rá»Ì€ aá¹£\xecá¹£e: gbá»Ìdá»Ì€ n\xed "${c.includes}"`;if("regex"===c.format)return`á»ŒÌ€rá»Ì€ aá¹£\xecá¹£e: gbá»Ìdá»Ì€ b\xe1 \xe0páº¹áº¹ráº¹ mu ${c.pattern}`;return`Aá¹£\xecá¹£e: ${b[c.format]??c.format}`;case"not_multiple_of":return`Ná»Ìmb\xe0 aá¹£\xecá¹£e: gbá»Ìdá»Ì€ jáº¹Ì \xe8y\xe0 p\xedp\xedn ti ${c.divisor}`;case"unrecognized_keys":return`Bá»t\xecn\xec \xe0\xecmá»Ì€: ${bA(c.keys,", ")}`;case"invalid_key":return`Bá»t\xecn\xec aá¹£\xecá¹£e n\xedn\xfa ${c.origin}`;case"invalid_union":default:return"ÃŒbÃ¡wá»lÃ© aá¹£Ã¬á¹£e";case"invalid_element":return`Iye aá¹£\xecá¹£e n\xedn\xfa ${c.origin}`}})}},"zhCN",0,function(){let a,b;return{localeError:(a={string:{unit:"å­—ç¬¦",verb:"åŒ…å«"},file:{unit:"å­—èŠ‚",verb:"åŒ…å«"},array:{unit:"é¡¹",verb:"åŒ…å«"},set:{unit:"é¡¹",verb:"åŒ…å«"}},b={regex:"è¾“å…¥",email:"ç”µå­é‚®ä»¶",url:"URL",emoji:"è¡¨æƒ…ç¬¦å·",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISOæ—¥æœŸæ—¶é—´",date:"ISOæ—¥æœŸ",time:"ISOæ—¶é—´",duration:"ISOæ—¶é•¿",ipv4:"IPv4åœ°å€",ipv6:"IPv6åœ°å€",cidrv4:"IPv4ç½‘æ®µ",cidrv6:"IPv6ç½‘æ®µ",base64:"base64ç¼–ç å­—ç¬¦ä¸²",base64url:"base64urlç¼–ç å­—ç¬¦ä¸²",json_string:"JSONå­—ç¬¦ä¸²",e164:"E.164å·ç ",jwt:"JWT",template_literal:"è¾“å…¥"},c=>{switch(c.code){case"invalid_type":return`æ— æ•ˆè¾“å…¥ï¼šæœŸæœ› ${c.expected}ï¼Œå®žé™…æŽ¥æ”¶ ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"éžæ•°å­—(NaN)":"æ•°å­—";case"object":if(Array.isArray(a))return"æ•°ç»„";if(null===a)return"ç©ºå€¼(null)";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`æ— æ•ˆè¾“å…¥ï¼šæœŸæœ› ${b1(c.values[0])}`;return`æ— æ•ˆé€‰é¡¹ï¼šæœŸæœ›ä»¥ä¸‹ä¹‹ä¸€ ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`æ•°å€¼è¿‡å¤§ï¼šæœŸæœ› ${c.origin??"å€¼"} ${b}${c.maximum.toString()} ${d.unit??"ä¸ªå…ƒç´ "}`;return`æ•°å€¼è¿‡å¤§ï¼šæœŸæœ› ${c.origin??"å€¼"} ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`æ•°å€¼è¿‡å°ï¼šæœŸæœ› ${c.origin} ${b}${c.minimum.toString()} ${d.unit}`;return`æ•°å€¼è¿‡å°ï¼šæœŸæœ› ${c.origin} ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`æ— æ•ˆå­—ç¬¦ä¸²ï¼šå¿…é¡»ä»¥ "${c.prefix}" å¼€å¤´`;if("ends_with"===c.format)return`æ— æ•ˆå­—ç¬¦ä¸²ï¼šå¿…é¡»ä»¥ "${c.suffix}" ç»“å°¾`;if("includes"===c.format)return`æ— æ•ˆå­—ç¬¦ä¸²ï¼šå¿…é¡»åŒ…å« "${c.includes}"`;if("regex"===c.format)return`æ— æ•ˆå­—ç¬¦ä¸²ï¼šå¿…é¡»æ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼ ${c.pattern}`;return`æ— æ•ˆ${b[c.format]??c.format}`;case"not_multiple_of":return`æ— æ•ˆæ•°å­—ï¼šå¿…é¡»æ˜¯ ${c.divisor} çš„å€æ•°`;case"unrecognized_keys":return`å‡ºçŽ°æœªçŸ¥çš„é”®(key): ${bA(c.keys,", ")}`;case"invalid_key":return`${c.origin} ä¸­çš„é”®(key)æ— æ•ˆ`;case"invalid_union":return"æ— æ•ˆè¾“å…¥";case"invalid_element":return`${c.origin} ä¸­åŒ…å«æ— æ•ˆå€¼(value)`;default:return`æ— æ•ˆè¾“å…¥`}})}},"zhTW",0,function(){let a,b;return{localeError:(a={string:{unit:"å­—å…ƒ",verb:"æ“æœ‰"},file:{unit:"ä½å…ƒçµ„",verb:"æ“æœ‰"},array:{unit:"é …ç›®",verb:"æ“æœ‰"},set:{unit:"é …ç›®",verb:"æ“æœ‰"}},b={regex:"è¼¸å…¥",email:"éƒµä»¶åœ°å€",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO æ—¥æœŸæ™‚é–“",date:"ISO æ—¥æœŸ",time:"ISO æ™‚é–“",duration:"ISO æœŸé–“",ipv4:"IPv4 ä½å€",ipv6:"IPv6 ä½å€",cidrv4:"IPv4 ç¯„åœ",cidrv6:"IPv6 ç¯„åœ",base64:"base64 ç·¨ç¢¼å­—ä¸²",base64url:"base64url ç·¨ç¢¼å­—ä¸²",json_string:"JSON å­—ä¸²",e164:"E.164 æ•¸å€¼",jwt:"JWT",template_literal:"è¼¸å…¥"},c=>{switch(c.code){case"invalid_type":return`ç„¡æ•ˆçš„è¼¸å…¥å€¼ï¼šé æœŸç‚º ${c.expected}ï¼Œä½†æ”¶åˆ° ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`ç„¡æ•ˆçš„è¼¸å…¥å€¼ï¼šé æœŸç‚º ${b1(c.values[0])}`;return`ç„¡æ•ˆçš„é¸é …ï¼šé æœŸç‚ºä»¥ä¸‹å…¶ä¸­ä¹‹ä¸€ ${bA(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`æ•¸å€¼éŽå¤§ï¼šé æœŸ ${c.origin??"å€¼"} æ‡‰ç‚º ${b}${c.maximum.toString()} ${d.unit??"å€‹å…ƒç´ "}`;return`æ•¸å€¼éŽå¤§ï¼šé æœŸ ${c.origin??"å€¼"} æ‡‰ç‚º ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`æ•¸å€¼éŽå°ï¼šé æœŸ ${c.origin} æ‡‰ç‚º ${b}${c.minimum.toString()} ${d.unit}`;return`æ•¸å€¼éŽå°ï¼šé æœŸ ${c.origin} æ‡‰ç‚º ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`ç„¡æ•ˆçš„å­—ä¸²ï¼šå¿…é ˆä»¥ "${c.prefix}" é–‹é ­`;if("ends_with"===c.format)return`ç„¡æ•ˆçš„å­—ä¸²ï¼šå¿…é ˆä»¥ "${c.suffix}" çµå°¾`;if("includes"===c.format)return`ç„¡æ•ˆçš„å­—ä¸²ï¼šå¿…é ˆåŒ…å« "${c.includes}"`;if("regex"===c.format)return`ç„¡æ•ˆçš„å­—ä¸²ï¼šå¿…é ˆç¬¦åˆæ ¼å¼ ${c.pattern}`;return`ç„¡æ•ˆçš„ ${b[c.format]??c.format}`;case"not_multiple_of":return`ç„¡æ•ˆçš„æ•¸å­—ï¼šå¿…é ˆç‚º ${c.divisor} çš„å€æ•¸`;case"unrecognized_keys":return`ç„¡æ³•è­˜åˆ¥çš„éµå€¼${c.keys.length>1?"å€‘":""}ï¼š${bA(c.keys,"ã€")}`;case"invalid_key":return`${c.origin} ä¸­æœ‰ç„¡æ•ˆçš„éµå€¼`;case"invalid_union":return"ç„¡æ•ˆçš„è¼¸å…¥å€¼";case"invalid_element":return`${c.origin} ä¸­æœ‰ç„¡æ•ˆçš„å€¼`;default:return`ç„¡æ•ˆçš„è¼¸å…¥å€¼`}})}}],13739);var kD=a.i(13739);a.i(42407),a.i(14087),a.i(82387),a.i(17889);var kE=a.i(68593);a.s(["$ZodAny",0,eK,"$ZodArray",0,eQ,"$ZodAsyncError",()=>bq,"$ZodBase64",0,ev,"$ZodBase64URL",0,ex,"$ZodBigInt",0,eF,"$ZodBigIntFormat",0,eG,"$ZodBoolean",0,eE,"$ZodCIDRv4",0,es,"$ZodCIDRv6",0,et,"$ZodCUID",0,eg,"$ZodCUID2",0,eh,"$ZodCatch",0,fj,"$ZodCheck",0,dJ,"$ZodCheckBigIntFormat",0,dP,"$ZodCheckEndsWith",0,d0,"$ZodCheckGreaterThan",0,dM,"$ZodCheckIncludes",0,d$,"$ZodCheckLengthEquals",0,dV,"$ZodCheckLessThan",0,dL,"$ZodCheckLowerCase",0,dY,"$ZodCheckMaxLength",0,dT,"$ZodCheckMaxSize",0,dQ,"$ZodCheckMimeType",0,d3,"$ZodCheckMinLength",0,dU,"$ZodCheckMinSize",0,dR,"$ZodCheckMultipleOf",0,dN,"$ZodCheckNumberFormat",0,dO,"$ZodCheckOverwrite",0,d4,"$ZodCheckProperty",0,d2,"$ZodCheckRegex",0,dX,"$ZodCheckSizeEquals",0,dS,"$ZodCheckStartsWith",0,d_,"$ZodCheckStringFormat",0,dW,"$ZodCheckUpperCase",0,dZ,"$ZodCodec",0,fn,"$ZodCustom",0,fw,"$ZodCustomStringFormat",0,eB,"$ZodDate",0,eO,"$ZodDefault",0,fd,"$ZodDiscriminatedUnion",0,eY,"$ZodE164",0,ey,"$ZodEmail",0,ec,"$ZodEmoji",0,ee,"$ZodEncodeError",()=>br,"$ZodEnum",0,e6,"$ZodError",0,cs,"$ZodFile",0,e8,"$ZodFunction",0,ft,"$ZodGUID",0,ea,"$ZodIPv4",0,ep,"$ZodIPv6",0,eq,"$ZodISODate",0,em,"$ZodISODateTime",0,el,"$ZodISODuration",0,eo,"$ZodISOTime",0,en,"$ZodIntersection",0,eZ,"$ZodJWT",0,eA,"$ZodKSUID",0,ek,"$ZodLazy",0,fv,"$ZodLiteral",0,e7,"$ZodMAC",0,er,"$ZodMap",0,e2,"$ZodNaN",0,fk,"$ZodNanoID",0,ef,"$ZodNever",0,eM,"$ZodNonOptional",0,fg,"$ZodNull",0,eJ,"$ZodNullable",0,fc,"$ZodNumber",0,eC,"$ZodNumberFormat",0,eD,"$ZodObject",0,eU,"$ZodObjectJIT",0,eV,"$ZodOptional",0,fb,"$ZodPipe",0,fl,"$ZodPrefault",0,ff,"$ZodPromise",0,fu,"$ZodReadonly",0,fq,"$ZodRealError",0,ct,"$ZodRecord",0,e1,"$ZodRegistry",()=>fI,"$ZodSet",0,e4,"$ZodString",0,d8,"$ZodStringFormat",0,d9,"$ZodSuccess",0,fi,"$ZodSymbol",0,eH,"$ZodTemplateLiteral",0,fs,"$ZodTransform",0,e9,"$ZodTuple",0,e_,"$ZodType",0,d7,"$ZodULID",0,ei,"$ZodURL",0,ed,"$ZodUUID",0,eb,"$ZodUndefined",0,eI,"$ZodUnion",0,eX,"$ZodUnknown",0,eL,"$ZodVoid",0,eN,"$ZodXID",0,ej,"$brand",0,bp,"$constructor",()=>bo,"$input",0,fH,"$output",0,fG,"Doc",()=>d5,"JSONSchema",0,kE,"JSONSchemaGenerator",()=>hx,"NEVER",0,bn,"TimePrecision",0,f8,"_any",()=>gt,"_array",()=>g1,"_base64",()=>f4,"_base64url",()=>f5,"_bigint",()=>gm,"_boolean",()=>gk,"_catch",()=>hj,"_check",()=>hs,"_cidrv4",()=>f2,"_cidrv6",()=>f3,"_coercedBigint",()=>gn,"_coercedBoolean",()=>gl,"_coercedDate",()=>gy,"_coercedNumber",()=>ge,"_coercedString",()=>fM,"_cuid",()=>fW,"_cuid2",()=>fX,"_custom",()=>hp,"_date",()=>gx,"_decode",0,cJ,"_decodeAsync",0,cN,"_default",()=>hg,"_discriminatedUnion",()=>g3,"_e164",()=>f6,"_email",()=>fN,"_emoji",()=>fU,"_encode",0,cH,"_encodeAsync",0,cL,"_endsWith",()=>gU,"_enum",()=>g9,"_file",()=>hc,"_float32",()=>gg,"_float64",()=>gh,"_gt",()=>gC,"_gte",()=>gD,"_guid",()=>fO,"_includes",()=>gS,"_int",()=>gf,"_int32",()=>gi,"_int64",()=>go,"_intersection",()=>g4,"_ipv4",()=>f_,"_ipv6",()=>f0,"_isoDate",()=>ga,"_isoDateTime",()=>f9,"_isoDuration",()=>gc,"_isoTime",()=>gb,"_jwt",()=>f7,"_ksuid",()=>f$,"_lazy",()=>hn,"_length",()=>gO,"_literal",()=>hb,"_lowercase",()=>gQ,"_lt",()=>gA,"_lte",()=>gB,"_mac",()=>f1,"_map",()=>g7,"_max",()=>gB,"_maxLength",()=>gM,"_maxSize",()=>gJ,"_mime",()=>gW,"_min",()=>gD,"_minLength",()=>gN,"_minSize",()=>gK,"_multipleOf",()=>gI,"_nan",()=>gz,"_nanoid",()=>fV,"_nativeEnum",()=>ha,"_negative",()=>gF,"_never",()=>gv,"_nonnegative",()=>gH,"_nonoptional",()=>hh,"_nonpositive",()=>gG,"_normalize",()=>gY,"_null",()=>gs,"_nullable",()=>hf,"_number",()=>gd,"_optional",()=>he,"_overwrite",()=>gX,"_parse",0,cz,"_parseAsync",0,cB,"_pipe",()=>hk,"_positive",()=>gE,"_promise",()=>ho,"_property",()=>gV,"_readonly",()=>hl,"_record",()=>g6,"_refine",()=>hq,"_regex",()=>gP,"_safeDecode",0,cR,"_safeDecodeAsync",0,cV,"_safeEncode",0,cP,"_safeEncodeAsync",0,cT,"_safeParse",0,cD,"_safeParseAsync",0,cF,"_set",()=>g8,"_size",()=>gL,"_slugify",()=>g0,"_startsWith",()=>gT,"_string",()=>fL,"_stringFormat",()=>hw,"_stringbool",()=>hv,"_success",()=>hi,"_superRefine",()=>hr,"_symbol",()=>gq,"_templateLiteral",()=>hm,"_toLowerCase",()=>g$,"_toUpperCase",()=>g_,"_transform",()=>hd,"_trim",()=>gZ,"_tuple",()=>g5,"_uint32",()=>gj,"_uint64",()=>gp,"_ulid",()=>fY,"_undefined",()=>gr,"_union",()=>g2,"_unknown",()=>gu,"_uppercase",()=>gR,"_url",()=>fT,"_uuid",()=>fP,"_uuidv4",()=>fQ,"_uuidv6",()=>fR,"_uuidv7",()=>fS,"_void",()=>gw,"_xid",()=>fZ,"clone",()=>b$,"config",()=>bt,"decode",0,cK,"decodeAsync",0,cO,"describe",()=>ht,"encode",0,cI,"encodeAsync",0,cM,"flattenError",()=>cu,"formatError",()=>cv,"globalConfig",0,bs,"globalRegistry",0,fK,"isValidBase64",()=>eu,"isValidBase64URL",()=>ew,"isValidJWT",()=>ez,"locales",0,kD,"meta",()=>hu,"parse",0,cA,"parseAsync",0,cC,"prettifyError",()=>cy,"regexes",0,kC,"registry",()=>fJ,"safeDecode",0,cS,"safeDecodeAsync",0,cW,"safeEncode",0,cQ,"safeEncodeAsync",0,cU,"safeParse",0,cE,"safeParseAsync",0,cG,"toDotPath",()=>cx,"toJSONSchema",()=>hy,"treeifyError",()=>cw,"util",0,kB,"version",0,d6],77453);var kF=a.i(77453);a.i(54714),a.i(77889),a.s(["endsWith",()=>gU,"gt",()=>gC,"gte",()=>gD,"includes",()=>gS,"length",()=>gO,"lowercase",()=>gQ,"lt",()=>gA,"lte",()=>gB,"maxLength",()=>gM,"maxSize",()=>gJ,"mime",()=>gW,"minLength",()=>gN,"minSize",()=>gK,"multipleOf",()=>gI,"negative",()=>gF,"nonnegative",()=>gH,"nonpositive",()=>gG,"normalize",()=>gY,"overwrite",()=>gX,"positive",()=>gE,"property",()=>gV,"regex",()=>gP,"size",()=>gL,"slugify",()=>g0,"startsWith",()=>gT,"toLowerCase",()=>g$,"toUpperCase",()=>g_,"trim",()=>gZ,"uppercase",()=>gR],49825),a.i(49825),a.i(77818),a.i(51725),a.i(69002),a.s(["$brand",0,bp,"ZodFirstPartyTypeKind",()=>c,"ZodIssueCode",0,kt,"config",()=>bt,"getErrorMap",()=>kv,"setErrorMap",()=>ku],25770),a.i(25770);var hA=hA,hB=hB,kG=a.i(6794),kH=a.i(15712);a.s(["$brand",0,bp,"$input",0,fH,"$output",0,fG,"NEVER",0,bn,"TimePrecision",0,f8,"ZodAny",0,ja,"ZodArray",0,jk,"ZodBase64",0,iE,"ZodBase64URL",0,iG,"ZodBigInt",0,i_,"ZodBigIntFormat",0,i1,"ZodBoolean",0,iZ,"ZodCIDRv4",0,iA,"ZodCIDRv6",0,iC,"ZodCUID",0,ij,"ZodCUID2",0,il,"ZodCatch",0,j0,"ZodCodec",0,j6,"ZodCustom",0,ki,"ZodCustomStringFormat",0,iM,"ZodDate",0,ji,"ZodDefault",0,jU,"ZodDiscriminatedUnion",0,jt,"ZodE164",0,iI,"ZodEmail",0,h2,"ZodEmoji",0,ie,"ZodEnum",0,jG,"ZodError",0,hL,"ZodFile",0,jL,"ZodFirstPartyTypeKind",()=>c,"ZodFunction",0,kg,"ZodGUID",0,h4,"ZodIPv4",0,iu,"ZodIPv6",0,iy,"ZodISODate",0,hE,"ZodISODateTime",0,hC,"ZodISODuration",0,hI,"ZodISOTime",0,hG,"ZodIntersection",0,jv,"ZodIssueCode",0,kt,"ZodJWT",0,iK,"ZodKSUID",0,is,"ZodLazy",0,kc,"ZodLiteral",0,jJ,"ZodMAC",0,iw,"ZodMap",0,jC,"ZodNaN",0,j2,"ZodNanoID",0,ih,"ZodNever",0,je,"ZodNonOptional",0,jY,"ZodNull",0,i8,"ZodNullable",0,jR,"ZodNumber",0,iR,"ZodNumberFormat",0,iT,"ZodObject",0,jn,"ZodOptional",0,jP,"ZodPipe",0,j4,"ZodPrefault",0,jW,"ZodPromise",0,ke,"ZodReadonly",0,j8,"ZodRealError",0,hM,"ZodRecord",0,jz,"ZodSet",0,jE,"ZodString",0,h_,"ZodStringFormat",0,h1,"ZodSuccess",0,j$,"ZodSymbol",0,i4,"ZodTemplateLiteral",0,ka,"ZodTransform",0,jN,"ZodTuple",0,jx,"ZodType",0,hZ,"ZodULID",0,io,"ZodURL",0,ib,"ZodUUID",0,h6,"ZodUndefined",0,i6,"ZodUnion",0,jr,"ZodUnknown",0,jc,"ZodVoid",0,jg,"ZodXID",0,iq,"_ZodString",0,h$,"_default",()=>jV,"_function",()=>kh,"any",()=>jb,"array",()=>jl,"base64",()=>iF,"base64url",()=>iH,"bigint",()=>i0,"boolean",()=>i$,"catch",()=>j1,"check",()=>kj,"cidrv4",()=>iB,"cidrv6",()=>iD,"clone",()=>b$,"codec",()=>j7,"coerce",0,kH,"config",()=>bt,"core",0,kF,"cuid",()=>ik,"cuid2",()=>im,"custom",()=>kk,"date",()=>jj,"decode",0,hS,"decodeAsync",0,hU,"describe",0,kn,"discriminatedUnion",()=>ju,"e164",()=>iJ,"email",()=>h3,"emoji",()=>ig,"encode",0,hR,"encodeAsync",0,hT,"endsWith",()=>gU,"enum",()=>jH,"file",()=>jM,"flattenError",()=>cu,"float32",()=>iV,"float64",()=>iW,"formatError",()=>cv,"function",()=>kh,"getErrorMap",()=>kv,"globalRegistry",0,fK,"gt",()=>gC,"gte",()=>gD,"guid",()=>h5,"hash",()=>iQ,"hex",()=>iP,"hostname",()=>iO,"httpUrl",()=>id,"includes",()=>gS,"instanceof",()=>kp,"int",()=>iU,"int32",()=>iX,"int64",()=>i2,"intersection",()=>jw,"ipv4",()=>iv,"ipv6",()=>iz,"iso",0,kG,"json",()=>kr,"jwt",()=>iL,"keyof",()=>jm,"ksuid",()=>it,"lazy",()=>kd,"length",()=>gO,"literal",()=>jK,"locales",0,kD,"looseObject",()=>jq,"lowercase",()=>gQ,"lt",()=>gA,"lte",()=>gB,"mac",()=>ix,"map",()=>jD,"maxLength",()=>gM,"maxSize",()=>gJ,"meta",0,ko,"mime",()=>gW,"minLength",()=>gN,"minSize",()=>gK,"multipleOf",()=>gI,"nan",()=>j3,"nanoid",()=>ii,"nativeEnum",()=>jI,"negative",()=>gF,"never",()=>jf,"nonnegative",()=>gH,"nonoptional",()=>jZ,"nonpositive",()=>gG,"normalize",()=>gY,"null",()=>i9,"nullable",()=>jS,"nullish",()=>jT,"number",()=>iS,"object",()=>jo,"optional",()=>jQ,"overwrite",()=>gX,"parse",0,hN,"parseAsync",0,hO,"partialRecord",()=>jB,"pipe",()=>j5,"positive",()=>gE,"prefault",()=>jX,"preprocess",()=>ks,"prettifyError",()=>cy,"promise",()=>kf,"property",()=>gV,"readonly",()=>j9,"record",()=>jA,"refine",()=>kl,"regex",()=>gP,"regexes",()=>hA,"registry",()=>fJ,"safeDecode",0,hW,"safeDecodeAsync",0,hY,"safeEncode",0,hV,"safeEncodeAsync",0,hX,"safeParse",0,hP,"safeParseAsync",0,hQ,"set",()=>jF,"setErrorMap",()=>ku,"size",()=>gL,"slugify",()=>g0,"startsWith",()=>gT,"strictObject",()=>jp,"string",()=>h0,"stringFormat",()=>iN,"stringbool",0,kq,"success",()=>j_,"superRefine",()=>km,"symbol",()=>i5,"templateLiteral",()=>kb,"toJSONSchema",()=>hy,"toLowerCase",()=>g$,"toUpperCase",()=>g_,"transform",()=>jO,"treeifyError",()=>cw,"trim",()=>gZ,"tuple",()=>jy,"uint32",()=>iY,"uint64",()=>i3,"ulid",()=>ip,"undefined",()=>i7,"union",()=>js,"unknown",()=>jd,"uppercase",()=>gR,"url",()=>ic,"util",()=>hB,"uuid",()=>h7,"uuidv4",()=>h8,"uuidv6",()=>h9,"uuidv7",()=>ia,"void",()=>jh,"xid",()=>ir],57441);var kI=a.i(57441),kI=kI;let kJ=kI.object({title:kI.string().min(1,"Topic is required"),referenceContent:kI.string().min(50,"Reference content must be at least 50 characters"),sampleOutline:kI.string().optional(),authorityTerms:kI.string().optional(),websiteType:kI.string().optional(),targetAudience:kI.enum(["zh-TW","zh-HK","zh-MY"]),useRag:kI.boolean(),autoImagePlan:kI.boolean(),productRawText:kI.string().optional(),urlInput:kI.string().url("Invalid URL").optional().or(kI.literal("")),productUrlList:kI.string().optional()});var kK=a.i(12794),kL=a.i(18544),kM=a.i(33791),kN=a.i(42871),kO=class extends kM.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,kN.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,kN.hashKey)(b.mutationKey)!==(0,kN.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,kK.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){kL.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#d.onSuccess?.(a.data,b,c,d),this.#d.onSettled?.(a.data,null,b,c,d)):a?.type==="error"&&(this.#d.onError?.(a.error,b,c,d),this.#d.onSettled?.(void 0,a.error,b,c,d))}this.listeners.forEach(a=>{a(this.#b)})})}},kP=a.i(37927);function kQ(a,b){let c=(0,kP.useQueryClient)(b),[d]=e.useState(()=>new kO(c,a));e.useEffect(()=>{d.setOptions(a)},[d,a]);let f=e.useSyncExternalStore(e.useCallback(a=>d.subscribe(kL.notifyManager.batchCalls(a)),[d]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),g=e.useCallback((a,b)=>{d.mutate(a,b).catch(kN.noop)},[d]);if(f.error&&(0,kN.shouldThrowError)(d.options.throwOnError,[f.error]))throw f.error;return{...f,mutate:g,mutateAsync:f.mutate}}let kR=async(a,b={})=>{if(!a)return{title:"",content:"",images:[]};try{new URL(a)}catch(a){throw Error("Invalid URL format")}try{let c={"x-no-cache":"false","X-Md-Heading-Style":"setext"};b.includeNav?c["X-Remove-Selector"]="aside":c["X-Remove-Selector"]="header, footer, nav, aside";let d=await fetch(`https://r.jina.ai/${a}`,{method:"GET",headers:c});if(!d.ok)throw Error(`Failed to fetch content: ${d.statusText}`);let e=await d.text();if(!e||e.length<50)throw Error("Content retrieved is too short or empty.");return{...kS(e)}}catch(a){throw console.error("Web Scraping Error:",a),Error(a.message||"Failed to scrape URL")}},kS=a=>{let b=a.match(/^Title:\s*(.+)$/m),c=b?b[1].trim():"",d=a;a.includes("Markdown Content:")&&(d=a.split("Markdown Content:").slice(1).join("Markdown Content:"));let e=kT(d.trim()),f=((a,b=50)=>{let c,d=/!\[(.*?)\]\((.*?)\)/g,e=[];for(;null!==(c=d.exec(a));){let d=c[0],f=c[1],g=c[2],h=c.index,i=d.length,j=Math.max(0,h-b),k=Math.min(a.length,h+i+b),l=a.substring(j,h).trim(),m=a.substring(h+i,k).trim();e.push({index:h,length:i,image:{url:g,preContext:l,altText:f,postContext:m}})}if(e.length<=10)return e.map(a=>a.image);let f=[],g=-1;for(let b of e){if(-1===g){f.push(b.image),g=b.index+b.length;continue}a.substring(g,b.index).replace(/\s/g,"").length>=30&&(f.push(b.image),g=b.index+b.length)}return f})(e);return e=kU(e),c&&!e.startsWith("#")&&(e=`# ${c}

${e}`),{title:c,content:e,images:f}},kT=a=>{let b=a.split("\n"),c=[],d=!1;for(let a=0;a<b.length;a++){let e=b[a];if(/^\s*(```|~~~)/.test(e.trim())){d=!d,c.push(e);continue}if(!d&&a+1<b.length){let d=b[a+1].match(/^\s*(=+|-+)\s*$/),f=e.trim().length>0,g=0===a||""===b[a-1].trim();if(d&&f&&g){let b=d[1].startsWith("=")?"#":"##";c.push(`${b} ${e.trim()}`),a++;continue}}c.push(e)}return c.join("\n")},kU=a=>{let b,c=a;[/^Ad Placement\s*:.*$/gim,/^(Login|ç™»å…¥|Sign In).*$/gim,/^ADVERTISEMENT$/gim,/^CONTINUE READING BELOW$/gim,/^Share on:.*$/gim,/^recommended$/gim,/^Related Articles:?$/gim,/^Read More:?$/gim,/^SCROLL TO CONTINUE\s*:.*$/gim,/^[ \t]*\S{1,2}[ \t]*$/gm].forEach(a=>{c=c.replace(a,"")}),c=(c=(c=(c=c.replace(/!\[.*?\]\(.*?\)/g,"")).replace(/^!Image\s+\d+:.*$/gm,"")).replace(/!Image\s*\[.*?\]/gi,"")).replace(/^\]\(.*?\)/gm,"");let d=/\[(.*?)\]\(.*?\)/g,e=[];for(;null!==(b=d.exec(c));)e.push({index:b.index,length:b[0].length});if(e.length>6){let a=[],b=-1;for(let d=0;d<e.length;d++){let f=e[d],g=f.index,h=g+f.length;if(0===d){b=h;continue}c.substring(b,g).replace(/\s/g,"").length<30?a.push({start:g,end:h}):b=h}for(let b=a.length-1;b>=0;b--){let d=a[b];c=c.substring(0,d.start)+c.substring(d.end)}}return c=(c=(c=(c=(c=(c=(c=(c=(c=c.replace(/\[\s*\]\(.*?\)/g,"")).replace(/^\s*([-*]|\d+\.)\s*$/gm,"")).replace(/\[([^\]]+)\]\([^\)]+\)/g,"$1")).replace(/^\s*(UA-\d+-\d+|G-[A-Z0-9]+)\s*$/gm,"")).replace(/^(holiday|girlstyle|businessfocus|mamidaily)\s*$/gim,"")).replace(/^All\s+[\u4e00-\u9fa5]+.*$/gm,"")).replace(/^\s*-{3,}\s*$/gm,"")).replace(/^\s*\u25b2?\s*Cosmopolitan\.com\.hk\s*$/gim,"")).replace(/\n{3,}/g,"\n\n").trim()},kV=async a=>{let b=`
    Scan the following content and extract:
    1) websiteType: e.g., "Medical Clinic", "Ecommerce", "Blog".
    2) authorityTerms: up to 5 key terms related to brand authority (certifications, ingredients, key specs).
    CONTENT:
    ${a.substring(0,6e3)}
    OUTPUT JSON: { "websiteType": "...", "authorityTerms": "comma separated terms" }
    `;return await U.runJson(b,"FLASH",{type:V,properties:{websiteType:{type:X},authorityTerms:{type:X}}})},kW=async(a,b)=>{let c=Date.now(),d=I(b),e=(({content:a,targetAudience:b,languageInstruction:c})=>`
    Analyze the reference text to extract the Narrative Structure.
    
    1) The H1 title and introductory paragraph (first paragraph after H1).
    2) A Logical Outline (H2 -> H3) with narrative goals.
    3) Key information points (Facts) for each section.
    4) Key information points (General) to preserve.
    5) **Sentence Feature Analysis**:
       - Analyze how sentences BEGIN in each section (common starters, transition words).
       - Analyze how sentences END in each section (punctuation patterns, concluding intent, common closing phrases).

    <TargetAudience>
    ${b}
    </TargetAudience>
    DEFINITION: The target region.
    
    <LanguageInstruction>
    ${c}
    </LanguageInstruction>
    DEFINITION: Output language.

    STRICT HEADING RULES:
    - Enumerate EVERY H2 and its child H3s in order from the reference.
    - Use the exact heading text as it appears (do NOT rewrite, paraphrase, translate, or renumber).
    - Keep awkward wording or punctuation intact; only trim whitespace.
    - If no clear headings exist, infer concise H2s, otherwise never replace existing ones.
    
    SECTION RELEVANCE FILTER:
    - If a section title is IRRELEVANT to the main article topic (e.g., "ç›®éŒ„", "å°Žè¦½", "æ¸…å–®", "å»¶ä¼¸é–±è®€", "ç›¸é—œæ–‡ç« ", unrelated sidebar), mark it with difficulty: "unclear" AND set "exclude": true.
    - Specifically for "ç›®éŒ„" (Table of Contents), ALWAYS set "exclude": true.
    - Excluded sections will be REMOVED from the generated outline.
    - Only include sections that contribute to the main content.

    MANDATORY KEY FACTS:
    - For EVERY section you include, you MUST extract at least 3-5 "keyFacts" from the reference text.
    - A "keyFact" is a specific, verifiable piece of information (numbers, technical specs, specific benefits).
    - If you return a section with empty "keyFacts", your response will be rejected.
    
    âš ï¸ NEGATIVE SIGNAL DETECTION(CRITICAL):
    When analyzing each section, carefully identify NEGATIVE SIGNALS - content that should NOT be included in that section. These include:
    - Phrases like "ä¸æ‡‰åœ¨æ­¤è™•", "æ‡‰æ–¼...æåŠ" (content that belongs elsewhere)
    - Off-topic sidebars
    
        IMPORTANT: Any negative instruction or off-topic content MUST go into the "suppress" array.
    
    <ContentToAnalyze>
    ${a}
    </ContentToAnalyze>
    DEFINITION: The reference text.

    STRICT OUTPUT RULES:
    1. For every active section (exclude: false), you MUST provide a detailed "narrativePlan" (3+ points) and "keyFacts" (2+ facts).
    2. NEVER leave "narrativePlan", "coreQuestion", or "keyFacts" as empty arrays/strings for relevant sections.
    3. If the reference content is sparse, use your expert knowledge to infer a logical plan and relevant facts that fit the topic.
    
    OUTPUT JSON:
    {
      "h1Title": "Exact H1 title text",
      "introText": "The first paragraph/intro text after H1 (if available)",
      "structure": [
        {
          "title": "Exact H2 text (no rewrite)",
          "subheadings": ["Exact H3 text 1", "Exact H3 text 2"],
          "narrativePlan": ["Positive guidance 1", "Positive guidance 2"],
          "coreQuestion": "Main question/problem",
          "difficulty": "easy | medium | unclear",
          "exclude": false,
          "excludeReason": "Only set if exclude=true",
          "writingMode": "direct | multi_solutions",
          "solutionAngles": ["angle 1", "angle 2"],
          "keyFacts": ["Fact 1", "Fact 2"],
          "uspNotes": ["USP relevant to this section"],
          "isChecklist": false,
          "suppress": ["Negative constraint 1"],
          "augment": ["Content to add"],
          "sentenceStartFeatures": ["Observed patterns for sentence beginnings"],
          "sentenceEndFeatures": ["Observed patterns for sentence endings (e.g., concludes with a question, uses specific punctuation, ends with a call to action)"]
        }
      ],
      "keyInformationPoints": ["General key fact 1", "General key fact 2"]
    }
    `)({content:a,targetAudience:b,languageInstruction:d}),f=(({content:a,targetAudience:b,languageInstruction:c})=>`
    Analyze the reference text to extract the Voice and Brand Strategy.

    1) Voice & Tone (General Plan).
    2) Conversion Strategy (Offers, CTAs, Risk Reversals).
    3) Brand Exclusive Points (USP).
    4) Competitor Names/Products to suppress. (CRITICAL: Do NOT list the region name "${b}" itself as a competitor).
    5) **Regional Entities Detection**: CRITICAL - Identify ALL brands, stores, services, or entities that are SPECIFIC to a different region and NOT available in the target region "${b}".
       - For zh-HK target: Detect Taiwan-specific brands (å¦‚ï¼šå¯¶é›…ã€å…¨è¯ã€momoè³¼ç‰©ã€è¦çš®å°ç£), Taiwan fashion brands, Taiwan chain stores.
       - For zh-TW target: Detect Hong Kong-specific brands (å¦‚ï¼šHKTVmallã€ç™¾ä½³ã€æƒ åº·ã€sasa), HK chain stores.
       - These should be added to competitorBrands or competitorProducts even if they are not direct competitors.
    6) Regional Validity (Brand Availability).
    7) Human Writing Characteristics.

    <TargetAudience>
    ${b}
    </TargetAudience>
    DEFINITION: The target region. ALL entities not available in this region should be flagged as competitorBrands/Products.
    
    <LanguageInstruction>
    ${c}
    </LanguageInstruction>
    DEFINITION: Output language.

    <ContentToAnalyze>
    ${a}
    </ContentToAnalyze>
    DEFINITION: The reference text to analyze.

    ## Voice Strategy Analysis
    - ** regionVoiceDetect **: Analyze the "Regional Voice Composition" of the text (e.g., usage of regional slang like "åœ°é“/è²¼åœ°" for HK vs "æŽ¥åœ°æ°£" for TW).
      - Calculate an approximate PERCENTAGE breakdown.
      - Return a string like: "70% HK / 30% TW" or "100% TW".
      - If uncertain or neutral, return "Neutral / Unclear".
    - ** humanWritingVoice **: Analyze the first 300 words (or the full Intro Paragraph). Explain "Why does this sound HUMAN?" by following these 5 steps:
      1. **Emotions & Subjectivity**: Identify subjective judgments/cultural evaluations (unlike AI's objective tone).
      2. **Tone & Particles**: Look for sentence-final particles (èªžåŠ©è©ž like å–”, å”·) that create intimacy.
      3. **Persona & Self-Ref**: Does the writer refer to themselves (e.g. "Dr. X") or assume a character?
      4. **Cultural Metaphors**: Does it link facts to cultural concepts (e.g. physiognomy/fortune telling é¢ç›¸) rather than just medical facts?
      5. **Social Intent**: Is there a call for interaction (save/share) vs just providing info?
      *Summarize these findings into a concise guide.*
    - ** competitorBrands **: List ALL brands that should be avoided, including:
      - Direct competitors mentioned in the text
      - **Region-specific brands/stores NOT available in ${b}** (e.g., Taiwan brands éŸŒ REN, Fashion for Yes, å¯¶é›… when targeting Hong Kong)
    - ** competitorProducts **: List ALL products that should be avoided or replaced.

    Return JSON only, no extra text or markdown fences.`)({content:a,targetAudience:b,languageInstruction:d});try{let[a,b]=await Promise.all([U.runJson(e,"FLASH",{type:V,properties:{h1Title:{type:X},introText:{type:X},keyInformationPoints:{type:W,items:{type:X}},structure:{type:W,items:{type:V,properties:{title:{type:X},narrativePlan:{type:W,items:{type:X}},coreQuestion:{type:X},difficulty:{type:X,description:"easy | medium | unclear"},exclude:{type:Y},excludeReason:{type:X},writingMode:{type:X,description:"direct | multi_solutions"},solutionAngles:{type:W,items:{type:X}},subheadings:{type:W,items:{type:X}},keyFacts:{type:W,items:{type:X}},uspNotes:{type:W,items:{type:X}},isChecklist:{type:Y},suppress:{type:W,items:{type:X}},augment:{type:W,items:{type:X}},sentenceStartFeatures:{type:W,items:{type:X}},sentenceEndFeatures:{type:W,items:{type:X}}},required:["title","narrativePlan","coreQuestion","writingMode","keyFacts"]}}},required:["h1Title","introText","structure","keyInformationPoints"]}),U.runJson(f,"FLASH",{type:V,properties:{generalPlan:{type:W,items:{type:X}},conversionPlan:{type:W,items:{type:X}},brandExclusivePoints:{type:W,items:{type:X}},competitorBrands:{type:W,items:{type:X}},competitorProducts:{type:W,items:{type:X}},regionVoiceDetect:{type:X},humanWritingVoice:{type:X}},required:["generalPlan","conversionPlan","brandExclusivePoints","regionVoiceDetect","humanWritingVoice"]})]),d=a.data,g=b.data;console.log("[RefAnalysis] Raw AI Structure Data:",JSON.stringify(d,null,2)),console.log("[RefAnalysis] Raw AI Voice Data:",JSON.stringify(g,null,2));let h=(d.structure||[]).filter(a=>!0===a.exclude?(console.log(`[RefAnalysis] AI Excluded section: "${a.title}" - Reason: ${a.excludeReason||"irrelevant"}`),!1):!["ç›®éŒ„","å°Žè¦½","æ¸…å–®","å¼•è¨€","å»¶ä¼¸é–±è®€","ç›¸é—œæ–‡ç« ","Table of Contents","TOC","Introduction"].some(b=>a.title.includes(b)&&a.title.length<15)||(console.log(`[RefAnalysis] Auto-Excluding navigational section: "${a.title}"`),!1)).map(a=>{let b={...a,subheadings:Array.isArray(a.subheadings)?a.subheadings:[],keyFacts:Array.isArray(a.keyFacts)?a.keyFacts:[],uspNotes:Array.isArray(a.uspNotes)?a.uspNotes:[],suppress:Array.isArray(a.suppress)?a.suppress:[],augment:Array.isArray(a.augment)?a.augment:[],narrativePlan:Array.isArray(a.narrativePlan)?a.narrativePlan:[],sentenceStartFeatures:Array.isArray(a.sentenceStartFeatures)?a.sentenceStartFeatures:[],sentenceEndFeatures:Array.isArray(a.sentenceEndFeatures)?a.sentenceEndFeatures:[]};if(0===b.narrativePlan.length||0===b.keyFacts.length)throw console.error(`[RefAnalysis] Section "${a.title}" failed validation: Missing Narrative Plan or Key Facts.`),Error(`Invalid Narrative Structure: Section "${a.title}" is missing required content (Plan/Facts).`);return b}),i=[...g.competitorBrands||[],...g.competitorProducts||[]],j={inputTokens:(a.usage?.inputTokens||0)+(b.usage?.inputTokens||0),outputTokens:(a.usage?.outputTokens||0)+(b.usage?.outputTokens||0),totalTokens:(a.usage?.totalTokens||0)+(b.usage?.totalTokens||0)},k={inputCost:(a.cost?.inputCost||0)+(b.cost?.inputCost||0),outputCost:(a.cost?.outputCost||0)+(b.cost?.outputCost||0),totalCost:(a.cost?.totalCost||0)+(b.cost?.totalCost||0)};return{data:{h1Title:d.h1Title||"",introText:d.introText||"",structure:h,keyInformationPoints:d.keyInformationPoints||[],generalPlan:g.generalPlan||[],conversionPlan:g.conversionPlan||[],brandExclusivePoints:g.brandExclusivePoints||[],replacementRules:i,competitorBrands:g.competitorBrands||[],competitorProducts:g.competitorProducts||[],regionVoiceDetect:g.regionVoiceDetect,humanWritingVoice:g.humanWritingVoice},usage:j,cost:k,duration:Date.now()-c}}catch(a){return console.error("Structure analysis failed",a),{data:{structure:[],generalPlan:[],conversionPlan:[],keyInformationPoints:[],brandExclusivePoints:[],replacementRules:[],competitorBrands:[],competitorProducts:[]},usage:G(0),cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-c}}},kX={get url(){return`file://${a.P("src/services/engine/embeddingService.ts")}`}},kY=kX.env?kX.env:process.env,kZ=a=>Array.isArray(a)?a:null,k$=a=>{if(!Array.isArray(a))return null;let b=a.map(a=>kZ(a)).filter(Boolean);return b.length?b:null},k_=async(a,b={})=>{if(!Array.isArray(a)||0===a.length)return[];let c={};b.taskType&&(c.taskType=b.taskType),b.outputDimensionality&&(c.outputDimensionality=b.outputDimensionality);let d={texts:a,model:B};b.taskType&&(d.taskType=b.taskType),b.outputDimensionality&&(d.outputDimensionality=b.outputDimensionality),Object.keys(c).length>0&&(d.providerOptions={google:c});let e=kY.VITE_AI_TOKEN||kY.AI_TOKEN,f={"Content-Type":"application/json"};e&&(f.Authorization=`Bearer ${e}`);let g=await fetch(N("/embed"),{method:"POST",headers:f,body:JSON.stringify(d),...b.signal?{signal:b.signal}:{}}),h=(g.headers.get("content-type")||"").includes("application/json");if(!g.ok){let a=h?await g.json().catch(()=>void 0):await g.text(),b="string"==typeof a?a:a?.error||JSON.stringify(a||"");throw Error(`Failed to fetch embeddings: ${g.status} ${b||""}`.trim())}let i=(a=>{if(!a)return[];let b=k$(a.embeddings);if(b)return b;let c=a.data,d=k$(c?.embeddings);if(d)return d;if(Array.isArray(c)){let a=c.map(a=>k$(a?.embeddings)?.[0]||kZ(a?.embedding)||kZ(a)).filter(Boolean);if(a.length)return a}let e=kZ(a.embedding)||kZ(c?.embedding)||kZ(c);return e?[e]:[]})(h?await g.json():{embeddings:[]});if(!i.length)throw Error("Embedding response did not include vectors");return i.length!==a.length?a.map((a,b)=>i[b]||[]):i},k0=(a,b)=>{if(!a?.length||!b?.length||a.length!==b.length)return 0;let c=0,d=0,e=0;for(let f=0;f<a.length;f++)c+=a[f]*b[f],d+=a[f]*a[f],e+=b[f]*b[f];let f=Math.sqrt(d)*Math.sqrt(e);return 0===f?0:c/f},k1=a=>a.split(/\n\s*\n+/).map(a=>a.trim()).filter(Boolean),k2=({value:a,onChange:b,onCommit:c})=>{let[f,g]=e.default.useState(a);e.default.useEffect(()=>{g(a)},[a]);let h=()=>{c(f)};return(0,d.jsx)("input",{type:"number",min:"0",max:"1",step:"0.01",value:f,onChange:a=>{g(a.target.value),b(a.target.value)},onBlur:h,onKeyDown:a=>{"Enter"===a.key&&(a.preventDefault(),h())},className:"w-24 px-2 py-1 text-[11px] border border-gray-200 rounded-lg text-gray-800 shadow-inner"})},k3=({onGenerate:a,onGenerateSections:b,isGenerating:c,isWriting:f=!1,canGenerateSections:g=!1,currentStep:h,onAddCost:i,savedProfiles:j=[],setSavedProfiles:k,activeProfile:m,onSetActiveProfile:n,inputType:o,setInputType:p,brandKnowledge:q="",onShowPlan:r,hasPlan:s=!1})=>{let{register:t,handleSubmit:u,setValue:v,watchedValues:w,errors:x,productMode:y,setProductMode:z,isSummarizingProduct:A,setIsSummarizingProduct:C,refCharCount:D,refWordCount:E,scrapedImages:F,setScrapedImages:G,isFetchingUrl:H,fetchAndPopulate:I,createProfile:J,updateProfile:K,deleteProfile:L,applyProfileToForm:M,loadProductFromProfile:N,usableImages:O,handleClear:P}=(({brandKnowledge:a="",savedProfiles:b=[],setSavedProfiles:c,activeProfile:d,onSetActiveProfile:f,setInputType:g})=>{let{register:h,handleSubmit:i,setValue:j,watch:k,reset:l,formState:{errors:m}}=function(a={}){let b=e.default.useRef(void 0),c=e.default.useRef(void 0),[d,f]=e.default.useState({isDirty:!1,isValidating:!1,isLoading:aV(a.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1,isReady:!1,defaultValues:aV(a.defaultValues)?void 0:a.defaultValues});if(!b.current)if(a.formControl)b.current={...a.formControl,formState:d},a.defaultValues&&!aV(a.defaultValues)&&a.formControl.reset(a.defaultValues,a.resetOptions);else{let{formControl:c,...e}=function(a={}){let b,c={...bh,...a},d={submitCount:0,isDirty:!1,isReady:!1,isLoading:aV(c.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:c.errors||{},disabled:c.disabled||!1},e={},f=(aA(c.defaultValues)||aA(c.values))&&aB(c.defaultValues||c.values)||{},g=c.shouldUnregister?{}:aB(f),h={action:!1,mount:!1,watch:!1},i={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},j=0,k={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},l={...k},m={array:aT(),state:aT()},n="all"===c.criteriaMode,o=async a=>{if(!c.disabled&&(k.isValid||l.isValid||a)){let a=c.resolver?aU((await s()).errors):await u(e,!0);a!==d.isValid&&m.state.next({isValid:a})}},p=(a,b)=>{!c.disabled&&(k.isValidating||k.validatingFields||l.isValidating||l.validatingFields)&&((a||Array.from(i.mount)).forEach(a=>{a&&(b?aG(d.validatingFields,a,b):aX(d.validatingFields,a))}),m.state.next({validatingFields:d.validatingFields,isValidating:!aU(d.validatingFields)}))},q=(a,b,c,d)=>{let i=aF(e,a);if(i){let e=aF(g,a,aC(c)?aF(f,a):c);aC(e)||d&&d.defaultChecked||b?aG(g,a,b?e:a5(i._f)):x(a,e),h.mount&&!h.action&&o()}},r=(a,b,e,g,h)=>{let i=!1,j=!1,n={name:a};if(!c.disabled){if(!e||g){(k.isDirty||l.isDirty)&&(j=d.isDirty,d.isDirty=n.isDirty=v(),i=j!==n.isDirty);let c=aQ(aF(f,a),b);j=!!aF(d.dirtyFields,a),c?aX(d.dirtyFields,a):aG(d.dirtyFields,a,!0),n.dirtyFields=d.dirtyFields,i=i||(k.dirtyFields||l.dirtyFields)&&!c!==j}if(e){let b=aF(d.touchedFields,a);b||(aG(d.touchedFields,a,e),n.touchedFields=d.touchedFields,i=i||(k.touchedFields||l.touchedFields)&&b!==e)}i&&h&&m.state.next(n)}return i?n:{}},s=async a=>{p(a,!0);let b=await c.resolver(g,c.context,((a,b,c,d)=>{let e={};for(let c of a){let a=aF(b,c);a&&aG(e,c,a._f)}return{criteriaMode:c,names:[...a],fields:e,shouldUseNativeValidation:d}})(a||i.mount,e,c.criteriaMode,c.shouldUseNativeValidation));return p(a),b},t=async a=>{let{errors:b}=await s(a);if(a)for(let c of a){let a=aF(b,c);a?aG(d.errors,c,a):aX(d.errors,c)}else d.errors=b;return b},u=async(a,b,e={valid:!0})=>{for(let f in a){let h=a[f];if(h){let{_f:a,...f}=h;if(a){let f=i.array.has(a.name),j=h._f&&a9(h._f);j&&k.validatingFields&&p([a.name],!0);let l=await bg(h,i.disabled,g,n,c.shouldUseNativeValidation&&!b,f);if(j&&k.validatingFields&&p([a.name]),l[a.name]&&(e.valid=!1,b))break;b||(aF(l,a.name)?f?bd(d.errors,l,a.name):aG(d.errors,a.name,l[a.name]):aX(d.errors,a.name))}aU(f)||await u(f,b,e)}}return e.valid},v=(a,b)=>!c.disabled&&(a&&b&&aG(g,a,b),!aQ(D(),f)),w=(a,b,c)=>{var d,e;return d=i,e={...h.mount?g:aC(b)?f:aO(a)?{[a]:b}:b},aO(a)?(c&&d.watch.add(a),aF(e,a,b)):Array.isArray(a)?a.map(a=>(c&&d.watch.add(a),aF(e,a))):(c&&(d.watchAll=!0),e)},x=(a,b,c={})=>{let d=aF(e,a),f=b;if(d){let c=d._f;c&&(c.disabled||aG(g,a,a2(b,c)),c.ref,f=b,"select-multiple"===c.ref.type?[...c.ref.options].forEach(a=>a.selected=f.includes(a.value)):c.refs?"checkbox"===c.ref.type?c.refs.forEach(a=>{a.defaultChecked&&a.disabled||(Array.isArray(f)?a.checked=!!f.find(b=>b===a.value):a.checked=f===a.value||!!f)}):c.refs.forEach(a=>a.checked=a.value===f):"file"===c.ref.type?c.ref.value="":(c.ref.value=f,c.ref.type||m.state.next({name:a,values:aB(g)})))}(c.shouldDirty||c.shouldTouch)&&r(a,f,c.shouldTouch,c.shouldDirty,!0),c.shouldValidate&&C(a)},y=(a,b,c)=>{for(let d in b){if(!b.hasOwnProperty(d))return;let f=b[d],g=a+"."+d,h=aF(e,g);(i.array.has(a)||aA(f)||h&&!h._f)&&!ay(f)?y(g,f,c):x(g,f,c)}},z=(a,b,c={})=>{let j=aF(e,a),n=i.array.has(a),o=aB(b);aG(g,a,o),n?(m.array.next({name:a,values:aB(g)}),(k.isDirty||k.dirtyFields||l.isDirty||l.dirtyFields)&&c.shouldDirty&&m.state.next({name:a,dirtyFields:a$(f,g),isDirty:v(a,o)})):!j||j._f||az(o)?x(a,o,c):y(a,o,c),ba(a,i)&&m.state.next({...d,name:a}),m.state.next({name:h.mount?a:void 0,values:aB(g)})},A=async a=>{h.mount=!0;let f=a.target,q=f.name,t=!0,v=aF(e,q),w=a=>{t=Number.isNaN(a)||ay(a)&&isNaN(a.getTime())||aQ(a,aF(g,q,a))},x=a7(c.mode),y=a7(c.reValidateMode);if(v){let h,I,J,K,L=f.type?a5(v._f):aA(h=a)&&h.target?"checkbox"===h.target.type?h.target.checked:h.target.value:h,M="blur"===a.type||"focusout"===a.type,N=!((K=v._f).mount&&(K.required||K.min||K.max||K.maxLength||K.minLength||K.pattern||K.validate))&&!c.resolver&&!aF(d.errors,q)&&!v._f.deps||(z=M,A=aF(d.touchedFields,q),B=d.isSubmitted,D=y,!(E=x).isOnAll&&(!B&&E.isOnTouch?!(A||z):(B?D.isOnBlur:E.isOnBlur)?!z:(B?!D.isOnChange:!E.isOnChange)||z)),O=ba(q,i,M);aG(g,q,L),M?f&&f.readOnly||(v._f.onBlur&&v._f.onBlur(a),b&&b(0)):v._f.onChange&&v._f.onChange(a);let P=r(q,L,M),Q=!aU(P)||O;if(M||m.state.next({name:q,type:a.type,values:aB(g)}),N)return(k.isValid||l.isValid)&&("onBlur"===c.mode?M&&o():M||o()),Q&&m.state.next({name:q,...O?{}:P});if(!M&&O&&m.state.next({...d}),c.resolver){let{errors:a}=await s([q]);if(w(L),t){let b=bc(d.errors,e,q),c=bc(a,e,b.name||q);I=c.error,q=c.name,J=aU(a)}}else p([q],!0),I=(await bg(v,i.disabled,g,n,c.shouldUseNativeValidation))[q],p([q]),w(L),t&&(I?J=!1:(k.isValid||l.isValid)&&(J=await u(e,!0)));if(t){v._f.deps&&(!Array.isArray(v._f.deps)||v._f.deps.length>0)&&C(v._f.deps);var z,A,B,D,E,F=q,G=J,H=I;let a=aF(d.errors,F),e=(k.isValid||l.isValid)&&"boolean"==typeof G&&d.isValid!==G;if(c.delayError&&H){let a;a=()=>{aG(d.errors,F,H),m.state.next({errors:d.errors})},(b=b=>{clearTimeout(j),j=setTimeout(a,b)})(c.delayError)}else clearTimeout(j),b=null,H?aG(d.errors,F,H):aX(d.errors,F);if((H?!aQ(a,H):a)||!aU(P)||e){let a={...P,...e&&"boolean"==typeof G?{isValid:G}:{},errors:d.errors,name:F};d={...d,...a},m.state.next(a)}}}},B=(a,b)=>{if(aF(d.errors,b)&&a.focus)return a.focus(),1},C=async(a,b={})=>{let f,g,h=aS(a);if(c.resolver){let b=await t(aC(a)?a:h);f=aU(b),g=a?!h.some(a=>aF(b,a)):f}else a?((g=(await Promise.all(h.map(async a=>{let b=aF(e,a);return await u(b&&b._f?{[a]:b}:b)}))).every(Boolean))||d.isValid)&&o():g=f=await u(e);return m.state.next({...!aO(a)||(k.isValid||l.isValid)&&f!==d.isValid?{}:{name:a},...c.resolver||!a?{isValid:f}:{},errors:d.errors}),b.shouldFocus&&!g&&bb(e,B,a?h:i.mount),g},D=(a,b)=>{let c={...h.mount?g:f};return b&&(c=function a(b,c){let d={};for(let e in b)if(b.hasOwnProperty(e)){let f=b[e],g=c[e];if(f&&aA(f)&&g){let b=a(f,g);aA(b)&&(d[e]=b)}else b[e]&&(d[e]=g)}return d}(b.dirtyFields?d.dirtyFields:d.touchedFields,c)),aC(a)?c:aO(a)?aF(c,a):a.map(a=>aF(c,a))},E=(a,b)=>({invalid:!!aF((b||d).errors,a),isDirty:!!aF((b||d).dirtyFields,a),error:aF((b||d).errors,a),isValidating:!!aF(d.validatingFields,a),isTouched:!!aF((b||d).touchedFields,a)}),F=(a,b,c)=>{let f=(aF(e,a,{_f:{}})._f||{}).ref,{ref:g,message:h,type:i,...j}=aF(d.errors,a)||{};aG(d.errors,a,{...j,...b,ref:f}),m.state.next({name:a,errors:d.errors,isValid:!1}),c&&c.shouldFocus&&f&&f.focus&&f.focus()},G=a=>m.state.subscribe({next:b=>{let c,e,h;c=a.name,e=b.name,h=a.exact,(!c||!e||c===e||aS(c).some(a=>a&&(h?a===e:a.startsWith(e)||e.startsWith(a))))&&((a,b,c,d)=>{c(a);let{name:e,...f}=a;return aU(f)||Object.keys(f).length>=Object.keys(b).length||Object.keys(f).find(a=>b[a]===(!d||"all"))})(b,a.formState||k,O,a.reRenderRoot)&&a.callback({values:{...g},...d,...b,defaultValues:f})}}).unsubscribe,H=(a,b={})=>{for(let h of a?aS(a):i.mount)i.mount.delete(h),i.array.delete(h),b.keepValue||(aX(e,h),aX(g,h)),b.keepError||aX(d.errors,h),b.keepDirty||aX(d.dirtyFields,h),b.keepTouched||aX(d.touchedFields,h),b.keepIsValidating||aX(d.validatingFields,h),c.shouldUnregister||b.keepDefaultValue||aX(f,h);m.state.next({values:aB(g)}),m.state.next({...d,...!b.keepDirty?{}:{isDirty:v()}}),b.keepIsValid||o()},I=({disabled:a,name:b})=>{("boolean"==typeof a&&h.mount||a||i.disabled.has(b))&&(a?i.disabled.add(b):i.disabled.delete(b))},J=(a,b={})=>{let d=aF(e,a),g="boolean"==typeof b.disabled||"boolean"==typeof c.disabled;return(aG(e,a,{...d||{},_f:{...d&&d._f?d._f:{ref:{name:a}},name:a,mount:!0,...b}}),i.mount.add(a),d)?I({disabled:"boolean"==typeof b.disabled?b.disabled:c.disabled,name:a}):q(a,!0,b.value),{...g?{disabled:b.disabled||c.disabled}:{},...c.progressive?{required:!!b.required,min:a6(b.min),max:a6(b.max),minLength:a6(b.minLength),maxLength:a6(b.maxLength),pattern:a6(b.pattern)}:{},name:a,onChange:A,onBlur:A,ref:g=>{if(g){let c;J(a,b),d=aF(e,a);let h=aC(g.value)&&g.querySelectorAll&&g.querySelectorAll("input,select,textarea")[0]||g,i="radio"===(c=h).type||"checkbox"===c.type,j=d._f.refs||[];(i?j.find(a=>a===h):h===d._f.ref)||(aG(e,a,{_f:{...d._f,...i?{refs:[...j.filter(aW),h,...Array.isArray(aF(f,a))?[{}]:[]],ref:{type:h.type,name:a}}:{ref:h}}}),q(a,!1,void 0,h))}else{var j;(d=aF(e,a,{}))._f&&(d._f.mount=!1),(c.shouldUnregister||b.shouldUnregister)&&(j=i.array,!j.has(a.substring(0,a.search(/\.\d+(\.|$)/))||a)||!h.action)&&i.unMount.add(a)}}}},K=()=>c.shouldFocusError&&bb(e,B,i.mount),L=(a,b)=>async f=>{let h;f&&(f.preventDefault&&f.preventDefault(),f.persist&&f.persist());let j=aB(g);if(m.state.next({isSubmitting:!0}),c.resolver){let{errors:a,values:b}=await s();d.errors=a,j=aB(b)}else await u(e);if(i.disabled.size)for(let a of i.disabled)aX(j,a);if(aX(d.errors,"root"),aU(d.errors)){m.state.next({errors:{}});try{await a(j,f)}catch(a){h=a}}else b&&await b({...d.errors},f),K(),setTimeout(K);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:aU(d.errors)&&!h,submitCount:d.submitCount+1,errors:d.errors}),h)throw h},M=(a,b={})=>{let j=a?aB(a):f,l=aB(j),n=aU(a),o=n?f:l;if(b.keepDefaultValues||(f=j),!b.keepValues){if(b.keepDirtyValues)for(let a of Array.from(new Set([...i.mount,...Object.keys(a$(f,g))])))aF(d.dirtyFields,a)?aG(o,a,aF(g,a)):z(a,aF(o,a));else if(b.keepFieldsRef)for(let a of i.mount)z(a,aF(o,a));else e={};g=c.shouldUnregister?b.keepDefaultValues?aB(f):{}:aB(o),m.array.next({values:{...o}}),m.state.next({values:{...o}})}i={mount:b.keepDirtyValues?i.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},h.mount=!k.isValid||!!b.keepIsValid||!!b.keepDirtyValues||!c.shouldUnregister&&!aU(o),h.watch=!!c.shouldUnregister,m.state.next({submitCount:b.keepSubmitCount?d.submitCount:0,isDirty:!n&&(b.keepDirty?d.isDirty:!!(b.keepDefaultValues&&!aQ(a,f))),isSubmitted:!!b.keepIsSubmitted&&d.isSubmitted,dirtyFields:n?{}:b.keepDirtyValues?b.keepDefaultValues&&g?a$(f,g):d.dirtyFields:b.keepDefaultValues&&a?a$(f,a):b.keepDirty?d.dirtyFields:{},touchedFields:b.keepTouched?d.touchedFields:{},errors:b.keepErrors?d.errors:{},isSubmitSuccessful:!!b.keepIsSubmitSuccessful&&d.isSubmitSuccessful,isSubmitting:!1,defaultValues:f})},N=(a,b)=>M(aV(a)?a(g):a,b),O=a=>{d={...d,...a}},P={control:{register:J,unregister:H,getFieldState:E,handleSubmit:L,setError:F,_subscribe:G,_runSchema:s,_focusError:K,_getWatch:w,_getDirty:v,_setValid:o,_setFieldArray:(a,b=[],i,j,n=!0,o=!0)=>{if(j&&i&&!c.disabled){if(h.action=!0,o&&Array.isArray(aF(e,a))){let b=i(aF(e,a),j.argA,j.argB);n&&aG(e,a,b)}if(o&&Array.isArray(aF(d.errors,a))){let b,c=i(aF(d.errors,a),j.argA,j.argB);n&&aG(d.errors,a,c),aD(aF(b=d.errors,a)).length||aX(b,a)}if((k.touchedFields||l.touchedFields)&&o&&Array.isArray(aF(d.touchedFields,a))){let b=i(aF(d.touchedFields,a),j.argA,j.argB);n&&aG(d.touchedFields,a,b)}(k.dirtyFields||l.dirtyFields)&&(d.dirtyFields=a$(f,g)),m.state.next({name:a,isDirty:v(a,b),dirtyFields:d.dirtyFields,errors:d.errors,isValid:d.isValid})}else aG(g,a,b)},_setDisabledField:I,_setErrors:a=>{d.errors=a,m.state.next({errors:d.errors,isValid:!1})},_getFieldArray:a=>aD(aF(h.mount?g:f,a,c.shouldUnregister?aF(f,a,[]):[])),_reset:M,_resetDefaultValues:()=>aV(c.defaultValues)&&c.defaultValues().then(a=>{N(a,c.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(let a of i.unMount){let b=aF(e,a);b&&(b._f.refs?b._f.refs.every(a=>!aW(a)):!aW(b._f.ref))&&H(a)}i.unMount=new Set},_disableForm:a=>{"boolean"==typeof a&&(m.state.next({disabled:a}),bb(e,(b,c)=>{let d=aF(e,c);d&&(b.disabled=d._f.disabled||a,Array.isArray(d._f.refs)&&d._f.refs.forEach(b=>{b.disabled=d._f.disabled||a}))},0,!1))},_subjects:m,_proxyFormState:k,get _fields(){return e},get _formValues(){return g},get _state(){return h},set _state(value){h=value},get _defaultValues(){return f},get _names(){return i},set _names(value){i=value},get _formState(){return d},get _options(){return c},set _options(value){c={...c,...value}}},subscribe:a=>(h.mount=!0,l={...l,...a.formState},G({...a,formState:l})),trigger:C,register:J,handleSubmit:L,watch:(a,b)=>aV(a)?m.state.subscribe({next:c=>"values"in c&&a(w(void 0,b),c)}):w(a,b,!0),setValue:z,getValues:D,reset:N,resetField:(a,b={})=>{aF(e,a)&&(aC(b.defaultValue)?z(a,aB(aF(f,a))):(z(a,b.defaultValue),aG(f,a,aB(b.defaultValue))),b.keepTouched||aX(d.touchedFields,a),b.keepDirty||(aX(d.dirtyFields,a),d.isDirty=b.defaultValue?v(a,aB(aF(f,a))):v()),!b.keepError&&(aX(d.errors,a),k.isValid&&o()),m.state.next({...d}))},clearErrors:a=>{a&&aS(a).forEach(a=>aX(d.errors,a)),m.state.next({errors:a?d.errors:{}})},unregister:H,setError:F,setFocus:(a,b={})=>{let c=aF(e,a),d=c&&c._f;if(d){let a=d.refs?d.refs[0]:d.ref;a.focus&&(a.focus(),b.shouldSelect&&aV(a.select)&&a.select())}},getFieldState:E};return{...P,formControl:P}}(a);b.current={...e,formState:d}}let g=b.current.control;return g._options=a,aN(()=>{let a=g._subscribe({formState:g._proxyFormState,callback:()=>f({...g._formState}),reRenderRoot:!0});return f(a=>({...a,isReady:!0})),g._formState.isReady=!0,a},[g]),e.default.useEffect(()=>g._disableForm(a.disabled),[g,a.disabled]),e.default.useEffect(()=>{a.mode&&(g._options.mode=a.mode),a.reValidateMode&&(g._options.reValidateMode=a.reValidateMode)},[g,a.mode,a.reValidateMode]),e.default.useEffect(()=>{a.errors&&(g._setErrors(a.errors),g._focusError())},[g,a.errors]),e.default.useEffect(()=>{a.shouldUnregister&&g._subjects.state.next({values:g._getWatch()})},[g,a.shouldUnregister]),e.default.useEffect(()=>{if(g._proxyFormState.isDirty){let a=g._getDirty();a!==d.isDirty&&g._subjects.state.next({isDirty:a})}},[g,d.isDirty]),e.default.useEffect(()=>{var b;a.values&&!aQ(a.values,c.current)?(g._reset(a.values,{keepFieldsRef:!0,...g._options.resetOptions}),(null==(b=g._options.resetOptions)?void 0:b.keepIsValid)||g._setValid(),c.current=a.values,f(a=>({...a}))):g._resetDefaultValues()},[g,a.values]),e.default.useEffect(()=>{g._state.mount||(g._setValid(),g._state.mount=!0),g._state.watch&&(g._state.watch=!1,g._subjects.state.next({...g._formState})),g._removeUnmounted()}),b.current.formState=((a,b,c,d=!0)=>{let e={defaultValues:b._defaultValues};for(let f in a)Object.defineProperty(e,f,{get:()=>("all"!==b._proxyFormState[f]&&(b._proxyFormState[f]=!d||"all"),c&&(c[f]=!0),a[f])});return e})(d,g),b.current}({resolver:function(a,b,c){if(void 0===c&&(c={}),"_def"in a&&"object"==typeof a._def&&"typeName"in a._def)return function(b,d,e){try{return Promise.resolve(hz(function(){return Promise.resolve(a["sync"===c.mode?"parse":"parseAsync"](b,void 0)).then(function(a){return e.shouldUseNativeValidation&&bj({},e),{errors:{},values:c.raw?Object.assign({},b):a}})},function(a){if(Array.isArray(null==a?void 0:a.issues))return{values:{},errors:bk(function(a,b){for(var c={};a.length;){var d=a[0],e=d.code,f=d.message,g=d.path.join(".");if(!c[g])if("unionErrors"in d){var h=d.unionErrors[0].errors[0];c[g]={message:h.message,type:h.code}}else c[g]={message:f,type:e};if("unionErrors"in d&&d.unionErrors.forEach(function(b){return b.errors.forEach(function(b){return a.push(b)})}),b){var i=c[g].types,j=i&&i[d.code];c[g]=aR(g,b,c,e,j?[].concat(j,d.message):d.message)}a.shift()}return c}(a.errors,!e.shouldUseNativeValidation&&"all"===e.criteriaMode),e)};throw a}))}catch(a){return Promise.reject(a)}};if("_zod"in a&&"object"==typeof a._zod)return function(b,d,e){try{return Promise.resolve(hz(function(){return Promise.resolve(("sync"===c.mode?cA:cC)(a,b,void 0)).then(function(a){return e.shouldUseNativeValidation&&bj({},e),{errors:{},values:c.raw?Object.assign({},b):a}})},function(a){if(a instanceof cs)return{values:{},errors:bk(function(a,b){for(var c={};a.length;){var d=a[0],e=d.code,f=d.message,g=d.path.join(".");if(!c[g])if("invalid_union"===d.code&&d.errors.length>0){var h=d.errors[0][0];c[g]={message:h.message,type:h.code}}else c[g]={message:f,type:e};if("invalid_union"===d.code&&d.errors.forEach(function(b){return b.forEach(function(b){return a.push(b)})}),b){var i=c[g].types,j=i&&i[d.code];c[g]=aR(g,b,c,e,j?[].concat(j,d.message):d.message)}a.shift()}return c}(a.issues,!e.shouldUseNativeValidation&&"all"===e.criteriaMode),e)};throw a}))}catch(a){return Promise.reject(a)}};throw Error("Invalid input: not a Zod schema")}(kJ),defaultValues:{title:"",referenceContent:"",sampleOutline:"",authorityTerms:"",websiteType:"",targetAudience:"zh-TW",useRag:!1,autoImagePlan:!1,productRawText:"",urlInput:"",productUrlList:""}}),n=k(),[o,p]=(0,e.useState)("text"),[q,r]=(0,e.useState)(!1),[s,t]=(0,e.useState)(0),[u,v]=(0,e.useState)(0),{clearAll:w}={clearAll:({reload:a=!0,includeForm:b=!0}={})=>{}},{scrapedImages:x,setScrapedImages:y,isFetchingUrl:z,fetchAndPopulate:A}=(({setValue:a,onAddCost:b,setInputType:c})=>{let[d,f]=(0,e.useState)([]),g=kQ({mutationFn:async a=>{if(!a)throw Error("URL is required");let{title:b,content:c,images:d}=await kR(a);return{title:b,content:c,images:d}},onSuccess:async({title:d,content:e,images:g})=>{a("referenceContent",e),f(au(g)),d&&a("title",d);try{let c=await kV(e);c.data.websiteType&&a("websiteType",c.data.websiteType),c.data.authorityTerms&&a("authorityTerms",c.data.authorityTerms),b&&b(c.cost,c.usage)}catch(a){console.warn("Failed to auto-extract brand info",a)}c("text")},onError:()=>{alert("Failed to fetch content from URL. The site might block bots.")}}),h=(0,e.useCallback)(async a=>{await g.mutateAsync(a)},[g]);return{scrapedImages:d,setScrapedImages:f,isFetchingUrl:g.isPending,fetchAndPopulate:h}})({setValue:j,setInputType:g}),{createProfile:B,updateProfile:C,deleteProfile:D,applyProfileToForm:E,loadProductFromProfile:F}=(({savedProfiles:a=[],setSavedProfiles:b,activeProfile:c,onSetActiveProfile:d,brandKnowledge:f,setValue:g})=>{let h=(0,e.useCallback)((c,e)=>{if(!b||!c.trim())return null;let g={id:Date.now().toString(),name:c.trim(),websiteType:e.websiteType||"",authorityTerms:e.authorityTerms||"",brandKnowledge:f||"",targetAudience:e.targetAudience,useRag:e.useRag,productRawText:e.productRawText};return b([...a,g]),d?.(g),g},[f,d,a,b]),i=(0,e.useCallback)(e=>{if(!b||!c)return null;let g=a.map(a=>a.id===c.id?{...a,websiteType:e.websiteType||"",authorityTerms:e.authorityTerms||"",targetAudience:e.targetAudience,useRag:e.useRag,productRawText:e.productRawText,brandKnowledge:f}:a);b(g);let h=g.find(a=>a.id===c.id)||null;return d?.(h),h},[c,f,d,a,b]),j=(0,e.useCallback)(e=>{b&&(b(a.filter(a=>a.id!==e)),c?.id===e&&d?.(null))},[c?.id,d,a,b]);return{createProfile:h,updateProfile:i,deleteProfile:j,applyProfileToForm:(0,e.useCallback)(a=>{g("websiteType",a.websiteType),g("authorityTerms",a.authorityTerms),g("targetAudience",a.targetAudience),void 0!==a.useRag&&g("useRag",a.useRag),a.productRawText?g("productRawText",a.productRawText):a.productBrief&&g("productRawText",`${a.productBrief.productName} - ${a.productBrief.usp}. Link: ${a.productBrief.ctaLink}`),d?.(a)},[d,g]),loadProductFromProfile:(0,e.useCallback)(a=>{a.productRawText?g("productRawText",a.productRawText):a.productBrief?g("productRawText",`${a.productBrief.productName} - ${a.productBrief.usp}. Link: ${a.productBrief.ctaLink}`):alert("This profile has no saved product/service details.")},[g])}})({savedProfiles:b,setSavedProfiles:c,activeProfile:d,onSetActiveProfile:f,brandKnowledge:a,setValue:j});(0,e.useEffect)(()=>{},[y,j]),(0,e.useEffect)(()=>{let a=k(a=>{let b={...a,scrapedImages:x};localStorage.setItem("pro_content_writer_inputs_simple_v4",JSON.stringify(b));let c=a.referenceContent||"";t(c.length),v((c.match(/[\u4e00-\u9fa5]/g)||[]).length+c.replace(/[\u4e00-\u9fa5]/g," ").trim().split(/\s+/).filter(a=>a.length>0).length)});return()=>a.unsubscribe()},[x,k]),(0,e.useEffect)(()=>{d&&E(d)},[d,E]);let G=(0,e.useMemo)(()=>x.filter(a=>!a.ignored),[x]),H=(0,e.useCallback)(()=>{},[w,l,y,j]);return{register:h,handleSubmit:i,setValue:j,watchedValues:n,errors:m,productMode:o,setProductMode:p,isSummarizingProduct:q,setIsSummarizingProduct:r,refCharCount:s,refWordCount:u,scrapedImages:x,setScrapedImages:y,isFetchingUrl:z,fetchAndPopulate:A,createProfile:B,updateProfile:C,deleteProfile:D,applyProfileToForm:E,loadProductFromProfile:F,usableImages:G,handleClear:H}})({brandKnowledge:q,savedProfiles:j,setSavedProfiles:k,activeProfile:m,onSetActiveProfile:n,setInputType:p}),{isChunkModalOpen:Q,setIsChunkModalOpen:R,chunkPreview:S,chunkScores:T,isScoringChunks:U,isFilteringChunks:V,filterError:W,manualKeep:X,setManualKeep:Y,openFilterModal:Z,applyFilter:$,semanticThreshold:_,semanticThresholdInput:ab,setSemanticThresholdInput:ac,commitSemanticThreshold:ad}=(()=>{let[a,b]=(0,e.useState)(!1),[c,d]=(0,e.useState)([]),[f,g]=(0,e.useState)(!1),[h,i]=(0,e.useState)(null),[j,k]=(0,e.useState)([]),[l,m]=(0,e.useState)(!1),[n,o]=(0,e.useState)({}),[p,q]=(0,e.useState)(.79),[r,s]=(0,e.useState)("0.79"),t=(0,e.useCallback)(a=>{let b=("string"==typeof a?a:r).trim();if(""===b)return s(p.toString()),p;let c=parseFloat(b);if(Number.isNaN(c))return s(p.toString()),p;let d=Math.round(100*Math.min(1,Math.max(0,c)))/100;return q(d),s(d.toString()),d},[r,p]),u=(0,e.useCallback)(async(a,b)=>{if(!b)return i("è«‹å…ˆå¡«å¯«æ¨™é¡Œï¼Œå†è¨ˆç®—èªžæ„è·é›¢ã€‚"),null;m(!0),i(null);try{let[c,d]=await Promise.all([k_([b]),k_(a)]),e=c[0];if(!e?.length)throw Error("ç„¡æ³•å–å¾—æ¨™é¡Œå‘é‡ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚");let f=a.map((a,b)=>{let c=d[b];return c?.length?k0(e,c):1});return k(f),f}catch(a){return i(a?.message||"èªžæ„éŽæ¿¾å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚"),null}finally{m(!1)}},[]),v=(0,e.useCallback)((a,c)=>{let e=k1(a);e.length?(d(e),i(null),k([]),o({}),b(!0),u(e,c)):alert("æ‰¾ä¸åˆ°å¯ä»¥åˆ†æ®µçš„å…§å®¹ï¼ˆéœ€æœ‰ç©ºç™½è¡Œåˆ†éš”ï¼‰ã€‚")},[u]),w=(0,e.useCallback)(async(a,d)=>{let e=c.length?c:k1(a);if(!e.length)return i("æ‰¾ä¸åˆ°å¯ç”¨çš„æ®µè½ã€‚"),null;g(!0),i(null);try{let a=(j.length===e.length?j:null)||await u(e,d)||[];if(!a.length)return i("ç„¡æ³•å–å¾—èªžæ„è·é›¢ï¼Œè«‹ç¢ºèªæ¨™é¡Œèˆ‡ API è¨­å®šã€‚"),null;let c=e.filter((b,c)=>{let d=a[c]??1;return n[c]||d>=p}).join("\n\n").trim();return b(!1),c}catch(a){return i(a?.message||"èªžæ„éŽæ¿¾å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚"),null}finally{g(!1)}},[c,j,n,u,p]);return{isChunkModalOpen:a,setIsChunkModalOpen:b,chunkPreview:c,chunkScores:j,isScoringChunks:l,isFilteringChunks:f,filterError:h,manualKeep:n,setManualKeep:o,openFilterModal:v,applyFilter:w,semanticThreshold:p,semanticThresholdInput:r,setSemanticThresholdInput:s,commitSemanticThreshold:t,DEFAULT_SEMANTIC_THRESHOLD:.79}})(),ae=(0,e.useMemo)(()=>{let a=parseFloat(ab);return Number.isNaN(a)?_:Math.min(1,Math.max(0,a))},[ab,_]),af=(0,e.useMemo)(()=>ae.toFixed(2),[ae]),ag=async()=>{await I(w.urlInput||"")},ak=async()=>{let a=w.productUrlList;if(a?.trim()){C(!0);try{let b=a.split("\n").map(a=>a.trim()).filter(a=>a.length>0),c=await aa(b,w.targetAudience);v("productRawText",c.data),z("text"),i&&i(c.cost,c.usage),K({...w,productRawText:c.data})}catch(a){alert("Failed to summarize brand content.")}finally{C(!1)}}},al=(0,e.useMemo)(()=>{let a=(w.title||"").trim().length>0,b=(w.referenceContent||"").trim().length>0;return a&&b&&!H&&!A},[w.title,w.referenceContent,H,A]),an=async()=>{let a=(w.referenceContent||"").trim(),b=(w.title||"").trim();ad();let c=await $(a,b);null!=c&&v("referenceContent",c)};return(0,d.jsxs)("div",{className:"flex flex-col h-full bg-slate-50/80 overflow-hidden font-sans",children:[(0,d.jsx)("div",{className:"p-4 pb-2 flex-shrink-0 border-b border-gray-100 bg-white/80 backdrop-blur-sm z-10",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-gray-800",children:[(0,d.jsx)(aw,{className:"w-4 h-4 text-blue-600"}),(0,d.jsx)("h2",{className:"text-sm font-bold tracking-tight",children:"Writer Config"})]}),(0,d.jsxs)("button",{onClick:P,className:"text-[10px] text-gray-400 hover:text-red-500 flex items-center gap-1 transition-colors px-2 py-1 hover:bg-red-50 rounded",children:[(0,d.jsx)(ah,{className:"w-3 h-3"})," Clear"]})]})}),(0,d.jsxs)("form",{onSubmit:u(b=>{let c=F.filter(a=>!a.ignored);a({title:b.title,referenceContent:b.referenceContent,sampleOutline:b.sampleOutline,authorityTerms:b.authorityTerms,websiteType:b.websiteType,targetAudience:b.targetAudience,useRag:b.useRag,autoImagePlan:b.autoImagePlan,productRawText:b.productRawText,brandKnowledge:void 0,scrapedImages:c})}),className:"flex-1 flex flex-col min-h-0 relative",children:[(0,d.jsxs)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-6 pb-24",children:[(0,d.jsx)(ai,{register:t,targetAudience:w.targetAudience,websiteType:w.websiteType,authorityTerms:w.authorityTerms,savedProfiles:j,activeProfile:m,brandKnowledge:q,onCreateProfile:a=>J(a,w),onUpdateProfile:()=>K(w),onDeleteProfile:L,onLoadProfile:a=>{M(a),z("text")}}),(0,d.jsx)(ap,{register:t,productMode:y,setProductMode:z,productRawText:w.productRawText,isSummarizingProduct:A,canAnalyzeFromUrls:!!w.productUrlList,savedProfiles:j,activeProfile:m,onCreateProfile:a=>J(a,w),onUpdateProfile:()=>K(w),onLoadProductFromProfile:a=>{N(a),z("text")},onAnalyzeFromUrls:ak}),(0,d.jsx)(av,{register:t,errors:x,inputType:o,setInputType:p,urlValue:w.urlInput,refWordCount:E,refCharCount:D,scrapedImages:F,onToggleScrapedImage:a=>{let b=a.id||a.url||a.altText;G(a=>a.map((a,c)=>(a.id||a.url||a.altText||`${c}`)!==b?a:{...a,ignored:!a.ignored}))},onFetchUrl:ag,isFetchingUrl:H,onRequestSemanticFilter:()=>{let a=(w.referenceContent||"").trim(),b=(w.title||"").trim();a?Z(a,b):alert("å…ˆè²¼ä¸Šå…§å®¹å†åšèªžæ„éŽæ¿¾ã€‚")},canSemanticFilter:(w.referenceContent||"").trim().length>0}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("h3",{className:"text-[10px] font-bold uppercase text-gray-400 tracking-wider px-1 flex items-center gap-1",children:[(0,d.jsx)(ax,{className:"w-3 h-3"})," Advanced Settings"]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_8px_rgba(0,0,0,0.02)] p-3 space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${w.useRag?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-400"}`,children:(0,d.jsx)(aj,{className:"w-4 h-4"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs font-bold text-gray-800",children:"Knowledge Base (RAG)"}),(0,d.jsx)("p",{className:"text-[10px] text-gray-500",children:"Use uploaded brand docs for accuracy"})]})]}),(0,d.jsx)("button",{type:"button",onClick:()=>v("useRag",!w.useRag),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 ${w.useRag?"bg-indigo-600":"bg-gray-200"}`,children:(0,d.jsx)("span",{className:`inline-block h-3.5 w-3.5 transform rounded-full bg-white transition ${w.useRag?"translate-x-4.5":"translate-x-1"}`})})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${w.autoImagePlan?"bg-emerald-100 text-emerald-600":"bg-gray-100 text-gray-400"}`,children:(0,d.jsx)(as,{className:"w-4 h-4"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs font-bold text-gray-800",children:"Auto Visual Plan"}),(0,d.jsx)("p",{className:"text-[10px] text-gray-500",children:"å¯«å®Œå¾Œè‡ªå‹•è¦åŠƒä¸¦ç”Ÿæˆåœ–ç‰‡"})]})]}),(0,d.jsx)("button",{type:"button",onClick:()=>v("autoImagePlan",!w.autoImagePlan),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 ${w.autoImagePlan?"bg-emerald-600":"bg-gray-200"}`,children:(0,d.jsx)("span",{className:`inline-block h-3.5 w-3.5 transform rounded-full bg-white transition ${w.autoImagePlan?"translate-x-4.5":"translate-x-1"}`})})]}),(0,d.jsx)("p",{className:"text-[10px] text-gray-500 px-1",children:"é—œé–‰å¯é¿å…å°šæœªæŒ‰ä¸‹åœ–ç‰‡ç”ŸæˆæŒ‰éˆ•æ™‚å°±æå‰è§¸ç™¼ã€‚"})]})]})]}),(0,d.jsx)("div",{className:"p-4 border-t border-gray-100 bg-white/80 backdrop-blur-sm z-10",children:(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("button",{type:"submit",disabled:c||f||!al,className:`w-full py-3 rounded-xl text-sm font-bold shadow-lg shadow-blue-500/20 flex items-center justify-center gap-2 transition-all transform active:scale-[0.98] ${c||f||!al?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:shadow-blue-500/30 hover:brightness-110"}`,children:c?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(am,{className:"w-4 h-4 animate-spin"}),(0,d.jsxs)("span",{children:[h.replace(/_/g," ").toUpperCase(),"..."]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ao,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:"Step 1ï¼šåˆ†æž (ä¾›å¯©é–±)"})]})}),(0,d.jsxs)("button",{type:"button",onClick:r,disabled:!s,className:`w-full py-2.5 rounded-xl text-sm font-semibold flex items-center justify-center gap-2 transition-all border ${s?"text-blue-700 bg-blue-50 border-blue-100 hover:bg-blue-100":"text-gray-400 bg-gray-50 border-gray-100 cursor-not-allowed"}`,children:[(0,d.jsx)(aw,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:"æª¢è¦–æ®µè½è¨ˆåŠƒ"})]}),(0,d.jsx)("p",{className:"text-[11px] text-gray-500 text-center",children:"å…ˆå®Œæˆåˆ†æžä¸¦æª¢è¦–çµæžœ (å´æ¬„) ï¼Œç¢ºèªå¾Œå†ç”Ÿæˆå…§æ–‡æ®µè½ã€‚"})]})})]}),Q&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 bg-black/25 backdrop-blur-sm flex items-center justify-center p-4",children:(0,d.jsxs)("div",{className:"bg-white w-full max-w-3xl rounded-2xl shadow-2xl border border-gray-100 overflow-hidden flex flex-col max-h-[85vh]",children:[(0,d.jsxs)("div",{className:"px-5 py-4 border-b border-gray-100 flex items-start justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-bold text-gray-900",children:"èªžæ„éŽæ¿¾åˆ†æ®µç¢ºèª"}),(0,d.jsxs)("p",{className:"text-[11px] text-gray-500 mt-0.5",children:["ä»¥ç©ºç™½è¡Œåˆ†æ®µï¼Œé¡¯ç¤ºèˆ‡æ¨™é¡Œçš„èªžæ„ç›¸ä¼¼åº¦ (é–¾å€¼ ",af,")."]})]}),(0,d.jsx)("button",{type:"button",className:"text-xs text-gray-400 hover:text-gray-600",onClick:()=>R(!1),disabled:V,children:"âœ•"})]}),(0,d.jsxs)("div",{className:"p-5 space-y-3 overflow-y-auto flex-1 custom-scrollbar",children:[S.map((a,b)=>(0,d.jsxs)("div",{className:"border border-gray-100 rounded-lg p-3 bg-gray-50/60",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between text-[11px] text-gray-500 mb-1",children:[(0,d.jsxs)("span",{className:"font-semibold text-gray-700",children:["Chunk ",b+1]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>Y(a=>({...a,[b]:!a[b]})),className:`px-2 py-0.5 rounded-full border text-[10px] font-semibold transition-colors ${X[b]?"border-blue-200 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-500 hover:border-blue-200 hover:text-blue-600"}`,children:X[b]?"æ‰‹å‹•é€šéŽ":"æ‰‹å‹•é€šéŽï¼Ÿ"}),"number"!=typeof T[b]||Number.isNaN(T[b])?(0,d.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full border border-gray-200 text-[10px] text-gray-500 bg-white",children:U?"è¨ˆç®—ä¸­â€¦":"ç­‰å¾…è¨ˆç®—"}):(0,d.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full border text-[10px] ${T[b]>=ae?"border-green-200 text-green-700 bg-green-50":"border-amber-200 text-amber-700 bg-amber-50"}`,children:["ç›¸ä¼¼åº¦ ",T[b].toFixed(3)]}),(0,d.jsxs)("span",{children:[a.length," chars"]})]})]}),(0,d.jsx)("p",{className:"text-xs text-gray-800 whitespace-pre-wrap leading-relaxed",children:a})]},`${b}-${a.slice(0,10)}`)),0===S.length&&(0,d.jsx)("div",{className:"text-xs text-gray-500",children:"å°šç„¡å¯é è¦½çš„æ®µè½ã€‚"})]}),W&&(0,d.jsx)("div",{className:"px-5 py-2 text-[11px] text-red-600 border-t border-amber-100 bg-amber-50",children:W}),(0,d.jsxs)("div",{className:"px-5 py-4 border-t border-gray-100 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-2 text-[11px] text-gray-500",children:[(0,d.jsxs)("div",{children:["ä½¿ç”¨æ¨™é¡Œå‘é‡æ¯”å°æ¯å€‹æ®µè½ï¼Œä½Žæ–¼ ",af," çš„æœƒè¢«ç§»é™¤ï¼›æ‰‹å‹•é€šéŽçš„æ®µè½æœƒå¼·åˆ¶ä¿ç•™ã€‚",U?" (è¨ˆç®—ä¸­...)":""]}),(0,d.jsxs)("label",{className:"flex flex-wrap items-center gap-2 text-gray-700 font-semibold",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"text-[10px] uppercase tracking-wide",children:"é–¾å€¼"}),(0,d.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-amber-50 text-amber-700 border border-amber-200 rounded-full shadow-sm text-[10px] font-semibold",children:[(0,d.jsx)(l,{className:"w-3 h-3"}),(0,d.jsx)("span",{children:B})]})]}),(0,d.jsx)(k2,{value:ab,onChange:ac,onCommit:ad})]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>R(!1),disabled:V||U,className:"px-3 py-2 text-[12px] font-semibold text-gray-600 bg-gray-100 rounded-lg border border-gray-200 hover:bg-gray-200 transition-colors disabled:opacity-50",children:"å–æ¶ˆ"}),(0,d.jsxs)("button",{type:"button",onClick:an,disabled:V||U,className:"px-3 py-2 text-[12px] font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg shadow-md hover:brightness-110 transition-all disabled:opacity-60 flex items-center gap-2",children:[V?(0,d.jsx)(am,{className:"w-4 h-4 animate-spin"}):null,"åŒæ„ä¸¦éŽæ¿¾"]})]})]})]})})]})};function k4(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let k5=k4(),k6={exec:()=>null};function k7(a,b=""){let c="string"==typeof a?a:a.source,d={replace:(a,b)=>{let e="string"==typeof b?b:b.source;return e=e.replace(k8.caret,"$1"),c=c.replace(a,e),d},getRegex:()=>new RegExp(c,b)};return d}let k8={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:a=>RegExp(`^( {0,3}${a})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:a=>RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:a=>RegExp(`^ {0,${Math.min(3,a-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:a=>RegExp(`^ {0,${Math.min(3,a-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:a=>RegExp(`^ {0,${Math.min(3,a-1)}}#`),htmlBeginRegex:a=>RegExp(`^ {0,${Math.min(3,a-1)}}<(?:[a-z].*>|!--)`,"i")},k9=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,la=/(?:[*+-]|\d{1,9}[.)])/,lb=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,lc=k7(lb).replace(/bull/g,la).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),ld=k7(lb).replace(/bull/g,la).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),le=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,lf=/(?!\s*\])(?:\\.|[^\[\]\\])+/,lg=k7(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",lf).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),lh=k7(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,la).getRegex(),li="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",lj=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,lk=k7("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",lj).replace("tag",li).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ll=k7(le).replace("hr",k9).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",li).getRegex(),lm={blockquote:k7(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ll).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:lg,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:k9,html:lk,lheading:lc,list:lh,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:ll,table:k6,text:/^[^\n]+/},ln=k7("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",k9).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",li).getRegex(),lo={...lm,lheading:ld,table:ln,paragraph:k7(le).replace("hr",k9).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ln).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",li).getRegex()},lp={...lm,html:k7("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",lj).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:k6,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:k7(le).replace("hr",k9).replace("heading"," *#{1,6} *[^\n]").replace("lheading",lc).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},lq=/^( {2,}|\\)\n(?!\s*$)/,lr=/[\p{P}\p{S}]/u,ls=/[\s\p{P}\p{S}]/u,lt=/[^\s\p{P}\p{S}]/u,lu=k7(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,ls).getRegex(),lv=/(?!~)[\p{P}\p{S}]/u,lw=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,lx=k7(lw,"u").replace(/punct/g,lr).getRegex(),ly=k7(lw,"u").replace(/punct/g,lv).getRegex(),lz="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",lA=k7(lz,"gu").replace(/notPunctSpace/g,lt).replace(/punctSpace/g,ls).replace(/punct/g,lr).getRegex(),lB=k7(lz,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,lv).getRegex(),lC=k7("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,lt).replace(/punctSpace/g,ls).replace(/punct/g,lr).getRegex(),lD=k7(/\\(punct)/,"gu").replace(/punct/g,lr).getRegex(),lE=k7(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),lF=k7(lj).replace("(?:-->|$)","-->").getRegex(),lG=k7("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",lF).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),lH=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,lI=k7(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",lH).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),lJ=k7(/^!?\[(label)\]\[(ref)\]/).replace("label",lH).replace("ref",lf).getRegex(),lK=k7(/^!?\[(ref)\](?:\[\])?/).replace("ref",lf).getRegex(),lL=k7("reflink|nolink(?!\\()","g").replace("reflink",lJ).replace("nolink",lK).getRegex(),lM={_backpedal:k6,anyPunctuation:lD,autolink:lE,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:lq,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:k6,emStrongLDelim:lx,emStrongRDelimAst:lA,emStrongRDelimUnd:lC,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:lI,nolink:lK,punctuation:lu,reflink:lJ,reflinkSearch:lL,tag:lG,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:k6},lN={...lM,link:k7(/^!?\[(label)\]\((.*?)\)/).replace("label",lH).getRegex(),reflink:k7(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",lH).getRegex()},lO={...lM,emStrongRDelimAst:lB,emStrongLDelim:ly,url:k7(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},lP={...lO,br:k7(lq).replace("{2,}","*").getRegex(),text:k7(lO.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},lQ={normal:lm,gfm:lo,pedantic:lp},lR={normal:lM,gfm:lO,breaks:lP,pedantic:lN},lS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},lT=a=>lS[a];function lU(a,b){if(b){if(k8.escapeTest.test(a))return a.replace(k8.escapeReplace,lT)}else if(k8.escapeTestNoEncode.test(a))return a.replace(k8.escapeReplaceNoEncode,lT);return a}function lV(a){try{a=encodeURI(a).replace(k8.percentDecode,"%")}catch{return null}return a}function lW(a,b){let c=a.replace(k8.findPipe,(a,b,c)=>{let d=!1,e=b;for(;--e>=0&&"\\"===c[e];)d=!d;return d?"|":" |"}).split(k8.splitPipe),d=0;if(c[0].trim()||c.shift(),c.length>0&&!c.at(-1)?.trim()&&c.pop(),b)if(c.length>b)c.splice(b);else for(;c.length<b;)c.push("");for(;d<c.length;d++)c[d]=c[d].trim().replace(k8.slashPipe,"|");return c}function lX(a,b,c){let d=a.length;if(0===d)return"";let e=0;for(;e<d;)if(a.charAt(d-e-1)===b)e++;else break;return a.slice(0,d-e)}function lY(a,b,c,d,e){let f=b.href,g=b.title||null,h=a[1].replace(e.other.outputLinkReplace,"$1");if("!"!==a[0].charAt(0)){d.state.inLink=!0;let a={type:"link",raw:c,href:f,title:g,text:h,tokens:d.inlineTokens(h)};return d.state.inLink=!1,a}return{type:"image",raw:c,href:f,title:g,text:h}}class lZ{options;rules;lexer;constructor(a){this.options=a||k5}space(a){let b=this.rules.block.newline.exec(a);if(b&&b[0].length>0)return{type:"space",raw:b[0]}}code(a){let b=this.rules.block.code.exec(a);if(b){let a=b[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:b[0],codeBlockStyle:"indented",text:this.options.pedantic?a:lX(a,"\n")}}}fences(a){let b=this.rules.block.fences.exec(a);if(b){let a=b[0],c=function(a,b,c){let d=a.match(c.other.indentCodeCompensation);if(null===d)return b;let e=d[1];return b.split("\n").map(a=>{let b=a.match(c.other.beginningSpace);if(null===b)return a;let[d]=b;return d.length>=e.length?a.slice(e.length):a}).join("\n")}(a,b[3]||"",this.rules);return{type:"code",raw:a,lang:b[2]?b[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):b[2],text:c}}}heading(a){let b=this.rules.block.heading.exec(a);if(b){let a=b[2].trim();if(this.rules.other.endingHash.test(a)){let b=lX(a,"#");this.options.pedantic?a=b.trim():(!b||this.rules.other.endingSpaceChar.test(b))&&(a=b.trim())}return{type:"heading",raw:b[0],depth:b[1].length,text:a,tokens:this.lexer.inline(a)}}}hr(a){let b=this.rules.block.hr.exec(a);if(b)return{type:"hr",raw:lX(b[0],"\n")}}blockquote(a){let b=this.rules.block.blockquote.exec(a);if(b){let a=lX(b[0],"\n").split("\n"),c="",d="",e=[];for(;a.length>0;){let b,f=!1,g=[];for(b=0;b<a.length;b++)if(this.rules.other.blockquoteStart.test(a[b]))g.push(a[b]),f=!0;else if(f)break;else g.push(a[b]);a=a.slice(b);let h=g.join("\n"),i=h.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");c=c?`${c}
${h}`:h,d=d?`${d}
${i}`:i;let j=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(i,e,!0),this.lexer.state.top=j,0===a.length)break;let k=e.at(-1);if(k?.type==="code")break;if(k?.type==="blockquote"){let b=k.raw+"\n"+a.join("\n"),f=this.blockquote(b);e[e.length-1]=f,c=c.substring(0,c.length-k.raw.length)+f.raw,d=d.substring(0,d.length-k.text.length)+f.text;break}if(k?.type==="list"){let b=k.raw+"\n"+a.join("\n"),f=this.list(b);e[e.length-1]=f,c=c.substring(0,c.length-k.raw.length)+f.raw,d=d.substring(0,d.length-k.raw.length)+f.raw,a=b.substring(e.at(-1).raw.length).split("\n");continue}}return{type:"blockquote",raw:c,tokens:e,text:d}}}list(a){let b=this.rules.block.list.exec(a);if(b){let c=b[1].trim(),d=c.length>1,e={type:"list",raw:"",ordered:d,start:d?+c.slice(0,-1):"",loose:!1,items:[]};c=d?`\\d{1,9}\\${c.slice(-1)}`:`\\${c}`,this.options.pedantic&&(c=d?c:"[*+-]");let f=this.rules.other.listItemRegex(c),g=!1;for(;a;){let c,d=!1,h="",i="";if(!(b=f.exec(a))||this.rules.block.hr.test(a))break;h=b[0],a=a.substring(h.length);let j=b[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,a=>" ".repeat(3*a.length)),k=a.split("\n",1)[0],l=!j.trim(),m=0;if(this.options.pedantic?(m=2,i=j.trimStart()):l?m=b[1].length+1:(m=(m=b[2].search(this.rules.other.nonSpaceChar))>4?1:m,i=j.slice(m),m+=b[1].length),l&&this.rules.other.blankLine.test(k)&&(h+=k+"\n",a=a.substring(k.length+1),d=!0),!d){let b=this.rules.other.nextBulletRegex(m),c=this.rules.other.hrRegex(m),d=this.rules.other.fencesBeginRegex(m),e=this.rules.other.headingBeginRegex(m),f=this.rules.other.htmlBeginRegex(m);for(;a;){let g,n=a.split("\n",1)[0];if(k=n,g=this.options.pedantic?k=k.replace(this.rules.other.listReplaceNesting,"  "):k.replace(this.rules.other.tabCharGlobal,"    "),d.test(k)||e.test(k)||f.test(k)||b.test(k)||c.test(k))break;if(g.search(this.rules.other.nonSpaceChar)>=m||!k.trim())i+="\n"+g.slice(m);else{if(l||j.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||d.test(j)||e.test(j)||c.test(j))break;i+="\n"+k}l||k.trim()||(l=!0),h+=n+"\n",a=a.substring(n.length+1),j=g.slice(m)}}!e.loose&&(g?e.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(g=!0));let n=null;this.options.gfm&&(n=this.rules.other.listIsTask.exec(i))&&(c="[ ] "!==n[0],i=i.replace(this.rules.other.listReplaceTask,"")),e.items.push({type:"list_item",raw:h,task:!!n,checked:c,loose:!1,text:i,tokens:[]}),e.raw+=h}let h=e.items.at(-1);if(!h)return;h.raw=h.raw.trimEnd(),h.text=h.text.trimEnd(),e.raw=e.raw.trimEnd();for(let a=0;a<e.items.length;a++)if(this.lexer.state.top=!1,e.items[a].tokens=this.lexer.blockTokens(e.items[a].text,[]),!e.loose){let b=e.items[a].tokens.filter(a=>"space"===a.type);e.loose=b.length>0&&b.some(a=>this.rules.other.anyLine.test(a.raw))}if(e.loose)for(let a=0;a<e.items.length;a++)e.items[a].loose=!0;return e}}html(a){let b=this.rules.block.html.exec(a);if(b)return{type:"html",block:!0,raw:b[0],pre:"pre"===b[1]||"script"===b[1]||"style"===b[1],text:b[0]}}def(a){let b=this.rules.block.def.exec(a);if(b){let a=b[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),c=b[2]?b[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",d=b[3]?b[3].substring(1,b[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):b[3];return{type:"def",tag:a,raw:b[0],href:c,title:d}}}table(a){let b=this.rules.block.table.exec(a);if(!b||!this.rules.other.tableDelimiter.test(b[2]))return;let c=lW(b[1]),d=b[2].replace(this.rules.other.tableAlignChars,"").split("|"),e=b[3]?.trim()?b[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],f={type:"table",raw:b[0],header:[],align:[],rows:[]};if(c.length===d.length){for(let a of d)this.rules.other.tableAlignRight.test(a)?f.align.push("right"):this.rules.other.tableAlignCenter.test(a)?f.align.push("center"):this.rules.other.tableAlignLeft.test(a)?f.align.push("left"):f.align.push(null);for(let a=0;a<c.length;a++)f.header.push({text:c[a],tokens:this.lexer.inline(c[a]),header:!0,align:f.align[a]});for(let a of e)f.rows.push(lW(a,f.header.length).map((a,b)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:f.align[b]})));return f}}lheading(a){let b=this.rules.block.lheading.exec(a);if(b)return{type:"heading",raw:b[0],depth:"="===b[2].charAt(0)?1:2,text:b[1],tokens:this.lexer.inline(b[1])}}paragraph(a){let b=this.rules.block.paragraph.exec(a);if(b){let a="\n"===b[1].charAt(b[1].length-1)?b[1].slice(0,-1):b[1];return{type:"paragraph",raw:b[0],text:a,tokens:this.lexer.inline(a)}}}text(a){let b=this.rules.block.text.exec(a);if(b)return{type:"text",raw:b[0],text:b[0],tokens:this.lexer.inline(b[0])}}escape(a){let b=this.rules.inline.escape.exec(a);if(b)return{type:"escape",raw:b[0],text:b[1]}}tag(a){let b=this.rules.inline.tag.exec(a);if(b)return!this.lexer.state.inLink&&this.rules.other.startATag.test(b[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(b[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(b[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(b[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:b[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:b[0]}}link(a){let b=this.rules.inline.link.exec(a);if(b){let a=b[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(a)){if(!this.rules.other.endAngleBracket.test(a))return;let b=lX(a.slice(0,-1),"\\");if((a.length-b.length)%2==0)return}else{let a=function(a,b){if(-1===a.indexOf(")"))return -1;let c=0;for(let b=0;b<a.length;b++)if("\\"===a[b])b++;else if("("===a[b])c++;else if(")"===a[b]&&--c<0)return b;return -1}(b[2],0);if(a>-1){let c=(0===b[0].indexOf("!")?5:4)+b[1].length+a;b[2]=b[2].substring(0,a),b[0]=b[0].substring(0,c).trim(),b[3]=""}}let c=b[2],d="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(c);a&&(c=a[1],d=a[3])}else d=b[3]?b[3].slice(1,-1):"";return c=c.trim(),this.rules.other.startAngleBracket.test(c)&&(c=this.options.pedantic&&!this.rules.other.endAngleBracket.test(a)?c.slice(1):c.slice(1,-1)),lY(b,{href:c?c.replace(this.rules.inline.anyPunctuation,"$1"):c,title:d?d.replace(this.rules.inline.anyPunctuation,"$1"):d},b[0],this.lexer,this.rules)}}reflink(a,b){let c;if((c=this.rules.inline.reflink.exec(a))||(c=this.rules.inline.nolink.exec(a))){let a=b[(c[2]||c[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!a){let a=c[0].charAt(0);return{type:"text",raw:a,text:a}}return lY(c,a,c[0],this.lexer,this.rules)}}emStrong(a,b,c=""){let d=this.rules.inline.emStrongLDelim.exec(a);if(!(!d||d[3]&&c.match(this.rules.other.unicodeAlphaNumeric))&&(!(d[1]||d[2])||!c||this.rules.inline.punctuation.exec(c))){let c=[...d[0]].length-1,e,f,g=c,h=0,i="*"===d[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(i.lastIndex=0,b=b.slice(-1*a.length+c);null!=(d=i.exec(b));){if(!(e=d[1]||d[2]||d[3]||d[4]||d[5]||d[6]))continue;if(f=[...e].length,d[3]||d[4]){g+=f;continue}if((d[5]||d[6])&&c%3&&!((c+f)%3)){h+=f;continue}if((g-=f)>0)continue;f=Math.min(f,f+g+h);let b=[...d[0]][0].length,i=a.slice(0,c+d.index+b+f);if(Math.min(c,f)%2){let a=i.slice(1,-1);return{type:"em",raw:i,text:a,tokens:this.lexer.inlineTokens(a)}}let j=i.slice(2,-2);return{type:"strong",raw:i,text:j,tokens:this.lexer.inlineTokens(j)}}}}codespan(a){let b=this.rules.inline.code.exec(a);if(b){let a=b[2].replace(this.rules.other.newLineCharGlobal," "),c=this.rules.other.nonSpaceChar.test(a),d=this.rules.other.startingSpaceChar.test(a)&&this.rules.other.endingSpaceChar.test(a);return c&&d&&(a=a.substring(1,a.length-1)),{type:"codespan",raw:b[0],text:a}}}br(a){let b=this.rules.inline.br.exec(a);if(b)return{type:"br",raw:b[0]}}del(a){let b=this.rules.inline.del.exec(a);if(b)return{type:"del",raw:b[0],text:b[2],tokens:this.lexer.inlineTokens(b[2])}}autolink(a){let b=this.rules.inline.autolink.exec(a);if(b){let a,c;return c="@"===b[2]?"mailto:"+(a=b[1]):a=b[1],{type:"link",raw:b[0],text:a,href:c,tokens:[{type:"text",raw:a,text:a}]}}}url(a){let b;if(b=this.rules.inline.url.exec(a)){let a,c;if("@"===b[2])c="mailto:"+(a=b[0]);else{let d;do d=b[0],b[0]=this.rules.inline._backpedal.exec(b[0])?.[0]??"";while(d!==b[0])a=b[0],c="www."===b[1]?"http://"+b[0]:b[0]}return{type:"link",raw:b[0],text:a,href:c,tokens:[{type:"text",raw:a,text:a}]}}}inlineText(a){let b=this.rules.inline.text.exec(a);if(b){let a=this.lexer.state.inRawBlock;return{type:"text",raw:b[0],text:b[0],escaped:a}}}}class l${tokens;options;state;tokenizer;inlineQueue;constructor(a){this.tokens=[],this.tokens.links=Object.create(null),this.options=a||k5,this.options.tokenizer=this.options.tokenizer||new lZ,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const b={other:k8,block:lQ.normal,inline:lR.normal};this.options.pedantic?(b.block=lQ.pedantic,b.inline=lR.pedantic):this.options.gfm&&(b.block=lQ.gfm,this.options.breaks?b.inline=lR.breaks:b.inline=lR.gfm),this.tokenizer.rules=b}static get rules(){return{block:lQ,inline:lR}}static lex(a,b){return new l$(b).lex(a)}static lexInline(a,b){return new l$(b).inlineTokens(a)}lex(a){a=a.replace(k8.carriageReturn,"\n"),this.blockTokens(a,this.tokens);for(let a=0;a<this.inlineQueue.length;a++){let b=this.inlineQueue[a];this.inlineTokens(b.src,b.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(a,b=[],c=!1){for(this.options.pedantic&&(a=a.replace(k8.tabCharGlobal,"    ").replace(k8.spaceLine,""));a;){let d;if(this.options.extensions?.block?.some(c=>!!(d=c.call({lexer:this},a,b))&&(a=a.substring(d.raw.length),b.push(d),!0)))continue;if(d=this.tokenizer.space(a)){a=a.substring(d.raw.length);let c=b.at(-1);1===d.raw.length&&void 0!==c?c.raw+="\n":b.push(d);continue}if(d=this.tokenizer.code(a)){a=a.substring(d.raw.length);let c=b.at(-1);c?.type==="paragraph"||c?.type==="text"?(c.raw+="\n"+d.raw,c.text+="\n"+d.text,this.inlineQueue.at(-1).src=c.text):b.push(d);continue}if((d=this.tokenizer.fences(a))||(d=this.tokenizer.heading(a))||(d=this.tokenizer.hr(a))||(d=this.tokenizer.blockquote(a))||(d=this.tokenizer.list(a))||(d=this.tokenizer.html(a))){a=a.substring(d.raw.length),b.push(d);continue}if(d=this.tokenizer.def(a)){a=a.substring(d.raw.length);let c=b.at(-1);c?.type==="paragraph"||c?.type==="text"?(c.raw+="\n"+d.raw,c.text+="\n"+d.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[d.tag]||(this.tokens.links[d.tag]={href:d.href,title:d.title});continue}if((d=this.tokenizer.table(a))||(d=this.tokenizer.lheading(a))){a=a.substring(d.raw.length),b.push(d);continue}let e=a;if(this.options.extensions?.startBlock){let b,c=1/0,d=a.slice(1);this.options.extensions.startBlock.forEach(a=>{"number"==typeof(b=a.call({lexer:this},d))&&b>=0&&(c=Math.min(c,b))}),c<1/0&&c>=0&&(e=a.substring(0,c+1))}if(this.state.top&&(d=this.tokenizer.paragraph(e))){let f=b.at(-1);c&&f?.type==="paragraph"?(f.raw+="\n"+d.raw,f.text+="\n"+d.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=f.text):b.push(d),c=e.length!==a.length,a=a.substring(d.raw.length);continue}if(d=this.tokenizer.text(a)){a=a.substring(d.raw.length);let c=b.at(-1);c?.type==="text"?(c.raw+="\n"+d.raw,c.text+="\n"+d.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):b.push(d);continue}if(a){let b="Infinite loop on byte: "+a.charCodeAt(0);if(this.options.silent){console.error(b);break}throw Error(b)}}return this.state.top=!0,b}inline(a,b=[]){return this.inlineQueue.push({src:a,tokens:b}),b}inlineTokens(a,b=[]){let c=a,d=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;null!=(d=this.tokenizer.rules.inline.reflinkSearch.exec(c));)a.includes(d[0].slice(d[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,d.index)+"["+"a".repeat(d[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(d=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,d.index)+"["+"a".repeat(d[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(d=this.tokenizer.rules.inline.anyPunctuation.exec(c));)c=c.slice(0,d.index)+"++"+c.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let e=!1,f="";for(;a;){let d;if(e||(f=""),e=!1,this.options.extensions?.inline?.some(c=>!!(d=c.call({lexer:this},a,b))&&(a=a.substring(d.raw.length),b.push(d),!0)))continue;if((d=this.tokenizer.escape(a))||(d=this.tokenizer.tag(a))||(d=this.tokenizer.link(a))){a=a.substring(d.raw.length),b.push(d);continue}if(d=this.tokenizer.reflink(a,this.tokens.links)){a=a.substring(d.raw.length);let c=b.at(-1);"text"===d.type&&c?.type==="text"?(c.raw+=d.raw,c.text+=d.text):b.push(d);continue}if((d=this.tokenizer.emStrong(a,c,f))||(d=this.tokenizer.codespan(a))||(d=this.tokenizer.br(a))||(d=this.tokenizer.del(a))||(d=this.tokenizer.autolink(a))||!this.state.inLink&&(d=this.tokenizer.url(a))){a=a.substring(d.raw.length),b.push(d);continue}let g=a;if(this.options.extensions?.startInline){let b,c=1/0,d=a.slice(1);this.options.extensions.startInline.forEach(a=>{"number"==typeof(b=a.call({lexer:this},d))&&b>=0&&(c=Math.min(c,b))}),c<1/0&&c>=0&&(g=a.substring(0,c+1))}if(d=this.tokenizer.inlineText(g)){a=a.substring(d.raw.length),"_"!==d.raw.slice(-1)&&(f=d.raw.slice(-1)),e=!0;let c=b.at(-1);c?.type==="text"?(c.raw+=d.raw,c.text+=d.text):b.push(d);continue}if(a){let b="Infinite loop on byte: "+a.charCodeAt(0);if(this.options.silent){console.error(b);break}throw Error(b)}}return b}}class l_{options;parser;constructor(a){this.options=a||k5}space(a){return""}code({text:a,lang:b,escaped:c}){let d=(b||"").match(k8.notSpaceStart)?.[0],e=a.replace(k8.endingNewline,"")+"\n";return d?'<pre><code class="language-'+lU(d)+'">'+(c?e:lU(e,!0))+"</code></pre>\n":"<pre><code>"+(c?e:lU(e,!0))+"</code></pre>\n"}blockquote({tokens:a}){let b=this.parser.parse(a);return`<blockquote>
${b}</blockquote>
`}html({text:a}){return a}heading({tokens:a,depth:b}){return`<h${b}>${this.parser.parseInline(a)}</h${b}>
`}hr(a){return"<hr>\n"}list(a){let b=a.ordered,c=a.start,d="";for(let b=0;b<a.items.length;b++){let c=a.items[b];d+=this.listitem(c)}let e=b?"ol":"ul";return"<"+e+(b&&1!==c?' start="'+c+'"':"")+">\n"+d+"</"+e+">\n"}listitem(a){let b="";if(a.task){let c=this.checkbox({checked:!!a.checked});a.loose?a.tokens[0]?.type==="paragraph"?(a.tokens[0].text=c+" "+a.tokens[0].text,a.tokens[0].tokens&&a.tokens[0].tokens.length>0&&"text"===a.tokens[0].tokens[0].type&&(a.tokens[0].tokens[0].text=c+" "+lU(a.tokens[0].tokens[0].text),a.tokens[0].tokens[0].escaped=!0)):a.tokens.unshift({type:"text",raw:c+" ",text:c+" ",escaped:!0}):b+=c+" "}return b+=this.parser.parse(a.tokens,!!a.loose),`<li>${b}</li>
`}checkbox({checked:a}){return"<input "+(a?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:a}){return`<p>${this.parser.parseInline(a)}</p>
`}table(a){let b="",c="";for(let b=0;b<a.header.length;b++)c+=this.tablecell(a.header[b]);b+=this.tablerow({text:c});let d="";for(let b=0;b<a.rows.length;b++){let e=a.rows[b];c="";for(let a=0;a<e.length;a++)c+=this.tablecell(e[a]);d+=this.tablerow({text:c})}return d&&(d=`<tbody>${d}</tbody>`),"<table>\n<thead>\n"+b+"</thead>\n"+d+"</table>\n"}tablerow({text:a}){return`<tr>
${a}</tr>
`}tablecell(a){let b=this.parser.parseInline(a.tokens),c=a.header?"th":"td";return(a.align?`<${c} align="${a.align}">`:`<${c}>`)+b+`</${c}>
`}strong({tokens:a}){return`<strong>${this.parser.parseInline(a)}</strong>`}em({tokens:a}){return`<em>${this.parser.parseInline(a)}</em>`}codespan({text:a}){return`<code>${lU(a,!0)}</code>`}br(a){return"<br>"}del({tokens:a}){return`<del>${this.parser.parseInline(a)}</del>`}link({href:a,title:b,tokens:c}){let d=this.parser.parseInline(c),e=lV(a);if(null===e)return d;let f='<a href="'+(a=e)+'"';return b&&(f+=' title="'+lU(b)+'"'),f+=">"+d+"</a>"}image({href:a,title:b,text:c}){let d=lV(a);if(null===d)return lU(c);a=d;let e=`<img src="${a}" alt="${c}"`;return b&&(e+=` title="${lU(b)}"`),e+=">"}text(a){return"tokens"in a&&a.tokens?this.parser.parseInline(a.tokens):"escaped"in a&&a.escaped?a.text:lU(a.text)}}class l0{strong({text:a}){return a}em({text:a}){return a}codespan({text:a}){return a}del({text:a}){return a}html({text:a}){return a}text({text:a}){return a}link({text:a}){return""+a}image({text:a}){return""+a}br(){return""}}class l1{options;renderer;textRenderer;constructor(a){this.options=a||k5,this.options.renderer=this.options.renderer||new l_,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new l0}static parse(a,b){return new l1(b).parse(a)}static parseInline(a,b){return new l1(b).parseInline(a)}parse(a,b=!0){let c="";for(let d=0;d<a.length;d++){let e=a[d];if(this.options.extensions?.renderers?.[e.type]){let a=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==a||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){c+=a||"";continue}}switch(e.type){case"space":c+=this.renderer.space(e);continue;case"hr":c+=this.renderer.hr(e);continue;case"heading":c+=this.renderer.heading(e);continue;case"code":c+=this.renderer.code(e);continue;case"table":c+=this.renderer.table(e);continue;case"blockquote":c+=this.renderer.blockquote(e);continue;case"list":c+=this.renderer.list(e);continue;case"html":c+=this.renderer.html(e);continue;case"paragraph":c+=this.renderer.paragraph(e);continue;case"text":{let f=e,g=this.renderer.text(f);for(;d+1<a.length&&"text"===a[d+1].type;)f=a[++d],g+="\n"+this.renderer.text(f);b?c+=this.renderer.paragraph({type:"paragraph",raw:g,text:g,tokens:[{type:"text",raw:g,text:g,escaped:!0}]}):c+=g;continue}default:{let a='Token with "'+e.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw Error(a)}}}return c}parseInline(a,b=this.renderer){let c="";for(let d=0;d<a.length;d++){let e=a[d];if(this.options.extensions?.renderers?.[e.type]){let a=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==a||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(e.type)){c+=a||"";continue}}switch(e.type){case"escape":case"text":c+=b.text(e);break;case"html":c+=b.html(e);break;case"link":c+=b.link(e);break;case"image":c+=b.image(e);break;case"strong":c+=b.strong(e);break;case"em":c+=b.em(e);break;case"codespan":c+=b.codespan(e);break;case"br":c+=b.br(e);break;case"del":c+=b.del(e);break;default:{let a='Token with "'+e.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw Error(a)}}}return c}}class l2{options;block;constructor(a){this.options=a||k5}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(a){return a}postprocess(a){return a}processAllTokens(a){return a}provideLexer(){return this.block?l$.lex:l$.lexInline}provideParser(){return this.block?l1.parse:l1.parseInline}}class l3{defaults=k4();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=l1;Renderer=l_;TextRenderer=l0;Lexer=l$;Tokenizer=lZ;Hooks=l2;constructor(...a){this.use(...a)}walkTokens(a,b){let c=[];for(let d of a)switch(c=c.concat(b.call(this,d)),d.type){case"table":for(let a of d.header)c=c.concat(this.walkTokens(a.tokens,b));for(let a of d.rows)for(let d of a)c=c.concat(this.walkTokens(d.tokens,b));break;case"list":c=c.concat(this.walkTokens(d.items,b));break;default:{let a=d;this.defaults.extensions?.childTokens?.[a.type]?this.defaults.extensions.childTokens[a.type].forEach(d=>{let e=a[d].flat(1/0);c=c.concat(this.walkTokens(e,b))}):a.tokens&&(c=c.concat(this.walkTokens(a.tokens,b)))}}return c}use(...a){let b=this.defaults.extensions||{renderers:{},childTokens:{}};return a.forEach(a=>{let c={...a};if(c.async=this.defaults.async||c.async||!1,a.extensions&&(a.extensions.forEach(a=>{if(!a.name)throw Error("extension name required");if("renderer"in a){let c=b.renderers[a.name];c?b.renderers[a.name]=function(...b){let d=a.renderer.apply(this,b);return!1===d&&(d=c.apply(this,b)),d}:b.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||"block"!==a.level&&"inline"!==a.level)throw Error("extension level must be 'block' or 'inline'");let c=b[a.level];c?c.unshift(a.tokenizer):b[a.level]=[a.tokenizer],a.start&&("block"===a.level?b.startBlock?b.startBlock.push(a.start):b.startBlock=[a.start]:"inline"===a.level&&(b.startInline?b.startInline.push(a.start):b.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(b.childTokens[a.name]=a.childTokens)}),c.extensions=b),a.renderer){let b=this.defaults.renderer||new l_(this.defaults);for(let c in a.renderer){if(!(c in b))throw Error(`renderer '${c}' does not exist`);if(["options","parser"].includes(c))continue;let d=a.renderer[c],e=b[c];b[c]=(...a)=>{let c=d.apply(b,a);return!1===c&&(c=e.apply(b,a)),c||""}}c.renderer=b}if(a.tokenizer){let b=this.defaults.tokenizer||new lZ(this.defaults);for(let c in a.tokenizer){if(!(c in b))throw Error(`tokenizer '${c}' does not exist`);if(["options","rules","lexer"].includes(c))continue;let d=a.tokenizer[c],e=b[c];b[c]=(...a)=>{let c=d.apply(b,a);return!1===c&&(c=e.apply(b,a)),c}}c.tokenizer=b}if(a.hooks){let b=this.defaults.hooks||new l2;for(let c in a.hooks){if(!(c in b))throw Error(`hook '${c}' does not exist`);if(["options","block"].includes(c))continue;let d=a.hooks[c],e=b[c];l2.passThroughHooks.has(c)?b[c]=a=>{if(this.defaults.async)return Promise.resolve(d.call(b,a)).then(a=>e.call(b,a));let c=d.call(b,a);return e.call(b,c)}:b[c]=(...a)=>{let c=d.apply(b,a);return!1===c&&(c=e.apply(b,a)),c}}c.hooks=b}if(a.walkTokens){let b=this.defaults.walkTokens,d=a.walkTokens;c.walkTokens=function(a){let c=[];return c.push(d.call(this,a)),b&&(c=c.concat(b.call(this,a))),c}}this.defaults={...this.defaults,...c}}),this}setOptions(a){return this.defaults={...this.defaults,...a},this}lexer(a,b){return l$.lex(a,b??this.defaults)}parser(a,b){return l1.parse(a,b??this.defaults)}parseMarkdown(a){return(b,c)=>{let d={...c},e={...this.defaults,...d},f=this.onError(!!e.silent,!!e.async);if(!0===this.defaults.async&&!1===d.async)return f(Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==b)return f(Error("marked(): input parameter is undefined or null"));if("string"!=typeof b)return f(Error("marked(): input parameter is of type "+Object.prototype.toString.call(b)+", string expected"));e.hooks&&(e.hooks.options=e,e.hooks.block=a);let g=e.hooks?e.hooks.provideLexer():a?l$.lex:l$.lexInline,h=e.hooks?e.hooks.provideParser():a?l1.parse:l1.parseInline;if(e.async)return Promise.resolve(e.hooks?e.hooks.preprocess(b):b).then(a=>g(a,e)).then(a=>e.hooks?e.hooks.processAllTokens(a):a).then(a=>e.walkTokens?Promise.all(this.walkTokens(a,e.walkTokens)).then(()=>a):a).then(a=>h(a,e)).then(a=>e.hooks?e.hooks.postprocess(a):a).catch(f);try{e.hooks&&(b=e.hooks.preprocess(b));let a=g(b,e);e.hooks&&(a=e.hooks.processAllTokens(a)),e.walkTokens&&this.walkTokens(a,e.walkTokens);let c=h(a,e);return e.hooks&&(c=e.hooks.postprocess(c)),c}catch(a){return f(a)}}}onError(a,b){return c=>{if(c.message+="\nPlease report this to https://github.com/markedjs/marked.",a){let a="<p>An error occurred:</p><pre>"+lU(c.message+"",!0)+"</pre>";return b?Promise.resolve(a):a}if(b)return Promise.reject(c);throw c}}}let l4=new l3;function l5(a,b){return l4.parse(a,b)}l5.options=l5.setOptions=function(a){return l4.setOptions(a),l5.defaults=l4.defaults,k5=l5.defaults,l5},l5.getDefaults=k4,l5.defaults=k5,l5.use=function(...a){return l4.use(...a),l5.defaults=l4.defaults,k5=l5.defaults,l5},l5.walkTokens=function(a,b){return l4.walkTokens(a,b)},l5.parseInline=l4.parseInline,l5.Parser=l1,l5.parser=l1.parse,l5.Renderer=l_,l5.TextRenderer=l0,l5.Lexer=l$,l5.lexer=l$.lex,l5.Tokenizer=lZ,l5.Hooks=l2,l5.parse=l5,l5.options,l5.setOptions,l5.use,l5.walkTokens,l5.parseInline,l1.parse,l$.lex;let l6=j("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),l7=j("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),l8=j("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),l9=j("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]),ma=j("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),mb=j("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]]),mc=j("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function md(a){this.content=a}md.prototype={constructor:md,find:function(a){for(var b=0;b<this.content.length;b+=2)if(this.content[b]===a)return b;return -1},get:function(a){var b=this.find(a);return -1==b?void 0:this.content[b+1]},update:function(a,b,c){var d=c&&c!=a?this.remove(c):this,e=d.find(a),f=d.content.slice();return -1==e?f.push(c||a,b):(f[e+1]=b,c&&(f[e]=c)),new md(f)},remove:function(a){var b=this.find(a);if(-1==b)return this;var c=this.content.slice();return c.splice(b,2),new md(c)},addToStart:function(a,b){return new md([a,b].concat(this.remove(a).content))},addToEnd:function(a,b){var c=this.remove(a).content.slice();return c.push(a,b),new md(c)},addBefore:function(a,b,c){var d=this.remove(b),e=d.content.slice(),f=d.find(a);return e.splice(-1==f?e.length:f,0,b,c),new md(e)},forEach:function(a){for(var b=0;b<this.content.length;b+=2)a(this.content[b],this.content[b+1])},prepend:function(a){return(a=md.from(a)).size?new md(a.content.concat(this.subtract(a).content)):this},append:function(a){return(a=md.from(a)).size?new md(this.subtract(a).content.concat(a.content)):this},subtract:function(a){var b=this;a=md.from(a);for(var c=0;c<a.content.length;c+=2)b=b.remove(a.content[c]);return b},toObject:function(){var a={};return this.forEach(function(b,c){a[b]=c}),a},get size(){return this.content.length>>1}},md.from=function(a){if(a instanceof md)return a;var b=[];if(a)for(var c in a)b.push(c,a[c]);return new md(b)};class me{constructor(a,b){if(this.content=a,this.size=b||0,null==b)for(let b=0;b<a.length;b++)this.size+=a[b].nodeSize}nodesBetween(a,b,c,d=0,e){for(let f=0,g=0;g<b;f++){let h=this.content[f],i=g+h.nodeSize;if(i>a&&!1!==c(h,d+g,e||null,f)&&h.content.size){let e=g+1;h.nodesBetween(Math.max(0,a-e),Math.min(h.content.size,b-e),c,d+e)}g=i}}descendants(a){this.nodesBetween(0,this.size,a)}textBetween(a,b,c,d){let e="",f=!0;return this.nodesBetween(a,b,(g,h)=>{let i=g.isText?g.text.slice(Math.max(a,h)-h,b-h):g.isLeaf?d?"function"==typeof d?d(g):d:g.type.spec.leafText?g.type.spec.leafText(g):"":"";g.isBlock&&(g.isLeaf&&i||g.isTextblock)&&c&&(f?f=!1:e+=c),e+=i},0),e}append(a){if(!a.size)return this;if(!this.size)return a;let b=this.lastChild,c=a.firstChild,d=this.content.slice(),e=0;for(b.isText&&b.sameMarkup(c)&&(d[d.length-1]=b.withText(b.text+c.text),e=1);e<a.content.length;e++)d.push(a.content[e]);return new me(d,this.size+a.size)}cut(a,b=this.size){if(0==a&&b==this.size)return this;let c=[],d=0;if(b>a)for(let e=0,f=0;f<b;e++){let g=this.content[e],h=f+g.nodeSize;h>a&&((f<a||h>b)&&(g=g.isText?g.cut(Math.max(0,a-f),Math.min(g.text.length,b-f)):g.cut(Math.max(0,a-f-1),Math.min(g.content.size,b-f-1))),c.push(g),d+=g.nodeSize),f=h}return new me(c,d)}cutByIndex(a,b){return a==b?me.empty:0==a&&b==this.content.length?this:new me(this.content.slice(a,b))}replaceChild(a,b){let c=this.content[a];if(c==b)return this;let d=this.content.slice(),e=this.size+b.nodeSize-c.nodeSize;return d[a]=b,new me(d,e)}addToStart(a){return new me([a].concat(this.content),this.size+a.nodeSize)}addToEnd(a){return new me(this.content.concat(a),this.size+a.nodeSize)}eq(a){if(this.content.length!=a.content.length)return!1;for(let b=0;b<this.content.length;b++)if(!this.content[b].eq(a.content[b]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(a){let b=this.content[a];if(!b)throw RangeError("Index "+a+" out of range for "+this);return b}maybeChild(a){return this.content[a]||null}forEach(a){for(let b=0,c=0;b<this.content.length;b++){let d=this.content[b];a(d,c,b),c+=d.nodeSize}}findDiffStart(a,b=0){return function a(b,c,d){for(let e=0;;e++){if(e==b.childCount||e==c.childCount)return b.childCount==c.childCount?null:d;let f=b.child(e),g=c.child(e);if(f==g){d+=f.nodeSize;continue}if(!f.sameMarkup(g))return d;if(f.isText&&f.text!=g.text){for(let a=0;f.text[a]==g.text[a];a++)d++;return d}if(f.content.size||g.content.size){let b=a(f.content,g.content,d+1);if(null!=b)return b}d+=f.nodeSize}}(this,a,b)}findDiffEnd(a,b=this.size,c=a.size){return function a(b,c,d,e){for(let f=b.childCount,g=c.childCount;;){if(0==f||0==g)return f==g?null:{a:d,b:e};let h=b.child(--f),i=c.child(--g),j=h.nodeSize;if(h==i){d-=j,e-=j;continue}if(!h.sameMarkup(i))return{a:d,b:e};if(h.isText&&h.text!=i.text){let a=0,b=Math.min(h.text.length,i.text.length);for(;a<b&&h.text[h.text.length-a-1]==i.text[i.text.length-a-1];)a++,d--,e--;return{a:d,b:e}}if(h.content.size||i.content.size){let b=a(h.content,i.content,d-1,e-1);if(b)return b}d-=j,e-=j}}(this,a,b,c)}findIndex(a){if(0==a)return mg(0,a);if(a==this.size)return mg(this.content.length,a);if(a>this.size||a<0)throw RangeError(`Position ${a} outside of fragment (${this})`);for(let b=0,c=0;;b++){let d=c+this.child(b).nodeSize;if(d>=a){if(d==a)return mg(b+1,d);return mg(b,c)}c=d}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(a=>a.toJSON()):null}static fromJSON(a,b){if(!b)return me.empty;if(!Array.isArray(b))throw RangeError("Invalid input for Fragment.fromJSON");return new me(b.map(a.nodeFromJSON))}static fromArray(a){if(!a.length)return me.empty;let b,c=0;for(let d=0;d<a.length;d++){let e=a[d];c+=e.nodeSize,d&&e.isText&&a[d-1].sameMarkup(e)?(b||(b=a.slice(0,d)),b[b.length-1]=e.withText(b[b.length-1].text+e.text)):b&&b.push(e)}return new me(b||a,c)}static from(a){if(!a)return me.empty;if(a instanceof me)return a;if(Array.isArray(a))return this.fromArray(a);if(a.attrs)return new me([a],a.nodeSize);throw RangeError("Can not convert "+a+" to a Fragment"+(a.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}me.empty=new me([],0);let mf={index:0,offset:0};function mg(a,b){return mf.index=a,mf.offset=b,mf}function mh(a,b){if(a===b)return!0;if(!(a&&"object"==typeof a)||!(b&&"object"==typeof b))return!1;let c=Array.isArray(a);if(Array.isArray(b)!=c)return!1;if(c){if(a.length!=b.length)return!1;for(let c=0;c<a.length;c++)if(!mh(a[c],b[c]))return!1}else{for(let c in a)if(!(c in b)||!mh(a[c],b[c]))return!1;for(let c in b)if(!(c in a))return!1}return!0}class mi{constructor(a,b){this.type=a,this.attrs=b}addToSet(a){let b,c=!1;for(let d=0;d<a.length;d++){let e=a[d];if(this.eq(e))return a;if(this.type.excludes(e.type))b||(b=a.slice(0,d));else{if(e.type.excludes(this.type))return a;!c&&e.type.rank>this.type.rank&&(b||(b=a.slice(0,d)),b.push(this),c=!0),b&&b.push(e)}}return b||(b=a.slice()),c||b.push(this),b}removeFromSet(a){for(let b=0;b<a.length;b++)if(this.eq(a[b]))return a.slice(0,b).concat(a.slice(b+1));return a}isInSet(a){for(let b=0;b<a.length;b++)if(this.eq(a[b]))return!0;return!1}eq(a){return this==a||this.type==a.type&&mh(this.attrs,a.attrs)}toJSON(){let a={type:this.type.name};for(let b in this.attrs){a.attrs=this.attrs;break}return a}static fromJSON(a,b){if(!b)throw RangeError("Invalid input for Mark.fromJSON");let c=a.marks[b.type];if(!c)throw RangeError(`There is no mark type ${b.type} in this schema`);let d=c.create(b.attrs);return c.checkAttrs(d.attrs),d}static sameSet(a,b){if(a==b)return!0;if(a.length!=b.length)return!1;for(let c=0;c<a.length;c++)if(!a[c].eq(b[c]))return!1;return!0}static setFrom(a){if(!a||Array.isArray(a)&&0==a.length)return mi.none;if(a instanceof mi)return[a];let b=a.slice();return b.sort((a,b)=>a.type.rank-b.type.rank),b}}mi.none=[];class mj extends Error{}class mk{constructor(a,b,c){this.content=a,this.openStart=b,this.openEnd=c}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(a,b){let c=function a(b,c,d,e){let{index:f,offset:g}=b.findIndex(c),h=b.maybeChild(f);if(g==c||h.isText)return e&&!e.canReplace(f,f,d)?null:b.cut(0,c).append(d).append(b.cut(c));let i=a(h.content,c-g-1,d,h);return i&&b.replaceChild(f,h.copy(i))}(this.content,a+this.openStart,b);return c&&new mk(c,this.openStart,this.openEnd)}removeBetween(a,b){return new mk(function a(b,c,d){let{index:e,offset:f}=b.findIndex(c),g=b.maybeChild(e),{index:h,offset:i}=b.findIndex(d);if(f==c||g.isText){if(i!=d&&!b.child(h).isText)throw RangeError("Removing non-flat range");return b.cut(0,c).append(b.cut(d))}if(e!=h)throw RangeError("Removing non-flat range");return b.replaceChild(e,g.copy(a(g.content,c-f-1,d-f-1)))}(this.content,a+this.openStart,b+this.openStart),this.openStart,this.openEnd)}eq(a){return this.content.eq(a.content)&&this.openStart==a.openStart&&this.openEnd==a.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let a={content:this.content.toJSON()};return this.openStart>0&&(a.openStart=this.openStart),this.openEnd>0&&(a.openEnd=this.openEnd),a}static fromJSON(a,b){if(!b)return mk.empty;let c=b.openStart||0,d=b.openEnd||0;if("number"!=typeof c||"number"!=typeof d)throw RangeError("Invalid input for Slice.fromJSON");return new mk(me.fromJSON(a,b.content),c,d)}static maxOpen(a,b=!0){let c=0,d=0;for(let d=a.firstChild;d&&!d.isLeaf&&(b||!d.type.spec.isolating);d=d.firstChild)c++;for(let c=a.lastChild;c&&!c.isLeaf&&(b||!c.type.spec.isolating);c=c.lastChild)d++;return new mk(a,c,d)}}function ml(a,b){if(!b.type.compatibleContent(a.type))throw new mj("Cannot join "+b.type.name+" onto "+a.type.name)}function mm(a,b,c){let d=a.node(c);return ml(d,b.node(c)),d}function mn(a,b){let c=b.length-1;c>=0&&a.isText&&a.sameMarkup(b[c])?b[c]=a.withText(b[c].text+a.text):b.push(a)}function mo(a,b,c,d){let e=(b||a).node(c),f=0,g=b?b.index(c):e.childCount;a&&(f=a.index(c),a.depth>c?f++:a.textOffset&&(mn(a.nodeAfter,d),f++));for(let a=f;a<g;a++)mn(e.child(a),d);b&&b.depth==c&&b.textOffset&&mn(b.nodeBefore,d)}function mp(a,b){return a.type.checkContent(b),a.copy(b)}function mq(a,b,c){let d=[];return mo(null,a,c,d),a.depth>c&&mn(mp(mm(a,b,c+1),mq(a,b,c+1)),d),mo(b,null,c,d),new me(d)}mk.empty=new mk(me.empty,0,0);class mr{constructor(a,b,c){this.pos=a,this.path=b,this.parentOffset=c,this.depth=b.length/3-1}resolveDepth(a){return null==a?this.depth:a<0?this.depth+a:a}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(a){return this.path[3*this.resolveDepth(a)]}index(a){return this.path[3*this.resolveDepth(a)+1]}indexAfter(a){return a=this.resolveDepth(a),this.index(a)+(a!=this.depth||this.textOffset?1:0)}start(a){return 0==(a=this.resolveDepth(a))?0:this.path[3*a-1]+1}end(a){return a=this.resolveDepth(a),this.start(a)+this.node(a).content.size}before(a){if(!(a=this.resolveDepth(a)))throw RangeError("There is no position before the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]}after(a){if(!(a=this.resolveDepth(a)))throw RangeError("There is no position after the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]+this.path[3*a].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let a=this.parent,b=this.index(this.depth);if(b==a.childCount)return null;let c=this.pos-this.path[this.path.length-1],d=a.child(b);return c?a.child(b).cut(c):d}get nodeBefore(){let a=this.index(this.depth),b=this.pos-this.path[this.path.length-1];return b?this.parent.child(a).cut(0,b):0==a?null:this.parent.child(a-1)}posAtIndex(a,b){b=this.resolveDepth(b);let c=this.path[3*b],d=0==b?0:this.path[3*b-1]+1;for(let b=0;b<a;b++)d+=c.child(b).nodeSize;return d}marks(){let a=this.parent,b=this.index();if(0==a.content.size)return mi.none;if(this.textOffset)return a.child(b).marks;let c=a.maybeChild(b-1),d=a.maybeChild(b);if(!c){let a=c;c=d,d=a}let e=c.marks;for(var f=0;f<e.length;f++)!1!==e[f].type.spec.inclusive||d&&e[f].isInSet(d.marks)||(e=e[f--].removeFromSet(e));return e}marksAcross(a){let b=this.parent.maybeChild(this.index());if(!b||!b.isInline)return null;let c=b.marks,d=a.parent.maybeChild(a.index());for(var e=0;e<c.length;e++)!1!==c[e].type.spec.inclusive||d&&c[e].isInSet(d.marks)||(c=c[e--].removeFromSet(c));return c}sharedDepth(a){for(let b=this.depth;b>0;b--)if(this.start(b)<=a&&this.end(b)>=a)return b;return 0}blockRange(a=this,b){if(a.pos<this.pos)return a.blockRange(this);for(let c=this.depth-(this.parent.inlineContent||this.pos==a.pos?1:0);c>=0;c--)if(a.pos<=this.end(c)&&(!b||b(this.node(c))))return new mv(this,a,c);return null}sameParent(a){return this.pos-this.parentOffset==a.pos-a.parentOffset}max(a){return a.pos>this.pos?a:this}min(a){return a.pos<this.pos?a:this}toString(){let a="";for(let b=1;b<=this.depth;b++)a+=(a?"/":"")+this.node(b).type.name+"_"+this.index(b-1);return a+":"+this.parentOffset}static resolve(a,b){if(!(b>=0&&b<=a.content.size))throw RangeError("Position "+b+" out of range");let c=[],d=0,e=b;for(let b=a;;){let{index:a,offset:f}=b.content.findIndex(e),g=e-f;if(c.push(b,a,d+f),!g||(b=b.child(a)).isText)break;e=g-1,d+=f+1}return new mr(b,c,e)}static resolveCached(a,b){let c=mu.get(a);if(c)for(let a=0;a<c.elts.length;a++){let d=c.elts[a];if(d.pos==b)return d}else mu.set(a,c=new ms);let d=c.elts[c.i]=mr.resolve(a,b);return c.i=(c.i+1)%mt,d}}class ms{constructor(){this.elts=[],this.i=0}}let mt=12,mu=new WeakMap;class mv{constructor(a,b,c){this.$from=a,this.$to=b,this.depth=c}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}let mw=Object.create(null);class mx{constructor(a,b,c,d=mi.none){this.type=a,this.attrs=b,this.marks=d,this.content=c||me.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(a){return this.content.child(a)}maybeChild(a){return this.content.maybeChild(a)}forEach(a){this.content.forEach(a)}nodesBetween(a,b,c,d=0){this.content.nodesBetween(a,b,c,d,this)}descendants(a){this.nodesBetween(0,this.content.size,a)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(a,b,c,d){return this.content.textBetween(a,b,c,d)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(a){return this==a||this.sameMarkup(a)&&this.content.eq(a.content)}sameMarkup(a){return this.hasMarkup(a.type,a.attrs,a.marks)}hasMarkup(a,b,c){return this.type==a&&mh(this.attrs,b||a.defaultAttrs||mw)&&mi.sameSet(this.marks,c||mi.none)}copy(a=null){return a==this.content?this:new mx(this.type,this.attrs,a,this.marks)}mark(a){return a==this.marks?this:new mx(this.type,this.attrs,this.content,a)}cut(a,b=this.content.size){return 0==a&&b==this.content.size?this:this.copy(this.content.cut(a,b))}slice(a,b=this.content.size,c=!1){if(a==b)return mk.empty;let d=this.resolve(a),e=this.resolve(b),f=c?0:d.sharedDepth(b),g=d.start(f);return new mk(d.node(f).content.cut(d.pos-g,e.pos-g),d.depth-f,e.depth-f)}replace(a,b,c){var d=this.resolve(a),e=this.resolve(b);if(c.openStart>d.depth)throw new mj("Inserted content deeper than insertion position");if(d.depth-c.openStart!=e.depth-c.openEnd)throw new mj("Inconsistent open depths");return function a(b,c,d,e){let f=b.index(e),g=b.node(e);if(f==c.index(e)&&e<b.depth-d.openStart){let h=a(b,c,d,e+1);return g.copy(g.content.replaceChild(f,h))}if(!d.content.size)return mp(g,mq(b,c,e));if(d.openStart||d.openEnd||b.depth!=e||c.depth!=e){let{start:a,end:f}=function(a,b){let c=b.depth-a.openStart,d=b.node(c).copy(a.content);for(let a=c-1;a>=0;a--)d=b.node(a).copy(me.from(d));return{start:d.resolveNoCache(a.openStart+c),end:d.resolveNoCache(d.content.size-a.openEnd-c)}}(d,b);return mp(g,function a(b,c,d,e,f){let g=b.depth>f&&mm(b,c,f+1),h=e.depth>f&&mm(d,e,f+1),i=[];return mo(null,b,f,i),g&&h&&c.index(f)==d.index(f)?(ml(g,h),mn(mp(g,a(b,c,d,e,f+1)),i)):(g&&mn(mp(g,mq(b,c,f+1)),i),mo(c,d,f,i),h&&mn(mp(h,mq(d,e,f+1)),i)),mo(e,null,f,i),new me(i)}(b,a,f,c,e))}{let a=b.parent,e=a.content;return mp(a,e.cut(0,b.parentOffset).append(d.content).append(e.cut(c.parentOffset)))}}(d,e,c,0)}nodeAt(a){for(let b=this;;){let{index:c,offset:d}=b.content.findIndex(a);if(!(b=b.maybeChild(c)))return null;if(d==a||b.isText)return b;a-=d+1}}childAfter(a){let{index:b,offset:c}=this.content.findIndex(a);return{node:this.content.maybeChild(b),index:b,offset:c}}childBefore(a){if(0==a)return{node:null,index:0,offset:0};let{index:b,offset:c}=this.content.findIndex(a);if(c<a)return{node:this.content.child(b),index:b,offset:c};let d=this.content.child(b-1);return{node:d,index:b-1,offset:c-d.nodeSize}}resolve(a){return mr.resolveCached(this,a)}resolveNoCache(a){return mr.resolve(this,a)}rangeHasMark(a,b,c){let d=!1;return b>a&&this.nodesBetween(a,b,a=>(c.isInSet(a.marks)&&(d=!0),!d)),d}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let a=this.type.name;return this.content.size&&(a+="("+this.content.toStringInner()+")"),mz(this.marks,a)}contentMatchAt(a){let b=this.type.contentMatch.matchFragment(this.content,0,a);if(!b)throw Error("Called contentMatchAt on a node with invalid content");return b}canReplace(a,b,c=me.empty,d=0,e=c.childCount){let f=this.contentMatchAt(a).matchFragment(c,d,e),g=f&&f.matchFragment(this.content,b);if(!g||!g.validEnd)return!1;for(let a=d;a<e;a++)if(!this.type.allowsMarks(c.child(a).marks))return!1;return!0}canReplaceWith(a,b,c,d){if(d&&!this.type.allowsMarks(d))return!1;let e=this.contentMatchAt(a).matchType(c),f=e&&e.matchFragment(this.content,b);return!!f&&f.validEnd}canAppend(a){return a.content.size?this.canReplace(this.childCount,this.childCount,a.content):this.type.compatibleContent(a.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let a=mi.none;for(let b=0;b<this.marks.length;b++){let c=this.marks[b];c.type.checkAttrs(c.attrs),a=c.addToSet(a)}if(!mi.sameSet(a,this.marks))throw RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(a=>a.type.name)}`);this.content.forEach(a=>a.check())}toJSON(){let a={type:this.type.name};for(let b in this.attrs){a.attrs=this.attrs;break}return this.content.size&&(a.content=this.content.toJSON()),this.marks.length&&(a.marks=this.marks.map(a=>a.toJSON())),a}static fromJSON(a,b){let c;if(!b)throw RangeError("Invalid input for Node.fromJSON");if(b.marks){if(!Array.isArray(b.marks))throw RangeError("Invalid mark data for Node.fromJSON");c=b.marks.map(a.markFromJSON)}if("text"==b.type){if("string"!=typeof b.text)throw RangeError("Invalid text node in JSON");return a.text(b.text,c)}let d=me.fromJSON(a,b.content),e=a.nodeType(b.type).create(b.attrs,d,c);return e.type.checkAttrs(e.attrs),e}}mx.prototype.text=void 0;class my extends mx{constructor(a,b,c,d){if(super(a,b,null,d),!c)throw RangeError("Empty text nodes are not allowed");this.text=c}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):mz(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(a,b){return this.text.slice(a,b)}get nodeSize(){return this.text.length}mark(a){return a==this.marks?this:new my(this.type,this.attrs,this.text,a)}withText(a){return a==this.text?this:new my(this.type,this.attrs,a,this.marks)}cut(a=0,b=this.text.length){return 0==a&&b==this.text.length?this:this.withText(this.text.slice(a,b))}eq(a){return this.sameMarkup(a)&&this.text==a.text}toJSON(){let a=super.toJSON();return a.text=this.text,a}}function mz(a,b){for(let c=a.length-1;c>=0;c--)b=a[c].type.name+"("+b+")";return b}class mA{constructor(a){this.validEnd=a,this.next=[],this.wrapCache=[]}static parse(a,b){var c;let d,e=new mB(a,b);if(null==e.next)return mA.empty;let f=function a(b){let c=[];do c.push(function(b){let c=[];do c.push(function(b){let c=function(b){if(b.eat("(")){let c=a(b);return b.eat(")")||b.err("Missing closing paren"),c}if(/\W/.test(b.next))b.err("Unexpected token '"+b.next+"'");else{let a=(function(a,b){let c=a.nodeTypes,d=c[b];if(d)return[d];let e=[];for(let a in c){let d=c[a];d.isInGroup(b)&&e.push(d)}return 0==e.length&&a.err("No node type or group '"+b+"' found"),e})(b,b.next).map(a=>(null==b.inline?b.inline=a.isInline:b.inline!=a.isInline&&b.err("Mixing inline and block content"),{type:"name",value:a}));return b.pos++,1==a.length?a[0]:{type:"choice",exprs:a}}}(b);for(;;)if(b.eat("+"))c={type:"plus",expr:c};else if(b.eat("*"))c={type:"star",expr:c};else if(b.eat("?"))c={type:"opt",expr:c};else if(b.eat("{"))c=function(a,b){let c=mC(a),d=c;return a.eat(",")&&(d="}"!=a.next?mC(a):-1),a.eat("}")||a.err("Unclosed braced range"),{type:"range",min:c,max:d,expr:b}}(b,c);else break;return c}(b));while(b.next&&")"!=b.next&&"|"!=b.next)return 1==c.length?c[0]:{type:"seq",exprs:c}}(b));while(b.eat("|"))return 1==c.length?c[0]:{type:"choice",exprs:c}}(e);e.next&&e.err("Unexpected trailing text");let g=(c=function(a){let b=[[]];return e(function a(b,f){if("choice"==b.type)return b.exprs.reduce((b,c)=>b.concat(a(c,f)),[]);if("seq"==b.type)for(let d=0;;d++){let g=a(b.exprs[d],f);if(d==b.exprs.length-1)return g;e(g,f=c())}else if("star"==b.type){let g=c();return d(f,g),e(a(b.expr,g),g),[d(g)]}else if("plus"==b.type){let g=c();return e(a(b.expr,f),g),e(a(b.expr,g),g),[d(g)]}else if("opt"==b.type)return[d(f)].concat(a(b.expr,f));else if("range"==b.type){let g=f;for(let d=0;d<b.min;d++){let d=c();e(a(b.expr,g),d),g=d}if(-1==b.max)e(a(b.expr,g),g);else for(let f=b.min;f<b.max;f++){let f=c();d(g,f),e(a(b.expr,g),f),g=f}return[d(g)]}else if("name"==b.type)return[d(f,void 0,b.value)];else throw Error("Unknown expr type")}(a,0),c()),b;function c(){return b.push([])-1}function d(a,c,d){let e={term:d,to:c};return b[a].push(e),e}function e(a,b){a.forEach(a=>a.to=b)}}(f),d=Object.create(null),function a(b){let e=[];b.forEach(a=>{c[a].forEach(({term:a,to:b})=>{let d;if(a){for(let b=0;b<e.length;b++)e[b][0]==a&&(d=e[b][1]);mE(c,b).forEach(b=>{d||e.push([a,d=[]]),-1==d.indexOf(b)&&d.push(b)})}})});let f=d[b.join(",")]=new mA(b.indexOf(c.length-1)>-1);for(let b=0;b<e.length;b++){let c=e[b][1].sort(mD);f.next.push({type:e[b][0],next:d[c.join(",")]||a(c)})}return f}(mE(c,0)));return function(a,b){for(let c=0,d=[a];c<d.length;c++){let a=d[c],e=!a.validEnd,f=[];for(let b=0;b<a.next.length;b++){let{type:c,next:g}=a.next[b];f.push(c.name),e&&!(c.isText||c.hasRequiredAttrs())&&(e=!1),-1==d.indexOf(g)&&d.push(g)}e&&b.err("Only non-generatable nodes ("+f.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(g,e),g}matchType(a){for(let b=0;b<this.next.length;b++)if(this.next[b].type==a)return this.next[b].next;return null}matchFragment(a,b=0,c=a.childCount){let d=this;for(let e=b;d&&e<c;e++)d=d.matchType(a.child(e).type);return d}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let a=0;a<this.next.length;a++){let{type:b}=this.next[a];if(!(b.isText||b.hasRequiredAttrs()))return b}return null}compatible(a){for(let b=0;b<this.next.length;b++)for(let c=0;c<a.next.length;c++)if(this.next[b].type==a.next[c].type)return!0;return!1}fillBefore(a,b=!1,c=0){let d=[this];return function e(f,g){let h=f.matchFragment(a,c);if(h&&(!b||h.validEnd))return me.from(g.map(a=>a.createAndFill()));for(let a=0;a<f.next.length;a++){let{type:b,next:c}=f.next[a];if(!(b.isText||b.hasRequiredAttrs())&&-1==d.indexOf(c)){d.push(c);let a=e(c,g.concat(b));if(a)return a}}return null}(this,[])}findWrapping(a){for(let b=0;b<this.wrapCache.length;b+=2)if(this.wrapCache[b]==a)return this.wrapCache[b+1];let b=this.computeWrapping(a);return this.wrapCache.push(a,b),b}computeWrapping(a){let b=Object.create(null),c=[{match:this,type:null,via:null}];for(;c.length;){let d=c.shift(),e=d.match;if(e.matchType(a)){let a=[];for(let b=d;b.type;b=b.via)a.push(b.type);return a.reverse()}for(let a=0;a<e.next.length;a++){let{type:f,next:g}=e.next[a];f.isLeaf||f.hasRequiredAttrs()||f.name in b||d.type&&!g.validEnd||(c.push({match:f.contentMatch,type:f,via:d}),b[f.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(a){if(a>=this.next.length)throw RangeError(`There's no ${a}th edge in this content match`);return this.next[a]}toString(){let a=[];return!function b(c){a.push(c);for(let d=0;d<c.next.length;d++)-1==a.indexOf(c.next[d].next)&&b(c.next[d].next)}(this),a.map((b,c)=>{let d=c+(b.validEnd?"*":" ")+" ";for(let c=0;c<b.next.length;c++)d+=(c?", ":"")+b.next[c].type.name+"->"+a.indexOf(b.next[c].next);return d}).join("\n")}}mA.empty=new mA(!0);class mB{constructor(a,b){this.string=a,this.nodeTypes=b,this.inline=null,this.pos=0,this.tokens=a.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(a){return this.next==a&&(this.pos++||!0)}err(a){throw SyntaxError(a+" (in content expression '"+this.string+"')")}}function mC(a){/\D/.test(a.next)&&a.err("Expected number, got '"+a.next+"'");let b=Number(a.next);return a.pos++,b}function mD(a,b){return b-a}function mE(a,b){let c=[];return function b(d){let e=a[d];if(1==e.length&&!e[0].term)return b(e[0].to);c.push(d);for(let a=0;a<e.length;a++){let{term:d,to:f}=e[a];d||-1!=c.indexOf(f)||b(f)}}(b),c.sort(mD)}function mF(a){let b=Object.create(null);for(let c in a){let d=a[c];if(!d.hasDefault)return null;b[c]=d.default}return b}function mG(a,b){let c=Object.create(null);for(let d in a){let e=b&&b[d];if(void 0===e){let b=a[d];if(b.hasDefault)e=b.default;else throw RangeError("No value supplied for attribute "+d)}c[d]=e}return c}function mH(a,b,c,d){for(let d in b)if(!(d in a))throw RangeError(`Unsupported attribute ${d} for ${c} of type ${d}`);for(let c in a){let d=a[c];d.validate&&d.validate(b[c])}}function mI(a,b){let c=Object.create(null);if(b)for(let d in b)c[d]=new mK(a,d,b[d]);return c}class mJ{constructor(a,b,c){this.name=a,this.schema=b,this.spec=c,this.markSet=null,this.groups=c.group?c.group.split(" "):[],this.attrs=mI(a,c.attrs),this.defaultAttrs=mF(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(c.inline||"text"==a),this.isText="text"==a}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==mA.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(a){return this.groups.indexOf(a)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let a in this.attrs)if(this.attrs[a].isRequired)return!0;return!1}compatibleContent(a){return this==a||this.contentMatch.compatible(a.contentMatch)}computeAttrs(a){return!a&&this.defaultAttrs?this.defaultAttrs:mG(this.attrs,a)}create(a=null,b,c){if(this.isText)throw Error("NodeType.create can't construct text nodes");return new mx(this,this.computeAttrs(a),me.from(b),mi.setFrom(c))}createChecked(a=null,b,c){return b=me.from(b),this.checkContent(b),new mx(this,this.computeAttrs(a),b,mi.setFrom(c))}createAndFill(a=null,b,c){if(a=this.computeAttrs(a),(b=me.from(b)).size){let a=this.contentMatch.fillBefore(b);if(!a)return null;b=a.append(b)}let d=this.contentMatch.matchFragment(b),e=d&&d.fillBefore(me.empty,!0);return e?new mx(this,a,b.append(e),mi.setFrom(c)):null}validContent(a){let b=this.contentMatch.matchFragment(a);if(!b||!b.validEnd)return!1;for(let b=0;b<a.childCount;b++)if(!this.allowsMarks(a.child(b).marks))return!1;return!0}checkContent(a){if(!this.validContent(a))throw RangeError(`Invalid content for node ${this.name}: ${a.toString().slice(0,50)}`)}checkAttrs(a){mH(this.attrs,a,"node",this.name)}allowsMarkType(a){return null==this.markSet||this.markSet.indexOf(a)>-1}allowsMarks(a){if(null==this.markSet)return!0;for(let b=0;b<a.length;b++)if(!this.allowsMarkType(a[b].type))return!1;return!0}allowedMarks(a){let b;if(null==this.markSet)return a;for(let c=0;c<a.length;c++)this.allowsMarkType(a[c].type)?b&&b.push(a[c]):b||(b=a.slice(0,c));return b?b.length?b:mi.none:a}static compile(a,b){let c=Object.create(null);a.forEach((a,d)=>c[a]=new mJ(a,b,d));let d=b.spec.topNode||"doc";if(!c[d])throw RangeError("Schema is missing its top node type ('"+d+"')");if(!c.text)throw RangeError("Every schema needs a 'text' type");for(let a in c.text.attrs)throw RangeError("The text node type should not have attributes");return c}}class mK{constructor(a,b,c){this.hasDefault=Object.prototype.hasOwnProperty.call(c,"default"),this.default=c.default,this.validate="string"==typeof c.validate?function(a,b,c){let d=c.split("|");return c=>{let e=null===c?"null":typeof c;if(0>d.indexOf(e))throw RangeError(`Expected value of type ${d} for attribute ${b} on type ${a}, got ${e}`)}}(a,b,c.validate):c.validate}get isRequired(){return!this.hasDefault}}class mL{constructor(a,b,c,d){this.name=a,this.rank=b,this.schema=c,this.spec=d,this.attrs=mI(a,d.attrs),this.excluded=null;let e=mF(this.attrs);this.instance=e?new mi(this,e):null}create(a=null){return!a&&this.instance?this.instance:new mi(this,mG(this.attrs,a))}static compile(a,b){let c=Object.create(null),d=0;return a.forEach((a,e)=>c[a]=new mL(a,d++,b,e)),c}removeFromSet(a){for(var b=0;b<a.length;b++)a[b].type==this&&(a=a.slice(0,b).concat(a.slice(b+1)),b--);return a}isInSet(a){for(let b=0;b<a.length;b++)if(a[b].type==this)return a[b]}checkAttrs(a){mH(this.attrs,a,"mark",this.name)}excludes(a){return this.excluded.indexOf(a)>-1}}class mM{constructor(a){this.linebreakReplacement=null,this.cached=Object.create(null);let b=this.spec={};for(let c in a)b[c]=a[c];b.nodes=md.from(a.nodes),b.marks=md.from(a.marks||{}),this.nodes=mJ.compile(this.spec.nodes,this),this.marks=mL.compile(this.spec.marks,this);let c=Object.create(null);for(let a in this.nodes){if(a in this.marks)throw RangeError(a+" can not be both a node and a mark");let b=this.nodes[a],d=b.spec.content||"",e=b.spec.marks;if(b.contentMatch=c[d]||(c[d]=mA.parse(d,this.nodes)),b.inlineContent=b.contentMatch.inlineContent,b.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!b.isInline||!b.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=b}b.markSet="_"==e?null:e?mN(this,e.split(" ")):""!=e&&b.inlineContent?null:[]}for(let a in this.marks){let b=this.marks[a],c=b.spec.excludes;b.excluded=null==c?[b]:""==c?[]:mN(this,c.split(" "))}this.nodeFromJSON=a=>mx.fromJSON(this,a),this.markFromJSON=a=>mi.fromJSON(this,a),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(a,b=null,c,d){if("string"==typeof a)a=this.nodeType(a);else if(a instanceof mJ){if(a.schema!=this)throw RangeError("Node type from different schema used ("+a.name+")")}else throw RangeError("Invalid node type: "+a);return a.createChecked(b,c,d)}text(a,b){let c=this.nodes.text;return new my(c,c.defaultAttrs,a,mi.setFrom(b))}mark(a,b){return"string"==typeof a&&(a=this.marks[a]),a.create(b)}nodeType(a){let b=this.nodes[a];if(!b)throw RangeError("Unknown node type: "+a);return b}}function mN(a,b){let c=[];for(let d=0;d<b.length;d++){let e=b[d],f=a.marks[e],g=f;if(f)c.push(f);else for(let b in a.marks){let d=a.marks[b];("_"==e||d.spec.group&&d.spec.group.split(" ").indexOf(e)>-1)&&c.push(g=d)}if(!g)throw SyntaxError("Unknown mark type: '"+b[d]+"'")}return c}class mO{constructor(a,b){this.schema=a,this.rules=b,this.tags=[],this.styles=[];let c=this.matchedStyles=[];b.forEach(a=>{if(null!=a.tag)this.tags.push(a);else if(null!=a.style){let b=/[^=]*/.exec(a.style)[0];0>c.indexOf(b)&&c.push(b),this.styles.push(a)}}),this.normalizeLists=!this.tags.some(b=>{if(!/^(ul|ol)\b/.test(b.tag)||!b.node)return!1;let c=a.nodes[b.node];return c.contentMatch.matchType(c)})}parse(a,b={}){let c=new mU(this,b,!1);return c.addAll(a,mi.none,b.from,b.to),c.finish()}parseSlice(a,b={}){let c=new mU(this,b,!0);return c.addAll(a,mi.none,b.from,b.to),mk.maxOpen(c.finish())}matchTag(a,b,c){for(let f=c?this.tags.indexOf(c)+1:0;f<this.tags.length;f++){var d,e;let c=this.tags[f];if(d=a,e=c.tag,(d.matches||d.msMatchesSelector||d.webkitMatchesSelector||d.mozMatchesSelector).call(d,e)&&(void 0===c.namespace||a.namespaceURI==c.namespace)&&(!c.context||b.matchesContext(c.context))){if(c.getAttrs){let b=c.getAttrs(a);if(!1===b)continue;c.attrs=b||void 0}return c}}}matchStyle(a,b,c,d){for(let e=d?this.styles.indexOf(d)+1:0;e<this.styles.length;e++){let d=this.styles[e],f=d.style;if(0==f.indexOf(a)&&(!d.context||c.matchesContext(d.context))&&(!(f.length>a.length)||61==f.charCodeAt(a.length)&&f.slice(a.length+1)==b)){if(d.getAttrs){let a=d.getAttrs(b);if(!1===a)continue;d.attrs=a||void 0}return d}}}static schemaRules(a){let b=[];function c(a){let c=null==a.priority?50:a.priority,d=0;for(;d<b.length;d++){let a=b[d];if((null==a.priority?50:a.priority)<c)break}b.splice(d,0,a)}for(let b in a.marks){let d=a.marks[b].spec.parseDOM;d&&d.forEach(a=>{c(a=mV(a)),a.mark||a.ignore||a.clearMark||(a.mark=b)})}for(let b in a.nodes){let d=a.nodes[b].spec.parseDOM;d&&d.forEach(a=>{c(a=mV(a)),a.node||a.ignore||a.mark||(a.node=b)})}return b}static fromSchema(a){return a.cached.domParser||(a.cached.domParser=new mO(a,mO.schemaRules(a)))}}let mP={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},mQ={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},mR={ol:!0,ul:!0};function mS(a,b,c){return null!=b?!!b|2*("full"===b):a&&"pre"==a.whitespace?3:-5&c}class mT{constructor(a,b,c,d,e,f){this.type=a,this.attrs=b,this.marks=c,this.solid=d,this.options=f,this.content=[],this.activeMarks=mi.none,this.match=e||(4&f?null:a.contentMatch)}findWrapping(a){if(!this.match){if(!this.type)return[];let b=this.type.contentMatch.fillBefore(me.from(a));if(b)this.match=this.type.contentMatch.matchFragment(b);else{let b=this.type.contentMatch,c;return(c=b.findWrapping(a.type))?(this.match=b,c):null}}return this.match.findWrapping(a.type)}finish(a){if(!(1&this.options)){let a=this.content[this.content.length-1],b;a&&a.isText&&(b=/[ \t\r\n\u000c]+$/.exec(a.text))&&(a.text.length==b[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-b[0].length)))}let b=me.from(this.content);return!a&&this.match&&(b=b.append(this.match.fillBefore(me.empty,!0))),this.type?this.type.create(this.attrs,b,this.marks):b}inlineContext(a){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:a.parentNode&&!mP.hasOwnProperty(a.parentNode.nodeName.toLowerCase())}}class mU{constructor(a,b,c){this.parser=a,this.options=b,this.isOpen=c,this.open=0,this.localPreserveWS=!1;let d=b.topNode,e,f=mS(null,b.preserveWhitespace,0)|4*!!c;e=d?new mT(d.type,d.attrs,mi.none,!0,b.topMatch||d.type.contentMatch,f):c?new mT(null,null,mi.none,!0,null,f):new mT(a.schema.topNodeType,null,mi.none,!0,null,f),this.nodes=[e],this.find=b.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(a,b){3==a.nodeType?this.addTextNode(a,b):1==a.nodeType&&this.addElement(a,b)}addTextNode(a,b){let c=a.nodeValue,d=this.top,e=2&d.options?"full":this.localPreserveWS||(1&d.options)>0,{schema:f}=this.parser;if("full"===e||d.inlineContext(a)||/[^ \t\r\n\u000c]/.test(c)){if(e)if("full"===e)c=c.replace(/\r\n?/g,"\n");else if(f.linebreakReplacement&&/[\r\n]/.test(c)&&this.top.findWrapping(f.linebreakReplacement.create())){let a=c.split(/\r?\n|\r/);for(let c=0;c<a.length;c++)c&&this.insertNode(f.linebreakReplacement.create(),b,!0),a[c]&&this.insertNode(f.text(a[c]),b,!/\S/.test(a[c]));c=""}else c=c.replace(/\r?\n|\r/g," ");else if(c=c.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(c)&&this.open==this.nodes.length-1){let b=d.content[d.content.length-1],e=a.previousSibling;(!b||e&&"BR"==e.nodeName||b.isText&&/[ \t\r\n\u000c]$/.test(b.text))&&(c=c.slice(1))}c&&this.insertNode(f.text(c),b,!/\S/.test(c)),this.findInText(a)}else this.findInside(a)}addElement(a,b,c){let d=this.localPreserveWS,e=this.top;("PRE"==a.tagName||/pre/.test(a.style&&a.style.whiteSpace))&&(this.localPreserveWS=!0);let f=a.nodeName.toLowerCase(),g;mR.hasOwnProperty(f)&&this.parser.normalizeLists&&function(a){for(let b=a.firstChild,c=null;b;b=b.nextSibling){let a=1==b.nodeType?b.nodeName.toLowerCase():null;a&&mR.hasOwnProperty(a)&&c?(c.appendChild(b),b=c):"li"==a?c=b:a&&(c=null)}}(a);let h=this.options.ruleFromNode&&this.options.ruleFromNode(a)||(g=this.parser.matchTag(a,this,c));a:if(h?h.ignore:mQ.hasOwnProperty(f))this.findInside(a),this.ignoreFallback(a,b);else if(!h||h.skip||h.closeParent){h&&h.closeParent?this.open=Math.max(0,this.open-1):h&&h.skip.nodeType&&(a=h.skip);let c,d=this.needsBlock;if(mP.hasOwnProperty(f))e.content.length&&e.content[0].isInline&&this.open&&(this.open--,e=this.top),c=!0,e.type||(this.needsBlock=!0);else if(!a.firstChild){this.leafFallback(a,b);break a}let g=h&&h.skip?b:this.readStyles(a,b);g&&this.addAll(a,g),c&&this.sync(e),this.needsBlock=d}else{let c=this.readStyles(a,b);c&&this.addElementByRule(a,h,c,!1===h.consuming?g:void 0)}this.localPreserveWS=d}leafFallback(a,b){"BR"==a.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(a.ownerDocument.createTextNode("\n"),b)}ignoreFallback(a,b){"BR"!=a.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),b,!0)}readStyles(a,b){let c=a.style;if(c&&c.length)for(let a=0;a<this.parser.matchedStyles.length;a++){let d=this.parser.matchedStyles[a],e=c.getPropertyValue(d);if(e)for(let a;;){let c=this.parser.matchStyle(d,e,this,a);if(!c)break;if(c.ignore)return null;if(b=c.clearMark?b.filter(a=>!c.clearMark(a)):b.concat(this.parser.schema.marks[c.mark].create(c.attrs)),!1===c.consuming)a=c;else break}}return b}addElementByRule(a,b,c,d){let e,f;if(b.node)if((f=this.parser.schema.nodes[b.node]).isLeaf)this.insertNode(f.create(b.attrs),c,"BR"==a.nodeName)||this.leafFallback(a,c);else{let a=this.enter(f,b.attrs||null,c,b.preserveWhitespace);a&&(e=!0,c=a)}else{let a=this.parser.schema.marks[b.mark];c=c.concat(a.create(b.attrs))}let g=this.top;if(f&&f.isLeaf)this.findInside(a);else if(d)this.addElement(a,c,d);else if(b.getContent)this.findInside(a),b.getContent(a,this.parser.schema).forEach(a=>this.insertNode(a,c,!1));else{let d=a;"string"==typeof b.contentElement?d=a.querySelector(b.contentElement):"function"==typeof b.contentElement?d=b.contentElement(a):b.contentElement&&(d=b.contentElement),this.findAround(a,d,!0),this.addAll(d,c),this.findAround(a,d,!1)}e&&this.sync(g)&&this.open--}addAll(a,b,c,d){let e=c||0;for(let f=c?a.childNodes[c]:a.firstChild,g=null==d?null:a.childNodes[d];f!=g;f=f.nextSibling,++e)this.findAtPoint(a,e),this.addDOM(f,b);this.findAtPoint(a,e)}findPlace(a,b,c){let d,e;for(let b=this.open,f=0;b>=0;b--){let g=this.nodes[b],h=g.findWrapping(a);if(h&&(!d||d.length>h.length+f)&&(d=h,e=g,!h.length))break;if(g.solid){if(c)break;f+=2}}if(!d)return null;this.sync(e);for(let a=0;a<d.length;a++)b=this.enterInner(d[a],null,b,!1);return b}insertNode(a,b,c){if(a.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(b=this.enterInner(a,null,b))}let d=this.findPlace(a,b,c);if(d){this.closeExtra();let b=this.top;b.match&&(b.match=b.match.matchType(a.type));let c=mi.none;for(let e of d.concat(a.marks))(b.type?b.type.allowsMarkType(e.type):mW(e.type,a.type))&&(c=e.addToSet(c));return b.content.push(a.mark(c)),!0}return!1}enter(a,b,c,d){let e=this.findPlace(a.create(b),c,!1);return e&&(e=this.enterInner(a,b,c,!0,d)),e}enterInner(a,b,c,d=!1,e){this.closeExtra();let f=this.top;f.match=f.match&&f.match.matchType(a);let g=mS(a,e,f.options);4&f.options&&0==f.content.length&&(g|=4);let h=mi.none;return c=c.filter(b=>(f.type?!f.type.allowsMarkType(b.type):!mW(b.type,a))||(h=b.addToSet(h),!1)),this.nodes.push(new mT(a,b,h,d,null,g)),this.open++,c}closeExtra(a=!1){let b=this.nodes.length-1;if(b>this.open){for(;b>this.open;b--)this.nodes[b-1].content.push(this.nodes[b].finish(a));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(a){for(let b=this.open;b>=0;b--)if(this.nodes[b]==a)return this.open=b,!0;else this.localPreserveWS&&(this.nodes[b].options|=1);return!1}get currentPos(){this.closeExtra();let a=0;for(let b=this.open;b>=0;b--){let c=this.nodes[b].content;for(let b=c.length-1;b>=0;b--)a+=c[b].nodeSize;b&&a++}return a}findAtPoint(a,b){if(this.find)for(let c=0;c<this.find.length;c++)this.find[c].node==a&&this.find[c].offset==b&&(this.find[c].pos=this.currentPos)}findInside(a){if(this.find)for(let b=0;b<this.find.length;b++)null==this.find[b].pos&&1==a.nodeType&&a.contains(this.find[b].node)&&(this.find[b].pos=this.currentPos)}findAround(a,b,c){if(a!=b&&this.find)for(let d=0;d<this.find.length;d++)null==this.find[d].pos&&1==a.nodeType&&a.contains(this.find[d].node)&&b.compareDocumentPosition(this.find[d].node)&(c?2:4)&&(this.find[d].pos=this.currentPos)}findInText(a){if(this.find)for(let b=0;b<this.find.length;b++)this.find[b].node==a&&(this.find[b].pos=this.currentPos-(a.nodeValue.length-this.find[b].offset))}matchesContext(a){if(a.indexOf("|")>-1)return a.split(/\s*\|\s*/).some(this.matchesContext,this);let b=a.split("/"),c=this.options.context,d=!this.isOpen&&(!c||c.parent.type==this.nodes[0].type),e=-(c?c.depth+1:0)+ +!d,f=(a,g)=>{for(;a>=0;a--){let h=b[a];if(""==h){if(a==b.length-1||0==a)continue;for(;g>=e;g--)if(f(a-1,g))return!0;return!1}{let a=g>0||0==g&&d?this.nodes[g].type:c&&g>=e?c.node(g-e).type:null;if(!a||a.name!=h&&!a.isInGroup(h))return!1;g--}}return!0};return f(b.length-1,this.open)}textblockFromContext(){let a=this.options.context;if(a)for(let b=a.depth;b>=0;b--){let c=a.node(b).contentMatchAt(a.indexAfter(b)).defaultType;if(c&&c.isTextblock&&c.defaultAttrs)return c}for(let a in this.parser.schema.nodes){let b=this.parser.schema.nodes[a];if(b.isTextblock&&b.defaultAttrs)return b}}}function mV(a){let b={};for(let c in a)b[c]=a[c];return b}function mW(a,b){let c=b.schema.nodes;for(let d in c){let e=c[d];if(!e.allowsMarkType(a))continue;let f=[],g=a=>{f.push(a);for(let c=0;c<a.edgeCount;c++){let{type:d,next:e}=a.edge(c);if(d==b||0>f.indexOf(e)&&g(e))return!0}};if(g(e.contentMatch))return!0}}class mX{constructor(a,b){this.nodes=a,this.marks=b}serializeFragment(a,b={},c){c||(c=mZ(b).createDocumentFragment());let d=c,e=[];return a.forEach(a=>{if(e.length||a.marks.length){let c=0,f=0;for(;c<e.length&&f<a.marks.length;){let b=a.marks[f];if(!this.marks[b.type.name]){f++;continue}if(!b.eq(e[c][0])||!1===b.type.spec.spanning)break;c++,f++}for(;c<e.length;)d=e.pop()[1];for(;f<a.marks.length;){let c=a.marks[f++],g=this.serializeMark(c,a.isInline,b);g&&(e.push([c,d]),d.appendChild(g.dom),d=g.contentDOM||g.dom)}}d.appendChild(this.serializeNodeInner(a,b))}),c}serializeNodeInner(a,b){let{dom:c,contentDOM:d}=m_(mZ(b),this.nodes[a.type.name](a),null,a.attrs);if(d){if(a.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(a.content,b,d)}return c}serializeNode(a,b={}){let c=this.serializeNodeInner(a,b);for(let d=a.marks.length-1;d>=0;d--){let e=this.serializeMark(a.marks[d],a.isInline,b);e&&((e.contentDOM||e.dom).appendChild(c),c=e.dom)}return c}serializeMark(a,b,c={}){let d=this.marks[a.type.name];return d&&m_(mZ(c),d(a,b),null,a.attrs)}static renderSpec(a,b,c=null,d){return m_(a,b,c,d)}static fromSchema(a){return a.cached.domSerializer||(a.cached.domSerializer=new mX(this.nodesFromSchema(a),this.marksFromSchema(a)))}static nodesFromSchema(a){let b=mY(a.nodes);return b.text||(b.text=a=>a.text),b}static marksFromSchema(a){return mY(a.marks)}}function mY(a){let b={};for(let c in a){let d=a[c].spec.toDOM;d&&(b[c]=d)}return b}function mZ(a){return a.document||window.document}let m$=new WeakMap;function m_(a,b,c,d){let e,f,g;if("string"==typeof b)return{dom:a.createTextNode(b)};if(null!=b.nodeType)return{dom:b};if(b.dom&&null!=b.dom.nodeType)return b;let h=b[0],i;if("string"!=typeof h)throw RangeError("Invalid array passed to renderSpec");if(d&&(void 0===(f=m$.get(d))&&m$.set(d,(g=null,!function a(b){if(b&&"object"==typeof b)if(Array.isArray(b))if("string"==typeof b[0])g||(g=[]),g.push(b);else for(let c=0;c<b.length;c++)a(b[c]);else for(let c in b)a(b[c])}(d),f=g)),i=f)&&i.indexOf(b)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let j=h.indexOf(" ");j>0&&(c=h.slice(0,j),h=h.slice(j+1));let k=c?a.createElementNS(c,h):a.createElement(h),l=b[1],m=1;if(l&&"object"==typeof l&&null==l.nodeType&&!Array.isArray(l)){for(let a in m=2,l)if(null!=l[a]){let b=a.indexOf(" ");b>0?k.setAttributeNS(a.slice(0,b),a.slice(b+1),l[a]):"style"==a&&k.style?k.style.cssText=l[a]:k.setAttribute(a,l[a])}}for(let f=m;f<b.length;f++){let g=b[f];if(0===g){if(f<b.length-1||f>m)throw RangeError("Content hole must be the only child of its parent node");return{dom:k,contentDOM:k}}{let{dom:b,contentDOM:f}=m_(a,g,c,d);if(k.appendChild(b),f){if(e)throw RangeError("Multiple content holes");e=f}}}return{dom:k,contentDOM:e}}class m0{constructor(a,b,c){this.pos=a,this.delInfo=b,this.recover=c}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class m1{constructor(a,b=!1){if(this.ranges=a,this.inverted=b,!a.length&&m1.empty)return m1.empty}recover(a){let b=0,c=65535&a;if(!this.inverted)for(let a=0;a<c;a++)b+=this.ranges[3*a+2]-this.ranges[3*a+1];return this.ranges[3*c]+b+(a-(65535&a))/65536}mapResult(a,b=1){return this._map(a,b,!1)}map(a,b=1){return this._map(a,b,!0)}_map(a,b,c){let d=0,e=this.inverted?2:1,f=this.inverted?1:2;for(let g=0;g<this.ranges.length;g+=3){let h=this.ranges[g]-(this.inverted?d:0);if(h>a)break;let i=this.ranges[g+e],j=this.ranges[g+f],k=h+i;if(a<=k){let e=i?a==h?-1:a==k?1:b:b,f=h+d+(e<0?0:j);if(c)return f;let l=a==(b<0?h:k)?null:g/3+(a-h)*65536,m=a==h?2:a==k?1:4;return(b<0?a!=h:a!=k)&&(m|=8),new m0(f,m,l)}d+=j-i}return c?a+d:new m0(a+d,0,null)}touches(a,b){let c=0,d=65535&b,e=this.inverted?2:1,f=this.inverted?1:2;for(let b=0;b<this.ranges.length;b+=3){let g=this.ranges[b]-(this.inverted?c:0);if(g>a)break;let h=this.ranges[b+e];if(a<=g+h&&b==3*d)return!0;c+=this.ranges[b+f]-h}return!1}forEach(a){let b=this.inverted?2:1,c=this.inverted?1:2;for(let d=0,e=0;d<this.ranges.length;d+=3){let f=this.ranges[d],g=f-(this.inverted?e:0),h=f+(this.inverted?0:e),i=this.ranges[d+b],j=this.ranges[d+c];a(g,g+i,h,h+j),e+=j-i}}invert(){return new m1(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(a){return 0==a?m1.empty:new m1(a<0?[0,-a,0]:[0,0,a])}}m1.empty=new m1([]);class m2{constructor(a,b,c=0,d=a?a.length:0){this.mirror=b,this.from=c,this.to=d,this._maps=a||[],this.ownData=!(a||b)}get maps(){return this._maps}slice(a=0,b=this.maps.length){return new m2(this._maps,this.mirror,a,b)}appendMap(a,b){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(a),null!=b&&this.setMirror(this._maps.length-1,b)}appendMapping(a){for(let b=0,c=this._maps.length;b<a._maps.length;b++){let d=a.getMirror(b);this.appendMap(a._maps[b],null!=d&&d<b?c+d:void 0)}}getMirror(a){if(this.mirror){for(let b=0;b<this.mirror.length;b++)if(this.mirror[b]==a)return this.mirror[b+(b%2?-1:1)]}}setMirror(a,b){this.mirror||(this.mirror=[]),this.mirror.push(a,b)}appendMappingInverted(a){for(let b=a.maps.length-1,c=this._maps.length+a._maps.length;b>=0;b--){let d=a.getMirror(b);this.appendMap(a._maps[b].invert(),null!=d&&d>b?c-d-1:void 0)}}invert(){let a=new m2;return a.appendMappingInverted(this),a}map(a,b=1){if(this.mirror)return this._map(a,b,!0);for(let c=this.from;c<this.to;c++)a=this._maps[c].map(a,b);return a}mapResult(a,b=1){return this._map(a,b,!1)}_map(a,b,c){let d=0;for(let c=this.from;c<this.to;c++){let e=this._maps[c].mapResult(a,b);if(null!=e.recover){let b=this.getMirror(c);if(null!=b&&b>c&&b<this.to){c=b,a=this._maps[b].recover(e.recover);continue}}d|=e.delInfo,a=e.pos}return c?a:new m0(a,d,null)}}let m3=Object.create(null);class m4{getMap(){return m1.empty}merge(a){return null}static fromJSON(a,b){if(!b||!b.stepType)throw RangeError("Invalid input for Step.fromJSON");let c=m3[b.stepType];if(!c)throw RangeError(`No step type ${b.stepType} defined`);return c.fromJSON(a,b)}static jsonID(a,b){if(a in m3)throw RangeError("Duplicate use of step JSON ID "+a);return m3[a]=b,b.prototype.jsonID=a,b}}class m5{constructor(a,b){this.doc=a,this.failed=b}static ok(a){return new m5(a,null)}static fail(a){return new m5(null,a)}static fromReplace(a,b,c,d){try{return m5.ok(a.replace(b,c,d))}catch(a){if(a instanceof mj)return m5.fail(a.message);throw a}}}function m6(a,b,c){let d=[];for(let e=0;e<a.childCount;e++){let f=a.child(e);f.content.size&&(f=f.copy(m6(f.content,b,f))),f.isInline&&(f=b(f,c,e)),d.push(f)}return me.fromArray(d)}class m7 extends m4{constructor(a,b,c){super(),this.from=a,this.to=b,this.mark=c}apply(a){let b=a.slice(this.from,this.to),c=a.resolve(this.from),d=c.node(c.sharedDepth(this.to)),e=new mk(m6(b.content,(a,b)=>a.isAtom&&b.type.allowsMarkType(this.mark.type)?a.mark(this.mark.addToSet(a.marks)):a,d),b.openStart,b.openEnd);return m5.fromReplace(a,this.from,this.to,e)}invert(){return new m8(this.from,this.to,this.mark)}map(a){let b=a.mapResult(this.from,1),c=a.mapResult(this.to,-1);return b.deleted&&c.deleted||b.pos>=c.pos?null:new m7(b.pos,c.pos,this.mark)}merge(a){return a instanceof m7&&a.mark.eq(this.mark)&&this.from<=a.to&&this.to>=a.from?new m7(Math.min(this.from,a.from),Math.max(this.to,a.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(a,b){if("number"!=typeof b.from||"number"!=typeof b.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new m7(b.from,b.to,a.markFromJSON(b.mark))}}m4.jsonID("addMark",m7);class m8 extends m4{constructor(a,b,c){super(),this.from=a,this.to=b,this.mark=c}apply(a){let b=a.slice(this.from,this.to),c=new mk(m6(b.content,a=>a.mark(this.mark.removeFromSet(a.marks)),a),b.openStart,b.openEnd);return m5.fromReplace(a,this.from,this.to,c)}invert(){return new m7(this.from,this.to,this.mark)}map(a){let b=a.mapResult(this.from,1),c=a.mapResult(this.to,-1);return b.deleted&&c.deleted||b.pos>=c.pos?null:new m8(b.pos,c.pos,this.mark)}merge(a){return a instanceof m8&&a.mark.eq(this.mark)&&this.from<=a.to&&this.to>=a.from?new m8(Math.min(this.from,a.from),Math.max(this.to,a.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(a,b){if("number"!=typeof b.from||"number"!=typeof b.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new m8(b.from,b.to,a.markFromJSON(b.mark))}}m4.jsonID("removeMark",m8);class m9 extends m4{constructor(a,b){super(),this.pos=a,this.mark=b}apply(a){let b=a.nodeAt(this.pos);if(!b)return m5.fail("No node at mark step's position");let c=b.type.create(b.attrs,null,this.mark.addToSet(b.marks));return m5.fromReplace(a,this.pos,this.pos+1,new mk(me.from(c),0,+!b.isLeaf))}invert(a){let b=a.nodeAt(this.pos);if(b){let a=this.mark.addToSet(b.marks);if(a.length==b.marks.length){for(let c=0;c<b.marks.length;c++)if(!b.marks[c].isInSet(a))return new m9(this.pos,b.marks[c]);return new m9(this.pos,this.mark)}}return new na(this.pos,this.mark)}map(a){let b=a.mapResult(this.pos,1);return b.deletedAfter?null:new m9(b.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(a,b){if("number"!=typeof b.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new m9(b.pos,a.markFromJSON(b.mark))}}m4.jsonID("addNodeMark",m9);class na extends m4{constructor(a,b){super(),this.pos=a,this.mark=b}apply(a){let b=a.nodeAt(this.pos);if(!b)return m5.fail("No node at mark step's position");let c=b.type.create(b.attrs,null,this.mark.removeFromSet(b.marks));return m5.fromReplace(a,this.pos,this.pos+1,new mk(me.from(c),0,+!b.isLeaf))}invert(a){let b=a.nodeAt(this.pos);return b&&this.mark.isInSet(b.marks)?new m9(this.pos,this.mark):this}map(a){let b=a.mapResult(this.pos,1);return b.deletedAfter?null:new na(b.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(a,b){if("number"!=typeof b.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new na(b.pos,a.markFromJSON(b.mark))}}m4.jsonID("removeNodeMark",na);class nb extends m4{constructor(a,b,c,d=!1){super(),this.from=a,this.to=b,this.slice=c,this.structure=d}apply(a){return this.structure&&nd(a,this.from,this.to)?m5.fail("Structure replace would overwrite content"):m5.fromReplace(a,this.from,this.to,this.slice)}getMap(){return new m1([this.from,this.to-this.from,this.slice.size])}invert(a){return new nb(this.from,this.from+this.slice.size,a.slice(this.from,this.to))}map(a){let b=a.mapResult(this.from,1),c=a.mapResult(this.to,-1);return b.deletedAcross&&c.deletedAcross?null:new nb(b.pos,Math.max(b.pos,c.pos),this.slice,this.structure)}merge(a){if(!(a instanceof nb)||a.structure||this.structure)return null;if(this.from+this.slice.size!=a.from||this.slice.openEnd||a.slice.openStart)if(a.to!=this.from||this.slice.openStart||a.slice.openEnd)return null;else{let b=this.slice.size+a.slice.size==0?mk.empty:new mk(a.slice.content.append(this.slice.content),a.slice.openStart,this.slice.openEnd);return new nb(a.from,this.to,b,this.structure)}{let b=this.slice.size+a.slice.size==0?mk.empty:new mk(this.slice.content.append(a.slice.content),this.slice.openStart,a.slice.openEnd);return new nb(this.from,this.to+(a.to-a.from),b,this.structure)}}toJSON(){let a={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(a.slice=this.slice.toJSON()),this.structure&&(a.structure=!0),a}static fromJSON(a,b){if("number"!=typeof b.from||"number"!=typeof b.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new nb(b.from,b.to,mk.fromJSON(a,b.slice),!!b.structure)}}m4.jsonID("replace",nb);class nc extends m4{constructor(a,b,c,d,e,f,g=!1){super(),this.from=a,this.to=b,this.gapFrom=c,this.gapTo=d,this.slice=e,this.insert=f,this.structure=g}apply(a){if(this.structure&&(nd(a,this.from,this.gapFrom)||nd(a,this.gapTo,this.to)))return m5.fail("Structure gap-replace would overwrite content");let b=a.slice(this.gapFrom,this.gapTo);if(b.openStart||b.openEnd)return m5.fail("Gap is not a flat range");let c=this.slice.insertAt(this.insert,b.content);return c?m5.fromReplace(a,this.from,this.to,c):m5.fail("Content does not fit in gap")}getMap(){return new m1([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(a){let b=this.gapTo-this.gapFrom;return new nc(this.from,this.from+this.slice.size+b,this.from+this.insert,this.from+this.insert+b,a.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(a){let b=a.mapResult(this.from,1),c=a.mapResult(this.to,-1),d=this.from==this.gapFrom?b.pos:a.map(this.gapFrom,-1),e=this.to==this.gapTo?c.pos:a.map(this.gapTo,1);return b.deletedAcross&&c.deletedAcross||d<b.pos||e>c.pos?null:new nc(b.pos,c.pos,d,e,this.slice,this.insert,this.structure)}toJSON(){let a={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(a.slice=this.slice.toJSON()),this.structure&&(a.structure=!0),a}static fromJSON(a,b){if("number"!=typeof b.from||"number"!=typeof b.to||"number"!=typeof b.gapFrom||"number"!=typeof b.gapTo||"number"!=typeof b.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new nc(b.from,b.to,b.gapFrom,b.gapTo,mk.fromJSON(a,b.slice),b.insert,!!b.structure)}}function nd(a,b,c){let d=a.resolve(b),e=c-b,f=d.depth;for(;e>0&&f>0&&d.indexAfter(f)==d.node(f).childCount;)f--,e--;if(e>0){let a=d.node(f).maybeChild(d.indexAfter(f));for(;e>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,e--}}return!1}function ne(a,b,c,d=c.contentMatch,e=!0){let f=a.doc.nodeAt(b),g=[],h=b+1;for(let b=0;b<f.childCount;b++){let i=f.child(b),j=h+i.nodeSize,k=d.matchType(i.type);if(k){d=k;for(let b=0;b<i.marks.length;b++)c.allowsMarkType(i.marks[b].type)||a.step(new m8(h,j,i.marks[b]));if(e&&i.isText&&"pre"!=c.whitespace){let a,b=/\r?\n|\r/g,d;for(;a=b.exec(i.text);)d||(d=new mk(me.from(c.schema.text(" ",c.allowedMarks(i.marks))),0,0)),g.push(new nb(h+a.index,h+a.index+a[0].length,d))}}else g.push(new nb(h,j,mk.empty));h=j}if(!d.validEnd){let b=d.fillBefore(me.empty,!0);a.replace(h,h,new mk(b,0,0))}for(let b=g.length-1;b>=0;b--)a.step(g[b])}function nf(a){let b=a.parent.content.cutByIndex(a.startIndex,a.endIndex);for(let c=a.depth,d=0,e=0;;--c){let f=a.$from.node(c),g=a.$from.index(c)+d,h=a.$to.indexAfter(c)-e;if(c<a.depth&&f.canReplace(g,h,b))return c;if(0==c||f.type.spec.isolating||!((0==g||f.canReplace(g,f.childCount))&&(h==f.childCount||f.canReplace(0,h))))break;g&&(d=1),h<f.childCount&&(e=1)}return null}function ng(a,b,c=null,d=a){let e=function(a,b){let{parent:c,startIndex:d,endIndex:e}=a,f=c.contentMatchAt(d).findWrapping(b);if(!f)return null;let g=f.length?f[0]:b;return c.canReplaceWith(d,e,g)?f:null}(a,b),f=e&&function(a,b){let{parent:c,startIndex:d,endIndex:e}=a,f=c.child(d),g=b.contentMatch.findWrapping(f.type);if(!g)return null;let h=(g.length?g[g.length-1]:b).contentMatch;for(let a=d;h&&a<e;a++)h=h.matchType(c.child(a).type);return h&&h.validEnd?g:null}(d,b);return f?e.map(nh).concat({type:b,attrs:c}).concat(f.map(nh)):null}function nh(a){return{type:a,attrs:null}}function ni(a,b,c,d){b.forEach((e,f)=>{if(e.isText){let g,h=/\r?\n|\r/g;for(;g=h.exec(e.text);){let e=a.mapping.slice(d).map(c+1+f+g.index);a.replaceWith(e,e+1,b.type.schema.linebreakReplacement.create())}}})}function nj(a,b,c,d){b.forEach((e,f)=>{if(e.type==e.type.schema.linebreakReplacement){let e=a.mapping.slice(d).map(c+1+f);a.replaceWith(e,e+1,b.type.schema.text("\n"))}})}function nk(a,b,c=1,d){let e=a.resolve(b),f=e.depth-c,g=d&&d[d.length-1]||e.parent;if(f<0||e.parent.type.spec.isolating||!e.parent.canReplace(e.index(),e.parent.childCount)||!g.type.validContent(e.parent.content.cutByIndex(e.index(),e.parent.childCount)))return!1;for(let a=e.depth-1,b=c-2;a>f;a--,b--){let c=e.node(a),f=e.index(a);if(c.type.spec.isolating)return!1;let g=c.content.cutByIndex(f,c.childCount),h=d&&d[b+1];h&&(g=g.replaceChild(0,h.type.create(h.attrs)));let i=d&&d[b]||c;if(!c.canReplace(f+1,c.childCount)||!i.type.validContent(g))return!1}let h=e.indexAfter(f),i=d&&d[0];return e.node(f).canReplaceWith(h,h,i?i.type:e.node(f+1).type)}function nl(a,b){let c=a.resolve(b),d=c.index();return nm(c.nodeBefore,c.nodeAfter)&&c.parent.canReplace(d,d+1)}function nm(a,b){return!!(a&&b&&!a.isLeaf&&function(a,b){b.content.size||a.type.compatibleContent(b.type);let c=a.contentMatchAt(a.childCount),{linebreakReplacement:d}=a.type.schema;for(let e=0;e<b.childCount;e++){let f=b.child(e),g=f.type==d?a.type.schema.nodes.text:f.type;if(!(c=c.matchType(g))||!a.type.allowsMarks(f.marks))return!1}return c.validEnd}(a,b))}function nn(a,b,c=-1){let d=a.resolve(b);for(let a=d.depth;;a--){let e,f,g=d.index(a);if(a==d.depth?(e=d.nodeBefore,f=d.nodeAfter):c>0?(e=d.node(a+1),g++,f=d.node(a).maybeChild(g)):(e=d.node(a).maybeChild(g-1),f=d.node(a+1)),e&&!e.isTextblock&&nm(e,f)&&d.node(a).canReplace(g,g+1))return b;if(0==a)break;b=c<0?d.before(a):d.after(a)}}function no(a,b,c){let d=a.resolve(b);if(!c.content.size)return b;let e=c.content;for(let a=0;a<c.openStart;a++)e=e.firstChild.content;for(let a=1;a<=(0==c.openStart&&c.size?2:1);a++)for(let b=d.depth;b>=0;b--){let c=b==d.depth?0:d.pos<=(d.start(b+1)+d.end(b+1))/2?-1:1,f=d.index(b)+ +(c>0),g=d.node(b),h=!1;if(1==a)h=g.canReplace(f,f,e);else{let a=g.contentMatchAt(f).findWrapping(e.firstChild.type);h=a&&g.canReplaceWith(f,f,a[0])}if(h)return 0==c?d.pos:c<0?d.before(b+1):d.after(b+1)}return null}function np(a,b,c=b,d=mk.empty){if(b==c&&!d.size)return null;let e=a.resolve(b),f=a.resolve(c);return nq(e,f,d)?new nb(b,c,d):new nr(e,f,d).fit()}function nq(a,b,c){return!c.openStart&&!c.openEnd&&a.start()==b.start()&&a.parent.canReplace(a.index(),b.index(),c.content)}m4.jsonID("replaceAround",nc);class nr{constructor(a,b,c){this.$from=a,this.$to=b,this.unplaced=c,this.frontier=[],this.placed=me.empty;for(let b=0;b<=a.depth;b++){let c=a.node(b);this.frontier.push({type:c.type,match:c.contentMatchAt(a.indexAfter(b))})}for(let b=a.depth;b>0;b--)this.placed=me.from(a.node(b).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let a=this.findFittable();a?this.placeNodes(a):this.openMore()||this.dropNode()}let a=this.mustMoveInline(),b=this.placed.size-this.depth-this.$from.depth,c=this.$from,d=this.close(a<0?this.$to:c.doc.resolve(a));if(!d)return null;let e=this.placed,f=c.depth,g=d.depth;for(;f&&g&&1==e.childCount;)e=e.firstChild.content,f--,g--;let h=new mk(e,f,g);return a>-1?new nc(c.pos,a,this.$to.pos,this.$to.end(),h,b):h.size||c.pos!=this.$to.pos?new nb(c.pos,d.pos,h):null}findFittable(){let a=this.unplaced.openStart;for(let b=this.unplaced.content,c=0,d=this.unplaced.openEnd;c<a;c++){let e=b.firstChild;if(b.childCount>1&&(d=0),e.type.spec.isolating&&d<=c){a=c;break}b=e.content}for(let b=1;b<=2;b++)for(let c=1==b?a:this.unplaced.openStart;c>=0;c--){let a=null,d=(c?(a=nu(this.unplaced.content,c-1).firstChild).content:this.unplaced.content).firstChild;for(let e=this.depth;e>=0;e--){let{type:f,match:g}=this.frontier[e],h,i=null;if(1==b&&(d?g.matchType(d.type)||(i=g.fillBefore(me.from(d),!1)):a&&f.compatibleContent(a.type)))return{sliceDepth:c,frontierDepth:e,parent:a,inject:i};if(2==b&&d&&(h=g.findWrapping(d.type)))return{sliceDepth:c,frontierDepth:e,parent:a,wrap:h};if(a&&g.matchType(a.type))break}}}openMore(){let{content:a,openStart:b,openEnd:c}=this.unplaced,d=nu(a,b);return!!d.childCount&&!d.firstChild.isLeaf&&(this.unplaced=new mk(a,b+1,Math.max(c,d.size+b>=a.size-c?b+1:0)),!0)}dropNode(){let{content:a,openStart:b,openEnd:c}=this.unplaced,d=nu(a,b);if(d.childCount<=1&&b>0){let e=a.size-b<=b+d.size;this.unplaced=new mk(ns(a,b-1,1),b-1,e?b-1:c)}else this.unplaced=new mk(ns(a,b,1),b,c)}placeNodes({sliceDepth:a,frontierDepth:b,parent:c,inject:d,wrap:e}){for(;this.depth>b;)this.closeFrontierNode();if(e)for(let a=0;a<e.length;a++)this.openFrontierNode(e[a]);let f=this.unplaced,g=c?c.content:f.content,h=f.openStart-a,i=0,j=[],{match:k,type:l}=this.frontier[b];if(d){for(let a=0;a<d.childCount;a++)j.push(d.child(a));k=k.matchFragment(d)}let m=g.size+a-(f.content.size-f.openEnd);for(;i<g.childCount;){let a=g.child(i),b=k.matchType(a.type);if(!b)break;(++i>1||0==h||a.content.size)&&(k=b,j.push(function a(b,c,d){if(c<=0)return b;let e=b.content;return c>1&&(e=e.replaceChild(0,a(e.firstChild,c-1,1==e.childCount?d-1:0))),c>0&&(e=b.type.contentMatch.fillBefore(e).append(e),d<=0&&(e=e.append(b.type.contentMatch.matchFragment(e).fillBefore(me.empty,!0)))),b.copy(e)}(a.mark(l.allowedMarks(a.marks)),1==i?h:0,i==g.childCount?m:-1)))}let n=i==g.childCount;n||(m=-1),this.placed=nt(this.placed,b,me.from(j)),this.frontier[b].match=k,n&&m<0&&c&&c.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let a=0,b=g;a<m;a++){let a=b.lastChild;this.frontier.push({type:a.type,match:a.contentMatchAt(a.childCount)}),b=a.content}this.unplaced=n?0==a?mk.empty:new mk(ns(f.content,a-1,1),a-1,m<0?f.openEnd:a-1):new mk(ns(f.content,a,i),f.openStart,f.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let a=this.frontier[this.depth],b;if(!a.type.isTextblock||!nv(this.$to,this.$to.depth,a.type,a.match,!1)||this.$to.depth==this.depth&&(b=this.findCloseLevel(this.$to))&&b.depth==this.depth)return -1;let{depth:c}=this.$to,d=this.$to.after(c);for(;c>1&&d==this.$to.end(--c);)++d;return d}findCloseLevel(a){b:for(let b=Math.min(this.depth,a.depth);b>=0;b--){let{match:c,type:d}=this.frontier[b],e=b<a.depth&&a.end(b+1)==a.pos+(a.depth-(b+1)),f=nv(a,b,d,c,e);if(f){for(let c=b-1;c>=0;c--){let{match:b,type:d}=this.frontier[c],e=nv(a,c,d,b,!0);if(!e||e.childCount)continue b}return{depth:b,fit:f,move:e?a.doc.resolve(a.after(b+1)):a}}}}close(a){let b=this.findCloseLevel(a);if(!b)return null;for(;this.depth>b.depth;)this.closeFrontierNode();b.fit.childCount&&(this.placed=nt(this.placed,b.depth,b.fit)),a=b.move;for(let c=b.depth+1;c<=a.depth;c++){let b=a.node(c),d=b.type.contentMatch.fillBefore(b.content,!0,a.index(c));this.openFrontierNode(b.type,b.attrs,d)}return a}openFrontierNode(a,b=null,c){let d=this.frontier[this.depth];d.match=d.match.matchType(a),this.placed=nt(this.placed,this.depth,me.from(a.create(b,c))),this.frontier.push({type:a,match:a.contentMatch})}closeFrontierNode(){let a=this.frontier.pop().match.fillBefore(me.empty,!0);a.childCount&&(this.placed=nt(this.placed,this.frontier.length,a))}}function ns(a,b,c){return 0==b?a.cutByIndex(c,a.childCount):a.replaceChild(0,a.firstChild.copy(ns(a.firstChild.content,b-1,c)))}function nt(a,b,c){return 0==b?a.append(c):a.replaceChild(a.childCount-1,a.lastChild.copy(nt(a.lastChild.content,b-1,c)))}function nu(a,b){for(let c=0;c<b;c++)a=a.firstChild.content;return a}function nv(a,b,c,d,e){let f=a.node(b),g=e?a.indexAfter(b):a.index(b);if(g==f.childCount&&!c.compatibleContent(f.type))return null;let h=d.fillBefore(f.content,!0,g);return h&&!function(a,b,c){for(let d=c;d<b.childCount;d++)if(!a.allowsMarks(b.child(d).marks))return!0;return!1}(c,f.content,g)?h:null}function nw(a,b){let c=[],d=Math.min(a.depth,b.depth);for(let e=d;e>=0;e--){let d=a.start(e);if(d<a.pos-(a.depth-e)||b.end(e)>b.pos+(b.depth-e)||a.node(e).type.spec.isolating||b.node(e).type.spec.isolating)break;(d==b.start(e)||e==a.depth&&e==b.depth&&a.parent.inlineContent&&b.parent.inlineContent&&e&&b.start(e-1)==d-1)&&c.push(e)}return c}class nx extends m4{constructor(a,b,c){super(),this.pos=a,this.attr=b,this.value=c}apply(a){let b=a.nodeAt(this.pos);if(!b)return m5.fail("No node at attribute step's position");let c=Object.create(null);for(let a in b.attrs)c[a]=b.attrs[a];c[this.attr]=this.value;let d=b.type.create(c,null,b.marks);return m5.fromReplace(a,this.pos,this.pos+1,new mk(me.from(d),0,+!b.isLeaf))}getMap(){return m1.empty}invert(a){return new nx(this.pos,this.attr,a.nodeAt(this.pos).attrs[this.attr])}map(a){let b=a.mapResult(this.pos,1);return b.deletedAfter?null:new nx(b.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(a,b){if("number"!=typeof b.pos||"string"!=typeof b.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new nx(b.pos,b.attr,b.value)}}m4.jsonID("attr",nx);class ny extends m4{constructor(a,b){super(),this.attr=a,this.value=b}apply(a){let b=Object.create(null);for(let c in a.attrs)b[c]=a.attrs[c];b[this.attr]=this.value;let c=a.type.create(b,a.content,a.marks);return m5.ok(c)}getMap(){return m1.empty}invert(a){return new ny(this.attr,a.attrs[this.attr])}map(a){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(a,b){if("string"!=typeof b.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new ny(b.attr,b.value)}}m4.jsonID("docAttr",ny);let nz=class extends Error{};(nz=function a(b){let c=Error.call(this,b);return c.__proto__=a.prototype,c}).prototype=Object.create(Error.prototype),nz.prototype.constructor=nz,nz.prototype.name="TransformError";class nA{constructor(a){this.doc=a,this.steps=[],this.docs=[],this.mapping=new m2}get before(){return this.docs.length?this.docs[0]:this.doc}step(a){let b=this.maybeStep(a);if(b.failed)throw new nz(b.failed);return this}maybeStep(a){let b=a.apply(this.doc);return b.failed||this.addStep(a,b.doc),b}get docChanged(){return this.steps.length>0}addStep(a,b){this.docs.push(this.doc),this.steps.push(a),this.mapping.appendMap(a.getMap()),this.doc=b}replace(a,b=a,c=mk.empty){let d=np(this.doc,a,b,c);return d&&this.step(d),this}replaceWith(a,b,c){return this.replace(a,b,new mk(me.from(c),0,0))}delete(a,b){return this.replace(a,b,mk.empty)}insert(a,b){return this.replaceWith(a,a,b)}replaceRange(a,b,c){return!function(a,b,c,d){if(!d.size)return a.deleteRange(b,c);let e=a.doc.resolve(b),f=a.doc.resolve(c);if(nq(e,f,d))return a.step(new nb(b,c,d));let g=nw(e,f);0==g[g.length-1]&&g.pop();let h=-(e.depth+1);g.unshift(h);for(let a=e.depth,b=e.pos-1;a>0;a--,b--){let c=e.node(a).type.spec;if(c.defining||c.definingAsContext||c.isolating)break;g.indexOf(a)>-1?h=a:e.before(a)==b&&g.splice(1,0,-a)}let i=g.indexOf(h),j=[],k=d.openStart;for(let a=d.content,b=0;;b++){let c=a.firstChild;if(j.push(c),b==d.openStart)break;a=c.content}for(let a=k-1;a>=0;a--){var l;let b=j[a],c=(l=b.type).spec.defining||l.spec.definingForContent;if(c&&!b.sameMarkup(e.node(Math.abs(h)-1)))k=a;else if(c||!b.type.isTextblock)break}for(let b=d.openStart;b>=0;b--){let h=(b+k+1)%(d.openStart+1),l=j[h];if(l)for(let b=0;b<g.length;b++){let j=g[(b+i)%g.length],k=!0;j<0&&(k=!1,j=-j);let m=e.node(j-1),n=e.index(j-1);if(m.canReplaceWith(n,n,l.type,l.marks))return a.replace(e.before(j),k?f.after(j):c,new mk(function a(b,c,d,e,f){if(c<d){let f=b.firstChild;b=b.replaceChild(0,f.copy(a(f.content,c+1,d,e,f)))}if(c>e){let a=f.contentMatchAt(0),c=a.fillBefore(b).append(b);b=c.append(a.matchFragment(c).fillBefore(me.empty,!0))}return b}(d.content,0,d.openStart,h),h,d.openEnd))}}let m=a.steps.length;for(let h=g.length-1;h>=0&&(a.replace(b,c,d),!(a.steps.length>m));h--){let a=g[h];a<0||(b=e.before(a),c=f.after(a))}}(this,a,b,c),this}replaceRangeWith(a,b,c){var d=a,e=b;if(!c.isInline&&d==e&&this.doc.resolve(d).parent.content.size){let a=function(a,b,c){let d=a.resolve(b);if(d.parent.canReplaceWith(d.index(),d.index(),c))return b;if(0==d.parentOffset)for(let a=d.depth-1;a>=0;a--){let b=d.index(a);if(d.node(a).canReplaceWith(b,b,c))return d.before(a+1);if(b>0)return null}if(d.parentOffset==d.parent.content.size)for(let a=d.depth-1;a>=0;a--){let b=d.indexAfter(a);if(d.node(a).canReplaceWith(b,b,c))return d.after(a+1);if(b<d.node(a).childCount)break}return null}(this.doc,d,c.type);null!=a&&(d=e=a)}return this.replaceRange(d,e,new mk(me.from(c),0,0)),this}deleteRange(a,b){return!function(a,b,c){let d=a.doc.resolve(b),e=a.doc.resolve(c),f=nw(d,e);for(let b=0;b<f.length;b++){let c=f[b],g=b==f.length-1;if(g&&0==c||d.node(c).type.contentMatch.validEnd)return a.delete(d.start(c),e.end(c));if(c>0&&(g||d.node(c-1).canReplace(d.index(c-1),e.indexAfter(c-1))))return a.delete(d.before(c),e.after(c))}for(let f=1;f<=d.depth&&f<=e.depth;f++)if(b-d.start(f)==d.depth-f&&c>d.end(f)&&e.end(f)-c!=e.depth-f&&d.start(f-1)==e.start(f-1)&&d.node(f-1).canReplace(d.index(f-1),e.index(f-1)))return a.delete(d.before(f),c);a.delete(b,c)}(this,a,b),this}lift(a,b){return!function(a,b,c){let{$from:d,$to:e,depth:f}=b,g=d.before(f+1),h=e.after(f+1),i=g,j=h,k=me.empty,l=0;for(let a=f,b=!1;a>c;a--)b||d.index(a)>0?(b=!0,k=me.from(d.node(a).copy(k)),l++):i--;let m=me.empty,n=0;for(let a=f,b=!1;a>c;a--)b||e.after(a+1)<e.end(a)?(b=!0,m=me.from(e.node(a).copy(m)),n++):j++;a.step(new nc(i,j,g,h,new mk(k.append(m),l,n),k.size-l,!0))}(this,a,b),this}join(a,b=1){return!function(a,b,c){let d=null,{linebreakReplacement:e}=a.doc.type.schema,f=a.doc.resolve(b-c),g=f.node().type;if(e&&g.inlineContent){let a="pre"==g.whitespace,b=!!g.contentMatch.matchType(e);a&&!b?d=!1:!a&&b&&(d=!0)}let h=a.steps.length;if(!1===d){let d=a.doc.resolve(b+c);nj(a,d.node(),d.before(),h)}g.inlineContent&&ne(a,b+c-1,g,f.node().contentMatchAt(f.index()),null==d);let i=a.mapping.slice(h),j=i.map(b-c);if(a.step(new nb(j,i.map(b+c,-1),mk.empty,!0)),!0===d){let b=a.doc.resolve(j);ni(a,b.node(),b.before(),a.steps.length)}}(this,a,b),this}wrap(a,b){return!function(a,b,c){let d=me.empty;for(let a=c.length-1;a>=0;a--){if(d.size){let b=c[a].type.contentMatch.matchFragment(d);if(!b||!b.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}d=me.from(c[a].type.create(c[a].attrs,d))}let e=b.start,f=b.end;a.step(new nc(e,f,e,f,new mk(d,0,0),c.length,!0))}(this,a,b),this}setBlockType(a,b=a,c,d=null){var e=this;if(!c.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let f=e.steps.length;return e.doc.nodesBetween(a,b,(a,b)=>{var g,h,i;let j,k,l="function"==typeof d?d(a):d;if(a.isTextblock&&!a.hasMarkup(c,l)&&(g=e.doc,h=e.mapping.slice(f).map(b),i=c,k=(j=g.resolve(h)).index(),j.parent.canReplaceWith(k,k+1,i))){let d=null;if(c.schema.linebreakReplacement){let a="pre"==c.whitespace,b=!!c.contentMatch.matchType(c.schema.linebreakReplacement);a&&!b?d=!1:!a&&b&&(d=!0)}!1===d&&nj(e,a,b,f),ne(e,e.mapping.slice(f).map(b,1),c,void 0,null===d);let g=e.mapping.slice(f),h=g.map(b,1),i=g.map(b+a.nodeSize,1);return e.step(new nc(h,i,h+1,i-1,new mk(me.from(c.create(l,null,a.marks)),0,0),1,!0)),!0===d&&ni(e,a,b,f),!1}}),this}setNodeMarkup(a,b,c=null,d){return!function(a,b,c,d,e){let f=a.doc.nodeAt(b);if(!f)throw RangeError("No node at given position");c||(c=f.type);let g=c.create(d,null,e||f.marks);if(f.isLeaf)return a.replaceWith(b,b+f.nodeSize,g);if(!c.validContent(f.content))throw RangeError("Invalid content for node type "+c.name);a.step(new nc(b,b+f.nodeSize,b+1,b+f.nodeSize-1,new mk(me.from(g),0,0),1,!0))}(this,a,b,c,d),this}setNodeAttribute(a,b,c){return this.step(new nx(a,b,c)),this}setDocAttribute(a,b){return this.step(new ny(a,b)),this}addNodeMark(a,b){return this.step(new m9(a,b)),this}removeNodeMark(a,b){let c=this.doc.nodeAt(a);if(!c)throw RangeError("No node at position "+a);if(b instanceof mi)b.isInSet(c.marks)&&this.step(new na(a,b));else{let d=c.marks,e,f=[];for(;e=b.isInSet(d);)f.push(new na(a,e)),d=e.removeFromSet(d);for(let a=f.length-1;a>=0;a--)this.step(f[a])}return this}split(a,b=1,c){return!function(a,b,c=1,d){let e=a.doc.resolve(b),f=me.empty,g=me.empty;for(let a=e.depth,b=e.depth-c,h=c-1;a>b;a--,h--){f=me.from(e.node(a).copy(f));let b=d&&d[h];g=me.from(b?b.type.create(b.attrs,g):e.node(a).copy(g))}a.step(new nb(b,b,new mk(f.append(g),c,c),!0))}(this,a,b,c),this}addMark(a,b,c){var d;let e,f,g,h;return d=this,g=[],h=[],d.doc.nodesBetween(a,b,(d,i,j)=>{if(!d.isInline)return;let k=d.marks;if(!c.isInSet(k)&&j.type.allowsMarkType(c.type)){let j=Math.max(i,a),l=Math.min(i+d.nodeSize,b),m=c.addToSet(k);for(let a=0;a<k.length;a++)k[a].isInSet(m)||(e&&e.to==j&&e.mark.eq(k[a])?e.to=l:g.push(e=new m8(j,l,k[a])));f&&f.to==j?f.to=l:h.push(f=new m7(j,l,c))}}),g.forEach(a=>d.step(a)),h.forEach(a=>d.step(a)),this}removeMark(a,b,c){var d;let e,f;return d=this,e=[],f=0,d.doc.nodesBetween(a,b,(d,g)=>{if(!d.isInline)return;f++;let h=null;if(c instanceof mL){let a=d.marks,b;for(;b=c.isInSet(a);)(h||(h=[])).push(b),a=b.removeFromSet(a)}else c?c.isInSet(d.marks)&&(h=[c]):h=d.marks;if(h&&h.length){let c=Math.min(g+d.nodeSize,b);for(let b=0;b<h.length;b++){let d=h[b],i;for(let a=0;a<e.length;a++){let b=e[a];b.step==f-1&&d.eq(e[a].style)&&(i=b)}i?(i.to=c,i.step=f):e.push({style:d,from:Math.max(g,a),to:c,step:f})}}}),e.forEach(a=>d.step(new m8(a.from,a.to,a.style))),this}clearIncompatible(a,b,c){return ne(this,a,b,c),this}}let nB=Object.create(null);class nC{constructor(a,b,c){this.$anchor=a,this.$head=b,this.ranges=c||[new nD(a.min(b),a.max(b))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let a=this.ranges;for(let b=0;b<a.length;b++)if(a[b].$from.pos!=a[b].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(a,b=mk.empty){let c=b.content.lastChild,d=null;for(let a=0;a<b.openEnd;a++)d=c,c=c.lastChild;let e=a.steps.length,f=this.ranges;for(let g=0;g<f.length;g++){let{$from:h,$to:i}=f[g],j=a.mapping.slice(e);a.replaceRange(j.map(h.pos),j.map(i.pos),g?mk.empty:b),0==g&&nN(a,e,(c?c.isInline:d&&d.isTextblock)?-1:1)}}replaceWith(a,b){let c=a.steps.length,d=this.ranges;for(let e=0;e<d.length;e++){let{$from:f,$to:g}=d[e],h=a.mapping.slice(c),i=h.map(f.pos),j=h.map(g.pos);e?a.deleteRange(i,j):(a.replaceRangeWith(i,j,b),nN(a,c,b.isInline?-1:1))}}static findFrom(a,b,c=!1){let d=a.parent.inlineContent?new nG(a):nM(a.node(0),a.parent,a.pos,a.index(),b,c);if(d)return d;for(let d=a.depth-1;d>=0;d--){let e=b<0?nM(a.node(0),a.node(d),a.before(d+1),a.index(d),b,c):nM(a.node(0),a.node(d),a.after(d+1),a.index(d)+1,b,c);if(e)return e}return null}static near(a,b=1){return this.findFrom(a,b)||this.findFrom(a,-b)||new nK(a.node(0))}static atStart(a){return nM(a,a,0,0,1)||new nK(a)}static atEnd(a){return nM(a,a,a.content.size,a.childCount,-1)||new nK(a)}static fromJSON(a,b){if(!b||!b.type)throw RangeError("Invalid input for Selection.fromJSON");let c=nB[b.type];if(!c)throw RangeError(`No selection type ${b.type} defined`);return c.fromJSON(a,b)}static jsonID(a,b){if(a in nB)throw RangeError("Duplicate use of selection JSON ID "+a);return nB[a]=b,b.prototype.jsonID=a,b}getBookmark(){return nG.between(this.$anchor,this.$head).getBookmark()}}nC.prototype.visible=!0;class nD{constructor(a,b){this.$from=a,this.$to=b}}let nE=!1;function nF(a){nE||a.parent.inlineContent||(nE=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+a.parent.type.name+")"))}class nG extends nC{constructor(a,b=a){nF(a),nF(b),super(a,b)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(a,b){let c=a.resolve(b.map(this.head));if(!c.parent.inlineContent)return nC.near(c);let d=a.resolve(b.map(this.anchor));return new nG(d.parent.inlineContent?d:c,c)}replace(a,b=mk.empty){if(super.replace(a,b),b==mk.empty){let b=this.$from.marksAcross(this.$to);b&&a.ensureMarks(b)}}eq(a){return a instanceof nG&&a.anchor==this.anchor&&a.head==this.head}getBookmark(){return new nH(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(a,b){if("number"!=typeof b.anchor||"number"!=typeof b.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new nG(a.resolve(b.anchor),a.resolve(b.head))}static create(a,b,c=b){let d=a.resolve(b);return new this(d,c==b?d:a.resolve(c))}static between(a,b,c){let d=a.pos-b.pos;if((!c||d)&&(c=d>=0?1:-1),!b.parent.inlineContent){let a=nC.findFrom(b,c,!0)||nC.findFrom(b,-c,!0);if(!a)return nC.near(b,c);b=a.$head}return a.parent.inlineContent||(0==d?a=b:(a=(nC.findFrom(a,-c,!0)||nC.findFrom(a,c,!0)).$anchor).pos<b.pos!=d<0&&(a=b)),new nG(a,b)}}nC.jsonID("text",nG);class nH{constructor(a,b){this.anchor=a,this.head=b}map(a){return new nH(a.map(this.anchor),a.map(this.head))}resolve(a){return nG.between(a.resolve(this.anchor),a.resolve(this.head))}}class nI extends nC{constructor(a){let b=a.nodeAfter;super(a,a.node(0).resolve(a.pos+b.nodeSize)),this.node=b}map(a,b){let{deleted:c,pos:d}=b.mapResult(this.anchor),e=a.resolve(d);return c?nC.near(e):new nI(e)}content(){return new mk(me.from(this.node),0,0)}eq(a){return a instanceof nI&&a.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new nJ(this.anchor)}static fromJSON(a,b){if("number"!=typeof b.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new nI(a.resolve(b.anchor))}static create(a,b){return new nI(a.resolve(b))}static isSelectable(a){return!a.isText&&!1!==a.type.spec.selectable}}nI.prototype.visible=!1,nC.jsonID("node",nI);class nJ{constructor(a){this.anchor=a}map(a){let{deleted:b,pos:c}=a.mapResult(this.anchor);return b?new nH(c,c):new nJ(c)}resolve(a){let b=a.resolve(this.anchor),c=b.nodeAfter;return c&&nI.isSelectable(c)?new nI(b):nC.near(b)}}class nK extends nC{constructor(a){super(a.resolve(0),a.resolve(a.content.size))}replace(a,b=mk.empty){if(b==mk.empty){a.delete(0,a.doc.content.size);let b=nC.atStart(a.doc);b.eq(a.selection)||a.setSelection(b)}else super.replace(a,b)}toJSON(){return{type:"all"}}static fromJSON(a){return new nK(a)}map(a){return new nK(a)}eq(a){return a instanceof nK}getBookmark(){return nL}}nC.jsonID("all",nK);let nL={map(){return this},resolve:a=>new nK(a)};function nM(a,b,c,d,e,f=!1){if(b.inlineContent)return nG.create(a,c);for(let g=d-(e>0?0:1);e>0?g<b.childCount:g>=0;g+=e){let d=b.child(g);if(d.isAtom){if(!f&&nI.isSelectable(d))return nI.create(a,c-(e<0?d.nodeSize:0))}else{let b=nM(a,d,c+e,e<0?d.childCount:0,e,f);if(b)return b}c+=d.nodeSize*e}return null}function nN(a,b,c){let d,e=a.steps.length-1;if(e<b)return;let f=a.steps[e];(f instanceof nb||f instanceof nc)&&(a.mapping.maps[e].forEach((a,b,c,e)=>{null==d&&(d=e)}),a.setSelection(nC.near(a.doc.resolve(d),c)))}class nO extends nA{constructor(a){super(a.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=a.selection,this.storedMarks=a.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(a){if(a.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=a,this.curSelectionFor=this.steps.length,this.updated=(1|this.updated)&-3,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(a){return this.storedMarks=a,this.updated|=2,this}ensureMarks(a){return mi.sameSet(this.storedMarks||this.selection.$from.marks(),a)||this.setStoredMarks(a),this}addStoredMark(a){return this.ensureMarks(a.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(a){return this.ensureMarks(a.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(a,b){super.addStep(a,b),this.updated=-3&this.updated,this.storedMarks=null}setTime(a){return this.time=a,this}replaceSelection(a){return this.selection.replace(this,a),this}replaceSelectionWith(a,b=!0){let c=this.selection;return b&&(a=a.mark(this.storedMarks||(c.empty?c.$from.marks():c.$from.marksAcross(c.$to)||mi.none))),c.replaceWith(this,a),this}deleteSelection(){return this.selection.replace(this),this}insertText(a,b,c){let d=this.doc.type.schema;if(null==b)return a?this.replaceSelectionWith(d.text(a),!0):this.deleteSelection();{if(null==c&&(c=b),!a)return this.deleteRange(b,c);let e=this.storedMarks;if(!e){let a=this.doc.resolve(b);e=c==b?a.marks():a.marksAcross(this.doc.resolve(c))}return this.replaceRangeWith(b,c,d.text(a,e)),this.selection.empty||this.selection.to!=b+a.length||this.setSelection(nC.near(this.selection.$to)),this}}setMeta(a,b){return this.meta["string"==typeof a?a:a.key]=b,this}getMeta(a){return this.meta["string"==typeof a?a:a.key]}get isGeneric(){for(let a in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function nP(a,b){return b&&a?a.bind(b):a}class nQ{constructor(a,b,c){this.name=a,this.init=nP(b.init,c),this.apply=nP(b.apply,c)}}let nR=[new nQ("doc",{init:a=>a.doc||a.schema.topNodeType.createAndFill(),apply:a=>a.doc}),new nQ("selection",{init:(a,b)=>a.selection||nC.atStart(b.doc),apply:a=>a.selection}),new nQ("storedMarks",{init:a=>a.storedMarks||null,apply:(a,b,c,d)=>d.selection.$cursor?a.storedMarks:null}),new nQ("scrollToSelection",{init:()=>0,apply:(a,b)=>a.scrolledIntoView?b+1:b})];class nS{constructor(a,b){this.schema=a,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=nR.slice(),b&&b.forEach(a=>{if(this.pluginsByKey[a.key])throw RangeError("Adding different instances of a keyed plugin ("+a.key+")");this.plugins.push(a),this.pluginsByKey[a.key]=a,a.spec.state&&this.fields.push(new nQ(a.key,a.spec.state,a))})}}class nT{constructor(a){this.config=a}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(a){return this.applyTransaction(a).state}filterTransaction(a,b=-1){for(let c=0;c<this.config.plugins.length;c++)if(c!=b){let b=this.config.plugins[c];if(b.spec.filterTransaction&&!b.spec.filterTransaction.call(b,a,this))return!1}return!0}applyTransaction(a){if(!this.filterTransaction(a))return{state:this,transactions:[]};let b=[a],c=this.applyInner(a),d=null;for(;;){let e=!1;for(let f=0;f<this.config.plugins.length;f++){let g=this.config.plugins[f];if(g.spec.appendTransaction){let h=d?d[f].n:0,i=d?d[f].state:this,j=h<b.length&&g.spec.appendTransaction.call(g,h?b.slice(h):b,i,c);if(j&&c.filterTransaction(j,f)){if(j.setMeta("appendedTransaction",a),!d){d=[];for(let a=0;a<this.config.plugins.length;a++)d.push(a<f?{state:c,n:b.length}:{state:this,n:0})}b.push(j),c=c.applyInner(j),e=!0}d&&(d[f]={state:c,n:b.length})}}if(!e)return{state:c,transactions:b}}}applyInner(a){if(!a.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let b=new nT(this.config),c=this.config.fields;for(let d=0;d<c.length;d++){let e=c[d];b[e.name]=e.apply(a,this[e.name],this,b)}return b}get tr(){return new nO(this)}static create(a){let b=new nS(a.doc?a.doc.type.schema:a.schema,a.plugins),c=new nT(b);for(let d=0;d<b.fields.length;d++)c[b.fields[d].name]=b.fields[d].init(a,c);return c}reconfigure(a){let b=new nS(this.schema,a.plugins),c=b.fields,d=new nT(b);for(let b=0;b<c.length;b++){let e=c[b].name;d[e]=this.hasOwnProperty(e)?this[e]:c[b].init(a,d)}return d}toJSON(a){let b={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(b.storedMarks=this.storedMarks.map(a=>a.toJSON())),a&&"object"==typeof a)for(let c in a){if("doc"==c||"selection"==c)throw RangeError("The JSON fields `doc` and `selection` are reserved");let d=a[c],e=d.spec.state;e&&e.toJSON&&(b[c]=e.toJSON.call(d,this[d.key]))}return b}static fromJSON(a,b,c){if(!b)throw RangeError("Invalid input for EditorState.fromJSON");if(!a.schema)throw RangeError("Required config field 'schema' missing");let d=new nS(a.schema,a.plugins),e=new nT(d);return d.fields.forEach(d=>{if("doc"==d.name)e.doc=mx.fromJSON(a.schema,b.doc);else if("selection"==d.name)e.selection=nC.fromJSON(e.doc,b.selection);else if("storedMarks"==d.name)b.storedMarks&&(e.storedMarks=b.storedMarks.map(a.schema.markFromJSON));else{if(c)for(let f in c){let g=c[f],h=g.spec.state;if(g.key==d.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(b,f)){e[d.name]=h.fromJSON.call(g,a,b[f],e);return}}e[d.name]=d.init(a,e)}}),e}}class nU{constructor(a){this.spec=a,this.props={},a.props&&function a(b,c,d){for(let e in b){let f=b[e];f instanceof Function?f=f.bind(c):"handleDOMEvents"==e&&(f=a(f,c,{})),d[e]=f}return d}(a.props,this,this.props),this.key=a.key?a.key.key:nW("plugin")}getState(a){return a[this.key]}}let nV=Object.create(null);function nW(a){return a in nV?a+"$"+ ++nV[a]:(nV[a]=0,a+"$")}class nX{constructor(a="key"){this.key=nW(a)}get(a){return a.config.pluginsByKey[this.key]}getState(a){return a[this.key]}}let nY=(a,b)=>!a.selection.empty&&(b&&b(a.tr.deleteSelection().scrollIntoView()),!0);function nZ(a,b){let{$cursor:c}=a.selection;return c&&(b?b.endOfTextblock("backward",a):!(c.parentOffset>0))?c:null}let n$=(a,b,c)=>{let d=nZ(a,c);if(!d)return!1;let e=n2(d);if(!e){let c=d.blockRange(),e=c&&nf(c);return null!=e&&(b&&b(a.tr.lift(c,e).scrollIntoView()),!0)}let f=e.nodeBefore;if(oc(a,e,b,-1))return!0;if(0==d.parent.content.size&&(n0(f,"end")||nI.isSelectable(f)))for(let c=d.depth;;c--){let g=np(a.doc,d.before(c),d.after(c),mk.empty);if(g&&g.slice.size<g.to-g.from){if(b){let c=a.tr.step(g);c.setSelection(n0(f,"end")?nC.findFrom(c.doc.resolve(c.mapping.map(e.pos,-1)),-1):nI.create(c.doc,e.pos-f.nodeSize)),b(c.scrollIntoView())}return!0}if(1==c||d.node(c-1).childCount>1)break}return!!f.isAtom&&e.depth==d.depth-1&&(b&&b(a.tr.delete(e.pos-f.nodeSize,e.pos).scrollIntoView()),!0)};function n_(a,b,c){let d=b.nodeBefore,e=b.pos-1;for(;!d.isTextblock;e--){if(d.type.spec.isolating)return!1;let a=d.lastChild;if(!a)return!1;d=a}let f=b.nodeAfter,g=b.pos+1;for(;!f.isTextblock;g++){if(f.type.spec.isolating)return!1;let a=f.firstChild;if(!a)return!1;f=a}let h=np(a.doc,e,g,mk.empty);if(!h||h.from!=e||h instanceof nb&&h.slice.size>=g-e)return!1;if(c){let b=a.tr.step(h);b.setSelection(nG.create(b.doc,e)),c(b.scrollIntoView())}return!0}function n0(a,b,c=!1){for(let d=a;d;d="start"==b?d.firstChild:d.lastChild){if(d.isTextblock)return!0;if(c&&1!=d.childCount)break}return!1}let n1=(a,b,c)=>{let{$head:d,empty:e}=a.selection,f=d;if(!e)return!1;if(d.parent.isTextblock){if(c?!c.endOfTextblock("backward",a):d.parentOffset>0)return!1;f=n2(d)}let g=f&&f.nodeBefore;return!!g&&!!nI.isSelectable(g)&&(b&&b(a.tr.setSelection(nI.create(a.doc,f.pos-g.nodeSize)).scrollIntoView()),!0)};function n2(a){if(!a.parent.type.spec.isolating)for(let b=a.depth-1;b>=0;b--){if(a.index(b)>0)return a.doc.resolve(a.before(b+1));if(a.node(b).type.spec.isolating)break}return null}function n3(a,b){let{$cursor:c}=a.selection;return c&&(b?b.endOfTextblock("forward",a):!(c.parentOffset<c.parent.content.size))?c:null}let n4=(a,b,c)=>{let d=n3(a,c);if(!d)return!1;let e=n6(d);if(!e)return!1;let f=e.nodeAfter;if(oc(a,e,b,1))return!0;if(0==d.parent.content.size&&(n0(f,"start")||nI.isSelectable(f))){let c=np(a.doc,d.before(),d.after(),mk.empty);if(c&&c.slice.size<c.to-c.from){if(b){let d=a.tr.step(c);d.setSelection(n0(f,"start")?nC.findFrom(d.doc.resolve(d.mapping.map(e.pos)),1):nI.create(d.doc,d.mapping.map(e.pos))),b(d.scrollIntoView())}return!0}}return!!f.isAtom&&e.depth==d.depth-1&&(b&&b(a.tr.delete(e.pos,e.pos+f.nodeSize).scrollIntoView()),!0)},n5=(a,b,c)=>{let{$head:d,empty:e}=a.selection,f=d;if(!e)return!1;if(d.parent.isTextblock){if(c?!c.endOfTextblock("forward",a):d.parentOffset<d.parent.content.size)return!1;f=n6(d)}let g=f&&f.nodeAfter;return!!g&&!!nI.isSelectable(g)&&(b&&b(a.tr.setSelection(nI.create(a.doc,f.pos)).scrollIntoView()),!0)};function n6(a){if(!a.parent.type.spec.isolating)for(let b=a.depth-1;b>=0;b--){let c=a.node(b);if(a.index(b)+1<c.childCount)return a.doc.resolve(a.after(b+1));if(c.type.spec.isolating)break}return null}let n7=(a,b)=>{let{$head:c,$anchor:d}=a.selection;return!!c.parent.type.spec.code&&!!c.sameParent(d)&&(b&&b(a.tr.insertText("\n").scrollIntoView()),!0)};function n8(a){for(let b=0;b<a.edgeCount;b++){let{type:c}=a.edge(b);if(c.isTextblock&&!c.hasRequiredAttrs())return c}return null}let n9=(a,b)=>{let{$head:c,$anchor:d}=a.selection;if(!c.parent.type.spec.code||!c.sameParent(d))return!1;let e=c.node(-1),f=c.indexAfter(-1),g=n8(e.contentMatchAt(f));if(!g||!e.canReplaceWith(f,f,g))return!1;if(b){let d=c.after(),e=a.tr.replaceWith(d,d,g.createAndFill());e.setSelection(nC.near(e.doc.resolve(d),1)),b(e.scrollIntoView())}return!0},oa=(a,b)=>{let c=a.selection,{$from:d,$to:e}=c;if(c instanceof nK||d.parent.inlineContent||e.parent.inlineContent)return!1;let f=n8(e.parent.contentMatchAt(e.indexAfter()));if(!f||!f.isTextblock)return!1;if(b){let c=(!d.parentOffset&&e.index()<e.parent.childCount?d:e).pos,g=a.tr.insert(c,f.createAndFill());g.setSelection(nG.create(g.doc,c+1)),b(g.scrollIntoView())}return!0},ob=(a,b)=>{let{$cursor:c}=a.selection;if(!c||c.parent.content.size)return!1;if(c.depth>1&&c.after()!=c.end(-1)){let d=c.before();if(nk(a.doc,d))return b&&b(a.tr.split(d).scrollIntoView()),!0}let d=c.blockRange(),e=d&&nf(d);return null!=e&&(b&&b(a.tr.lift(d,e).scrollIntoView()),!0)};function oc(a,b,c,d){let e,f,g,h=b.nodeBefore,i=b.nodeAfter,j,k,l=h.type.spec.isolating||i.type.spec.isolating;if(!l&&(e=b.nodeBefore,f=b.nodeAfter,g=b.index(),e&&f&&e.type.compatibleContent(f.type)&&(!e.content.size&&b.parent.canReplace(g-1,g)?(c&&c(a.tr.delete(b.pos-e.nodeSize,b.pos).scrollIntoView()),!0):!!b.parent.canReplace(g,g+1)&&!!(f.isTextblock||nl(a.doc,b.pos))&&(c&&c(a.tr.join(b.pos).scrollIntoView()),!0))))return!0;let m=!l&&b.parent.canReplace(b.index(),b.index()+1);if(m&&(j=(k=h.contentMatchAt(h.childCount)).findWrapping(i.type))&&k.matchType(j[0]||i.type).validEnd){if(c){let d=b.pos+i.nodeSize,e=me.empty;for(let a=j.length-1;a>=0;a--)e=me.from(j[a].create(null,e));e=me.from(h.copy(e));let f=a.tr.step(new nc(b.pos-1,d,b.pos,d,new mk(e,1,0),j.length,!0)),g=f.doc.resolve(d+2*j.length);g.nodeAfter&&g.nodeAfter.type==h.type&&nl(f.doc,g.pos)&&f.join(g.pos),c(f.scrollIntoView())}return!0}let n=i.type.spec.isolating||d>0&&l?null:nC.findFrom(b,1),o=n&&n.$from.blockRange(n.$to),p=o&&nf(o);if(null!=p&&p>=b.depth)return c&&c(a.tr.lift(o,p).scrollIntoView()),!0;if(m&&n0(i,"start",!0)&&n0(h,"end")){let d=h,e=[];for(;e.push(d),!d.isTextblock;)d=d.lastChild;let f=i,g=1;for(;!f.isTextblock;f=f.firstChild)g++;if(d.canReplace(d.childCount,d.childCount,f.content)){if(c){let d=me.empty;for(let a=e.length-1;a>=0;a--)d=me.from(e[a].copy(d));c(a.tr.step(new nc(b.pos-e.length,b.pos+i.nodeSize,b.pos+g,b.pos+i.nodeSize-g,new mk(d,e.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function od(a){return function(b,c){let d=b.selection,e=a<0?d.$from:d.$to,f=e.depth;for(;e.node(f).isInline;){if(!f)return!1;f--}return!!e.node(f).isTextblock&&(c&&c(b.tr.setSelection(nG.create(b.doc,a<0?e.start(f):e.end(f)))),!0)}}let oe=od(-1),of=od(1);function og(a,b=null){return function(c,d){let e=!1;for(let d=0;d<c.selection.ranges.length&&!e;d++){let{$from:{pos:f},$to:{pos:g}}=c.selection.ranges[d];c.doc.nodesBetween(f,g,(d,f)=>{if(e)return!1;if(!(!d.isTextblock||d.hasMarkup(a,b)))if(d.type==a)e=!0;else{let b=c.doc.resolve(f),d=b.index();e=b.parent.canReplaceWith(d,d+1,a)}})}if(!e)return!1;if(d){let e=c.tr;for(let d=0;d<c.selection.ranges.length;d++){let{$from:{pos:f},$to:{pos:g}}=c.selection.ranges[d];e.setBlockType(f,g,a,b)}d(e.scrollIntoView())}return!0}}function oh(...a){return function(b,c,d){for(let e=0;e<a.length;e++)if(a[e](b,c,d))return!0;return!1}}let oi=oh(nY,n$,n1),oj=oh(nY,n4,n5),ok={Enter:oh(n7,oa,ob,(a,b)=>{let{$from:c,$to:d}=a.selection;if(a.selection instanceof nI&&a.selection.node.isBlock)return!!c.parentOffset&&!!nk(a.doc,c.pos)&&(b&&b(a.tr.split(c.pos).scrollIntoView()),!0);if(!c.depth)return!1;let e=[],f,g,h=!1,i=!1;for(let a=c.depth;;a--){if(c.node(a).isBlock){let b;h=c.end(a)==c.pos+(c.depth-a),i=c.start(a)==c.pos-(c.depth-a),g=n8(c.node(a-1).contentMatchAt(c.indexAfter(a-1)));e.unshift(b||(h&&g?{type:g}:null)),f=a;break}if(1==a)return!1;e.unshift(null)}let j=a.tr;(a.selection instanceof nG||a.selection instanceof nK)&&j.deleteSelection();let k=j.mapping.map(c.pos),l=nk(j.doc,k,e.length,e);if(l||(e[0]=g?{type:g}:null,l=nk(j.doc,k,e.length,e)),!l)return!1;if(j.split(k,e.length,e),!h&&i&&c.node(f).type!=g){let a=j.mapping.map(c.before(f)),b=j.doc.resolve(a);g&&c.node(f-1).canReplaceWith(b.index(),b.index()+1,g)&&j.setNodeMarkup(j.mapping.map(c.before(f)),g)}return b&&b(j.scrollIntoView()),!0}),"Mod-Enter":n9,Backspace:oi,"Mod-Backspace":oi,"Shift-Backspace":oi,Delete:oj,"Mod-Delete":oj,"Mod-a":(a,b)=>(b&&b(a.tr.setSelection(new nK(a.doc))),!0)},ol={"Ctrl-h":ok.Backspace,"Alt-Backspace":ok["Mod-Backspace"],"Ctrl-d":ok.Delete,"Ctrl-Alt-Backspace":ok["Mod-Delete"],"Alt-Delete":ok["Mod-Delete"],"Alt-d":ok["Mod-Delete"],"Ctrl-a":oe,"Ctrl-e":of};for(let a in ok)ol[a]=ok[a];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();let om=function(a){for(var b=0;;b++)if(!(a=a.previousSibling))return b},on=function(a){let b=a.assignedSlot||a.parentNode;return b&&11==b.nodeType?b.host:b},oo=null,op=function(a,b,c){let d=oo||(oo=document.createRange());return d.setEnd(a,null==c?a.nodeValue.length:c),d.setStart(a,b||0),d},oq=function(){oo=null},or=function(a,b,c,d){return c&&(ou(a,b,c,d,-1)||ou(a,b,c,d,1))},ot=/^(img|br|input|textarea|hr)$/i;function ou(a,b,c,d,e){for(var f;;){if(a==c&&b==d)return!0;if(b==(e<0?0:ov(a))){let c=a.parentNode;if(!c||1!=c.nodeType||ow(a)||ot.test(a.nodeName)||"false"==a.contentEditable)return!1;b=om(a)+(e<0?0:1),a=c}else{if(1!=a.nodeType)return!1;let c=a.childNodes[b+(e<0?-1:0)];if(1==c.nodeType&&"false"==c.contentEditable)if(null==(f=c.pmViewDesc)||!f.ignoreForSelection)return!1;else b+=e;else a=c,b=e<0?ov(a):0}}}function ov(a){return 3==a.nodeType?a.nodeValue.length:a.childNodes.length}function ow(a){let b;for(let c=a;c&&!(b=c.pmViewDesc);c=c.parentNode);return b&&b.node&&b.node.isBlock&&(b.dom==a||b.contentDOM==a)}let ox=function(a){return a.focusNode&&or(a.focusNode,a.focusOffset,a.anchorNode,a.anchorOffset)};function oy(a,b){let c=document.createEvent("Event");return c.initEvent("keydown",!0,!0),c.keyCode=a,c.key=c.code=b,c}let oz="undefined"!=typeof navigator?navigator:null,oA="undefined"!=typeof document?document:null,oB=oz&&oz.userAgent||"",oC=/Edge\/(\d+)/.exec(oB),oD=/MSIE \d/.exec(oB),oE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(oB),oF=!!(oD||oE||oC),oG=oD?document.documentMode:oE?+oE[1]:oC?+oC[1]:0,oH=!oF&&/gecko\/(\d+)/i.test(oB);oH&&(/Firefox\/(\d+)/.exec(oB)||[0,0])[1];let oI=!oF&&/Chrome\/(\d+)/.exec(oB),oJ=!!oI,oK=oI?+oI[1]:0,oL=!oF&&!!oz&&/Apple Computer/.test(oz.vendor),oM=oL&&(/Mobile\/\w+/.test(oB)||!!oz&&oz.maxTouchPoints>2),oN=oM||!!oz&&/Mac/.test(oz.platform),oO=!!oz&&/Win/.test(oz.platform),oP=/Android \d/.test(oB),oQ=!!oA&&"webkitFontSmoothing"in oA.documentElement.style,oR=oQ?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function oS(a,b){return"number"==typeof a?a:a[b]}function oT(a,b,c){let d=a.someProp("scrollThreshold")||0,e=a.someProp("scrollMargin")||5,f=a.dom.ownerDocument;for(let g=c||a.dom;g;){if(1!=g.nodeType){g=on(g);continue}let a=g,c=a==f.body,h=c?function(a){let b=a.defaultView&&a.defaultView.visualViewport;return b?{left:0,right:b.width,top:0,bottom:b.height}:{left:0,right:a.documentElement.clientWidth,top:0,bottom:a.documentElement.clientHeight}}(f):function(a){let b=a.getBoundingClientRect(),c=b.width/a.offsetWidth||1,d=b.height/a.offsetHeight||1;return{left:b.left,right:b.left+a.clientWidth*c,top:b.top,bottom:b.top+a.clientHeight*d}}(a),i=0,j=0;if(b.top<h.top+oS(d,"top")?j=-(h.top-b.top+oS(e,"top")):b.bottom>h.bottom-oS(d,"bottom")&&(j=b.bottom-b.top>h.bottom-h.top?b.top+oS(e,"top")-h.top:b.bottom-h.bottom+oS(e,"bottom")),b.left<h.left+oS(d,"left")?i=-(h.left-b.left+oS(e,"left")):b.right>h.right-oS(d,"right")&&(i=b.right-h.right+oS(e,"right")),i||j)if(c)f.defaultView.scrollBy(i,j);else{let c=a.scrollLeft,d=a.scrollTop;j&&(a.scrollTop+=j),i&&(a.scrollLeft+=i);let e=a.scrollLeft-c,f=a.scrollTop-d;b={left:b.left-e,top:b.top-f,right:b.right-e,bottom:b.bottom-f}}let k=c?"fixed":getComputedStyle(g).position;if(/^(fixed|sticky)$/.test(k))break;g="absolute"==k?g.offsetParent:on(g)}}function oU(a){let b=[],c=a.ownerDocument;for(let d=a;d&&(b.push({dom:d,top:d.scrollTop,left:d.scrollLeft}),a!=c);d=on(d));return b}function oV(a,b){for(let c=0;c<a.length;c++){let{dom:d,top:e,left:f}=a[c];d.scrollTop!=e+b&&(d.scrollTop=e+b),d.scrollLeft!=f&&(d.scrollLeft=f)}}let oW=null;function oX(a,b){return a.left>=b.left-1&&a.left<=b.right+1&&a.top>=b.top-1&&a.top<=b.bottom+1}function oY(a){return a.top<a.bottom||a.left<a.right}function oZ(a,b){let c=a.getClientRects();if(c.length){let a=c[b<0?0:c.length-1];if(oY(a))return a}return Array.prototype.find.call(c,oY)||a.getBoundingClientRect()}let o$=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function o_(a,b,c){let{node:d,offset:e,atom:f}=a.docView.domFromPos(b,c<0?-1:1),g=oQ||oH;if(3==d.nodeType)if(g&&(o$.test(d.nodeValue)||(c<0?!e:e==d.nodeValue.length))){let a=oZ(op(d,e,e),c);if(oH&&e&&/\s/.test(d.nodeValue[e-1])&&e<d.nodeValue.length){let b=oZ(op(d,e-1,e-1),-1);if(b.top==a.top){let c=oZ(op(d,e,e+1),-1);if(c.top!=a.top)return o0(c,c.left<b.left)}}return a}else{let a=e,b=e,f=c<0?1:-1;return c<0&&!e?(b++,f=-1):c>=0&&e==d.nodeValue.length?(a--,f=1):c<0?a--:b++,o0(oZ(op(d,a,b),f),f<0)}if(!a.state.doc.resolve(b-(f||0)).parent.inlineContent){if(null==f&&e&&(c<0||e==ov(d))){let a=d.childNodes[e-1];if(1==a.nodeType)return o1(a.getBoundingClientRect(),!1)}if(null==f&&e<ov(d)){let a=d.childNodes[e];if(1==a.nodeType)return o1(a.getBoundingClientRect(),!0)}return o1(d.getBoundingClientRect(),c>=0)}if(null==f&&e&&(c<0||e==ov(d))){let a=d.childNodes[e-1],b=3==a.nodeType?op(a,ov(a)-!g):1!=a.nodeType||"BR"==a.nodeName&&a.nextSibling?null:a;if(b)return o0(oZ(b,1),!1)}if(null==f&&e<ov(d)){let a=d.childNodes[e];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let b=a?3==a.nodeType?op(a,0,+!g):1==a.nodeType?a:null:null;if(b)return o0(oZ(b,-1),!0)}return o0(oZ(3==d.nodeType?op(d):d,-c),c>=0)}function o0(a,b){if(0==a.width)return a;let c=b?a.left:a.right;return{top:a.top,bottom:a.bottom,left:c,right:c}}function o1(a,b){if(0==a.height)return a;let c=b?a.top:a.bottom;return{top:c,bottom:c,left:a.left,right:a.right}}function o2(a,b,c){let d=a.state,e=a.root.activeElement;d!=b&&a.updateState(b),e!=a.dom&&a.focus();try{return c()}finally{d!=b&&a.updateState(d),e!=a.dom&&e&&e.focus()}}let o3=/[\u0590-\u08ac]/,o4=null,o5=null,o6=!1;class o7{constructor(a,b,c,d){this.parent=a,this.children=b,this.dom=c,this.contentDOM=d,this.dirty=0,c.pmViewDesc=this}matchesWidget(a){return!1}matchesMark(a){return!1}matchesNode(a,b,c){return!1}matchesHack(a){return!1}parseRule(){return null}stopEvent(a){return!1}get size(){let a=0;for(let b=0;b<this.children.length;b++)a+=this.children[b].size;return a}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let a=0;a<this.children.length;a++)this.children[a].destroy()}posBeforeChild(a){for(let b=0,c=this.posAtStart;;b++){let d=this.children[b];if(d==a)return c;c+=d.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(a,b,c){let d;if(this.contentDOM&&this.contentDOM.contains(1==a.nodeType?a:a.parentNode))if(c<0){let c,d;if(a==this.contentDOM)c=a.childNodes[b-1];else{for(;a.parentNode!=this.contentDOM;)a=a.parentNode;c=a.previousSibling}for(;c&&!((d=c.pmViewDesc)&&d.parent==this);)c=c.previousSibling;return c?this.posBeforeChild(d)+d.size:this.posAtStart}else{let c,d;if(a==this.contentDOM)c=a.childNodes[b];else{for(;a.parentNode!=this.contentDOM;)a=a.parentNode;c=a.nextSibling}for(;c&&!((d=c.pmViewDesc)&&d.parent==this);)c=c.nextSibling;return c?this.posBeforeChild(d):this.posAtEnd}if(a==this.dom&&this.contentDOM)d=b>om(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))d=2&a.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==b)for(let b=a;;b=b.parentNode){if(b==this.dom){d=!1;break}if(b.previousSibling)break}if(null==d&&b==a.childNodes.length)for(let b=a;;b=b.parentNode){if(b==this.dom){d=!0;break}if(b.nextSibling)break}}return(null==d?c>0:d)?this.posAtEnd:this.posAtStart}nearestDesc(a,b=!1){for(let c=!0,d=a;d;d=d.parentNode){let e=this.getDesc(d),f;if(e&&(!b||e.node))if(!c||!(f=e.nodeDOM)||(1==f.nodeType?f.contains(1==a.nodeType?a:a.parentNode):f==a))return e;else c=!1}}getDesc(a){let b=a.pmViewDesc;for(let a=b;a;a=a.parent)if(a==this)return b}posFromDOM(a,b,c){for(let d=a;d;d=d.parentNode){let e=this.getDesc(d);if(e)return e.localPosFromDOM(a,b,c)}return -1}descAt(a){for(let b=0,c=0;b<this.children.length;b++){let d=this.children[b],e=c+d.size;if(c==a&&e!=c){for(;!d.border&&d.children.length;)for(let a=0;a<d.children.length;a++){let b=d.children[a];if(b.size){d=b;break}}return d}if(a<e)return d.descAt(a-c-d.border);c=e}}domFromPos(a,b){if(!this.contentDOM)return{node:this.dom,offset:0,atom:a+1};let c=0,d=0;for(let b=0;c<this.children.length;c++){let e=this.children[c],f=b+e.size;if(f>a||e instanceof pe){d=a-b;break}b=f}if(d)return this.children[c].domFromPos(d-this.children[c].border,b);for(let a;c&&!(a=this.children[c-1]).size&&a instanceof o8&&a.side>=0;c--);if(b<=0){let a,d=!0;for(;(a=c?this.children[c-1]:null)&&a.dom.parentNode!=this.contentDOM;c--,d=!1);return a&&b&&d&&!a.border&&!a.domAtom?a.domFromPos(a.size,b):{node:this.contentDOM,offset:a?om(a.dom)+1:0}}{let a,d=!0;for(;(a=c<this.children.length?this.children[c]:null)&&a.dom.parentNode!=this.contentDOM;c++,d=!1);return a&&d&&!a.border&&!a.domAtom?a.domFromPos(0,b):{node:this.contentDOM,offset:a?om(a.dom):this.contentDOM.childNodes.length}}}parseRange(a,b,c=0){if(0==this.children.length)return{node:this.contentDOM,from:a,to:b,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let d=-1,e=-1;for(let f=c,g=0;;g++){let c=this.children[g],h=f+c.size;if(-1==d&&a<=h){let e=f+c.border;if(a>=e&&b<=h-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(a,b,e);a=f;for(let b=g;b>0;b--){let c=this.children[b-1];if(c.size&&c.dom.parentNode==this.contentDOM&&!c.emptyChildAt(1)){d=om(c.dom)+1;break}a-=c.size}-1==d&&(d=0)}if(d>-1&&(h>b||g==this.children.length-1)){b=h;for(let a=g+1;a<this.children.length;a++){let c=this.children[a];if(c.size&&c.dom.parentNode==this.contentDOM&&!c.emptyChildAt(-1)){e=om(c.dom);break}b+=c.size}-1==e&&(e=this.contentDOM.childNodes.length);break}f=h}return{node:this.contentDOM,from:a,to:b,fromOffset:d,toOffset:e}}emptyChildAt(a){if(this.border||!this.contentDOM||!this.children.length)return!1;let b=this.children[a<0?0:this.children.length-1];return 0==b.size||b.emptyChildAt(a)}domAfterPos(a){let{node:b,offset:c}=this.domFromPos(a,0);if(1!=b.nodeType||c==b.childNodes.length)throw RangeError("No node after pos "+a);return b.childNodes[c]}setSelection(a,b,c,d=!1){let e=Math.min(a,b),f=Math.max(a,b);for(let g=0,h=0;g<this.children.length;g++){let i=this.children[g],j=h+i.size;if(e>h&&f<j)return i.setSelection(a-h-i.border,b-h-i.border,c,d);h=j}let g=this.domFromPos(a,a?-1:1),h=b==a?g:this.domFromPos(b,b?-1:1),i=c.root.getSelection(),j=c.domSelectionRange(),k=!1;if((oH||oL)&&a==b){let{node:a,offset:b}=g;if(3==a.nodeType){if((k=!!(b&&"\n"==a.nodeValue[b-1]))&&b==a.nodeValue.length)for(let b=a,c;b;b=b.parentNode){if(c=b.nextSibling){"BR"==c.nodeName&&(g=h={node:c.parentNode,offset:om(c)+1});break}let a=b.pmViewDesc;if(a&&a.node&&a.node.isBlock)break}}else{let c=a.childNodes[b-1];k=c&&("BR"==c.nodeName||"false"==c.contentEditable)}}if(oH&&j.focusNode&&j.focusNode!=h.node&&1==j.focusNode.nodeType){let a=j.focusNode.childNodes[j.focusOffset];a&&"false"==a.contentEditable&&(d=!0)}if(!(d||k&&oL)&&or(g.node,g.offset,j.anchorNode,j.anchorOffset)&&or(h.node,h.offset,j.focusNode,j.focusOffset))return;let l=!1;if((i.extend||a==b)&&!(k&&oH)){i.collapse(g.node,g.offset);try{a!=b&&i.extend(h.node,h.offset),l=!0}catch(a){}}if(!l){if(a>b){let a=g;g=h,h=a}let c=document.createRange();c.setEnd(h.node,h.offset),c.setStart(g.node,g.offset),i.removeAllRanges(),i.addRange(c)}}ignoreMutation(a){return!this.contentDOM&&"selection"!=a.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(a,b){for(let c=0,d=0;d<this.children.length;d++){let e=this.children[d],f=c+e.size;if(c==f?a<=f&&b>=c:a<f&&b>c){let d=c+e.border,g=f-e.border;if(a>=d&&b<=g){this.dirty=a==c||b==f?2:1,a==d&&b==g&&(e.contentLost||e.dom.parentNode!=this.contentDOM)?e.dirty=3:e.markDirty(a-d,b-d);return}e.dirty=e.dom!=e.contentDOM||e.dom.parentNode!=this.contentDOM||e.children.length?3:2}c=f}this.dirty=2}markParentsDirty(){let a=1;for(let b=this.parent;b;b=b.parent,a++){let c=1==a?2:1;b.dirty<c&&(b.dirty=c)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(a){return!1}}class o8 extends o7{constructor(a,b,c,d){let e,f=b.type.toDOM;if("function"==typeof f&&(f=f(c,()=>e?e.parent?e.parent.posBeforeChild(e):void 0:d)),!b.type.spec.raw){if(1!=f.nodeType){let a=document.createElement("span");a.appendChild(f),f=a}f.contentEditable="false",f.classList.add("ProseMirror-widget")}super(a,[],f,null),this.widget=b,this.widget=b,e=this}matchesWidget(a){return 0==this.dirty&&a.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(a){let b=this.widget.spec.stopEvent;return!!b&&b(a)}ignoreMutation(a){return"selection"!=a.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class o9 extends o7{constructor(a,b,c,d){super(a,[],b,null),this.textDOM=c,this.text=d}get size(){return this.text.length}localPosFromDOM(a,b){return a!=this.textDOM?this.posAtStart+(b?this.size:0):this.posAtStart+b}domFromPos(a){return{node:this.textDOM,offset:a}}ignoreMutation(a){return"characterData"===a.type&&a.target.nodeValue==a.oldValue}}class pa extends o7{constructor(a,b,c,d,e){super(a,[],c,d),this.mark=b,this.spec=e}static create(a,b,c,d){let e=d.nodeViews[b.type.name],f=e&&e(b,d,c);return f&&f.dom||(f=mX.renderSpec(document,b.type.spec.toDOM(b,c),null,b.attrs)),new pa(a,b,f.dom,f.contentDOM||f.dom,f)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(a){return 3!=this.dirty&&this.mark.eq(a)}markDirty(a,b){if(super.markDirty(a,b),0!=this.dirty){let a=this.parent;for(;!a.node;)a=a.parent;a.dirty<this.dirty&&(a.dirty=this.dirty),this.dirty=0}}slice(a,b,c){let d=pa.create(this.parent,this.mark,!0,c),e=this.children,f=this.size;b<f&&(e=pp(e,b,f,c)),a>0&&(e=pp(e,0,a,c));for(let a=0;a<e.length;a++)e[a].parent=d;return d.children=e,d}ignoreMutation(a){return this.spec.ignoreMutation?this.spec.ignoreMutation(a):super.ignoreMutation(a)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class pb extends o7{constructor(a,b,c,d,e,f,g,h,i){super(a,[],e,f),this.node=b,this.outerDeco=c,this.innerDeco=d,this.nodeDOM=g}static create(a,b,c,d,e,f){let g=e.nodeViews[b.type.name],h,i=g&&g(b,e,()=>h?h.parent?h.parent.posBeforeChild(h):void 0:f,c,d),j=i&&i.dom,k=i&&i.contentDOM;if(b.isText)if(j){if(3!=j.nodeType)throw RangeError("Text must be rendered as a DOM text node")}else j=document.createTextNode(b.text);else if(!j){let a=mX.renderSpec(document,b.type.spec.toDOM(b),null,b.attrs);({dom:j,contentDOM:k}=a)}k||b.isText||"BR"==j.nodeName||(j.hasAttribute("contenteditable")||(j.contentEditable="false"),b.type.spec.draggable&&(j.draggable=!0));let l=j;return(j=pk(j,c,b),i)?h=new pf(a,b,c,d,j,k||null,l,i,e,f+1):b.isText?new pd(a,b,c,d,j,l,e):new pb(a,b,c,d,j,k||null,l,e,f+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let a={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(a.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let b=this.children.length-1;b>=0;b--){let c=this.children[b];if(this.dom.contains(c.dom.parentNode)){a.contentElement=c.dom.parentNode;break}}a.contentElement||(a.getContent=()=>me.empty)}else a.contentElement=this.contentDOM;else a.getContent=()=>this.node.content;return a}matchesNode(a,b,c){return 0==this.dirty&&a.eq(this.node)&&pl(b,this.outerDeco)&&c.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return+!this.node.isLeaf}updateChildren(a,b){let c=this.node.inlineContent,d=b,e=a.composing?this.localCompositionInfo(a,b):null,f=e&&e.pos>-1?e:null,g=e&&e.pos<0,h=new pn(this,f&&f.node,a);(function(a,b,c,d){let e=b.locals(a),f=0;if(0==e.length){for(let c=0;c<a.childCount;c++){let g=a.child(c);d(g,e,b.forChild(f,g),c),f+=g.nodeSize}return}let g=0,h=[],i=null;for(let j=0;;){let k,l,m,n;for(;g<e.length&&e[g].to==f;){let a=e[g++];a.widget&&(k?(l||(l=[k])).push(a):k=a)}if(k)if(l){l.sort(po);for(let a=0;a<l.length;a++)c(l[a],j,!!i)}else c(k,j,!!i);if(i)n=-1,m=i,i=null;else if(j<a.childCount)n=j,m=a.child(j++);else break;for(let a=0;a<h.length;a++)h[a].to<=f&&h.splice(a--,1);for(;g<e.length&&e[g].from<=f&&e[g].to>f;)h.push(e[g++]);let o=f+m.nodeSize;if(m.isText){let a=o;g<e.length&&e[g].from<a&&(a=e[g].from);for(let b=0;b<h.length;b++)h[b].to<a&&(a=h[b].to);a<o&&(i=m.cut(a-f),m=m.cut(0,a-f),o=a,n=-1)}else for(;g<e.length&&e[g].to<o;)g++;let p=m.isInline&&!m.isLeaf?h.filter(a=>!a.inline):h.slice();d(m,p,b.forChild(f,m),n),f=o}})(this.node,this.innerDeco,(b,e,f)=>{b.spec.marks?h.syncToMarks(b.spec.marks,c,a):b.type.side>=0&&!f&&h.syncToMarks(e==this.node.childCount?mi.none:this.node.child(e).marks,c,a),h.placeWidget(b,a,d)},(b,f,i,j)=>{let k;h.syncToMarks(b.marks,c,a),h.findNodeMatch(b,f,i,j)||g&&a.state.selection.from>d&&a.state.selection.to<d+b.nodeSize&&(k=h.findIndexWithChild(e.node))>-1&&h.updateNodeAt(b,f,i,k,a)||h.updateNextNode(b,f,i,a,j,d)||h.addNode(b,f,i,a,d),d+=b.nodeSize}),h.syncToMarks([],c,a),this.node.isTextblock&&h.addTextblockHacks(),h.destroyRest(),(h.changed||2==this.dirty)&&(f&&this.protectLocalComposition(a,f),function a(b,c,d){let e=b.firstChild,f=!1;for(let g=0;g<c.length;g++){let h=c[g],i=h.dom;if(i.parentNode==b){for(;i!=e;)e=pm(e),f=!0;e=e.nextSibling}else f=!0,b.insertBefore(i,e);if(h instanceof pa){let c=e?e.previousSibling:b.lastChild;a(h.contentDOM,h.children,d),e=c?c.nextSibling:b.firstChild}}for(;e;)e=pm(e),f=!0;f&&d.trackWrites==b&&(d.trackWrites=null)}(this.contentDOM,this.children,a),oM&&function(a){if("UL"==a.nodeName||"OL"==a.nodeName){let b=a.style.cssText;a.style.cssText=b+"; list-style: square !important",window.getComputedStyle(a).listStyle,a.style.cssText=b}}(this.dom))}localCompositionInfo(a,b){let{from:c,to:d}=a.state.selection;if(!(a.state.selection instanceof nG)||c<b||d>b+this.node.content.size)return null;let e=a.input.compositionNode;if(!e||!this.dom.contains(e.parentNode))return null;if(!this.node.inlineContent)return{node:e,pos:-1,text:""};{let a=e.nodeValue,f=function(a,b,c,d){for(let e=0,f=0;e<a.childCount&&f<=d;){let g=a.child(e++),h=f;if(f+=g.nodeSize,!g.isText)continue;let i=g.text;for(;e<a.childCount;){let b=a.child(e++);if(f+=b.nodeSize,!b.isText)break;i+=b.text}if(f>=c){if(f>=d&&i.slice(d-b.length-h,d-h)==b)return d-b.length;let a=h<d?i.lastIndexOf(b,d-h-1):-1;if(a>=0&&a+b.length+h>=c)return h+a;if(c==d&&i.length>=d+b.length-h&&i.slice(d-h,d-h+b.length)==b)return d}}return -1}(this.node.content,a,c-b,d-b);return f<0?null:{node:e,pos:f,text:a}}}protectLocalComposition(a,{node:b,pos:c,text:d}){if(this.getDesc(b))return;let e=b;for(;e.parentNode!=this.contentDOM;e=e.parentNode){for(;e.previousSibling;)e.parentNode.removeChild(e.previousSibling);for(;e.nextSibling;)e.parentNode.removeChild(e.nextSibling);e.pmViewDesc&&(e.pmViewDesc=void 0)}let f=new o9(this,e,b,d);a.input.compositionNodes.push(f),this.children=pp(this.children,c,c+d.length,a,f)}update(a,b,c,d){return 3!=this.dirty&&!!a.sameMarkup(this.node)&&(this.updateInner(a,b,c,d),!0)}updateInner(a,b,c,d){this.updateOuterDeco(b),this.node=a,this.innerDeco=c,this.contentDOM&&this.updateChildren(d,this.posAtStart),this.dirty=0}updateOuterDeco(a){if(pl(a,this.outerDeco))return;let b=1!=this.nodeDOM.nodeType,c=this.dom;this.dom=pj(this.dom,this.nodeDOM,pi(this.outerDeco,this.node,b),pi(a,this.node,b)),this.dom!=c&&(c.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=a}selectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function pc(a,b,c,d,e){pk(d,b,a);let f=new pb(void 0,a,b,c,d,d,d,e,0);return f.contentDOM&&f.updateChildren(e,0),f}class pd extends pb{constructor(a,b,c,d,e,f,g){super(a,b,c,d,e,null,f,g,0)}parseRule(){let a=this.nodeDOM.parentNode;for(;a&&a!=this.dom&&!a.pmIsDeco;)a=a.parentNode;return{skip:a||!0}}update(a,b,c,d){return 3!=this.dirty&&(0==this.dirty||!!this.inParent())&&!!a.sameMarkup(this.node)&&(this.updateOuterDeco(b),(0!=this.dirty||a.text!=this.node.text)&&a.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=a.text,d.trackWrites==this.nodeDOM&&(d.trackWrites=null)),this.node=a,this.dirty=0,!0)}inParent(){let a=this.parent.contentDOM;for(let b=this.nodeDOM;b;b=b.parentNode)if(b==a)return!0;return!1}domFromPos(a){return{node:this.nodeDOM,offset:a}}localPosFromDOM(a,b,c){return a==this.nodeDOM?this.posAtStart+Math.min(b,this.node.text.length):super.localPosFromDOM(a,b,c)}ignoreMutation(a){return"characterData"!=a.type&&"selection"!=a.type}slice(a,b,c){let d=this.node.cut(a,b),e=document.createTextNode(d.text);return new pd(this.parent,d,this.outerDeco,this.innerDeco,e,e,c)}markDirty(a,b){super.markDirty(a,b),this.dom!=this.nodeDOM&&(0==a||b==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}isText(a){return this.node.text==a}}class pe extends o7{parseRule(){return{ignore:!0}}matchesHack(a){return 0==this.dirty&&this.dom.nodeName==a}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class pf extends pb{constructor(a,b,c,d,e,f,g,h,i,j){super(a,b,c,d,e,f,g,i,j),this.spec=h}update(a,b,c,d){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==a.type||this.spec.multiType)){let e=this.spec.update(a,b,c);return e&&this.updateInner(a,b,c,d),e}return(!!this.contentDOM||!!a.isLeaf)&&super.update(a,b,c,d)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(a,b,c,d){this.spec.setSelection?this.spec.setSelection(a,b,c.root):super.setSelection(a,b,c,d)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(a){return!!this.spec.stopEvent&&this.spec.stopEvent(a)}ignoreMutation(a){return this.spec.ignoreMutation?this.spec.ignoreMutation(a):super.ignoreMutation(a)}}let pg=function(a){a&&(this.nodeName=a)};pg.prototype=Object.create(null);let ph=[new pg];function pi(a,b,c){if(0==a.length)return ph;let d=c?ph[0]:new pg,e=[d];for(let f=0;f<a.length;f++){let g=a[f].type.attrs;if(g)for(let a in g.nodeName&&e.push(d=new pg(g.nodeName)),g){let f=g[a];null!=f&&(c&&1==e.length&&e.push(d=new pg(b.isInline?"span":"div")),"class"==a?d.class=(d.class?d.class+" ":"")+f:"style"==a?d.style=(d.style?d.style+";":"")+f:"nodeName"!=a&&(d[a]=f))}}return e}function pj(a,b,c,d){if(c==ph&&d==ph)return b;let e=b;for(let b=0;b<d.length;b++){let f=d[b],g=c[b];if(b){let b;g&&g.nodeName==f.nodeName&&e!=a&&(b=e.parentNode)&&b.nodeName.toLowerCase()==f.nodeName||((b=document.createElement(f.nodeName)).pmIsDeco=!0,b.appendChild(e),g=ph[0]),e=b}!function(a,b,c){for(let d in b)"class"==d||"style"==d||"nodeName"==d||d in c||a.removeAttribute(d);for(let d in c)"class"!=d&&"style"!=d&&"nodeName"!=d&&c[d]!=b[d]&&a.setAttribute(d,c[d]);if(b.class!=c.class){let d=b.class?b.class.split(" ").filter(Boolean):[],e=c.class?c.class.split(" ").filter(Boolean):[];for(let b=0;b<d.length;b++)-1==e.indexOf(d[b])&&a.classList.remove(d[b]);for(let b=0;b<e.length;b++)-1==d.indexOf(e[b])&&a.classList.add(e[b]);0==a.classList.length&&a.removeAttribute("class")}if(b.style!=c.style){if(b.style){let c=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,d;for(;d=c.exec(b.style);)a.style.removeProperty(d[1])}c.style&&(a.style.cssText+=c.style)}}(e,g||ph[0],f)}return e}function pk(a,b,c){return pj(a,a,ph,pi(b,c,1!=a.nodeType))}function pl(a,b){if(a.length!=b.length)return!1;for(let c=0;c<a.length;c++)if(!a[c].type.eq(b[c].type))return!1;return!0}function pm(a){let b=a.nextSibling;return a.parentNode.removeChild(a),b}class pn{constructor(a,b,c){this.lock=b,this.view=c,this.index=0,this.stack=[],this.changed=!1,this.top=a,this.preMatch=function(a,b){let c=b,d=c.children.length,e=a.childCount,f=new Map,g=[];c:for(;e>0;){let h;for(;;)if(d){let a=c.children[d-1];if(a instanceof pa)c=a,d=a.children.length;else{h=a,d--;break}}else if(c==b)break c;else d=c.parent.children.indexOf(c),c=c.parent;let i=h.node;if(i){if(i!=a.child(e-1))break;--e,f.set(h,e),g.push(h)}}return{index:e,matched:f,matches:g.reverse()}}(a.node.content,a)}destroyBetween(a,b){if(a!=b){for(let c=a;c<b;c++)this.top.children[c].destroy();this.top.children.splice(a,b-a),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(a,b,c){let d=0,e=this.stack.length>>1,f=Math.min(e,a.length);for(;d<f&&(d==e-1?this.top:this.stack[d+1<<1]).matchesMark(a[d])&&!1!==a[d].type.spec.spanning;)d++;for(;d<e;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),e--;for(;e<a.length;){this.stack.push(this.top,this.index+1);let d=-1;for(let b=this.index;b<Math.min(this.index+3,this.top.children.length);b++){let c=this.top.children[b];if(c.matchesMark(a[e])&&!this.isLocked(c.dom)){d=b;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let d=pa.create(this.top,a[e],b,c);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,e++}}findNodeMatch(a,b,c,d){let e=-1,f;if(d>=this.preMatch.index&&(f=this.preMatch.matches[d-this.preMatch.index]).parent==this.top&&f.matchesNode(a,b,c))e=this.top.children.indexOf(f,this.index);else for(let d=this.index,f=Math.min(this.top.children.length,d+5);d<f;d++){let f=this.top.children[d];if(f.matchesNode(a,b,c)&&!this.preMatch.matched.has(f)){e=d;break}}return!(e<0)&&(this.destroyBetween(this.index,e),this.index++,!0)}updateNodeAt(a,b,c,d,e){let f=this.top.children[d];return 3==f.dirty&&f.dom==f.contentDOM&&(f.dirty=2),!!f.update(a,b,c,e)&&(this.destroyBetween(this.index,d),this.index++,!0)}findIndexWithChild(a){for(;;){let b=a.parentNode;if(!b)return -1;if(b==this.top.contentDOM){let b=a.pmViewDesc;if(b){for(let a=this.index;a<this.top.children.length;a++)if(this.top.children[a]==b)return a}return -1}a=b}}updateNextNode(a,b,c,d,e,f){for(let g=this.index;g<this.top.children.length;g++){let h=this.top.children[g];if(h instanceof pb){let i=this.preMatch.matched.get(h);if(null!=i&&i!=e)return!1;let j=h.dom,k,l=this.isLocked(j)&&!(a.isText&&h.node&&h.node.isText&&h.nodeDOM.nodeValue==a.text&&3!=h.dirty&&pl(b,h.outerDeco));if(!l&&h.update(a,b,c,d))return this.destroyBetween(this.index,g),h.dom!=j&&(this.changed=!0),this.index++,!0;if(!l&&(k=this.recreateWrapper(h,a,b,c,d,f)))return this.destroyBetween(this.index,g),this.top.children[this.index]=k,k.contentDOM&&(k.dirty=2,k.updateChildren(d,f+1),k.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(a,b,c,d,e,f){if(a.dirty||b.isAtom||!a.children.length||!a.node.content.eq(b.content)||!pl(c,a.outerDeco)||!d.eq(a.innerDeco))return null;let g=pb.create(this.top,b,c,d,e,f);if(g.contentDOM)for(let b of(g.children=a.children,a.children=[],g.children))b.parent=g;return a.destroy(),g}addNode(a,b,c,d,e){let f=pb.create(this.top,a,b,c,d,e);f.contentDOM&&f.updateChildren(d,e+1),this.top.children.splice(this.index++,0,f),this.changed=!0}placeWidget(a,b,c){let d=this.index<this.top.children.length?this.top.children[this.index]:null;if(d&&d.matchesWidget(a)&&(a==d.widget||!d.widget.type.toDOM.parentNode))this.index++;else{let d=new o8(this.top,a,b,c);this.top.children.splice(this.index++,0,d),this.changed=!0}}addTextblockHacks(){let a=this.top.children[this.index-1],b=this.top;for(;a instanceof pa;)a=(b=a).children[b.children.length-1];(!a||!(a instanceof pd)||/\n$/.test(a.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(a.node.text))&&((oL||oJ)&&a&&"false"==a.dom.contentEditable&&this.addHackNode("IMG",b),this.addHackNode("BR",this.top))}addHackNode(a,b){if(b==this.top&&this.index<b.children.length&&b.children[this.index].matchesHack(a))this.index++;else{let c=document.createElement(a);"IMG"==a&&(c.className="ProseMirror-separator",c.alt=""),"BR"==a&&(c.className="ProseMirror-trailingBreak");let d=new pe(this.top,[],c,null);b!=this.top?b.children.push(d):b.children.splice(this.index++,0,d),this.changed=!0}}isLocked(a){return this.lock&&(a==this.lock||1==a.nodeType&&a.contains(this.lock.parentNode))}}function po(a,b){return a.type.side-b.type.side}function pp(a,b,c,d,e){let f=[];for(let g=0,h=0;g<a.length;g++){let i=a[g],j=h,k=h+=i.size;j>=c||k<=b?f.push(i):(j<b&&f.push(i.slice(0,b-j,d)),e&&(f.push(e),e=void 0),k>c&&f.push(i.slice(c-j,i.size,d)))}return f}function pq(a,b=null){let c=a.domSelectionRange(),d=a.state.doc;if(!c.focusNode)return null;let e=a.docView.nearestDesc(c.focusNode),f=e&&0==e.size,g=a.docView.posFromDOM(c.focusNode,c.focusOffset,1);if(g<0)return null;let h=d.resolve(g),i,j;if(ox(c)){for(i=g;e&&!e.node;)e=e.parent;let a=e.node;if(e&&a.isAtom&&nI.isSelectable(a)&&e.parent&&!(a.isInline&&function(a,b,c){for(let d=0==b,e=b==ov(a);d||e;){if(a==c)return!0;let b=om(a);if(!(a=a.parentNode))return!1;d=d&&0==b,e=e&&b==ov(a)}}(c.focusNode,c.focusOffset,e.dom))){let a=e.posBefore;j=new nI(g==a?h:d.resolve(a))}}else{if(c instanceof a.dom.ownerDocument.defaultView.Selection&&c.rangeCount>1){let b=g,e=g;for(let d=0;d<c.rangeCount;d++){let f=c.getRangeAt(d);b=Math.min(b,a.docView.posFromDOM(f.startContainer,f.startOffset,1)),e=Math.max(e,a.docView.posFromDOM(f.endContainer,f.endOffset,-1))}if(b<0)return null;[i,g]=e==a.state.selection.anchor?[e,b]:[b,e],h=d.resolve(g)}else i=a.docView.posFromDOM(c.anchorNode,c.anchorOffset,1);if(i<0)return null}let k=d.resolve(i);if(!j){let c="pointer"==b||a.state.selection.head<h.pos&&!f?1:-1;j=pz(a,k,h,c)}return j}function pr(a){return a.editable?a.hasFocus():pB(a)&&document.activeElement&&document.activeElement.contains(a.dom)}function ps(a,b=!1){let c=a.state.selection;if(px(a,c),pr(a)){if(!b&&a.input.mouseDown&&a.input.mouseDown.allowDefault&&oJ){let b=a.domSelectionRange(),c=a.domObserver.currentSelection;if(b.anchorNode&&c.anchorNode&&or(b.anchorNode,b.anchorOffset,c.anchorNode,c.anchorOffset)){a.input.mouseDown.delayedSelectionSync=!0,a.domObserver.setCurSelection();return}}if(a.domObserver.disconnectSelection(),a.cursorWrapper)!function(a){let b=a.domSelection();if(!b)return;let c=a.cursorWrapper.dom,d="IMG"==c.nodeName;d?b.collapse(c.parentNode,om(c)+1):b.collapse(c,0),!d&&!a.state.selection.visible&&oF&&oG<=11&&(c.disabled=!0,c.disabled=!1)}(a);else{var d;let e,f,g,h,{anchor:i,head:j}=c,k,l;pt&&!(c instanceof nG)&&(c.$from.parent.inlineContent||(k=pu(a,c.from)),c.empty||c.$from.parent.inlineContent||(l=pu(a,c.to))),a.docView.setSelection(i,j,a,b),pt&&(k&&pw(k),l&&pw(l)),c.visible?a.dom.classList.remove("ProseMirror-hideselection"):(a.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&((e=(d=a).dom.ownerDocument).removeEventListener("selectionchange",d.input.hideSelectionGuard),g=(f=d.domSelectionRange()).anchorNode,h=f.anchorOffset,e.addEventListener("selectionchange",d.input.hideSelectionGuard=()=>{(f.anchorNode!=g||f.anchorOffset!=h)&&(e.removeEventListener("selectionchange",d.input.hideSelectionGuard),setTimeout(()=>{(!pr(d)||d.state.selection.visible)&&d.dom.classList.remove("ProseMirror-hideselection")},20))})))}a.domObserver.setCurSelection(),a.domObserver.connectSelection()}}let pt=oL||oJ&&oK<63;function pu(a,b){let{node:c,offset:d}=a.docView.domFromPos(b,0),e=d<c.childNodes.length?c.childNodes[d]:null,f=d?c.childNodes[d-1]:null;if(oL&&e&&"false"==e.contentEditable)return pv(e);if((!e||"false"==e.contentEditable)&&(!f||"false"==f.contentEditable)){if(e)return pv(e);else if(f)return pv(f)}}function pv(a){return a.contentEditable="true",oL&&a.draggable&&(a.draggable=!1,a.wasDraggable=!0),a}function pw(a){a.contentEditable="false",a.wasDraggable&&(a.draggable=!0,a.wasDraggable=null)}function px(a,b){if(b instanceof nI){let c=a.docView.descAt(b.from);c!=a.lastSelectedViewDesc&&(py(a),c&&c.selectNode(),a.lastSelectedViewDesc=c)}else py(a)}function py(a){a.lastSelectedViewDesc&&(a.lastSelectedViewDesc.parent&&a.lastSelectedViewDesc.deselectNode(),a.lastSelectedViewDesc=void 0)}function pz(a,b,c,d){return a.someProp("createSelectionBetween",d=>d(a,b,c))||nG.between(b,c,d)}function pA(a){return(!a.editable||!!a.hasFocus())&&pB(a)}function pB(a){let b=a.domSelectionRange();if(!b.anchorNode)return!1;try{return a.dom.contains(3==b.anchorNode.nodeType?b.anchorNode.parentNode:b.anchorNode)&&(a.editable||a.dom.contains(3==b.focusNode.nodeType?b.focusNode.parentNode:b.focusNode))}catch(a){return!1}}function pC(a,b){let{$anchor:c,$head:d}=a.selection,e=b>0?c.max(d):c.min(d),f=e.parent.inlineContent?e.depth?a.doc.resolve(b>0?e.after():e.before()):null:e;return f&&nC.findFrom(f,b)}function pD(a,b){return a.dispatch(a.state.tr.setSelection(b).scrollIntoView()),!0}function pE(a,b,c){let d=a.state.selection;if(d instanceof nG){if(c.indexOf("s")>-1){let{$head:c}=d,e=c.textOffset?null:b<0?c.nodeBefore:c.nodeAfter;if(!e||e.isText||!e.isLeaf)return!1;let f=a.state.doc.resolve(c.pos+e.nodeSize*(b<0?-1:1));return pD(a,new nG(d.$anchor,f))}else if(!d.empty)return!1;else if(a.endOfTextblock(b>0?"forward":"backward")){let c=pC(a.state,b);return!!c&&c instanceof nI&&pD(a,c)}else if(!(oN&&c.indexOf("m")>-1)){let c=d.$head,e=c.textOffset?null:b<0?c.nodeBefore:c.nodeAfter,f;if(!e||e.isText)return!1;let g=b<0?c.pos-e.nodeSize:c.pos;return!!(e.isAtom||(f=a.docView.descAt(g))&&!f.contentDOM)&&(nI.isSelectable(e)?pD(a,new nI(b<0?a.state.doc.resolve(c.pos-e.nodeSize):c)):!!oQ&&pD(a,new nG(a.state.doc.resolve(b<0?g:g+e.nodeSize))))}}else{if(d instanceof nI&&d.node.isInline)return pD(a,new nG(b>0?d.$to:d.$from));let c=pC(a.state,b);return!!c&&pD(a,c)}}function pF(a){return 3==a.nodeType?a.nodeValue.length:a.childNodes.length}function pG(a,b){let c=a.pmViewDesc;return c&&0==c.size&&(b<0||a.nextSibling||"BR"!=a.nodeName)}function pH(a,b){return b<0?function(a){let b=a.domSelectionRange(),c=b.focusNode,d=b.focusOffset;if(!c)return;let e,f,g=!1;for(oH&&1==c.nodeType&&d<pF(c)&&pG(c.childNodes[d],-1)&&(g=!0);;)if(d>0)if(1!=c.nodeType)break;else{let a=c.childNodes[d-1];if(pG(a,-1))e=c,f=--d;else if(3==a.nodeType)d=(c=a).nodeValue.length;else break}else if(pI(c))break;else{let b=c.previousSibling;for(;b&&pG(b,-1);)e=c.parentNode,f=om(b),b=b.previousSibling;if(b)d=pF(c=b);else{if((c=c.parentNode)==a.dom)break;d=0}}g?pJ(a,c,d):e&&pJ(a,e,f)}(a):function(a){let b,c,d=a.domSelectionRange(),e=d.focusNode,f=d.focusOffset;if(!e)return;let g=pF(e);for(;;)if(f<g){if(1!=e.nodeType)break;if(pG(e.childNodes[f],1))b=e,c=++f;else break}else if(pI(e))break;else{let d=e.nextSibling;for(;d&&pG(d,1);)b=d.parentNode,c=om(d)+1,d=d.nextSibling;if(d)f=0,g=pF(e=d);else{if((e=e.parentNode)==a.dom)break;f=g=0}}b&&pJ(a,b,c)}(a)}function pI(a){let b=a.pmViewDesc;return b&&b.node&&b.node.isBlock}function pJ(a,b,c){if(3!=b.nodeType){let a,d;(d=function(a,b){for(;a&&b==a.childNodes.length&&!ow(a);)b=om(a)+1,a=a.parentNode;for(;a&&b<a.childNodes.length;){let c=a.childNodes[b];if(3==c.nodeType)return c;if(1==c.nodeType&&"false"==c.contentEditable)break;a=c,b=0}}(b,c))?(b=d,c=0):(a=function(a,b){for(;a&&!b&&!ow(a);)b=om(a),a=a.parentNode;for(;a&&b;){let c=a.childNodes[b-1];if(3==c.nodeType)return c;if(1==c.nodeType&&"false"==c.contentEditable)break;b=(a=c).childNodes.length}}(b,c))&&(b=a,c=a.nodeValue.length)}let d=a.domSelection();if(!d)return;if(ox(d)){let a=document.createRange();a.setEnd(b,c),a.setStart(b,c),d.removeAllRanges(),d.addRange(a)}else d.extend&&d.extend(b,c);a.domObserver.setCurSelection();let{state:e}=a;setTimeout(()=>{a.state==e&&ps(a)},50)}function pK(a,b){let c=a.state.doc.resolve(b);if(!(oJ||oO)&&c.parent.inlineContent){let d=a.coordsAtPos(b);if(b>c.start()){let c=a.coordsAtPos(b-1),e=(c.top+c.bottom)/2;if(e>d.top&&e<d.bottom&&Math.abs(c.left-d.left)>1)return c.left<d.left?"ltr":"rtl"}if(b<c.end()){let c=a.coordsAtPos(b+1),e=(c.top+c.bottom)/2;if(e>d.top&&e<d.bottom&&Math.abs(c.left-d.left)>1)return c.left>d.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(a.dom).direction?"rtl":"ltr"}function pL(a,b,c){let d=a.state.selection;if(d instanceof nG&&!d.empty||c.indexOf("s")>-1||oN&&c.indexOf("m")>-1)return!1;let{$from:e,$to:f}=d;if(!e.parent.inlineContent||a.endOfTextblock(b<0?"up":"down")){let c=pC(a.state,b);if(c&&c instanceof nI)return pD(a,c)}if(!e.parent.inlineContent){let c=b<0?e:f,g=d instanceof nK?nC.near(c,b):nC.findFrom(c,b);return!!g&&pD(a,g)}return!1}function pM(a,b){if(!(a.state.selection instanceof nG))return!0;let{$head:c,$anchor:d,empty:e}=a.state.selection;if(!c.sameParent(d))return!0;if(!e)return!1;if(a.endOfTextblock(b>0?"forward":"backward"))return!0;let f=!c.textOffset&&(b<0?c.nodeBefore:c.nodeAfter);if(f&&!f.isText){let d=a.state.tr;return b<0?d.delete(c.pos-f.nodeSize,c.pos):d.delete(c.pos,c.pos+f.nodeSize),a.dispatch(d),!0}return!1}function pN(a,b,c){a.domObserver.stop(),b.contentEditable=c,a.domObserver.start()}function pO(a,b){a.someProp("transformCopied",c=>{b=c(b,a)});let c=[],{content:d,openStart:e,openEnd:f}=b;for(;e>1&&f>1&&1==d.childCount&&1==d.firstChild.childCount;){e--,f--;let a=d.firstChild;c.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),d=a.content}let g=a.someProp("clipboardSerializer")||mX.fromSchema(a.state.schema),h=pW(),i=h.createElement("div");i.appendChild(g.serializeFragment(d,{document:h}));let j=i.firstChild,k,l=0;for(;j&&1==j.nodeType&&(k=pU[j.nodeName.toLowerCase()]);){for(let a=k.length-1;a>=0;a--){let b=h.createElement(k[a]);for(;i.firstChild;)b.appendChild(i.firstChild);i.appendChild(b),l++}j=i.firstChild}return j&&1==j.nodeType&&j.setAttribute("data-pm-slice",`${e} ${f}${l?` -${l}`:""} ${JSON.stringify(c)}`),{dom:i,text:a.someProp("clipboardTextSerializer",c=>c(b,a))||b.content.textBetween(0,b.content.size,"\n\n"),slice:b}}function pP(a,b,c,d,e){let f,g,h=e.parent.type.spec.code;if(!c&&!b)return null;let i=!!b&&(d||h||!c);if(i){if(a.someProp("transformPastedText",c=>{b=c(b,h||d,a)}),h)return g=new mk(me.from(a.state.schema.text(b.replace(/\r\n?/g,"\n"))),0,0),a.someProp("transformPasted",b=>{g=b(g,a,!0)}),g;let c=a.someProp("clipboardTextParser",c=>c(b,e,d,a));if(c)g=c;else{let c=e.marks(),{schema:d}=a.state,g=mX.fromSchema(d);f=document.createElement("div"),b.split(/(?:\r\n?|\n)+/).forEach(a=>{let b=f.appendChild(document.createElement("p"));a&&b.appendChild(g.serializeNode(d.text(a,c)))})}}else a.someProp("transformPastedHTML",b=>{c=b(c,a)}),f=function(a){var b;let c,d=/^(\s*<meta [^>]*>)*/.exec(a);d&&(a=a.slice(d[0].length));let e=pW().createElement("div"),f=/<([a-z][^>\s]+)/i.exec(a),g;if((g=f&&pU[f[1].toLowerCase()])&&(a=g.map(a=>"<"+a+">").join("")+a+g.map(a=>"</"+a+">").reverse().join("")),e.innerHTML=(b=a,(c=window.trustedTypes)?(pX||(pX=c.defaultPolicy||c.createPolicy("ProseMirrorClipboard",{createHTML:a=>a})),pX.createHTML(b)):b),g)for(let a=0;a<g.length;a++)e=e.querySelector(g[a])||e;return e}(c),oQ&&function(a){let b=a.querySelectorAll(oJ?"span:not([class]):not([style])":"span.Apple-converted-space");for(let c=0;c<b.length;c++){let d=b[c];1==d.childNodes.length&&"Â "==d.textContent&&d.parentNode&&d.parentNode.replaceChild(a.ownerDocument.createTextNode(" "),d)}}(f);let j=f&&f.querySelector("[data-pm-slice]"),k=j&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(j.getAttribute("data-pm-slice")||"");if(k&&k[3])for(let a=+k[3];a>0;a--){let a=f.firstChild;for(;a&&1!=a.nodeType;)a=a.nextSibling;if(!a)break;f=a}if(g||(g=(a.someProp("clipboardParser")||a.someProp("domParser")||mO.fromSchema(a.state.schema)).parseSlice(f,{preserveWhitespace:!!(i||k),context:e,ruleFromNode:a=>"BR"!=a.nodeName||a.nextSibling||!a.parentNode||pQ.test(a.parentNode.nodeName)?null:{ignore:!0}})),k)g=function(a,b){if(!a.size)return a;let c=a.content.firstChild.type.schema,d;try{d=JSON.parse(b)}catch(b){return a}let{content:e,openStart:f,openEnd:g}=a;for(let a=d.length-2;a>=0;a-=2){let b=c.nodes[d[a]];if(!b||b.hasRequiredAttrs())break;e=me.from(b.create(d[a+1],e)),f++,g++}return new mk(e,f,g)}(pT(g,+k[1],+k[2]),k[4]);else if((g=mk.maxOpen(function(a,b){if(a.childCount<2)return a;for(let c=b.depth;c>=0;c--){let d=b.node(c).contentMatchAt(b.index(c)),e,f=[];if(a.forEach(a=>{if(!f)return;let b=d.findWrapping(a.type),c;if(!b)return f=null;if(c=f.length&&e.length&&function a(b,c,d,e,f){if(f<b.length&&f<c.length&&b[f]==c[f]){let g=a(b,c,d,e.lastChild,f+1);if(g)return e.copy(e.content.replaceChild(e.childCount-1,g));if(e.contentMatchAt(e.childCount).matchType(f==b.length-1?d.type:b[f+1]))return e.copy(e.content.append(me.from(pR(d,b,f+1))))}}(b,e,a,f[f.length-1],0))f[f.length-1]=c;else{f.length&&(f[f.length-1]=function a(b,c){if(0==c)return b;let d=b.content.replaceChild(b.childCount-1,a(b.lastChild,c-1)),e=b.contentMatchAt(b.childCount).fillBefore(me.empty,!0);return b.copy(d.append(e))}(f[f.length-1],e.length));let c=pR(a,b);f.push(c),d=d.matchType(c.type),e=b}}),f)return me.from(f)}return a}(g.content,e),!0)).openStart||g.openEnd){let a=0,b=0;for(let b=g.content.firstChild;a<g.openStart&&!b.type.spec.isolating;a++,b=b.firstChild);for(let a=g.content.lastChild;b<g.openEnd&&!a.type.spec.isolating;b++,a=a.lastChild);g=pT(g,a,b)}return a.someProp("transformPasted",b=>{g=b(g,a,i)}),g}let pQ=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function pR(a,b,c=0){for(let d=b.length-1;d>=c;d--)a=b[d].create(null,me.from(a));return a}function pS(a,b,c,d,e,f){let g=b<0?a.firstChild:a.lastChild,h=g.content;return a.childCount>1&&(f=0),e<d-1&&(h=pS(h,b,c,d,e+1,f)),e>=c&&(h=b<0?g.contentMatchAt(0).fillBefore(h,f<=e).append(h):h.append(g.contentMatchAt(g.childCount).fillBefore(me.empty,!0))),a.replaceChild(b<0?0:a.childCount-1,g.copy(h))}function pT(a,b,c){return b<a.openStart&&(a=new mk(pS(a.content,-1,b,a.openStart,0,a.openEnd),b,a.openEnd)),c<a.openEnd&&(a=new mk(pS(a.content,1,c,a.openEnd,0,0),a.openStart,c)),a}let pU={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},pV=null;function pW(){return pV||(pV=document.implementation.createHTMLDocument("title"))}let pX=null,pY={},pZ={},p$={touchstart:!0,touchmove:!0};class p_{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function p0(a,b){a.input.lastSelectionOrigin=b,a.input.lastSelectionTime=Date.now()}function p1(a){a.someProp("handleDOMEvents",b=>{for(let c in b)a.input.eventHandlers[c]||a.dom.addEventListener(c,a.input.eventHandlers[c]=b=>p2(a,b))})}function p2(a,b){return a.someProp("handleDOMEvents",c=>{let d=c[b.type];return!!d&&(d(a,b)||b.defaultPrevented)})}function p3(a){return{left:a.clientX,top:a.clientY}}function p4(a,b,c,d,e){if(-1==d)return!1;let f=a.state.doc.resolve(d);for(let d=f.depth+1;d>0;d--)if(a.someProp(b,b=>d>f.depth?b(a,c,f.nodeAfter,f.before(d),e,!0):b(a,c,f.node(d),f.before(d),e,!1)))return!0;return!1}function p5(a,b,c){if(a.focused||a.focus(),a.state.selection.eq(b))return;let d=a.state.tr.setSelection(b);"pointer"==c&&d.setMeta("pointer",!0),a.dispatch(d)}pZ.keydown=(a,b)=>{if((a.input.shiftKey=16==b.keyCode||b.shiftKey,!p8(a,b))&&(a.input.lastKeyCode=b.keyCode,a.input.lastKeyCodeTime=Date.now(),!oP||!oJ||13!=b.keyCode))if(229!=b.keyCode&&a.domObserver.forceFlush(),!oM||13!=b.keyCode||b.ctrlKey||b.altKey||b.metaKey)a.someProp("handleKeyDown",c=>c(a,b))||function(a,b){let c,d=b.keyCode,e=(c="",b.ctrlKey&&(c+="c"),b.metaKey&&(c+="m"),b.altKey&&(c+="a"),b.shiftKey&&(c+="s"),c);if(8==d||oN&&72==d&&"c"==e)return pM(a,-1)||pH(a,-1);if(46==d&&!b.shiftKey||oN&&68==d&&"c"==e)return pM(a,1)||pH(a,1);if(13==d||27==d)return!0;if(37==d||oN&&66==d&&"c"==e){let b=37==d?"ltr"==pK(a,a.state.selection.from)?-1:1:-1;return pE(a,b,e)||pH(a,b)}if(39==d||oN&&70==d&&"c"==e){let b=39==d?"ltr"==pK(a,a.state.selection.from)?1:-1:1;return pE(a,b,e)||pH(a,b)}else if(38==d||oN&&80==d&&"c"==e)return pL(a,-1,e)||pH(a,-1);else if(40==d||oN&&78==d&&"c"==e)return function(a){if(!oL||a.state.selection.$head.parentOffset>0)return!1;let{focusNode:b,focusOffset:c}=a.domSelectionRange();if(b&&1==b.nodeType&&0==c&&b.firstChild&&"false"==b.firstChild.contentEditable){let c=b.firstChild;pN(a,c,"true"),setTimeout(()=>pN(a,c,"false"),20)}return!1}(a)||pL(a,1,e)||pH(a,1);else if(e==(oN?"m":"c")&&(66==d||73==d||89==d||90==d))return!0;return!1}(a,b)?b.preventDefault():p0(a,"key");else{let b=Date.now();a.input.lastIOSEnter=b,a.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{a.input.lastIOSEnter==b&&(a.someProp("handleKeyDown",b=>b(a,oy(13,"Enter"))),a.input.lastIOSEnter=0)},200)}},pZ.keyup=(a,b)=>{16==b.keyCode&&(a.input.shiftKey=!1)},pZ.keypress=(a,b)=>{if(p8(a,b)||!b.charCode||b.ctrlKey&&!b.altKey||oN&&b.metaKey)return;if(a.someProp("handleKeyPress",c=>c(a,b)))return void b.preventDefault();let c=a.state.selection;if(!(c instanceof nG)||!c.$from.sameParent(c.$to)){let d=String.fromCharCode(b.charCode),e=()=>a.state.tr.insertText(d).scrollIntoView();/[\r\n]/.test(d)||a.someProp("handleTextInput",b=>b(a,c.$from.pos,c.$to.pos,d,e))||a.dispatch(e()),b.preventDefault()}};let p6=oN?"metaKey":"ctrlKey";pY.mousedown=(a,b)=>{var c;let d,e;a.input.shiftKey=b.shiftKey;let f=qc(a),g=Date.now(),h="singleClick";g-a.input.lastClick.time<500&&(d=(c=a.input.lastClick).x-b.clientX)*d+(e=c.y-b.clientY)*e<100&&!b[p6]&&a.input.lastClick.button==b.button&&("singleClick"==a.input.lastClick.type?h="doubleClick":"doubleClick"==a.input.lastClick.type&&(h="tripleClick")),a.input.lastClick={time:g,x:b.clientX,y:b.clientY,type:h,button:b.button};let i=a.posAtCoords(p3(b));i&&("singleClick"==h?(a.input.mouseDown&&a.input.mouseDown.done(),a.input.mouseDown=new p7(a,i,b,!!f)):("doubleClick"==h?function(a,b,c,d){return p4(a,"handleDoubleClickOn",b,c,d)||a.someProp("handleDoubleClick",c=>c(a,b,d))}:function(a,b,c,d){return p4(a,"handleTripleClickOn",b,c,d)||a.someProp("handleTripleClick",c=>c(a,b,d))||function(a,b,c){if(0!=c.button)return!1;let d=a.state.doc;if(-1==b)return!!d.inlineContent&&(p5(a,nG.create(d,0,d.content.size),"pointer"),!0);let e=d.resolve(b);for(let b=e.depth+1;b>0;b--){let c=b>e.depth?e.nodeAfter:e.node(b),f=e.before(b);if(c.inlineContent)p5(a,nG.create(d,f+1,f+1+c.content.size),"pointer");else{if(!nI.isSelectable(c))continue;p5(a,nI.create(d,f),"pointer")}return!0}}(a,c,d)})(a,i.pos,i.inside,b)?b.preventDefault():p0(a,"pointer"))};class p7{constructor(a,b,c,d){let e,f;if(this.view=a,this.pos=b,this.event=c,this.flushed=d,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=a.state.doc,this.selectNode=!!c[p6],this.allowDefault=c.shiftKey,b.inside>-1)e=a.state.doc.nodeAt(b.inside),f=b.inside;else{let c=a.state.doc.resolve(b.pos);e=c.parent,f=c.depth?c.before():0}const g=d?null:c.target,h=g?a.docView.nearestDesc(g,!0):null;this.target=h&&1==h.nodeDOM.nodeType?h.nodeDOM:null;let{selection:i}=a.state;(0==c.button&&e.type.spec.draggable&&!1!==e.type.spec.selectable||i instanceof nI&&i.from<=f&&i.to>f)&&(this.mightDrag={node:e,pos:f,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&oH&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),a.root.addEventListener("mouseup",this.up=this.up.bind(this)),a.root.addEventListener("mousemove",this.move=this.move.bind(this)),p0(a,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ps(this.view)),this.view.input.mouseDown=null}up(a){if(this.done(),!this.view.dom.contains(a.target))return;let b=this.pos;if(this.view.state.doc!=this.startDoc&&(b=this.view.posAtCoords(p3(a))),this.updateAllowDefault(a),this.allowDefault||!b)p0(this.view,"pointer");else{var c,d,e,f;(c=this.view,d=b.pos,e=b.inside,f=this.selectNode,p4(c,"handleClickOn",d,e,a)||c.someProp("handleClick",b=>b(c,d,a))||(f?function(a,b){if(-1==b)return!1;let c=a.state.selection,d,e;c instanceof nI&&(d=c.node);let f=a.state.doc.resolve(b);for(let a=f.depth+1;a>0;a--){let b=a>f.depth?f.nodeAfter:f.node(a);if(nI.isSelectable(b)){e=d&&c.$from.depth>0&&a>=c.$from.depth&&f.before(c.$from.depth+1)==c.$from.pos?f.before(c.$from.depth):f.before(a);break}}return null!=e&&(p5(a,nI.create(a.state.doc,e),"pointer"),!0)}(c,e):function(a,b){if(-1==b)return!1;let c=a.state.doc.resolve(b),d=c.nodeAfter;return!!(d&&d.isAtom&&nI.isSelectable(d))&&(p5(a,new nI(c),"pointer"),!0)}(c,e)))?a.preventDefault():0==a.button&&(this.flushed||oL&&this.mightDrag&&!this.mightDrag.node.isAtom||oJ&&!this.view.state.selection.visible&&2>=Math.min(Math.abs(b.pos-this.view.state.selection.from),Math.abs(b.pos-this.view.state.selection.to)))?(p5(this.view,nC.near(this.view.state.doc.resolve(b.pos)),"pointer"),a.preventDefault()):p0(this.view,"pointer")}}move(a){this.updateAllowDefault(a),p0(this.view,"pointer"),0==a.buttons&&this.done()}updateAllowDefault(a){!this.allowDefault&&(Math.abs(this.event.x-a.clientX)>4||Math.abs(this.event.y-a.clientY)>4)&&(this.allowDefault=!0)}}function p8(a,b){return!!a.composing||!!(oL&&500>Math.abs(b.timeStamp-a.input.compositionEndedAt))&&(a.input.compositionEndedAt=-2e8,!0)}pY.touchstart=a=>{a.input.lastTouch=Date.now(),qc(a),p0(a,"pointer")},pY.touchmove=a=>{a.input.lastTouch=Date.now(),p0(a,"pointer")},pY.contextmenu=a=>qc(a);let p9=oP?5e3:-1;function qa(a,b){clearTimeout(a.input.composingTimeout),b>-1&&(a.input.composingTimeout=setTimeout(()=>qc(a),b))}function qb(a){let b;for(a.composing&&(a.input.composing=!1,a.input.compositionEndedAt=((b=document.createEvent("Event")).initEvent("event",!0,!0),b.timeStamp));a.input.compositionNodes.length>0;)a.input.compositionNodes.pop().markParentsDirty()}function qc(a,b=!1){if(!oP||!(a.domObserver.flushingSoon>=0)){if(a.domObserver.forceFlush(),qb(a),b||a.docView&&a.docView.dirty){let c=pq(a),d=a.state.selection;return c&&!c.eq(d)?a.dispatch(a.state.tr.setSelection(c)):(a.markCursor||b)&&!d.$from.node(d.$from.sharedDepth(d.to)).inlineContent?a.dispatch(a.state.tr.deleteSelection()):a.updateState(a.state),!0}return!1}}pZ.compositionstart=pZ.compositionupdate=a=>{if(!a.composing){a.domObserver.flush();let{state:b}=a,c=b.selection.$to;if(b.selection instanceof nG&&(b.storedMarks||!c.textOffset&&c.parentOffset&&c.nodeBefore.marks.some(a=>!1===a.type.spec.inclusive)))a.markCursor=a.state.storedMarks||c.marks(),qc(a,!0),a.markCursor=null;else if(qc(a,!b.selection.empty),oH&&b.selection.empty&&c.parentOffset&&!c.textOffset&&c.nodeBefore.marks.length){let b=a.domSelectionRange();for(let c=b.focusNode,d=b.focusOffset;c&&1==c.nodeType&&0!=d;){let b=d<0?c.lastChild:c.childNodes[d-1];if(!b)break;if(3==b.nodeType){let c=a.domSelection();c&&c.collapse(b,b.nodeValue.length);break}c=b,d=-1}}a.input.composing=!0}qa(a,p9)},pZ.compositionend=(a,b)=>{a.composing&&(a.input.composing=!1,a.input.compositionEndedAt=b.timeStamp,a.input.compositionPendingChanges=a.domObserver.pendingRecords().length?a.input.compositionID:0,a.input.compositionNode=null,a.input.compositionPendingChanges&&Promise.resolve().then(()=>a.domObserver.flush()),a.input.compositionID++,qa(a,20))};let qd=oF&&oG<15||oM&&oR<604;function qe(a,b,c,d,e){let f=pP(a,b,c,d,a.state.selection.$from);if(a.someProp("handlePaste",b=>b(a,e,f||mk.empty)))return!0;if(!f)return!1;let g=0==f.openStart&&0==f.openEnd&&1==f.content.childCount?f.content.firstChild:null,h=g?a.state.tr.replaceSelectionWith(g,d):a.state.tr.replaceSelection(f);return a.dispatch(h.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function qf(a){let b=a.getData("text/plain")||a.getData("Text");if(b)return b;let c=a.getData("text/uri-list");return c?c.replace(/\r?\n/g," "):""}pY.copy=pZ.cut=(a,b)=>{let c=a.state.selection,d="cut"==b.type;if(c.empty)return;let e=qd?null:b.clipboardData,{dom:f,text:g}=pO(a,c.content());e?(b.preventDefault(),e.clearData(),e.setData("text/html",f.innerHTML),e.setData("text/plain",g)):function(a,b){if(!a.dom.parentNode)return;let c=a.dom.parentNode.appendChild(document.createElement("div"));c.appendChild(b),c.style.cssText="position: fixed; left: -10000px; top: 10px";let d=getSelection(),e=document.createRange();e.selectNodeContents(b),a.dom.blur(),d.removeAllRanges(),d.addRange(e),setTimeout(()=>{c.parentNode&&c.parentNode.removeChild(c),a.focus()},50)}(a,f),d&&a.dispatch(a.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},pZ.paste=(a,b)=>{if(a.composing&&!oP)return;let c=qd?null:b.clipboardData,d=a.input.shiftKey&&45!=a.input.lastKeyCode;c&&qe(a,qf(c),c.getData("text/html"),d,b)?b.preventDefault():function(a,b){if(!a.dom.parentNode)return;let c=a.input.shiftKey||a.state.selection.$from.parent.type.spec.code,d=a.dom.parentNode.appendChild(document.createElement(c?"textarea":"div"));c||(d.contentEditable="true"),d.style.cssText="position: fixed; left: -10000px; top: 10px",d.focus();let e=a.input.shiftKey&&45!=a.input.lastKeyCode;setTimeout(()=>{a.focus(),d.parentNode&&d.parentNode.removeChild(d),c?qe(a,d.value,null,e,b):qe(a,d.textContent,d.innerHTML,e,b)},50)}(a,b)};class qg{constructor(a,b,c){this.slice=a,this.move=b,this.node=c}}let qh=oN?"altKey":"ctrlKey";function qi(a,b){let c=a.someProp("dragCopies",a=>!a(b));return null!=c?c:!b[qh]}for(let a in pY.dragstart=(a,b)=>{let c,d=a.input.mouseDown;if(d&&d.done(),!b.dataTransfer)return;let e=a.state.selection,f=e.empty?null:a.posAtCoords(p3(b));if(f&&f.pos>=e.from&&f.pos<=(e instanceof nI?e.to-1:e.to));else if(d&&d.mightDrag)c=nI.create(a.state.doc,d.mightDrag.pos);else if(b.target&&1==b.target.nodeType){let d=a.docView.nearestDesc(b.target,!0);d&&d.node.type.spec.draggable&&d!=a.docView&&(c=nI.create(a.state.doc,d.posBefore))}let g=(c||a.state.selection).content(),{dom:h,text:i,slice:j}=pO(a,g);b.dataTransfer.files.length&&oJ&&!(oK>120)||b.dataTransfer.clearData(),b.dataTransfer.setData(qd?"Text":"text/html",h.innerHTML),b.dataTransfer.effectAllowed="copyMove",qd||b.dataTransfer.setData("text/plain",i),a.dragging=new qg(j,qi(a,b),c)},pY.dragend=a=>{let b=a.dragging;window.setTimeout(()=>{a.dragging==b&&(a.dragging=null)},50)},pZ.dragover=pZ.dragenter=(a,b)=>b.preventDefault(),pZ.drop=(a,b)=>{let c=a.dragging;if(a.dragging=null,!b.dataTransfer)return;let d=a.posAtCoords(p3(b));if(!d)return;let e=a.state.doc.resolve(d.pos),f=c&&c.slice;f?a.someProp("transformPasted",b=>{f=b(f,a,!1)}):f=pP(a,qf(b.dataTransfer),qd?null:b.dataTransfer.getData("text/html"),!1,e);let g=!!(c&&qi(a,b));if(a.someProp("handleDrop",c=>c(a,b,f||mk.empty,g)))return void b.preventDefault();if(!f)return;b.preventDefault();let h=f?no(a.state.doc,e.pos,f):e.pos;null==h&&(h=e.pos);let i=a.state.tr;if(g){let{node:a}=c;a?a.replace(i):i.deleteSelection()}let j=i.mapping.map(h),k=0==f.openStart&&0==f.openEnd&&1==f.content.childCount,l=i.doc;if(k?i.replaceRangeWith(j,j,f.content.firstChild):i.replaceRange(j,j,f),i.doc.eq(l))return;let m=i.doc.resolve(j);if(k&&nI.isSelectable(f.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(f.content.firstChild))i.setSelection(new nI(m));else{let b=i.mapping.map(h);i.mapping.maps[i.mapping.maps.length-1].forEach((a,c,d,e)=>b=e),i.setSelection(pz(a,m,i.doc.resolve(b)))}a.focus(),a.dispatch(i.setMeta("uiEvent","drop"))},pY.focus=a=>{a.input.lastFocus=Date.now(),a.focused||(a.domObserver.stop(),a.dom.classList.add("ProseMirror-focused"),a.domObserver.start(),a.focused=!0,setTimeout(()=>{a.docView&&a.hasFocus()&&!a.domObserver.currentSelection.eq(a.domSelectionRange())&&ps(a)},20))},pY.blur=(a,b)=>{a.focused&&(a.domObserver.stop(),a.dom.classList.remove("ProseMirror-focused"),a.domObserver.start(),b.relatedTarget&&a.dom.contains(b.relatedTarget)&&a.domObserver.currentSelection.clear(),a.focused=!1)},pY.beforeinput=(a,b)=>{if(oJ&&oP&&"deleteContentBackward"==b.inputType){a.domObserver.flushSoon();let{domChangeCount:b}=a.input;setTimeout(()=>{if(a.input.domChangeCount!=b||(a.dom.blur(),a.focus(),a.someProp("handleKeyDown",b=>b(a,oy(8,"Backspace")))))return;let{$cursor:c}=a.state.selection;c&&c.pos>0&&a.dispatch(a.state.tr.delete(c.pos-1,c.pos).scrollIntoView())},50)}},pZ)pY[a]=pZ[a];function qj(a,b){if(a==b)return!0;for(let c in a)if(a[c]!==b[c])return!1;for(let c in b)if(!(c in a))return!1;return!0}class qk{constructor(a,b){this.toDOM=a,this.spec=b||qp,this.side=this.spec.side||0}map(a,b,c,d){let{pos:e,deleted:f}=a.mapResult(b.from+d,this.side<0?-1:1);return f?null:new qn(e-c,e-c,this)}valid(){return!0}eq(a){return this==a||a instanceof qk&&(this.spec.key&&this.spec.key==a.spec.key||this.toDOM==a.toDOM&&qj(this.spec,a.spec))}destroy(a){this.spec.destroy&&this.spec.destroy(a)}}class ql{constructor(a,b){this.attrs=a,this.spec=b||qp}map(a,b,c,d){let e=a.map(b.from+d,this.spec.inclusiveStart?-1:1)-c,f=a.map(b.to+d,this.spec.inclusiveEnd?1:-1)-c;return e>=f?null:new qn(e,f,this)}valid(a,b){return b.from<b.to}eq(a){return this==a||a instanceof ql&&qj(this.attrs,a.attrs)&&qj(this.spec,a.spec)}static is(a){return a.type instanceof ql}destroy(){}}class qm{constructor(a,b){this.attrs=a,this.spec=b||qp}map(a,b,c,d){let e=a.mapResult(b.from+d,1);if(e.deleted)return null;let f=a.mapResult(b.to+d,-1);return f.deleted||f.pos<=e.pos?null:new qn(e.pos-c,f.pos-c,this)}valid(a,b){let{index:c,offset:d}=a.content.findIndex(b.from),e;return d==b.from&&!(e=a.child(c)).isText&&d+e.nodeSize==b.to}eq(a){return this==a||a instanceof qm&&qj(this.attrs,a.attrs)&&qj(this.spec,a.spec)}destroy(){}}class qn{constructor(a,b,c){this.from=a,this.to=b,this.type=c}copy(a,b){return new qn(a,b,this.type)}eq(a,b=0){return this.type.eq(a.type)&&this.from+b==a.from&&this.to+b==a.to}map(a,b,c){return this.type.map(a,this,b,c)}static widget(a,b,c){return new qn(a,a,new qk(b,c))}static inline(a,b,c,d){return new qn(a,b,new ql(c,d))}static node(a,b,c,d){return new qn(a,b,new qm(c,d))}get spec(){return this.type.spec}get inline(){return this.type instanceof ql}get widget(){return this.type instanceof qk}}let qo=[],qp={};class qq{constructor(a,b){this.local=a.length?a:qo,this.children=b.length?b:qo}static create(a,b){return b.length?qw(b,a,0,qp):qr}find(a,b,c){let d=[];return this.findInner(null==a?0:a,null==b?1e9:b,d,0,c),d}findInner(a,b,c,d,e){for(let f=0;f<this.local.length;f++){let g=this.local[f];g.from<=b&&g.to>=a&&(!e||e(g.spec))&&c.push(g.copy(g.from+d,g.to+d))}for(let f=0;f<this.children.length;f+=3)if(this.children[f]<b&&this.children[f+1]>a){let g=this.children[f]+1;this.children[f+2].findInner(a-g,b-g,c,d+g,e)}}map(a,b,c){return this==qr||0==a.maps.length?this:this.mapInner(a,b,0,0,c||qp)}mapInner(a,b,c,d,e){let f;for(let g=0;g<this.local.length;g++){let h=this.local[g].map(a,c,d);h&&h.type.valid(b,h)?(f||(f=[])).push(h):e.onRemove&&e.onRemove(this.local[g].spec)}return this.children.length?function(a,b,c,d,e,f,g){let h=a.slice();for(let a=0,b=f;a<c.maps.length;a++){let d=0;c.maps[a].forEach((a,c,e,f)=>{let g=f-e-(c-a);for(let e=0;e<h.length;e+=3){let f=h[e+1];if(f<0||a>f+b-d)continue;let i=h[e]+b-d;c>=i?h[e+1]=a<=i?-2:-1:a>=b&&g&&(h[e]+=g,h[e+1]+=g)}d+=g}),b=c.maps[a].map(b,-1)}let i=!1;for(let b=0;b<h.length;b+=3)if(h[b+1]<0){if(-2==h[b+1]){i=!0,h[b+1]=-1;continue}let j=c.map(a[b]+f),k=j-e;if(k<0||k>=d.content.size){i=!0;continue}let l=c.map(a[b+1]+f,-1)-e,{index:m,offset:n}=d.content.findIndex(k),o=d.maybeChild(m);if(o&&n==k&&n+o.nodeSize==l){let d=h[b+2].mapInner(c,o,j+1,a[b]+f+1,g);d!=qr?(h[b]=k,h[b+1]=l,h[b+2]=d):(h[b+1]=-2,i=!0)}else i=!0}if(i){let i=qw(function(a,b,c,d,e,f,g){for(let h=0;h<a.length;h+=3)-1==a[h+1]&&function a(b,f){for(let a=0;a<b.local.length;a++){let h=b.local[a].map(d,e,f);h?c.push(h):g.onRemove&&g.onRemove(b.local[a].spec)}for(let c=0;c<b.children.length;c+=3)a(b.children[c+2],b.children[c]+f+1)}(a[h+2],b[h]+f+1);return c}(h,a,b,c,e,f,g),d,0,g);b=i.local;for(let a=0;a<h.length;a+=3)h[a+1]<0&&(h.splice(a,3),a-=3);for(let a=0,b=0;a<i.children.length;a+=3){let c=i.children[a];for(;b<h.length&&h[b]<c;)b+=3;h.splice(b,0,i.children[a],i.children[a+1],i.children[a+2])}}return new qq(b.sort(qx),h)}(this.children,f||[],a,b,c,d,e):f?new qq(f.sort(qx),qo):qr}add(a,b){return b.length?this==qr?qq.create(a,b):this.addInner(a,b,0):this}addInner(a,b,c){let d,e=0;a.forEach((a,f)=>{let g=f+c,h;if(h=qu(b,a,g)){for(d||(d=this.children.slice());e<d.length&&d[e]<f;)e+=3;d[e]==f?d[e+2]=d[e+2].addInner(a,h,g+1):d.splice(e,0,f,f+a.nodeSize,qw(h,a,g+1,qp)),e+=3}});let f=qt(e?qv(b):b,-c);for(let b=0;b<f.length;b++)f[b].type.valid(a,f[b])||f.splice(b--,1);return new qq(f.length?this.local.concat(f).sort(qx):this.local,d||this.children)}remove(a){return 0==a.length||this==qr?this:this.removeInner(a,0)}removeInner(a,b){let c=this.children,d=this.local;for(let d=0;d<c.length;d+=3){let e,f=c[d]+b,g=c[d+1]+b;for(let b=0,c;b<a.length;b++)(c=a[b])&&c.from>f&&c.to<g&&(a[b]=null,(e||(e=[])).push(c));if(!e)continue;c==this.children&&(c=this.children.slice());let h=c[d+2].removeInner(e,f+1);h!=qr?c[d+2]=h:(c.splice(d,3),d-=3)}if(d.length){for(let c=0,e;c<a.length;c++)if(e=a[c])for(let a=0;a<d.length;a++)d[a].eq(e,b)&&(d==this.local&&(d=this.local.slice()),d.splice(a--,1))}return c==this.children&&d==this.local?this:d.length||c.length?new qq(d,c):qr}forChild(a,b){let c,d;if(this==qr)return this;if(b.isLeaf)return qq.empty;for(let b=0;b<this.children.length;b+=3)if(this.children[b]>=a){this.children[b]==a&&(c=this.children[b+2]);break}let e=a+1,f=e+b.content.size;for(let a=0;a<this.local.length;a++){let b=this.local[a];if(b.from<f&&b.to>e&&b.type instanceof ql){let a=Math.max(e,b.from)-e,c=Math.min(f,b.to)-e;a<c&&(d||(d=[])).push(b.copy(a,c))}}if(d){let a=new qq(d.sort(qx),qo);return c?new qs([a,c]):a}return c||qr}eq(a){if(this==a)return!0;if(!(a instanceof qq)||this.local.length!=a.local.length||this.children.length!=a.children.length)return!1;for(let b=0;b<this.local.length;b++)if(!this.local[b].eq(a.local[b]))return!1;for(let b=0;b<this.children.length;b+=3)if(this.children[b]!=a.children[b]||this.children[b+1]!=a.children[b+1]||!this.children[b+2].eq(a.children[b+2]))return!1;return!0}locals(a){return qy(this.localsInner(a))}localsInner(a){if(this==qr)return qo;if(a.inlineContent||!this.local.some(ql.is))return this.local;let b=[];for(let a=0;a<this.local.length;a++)this.local[a].type instanceof ql||b.push(this.local[a]);return b}forEachSet(a){a(this)}}qq.empty=new qq([],[]),qq.removeOverlap=qy;let qr=qq.empty;class qs{constructor(a){this.members=a}map(a,b){let c=this.members.map(c=>c.map(a,b,qp));return qs.from(c)}forChild(a,b){if(b.isLeaf)return qq.empty;let c=[];for(let d=0;d<this.members.length;d++){let e=this.members[d].forChild(a,b);e!=qr&&(e instanceof qs?c=c.concat(e.members):c.push(e))}return qs.from(c)}eq(a){if(!(a instanceof qs)||a.members.length!=this.members.length)return!1;for(let b=0;b<this.members.length;b++)if(!this.members[b].eq(a.members[b]))return!1;return!0}locals(a){let b,c=!0;for(let d=0;d<this.members.length;d++){let e=this.members[d].localsInner(a);if(e.length)if(b){c&&(b=b.slice(),c=!1);for(let a=0;a<e.length;a++)b.push(e[a])}else b=e}return b?qy(c?b:b.sort(qx)):qo}static from(a){switch(a.length){case 0:return qr;case 1:return a[0];default:return new qs(a.every(a=>a instanceof qq)?a:a.reduce((a,b)=>a.concat(b instanceof qq?b:b.members),[]))}}forEachSet(a){for(let b=0;b<this.members.length;b++)this.members[b].forEachSet(a)}}function qt(a,b){if(!b||!a.length)return a;let c=[];for(let d=0;d<a.length;d++){let e=a[d];c.push(new qn(e.from+b,e.to+b,e.type))}return c}function qu(a,b,c){if(b.isLeaf)return null;let d=c+b.nodeSize,e=null;for(let b=0,f;b<a.length;b++)(f=a[b])&&f.from>c&&f.to<d&&((e||(e=[])).push(f),a[b]=null);return e}function qv(a){let b=[];for(let c=0;c<a.length;c++)null!=a[c]&&b.push(a[c]);return b}function qw(a,b,c,d){let e=[],f=!1;b.forEach((b,g)=>{let h=qu(a,b,g+c);if(h){f=!0;let a=qw(h,b,c+g+1,d);a!=qr&&e.push(g,g+b.nodeSize,a)}});let g=qt(f?qv(a):a,-c).sort(qx);for(let a=0;a<g.length;a++)g[a].type.valid(b,g[a])||(d.onRemove&&d.onRemove(g[a].spec),g.splice(a--,1));return g.length||e.length?new qq(g,e):qr}function qx(a,b){return a.from-b.from||a.to-b.to}function qy(a){let b=a;for(let c=0;c<b.length-1;c++){let d=b[c];if(d.from!=d.to)for(let e=c+1;e<b.length;e++){let f=b[e];if(f.from==d.from){f.to!=d.to&&(b==a&&(b=a.slice()),b[e]=f.copy(f.from,d.to),qz(b,e+1,f.copy(d.to,f.to)));continue}f.from<d.to&&(b==a&&(b=a.slice()),b[c]=d.copy(d.from,f.from),qz(b,e,d.copy(f.from,d.to)));break}}return b}function qz(a,b,c){for(;b<a.length&&qx(c,a[b])>0;)b++;a.splice(b,0,c)}function qA(a){let b=[];return a.someProp("decorations",c=>{let d=c(a.state);d&&d!=qr&&b.push(d)}),a.cursorWrapper&&b.push(qq.create(a.state.doc,[a.cursorWrapper.deco])),qs.from(b)}let qB={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},qC=oF&&oG<=11;class qD{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(a){this.anchorNode=a.anchorNode,this.anchorOffset=a.anchorOffset,this.focusNode=a.focusNode,this.focusOffset=a.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(a){return a.anchorNode==this.anchorNode&&a.anchorOffset==this.anchorOffset&&a.focusNode==this.focusNode&&a.focusOffset==this.focusOffset}}class qE{constructor(a,b){this.view=a,this.handleDOMChange=b,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new qD,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(a=>{for(let b=0;b<a.length;b++)this.queue.push(a[b]);oF&&oG<=11&&a.some(a=>"childList"==a.type&&a.removedNodes.length||"characterData"==a.type&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():this.flush()}),qC&&(this.onCharData=a=>{this.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,qB)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let a=this.observer.takeRecords();if(a.length){for(let b=0;b<a.length;b++)this.queue.push(a[b]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(pA(this.view)){if(this.suppressingSelectionUpdates)return ps(this.view);if(oF&&oG<=11&&!this.view.state.selection.empty){let a=this.view.domSelectionRange();if(a.focusNode&&or(a.focusNode,a.focusOffset,a.anchorNode,a.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(a){if(!a.focusNode)return!0;let b=new Set,c;for(let c=a.focusNode;c;c=on(c))b.add(c);for(let d=a.anchorNode;d;d=on(d))if(b.has(d)){c=d;break}let d=c&&this.view.docView.nearestDesc(c);if(d&&d.ignoreMutation({type:"selection",target:3==c.nodeType?c.parentNode:c}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let a of this.observer.takeRecords())this.queue.push(a);return this.queue}flush(){var a;let{view:b}=this;if(!b.docView||this.flushingSoon>-1)return;let c=this.pendingRecords();c.length&&(this.queue=[]);let d=b.domSelectionRange(),e=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(d)&&pA(b)&&!this.ignoreSelectionChange(d),f=-1,g=-1,h=!1,i=[];if(b.editable)for(let a=0;a<c.length;a++){let b=this.registerMutation(c[a],i);b&&(f=f<0?b.from:Math.min(b.from,f),g=g<0?b.to:Math.max(b.to,g),b.typeOver&&(h=!0))}if(oH&&i.length){let a=i.filter(a=>"BR"==a.nodeName);if(2==a.length){let[b,c]=a;b.parentNode&&b.parentNode.parentNode==c.parentNode?c.remove():b.remove()}else{let{focusNode:c}=this.currentSelection;for(let d of a){let a=d.parentNode;a&&"LI"==a.nodeName&&(!c||function(a,b){for(let c=b.parentNode;c&&c!=a.dom;c=c.parentNode){let b=a.docView.nearestDesc(c,!0);if(b&&b.node.isBlock)return c}return null}(b,c)!=a)&&d.remove()}}}let j=null;f<0&&e&&b.input.lastFocus>Date.now()-200&&Math.max(b.input.lastTouch,b.input.lastClick.time)<Date.now()-300&&ox(d)&&(j=pq(b))&&j.eq(nC.near(b.state.doc.resolve(0),1))?(b.input.lastFocus=0,ps(b),this.currentSelection.set(d),b.scrollToSelection()):(f>-1||e)&&(f>-1&&(b.docView.markDirty(f,g),a=b,!qF.has(a)&&(qF.set(a,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(a.dom).whiteSpace))&&(a.requiresGeckoHackNode=oH,qG||(console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),qG=!0))),this.handleDOMChange(f,g,h,i),b.docView&&b.docView.dirty?b.updateState(b.state):this.currentSelection.eq(d)||ps(b),this.currentSelection.set(d))}registerMutation(a,b){if(b.indexOf(a.target)>-1)return null;let c=this.view.docView.nearestDesc(a.target);if("attributes"==a.type&&(c==this.view.docView||"contenteditable"==a.attributeName||"style"==a.attributeName&&!a.oldValue&&!a.target.getAttribute("style"))||!c||c.ignoreMutation(a))return null;if("childList"==a.type){for(let c=0;c<a.addedNodes.length;c++){let d=a.addedNodes[c];b.push(d),3==d.nodeType&&(this.lastChangedTextNode=d)}if(c.contentDOM&&c.contentDOM!=c.dom&&!c.contentDOM.contains(a.target))return{from:c.posBefore,to:c.posAfter};let d=a.previousSibling,e=a.nextSibling;if(oF&&oG<=11&&a.addedNodes.length)for(let b=0;b<a.addedNodes.length;b++){let{previousSibling:c,nextSibling:f}=a.addedNodes[b];(!c||0>Array.prototype.indexOf.call(a.addedNodes,c))&&(d=c),(!f||0>Array.prototype.indexOf.call(a.addedNodes,f))&&(e=f)}let f=d&&d.parentNode==a.target?om(d)+1:0,g=c.localPosFromDOM(a.target,f,-1),h=e&&e.parentNode==a.target?om(e):a.target.childNodes.length;return{from:g,to:c.localPosFromDOM(a.target,h,1)}}return"attributes"==a.type?{from:c.posAtStart-c.border,to:c.posAtEnd+c.border}:(this.lastChangedTextNode=a.target,{from:c.posAtStart,to:c.posAtEnd,typeOver:a.target.nodeValue==a.oldValue})}}let qF=new WeakMap,qG=!1;function qH(a,b){let c=b.startContainer,d=b.startOffset,e=b.endContainer,f=b.endOffset,g=a.domAtPos(a.state.selection.anchor);return or(g.node,g.offset,e,f)&&([c,d,e,f]=[e,f,c,d]),{anchorNode:c,anchorOffset:d,focusNode:e,focusOffset:f}}function qI(a){let b=a.pmViewDesc;if(b)return b.parseRule();if("BR"==a.nodeName&&a.parentNode){if(oL&&/^(ul|ol)$/i.test(a.parentNode.nodeName)){let a=document.createElement("div");return a.appendChild(document.createElement("li")),{skip:a}}else if(a.parentNode.lastChild==a||oL&&/^(tr|table)$/i.test(a.parentNode.nodeName))return{ignore:!0}}else if("IMG"==a.nodeName&&a.getAttribute("mark-placeholder"))return{ignore:!0};return null}let qJ=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function qK(a,b,c){return Math.max(c.anchor,c.head)>b.content.size?null:pz(a,b.resolve(c.anchor),b.resolve(c.head))}function qL(a,b,c){let d=a.depth,e=b?a.end():a.pos;for(;d>0&&(b||a.indexAfter(d)==a.node(d).childCount);)d--,e++,b=!1;if(c){let b=a.node(d).maybeChild(a.indexAfter(d));for(;b&&!b.isLeaf;)b=b.firstChild,e++}return e}function qM(a){if(2!=a.length)return!1;let b=a.charCodeAt(0),c=a.charCodeAt(1);return b>=56320&&b<=57343&&c>=55296&&c<=56319}class qN{constructor(a,b){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new p_,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=b,this.state=b.state,this.directPlugins=b.plugins||[],this.directPlugins.forEach(qS),this.dispatch=this.dispatch.bind(this),this.dom=a&&a.mount||document.createElement("div"),a&&(a.appendChild?a.appendChild(this.dom):"function"==typeof a?a(this.dom):a.mount&&(this.mounted=!0)),this.editable=qQ(this),qP(this),this.nodeViews=qR(this),this.docView=pc(this.state.doc,qO(this),qA(this),this.dom,this),this.domObserver=new qE(this,(a,b,c,d)=>(function(a,b,c,d,e){let f,g,h,i=a.input.compositionPendingChanges||(a.composing?a.input.compositionID:0);if(a.input.compositionPendingChanges=0,b<0){let b=a.input.lastSelectionTime>Date.now()-50?a.input.lastSelectionOrigin:null,c=pq(a,b);if(c&&!a.state.selection.eq(c)){if(oJ&&oP&&13===a.input.lastKeyCode&&Date.now()-100<a.input.lastKeyCodeTime&&a.someProp("handleKeyDown",b=>b(a,oy(13,"Enter"))))return;let d=a.state.tr.setSelection(c);"pointer"==b?d.setMeta("pointer",!0):"key"==b&&d.scrollIntoView(),i&&d.setMeta("composition",i),a.dispatch(d)}return}let j=a.state.doc.resolve(b),k=j.sharedDepth(c);b=j.before(k+1),c=a.state.doc.resolve(c).after(k+1);let l=a.state.selection,m=function(a,b,c){let d,{node:e,fromOffset:f,toOffset:g,from:h,to:i}=a.docView.parseRange(b,c),j=a.domSelectionRange(),k=j.anchorNode;if(k&&a.dom.contains(1==k.nodeType?k:k.parentNode)&&(d=[{node:k,offset:j.anchorOffset}],ox(j)||d.push({node:j.focusNode,offset:j.focusOffset})),oJ&&8===a.input.lastKeyCode)for(let a=g;a>f;a--){let b=e.childNodes[a-1],c=b.pmViewDesc;if("BR"==b.nodeName&&!c){g=a;break}if(!c||c.size)break}let l=a.state.doc,m=a.someProp("domParser")||mO.fromSchema(a.state.schema),n=l.resolve(h),o=null,p=m.parse(e,{topNode:n.parent,topMatch:n.parent.contentMatchAt(n.index()),topOpen:!0,from:f,to:g,preserveWhitespace:"pre"!=n.parent.type.whitespace||"full",findPositions:d,ruleFromNode:qI,context:n});if(d&&null!=d[0].pos){let a=d[0].pos,b=d[1]&&d[1].pos;null==b&&(b=a),o={anchor:a+h,head:b+h}}return{doc:p,sel:o,from:h,to:i}}(a,b,c),n=a.state.doc,o=n.slice(m.from,m.to);8===a.input.lastKeyCode&&Date.now()-100<a.input.lastKeyCodeTime?(f=a.state.selection.to,g="end"):(f=a.state.selection.from,g="start"),a.input.lastKeyCode=null;let p=function(a,b,c,d,e){let f=a.findDiffStart(b,c);if(null==f)return null;let{a:g,b:h}=a.findDiffEnd(b,c+a.size,c+b.size);if("end"==e){let a=Math.max(0,f-Math.min(g,h));d-=g+a-f}if(g<f&&a.size<b.size){let a=d<=f&&d>=g?f-d:0;(f-=a)&&f<b.size&&qM(b.textBetween(f-1,f+1))&&(f+=a?1:-1),h=f+(h-g),g=f}else if(h<f){let b=d<=f&&d>=h?f-d:0;(f-=b)&&f<a.size&&qM(a.textBetween(f-1,f+1))&&(f+=b?1:-1),g=f+(g-h),h=f}return{start:f,endA:g,endB:h}}(o.content,m.doc.content,m.from,f,g);if(p&&a.input.domChangeCount++,(oM&&a.input.lastIOSEnter>Date.now()-225||oP)&&e.some(a=>1==a.nodeType&&!qJ.test(a.nodeName))&&(!p||p.endA>=p.endB)&&a.someProp("handleKeyDown",b=>b(a,oy(13,"Enter")))){a.input.lastIOSEnter=0;return}if(!p)if(d&&l instanceof nG&&!l.empty&&l.$head.sameParent(l.$anchor)&&!a.composing&&!(m.sel&&m.sel.anchor!=m.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(m.sel){let b=qK(a,a.state.doc,m.sel);if(b&&!b.eq(a.state.selection)){let c=a.state.tr.setSelection(b);i&&c.setMeta("composition",i),a.dispatch(c)}}return}a.state.selection.from<a.state.selection.to&&p.start==p.endB&&a.state.selection instanceof nG&&(p.start>a.state.selection.from&&p.start<=a.state.selection.from+2&&a.state.selection.from>=m.from?p.start=a.state.selection.from:p.endA<a.state.selection.to&&p.endA>=a.state.selection.to-2&&a.state.selection.to<=m.to&&(p.endB+=a.state.selection.to-p.endA,p.endA=a.state.selection.to)),oF&&oG<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>m.from&&" Â "==m.doc.textBetween(p.start-m.from-1,p.start-m.from+1)&&(p.start--,p.endA--,p.endB--);let q=m.doc.resolveNoCache(p.start-m.from),r=m.doc.resolveNoCache(p.endB-m.from),s=n.resolve(p.start),t=q.sameParent(r)&&q.parent.inlineContent&&s.end()>=p.endA;if((oM&&a.input.lastIOSEnter>Date.now()-225&&(!t||e.some(a=>"DIV"==a.nodeName||"P"==a.nodeName))||!t&&q.pos<m.doc.content.size&&(!q.sameParent(r)||!q.parent.inlineContent)&&q.pos<r.pos&&!/\S/.test(m.doc.textBetween(q.pos,r.pos,"","")))&&a.someProp("handleKeyDown",b=>b(a,oy(13,"Enter")))){a.input.lastIOSEnter=0;return}if(a.state.selection.anchor>p.start&&function(a,b,c,d,e){if(c-b<=e.pos-d.pos||qL(d,!0,!1)<e.pos)return!1;let f=a.resolve(b);if(!d.parent.isTextblock){let a=f.nodeAfter;return null!=a&&c==b+a.nodeSize}if(f.parentOffset<f.parent.content.size||!f.parent.isTextblock)return!1;let g=a.resolve(qL(f,!0,!0));return!(!g.parent.isTextblock||g.pos>c||qL(g,!0,!1)<c)&&d.parent.content.cut(d.parentOffset).eq(g.parent.content)}(n,p.start,p.endA,q,r)&&a.someProp("handleKeyDown",b=>b(a,oy(8,"Backspace")))){oP&&oJ&&a.domObserver.suppressSelectionUpdates();return}oJ&&p.endB==p.start&&(a.input.lastChromeDelete=Date.now()),oP&&!t&&q.start()!=r.start()&&0==r.parentOffset&&q.depth==r.depth&&m.sel&&m.sel.anchor==m.sel.head&&m.sel.head==p.endA&&(p.endB-=2,r=m.doc.resolveNoCache(p.endB-m.from),setTimeout(()=>{a.someProp("handleKeyDown",function(b){return b(a,oy(13,"Enter"))})},20));let u=p.start,v=p.endA,w=b=>{let c=b||a.state.tr.replace(u,v,m.doc.slice(p.start-m.from,p.endB-m.from));if(m.sel){let b=qK(a,c.doc,m.sel);b&&!(oJ&&a.composing&&b.empty&&(p.start!=p.endB||a.input.lastChromeDelete<Date.now()-100)&&(b.head==u||b.head==c.mapping.map(v)-1)||oF&&b.empty&&b.head==u)&&c.setSelection(b)}return i&&c.setMeta("composition",i),c.scrollIntoView()};if(t)if(q.pos==r.pos){oF&&oG<=11&&0==q.parentOffset&&(a.domObserver.suppressSelectionUpdates(),setTimeout(()=>ps(a),20));let b=w(a.state.tr.delete(u,v)),c=n.resolve(p.start).marksAcross(n.resolve(p.endA));c&&b.ensureMarks(c),a.dispatch(b)}else if(p.endA==p.endB&&(h=function(a,b){let c=a.firstChild.marks,d=b.firstChild.marks,e=c,f=d,g,h,i;for(let a=0;a<d.length;a++)e=d[a].removeFromSet(e);for(let a=0;a<c.length;a++)f=c[a].removeFromSet(f);if(1==e.length&&0==f.length)h=e[0],g="add",i=a=>a.mark(h.addToSet(a.marks));else{if(0!=e.length||1!=f.length)return null;h=f[0],g="remove",i=a=>a.mark(h.removeFromSet(a.marks))}let j=[];for(let a=0;a<b.childCount;a++)j.push(i(b.child(a)));if(me.from(j).eq(a))return{mark:h,type:g}}(q.parent.content.cut(q.parentOffset,r.parentOffset),s.parent.content.cut(s.parentOffset,p.endA-s.start())))){let b=w(a.state.tr);"add"==h.type?b.addMark(u,v,h.mark):b.removeMark(u,v,h.mark),a.dispatch(b)}else if(q.parent.child(q.index()).isText&&q.index()==r.index()-!r.textOffset){let b=q.parent.textBetween(q.parentOffset,r.parentOffset),c=()=>w(a.state.tr.insertText(b,u,v));a.someProp("handleTextInput",d=>d(a,u,v,b,c))||a.dispatch(c())}else a.dispatch(w());else a.dispatch(w())})(this,a,b,c,d)),this.domObserver.start(),function(a){for(let b in pY){let c=pY[b];a.dom.addEventListener(b,a.input.eventHandlers[b]=b=>{!function(a,b){if(!b.bubbles)return!0;if(b.defaultPrevented)return!1;for(let c=b.target;c!=a.dom;c=c.parentNode)if(!c||11==c.nodeType||c.pmViewDesc&&c.pmViewDesc.stopEvent(b))return!1;return!0}(a,b)||p2(a,b)||!a.editable&&b.type in pZ||c(a,b)},p$[b]?{passive:!0}:void 0)}oL&&a.dom.addEventListener("input",()=>null),p1(a)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let a=this._props;for(let b in this._props={},a)this._props[b]=a[b];this._props.state=this.state}return this._props}update(a){a.handleDOMEvents!=this._props.handleDOMEvents&&p1(this);let b=this._props;this._props=a,a.plugins&&(a.plugins.forEach(qS),this.directPlugins=a.plugins),this.updateStateInner(a.state,b)}setProps(a){let b={};for(let a in this._props)b[a]=this._props[a];for(let c in b.state=this.state,a)b[c]=a[c];this.update(b)}updateState(a){this.updateStateInner(a,this._props)}updateStateInner(a,b){var c,d,e;let f=this.state,g=!1,h=!1;a.storedMarks&&this.composing&&(qb(this),h=!0),this.state=a;let i=f.plugins!=a.plugins||this._props.plugins!=b.plugins;if(i||this._props.plugins!=b.plugins||this._props.nodeViews!=b.nodeViews){let a=qR(this);(function(a,b){let c=0,d=0;for(let d in a){if(a[d]!=b[d])return!0;c++}for(let a in b)d++;return c!=d})(a,this.nodeViews)&&(this.nodeViews=a,g=!0)}(i||b.handleDOMEvents!=this._props.handleDOMEvents)&&p1(this),this.editable=qQ(this),qP(this);let j=qA(this),k=qO(this),l=f.plugins==a.plugins||f.doc.eq(a.doc)?a.scrollToSelection>f.scrollToSelection?"to selection":"preserve":"reset",m=g||!this.docView.matchesNode(a.doc,k,j);(m||!a.selection.eq(f.selection))&&(h=!0);let n="preserve"==l&&h&&null==this.dom.style.overflowAnchor&&function(a){let b,c,d=a.dom.getBoundingClientRect(),e=Math.max(0,d.top);for(let f=(d.left+d.right)/2,g=e+1;g<Math.min(innerHeight,d.bottom);g+=5){let d=a.root.elementFromPoint(f,g);if(!d||d==a.dom||!a.dom.contains(d))continue;let h=d.getBoundingClientRect();if(h.top>=e-20){b=d,c=h.top;break}}return{refDOM:b,refTop:c,stack:oU(a.dom)}}(this);if(h){let b,c,h;this.domObserver.stop();let i=m&&(oF||oJ)&&!this.composing&&!f.selection.empty&&!a.selection.empty&&(d=f.selection,e=a.selection,h=Math.min(d.$anchor.sharedDepth(d.head),e.$anchor.sharedDepth(e.head)),d.$anchor.start(h)!=e.$anchor.start(h));if(m){let b=oJ?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function(a){let b=a.domSelectionRange();if(!b.focusNode)return null;let c=function(a,b){for(;;){if(3==a.nodeType&&b)return a;if(1==a.nodeType&&b>0){if("false"==a.contentEditable)return null;b=ov(a=a.childNodes[b-1])}else{if(!a.parentNode||ow(a))return null;b=om(a),a=a.parentNode}}}(b.focusNode,b.focusOffset),d=function(a,b){for(;;){if(3==a.nodeType&&b<a.nodeValue.length)return a;if(1==a.nodeType&&b<a.childNodes.length){if("false"==a.contentEditable)return null;a=a.childNodes[b],b=0}else{if(!a.parentNode||ow(a))return null;b=om(a)+1,a=a.parentNode}}}(b.focusNode,b.focusOffset);if(c&&d&&c!=d){let b=d.pmViewDesc,e=a.domObserver.lastChangedTextNode;if(c==e||d==e)return e;if(!b||!b.isText(d.nodeValue))return d;if(a.input.compositionNode==d){let a=c.pmViewDesc;if(!(!a||!a.isText(c.nodeValue)))return d}}return c||d}(this)),(g||!this.docView.update(a.doc,k,j,this))&&(this.docView.updateOuterDeco(k),this.docView.destroy(),this.docView=pc(a.doc,k,j,this.dom,this)),b&&!this.trackWrites&&(i=!0)}i||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(b=this.docView.domFromPos(this.state.selection.anchor,0),c=this.domSelectionRange(),or(b.node,b.offset,c.anchorNode,c.anchorOffset)))?ps(this,i):(px(this,a.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(f),(null==(c=this.dragging)?void 0:c.node)&&!f.doc.eq(a.doc)&&this.updateDraggedNode(this.dragging,f),"reset"==l?this.dom.scrollTop=0:"to selection"==l?this.scrollToSelection():n&&function({refDOM:a,refTop:b,stack:c}){let d=a?a.getBoundingClientRect().top:0;oV(c,0==d?0:d-b)}(n)}scrollToSelection(){let a=this.domSelectionRange().focusNode;if(a&&this.dom.contains(1==a.nodeType?a:a.parentNode))if(this.someProp("handleScrollToSelection",a=>a(this)));else if(this.state.selection instanceof nI){let b=this.docView.domAfterPos(this.state.selection.from);1==b.nodeType&&oT(this,b.getBoundingClientRect(),a)}else oT(this,this.coordsAtPos(this.state.selection.head,1),a)}destroyPluginViews(){let a;for(;a=this.pluginViews.pop();)a.destroy&&a.destroy()}updatePluginViews(a){if(a&&a.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let b=0;b<this.pluginViews.length;b++){let c=this.pluginViews[b];c.update&&c.update(this,a)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let a=0;a<this.directPlugins.length;a++){let b=this.directPlugins[a];b.spec.view&&this.pluginViews.push(b.spec.view(this))}for(let a=0;a<this.state.plugins.length;a++){let b=this.state.plugins[a];b.spec.view&&this.pluginViews.push(b.spec.view(this))}}}updateDraggedNode(a,b){let c=a.node,d=-1;if(this.state.doc.nodeAt(c.from)==c.node)d=c.from;else{let a=c.from+(this.state.doc.content.size-b.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==c.node&&(d=a)}this.dragging=new qg(a.slice,a.move,d<0?void 0:nI.create(this.state.doc,d))}someProp(a,b){let c=this._props&&this._props[a],d;if(null!=c&&(d=b?b(c):c))return d;for(let c=0;c<this.directPlugins.length;c++){let e=this.directPlugins[c].props[a];if(null!=e&&(d=b?b(e):e))return d}let e=this.state.plugins;if(e)for(let c=0;c<e.length;c++){let f=e[c].props[a];if(null!=f&&(d=b?b(f):f))return d}}hasFocus(){if(oF){let a=this.root.activeElement;if(a==this.dom)return!0;if(!a||!this.dom.contains(a))return!1;for(;a&&this.dom!=a&&this.dom.contains(a);){if("false"==a.contentEditable)return!1;a=a.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(a){if(a.setActive)return a.setActive();if(oW)return a.focus(oW);let b=oU(a);a.focus(null==oW?{get preventScroll(){return oW={preventScroll:!0},!0}}:void 0),oW||(oW=!1,oV(b,0))}(this.dom),ps(this),this.domObserver.start()}get root(){let a=this._root;if(null==a){for(let a=this.dom.parentNode;a;a=a.parentNode)if(9==a.nodeType||11==a.nodeType&&a.host)return a.getSelection||(Object.getPrototypeOf(a).getSelection=()=>a.ownerDocument.getSelection()),this._root=a}return a||document}updateRoot(){this._root=null}posAtCoords(a){return function(a,b){var c;let d,e,f=a.dom.ownerDocument,g,h=0,i=function(a,b,c){if(a.caretPositionFromPoint)try{let d=a.caretPositionFromPoint(b,c);if(d)return{node:d.offsetNode,offset:Math.min(ov(d.offsetNode),d.offset)}}catch(a){}if(a.caretRangeFromPoint){let d=a.caretRangeFromPoint(b,c);if(d)return{node:d.startContainer,offset:Math.min(ov(d.startContainer),d.startOffset)}}}(f,b.left,b.top);i&&({node:g,offset:h}=i);let j=(a.root.elementFromPoint?a.root:f).elementFromPoint(b.left,b.top);if(!j||!a.dom.contains(1!=j.nodeType?j.parentNode:j)){let c=a.dom.getBoundingClientRect();if(!oX(b,c)||!(j=function a(b,c,d){let e=b.childNodes.length;if(e&&d.top<d.bottom)for(let f=Math.max(0,Math.min(e-1,Math.floor(e*(c.top-d.top)/(d.bottom-d.top))-2)),g=f;;){let d=b.childNodes[g];if(1==d.nodeType){let b=d.getClientRects();for(let e=0;e<b.length;e++){let f=b[e];if(oX(c,f))return a(d,c,f)}}if((g=(g+1)%e)==f)break}return b}(a.dom,b,c)))return null}if(oL)for(let a=j;g&&a;a=on(a))a.draggable&&(g=void 0);if(j=(d=(c=j).parentNode)&&/^li$/i.test(d.nodeName)&&b.left<c.getBoundingClientRect().left?d:c,g){let c;if(oH&&1==g.nodeType&&(h=Math.min(h,g.childNodes.length))<g.childNodes.length){let a=g.childNodes[h],c;"IMG"==a.nodeName&&(c=a.getBoundingClientRect()).right<=b.left&&c.bottom>b.top&&h++}oQ&&h&&1==g.nodeType&&1==(c=g.childNodes[h-1]).nodeType&&"false"==c.contentEditable&&c.getBoundingClientRect().top>=b.top&&h--,g==a.dom&&h==g.childNodes.length-1&&1==g.lastChild.nodeType&&b.top>g.lastChild.getBoundingClientRect().bottom?e=a.state.doc.content.size:(0==h||1!=g.nodeType||"BR"!=g.childNodes[h-1].nodeName)&&(e=function(a,b,c,d){let e=-1;for(let c=b,f=!1;c!=a.dom;){let b=a.docView.nearestDesc(c,!0),g;if(!b)return null;if(1==b.dom.nodeType&&(b.node.isBlock&&b.parent||!b.contentDOM)&&((g=b.dom.getBoundingClientRect()).width||g.height)&&(b.node.isBlock&&b.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(b.dom.nodeName)&&(!f&&g.left>d.left||g.top>d.top?e=b.posBefore:(!f&&g.right<d.left||g.bottom<d.top)&&(e=b.posAfter),f=!0),!b.contentDOM&&e<0&&!b.node.isText))return(b.node.isBlock?d.top<(g.top+g.bottom)/2:d.left<(g.left+g.right)/2)?b.posBefore:b.posAfter;c=b.dom.parentNode}return e>-1?e:a.docView.posFromDOM(b,c,-1)}(a,g,h,b))}null==e&&(e=function(a,b,c){let{node:d,offset:e}=function a(b,c){let d,e,f,g=2e8,h,i=0,j=c.top,k=c.top;for(let a=b.firstChild,l=0;a;a=a.nextSibling,l++){let b;if(1==a.nodeType)b=a.getClientRects();else{if(3!=a.nodeType)continue;b=op(a).getClientRects()}for(let m=0;m<b.length;m++){let n=b[m];if(n.top<=j&&n.bottom>=k){j=Math.max(n.bottom,j),k=Math.min(n.top,k);let b=n.left>c.left?n.left-c.left:n.right<c.left?c.left-n.right:0;if(b<g){f=a,g=b,h=b&&3==f.nodeType?{left:n.right<c.left?n.right:n.left,top:c.top}:c,1==a.nodeType&&b&&(i=l+ +(c.left>=(n.left+n.right)/2));continue}}else n.top>c.top&&!d&&n.left<=c.left&&n.right>=c.left&&(d=a,e={left:Math.max(n.left,Math.min(n.right,c.left)),top:n.top});!f&&(c.left>=n.right&&c.top>=n.top||c.left>=n.left&&c.top>=n.bottom)&&(i=l+1)}}return(!f&&d&&(f=d,h=e,g=0),f&&3==f.nodeType)?function(a,b){let c=a.nodeValue.length,d=document.createRange();for(let e=0;e<c;e++){d.setEnd(a,e+1),d.setStart(a,e);let c=oZ(d,1);if(c.top!=c.bottom&&oX(b,c))return{node:a,offset:e+ +(b.left>=(c.left+c.right)/2)}}return{node:a,offset:0}}(f,h):!f||g&&1==f.nodeType?{node:b,offset:i}:a(f,h)}(b,c),f=-1;if(1==d.nodeType&&!d.firstChild){let a=d.getBoundingClientRect();f=a.left!=a.right&&c.left>(a.left+a.right)/2?1:-1}return a.docView.posFromDOM(d,e,f)}(a,j,b));let k=a.docView.nearestDesc(j,!0);return{pos:e,inside:k?k.posAtStart-k.border:-1}}(this,a)}coordsAtPos(a,b=1){return o_(this,a,b)}domAtPos(a,b=0){return this.docView.domFromPos(a,b)}nodeDOM(a){let b=this.docView.descAt(a);return b?b.nodeDOM:null}posAtDOM(a,b,c=-1){let d=this.docView.posFromDOM(a,b,c);if(null==d)throw RangeError("DOM position not inside the editor");return d}endOfTextblock(a,b){return function(a,b,c){let d,e;return o4==b&&o5==c?o6:(o4=b,o5=c,o6="up"==c||"down"==c?(d=b.selection,e="up"==c?d.$from:d.$to,o2(a,b,()=>{let{node:b}=a.docView.domFromPos(e.pos,"up"==c?-1:1);for(;;){let c=a.docView.nearestDesc(b,!0);if(!c)break;if(c.node.isBlock){b=c.contentDOM||c.dom;break}b=c.dom.parentNode}let d=o_(a,e.pos,1);for(let a=b.firstChild;a;a=a.nextSibling){let b;if(1==a.nodeType)b=a.getClientRects();else{if(3!=a.nodeType)continue;b=op(a,0,a.nodeValue.length).getClientRects()}for(let a=0;a<b.length;a++){let e=b[a];if(e.bottom>e.top+1&&("up"==c?d.top-e.top>(e.bottom-d.top)*2:e.bottom-d.bottom>(d.bottom-e.top)*2))return!1}}return!0})):function(a,b,c){let{$head:d}=b.selection;if(!d.parent.isTextblock)return!1;let e=d.parentOffset,f=e==d.parent.content.size,g=a.domSelection();return g?o3.test(d.parent.textContent)&&g.modify?o2(a,b,()=>{let{focusNode:b,focusOffset:e,anchorNode:f,anchorOffset:h}=a.domSelectionRange(),i=g.caretBidiLevel;g.modify("move",c,"character");let j=d.depth?a.docView.domAfterPos(d.before()):a.dom,{focusNode:k,focusOffset:l}=a.domSelectionRange(),m=k&&!j.contains(1==k.nodeType?k:k.parentNode)||b==k&&e==l;try{g.collapse(f,h),b&&(b!=f||e!=h)&&g.extend&&g.extend(b,e)}catch(a){}return null!=i&&(g.caretBidiLevel=i),m}):"left"==c||"backward"==c?!e:f:d.pos==d.start()||d.pos==d.end()}(a,b,c))}(this,b||this.state,a)}pasteHTML(a,b){return qe(this,"",a,!1,b||new ClipboardEvent("paste"))}pasteText(a,b){return qe(this,a,null,!0,b||new ClipboardEvent("paste"))}serializeForClipboard(a){return pO(this,a)}destroy(){if(this.docView){for(let a in this.domObserver.stop(),this.input.eventHandlers)this.dom.removeEventListener(a,this.input.eventHandlers[a]);clearTimeout(this.input.composingTimeout),clearTimeout(this.input.lastIOSEnterFallbackTimeout),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],qA(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,oq()}}get isDestroyed(){return null==this.docView}dispatchEvent(a){!p2(this,a)&&pY[a.type]&&(this.editable||!(a.type in pZ))&&pY[a.type](this,a)}domSelectionRange(){let a=this.domSelection();return a?oL&&11===this.root.nodeType&&function(a){let b=a.activeElement;for(;b&&b.shadowRoot;)b=b.shadowRoot.activeElement;return b}(this.dom.ownerDocument)==this.dom&&function(a,b){let c;if(b.getComposedRanges){let c=b.getComposedRanges(a.root)[0];if(c)return qH(a,c)}function d(a){a.preventDefault(),a.stopImmediatePropagation(),c=a.getTargetRanges()[0]}return a.dom.addEventListener("beforeinput",d,!0),document.execCommand("indent"),a.dom.removeEventListener("beforeinput",d,!0),c?qH(a,c):null}(this,a)||a:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function qO(a){let b=Object.create(null);return b.class="ProseMirror",b.contenteditable=String(a.editable),a.someProp("attributes",c=>{if("function"==typeof c&&(c=c(a.state)),c)for(let a in c)"class"==a?b.class+=" "+c[a]:"style"==a?b.style=(b.style?b.style+";":"")+c[a]:b[a]||"contenteditable"==a||"nodeName"==a||(b[a]=String(c[a]))}),b.translate||(b.translate="no"),[qn.node(0,a.state.doc.content.size,b)]}function qP(a){if(a.markCursor){let b=document.createElement("img");b.className="ProseMirror-separator",b.setAttribute("mark-placeholder","true"),b.setAttribute("alt",""),a.cursorWrapper={dom:b,deco:qn.widget(a.state.selection.from,b,{raw:!0,marks:a.markCursor})}}else a.cursorWrapper=null}function qQ(a){return!a.someProp("editable",b=>!1===b(a.state))}function qR(a){let b=Object.create(null);function c(a){for(let c in a)Object.prototype.hasOwnProperty.call(b,c)||(b[c]=a[c])}return a.someProp("nodeViews",c),a.someProp("markViews",c),b}function qS(a){if(a.spec.state||a.spec.filterTransaction||a.spec.appendTransaction)throw RangeError("Plugins passed directly to the view must not have a state component")}qN.prototype.dispatch=function(a){let b=this._props.dispatchTransaction;b?b.call(this,a):this.updateState(this.state.apply(a))};for(var qT={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qU={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},qV="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),qW="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),qX=0;qX<10;qX++)qT[48+qX]=qT[96+qX]=String(qX);for(var qX=1;qX<=24;qX++)qT[qX+111]="F"+qX;for(var qX=65;qX<=90;qX++)qT[qX]=String.fromCharCode(qX+32),qU[qX]=String.fromCharCode(qX);for(var qY in qT)qU.hasOwnProperty(qY)||(qU[qY]=qT[qY]);let qZ="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),q$="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function q_(a,b,c=!0){return b.altKey&&(a="Alt-"+a),b.ctrlKey&&(a="Ctrl-"+a),b.metaKey&&(a="Meta-"+a),c&&b.shiftKey&&(a="Shift-"+a),a}function q0(a){let b=function(a){let b=Object.create(null);for(let c in a)b[function(a){let b,c,d,e,f=a.split(/-(?!$)/),g=f[f.length-1];"Space"==g&&(g=" ");for(let a=0;a<f.length-1;a++){let g=f[a];if(/^(cmd|meta|m)$/i.test(g))e=!0;else if(/^a(lt)?$/i.test(g))b=!0;else if(/^(c|ctrl|control)$/i.test(g))c=!0;else if(/^s(hift)?$/i.test(g))d=!0;else if(/^mod$/i.test(g))qZ?e=!0:c=!0;else throw Error("Unrecognized modifier name: "+g)}return b&&(g="Alt-"+g),c&&(g="Ctrl-"+g),e&&(g="Meta-"+g),d&&(g="Shift-"+g),g}(c)]=a[c];return b}(a);return function(a,c){var d;let e=("Esc"==(d=!(qV&&c.metaKey&&c.shiftKey&&!c.ctrlKey&&!c.altKey||qW&&c.shiftKey&&c.key&&1==c.key.length||"Unidentified"==c.key)&&c.key||(c.shiftKey?qU:qT)[c.keyCode]||c.key||"Unidentified")&&(d="Escape"),"Del"==d&&(d="Delete"),"Left"==d&&(d="ArrowLeft"),"Up"==d&&(d="ArrowUp"),"Right"==d&&(d="ArrowRight"),"Down"==d&&(d="ArrowDown"),d),f,g=b[q_(e,c)];if(g&&g(a.state,a.dispatch,a))return!0;if(1==e.length&&" "!=e){if(c.shiftKey){let d=b[q_(e,c,!1)];if(d&&d(a.state,a.dispatch,a))return!0}if((c.altKey||c.metaKey||c.ctrlKey)&&!(q$&&c.ctrlKey&&c.altKey)&&(f=qT[c.keyCode])&&f!=e){let d=b[q_(f,c)];if(d&&d(a.state,a.dispatch,a))return!0}}return!1}}var q1=Object.defineProperty,q2=(a,b)=>{for(var c in b)q1(a,c,{get:b[c],enumerable:!0})};function q3(a){let{state:b,transaction:c}=a,{selection:d}=c,{doc:e}=c,{storedMarks:f}=c;return{...b,apply:b.apply.bind(b),applyTransaction:b.applyTransaction.bind(b),plugins:b.plugins,schema:b.schema,reconfigure:b.reconfigure.bind(b),toJSON:b.toJSON.bind(b),get storedMarks(){return f},get selection(){return d},get doc(){return e},get tr(){return d=c.selection,e=c.doc,f=c.storedMarks,c}}}var q4=class{constructor(a){this.editor=a.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=a.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:a,editor:b,state:c}=this,{view:d}=b,{tr:e}=c,f=this.buildProps(e);return Object.fromEntries(Object.entries(a).map(([a,b])=>[a,(...a)=>{let c=b(...a)(f);return e.getMeta("preventDispatch")||this.hasCustomState||d.dispatch(e),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(a,b=!0){let{rawCommands:c,editor:d,state:e}=this,{view:f}=d,g=[],h=!!a,i=a||e.tr,j=()=>(h||!b||i.getMeta("preventDispatch")||this.hasCustomState||f.dispatch(i),g.every(a=>!0===a)),k={...Object.fromEntries(Object.entries(c).map(([a,c])=>[a,(...a)=>{let d=this.buildProps(i,b),e=c(...a)(d);return g.push(e),k}])),run:j};return k}createCan(a){let{rawCommands:b,state:c}=this,d=a||c.tr,e=this.buildProps(d,!1);return{...Object.fromEntries(Object.entries(b).map(([a,b])=>[a,(...a)=>b(...a)({...e,dispatch:void 0})])),chain:()=>this.createChain(d,!1)}}buildProps(a,b=!0){let{rawCommands:c,editor:d,state:e}=this,{view:f}=d,g={tr:a,editor:d,view:f,state:q3({state:e,transaction:a}),dispatch:b?()=>void 0:void 0,chain:()=>this.createChain(a,b),can:()=>this.createCan(a),get commands(){return Object.fromEntries(Object.entries(c).map(([a,b])=>[a,(...a)=>b(...a)(g)]))}};return g}},q5={};q2(q5,{blur:()=>q6,clearContent:()=>q7,clearNodes:()=>q8,command:()=>q9,createParagraphNear:()=>ra,cut:()=>rb,deleteCurrentNode:()=>rc,deleteNode:()=>re,deleteRange:()=>rf,deleteSelection:()=>rg,enter:()=>rh,exitCode:()=>ri,extendMarkRange:()=>rp,first:()=>rq,focus:()=>rv,forEach:()=>rw,insertContent:()=>rx,insertContentAt:()=>rA,joinBackward:()=>rD,joinDown:()=>rC,joinForward:()=>rE,joinItemBackward:()=>rF,joinItemForward:()=>rG,joinTextblockBackward:()=>rH,joinTextblockForward:()=>rI,joinUp:()=>rB,keyboardShortcut:()=>rK,lift:()=>rM,liftEmptyBlock:()=>rN,liftListItem:()=>rO,newlineInCode:()=>rP,resetAttributes:()=>rS,scrollIntoView:()=>rT,selectAll:()=>rU,selectNodeBackward:()=>rV,selectNodeForward:()=>rW,selectParentNode:()=>rX,selectTextblockEnd:()=>rY,selectTextblockStart:()=>rZ,setContent:()=>r_,setMark:()=>st,setMeta:()=>su,setNode:()=>sv,setNodeSelection:()=>sw,setTextDirection:()=>sx,setTextSelection:()=>sy,sinkListItem:()=>sz,splitBlock:()=>sB,splitListItem:()=>sC,toggleList:()=>sF,toggleMark:()=>sG,toggleNode:()=>sH,toggleWrap:()=>sI,undoInputRule:()=>sJ,unsetAllMarks:()=>sK,unsetMark:()=>sL,unsetTextDirection:()=>sM,updateAttributes:()=>sN,wrapIn:()=>sO,wrapInList:()=>sP});var q6=()=>({editor:a,view:b})=>(requestAnimationFrame(()=>{var c;a.isDestroyed||(b.dom.blur(),null==(c=null==window?void 0:window.getSelection())||c.removeAllRanges())}),!0),q7=(a=!0)=>({commands:b})=>b.setContent("",{emitUpdate:a}),q8=()=>({state:a,tr:b,dispatch:c})=>{let{selection:d}=b,{ranges:e}=d;return!c||(e.forEach(({$from:c,$to:d})=>{a.doc.nodesBetween(c.pos,d.pos,(a,c)=>{if(a.type.isText)return;let{doc:d,mapping:e}=b,f=d.resolve(e.map(c)),g=d.resolve(e.map(c+a.nodeSize)),h=f.blockRange(g);if(!h)return;let i=nf(h);if(a.type.isTextblock){let{defaultType:a}=f.parent.contentMatchAt(f.index());b.setNodeMarkup(h.start,a)}(i||0===i)&&b.lift(h,i)})}),!0)},q9=a=>b=>a(b),ra=()=>({state:a,dispatch:b})=>oa(a,b),rb=(a,b)=>({editor:c,tr:d})=>{let{state:e}=c,f=e.doc.slice(a.from,a.to);d.deleteRange(a.from,a.to);let g=d.mapping.map(b);return d.insert(g,f.content),d.setSelection(new nG(d.doc.resolve(Math.max(g-1,0)))),!0},rc=()=>({tr:a,dispatch:b})=>{let{selection:c}=a,d=c.$anchor.node();if(d.content.size>0)return!1;let e=a.selection.$anchor;for(let c=e.depth;c>0;c-=1)if(e.node(c).type===d.type){if(b){let b=e.before(c),d=e.after(c);a.delete(b,d).scrollIntoView()}return!0}return!1};function rd(a,b){if("string"==typeof a){if(!b.nodes[a])throw Error(`There is no node type named '${a}'. Maybe you forgot to add the extension?`);return b.nodes[a]}return a}var re=a=>({tr:b,state:c,dispatch:d})=>{let e=rd(a,c.schema),f=b.selection.$anchor;for(let a=f.depth;a>0;a-=1)if(f.node(a).type===e){if(d){let c=f.before(a),d=f.after(a);b.delete(c,d).scrollIntoView()}return!0}return!1},rf=a=>({tr:b,dispatch:c})=>{let{from:d,to:e}=a;return c&&b.delete(d,e),!0},rg=()=>({state:a,dispatch:b})=>nY(a,b),rh=()=>({commands:a})=>a.keyboardShortcut("Enter"),ri=()=>({state:a,dispatch:b})=>n9(a,b);function rj(a){return"[object RegExp]"===Object.prototype.toString.call(a)}function rk(a,b,c={strict:!0}){let d=Object.keys(b);return!d.length||d.every(d=>c.strict?b[d]===a[d]:rj(b[d])?b[d].test(a[d]):b[d]===a[d])}function rl(a,b,c={}){return a.find(a=>a.type===b&&rk(Object.fromEntries(Object.keys(c).map(b=>[b,a.attrs[b]])),c))}function rm(a,b,c={}){return!!rl(a,b,c)}function rn(a,b,c){var d;if(!a||!b)return;let e=a.parent.childAfter(a.parentOffset);if(e.node&&e.node.marks.some(a=>a.type===b)||(e=a.parent.childBefore(a.parentOffset)),!e.node||!e.node.marks.some(a=>a.type===b)||(c=c||(null==(d=e.node.marks[0])?void 0:d.attrs),!rl([...e.node.marks],b,c)))return;let f=e.index,g=a.start()+e.offset,h=f+1,i=g+e.node.nodeSize;for(;f>0&&rm([...a.parent.child(f-1).marks],b,c);)f-=1,g-=a.parent.child(f).nodeSize;for(;h<a.parent.childCount&&rm([...a.parent.child(h).marks],b,c);)i+=a.parent.child(h).nodeSize,h+=1;return{from:g,to:i}}function ro(a,b){if("string"==typeof a){if(!b.marks[a])throw Error(`There is no mark type named '${a}'. Maybe you forgot to add the extension?`);return b.marks[a]}return a}var rp=(a,b={})=>({tr:c,state:d,dispatch:e})=>{let f=ro(a,d.schema),{doc:g,selection:h}=c,{$from:i,from:j,to:k}=h;if(e){let a=rn(i,f,b);if(a&&a.from<=j&&a.to>=k){let b=nG.create(g,a.from,a.to);c.setSelection(b)}}return!0},rq=a=>b=>{let c="function"==typeof a?a(b):a;for(let a=0;a<c.length;a+=1)if(c[a](b))return!0;return!1};function rr(a){return a instanceof nG}function rs(a=0,b=0,c=0){return Math.min(Math.max(a,b),c)}function rt(a,b=null){if(!b)return null;let c=nC.atStart(a),d=nC.atEnd(a);if("start"===b||!0===b)return c;if("end"===b)return d;let e=c.from,f=d.to;return"all"===b?nG.create(a,rs(0,e,f),rs(a.content.size,e,f)):nG.create(a,rs(b,e,f),rs(b,e,f))}function ru(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var rv=(a=null,b={})=>({editor:c,view:d,tr:e,dispatch:f})=>{b={scrollIntoView:!0,...b};let g=()=>{(ru()||"Android"===navigator.platform||/android/i.test(navigator.userAgent))&&d.dom.focus(),requestAnimationFrame(()=>{!c.isDestroyed&&(d.focus(),(null==b?void 0:b.scrollIntoView)&&c.commands.scrollIntoView())})};if(d.hasFocus()&&null===a||!1===a)return!0;if(f&&null===a&&!rr(c.state.selection))return g(),!0;let h=rt(e.doc,a)||c.state.selection,i=c.state.selection.eq(h);return f&&(i||e.setSelection(h),i&&e.storedMarks&&e.setStoredMarks(e.storedMarks),g()),!0},rw=(a,b)=>c=>a.every((a,d)=>b(a,{...c,index:d})),rx=(a,b)=>({tr:c,commands:d})=>d.insertContentAt({from:c.selection.from,to:c.selection.to},a,b);function ry(a){throw Error("[tiptap error]: there is no window object available, so this function cannot be used")}function rz(a,b,c){if(a instanceof mx||a instanceof me)return a;c={slice:!0,parseOptions:{},...c};let d="object"==typeof a&&null!==a,e="string"==typeof a;if(d)try{if(Array.isArray(a)&&a.length>0)return me.fromArray(a.map(a=>b.nodeFromJSON(a)));let d=b.nodeFromJSON(a);return c.errorOnInvalidContent&&d.check(),d}catch(d){if(c.errorOnInvalidContent)throw Error("[tiptap error]: Invalid JSON content",{cause:d});return console.warn("[tiptap warn]: Invalid content.","Passed value:",a,"Error:",d),rz("",b,c)}if(e){if(c.errorOnInvalidContent){let d=!1,e="",f=new mM({topNode:b.spec.topNode,marks:b.spec.marks,nodes:b.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:a=>(d=!0,e="string"==typeof a?a:a.outerHTML,null)}]}})});if(c.slice?mO.fromSchema(f).parseSlice(ry(a),c.parseOptions):mO.fromSchema(f).parse(ry(a),c.parseOptions),c.errorOnInvalidContent&&d)throw Error("[tiptap error]: Invalid HTML content",{cause:Error(`Invalid element found: ${e}`)})}let d=mO.fromSchema(b);return c.slice?d.parseSlice(ry(a),c.parseOptions).content:d.parse(ry(a),c.parseOptions)}return rz("",b,c)}var rA=(a,b,c)=>({tr:d,dispatch:e,editor:f})=>{var g;if(e){let e,h;c={parseOptions:f.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...c};let i=a=>{f.emit("contentError",{editor:f,error:a,disableCollaboration:()=>{"collaboration"in f.storage&&"object"==typeof f.storage.collaboration&&f.storage.collaboration&&(f.storage.collaboration.isDisabled=!0)}})},j={preserveWhitespace:"full",...c.parseOptions};if(!c.errorOnInvalidContent&&!f.options.enableContentCheck&&f.options.emitContentError)try{rz(b,f.schema,{parseOptions:j,errorOnInvalidContent:!0})}catch(a){i(a)}try{e=rz(b,f.schema,{parseOptions:j,errorOnInvalidContent:null!=(g=c.errorOnInvalidContent)?g:f.options.enableContentCheck})}catch(a){return i(a),!1}let{from:k,to:l}="number"==typeof a?{from:a,to:a}:{from:a.from,to:a.to},m=!0,n=!0;if((!("type"in e)?e:[e]).forEach(a=>{a.check(),m=!!m&&a.isText&&0===a.marks.length,n=!!n&&a.isBlock}),k===l&&n){let{parent:a}=d.doc.resolve(k);!a.isTextblock||a.type.spec.code||a.childCount||(k-=1,l+=1)}if(m){if(Array.isArray(b))h=b.map(a=>a.text||"").join("");else if(b instanceof me){let a="";b.forEach(b=>{b.text&&(a+=b.text)}),h=a}else h="object"==typeof b&&b&&b.text?b.text:b;d.insertText(h,k,l)}else{h=e;let a=d.doc.resolve(k),b=a.node(),c=0===a.parentOffset,f=b.isText||b.isTextblock,g=b.content.size>0;c&&f&&g&&(k=Math.max(0,k-1)),d.replaceWith(k,l,h)}c.updateSelection&&function(a,b,c){let d=a.steps.length-1;if(d<b)return;let e=a.steps[d];if(!(e instanceof nb||e instanceof nc))return;let f=a.mapping.maps[d],g=0;f.forEach((a,b,c,d)=>{0===g&&(g=d)}),a.setSelection(nC.near(a.doc.resolve(g),-1))}(d,d.steps.length-1,0),c.applyInputRules&&d.setMeta("applyInputRules",{from:k,text:h}),c.applyPasteRules&&d.setMeta("applyPasteRules",{from:k,text:h})}return!0},rB=()=>({state:a,dispatch:b})=>((a,b)=>{let c=a.selection,d=c instanceof nI,e;if(d){if(c.node.isTextblock||!nl(a.doc,c.from))return!1;e=c.from}else if(null==(e=nn(a.doc,c.from,-1)))return!1;if(b){let c=a.tr.join(e);d&&c.setSelection(nI.create(c.doc,e-a.doc.resolve(e).nodeBefore.nodeSize)),b(c.scrollIntoView())}return!0})(a,b),rC=()=>({state:a,dispatch:b})=>((a,b)=>{let c=a.selection,d;if(c instanceof nI){if(c.node.isTextblock||!nl(a.doc,c.to))return!1;d=c.to}else if(null==(d=nn(a.doc,c.to,1)))return!1;return b&&b(a.tr.join(d).scrollIntoView()),!0})(a,b),rD=()=>({state:a,dispatch:b})=>n$(a,b),rE=()=>({state:a,dispatch:b})=>n4(a,b),rF=()=>({state:a,dispatch:b,tr:c})=>{try{let d=nn(a.doc,a.selection.$from.pos,-1);if(null==d)return!1;return c.join(d,2),b&&b(c),!0}catch{return!1}},rG=()=>({state:a,dispatch:b,tr:c})=>{try{let d=nn(a.doc,a.selection.$from.pos,1);if(null==d)return!1;return c.join(d,2),b&&b(c),!0}catch{return!1}},rH=()=>({state:a,dispatch:b})=>((a,b,c)=>{let d=nZ(a,c);if(!d)return!1;let e=n2(d);return!!e&&n_(a,e,b)})(a,b),rI=()=>({state:a,dispatch:b})=>((a,b,c)=>{let d=n3(a,c);if(!d)return!1;let e=n6(d);return!!e&&n_(a,e,b)})(a,b);function rJ(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}var rK=a=>({editor:b,view:c,tr:d,dispatch:e})=>{let f=(function(a){let b,c,d,e,f=a.split(/-(?!$)/),g=f[f.length-1];"Space"===g&&(g=" ");for(let a=0;a<f.length-1;a+=1){let g=f[a];if(/^(cmd|meta|m)$/i.test(g))e=!0;else if(/^a(lt)?$/i.test(g))b=!0;else if(/^(c|ctrl|control)$/i.test(g))c=!0;else if(/^s(hift)?$/i.test(g))d=!0;else if(/^mod$/i.test(g))ru()||rJ()?e=!0:c=!0;else throw Error(`Unrecognized modifier name: ${g}`)}return b&&(g=`Alt-${g}`),c&&(g=`Ctrl-${g}`),e&&(g=`Meta-${g}`),d&&(g=`Shift-${g}`),g})(a).split(/-(?!$)/),g=f.find(a=>!["Alt","Ctrl","Meta","Shift"].includes(a)),h=new KeyboardEvent("keydown",{key:"Space"===g?" ":g,altKey:f.includes("Alt"),ctrlKey:f.includes("Ctrl"),metaKey:f.includes("Meta"),shiftKey:f.includes("Shift"),bubbles:!0,cancelable:!0}),i=b.captureTransaction(()=>{c.someProp("handleKeyDown",a=>a(c,h))});return null==i||i.steps.forEach(a=>{let b=a.map(d.mapping);b&&e&&d.maybeStep(b)}),!0};function rL(a,b,c={}){let{from:d,to:e,empty:f}=a.selection,g=b?rd(b,a.schema):null,h=[];a.doc.nodesBetween(d,e,(a,b)=>{if(a.isText)return;let c=Math.max(d,b),f=Math.min(e,b+a.nodeSize);h.push({node:a,from:c,to:f})});let i=e-d,j=h.filter(a=>!g||g.name===a.node.type.name).filter(a=>rk(a.node.attrs,c,{strict:!1}));return f?!!j.length:j.reduce((a,b)=>a+b.to-b.from,0)>=i}var rM=(a,b={})=>({state:c,dispatch:d})=>{let e=rd(a,c.schema);return!!rL(c,e,b)&&((a,b)=>{let{$from:c,$to:d}=a.selection,e=c.blockRange(d),f=e&&nf(e);return null!=f&&(b&&b(a.tr.lift(e,f).scrollIntoView()),!0)})(c,d)},rN=()=>({state:a,dispatch:b})=>ob(a,b),rO=a=>({state:b,dispatch:c})=>{var d;return(d=rd(a,b.schema),function(a,b){let{$from:c,$to:e}=a.selection,f=c.blockRange(e,a=>a.childCount>0&&a.firstChild.type==d);return!!f&&(!b||(c.node(f.depth-1).type==d?function(a,b,c,d){let e=a.tr,f=d.end,g=d.$to.end(d.depth);f<g&&(e.step(new nc(f-1,g,f,g,new mk(me.from(c.create(null,d.parent.copy())),1,0),1,!0)),d=new mv(e.doc.resolve(d.$from.pos),e.doc.resolve(g),d.depth));let h=nf(d);if(null==h)return!1;e.lift(d,h);let i=e.doc.resolve(e.mapping.map(f,-1)-1);return nl(e.doc,i.pos)&&i.nodeBefore.type==i.nodeAfter.type&&e.join(i.pos),b(e.scrollIntoView()),!0}(a,b,d,f):function(a,b,c){let d=a.tr,e=c.parent;for(let a=c.end,b=c.endIndex-1,f=c.startIndex;b>f;b--)a-=e.child(b).nodeSize,d.delete(a-1,a+1);let f=d.doc.resolve(c.start),g=f.nodeAfter;if(d.mapping.map(c.end)!=c.start+f.nodeAfter.nodeSize)return!1;let h=0==c.startIndex,i=c.endIndex==e.childCount,j=f.node(-1),k=f.index(-1);if(!j.canReplace(k+ +!h,k+1,g.content.append(i?me.empty:me.from(e))))return!1;let l=f.pos,m=l+g.nodeSize;return d.step(new nc(l-!!h,m+ +!!i,l+1,m-1,new mk((h?me.empty:me.from(e.copy(me.empty))).append(i?me.empty:me.from(e.copy(me.empty))),+!h,+!i),+!h)),b(d.scrollIntoView()),!0}(a,b,f)))})(b,c)},rP=()=>({state:a,dispatch:b})=>n7(a,b);function rQ(a,b){return b.nodes[a]?"node":b.marks[a]?"mark":null}function rR(a,b){let c="string"==typeof b?[b]:b;return Object.keys(a).reduce((b,d)=>(c.includes(d)||(b[d]=a[d]),b),{})}var rS=(a,b)=>({tr:c,state:d,dispatch:e})=>{let f=null,g=null,h=rQ("string"==typeof a?a:a.name,d.schema);if(!h)return!1;"node"===h&&(f=rd(a,d.schema)),"mark"===h&&(g=ro(a,d.schema));let i=!1;return c.selection.ranges.forEach(a=>{d.doc.nodesBetween(a.$from.pos,a.$to.pos,(a,d)=>{f&&f===a.type&&(i=!0,e&&c.setNodeMarkup(d,void 0,rR(a.attrs,b))),g&&a.marks.length&&a.marks.forEach(f=>{g===f.type&&(i=!0,e&&c.addMark(d,d+a.nodeSize,g.create(rR(f.attrs,b))))})})}),i},rT=()=>({tr:a,dispatch:b})=>(b&&a.scrollIntoView(),!0),rU=()=>({tr:a,dispatch:b})=>{if(b){let b=new nK(a.doc);a.setSelection(b)}return!0},rV=()=>({state:a,dispatch:b})=>n1(a,b),rW=()=>({state:a,dispatch:b})=>n5(a,b),rX=()=>({state:a,dispatch:b})=>((a,b)=>{let{$from:c,to:d}=a.selection,e,f=c.sharedDepth(d);return 0!=f&&(e=c.before(f),b&&b(a.tr.setSelection(nI.create(a.doc,e))),!0)})(a,b),rY=()=>({state:a,dispatch:b})=>of(a,b),rZ=()=>({state:a,dispatch:b})=>oe(a,b);function r$(a,b,c={},d={}){return rz(a,b,{slice:!1,parseOptions:c,errorOnInvalidContent:d.errorOnInvalidContent})}var r_=(a,{errorOnInvalidContent:b,emitUpdate:c=!0,parseOptions:d={}}={})=>({editor:e,tr:f,dispatch:g,commands:h})=>{let{doc:i}=f;if("full"!==d.preserveWhitespace){let h=r$(a,e.schema,d,{errorOnInvalidContent:null!=b?b:e.options.enableContentCheck});return g&&f.replaceWith(0,i.content.size,h).setMeta("preventUpdate",!c),!0}return g&&f.setMeta("preventUpdate",!c),h.insertContentAt({from:0,to:i.content.size},a,{parseOptions:d,errorOnInvalidContent:null!=b?b:e.options.enableContentCheck})};function r0(a,b){let c=ro(b,a.schema),{from:d,to:e,empty:f}=a.selection,g=[];f?(a.storedMarks&&g.push(...a.storedMarks),g.push(...a.selection.$head.marks())):a.doc.nodesBetween(d,e,a=>{g.push(...a.marks)});let h=g.find(a=>a.type.name===c.name);return h?{...h.attrs}:{}}function r1(a,b){let c=new nA(a);return b.forEach(a=>{a.steps.forEach(a=>{c.step(a)})}),c}function r2(a){return b=>(function(a,b){for(let c=a.depth;c>0;c-=1){let d=a.node(c);if(b(d))return{pos:c>0?a.before(c):0,start:a.start(c),depth:c,node:d}}})(b.$from,a)}function r3(a,b,c){return void 0===a.config[b]&&a.parent?r3(a.parent,b,c):"function"==typeof a.config[b]?a.config[b].bind({...c,parent:a.parent?r3(a.parent,b,c):null}):a.config[b]}function r4(a){return a.map(a=>{let b={name:a.name,options:a.options,storage:a.storage},c=r3(a,"addExtensions",b);return c?[a,...r4(c())]:a}).flat(10)}function r5(a,b){let c=mX.fromSchema(b).serializeFragment(a),d=document.implementation.createHTMLDocument().createElement("div");return d.appendChild(c),d.innerHTML}function r6(a){return"function"==typeof a}function r7(a,b,...c){return r6(a)?b?a.bind(b)(...c):a(...c):a}function r8(a){let b=a.filter(a=>"extension"===a.type);return{baseExtensions:b,nodeExtensions:a.filter(a=>"node"===a.type),markExtensions:a.filter(a=>"mark"===a.type)}}function r9(a){let b=[],{nodeExtensions:c,markExtensions:d}=r8(a),e=[...c,...d],f={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return a.forEach(a=>{let c={name:a.name,options:a.options,storage:a.storage,extensions:e},d=r3(a,"addGlobalAttributes",c);d&&d().forEach(a=>{a.types.forEach(c=>{Object.entries(a.attributes).forEach(([a,d])=>{b.push({type:c,name:a,attribute:{...f,...d}})})})})}),e.forEach(a=>{let c={name:a.name,options:a.options,storage:a.storage},d=r3(a,"addAttributes",c);d&&Object.entries(d()).forEach(([c,d])=>{let e={...f,...d};"function"==typeof(null==e?void 0:e.default)&&(e.default=e.default()),(null==e?void 0:e.isRequired)&&(null==e?void 0:e.default)===void 0&&delete e.default,b.push({type:a.name,name:c,attribute:e})})}),b}function sa(...a){return a.filter(a=>!!a).reduce((a,b)=>{let c={...a};return Object.entries(b).forEach(([a,b])=>{if(!c[a]){c[a]=b;return}if("class"===a){let d=b?String(b).split(" "):[],e=c[a]?c[a].split(" "):[],f=d.filter(a=>!e.includes(a));c[a]=[...e,...f].join(" ")}else if("style"===a){let d=b?b.split(";").map(a=>a.trim()).filter(Boolean):[],e=c[a]?c[a].split(";").map(a=>a.trim()).filter(Boolean):[],f=new Map;e.forEach(a=>{let[b,c]=a.split(":").map(a=>a.trim());f.set(b,c)}),d.forEach(a=>{let[b,c]=a.split(":").map(a=>a.trim());f.set(b,c)}),c[a]=Array.from(f.entries()).map(([a,b])=>`${a}: ${b}`).join("; ")}else c[a]=b}),c},{})}function sb(a,b){return b.filter(b=>b.type===a.type.name).filter(a=>a.attribute.rendered).map(b=>b.attribute.renderHTML?b.attribute.renderHTML(a.attrs)||{}:{[b.name]:a.attrs[b.name]}).reduce((a,b)=>sa(a,b),{})}function sc(a,b){return"style"in a?a:{...a,getAttrs:c=>{let d=a.getAttrs?a.getAttrs(c):a.attrs;if(!1===d)return!1;let e=b.reduce((a,b)=>{var d;let e=b.attribute.parseHTML?b.attribute.parseHTML(c):"string"!=typeof(d=c.getAttribute(b.name))?d:d.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(d):"true"===d||"false"!==d&&d;return null==e?a:{...a,[b.name]:e}},{});return{...d,...e}}}}function sd(a){return Object.fromEntries(Object.entries(a).filter(([a,b])=>!("attrs"===a&&function(a={}){return 0===Object.keys(a).length&&a.constructor===Object}(b))&&null!=b))}function se(a){var b,c;let d={};return!(null==(b=null==a?void 0:a.attribute)?void 0:b.isRequired)&&"default"in((null==a?void 0:a.attribute)||{})&&(d.default=a.attribute.default),(null==(c=null==a?void 0:a.attribute)?void 0:c.validate)!==void 0&&(d.validate=a.attribute.validate),[a.name,d]}function sf(a){return a.sort((a,b)=>{let c=r3(a,"priority")||100,d=r3(b,"priority")||100;return c>d?-1:+(c<d)})}function sg(a){var b;let c=sf(r4(a)),d=Array.from(new Set((b=c.map(a=>a.name)).filter((a,c)=>b.indexOf(a)!==c)));return d.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${d.map(a=>`'${a}'`).join(", ")}]. This can lead to issues.`),c}function sh(a,b,c){let{from:d,to:e}=b,{blockSeparator:f="\n\n",textSerializers:g={}}=c||{},h="";return a.nodesBetween(d,e,(a,c,i,j)=>{var k;a.isBlock&&c>d&&(h+=f);let l=null==g?void 0:g[a.type.name];if(l)return i&&(h+=l({node:a,pos:c,parent:i,index:j,range:b})),!1;a.isText&&(h+=null==(k=null==a?void 0:a.text)?void 0:k.slice(Math.max(d,c)-c,e-c))}),h}function si(a){return Object.fromEntries(Object.entries(a.nodes).filter(([,a])=>a.spec.toText).map(([a,b])=>[a,b.spec.toText]))}function sj(a,b){let c=rQ("string"==typeof b?b:b.name,a.schema);return"node"===c?function(a,b){let c=rd(b,a.schema),{from:d,to:e}=a.selection,f=[];a.doc.nodesBetween(d,e,a=>{f.push(a)});let g=f.reverse().find(a=>a.type.name===c.name);return g?{...g.attrs}:{}}(a,b):"mark"===c?r0(a,b):{}}function sk(a){let b,{mapping:c,steps:d}=a,e=[];return c.maps.forEach((a,b)=>{let f=[];if(a.ranges.length)a.forEach((a,b)=>{f.push({from:a,to:b})});else{let{from:a,to:c}=d[b];if(void 0===a||void 0===c)return;f.push({from:a,to:c})}f.forEach(({from:a,to:d})=>{let f=c.slice(b).map(a,-1),g=c.slice(b).map(d),h=c.invert().map(f,-1),i=c.invert().map(g);e.push({oldRange:{from:h,to:i},newRange:{from:f,to:g}})})}),1===(b=function(a,b=JSON.stringify){let c={};return a.filter(a=>{let d=b(a);return!Object.prototype.hasOwnProperty.call(c,d)&&(c[d]=!0)})}(e)).length?b:b.filter((a,c)=>!b.filter((a,b)=>b!==c).some(b=>a.oldRange.from>=b.oldRange.from&&a.oldRange.to<=b.oldRange.to&&a.newRange.from>=b.newRange.from&&a.newRange.to<=b.newRange.to))}function sl(a,b,c){let d=[];return a===b?c.resolve(a).marks().forEach(b=>{let e=rn(c.resolve(a),b.type);e&&d.push({mark:b,...e})}):c.nodesBetween(a,b,(a,b)=>{a&&(null==a?void 0:a.nodeSize)!==void 0&&d.push(...a.marks.map(c=>({from:b,to:b+a.nodeSize,mark:c})))}),d}function sm(a,b){return b.nodes[a]||b.marks[a]||null}function sn(a,b,c){return Object.fromEntries(Object.entries(c).filter(([c])=>{let d=a.find(a=>a.type===b&&a.name===c);return!!d&&d.attribute.keepOnSplit}))}function so(a,b,c={}){let{empty:d,ranges:e}=a.selection,f=b?ro(b,a.schema):null;if(d)return!!(a.storedMarks||a.selection.$from.marks()).filter(a=>!f||f.name===a.type.name).find(a=>rk(a.attrs,c,{strict:!1}));let g=0,h=[];if(e.forEach(({$from:b,$to:c})=>{let d=b.pos,e=c.pos;a.doc.nodesBetween(d,e,(a,b)=>{if(!a.isText&&!a.marks.length)return;let c=Math.max(d,b),f=Math.min(e,b+a.nodeSize);g+=f-c,h.push(...a.marks.map(a=>({mark:a,from:c,to:f})))})}),0===g)return!1;let i=h.filter(a=>!f||f.name===a.mark.type.name).filter(a=>rk(a.mark.attrs,c,{strict:!1})).reduce((a,b)=>a+b.to-b.from,0),j=h.filter(a=>!f||a.mark.type!==f&&a.mark.type.excludes(f)).reduce((a,b)=>a+b.to-b.from,0);return(i>0?i+j:i)>=g}function sp(a,b){return Array.isArray(b)?b.some(b=>("string"==typeof b?b:b.name)===a.name):b}function sq(a,b){let{nodeExtensions:c}=r8(b),d=c.find(b=>b.name===a);if(!d)return!1;let e={name:d.name,options:d.options,storage:d.storage},f=r7(r3(d,"group",e));return"string"==typeof f&&f.split(" ").includes("list")}function sr(a,{checkChildren:b=!0,ignoreWhitespace:c=!1}={}){var d;if(c){if("hardBreak"===a.type.name)return!0;if(a.isText)return/^\s*$/m.test(null!=(d=a.text)?d:"")}if(a.isText)return!a.text;if(a.isAtom||a.isLeaf)return!1;if(0===a.content.childCount)return!0;if(b){let d=!0;return a.content.forEach(a=>{!1!==d&&(sr(a,{ignoreWhitespace:c,checkChildren:b})||(d=!1))}),d}return!1}function ss(a){return a instanceof nI}var st=(a,b={})=>({tr:c,state:d,dispatch:e})=>{let{selection:f}=c,{empty:g,ranges:h}=f,i=ro(a,d.schema);if(e)if(g){let a=r0(d,i);c.addStoredMark(i.create({...a,...b}))}else h.forEach(a=>{let e=a.$from.pos,f=a.$to.pos;d.doc.nodesBetween(e,f,(a,d)=>{let g=Math.max(d,e),h=Math.min(d+a.nodeSize,f);a.marks.find(a=>a.type===i)?a.marks.forEach(a=>{i===a.type&&c.addMark(g,h,i.create({...a.attrs,...b}))}):c.addMark(g,h,i.create(b))})});return function(a,b,c){var d;let{selection:e}=b,f=null;if(rr(e)&&(f=e.$cursor),f){let b=null!=(d=a.storedMarks)?d:f.marks();return f.parent.type.allowsMarkType(c)&&(!!c.isInSet(b)||!b.some(a=>a.type.excludes(c)))}let{ranges:g}=e;return g.some(({$from:b,$to:d})=>{let e=0===b.depth&&a.doc.inlineContent&&a.doc.type.allowsMarkType(c);return a.doc.nodesBetween(b.pos,d.pos,(a,b,d)=>{if(e)return!1;if(a.isInline){let b=!d||d.type.allowsMarkType(c),f=!!c.isInSet(a.marks)||!a.marks.some(a=>a.type.excludes(c));e=b&&f}return!e}),e})}(d,c,i)},su=(a,b)=>({tr:c})=>(c.setMeta(a,b),!0),sv=(a,b={})=>({state:c,dispatch:d,chain:e})=>{let f,g=rd(a,c.schema);return(c.selection.$anchor.sameParent(c.selection.$head)&&(f=c.selection.$anchor.parent.attrs),g.isTextblock)?e().command(({commands:a})=>!!og(g,{...f,...b})(c)||a.clearNodes()).command(({state:a})=>og(g,{...f,...b})(a,d)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},sw=a=>({tr:b,dispatch:c})=>{if(c){let{doc:c}=b,d=rs(a,0,c.content.size),e=nI.create(c,d);b.setSelection(e)}return!0},sx=(a,b)=>({tr:c,state:d,dispatch:e})=>{let f,g,{selection:h}=d;return"number"==typeof b?(f=b,g=b):b&&"from"in b&&"to"in b?(f=b.from,g=b.to):(f=h.from,g=h.to),e&&c.doc.nodesBetween(f,g,(b,d)=>{b.isText||c.setNodeMarkup(d,void 0,{...b.attrs,dir:a})}),!0},sy=a=>({tr:b,dispatch:c})=>{if(c){let{doc:c}=b,{from:d,to:e}="number"==typeof a?{from:a,to:a}:a,f=nG.atStart(c).from,g=nG.atEnd(c).to,h=rs(d,f,g),i=rs(e,f,g),j=nG.create(c,h,i);b.setSelection(j)}return!0},sz=a=>({state:b,dispatch:c})=>{var d;return(d=rd(a,b.schema),function(a,b){let{$from:c,$to:e}=a.selection,f=c.blockRange(e,a=>a.childCount>0&&a.firstChild.type==d);if(!f)return!1;let g=f.startIndex;if(0==g)return!1;let h=f.parent,i=h.child(g-1);if(i.type!=d)return!1;if(b){let c=i.lastChild&&i.lastChild.type==h.type,e=me.from(c?d.create():null),g=new mk(me.from(d.create(null,me.from(h.type.create(null,e)))),c?3:1,0),j=f.start,k=f.end;b(a.tr.step(new nc(j-(c?3:1),k,j,k,g,1,!0)).scrollIntoView())}return!0})(b,c)};function sA(a,b){let c=a.storedMarks||a.selection.$to.parentOffset&&a.selection.$from.marks();if(c){let d=c.filter(a=>null==b?void 0:b.includes(a.type.name));a.tr.ensureMarks(d)}}var sB=({keepMarks:a=!0}={})=>({tr:b,state:c,dispatch:d,editor:e})=>{let{selection:f,doc:g}=b,{$from:h,$to:i}=f,j=sn(e.extensionManager.attributes,h.node().type.name,h.node().attrs);if(f instanceof nI&&f.node.isBlock)return!!h.parentOffset&&!!nk(g,h.pos)&&(d&&(a&&sA(c,e.extensionManager.splittableMarks),b.split(h.pos).scrollIntoView()),!0);if(!h.parent.isBlock)return!1;let k=i.parentOffset===i.parent.content.size,l=0===h.depth?void 0:function(a){for(let b=0;b<a.edgeCount;b+=1){let{type:c}=a.edge(b);if(c.isTextblock&&!c.hasRequiredAttrs())return c}return null}(h.node(-1).contentMatchAt(h.indexAfter(-1))),m=k&&l?[{type:l,attrs:j}]:void 0,n=nk(b.doc,b.mapping.map(h.pos),1,m);if(!m&&!n&&nk(b.doc,b.mapping.map(h.pos),1,l?[{type:l}]:void 0)&&(n=!0,m=l?[{type:l,attrs:j}]:void 0),d){if(n&&(f instanceof nG&&b.deleteSelection(),b.split(b.mapping.map(h.pos),1,m),l&&!k&&!h.parentOffset&&h.parent.type!==l)){let a=b.mapping.map(h.before()),c=b.doc.resolve(a);h.node(-1).canReplaceWith(c.index(),c.index()+1,l)&&b.setNodeMarkup(b.mapping.map(h.before()),l)}a&&sA(c,e.extensionManager.splittableMarks),b.scrollIntoView()}return n},sC=(a,b={})=>({tr:c,state:d,dispatch:e,editor:f})=>{var g;let h=rd(a,d.schema),{$from:i,$to:j}=d.selection,k=d.selection.node;if(k&&k.isBlock||i.depth<2||!i.sameParent(j))return!1;let l=i.node(-1);if(l.type!==h)return!1;let m=f.extensionManager.attributes;if(0===i.parent.content.size&&i.node(-1).childCount===i.indexAfter(-1)){if(2===i.depth||i.node(-3).type!==h||i.index(-2)!==i.node(-2).childCount-1)return!1;if(e){let a=me.empty,d=i.index(-1)?1:i.index(-2)?2:3;for(let b=i.depth-d;b>=i.depth-3;b-=1)a=me.from(i.node(b).copy(a));let e=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3,f={...sn(m,i.node().type.name,i.node().attrs),...b},j=(null==(g=h.contentMatch.defaultType)?void 0:g.createAndFill(f))||void 0;a=a.append(me.from(h.createAndFill(null,j)||void 0));let k=i.before(i.depth-(d-1));c.replace(k,i.after(-e),new mk(a,4-d,0));let l=-1;c.doc.nodesBetween(k,c.doc.content.size,(a,b)=>{if(l>-1)return!1;a.isTextblock&&0===a.content.size&&(l=b+1)}),l>-1&&c.setSelection(nG.near(c.doc.resolve(l))),c.scrollIntoView()}return!0}let n=j.pos===i.end()?l.contentMatchAt(0).defaultType:null,o={...sn(m,l.type.name,l.attrs),...b},p={...sn(m,i.node().type.name,i.node().attrs),...b};c.delete(i.pos,j.pos);let q=n?[{type:h,attrs:o},{type:n,attrs:p}]:[{type:h,attrs:o}];if(!nk(c.doc,i.pos,2))return!1;if(e){let{selection:a,storedMarks:b}=d,{splittableMarks:g}=f.extensionManager,h=b||a.$to.parentOffset&&a.$from.marks();if(c.split(i.pos,2,q).scrollIntoView(),!h||!e)return!0;let j=h.filter(a=>g.includes(a.type.name));c.ensureMarks(j)}return!0},sD=(a,b)=>{let c=r2(a=>a.type===b)(a.selection);if(!c)return!0;let d=a.doc.resolve(Math.max(0,c.pos-1)).before(c.depth);if(void 0===d)return!0;let e=a.doc.nodeAt(d);return!(c.node.type===(null==e?void 0:e.type)&&nl(a.doc,c.pos))||(a.join(c.pos),!0)},sE=(a,b)=>{let c=r2(a=>a.type===b)(a.selection);if(!c)return!0;let d=a.doc.resolve(c.start).after(c.depth);if(void 0===d)return!0;let e=a.doc.nodeAt(d);return!(c.node.type===(null==e?void 0:e.type)&&nl(a.doc,d))||(a.join(d),!0)},sF=(a,b,c,d={})=>({editor:e,tr:f,state:g,dispatch:h,chain:i,commands:j,can:k})=>{let{extensions:l,splittableMarks:m}=e.extensionManager,n=rd(a,g.schema),o=rd(b,g.schema),{selection:p,storedMarks:q}=g,{$from:r,$to:s}=p,t=r.blockRange(s),u=q||p.$to.parentOffset&&p.$from.marks();if(!t)return!1;let v=r2(a=>sq(a.type.name,l))(p);if(t.depth>=1&&v&&t.depth-v.depth<=1){if(v.node.type===n)return j.liftListItem(o);if(sq(v.node.type.name,l)&&n.validContent(v.node.content)&&h)return i().command(()=>(f.setNodeMarkup(v.pos,n),!0)).command(()=>sD(f,n)).command(()=>sE(f,n)).run()}return c&&u&&h?i().command(()=>{let a=k().wrapInList(n,d),b=u.filter(a=>m.includes(a.type.name));return f.ensureMarks(b),!!a||j.clearNodes()}).wrapInList(n,d).command(()=>sD(f,n)).command(()=>sE(f,n)).run():i().command(()=>!!k().wrapInList(n,d)||j.clearNodes()).wrapInList(n,d).command(()=>sD(f,n)).command(()=>sE(f,n)).run()},sG=(a,b={},c={})=>({state:d,commands:e})=>{let{extendEmptyMarkRange:f=!1}=c,g=ro(a,d.schema);return so(d,g,b)?e.unsetMark(g,{extendEmptyMarkRange:f}):e.setMark(g,b)},sH=(a,b,c={})=>({state:d,commands:e})=>{let f,g=rd(a,d.schema),h=rd(b,d.schema),i=rL(d,g,c);return(d.selection.$anchor.sameParent(d.selection.$head)&&(f=d.selection.$anchor.parent.attrs),i)?e.setNode(h,f):e.setNode(g,{...f,...c})},sI=(a,b={})=>({state:c,commands:d})=>{let e=rd(a,c.schema);return rL(c,e,b)?d.lift(e):d.wrapIn(e,b)},sJ=()=>({state:a,dispatch:b})=>{let c=a.plugins;for(let d=0;d<c.length;d+=1){let e,f=c[d];if(f.spec.isInputRules&&(e=f.getState(a))){if(b){let b=a.tr,c=e.transform;for(let a=c.steps.length-1;a>=0;a-=1)b.step(c.steps[a].invert(c.docs[a]));if(e.text){let c=b.doc.resolve(e.from).marks();b.replaceWith(e.from,e.to,a.schema.text(e.text,c))}else b.delete(e.from,e.to)}return!0}}return!1},sK=()=>({tr:a,dispatch:b})=>{let{selection:c}=a,{empty:d,ranges:e}=c;return!!d||(b&&e.forEach(b=>{a.removeMark(b.$from.pos,b.$to.pos)}),!0)},sL=(a,b={})=>({tr:c,state:d,dispatch:e})=>{var f;let{extendEmptyMarkRange:g=!1}=b,{selection:h}=c,i=ro(a,d.schema),{$from:j,empty:k,ranges:l}=h;if(!e)return!0;if(k&&g){let{from:a,to:b}=h,d=null==(f=j.marks().find(a=>a.type===i))?void 0:f.attrs,e=rn(j,i,d);e&&(a=e.from,b=e.to),c.removeMark(a,b,i)}else l.forEach(a=>{c.removeMark(a.$from.pos,a.$to.pos,i)});return c.removeStoredMark(i),!0},sM=a=>({tr:b,state:c,dispatch:d})=>{let e,f,{selection:g}=c;return"number"==typeof a?(e=a,f=a):a&&"from"in a&&"to"in a?(e=a.from,f=a.to):(e=g.from,f=g.to),d&&b.doc.nodesBetween(e,f,(a,c)=>{if(a.isText)return;let d={...a.attrs};delete d.dir,b.setNodeMarkup(c,void 0,d)}),!0},sN=(a,b={})=>({tr:c,state:d,dispatch:e})=>{let f=null,g=null,h=rQ("string"==typeof a?a:a.name,d.schema);if(!h)return!1;"node"===h&&(f=rd(a,d.schema)),"mark"===h&&(g=ro(a,d.schema));let i=!1;return c.selection.ranges.forEach(a=>{let h,j,k,l,m=a.$from.pos,n=a.$to.pos;c.selection.empty?d.doc.nodesBetween(m,n,(a,b)=>{f&&f===a.type&&(i=!0,k=Math.max(b,m),l=Math.min(b+a.nodeSize,n),h=b,j=a)}):d.doc.nodesBetween(m,n,(a,d)=>{d<m&&f&&f===a.type&&(i=!0,k=Math.max(d,m),l=Math.min(d+a.nodeSize,n),h=d,j=a),d>=m&&d<=n&&(f&&f===a.type&&(i=!0,e&&c.setNodeMarkup(d,void 0,{...a.attrs,...b})),g&&a.marks.length&&a.marks.forEach(f=>{if(g===f.type&&(i=!0,e)){let e=Math.max(d,m),h=Math.min(d+a.nodeSize,n);c.addMark(e,h,g.create({...f.attrs,...b}))}}))}),j&&(void 0!==h&&e&&c.setNodeMarkup(h,void 0,{...j.attrs,...b}),g&&j.marks.length&&j.marks.forEach(a=>{g===a.type&&e&&c.addMark(k,l,g.create({...a.attrs,...b}))}))}),i},sO=(a,b={})=>({state:c,dispatch:d})=>(function(a,b=null){return function(c,d){let{$from:e,$to:f}=c.selection,g=e.blockRange(f),h=g&&ng(g,a,b);return!!h&&(d&&d(c.tr.wrap(g,h).scrollIntoView()),!0)}})(rd(a,c.schema),b)(c,d),sP=(a,b={})=>({state:c,dispatch:d})=>(function(a,b=null){return function(c,d){let{$from:e,$to:f}=c.selection,g=e.blockRange(f);if(!g)return!1;let h=d?c.tr:null;return!!function(a,b,c,d=null){let e=!1,f=b,g=b.$from.doc;if(b.depth>=2&&b.$from.node(b.depth-1).type.compatibleContent(c)&&0==b.startIndex){if(0==b.$from.index(b.depth-1))return!1;let a=g.resolve(b.start-2);f=new mv(a,a,b.depth),b.endIndex<b.parent.childCount&&(b=new mv(b.$from,g.resolve(b.$to.end(b.depth)),b.depth)),e=!0}let h=ng(f,c,d,b);return!!h&&(a&&function(a,b,c,d,e){let f=me.empty;for(let a=c.length-1;a>=0;a--)f=me.from(c[a].type.create(c[a].attrs,f));a.step(new nc(b.start-2*!!d,b.end,b.start,b.end,new mk(f,0,0),c.length,!0));let g=0;for(let a=0;a<c.length;a++)c[a].type==e&&(g=a+1);let h=c.length-g,i=b.start+c.length-2*!!d,j=b.parent;for(let c=b.startIndex,d=b.endIndex,e=!0;c<d;c++,e=!1)!e&&nk(a.doc,i,h)&&(a.split(i,h),i+=2*h),i+=j.child(c).nodeSize}(a,b,h,e,c),!0)}(h,g,a,b)&&(d&&d(h.scrollIntoView()),!0)}})(rd(a,c.schema),b)(c,d),sQ=class{constructor(){this.callbacks={}}on(a,b){return this.callbacks[a]||(this.callbacks[a]=[]),this.callbacks[a].push(b),this}emit(a,...b){let c=this.callbacks[a];return c&&c.forEach(a=>a.apply(this,b)),this}off(a,b){let c=this.callbacks[a];return c&&(b?this.callbacks[a]=c.filter(a=>a!==b):delete this.callbacks[a]),this}once(a,b){let c=(...d)=>{this.off(a,c),b.apply(this,d)};return this.on(a,c)}removeAllListeners(){this.callbacks={}}},sR=class{constructor(a){var b;this.find=a.find,this.handler=a.handler,this.undoable=null==(b=a.undoable)||b}};function sS(a){var b;let{editor:c,from:d,to:e,text:f,rules:g,plugin:h}=a,{view:i}=c;if(i.composing)return!1;let j=i.state.doc.resolve(d);if(j.parent.type.spec.code||(null==(b=j.nodeBefore||j.nodeAfter)?void 0:b.marks.find(a=>a.type.spec.code)))return!1;let k=!1,l=((a,b=500)=>{let c="",d=a.parentOffset;return a.parent.nodesBetween(Math.max(0,d-b),d,(a,b,e,f)=>{var g,h;let i=(null==(h=(g=a.type.spec).toText)?void 0:h.call(g,{node:a,pos:b,parent:e,index:f}))||a.textContent||"%leaf%";c+=a.isAtom&&!a.isText?i:i.slice(0,Math.max(0,d-b))}),c})(j)+f;return g.forEach(a=>{if(k)return;let b=((a,b)=>{if(rj(b))return b.exec(a);let c=b(a);if(!c)return null;let d=[c.text];return d.index=c.index,d.input=a,d.data=c.data,c.replaceWith&&(c.text.includes(c.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),d.push(c.replaceWith)),d})(l,a.find);if(!b)return;let g=i.state.tr,j=q3({state:i.state,transaction:g}),m={from:d-(b[0].length-f.length),to:e},{commands:n,chain:o,can:p}=new q4({editor:c,state:j});null!==a.handler({state:j,range:m,match:b,commands:n,chain:o,can:p})&&g.steps.length&&(a.undoable&&g.setMeta(h,{transform:g,from:d,to:e,text:f}),i.dispatch(g),k=!0)}),k}function sT(a){return"Object"===Object.prototype.toString.call(a).slice(8,-1)&&a.constructor===Object&&Object.getPrototypeOf(a)===Object.prototype}var sU=class{constructor(a={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...a},this.name=this.config.name}get options(){return{...r7(r3(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...r7(r3(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(a={}){let b=this.extend({...this.config,addOptions:()=>(function a(b,c){let d={...b};return sT(b)&&sT(c)&&Object.keys(c).forEach(e=>{sT(c[e])&&sT(b[e])?d[e]=a(b[e],c[e]):d[e]=c[e]}),d})(this.options,a)});return b.name=this.name,b.parent=this.parent,b}extend(a={}){let b=new this.constructor({...this.config,...a});return b.parent=this,this.child=b,b.name="name"in a?a.name:b.parent.name,b}},sV=class a extends sU{constructor(){super(...arguments),this.type="mark"}static create(b={}){return new a("function"==typeof b?b():b)}static handleExit({editor:a,mark:b}){let{tr:c}=a.state,d=a.state.selection.$from;if(d.pos===d.end()){let e=d.marks();if(!e.find(a=>(null==a?void 0:a.type.name)===b.name))return!1;let f=e.find(a=>(null==a?void 0:a.type.name)===b.name);return f&&c.removeStoredMark(f),c.insertText(" ",d.pos),a.view.dispatch(c),!0}return!1}configure(a){return super.configure(a)}extend(a){let b="function"==typeof a?a():a;return super.extend(b)}},sW=class{constructor(a){this.find=a.find,this.handler=a.handler}},sX=null,sY=class{constructor(a,b){this.splittableMarks=[],this.editor=b,this.baseExtensions=a,this.extensions=sg(a),this.schema=function(a,b){var c;let d=r9(a),{nodeExtensions:e,markExtensions:f}=r8(a),g=null==(c=e.find(a=>r3(a,"topNode")))?void 0:c.name;return new mM({topNode:g,nodes:Object.fromEntries(e.map(c=>{let e=d.filter(a=>a.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:b},g=sd({...a.reduce((a,b)=>{let d=r3(b,"extendNodeSchema",f);return{...a,...d?d(c):{}}},{}),content:r7(r3(c,"content",f)),marks:r7(r3(c,"marks",f)),group:r7(r3(c,"group",f)),inline:r7(r3(c,"inline",f)),atom:r7(r3(c,"atom",f)),selectable:r7(r3(c,"selectable",f)),draggable:r7(r3(c,"draggable",f)),code:r7(r3(c,"code",f)),whitespace:r7(r3(c,"whitespace",f)),linebreakReplacement:r7(r3(c,"linebreakReplacement",f)),defining:r7(r3(c,"defining",f)),isolating:r7(r3(c,"isolating",f)),attrs:Object.fromEntries(e.map(se))}),h=r7(r3(c,"parseHTML",f));h&&(g.parseDOM=h.map(a=>sc(a,e)));let i=r3(c,"renderHTML",f);i&&(g.toDOM=a=>i({node:a,HTMLAttributes:sb(a,e)}));let j=r3(c,"renderText",f);return j&&(g.toText=j),[c.name,g]})),marks:Object.fromEntries(f.map(c=>{let e=d.filter(a=>a.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:b},g=sd({...a.reduce((a,b)=>{let d=r3(b,"extendMarkSchema",f);return{...a,...d?d(c):{}}},{}),inclusive:r7(r3(c,"inclusive",f)),excludes:r7(r3(c,"excludes",f)),group:r7(r3(c,"group",f)),spanning:r7(r3(c,"spanning",f)),code:r7(r3(c,"code",f)),attrs:Object.fromEntries(e.map(se))}),h=r7(r3(c,"parseHTML",f));h&&(g.parseDOM=h.map(a=>sc(a,e)));let i=r3(c,"renderHTML",f);return i&&(g.toDOM=a=>i({mark:a,HTMLAttributes:sb(a,e)})),[c.name,g]}))})}(this.extensions,b),this.setupExtensions()}get commands(){return this.extensions.reduce((a,b)=>{let c={name:b.name,options:b.options,storage:this.editor.extensionStorage[b.name],editor:this.editor,type:sm(b.name,this.schema)},d=r3(b,"addCommands",c);return d?{...a,...d()}:a},{})}get plugins(){let{editor:a}=this;return sf([...this.extensions].reverse()).flatMap(b=>{let c={name:b.name,options:b.options,storage:this.editor.extensionStorage[b.name],editor:a,type:sm(b.name,this.schema)},d=[],e=r3(b,"addKeyboardShortcuts",c),f={};if("mark"===b.type&&r3(b,"exitable",c)&&(f.ArrowRight=()=>sV.handleExit({editor:a,mark:b})),e){let b=Object.fromEntries(Object.entries(e()).map(([b,c])=>[b,()=>c({editor:a})]));f={...f,...b}}let g=new nU({props:{handleKeyDown:q0(f)}});d.push(g);let h=r3(b,"addInputRules",c);if(sp(b,a.options.enableInputRules)&&h){let b=h();if(b&&b.length){let c=function(a){let{editor:b,rules:c}=a,d=new nU({state:{init:()=>null,apply(a,e,f){let g=a.getMeta(d);if(g)return g;let h=a.getMeta("applyInputRules");return h&&setTimeout(()=>{let{text:a}=h;"string"==typeof a||(a=r5(me.from(a),f.schema));let{from:e}=h,g=e+a.length;sS({editor:b,from:e,to:g,text:a,rules:c,plugin:d})}),a.selectionSet||a.docChanged?null:e}},props:{handleTextInput:(a,e,f,g)=>sS({editor:b,from:e,to:f,text:g,rules:c,plugin:d}),handleDOMEvents:{compositionend:a=>(setTimeout(()=>{let{$cursor:e}=a.state.selection;e&&sS({editor:b,from:e.pos,to:e.pos,text:"",rules:c,plugin:d})}),!1)},handleKeyDown(a,e){if("Enter"!==e.key)return!1;let{$cursor:f}=a.state.selection;return!!f&&sS({editor:b,from:f.pos,to:f.pos,text:"\n",rules:c,plugin:d})}},isInputRules:!0});return d}({editor:a,rules:b}),e=Array.isArray(c)?c:[c];d.push(...e)}}let i=r3(b,"addPasteRules",c);if(sp(b,a.options.enablePasteRules)&&i){let b=i();if(b&&b.length){let c=function(a){let b,{editor:c,rules:d}=a,e=null,f=!1,g=!1,h="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{b="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{b=null}let i=({state:a,from:d,to:e,rule:f,pasteEvt:g})=>{let i=a.tr;if(function(a){let{editor:b,state:c,from:d,to:e,rule:f,pasteEvent:g,dropEvent:h}=a,{commands:i,chain:j,can:k}=new q4({editor:b,state:c}),l=[];return c.doc.nodesBetween(d,e,(a,b)=>{var m,n,o,p,q;if((null==(n=null==(m=a.type)?void 0:m.spec)?void 0:n.code)||!(a.isText||a.isTextblock||a.isInline))return;let r=null!=(q=null!=(p=null==(o=a.content)?void 0:o.size)?p:a.nodeSize)?q:0,s=Math.max(d,b),t=Math.min(e,b+r);s>=t||((a,b,c)=>{if(rj(b))return[...a.matchAll(b)];let d=b(a,c);return d?d.map(b=>{let c=[b.text];return c.index=b.index,c.input=a,c.data=b.data,b.replaceWith&&(b.text.includes(b.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),c.push(b.replaceWith)),c}):[]})(a.isText?a.text||"":a.textBetween(s-b,t-b,void 0,"ï¿¼"),f.find,g).forEach(a=>{if(void 0===a.index)return;let b=s+a.index+1,d=b+a[0].length,e={from:c.tr.mapping.map(b),to:c.tr.mapping.map(d)},m=f.handler({state:c,range:e,match:a,commands:i,chain:j,can:k,pasteEvent:g,dropEvent:h});l.push(m)})}),l.every(a=>null!==a)}({editor:c,state:q3({state:a,transaction:i}),from:Math.max(d-1,0),to:e.b-1,rule:f,pasteEvent:g,dropEvent:b})&&i.steps.length){try{b="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{b=null}return h="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,i}};return d.map(a=>new nU({view(a){let b=b=>{var d;(e=(null==(d=a.dom.parentElement)?void 0:d.contains(b.target))?a.dom.parentElement:null)&&(sX=c)},d=()=>{sX&&(sX=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",d),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",d)}}},props:{handleDOMEvents:{drop:(a,c)=>{if(g=e===a.dom.parentElement,b=c,!g){let a=sX;(null==a?void 0:a.isEditable)&&setTimeout(()=>{let b=a.state.selection;b&&a.commands.deleteRange({from:b.from,to:b.to})},10)}return!1},paste:(a,b)=>{var c;let d=null==(c=b.clipboardData)?void 0:c.getData("text/html");return h=b,f=!!(null==d?void 0:d.includes("data-pm-slice")),!1}}},appendTransaction:(b,c,d)=>{let e=b[0],j="paste"===e.getMeta("uiEvent")&&!f,k="drop"===e.getMeta("uiEvent")&&!g,l=e.getMeta("applyPasteRules"),m=!!l;if(!j&&!k&&!m)return;if(m){var n,o;let b,{text:c}=l;"string"==typeof c||(c=r5(me.from(c),d.schema));let{from:e}=l,f=e+c.length;return i({rule:a,state:d,from:e,to:{b:f},pasteEvt:(n=c,null==(o=(b=new ClipboardEvent("paste",{clipboardData:new DataTransfer})).clipboardData)||o.setData("text/html",n),b)})}let p=c.doc.content.findDiffStart(d.doc.content),q=c.doc.content.findDiffEnd(d.doc.content);if("number"==typeof p&&q&&p!==q.b)return i({rule:a,state:d,from:p,to:q,pasteEvt:h})}}))}({editor:a,rules:b});d.push(...c)}}let j=r3(b,"addProseMirrorPlugins",c);if(j){let a=j();d.push(...a)}return d})}get attributes(){return r9(this.extensions)}get nodeViews(){let{editor:a}=this,{nodeExtensions:b}=r8(this.extensions);return Object.fromEntries(b.filter(a=>!!r3(a,"addNodeView")).map(b=>{let c=this.attributes.filter(a=>a.type===b.name),d={name:b.name,options:b.options,storage:this.editor.extensionStorage[b.name],editor:a,type:rd(b.name,this.schema)},e=r3(b,"addNodeView",d);if(!e)return[];let f=e();return f?[b.name,(d,e,g,h,i)=>{let j=sb(d,c);return f({node:d,view:e,getPos:g,decorations:h,innerDecorations:i,editor:a,extension:b,HTMLAttributes:j})}]:[]}))}get markViews(){let{editor:a}=this,{markExtensions:b}=r8(this.extensions);return Object.fromEntries(b.filter(a=>!!r3(a,"addMarkView")).map(b=>{let c=this.attributes.filter(a=>a.type===b.name),d={name:b.name,options:b.options,storage:this.editor.extensionStorage[b.name],editor:a,type:ro(b.name,this.schema)},e=r3(b,"addMarkView",d);return e?[b.name,(d,f,g)=>{let h=sb(d,c);return e()({mark:d,view:f,inline:g,editor:a,extension:b,HTMLAttributes:h,updateAttributes:b=>{!function(a,b,c={}){let{state:d}=b,{doc:e,tr:f}=d;e.descendants((b,d)=>{let e=f.mapping.map(d),g=f.mapping.map(d)+b.nodeSize,h=null;if(b.marks.forEach(b=>{if(b!==a)return!1;h=b}),!h)return;let i=!1;if(Object.keys(c).forEach(a=>{c[a]!==h.attrs[a]&&(i=!0)}),i){let b=a.type.create({...a.attrs,...c});f.removeMark(e,g,a.type),f.addMark(e,g,b)}}),f.docChanged&&b.view.dispatch(f)}(d,a,b)}})}]:[]}))}setupExtensions(){let a=this.extensions;this.editor.extensionStorage=Object.fromEntries(a.map(a=>[a.name,a.storage])),a.forEach(a=>{var b;let c={name:a.name,options:a.options,storage:this.editor.extensionStorage[a.name],editor:this.editor,type:sm(a.name,this.schema)};"mark"===a.type&&(null==(b=r7(r3(a,"keepOnSplit",c)))||b)&&this.splittableMarks.push(a.name);let d=r3(a,"onBeforeCreate",c),e=r3(a,"onCreate",c),f=r3(a,"onUpdate",c),g=r3(a,"onSelectionUpdate",c),h=r3(a,"onTransaction",c),i=r3(a,"onFocus",c),j=r3(a,"onBlur",c),k=r3(a,"onDestroy",c);d&&this.editor.on("beforeCreate",d),e&&this.editor.on("create",e),f&&this.editor.on("update",f),g&&this.editor.on("selectionUpdate",g),h&&this.editor.on("transaction",h),i&&this.editor.on("focus",i),j&&this.editor.on("blur",j),k&&this.editor.on("destroy",k)})}};sY.resolve=sg,sY.sort=sf,sY.flatten=r4,q2({},{ClipboardTextSerializer:()=>s$,Commands:()=>s_,Delete:()=>s0,Drop:()=>s1,Editable:()=>s2,FocusEvents:()=>s4,Keymap:()=>s5,Paste:()=>s6,Tabindex:()=>s7,TextDirection:()=>s8,focusEventsPluginKey:()=>s3});var sZ=class a extends sU{constructor(){super(...arguments),this.type="extension"}static create(b={}){return new a("function"==typeof b?b():b)}configure(a){return super.configure(a)}extend(a){let b="function"==typeof a?a():a;return super.extend(b)}},s$=sZ.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new nU({key:new nX("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:a}=this,{state:b,schema:c}=a,{doc:d,selection:e}=b,{ranges:f}=e,g=Math.min(...f.map(a=>a.$from.pos)),h=Math.max(...f.map(a=>a.$to.pos)),i=si(c);return sh(d,{from:g,to:h},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:i})}}})]}}),s_=sZ.create({name:"commands",addCommands:()=>({...q5})}),s0=sZ.create({name:"delete",onUpdate({transaction:a,appendedTransactions:b}){var c,d,e;let f=()=>{var c,d,e,f;if(null!=(f=null==(e=null==(d=null==(c=this.editor.options.coreExtensionOptions)?void 0:c.delete)?void 0:d.filterTransaction)?void 0:e.call(d,a))?f:a.getMeta("y-sync$"))return;let g=r1(a.before,[a,...b]);sk(g).forEach(b=>{g.mapping.mapResult(b.oldRange.from).deletedAfter&&g.mapping.mapResult(b.oldRange.to).deletedBefore&&g.before.nodesBetween(b.oldRange.from,b.oldRange.to,(c,d)=>{let e=d+c.nodeSize-2,f=b.oldRange.from<=d&&e<=b.oldRange.to;this.editor.emit("delete",{type:"node",node:c,from:d,to:e,newFrom:g.mapping.map(d),newTo:g.mapping.map(e),deletedRange:b.oldRange,newRange:b.newRange,partial:!f,editor:this.editor,transaction:a,combinedTransform:g})})});let h=g.mapping;g.steps.forEach((b,c)=>{var d,e;if(b instanceof m8){let f=h.slice(c).map(b.from,-1),i=h.slice(c).map(b.to),j=h.invert().map(f,-1),k=h.invert().map(i),l=null==(d=g.doc.nodeAt(f-1))?void 0:d.marks.some(a=>a.eq(b.mark)),m=null==(e=g.doc.nodeAt(i))?void 0:e.marks.some(a=>a.eq(b.mark));this.editor.emit("delete",{type:"mark",mark:b.mark,from:b.from,to:b.to,deletedRange:{from:j,to:k},newRange:{from:f,to:i},partial:!!(m||l),editor:this.editor,transaction:a,combinedTransform:g})}})};null==(e=null==(d=null==(c=this.editor.options.coreExtensionOptions)?void 0:c.delete)?void 0:d.async)||e?setTimeout(f,0):f()}}),s1=sZ.create({name:"drop",addProseMirrorPlugins(){return[new nU({key:new nX("tiptapDrop"),props:{handleDrop:(a,b,c,d)=>{this.editor.emit("drop",{editor:this.editor,event:b,slice:c,moved:d})}}})]}}),s2=sZ.create({name:"editable",addProseMirrorPlugins(){return[new nU({key:new nX("editable"),props:{editable:()=>this.editor.options.editable}})]}}),s3=new nX("focusEvents"),s4=sZ.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:a}=this;return[new nU({key:s3,props:{handleDOMEvents:{focus:(b,c)=>{a.isFocused=!0;let d=a.state.tr.setMeta("focus",{event:c}).setMeta("addToHistory",!1);return b.dispatch(d),!1},blur:(b,c)=>{a.isFocused=!1;let d=a.state.tr.setMeta("blur",{event:c}).setMeta("addToHistory",!1);return b.dispatch(d),!1}}}})]}}),s5=sZ.create({name:"keymap",addKeyboardShortcuts(){let a=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:b})=>{let{selection:c,doc:d}=b,{empty:e,$anchor:f}=c,{pos:g,parent:h}=f,i=f.parent.isTextblock&&g>0?b.doc.resolve(g-1):f,j=i.parent.type.spec.isolating,k=f.pos-f.parentOffset,l=j&&1===i.parent.childCount?k===f.pos:nC.atStart(d).from===g;return!!e&&!!h.type.isTextblock&&!h.textContent.length&&!!l&&(!l||"paragraph"!==f.parent.type.name)&&a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),b=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),c={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:a,"Mod-Backspace":a,"Shift-Backspace":a,Delete:b,"Mod-Delete":b,"Mod-a":()=>this.editor.commands.selectAll()},d={...c},e={...c,"Ctrl-h":a,"Alt-Backspace":a,"Ctrl-d":b,"Ctrl-Alt-Backspace":b,"Alt-Delete":b,"Alt-d":b,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ru()||rJ()?e:d},addProseMirrorPlugins(){return[new nU({key:new nX("clearDocument"),appendTransaction:(a,b,c)=>{if(a.some(a=>a.getMeta("composition")))return;let d=a.some(a=>a.docChanged)&&!b.doc.eq(c.doc),e=a.some(a=>a.getMeta("preventClearDocument"));if(!d||e)return;let{empty:f,from:g,to:h}=b.selection,i=nC.atStart(b.doc).from,j=nC.atEnd(b.doc).to;if(f||g!==i||h!==j||!sr(c.doc))return;let k=c.tr,l=q3({state:c,transaction:k}),{commands:m}=new q4({editor:this.editor,state:l});if(m.clearNodes(),k.steps.length)return k}})]}}),s6=sZ.create({name:"paste",addProseMirrorPlugins(){return[new nU({key:new nX("tiptapPaste"),props:{handlePaste:(a,b,c)=>{this.editor.emit("paste",{editor:this.editor,event:b,slice:c})}}})]}}),s7=sZ.create({name:"tabindex",addProseMirrorPlugins(){return[new nU({key:new nX("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),s8=sZ.create({name:"textDirection",addOptions:()=>({direction:void 0}),addGlobalAttributes(){if(!this.options.direction)return[];let{nodeExtensions:a}=r8(this.extensions);return[{types:a.filter(a=>"text"!==a.name).map(a=>a.name),attributes:{dir:{default:this.options.direction,parseHTML:a=>{let b=a.getAttribute("dir");return b&&("ltr"===b||"rtl"===b||"auto"===b)?b:this.options.direction},renderHTML:a=>a.dir?{dir:a.dir}:{}}}}]},addProseMirrorPlugins(){return[new nU({key:new nX("textDirection"),props:{attributes:()=>{let a=this.options.direction;return a?{dir:a}:{}}}})]}}),s9=class a{constructor(a,b,c=!1,d=null){this.currentNode=null,this.actualDepth=null,this.isBlock=c,this.resolvedPos=a,this.editor=b,this.currentNode=d}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var a;return null!=(a=this.actualDepth)?a:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(a){let b=this.from,c=this.to;if(this.isBlock){if(0===this.content.size)return void console.error(`You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);b=this.from+1,c=this.to-1}this.editor.commands.insertContentAt({from:b,to:c},a)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+ +!this.node.isText}get parent(){if(0===this.depth)return null;let b=this.resolvedPos.start(this.resolvedPos.depth-1);return new a(this.resolvedPos.doc.resolve(b),this.editor)}get before(){let b=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return b.depth!==this.depth&&(b=this.resolvedPos.doc.resolve(this.from-3)),new a(b,this.editor)}get after(){let b=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return b.depth!==this.depth&&(b=this.resolvedPos.doc.resolve(this.to+3)),new a(b,this.editor)}get children(){let b=[];return this.node.content.forEach((c,d)=>{let e=c.isBlock&&!c.isTextblock,f=c.isAtom&&!c.isText,g=this.pos+d+ +!f;if(g<0||g>this.resolvedPos.doc.nodeSize-2)return;let h=this.resolvedPos.doc.resolve(g);if(!e&&h.depth<=this.depth)return;let i=new a(h,this.editor,e,e?c:null);e&&(i.actualDepth=this.depth+1),b.push(new a(h,this.editor,e,e?c:null))}),b}get firstChild(){return this.children[0]||null}get lastChild(){let a=this.children;return a[a.length-1]||null}closest(a,b={}){let c=null,d=this.parent;for(;d&&!c;){if(d.node.type.name===a)if(Object.keys(b).length>0){let a=d.node.attrs,c=Object.keys(b);for(let d=0;d<c.length;d+=1){let e=c[d];if(a[e]!==b[e])break}}else c=d;d=d.parent}return c}querySelector(a,b={}){return this.querySelectorAll(a,b,!0)[0]||null}querySelectorAll(a,b={},c=!1){let d=[];if(!this.children||0===this.children.length)return d;let e=Object.keys(b);return this.children.forEach(f=>{c&&d.length>0||(f.node.type.name===a&&e.every(a=>b[a]===f.node.attrs[a])&&d.push(f),c&&d.length>0||(d=d.concat(f.querySelectorAll(a,b,c))))}),d}setAttribute(a){let{tr:b}=this.editor.state;b.setNodeMarkup(this.from,void 0,{...this.node.attrs,...a}),this.editor.view.dispatch(b)}},ta=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`,tb=class extends sQ{constructor(a={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:"undefined"!=typeof document?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:a})=>{throw a},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(a),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:a,slice:b,moved:c})=>this.options.onDrop(a,b,c)),this.on("paste",({event:a,slice:b})=>this.options.onPaste(a,b)),this.on("delete",this.options.onDelete);const b=this.createDoc(),c=rt(b,this.options.autofocus);this.editorState=nT.create({doc:b,schema:this.schema,selection:c||void 0}),this.options.element&&this.mount(this.options.element)}mount(a){if("undefined"==typeof document)throw Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(a),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(!1!==this.options.autofocus&&null!==this.options.autofocus&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){let a=this.editorView.dom;(null==a?void 0:a.editor)&&delete a.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{"function"==typeof this.css.remove?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(a){console.warn("Failed to remove CSS element:",a)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&"undefined"!=typeof document&&(this.css=function(a,b,c){let d=document.querySelector("style[data-tiptap-style]");if(null!==d)return d;let e=document.createElement("style");return b&&e.setAttribute("nonce",b),e.setAttribute("data-tiptap-style",""),e.innerHTML=a,document.getElementsByTagName("head")[0].appendChild(e),e}(ta,this.options.injectNonce))}setOptions(a={}){this.options={...this.options,...a},this.editorView&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(a,b=!0){this.setOptions({editable:a}),b&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:a=>{this.editorState=a},dispatch:a=>{this.dispatchTransaction(a)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(a,b)=>{if(this.editorView)return this.editorView[b];if("state"===b)return this.editorState;if(b in a)return Reflect.get(a,b);throw Error(`[tiptap error]: The editor view is not available. Cannot access view['${b}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(a,b){let c=r6(b)?b(a,[...this.state.plugins]):[...this.state.plugins,a],d=this.state.reconfigure({plugins:c});return this.view.updateState(d),d}unregisterPlugin(a){if(this.isDestroyed)return;let b=this.state.plugins,c=b;if([].concat(a).forEach(a=>{let b="string"==typeof a?`${a}$`:a.key;c=c.filter(a=>!a.key.startsWith(b))}),b.length===c.length)return;let d=this.state.reconfigure({plugins:c});return this.view.updateState(d),d}createExtensionManager(){var a,b;let c=[...this.options.enableCoreExtensions?[s2,s$.configure({blockSeparator:null==(b=null==(a=this.options.coreExtensionOptions)?void 0:a.clipboardTextSerializer)?void 0:b.blockSeparator}),s_,s4,s5,s7,s1,s6,s0,s8.configure({direction:this.options.textDirection})].filter(a=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[a.name]):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(null==a?void 0:a.type));this.extensionManager=new sY(c,this)}createCommandManager(){this.commandManager=new q4({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let a;try{a=r$(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(b){if(!(b instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(b.message))throw b;this.emit("contentError",{editor:this,error:b,disableCollaboration:()=>{"collaboration"in this.storage&&"object"==typeof this.storage.collaboration&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>"collaboration"!==a.name),this.createExtensionManager()}}),a=r$(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return a}createView(a){var b;this.editorView=new qN(a,{...this.options.editorProps,attributes:{role:"textbox",...null==(b=this.options.editorProps)?void 0:b.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});let c=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(c),this.prependClass(),this.injectCSS(),this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(a){this.isCapturingTransaction=!0,a(),this.isCapturingTransaction=!1;let b=this.capturedTransaction;return this.capturedTransaction=null,b}dispatchTransaction(a){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=a;return}a.steps.forEach(a=>{var b;return null==(b=this.capturedTransaction)?void 0:b.step(a)});return}let{state:b,transactions:c}=this.state.applyTransaction(a),d=!this.state.selection.eq(b.selection),e=c.includes(a),f=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:a,nextState:b}),!e)return;this.view.updateState(b),this.emit("transaction",{editor:this,transaction:a,appendedTransactions:c.slice(1)}),d&&this.emit("selectionUpdate",{editor:this,transaction:a});let g=c.findLast(a=>a.getMeta("focus")||a.getMeta("blur")),h=null==g?void 0:g.getMeta("focus"),i=null==g?void 0:g.getMeta("blur");h&&this.emit("focus",{editor:this,event:h.event,transaction:g}),i&&this.emit("blur",{editor:this,event:i.event,transaction:g}),a.getMeta("preventUpdate")||!c.some(a=>a.docChanged)||f.doc.eq(b.doc)||this.emit("update",{editor:this,transaction:a,appendedTransactions:c.slice(1)})}getAttributes(a){return sj(this.state,a)}isActive(a,b){let c="string"==typeof a?a:null,d="string"==typeof a?b:a;return function(a,b,c={}){if(!b)return rL(a,null,c)||so(a,null,c);let d=rQ(b,a.schema);return"node"===d?rL(a,b,c):"mark"===d&&so(a,b,c)}(this.state,c,d)}getJSON(){return this.state.doc.toJSON()}getHTML(){return r5(this.state.doc.content,this.schema)}getText(a){var b,c;let d,{blockSeparator:e="\n\n",textSerializers:f={}}=a||{};return b=this.state.doc,c={blockSeparator:e,textSerializers:{...si(this.schema),...f}},d={from:0,to:b.content.size},sh(b,d,c)}get isEmpty(){return sr(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var a,b;return null==(b=null==(a=this.editorView)?void 0:a.isDestroyed)||b}$node(a,b){var c;return(null==(c=this.$doc)?void 0:c.querySelector(a,b))||null}$nodes(a,b){var c;return(null==(c=this.$doc)?void 0:c.querySelectorAll(a,b))||null}$pos(a){return new s9(this.state.doc.resolve(a),this)}get $doc(){return this.$pos(0)}};function tc(a){return new sR({find:a.find,handler:({state:b,range:c,match:d})=>{let e=r7(a.getAttributes,void 0,d);if(!1===e||null===e)return null;let{tr:f}=b,g=d[d.length-1],h=d[0];if(g){let d=h.search(/\S/),i=c.from+h.indexOf(g),j=i+g.length;if(sl(c.from,c.to,b.doc).filter(b=>b.mark.type.excluded.find(c=>c===a.type&&c!==b.mark.type)).filter(a=>a.to>i).length)return null;j<c.to&&f.delete(j,c.to),i>c.from&&f.delete(c.from+d,i);let k=c.from+d+g.length;f.addMark(c.from+d,k,a.type.create(e||{})),f.removeStoredMark(a.type)}},undoable:a.undoable})}function td(a){return new sR({find:a.find,handler:({state:b,range:c,match:d})=>{let e=r7(a.getAttributes,void 0,d)||{},{tr:f}=b,g=c.from,h=c.to,i=a.type.create(e);if(d[1]){let a=g+d[0].lastIndexOf(d[1]);a>h?a=h:h=a+d[1].length;let b=d[0][d[0].length-1];f.insertText(b,g+d[0].length-1),f.replaceWith(a,h,i)}else if(d[0]){let b=a.type.isInline?g:g-1;f.insert(b,a.type.create(e)).delete(f.mapping.map(g),f.mapping.map(h))}f.scrollIntoView()},undoable:a.undoable})}function te(a){return new sR({find:a.find,handler:({state:b,range:c,match:d})=>{let e=b.doc.resolve(c.from),f=r7(a.getAttributes,void 0,d)||{};if(!e.node(-1).canReplaceWith(e.index(-1),e.indexAfter(-1),a.type))return null;b.tr.delete(c.from,c.to).setBlockType(c.from,c.from,a.type,f)},undoable:a.undoable})}function tf(a){return new sR({find:a.find,handler:({state:b,range:c,match:d,chain:e})=>{let f=r7(a.getAttributes,void 0,d)||{},g=b.tr.delete(c.from,c.to),h=g.doc.resolve(c.from).blockRange(),i=h&&ng(h,a.type,f);if(!i)return null;if(g.wrap(h,i),a.keepMarks&&a.editor){let{selection:c,storedMarks:d}=b,{splittableMarks:e}=a.editor.extensionManager,f=d||c.$to.parentOffset&&c.$from.marks();if(f){let a=f.filter(a=>e.includes(a.type.name));g.ensureMarks(a)}}if(a.keepAttributes){let b="bulletList"===a.type.name||"orderedList"===a.type.name?"listItem":"taskList";e().updateAttributes(b,f).run()}let j=g.doc.resolve(c.from-1).nodeBefore;j&&j.type===a.type&&nl(g.doc,c.from-1)&&(!a.joinPredicate||a.joinPredicate(d,j))&&g.join(c.from-1)},undoable:a.undoable})}var tg=class{constructor(a){var b,c,d,e,f;this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.handleMouseMove=a=>{if(!this.isResizing||!this.activeHandle)return;let b=a.clientX-this.startX,c=a.clientY-this.startY;this.handleResize(b,c)},this.handleTouchMove=a=>{if(!this.isResizing||!this.activeHandle)return;let b=a.touches[0];if(!b)return;let c=b.clientX-this.startX,d=b.clientY-this.startY;this.handleResize(c,d)},this.handleMouseUp=()=>{if(!this.isResizing)return;let a=this.element.offsetWidth,b=this.element.offsetHeight;this.onCommit(a,b),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=a=>{"Shift"===a.key&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=a=>{"Shift"===a.key&&(this.isShiftKeyPressed=!1)},this.node=a.node,this.element=a.element,this.contentElement=a.contentElement,this.getPos=a.getPos,this.onResize=a.onResize,this.onCommit=a.onCommit,this.onUpdate=a.onUpdate,(null==(b=a.options)?void 0:b.min)&&(this.minSize={...this.minSize,...a.options.min}),(null==(c=a.options)?void 0:c.max)&&(this.maxSize=a.options.max),(null==(d=null==a?void 0:a.options)?void 0:d.directions)&&(this.directions=a.options.directions),(null==(e=a.options)?void 0:e.preserveAspectRatio)&&(this.preserveAspectRatio=a.options.preserveAspectRatio),(null==(f=a.options)?void 0:f.className)&&(this.classNames={container:a.options.className.container||"",wrapper:a.options.className.wrapper||"",handle:a.options.className.handle||"",resizing:a.options.className.resizing||""}),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles()}get dom(){return this.container}get contentDOM(){return this.contentElement}update(a,b,c){return a.type===this.node.type&&(this.node=a,!this.onUpdate||this.onUpdate(a,b,c))}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.container.remove()}createContainer(){let a=document.createElement("div");return a.dataset.resizeContainer="",a.dataset.node=this.node.type.name,a.style.display="flex",a.style.justifyContent="flex-start",a.style.alignItems="flex-start",this.classNames.container&&(a.className=this.classNames.container),a.appendChild(this.wrapper),a}createWrapper(){let a=document.createElement("div");return a.style.position="relative",a.style.display="block",a.dataset.resizeWrapper="",this.classNames.wrapper&&(a.className=this.classNames.wrapper),a.appendChild(this.element),a}createHandle(a){let b=document.createElement("div");return b.dataset.resizeHandle=a,b.style.position="absolute",this.classNames.handle&&(b.className=this.classNames.handle),b}positionHandle(a,b){let c=b.includes("top"),d=b.includes("bottom"),e=b.includes("left"),f=b.includes("right");c&&(a.style.top="0"),d&&(a.style.bottom="0"),e&&(a.style.left="0"),f&&(a.style.right="0"),("top"===b||"bottom"===b)&&(a.style.left="0",a.style.right="0"),("left"===b||"right"===b)&&(a.style.top="0",a.style.bottom="0")}attachHandles(){this.directions.forEach(a=>{let b=this.createHandle(a);this.positionHandle(b,a),b.addEventListener("mousedown",b=>this.handleResizeStart(b,a)),b.addEventListener("touchstart",b=>this.handleResizeStart(b,a)),this.wrapper.appendChild(b)})}applyInitialSize(){let a=this.node.attrs.width,b=this.node.attrs.height;a?(this.element.style.width=`${a}px`,this.initialWidth=a):this.initialWidth=this.element.offsetWidth,b?(this.element.style.height=`${b}px`,this.initialHeight=b):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(a,b){a.preventDefault(),a.stopPropagation(),this.isResizing=!0,this.activeHandle=b,"touches"in a?(this.startX=a.touches[0].clientX,this.startY=a.touches[0].clientY):(this.startX=a.clientX,this.startY=a.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(a,b){if(!this.activeHandle)return;let c=this.preserveAspectRatio||this.isShiftKeyPressed,{width:d,height:e}=this.calculateNewDimensions(this.activeHandle,a,b),f=this.applyConstraints(d,e,c);this.element.style.width=`${f.width}px`,this.element.style.height=`${f.height}px`,this.onResize&&this.onResize(f.width,f.height)}calculateNewDimensions(a,b,c){let d=this.startWidth,e=this.startHeight,f=a.includes("right"),g=a.includes("left"),h=a.includes("bottom"),i=a.includes("top");return(f?d=this.startWidth+b:g&&(d=this.startWidth-b),h?e=this.startHeight+c:i&&(e=this.startHeight-c),("right"===a||"left"===a)&&(d=this.startWidth+(f?b:-b)),("top"===a||"bottom"===a)&&(e=this.startHeight+(h?c:-c)),this.preserveAspectRatio||this.isShiftKeyPressed)?this.applyAspectRatio(d,e,a):{width:d,height:e}}applyConstraints(a,b,c){var d,e,f,g;if(!c){let c=Math.max(this.minSize.width,a),f=Math.max(this.minSize.height,b);return(null==(d=this.maxSize)?void 0:d.width)&&(c=Math.min(this.maxSize.width,c)),(null==(e=this.maxSize)?void 0:e.height)&&(f=Math.min(this.maxSize.height,f)),{width:c,height:f}}let h=a,i=b;return h<this.minSize.width&&(i=(h=this.minSize.width)/this.aspectRatio),i<this.minSize.height&&(h=(i=this.minSize.height)*this.aspectRatio),(null==(f=this.maxSize)?void 0:f.width)&&h>this.maxSize.width&&(i=(h=this.maxSize.width)/this.aspectRatio),(null==(g=this.maxSize)?void 0:g.height)&&i>this.maxSize.height&&(h=(i=this.maxSize.height)*this.aspectRatio),{width:h,height:i}}applyAspectRatio(a,b,c){return"left"===c||"right"===c?{width:a,height:a/this.aspectRatio}:"top"===c||"bottom"===c?{width:b*this.aspectRatio,height:b}:{width:a,height:a/this.aspectRatio}}};function th(a){if(!(null==a?void 0:a.trim()))return{};let b={},c=[],d=a.replace(/["']([^"']*)["']/g,a=>(c.push(a),`__QUOTED_${c.length-1}__`)),e=d.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);e&&(b.class=e.map(a=>a.trim().slice(1)).join(" "));let f=d.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);f&&(b.id=f[1]),Array.from(d.matchAll(/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g)).forEach(([,a,d])=>{var e;let f=c[parseInt((null==(e=d.match(/__QUOTED_(\d+)__/))?void 0:e[1])||"0",10)];f&&(b[a]=f.slice(1,-1))});let g=d.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return g&&g.split(/\s+/).filter(Boolean).forEach(a=>{a.match(/^[a-zA-Z][\w-]*$/)&&(b[a]=!0)}),b}function ti(a){if(!a||0===Object.keys(a).length)return"";let b=[];return a.class&&String(a.class).split(/\s+/).filter(Boolean).forEach(a=>b.push(`.${a}`)),a.id&&b.push(`#${a.id}`),Object.entries(a).forEach(([a,c])=>{"class"!==a&&"id"!==a&&(!0===c?b.push(a):!1!==c&&null!=c&&b.push(`${a}="${String(c)}"`))}),b.join(" ")}function tj(a){let{nodeName:b,name:c,parseAttributes:d=th,serializeAttributes:e=ti,defaultAttributes:f={},requiredAttributes:g=[],allowedAttributes:h}=a,i=c||b;return{parseMarkdown:(a,c)=>{let d={...f,...a.attributes};return c.createNode(b,d,[])},markdownTokenizer:{name:b,level:"block",start(a){var b;let c=RegExp(`^:::${i}(?:\\s|$)`,"m"),d=null==(b=a.match(c))?void 0:b.index;return void 0!==d?d:-1},tokenize(a,c,e){let f=RegExp(`^:::${i}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),h=a.match(f);if(!h)return;let j=d(h[1]||"");if(!g.find(a=>!(a in j)))return{type:b,raw:h[0],attributes:j}}},renderMarkdown:a=>{let b=e((a=>{if(!h)return a;let b={};return h.forEach(c=>{c in a&&(b[c]=a[c])}),b})(a.attrs||{})),c=b?` {${b}}`:"";return`:::${i}${c} :::`}}}function tk(a){let{nodeName:b,name:c,getContent:d,parseAttributes:e=th,serializeAttributes:f=ti,defaultAttributes:g={},content:h="block",allowedAttributes:i}=a,j=c||b;return{parseMarkdown:(a,c)=>{let e;if(d){let b=d(a);e="string"==typeof b?[{type:"text",text:b}]:b}else e="block"===h?c.parseChildren(a.tokens||[]):c.parseInline(a.tokens||[]);let f={...g,...a.attributes};return c.createNode(b,f,e)},markdownTokenizer:{name:b,level:"block",start(a){var b;let c=RegExp(`^:::${j}`,"m"),d=null==(b=a.match(c))?void 0:b.index;return void 0!==d?d:-1},tokenize(a,c,d){var f;let g=RegExp(`^:::${j}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),i=a.match(g);if(!i)return;let[k,l=""]=i,m=e(l),n=1,o=k.length,p="",q=/^:::([\w-]*)(\s.*)?/gm,r=a.slice(o);for(q.lastIndex=0;;){let c=q.exec(r);if(null===c)break;let e=c.index,g=c[1];if(null==(f=c[2])||!f.endsWith(":::")){if(g)n+=1;else if(0==(n-=1)){let f=r.slice(0,e);p=f.trim();let g=a.slice(0,o+e+c[0].length),i=[];if(p)if("block"===h)for((i=d.blockTokens(f)).forEach(a=>{a.text&&(!a.tokens||0===a.tokens.length)&&(a.tokens=d.inlineTokens(a.text))});i.length>0;){let a=i[i.length-1];if("paragraph"!==a.type||a.text&&""!==a.text.trim())break;i.pop()}else i=d.inlineTokens(p);return{type:b,raw:g,attributes:m,content:p,tokens:i}}}}}},renderMarkdown:(a,b)=>{let c=f((a=>{if(!i)return a;let b={};return i.forEach(c=>{c in a&&(b[c]=a[c])}),b})(a.attrs||{})),d=c?` {${c}}`:"",e=b.renderChildren(a.content||[],"\n\n");return`:::${j}${d}

${e}

:::`}}}function tl(a){if(!a.trim())return{};let b={},c=/(\w+)=(?:"([^"]*)"|'([^']*)')/g,d=c.exec(a);for(;null!==d;){let[,e,f,g]=d;b[e]=f||g,d=c.exec(a)}return b}function tm(a){return Object.entries(a).filter(([,a])=>null!=a).map(([a,b])=>`${a}="${b}"`).join(" ")}function tn(a){let{nodeName:b,name:c,getContent:d,parseAttributes:e=tl,serializeAttributes:f=tm,defaultAttributes:g={},selfClosing:h=!1,allowedAttributes:i}=a,j=c||b,k=j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(a,c)=>{let e={...g,...a.attributes};if(h)return c.createNode(b,e);let f=d?d(a):a.content||"";return f?c.createNode(b,e,[c.createTextNode(f)]):c.createNode(b,e,[])},markdownTokenizer:{name:b,level:"inline",start(a){let b=h?RegExp(`\\[${k}\\s*[^\\]]*\\]`):RegExp(`\\[${k}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${k}\\]`),c=a.match(b),d=null==c?void 0:c.index;return void 0!==d?d:-1},tokenize(a,c,d){let f=h?RegExp(`^\\[${k}\\s*([^\\]]*)\\]`):RegExp(`^\\[${k}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${k}\\]`),g=a.match(f);if(!g)return;let i="",j="";if(h){let[,a]=g;j=a}else{let[,a,b]=g;j=a,i=b||""}let l=e(j.trim());return{type:b,raw:g[0],content:i.trim(),attributes:l}}},renderMarkdown:a=>{let b="";d?b=d(a):a.content&&a.content.length>0&&(b=a.content.filter(a=>"text"===a.type).map(a=>a.text).join(""));let c=f((a=>{if(!i)return a;let b={};return i.forEach(c=>{c in a&&(b[c]=a[c])}),b})(a.attrs||{})),e=c?` ${c}`:"";return h?`[${j}${e}]`:`[${j}${e}]${b}[/${j}]`}}}function to(a,b,c){var d,e,f,g;let h=a.split("\n"),i=[],j="",k=0,l=b.baseIndentSize||2;for(;k<h.length;){let a,m=h[k],n=m.match(b.itemPattern);if(!n)if(i.length>0)break;else{if(""!==m.trim())return;k+=1,j=`${j}${m}
`;continue}let o=b.extractItemData(n),{indentLevel:p,mainContent:q}=o;j=`${j}${m}
`;let r=[q];for(k+=1;k<h.length;){let a=h[k];if(""===a.trim()){let b=h.slice(k+1).findIndex(a=>""!==a.trim());if(-1===b)break;if(((null==(e=null==(d=h[k+1+b].match(/^(\s*)/))?void 0:d[1])?void 0:e.length)||0)>p){r.push(a),j=`${j}${a}
`,k+=1;continue}break}if(((null==(g=null==(f=a.match(/^(\s*)/))?void 0:f[1])?void 0:g.length)||0)>p)r.push(a),j=`${j}${a}
`,k+=1;else break}let s=r.slice(1);if(s.length>0){let d=s.map(a=>a.slice(p+l)).join("\n");d.trim()&&(a=b.customNestedParser?b.customNestedParser(d):c.blockTokens(d))}let t=b.createToken(o,a);i.push(t)}if(0!==i.length)return{items:i,raw:j}}function tp(a,b,c,d){if(!a||!Array.isArray(a.content))return"";let e="function"==typeof c?c(d):c,[f,...g]=a.content,h=b.renderChildren([f]),i=[`${e}${h}`];return g&&g.length>0&&g.forEach(a=>{let c=b.renderChildren([a]);if(c){let a=c.split("\n").map(a=>a?b.indent(a):"").join("\n");i.push(a)}}),i.join("\n")}q2({},{createAtomBlockMarkdownSpec:()=>tj,createBlockMarkdownSpec:()=>tk,createInlineMarkdownSpec:()=>tn,parseAttributes:()=>th,parseIndentedBlocks:()=>to,renderNestedMarkdownContent:()=>tp,serializeAttributes:()=>ti});var tq=class a extends sU{constructor(){super(...arguments),this.type="node"}static create(b={}){return new a("function"==typeof b?b():b)}configure(a){return super.configure(a)}extend(a){let b="function"==typeof a?a():a;return super.extend(b)}};function tr(a){return new sW({find:a.find,handler:({state:b,range:c,match:d,pasteEvent:e})=>{let f=r7(a.getAttributes,void 0,d,e);if(!1===f||null===f)return null;let{tr:g}=b,h=d[d.length-1],i=d[0],j=c.to;if(h){let d=i.search(/\S/),e=c.from+i.indexOf(h),k=e+h.length;if(sl(c.from,c.to,b.doc).filter(b=>b.mark.type.excluded.find(c=>c===a.type&&c!==b.mark.type)).filter(a=>a.to>e).length)return null;k<c.to&&g.delete(k,c.to),e>c.from&&g.delete(c.from+d,e),j=c.from+d+h.length,g.addMark(c.from+d,j,a.type.create(f||{})),g.removeStoredMark(a.type)}}})}var ts=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,tt=tq.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:a}){return["img",sa(this.options.HTMLAttributes,a)]},parseMarkdown:(a,b)=>b.createNode("image",{src:a.href,title:a.title,alt:a.text}),renderMarkdown:a=>{var b,c,d,e,f,g;let h=null!=(c=null==(b=a.attrs)?void 0:b.src)?c:"",i=null!=(e=null==(d=a.attrs)?void 0:d.alt)?e:"",j=null!=(g=null==(f=a.attrs)?void 0:f.title)?g:"";return j?`![${i}](${h} "${j}")`:`![${i}](${h})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||"undefined"==typeof document||!this.editor.isEditable)return null;let{directions:a,minWidth:b,minHeight:c,alwaysPreserveAspectRatio:d}=this.options.resize;return({node:e,getPos:f,HTMLAttributes:g})=>{let h=document.createElement("img");Object.entries(g).forEach(([a,b])=>{if(null!=b)switch(a){case"width":case"height":break;default:h.setAttribute(a,b)}}),h.src=g.src;let i=new tg({element:h,node:e,getPos:f,onResize:(a,b)=>{h.style.width=`${a}px`,h.style.height=`${b}px`},onCommit:(a,b)=>{let c=f();void 0!==c&&this.editor.chain().setNodeSelection(c).updateAttributes(this.name,{width:a,height:b}).run()},onUpdate:(a,b,c)=>a.type===e.type,options:{directions:a,min:{width:b,height:c},preserveAspectRatio:!0===d}}),j=i.dom;return j.style.visibility="hidden",j.style.pointerEvents="none",h.onload=()=>{j.style.visibility="",j.style.pointerEvents=""},i}},addCommands(){return{setImage:a=>({commands:b})=>b.insertContent({type:this.name,attrs:a})}},addInputRules(){return[td({find:ts,type:this.type,getAttributes:a=>{let[,,b,c,d]=a;return{src:c,alt:b,title:d}}})]}});let tu="numeric",tv="ascii",tw="alpha",tx="asciinumeric",ty="alphanumeric",tz="domain",tA="emoji",tB="whitespace";function tC(a,b,c){for(let d in b[tu]&&(b[tx]=!0,b[ty]=!0),b[tv]&&(b[tx]=!0,b[tw]=!0),b[tx]&&(b[ty]=!0),b[tw]&&(b[ty]=!0),b[ty]&&(b[tz]=!0),b[tA]&&(b[tz]=!0),b){let b=(d in c||(c[d]=[]),c[d]);0>b.indexOf(a)&&b.push(a)}}function tD(a=null){this.j={},this.jr=[],this.jd=null,this.t=a}tD.groups={},tD.prototype={accepts(){return!!this.t},go(a){let b=this.j[a];if(b)return b;for(let b=0;b<this.jr.length;b++){let c=this.jr[b][0],d=this.jr[b][1];if(d&&c.test(a))return d}return this.jd},has(a,b=!1){return b?a in this.j:!!this.go(a)},ta(a,b,c,d){for(let e=0;e<a.length;e++)this.tt(a[e],b,c,d)},tr(a,b,c,d){let e;return d=d||tD.groups,b&&b.j?e=b:(e=new tD(b),c&&d&&tC(b,c,d)),this.jr.push([a,e]),e},ts(a,b,c,d){let e=this,f=a.length;if(!f)return e;for(let b=0;b<f-1;b++)e=e.tt(a[b]);return e.tt(a[f-1],b,c,d)},tt(a,b,c,d){if(d=d||tD.groups,b&&b.j)return this.j[a]=b,b;let e,f=this.go(a);return f?(Object.assign((e=new tD).j,f.j),e.jr.push.apply(e.jr,f.jr),e.jd=f.jd,e.t=f.t):e=new tD,b&&(d&&(e.t&&"string"==typeof e.t?tC(b,Object.assign(function(a,b){let c={};for(let d in b)b[d].indexOf(a)>=0&&(c[d]=!0);return c}(e.t,d),c),d):c&&tC(b,c,d)),e.t=b),this.j[a]=e,e}};let tE=(a,b,c,d,e)=>a.ta(b,c,d,e),tF=(a,b,c,d,e)=>a.tr(b,c,d,e),tG=(a,b,c,d,e)=>a.ts(b,c,d,e),tH=(a,b,c,d,e)=>a.tt(b,c,d,e),tI="WORD",tJ="UWORD",tK="ASCIINUMERICAL",tL="ALPHANUMERICAL",tM="LOCALHOST",tN="UTLD",tO="SCHEME",tP="SLASH_SCHEME",tQ="OPENBRACE",tR="CLOSEBRACE",tS="OPENBRACKET",tT="CLOSEBRACKET",tU="OPENPAREN",tV="CLOSEPAREN",tW="OPENANGLEBRACKET",tX="CLOSEANGLEBRACKET",tY="FULLWIDTHLEFTPAREN",tZ="FULLWIDTHRIGHTPAREN",t$="LEFTCORNERBRACKET",t_="RIGHTCORNERBRACKET",t0="LEFTWHITECORNERBRACKET",t1="RIGHTWHITECORNERBRACKET",t2="FULLWIDTHLESSTHAN",t3="FULLWIDTHGREATERTHAN",t4="AMPERSAND",t5="APOSTROPHE",t6="ASTERISK",t7="BACKSLASH",t8="BACKTICK",t9="CARET",ua="COLON",ub="COMMA",uc="DOLLAR",ud="EQUALS",ue="EXCLAMATION",uf="HYPHEN",ug="PERCENT",uh="PIPE",ui="PLUS",uj="POUND",uk="QUERY",ul="QUOTE",um="FULLWIDTHMIDDLEDOT",un="SEMI",uo="SLASH",up="TILDE",uq="UNDERSCORE",ur="EMOJI";var us=Object.freeze({__proto__:null,ALPHANUMERICAL:tL,AMPERSAND:t4,APOSTROPHE:t5,ASCIINUMERICAL:tK,ASTERISK:t6,AT:"AT",BACKSLASH:t7,BACKTICK:t8,CARET:t9,CLOSEANGLEBRACKET:tX,CLOSEBRACE:tR,CLOSEBRACKET:tT,CLOSEPAREN:tV,COLON:ua,COMMA:ub,DOLLAR:uc,DOT:"DOT",EMOJI:ur,EQUALS:ud,EXCLAMATION:ue,FULLWIDTHGREATERTHAN:t3,FULLWIDTHLEFTPAREN:tY,FULLWIDTHLESSTHAN:t2,FULLWIDTHMIDDLEDOT:um,FULLWIDTHRIGHTPAREN:tZ,HYPHEN:uf,LEFTCORNERBRACKET:t$,LEFTWHITECORNERBRACKET:t0,LOCALHOST:tM,NL:"NL",NUM:"NUM",OPENANGLEBRACKET:tW,OPENBRACE:tQ,OPENBRACKET:tS,OPENPAREN:tU,PERCENT:ug,PIPE:uh,PLUS:ui,POUND:uj,QUERY:uk,QUOTE:ul,RIGHTCORNERBRACKET:t_,RIGHTWHITECORNERBRACKET:t1,SCHEME:tO,SEMI:un,SLASH:uo,SLASH_SCHEME:tP,SYM:"SYM",TILDE:up,TLD:"TLD",UNDERSCORE:uq,UTLD:tN,UWORD:tJ,WORD:tI,WS:"WS"});let ut=/[a-z]/,uu=/\p{L}/u,uv=/\p{Emoji}/u,uw=/\d/,ux=/\s/,uy=null,uz=null;function uA(a,b){let c=function(a){let b=[],c=a.length,d=0;for(;d<c;){let e,f=a.charCodeAt(d),g=f<55296||f>56319||d+1===c||(e=a.charCodeAt(d+1))<56320||e>57343?a[d]:a.slice(d,d+2);b.push(g),d+=g.length}return b}(b.replace(/[A-Z]/g,a=>a.toLowerCase())),d=c.length,e=[],f=0,g=0;for(;g<d;){let h=a,i=null,j=0,k=null,l=-1,m=-1;for(;g<d&&(i=h.go(c[g]));)(h=i).accepts()?(l=0,m=0,k=h):l>=0&&(l+=c[g].length,m++),j+=c[g].length,f+=c[g].length,g++;f-=l,g-=m,j-=l,e.push({t:k.t,v:b.slice(f-j,f),s:f-j,e:f})}return e}function uB(a,b,c,d,e){let f,g=b.length;for(let c=0;c<g-1;c++){let g=b[c];a.j[g]?f=a.j[g]:((f=new tD(d)).jr=e.slice(),a.j[g]=f),a=f}return(f=new tD(c)).jr=e.slice(),a.j[b[g-1]]=f,f}function uC(a){let b=[],c=[],d=0;for(;d<a.length;){let e=0;for(;"0123456789".indexOf(a[d+e])>=0;)e++;if(e>0){b.push(c.join(""));for(let b=parseInt(a.substring(d,d+e),10);b>0;b--)c.pop();d+=e}else c.push(a[d]),d++}return b}let uD={defaultProtocol:"http",events:null,format:uF,formatHref:uF,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function uE(a,b=null){let c=Object.assign({},uD);a&&(c=Object.assign(c,a instanceof uE?a.o:a));let d=c.ignoreTags,e=[];for(let a=0;a<d.length;a++)e.push(d[a].toUpperCase());this.o=c,b&&(this.defaultRender=b),this.ignoreTags=e}function uF(a){return a}function uG(a,b){this.t="token",this.v=a,this.tk=b}function uH(a,b){class c extends uG{constructor(b,c){super(b,c),this.t=a}}for(let a in b)c.prototype[a]=b[a];return c.t=a,c}uE.prototype={o:uD,ignoreTags:[],defaultRender:a=>a,check(a){return this.get("validate",a.toString(),a)},get(a,b,c){let d=null!=b,e=this.o[a];return e&&("object"==typeof e?"function"==typeof(e=c.t in e?e[c.t]:uD[a])&&d&&(e=e(b,c)):"function"==typeof e&&d&&(e=e(b,c.t,c))),e},getObj(a,b,c){let d=this.o[a];return"function"==typeof d&&null!=b&&(d=d(b,c.t,c)),d},render(a){let b=a.render(this);return(this.get("render",null,a)||this.defaultRender)(b,a.t,a)}},uG.prototype={isLink:!1,toString(){return this.v},toHref(a){return this.toString()},toFormattedString(a){let b=this.toString(),c=a.get("truncate",b,this),d=a.get("format",b,this);return c&&d.length>c?d.substring(0,c)+"â€¦":d},toFormattedHref(a){return a.get("formatHref",this.toHref(a.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(a=uD.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(a),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(a){return{type:this.t,value:this.toFormattedString(a),isLink:this.isLink,href:this.toFormattedHref(a),start:this.startIndex(),end:this.endIndex()}},validate(a){return a.get("validate",this.toString(),this)},render(a){let b=this.toHref(a.get("defaultProtocol")),c=a.get("formatHref",b,this),d=a.get("tagName",b,this),e=this.toFormattedString(a),f={},g=a.get("className",b,this),h=a.get("target",b,this),i=a.get("rel",b,this),j=a.getObj("attributes",b,this),k=a.getObj("events",b,this);return f.href=c,g&&(f.class=g),h&&(f.target=h),i&&(f.rel=i),j&&Object.assign(f,j),{tagName:d,attributes:f,content:e,eventListeners:k}}};let uI=uH("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),uJ=uH("text"),uK=uH("nl"),uL=uH("url",{isLink:!0,toHref(a=uD.defaultProtocol){return this.hasProtocol()?this.v:`${a}://${this.v}`},hasProtocol(){let a=this.tk;return a.length>=2&&a[0].t!==tM&&a[1].t===ua}}),uM=a=>new tD(a);function uN(a,b,c){let d=c[0].s,e=c[c.length-1].e;return new a(b.slice(d,e),c)}let uO="undefined"!=typeof console&&console&&console.warn||(()=>{}),uP={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function uQ(a,b=!1){if(uP.initialized&&uO(`linkifyjs: already initialized - will not register custom scheme "${a}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(a))throw Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);uP.customSchemes.push([a,b])}function uR(a){return uP.initialized||function(){uP.scanner=function(a=[]){let b={};tD.groups=b;let c=new tD;null==uy&&(uy=uC("aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mÃ¶gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==uz&&(uz=uC("ÎµÎ»1Ï…2Ð±Ð³1ÐµÐ»3Ð´ÐµÑ‚Ð¸4ÐµÑŽ2ÐºÐ°Ñ‚Ð¾Ð»Ð¸Ðº6Ð¾Ð¼3Ð¼ÐºÐ´2Ð¾Ð½1ÑÐºÐ²Ð°6Ð¾Ð½Ð»Ð°Ð¹Ð½5Ñ€Ð³3Ñ€ÑƒÑ2Ñ„2ÑÐ°Ð¹Ñ‚3Ñ€Ð±3ÑƒÐºÑ€3Ò›Ð°Ð·3Õ°Õ¡Õµ3×™×©×¨××œ5×§×•×3Ø§Ø¨ÙˆØ¸Ø¨ÙŠ5Ø±Ø§Ù…ÙƒÙˆ5Ù„Ø§Ø±Ø¯Ù†4Ø¨Ø­Ø±ÙŠÙ†5Ø¬Ø²Ø§Ø¦Ø±5Ø³Ø¹ÙˆØ¯ÙŠØ©6Ø¹Ù„ÙŠØ§Ù†5Ù…ØºØ±Ø¨5Ù…Ø§Ø±Ø§Øª5ÛŒØ±Ø§Ù†5Ø¨Ø§Ø±Øª2Ø²Ø§Ø±4ÙŠØªÙƒ3Ú¾Ø§Ø±Øª5ØªÙˆÙ†Ø³4Ø³ÙˆØ¯Ø§Ù†3Ø±ÙŠØ©5Ø´Ø¨ÙƒØ©4Ø¹Ø±Ø§Ù‚2Ø¨2Ù…Ø§Ù†4ÙÙ„Ø³Ø·ÙŠÙ†6Ù‚Ø·Ø±3ÙƒØ§Ø«ÙˆÙ„ÙŠÙƒ6ÙˆÙ…3Ù…ØµØ±2Ù„ÙŠØ³ÙŠØ§5ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§7Ù‚Ø¹4Ù‡Ù…Ø±Ø§Ù‡5Ù¾Ø§Ú©Ø³ØªØ§Ù†7Ú€Ø§Ø±Øª4à¤•à¥‰à¤®3à¤¨à¥‡à¤Ÿ3à¤­à¤¾à¤°à¤¤0à¤®à¥3à¥‹à¤¤5à¤¸à¤‚à¤—à¤ à¤¨5à¦¬à¦¾à¦‚à¦²à¦¾5à¦­à¦¾à¦°à¦¤2à§°à¦¤4à¨­à¨¾à¨°à¨¤4àª­àª¾àª°àª¤4à¬­à¬¾à¬°à¬¤4à®‡à®¨à¯à®¤à®¿à®¯à®¾6à®²à®™à¯à®•à¯ˆ6à®šà®¿à®™à¯à®•à®ªà¯à®ªà¯‚à®°à¯11à°­à°¾à°°à°¤à±5à²­à²¾à²°à²¤4à´­à´¾à´°à´¤à´‚5à¶½à¶‚à¶šà·4à¸„à¸­à¸¡3à¹„à¸—à¸¢3àº¥àº²àº§3áƒ’áƒ”2ã¿ã‚“ãª3ã‚¢ãƒžã‚¾ãƒ³4ã‚¯ãƒ©ã‚¦ãƒ‰4ã‚°ãƒ¼ã‚°ãƒ«4ã‚³ãƒ 2ã‚¹ãƒˆã‚¢3ã‚»ãƒ¼ãƒ«3ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³6ãƒã‚¤ãƒ³ãƒˆ4ä¸–ç•Œ2ä¸­ä¿¡1å›½1åœ‹1æ–‡ç½‘3äºšé©¬é€Š3ä¼ä¸š2ä½›å±±2ä¿¡æ¯2å¥åº·2å…«å¦2å…¬å¸1ç›Š2å°æ¹¾1ç£2å•†åŸŽ1åº—1æ ‡2å˜‰é‡Œ0å¤§é…’åº—5åœ¨çº¿2å¤§æ‹¿2å¤©ä¸»æ•™3å¨±ä¹2å®¶é›»2å¹¿ä¸œ2å¾®åš2æ…ˆå–„2æˆ‘çˆ±ä½ 3æ‰‹æœº2æ‹›è˜2æ”¿åŠ¡1åºœ2æ–°åŠ å¡2é—»2æ—¶å°š2æ›¸ç±2æœºæž„2æ·¡é©¬é”¡3æ¸¸æˆ2æ¾³é–€2ç‚¹çœ‹2ç§»åŠ¨2ç»„ç»‡æœºæž„4ç½‘å€1åº—1ç«™1ç»œ2è”é€š2è°·æ­Œ2è´­ç‰©2é€šè²©2é›†å›¢2é›»è¨Šç›ˆç§‘4é£žåˆ©æµ¦3é£Ÿå“2é¤åŽ…2é¦™æ ¼é‡Œæ‹‰3æ¸¯2ë‹·ë„·1ì»´2ì‚¼ì„±2í•œêµ­2")),tH(c,"'",t5),tH(c,"{",tQ),tH(c,"}",tR),tH(c,"[",tS),tH(c,"]",tT),tH(c,"(",tU),tH(c,")",tV),tH(c,"<",tW),tH(c,">",tX),tH(c,"ï¼ˆ",tY),tH(c,"ï¼‰",tZ),tH(c,"ã€Œ",t$),tH(c,"ã€",t_),tH(c,"ã€Ž",t0),tH(c,"ã€",t1),tH(c,"ï¼œ",t2),tH(c,"ï¼ž",t3),tH(c,"&",t4),tH(c,"*",t6),tH(c,"@","AT"),tH(c,"`",t8),tH(c,"^",t9),tH(c,":",ua),tH(c,",",ub),tH(c,"$",uc),tH(c,".","DOT"),tH(c,"=",ud),tH(c,"!",ue),tH(c,"-",uf),tH(c,"%",ug),tH(c,"|",uh),tH(c,"+",ui),tH(c,"#",uj),tH(c,"?",uk),tH(c,'"',ul),tH(c,"/",uo),tH(c,";",un),tH(c,"~",up),tH(c,"_",uq),tH(c,"\\",t7),tH(c,"ãƒ»",um);let d=tF(c,uw,"NUM",{[tu]:!0});tF(d,uw,d);let e=tF(d,ut,tK,{[tx]:!0}),f=tF(d,uu,tL,{[ty]:!0}),g=tF(c,ut,tI,{[tv]:!0});tF(g,uw,e),tF(g,ut,g),tF(e,uw,e),tF(e,ut,e);let h=tF(c,uu,tJ,{[tw]:!0});tF(h,ut),tF(h,uw,f),tF(h,uu,h),tF(f,uw,f),tF(f,ut),tF(f,uu,f);let i=tH(c,"\n","NL",{[tB]:!0}),j=tH(c,"\r","WS",{[tB]:!0}),k=tF(c,ux,"WS",{[tB]:!0});tH(c,"ï¿¼",k),tH(j,"\n",i),tH(j,"ï¿¼",k),tF(j,ux,k),tH(k,"\r"),tH(k,"\n"),tF(k,ux,k),tH(k,"ï¿¼",k);let l=tF(c,uv,ur,{[tA]:!0});tH(l,"#"),tF(l,uv,l),tH(l,"ï¸",l);let m=tH(l,"â€");tH(m,"#"),tF(m,uv,l);let n=[[ut,g],[uw,e]],o=[[ut,null],[uu,h],[uw,f]];for(let a=0;a<uy.length;a++)uB(c,uy[a],"TLD",tI,n);for(let a=0;a<uz.length;a++)uB(c,uz[a],tN,tJ,o);tC("TLD",{tld:!0,ascii:!0},b),tC(tN,{utld:!0,alpha:!0},b),uB(c,"file",tO,tI,n),uB(c,"mailto",tO,tI,n),uB(c,"http",tP,tI,n),uB(c,"https",tP,tI,n),uB(c,"ftp",tP,tI,n),uB(c,"ftps",tP,tI,n),tC(tO,{scheme:!0,ascii:!0},b),tC(tP,{slashscheme:!0,ascii:!0},b),a=a.sort((a,b)=>a[0]>b[0]?1:-1);for(let b=0;b<a.length;b++){let d=a[b][0],e=a[b][1]?{scheme:!0}:{slashscheme:!0};d.indexOf("-")>=0?e[tz]=!0:ut.test(d)?uw.test(d)?e[tx]=!0:e[tv]=!0:e[tu]=!0,tG(c,d,d,e)}return tG(c,"localhost",tM,{ascii:!0}),c.jd=new tD("SYM"),{start:c,tokens:Object.assign({groups:b},us)}}(uP.customSchemes);for(let a=0;a<uP.tokenQueue.length;a++)uP.tokenQueue[a][1]({scanner:uP.scanner});uP.parser=function({groups:a}){let b=a.domain.concat([t4,t6,"AT",t7,t8,t9,uc,ud,uf,"NUM",ug,uh,ui,uj,uo,"SYM",up,uq]),c=[t5,ua,ub,"DOT",ue,ug,uk,ul,un,tW,tX,tQ,tR,tT,tS,tU,tV,tY,tZ,t$,t_,t0,t1,t2,t3],d=[t4,t5,t6,t7,t8,t9,uc,ud,uf,tQ,tR,ug,uh,ui,uj,uk,uo,"SYM",up,uq],e=uM(),f=tH(e,up);tE(f,d,f),tE(f,a.domain,f);let g=uM(),h=uM(),i=uM();tE(e,a.domain,g),tE(e,a.scheme,h),tE(e,a.slashscheme,i),tE(g,d,f),tE(g,a.domain,g);let j=tH(g,"AT");tH(f,"AT",j),tH(h,"AT",j),tH(i,"AT",j);let k=tH(f,"DOT");tE(k,d,f),tE(k,a.domain,f);let l=uM();tE(j,a.domain,l),tE(l,a.domain,l);let m=tH(l,"DOT");tE(m,a.domain,l);let n=uM(uI);tE(m,a.tld,n),tE(m,a.utld,n),tH(j,tM,n);let o=tH(l,uf);tH(o,uf,o),tE(o,a.domain,l),tE(n,a.domain,l),tH(n,"DOT",m),tH(n,uf,o),tE(tH(n,ua),a.numeric,uI);let p=tH(g,uf),q=tH(g,"DOT");tH(p,uf,p),tE(p,a.domain,g),tE(q,d,f),tE(q,a.domain,g);let r=uM(uL);tE(q,a.tld,r),tE(q,a.utld,r),tE(r,a.domain,g),tE(r,d,f),tH(r,"DOT",q),tH(r,uf,p),tH(r,"AT",j);let s=tH(r,ua),t=uM(uL);tE(s,a.numeric,t);let u=uM(uL),v=uM();tE(u,b,u),tE(u,c,v),tE(v,b,u),tE(v,c,v),tH(r,uo,u),tH(t,uo,u);let w=tH(h,ua),x=tH(i,ua),y=tH(x,uo),z=tH(y,uo);tE(h,a.domain,g),tH(h,"DOT",q),tH(h,uf,p),tE(i,a.domain,g),tH(i,"DOT",q),tH(i,uf,p),tE(w,a.domain,u),tH(w,uo,u),tH(w,uk,u),tE(z,a.domain,u),tE(z,b,u),tH(z,uo,u);let A=[[tQ,tR],[tS,tT],[tU,tV],[tW,tX],[tY,tZ],[t$,t_],[t0,t1],[t2,t3]];for(let a=0;a<A.length;a++){let[d,e]=A[a],f=tH(u,d);tH(v,d,f),tH(f,e,u);let g=uM(uL);tE(f,b,g);let h=uM();tE(f,c),tE(g,b,g),tE(g,c,h),tE(h,b,g),tE(h,c,h),tH(g,e,u),tH(h,e,u)}return tH(e,tM,r),tH(e,"NL",uK),{start:e,tokens:us}}(uP.scanner.tokens);for(let a=0;a<uP.pluginQueue.length;a++)uP.pluginQueue[a][1]({scanner:uP.scanner,parser:uP.parser});uP.initialized=!0}(),function(a,b,c){let d=c.length,e=0,f=[],g=[];for(;e<d;){let h=a,i=null,j=null,k=0,l=null,m=-1;for(;e<d&&!(i=h.go(c[e].t));)g.push(c[e++]);for(;e<d&&(j=i||h.go(c[e].t));)i=null,(h=j).accepts()?(m=0,l=h):m>=0&&m++,e++,k++;if(m<0)(e-=k)<d&&(g.push(c[e]),e++);else{g.length>0&&(f.push(uN(uJ,b,g)),g=[]),e-=m,k-=m;let a=l.t,d=c.slice(e-k,e);f.push(uN(a,b,d))}}return g.length>0&&f.push(uN(uJ,b,g)),f}(uP.parser.start,a,uA(uP.scanner.start,a))}function uS(a,b=null,c=null){if(b&&"object"==typeof b){if(c)throw Error(`linkifyjs: Invalid link type ${b}; must be a string`);c=b,b=null}let d=new uE(c),e=uR(a),f=[];for(let a=0;a<e.length;a++){let c=e[a];c.isLink&&(!b||c.t===b)&&d.check(c)&&f.push(c.toFormattedObject(d))}return f}uR.scan=uA;var uT="[\0- Â áš€á Žâ€€-\u2029âŸã€€]",uU=new RegExp(uT),uV=RegExp(`${uT}$`),uW=RegExp(uT,"g");function uX(a,b){let c=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return b&&b.forEach(a=>{let b="string"==typeof a?a:a.scheme;b&&c.push(b)}),!a||a.replace(uW,"").match(RegExp(`^(?:(?:${c.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var uY=sV.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(a=>{"string"==typeof a?uQ(a):uQ(a.scheme,a.optionalSlashes)})},onDestroy(){tD.groups={},uP.scanner=null,uP.parser=null,uP.tokenQueue=[],uP.pluginQueue=[],uP.customSchemes=[],uP.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(a,b)=>!!uX(a,b.protocols),validate:a=>!!a,shouldAutoLink:a=>!!a}),addAttributes(){return{href:{default:null,parseHTML:a=>a.getAttribute("href")},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:a=>{let b=a.getAttribute("href");return!!b&&!!this.options.isAllowedUri(b,{defaultValidate:a=>!!uX(a,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&null}}]},renderHTML({HTMLAttributes:a}){return this.options.isAllowedUri(a.href,{defaultValidate:a=>!!uX(a,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",sa(this.options.HTMLAttributes,a),0]:["a",sa(this.options.HTMLAttributes,{...a,href:""}),0]},markdownTokenName:"link",parseMarkdown:(a,b)=>b.applyMark("link",b.parseInline(a.tokens||[]),{href:a.href,title:a.title||null}),renderMarkdown:(a,b)=>{var c;let d=(null==(c=a.attrs)?void 0:c.href)||"",e=b.renderChildren(a);return`[${e}](${d})`},addCommands(){return{setLink:a=>({chain:b})=>{let{href:c}=a;return!!this.options.isAllowedUri(c,{defaultValidate:a=>!!uX(a,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&b().setMark(this.name,a).setMeta("preventAutolink",!0).run()},toggleLink:a=>({chain:b})=>{let{href:c}=a||{};return(!c||!!this.options.isAllowedUri(c,{defaultValidate:a=>!!uX(a,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&b().toggleMark(this.name,a,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:a})=>a().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[tr({find:a=>{let b=[];if(a){let{protocols:c,defaultProtocol:d}=this.options,e=uS(a).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:a=>!!uX(a,c),protocols:c,defaultProtocol:d}));e.length&&e.forEach(a=>{this.options.shouldAutoLink(a.value)&&b.push({text:a.value,data:{href:a.href},index:a.start})})}return b},type:this.type,getAttributes:a=>{var b;return{href:null==(b=a.data)?void 0:b.href}}})]},addProseMirrorPlugins(){var a,b,c;let d=[],{protocols:e,defaultProtocol:f}=this.options;return this.options.autolink&&d.push((a={type:this.type,defaultProtocol:this.options.defaultProtocol,validate:a=>this.options.isAllowedUri(a,{defaultValidate:a=>!!uX(a,e),protocols:e,defaultProtocol:f}),shouldAutoLink:this.options.shouldAutoLink},new nU({key:new nX("autolink"),appendTransaction:(b,c,d)=>{let e=b.some(a=>a.docChanged)&&!c.doc.eq(d.doc),f=b.some(a=>a.getMeta("preventAutolink"));if(!e||f)return;let{tr:g}=d;if(sk(r1(c.doc,[...b])).forEach(({newRange:b})=>{var c,e;let f,h,i,j=(c=d.doc,e=a=>a.isTextblock,i=[],c.nodesBetween(b.from,b.to,(a,b)=>{e(a)&&i.push({node:a,pos:b})}),i);if(j.length>1)f=j[0],h=d.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(j.length){let a=d.doc.textBetween(b.from,b.to," "," ");if(!uV.test(a))return;f=j[0],h=d.doc.textBetween(f.pos,b.to,void 0," ")}if(f&&h){let b=h.split(uU).filter(Boolean);if(b.length<=0)return!1;let c=b[b.length-1],e=f.pos+h.lastIndexOf(c);if(!c)return!1;let i=uR(c).map(b=>b.toObject(a.defaultProtocol));if(!(1===i.length?i[0].isLink:3===i.length&&!!i[1].isLink&&["()","[]"].includes(i[0].value+i[2].value)))return!1;i.filter(a=>a.isLink).map(a=>({...a,from:e+a.start+1,to:e+a.end+1})).filter(a=>!d.schema.marks.code||!d.doc.rangeHasMark(a.from,a.to,d.schema.marks.code)).filter(b=>a.validate(b.value)).filter(b=>a.shouldAutoLink(b.value)).forEach(b=>{sl(b.from,b.to,d.doc).some(b=>b.mark.type===a.type)||g.addMark(b.from,b.to,a.type.create({href:b.href}))})}}),g.steps.length)return g}}))),!0===this.options.openOnClick&&d.push((b={type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection},new nU({key:new nX("handleClickLink"),props:{handleClick:(a,c,d)=>{var e,f;if(0!==d.button||!a.editable)return!1;let g=null;if(d.target instanceof HTMLAnchorElement)g=d.target;else{let a=d.target,b=[];for(;"DIV"!==a.nodeName;)b.push(a),a=a.parentNode;g=b.find(a=>"A"===a.nodeName)}if(!g)return!1;let h=sj(a.state,b.type.name),i=null!=(e=null==g?void 0:g.href)?e:h.href,j=null!=(f=null==g?void 0:g.target)?f:h.target;return b.enableClickSelection&&b.editor.commands.extendMarkRange(b.type.name),!!g&&!!i&&(window.open(i,j),!0)}}}))),this.options.linkOnPaste&&d.push((c={editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink},new nU({key:new nX("handlePasteLink"),props:{handlePaste:(a,b,d)=>{let{shouldAutoLink:e}=c,{state:f}=a,{selection:g}=f,{empty:h}=g;if(h)return!1;let i="";d.content.forEach(a=>{i+=a.textContent});let j=uS(i,{defaultProtocol:c.defaultProtocol}).find(a=>a.isLink&&a.value===i);return!!i&&!!j&&(void 0===e||!!e(j.href))&&c.editor.commands.setMark(c.type,{href:j.href})}}}))),d}});class uZ{constructor(a,b){var c;this.editorView=a,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!=(c=b.width)?c:1,this.color=!1===b.color?void 0:b.color||"black",this.class=b.class,this.handlers=["dragover","dragend","drop","dragleave"].map(b=>{let c=a=>{this[b](a)};return a.dom.addEventListener(b,c),{name:b,handler:c}})}destroy(){this.handlers.forEach(({name:a,handler:b})=>this.editorView.dom.removeEventListener(a,b))}update(a,b){null!=this.cursorPos&&b.doc!=a.state.doc&&(this.cursorPos>a.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(a){a!=this.cursorPos&&(this.cursorPos=a,null==a?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let a,b,c=this.editorView.state.doc.resolve(this.cursorPos),d=!c.parent.inlineContent,e,f=this.editorView.dom,g=f.getBoundingClientRect(),h=g.width/f.offsetWidth,i=g.height/f.offsetHeight;if(d){let a=c.nodeBefore,b=c.nodeAfter;if(a||b){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let d=c.getBoundingClientRect(),f=a?d.bottom:d.top;a&&b&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let g=this.width/2*i;e={left:d.left,right:d.right,top:f-g,bottom:f+g}}}}if(!e){let a=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*h;e={left:a.left-b,right:a.left+b,top:a.top,bottom:a.bottom}}let j=this.editorView.dom.offsetParent;if(!this.element&&(this.element=j.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",d),this.element.classList.toggle("prosemirror-dropcursor-inline",!d),j&&(j!=document.body||"static"!=getComputedStyle(j).position)){let c=j.getBoundingClientRect(),d=c.width/j.offsetWidth,e=c.height/j.offsetHeight;a=c.left-j.scrollLeft*d,b=c.top-j.scrollTop*e}else a=-pageXOffset,b=-pageYOffset;this.element.style.left=(e.left-a)/h+"px",this.element.style.top=(e.top-b)/i+"px",this.element.style.width=(e.right-e.left)/h+"px",this.element.style.height=(e.bottom-e.top)/i+"px"}scheduleRemoval(a){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),a)}dragover(a){if(!this.editorView.editable)return;let b=this.editorView.posAtCoords({left:a.clientX,top:a.clientY}),c=b&&b.inside>=0&&this.editorView.state.doc.nodeAt(b.inside),d=c&&c.type.spec.disableDropCursor,e="function"==typeof d?d(this.editorView,b,a):d;if(b&&!e){let a=b.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let b=no(this.editorView.state.doc,a,this.editorView.dragging.slice);null!=b&&(a=b)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(a){this.editorView.dom.contains(a.relatedTarget)||this.setCursor(null)}}class u$ extends nC{constructor(a){super(a,a)}map(a,b){let c=a.resolve(b.map(this.head));return u$.valid(c)?new u$(c):nC.near(c)}content(){return mk.empty}eq(a){return a instanceof u$&&a.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(a,b){if("number"!=typeof b.pos)throw RangeError("Invalid input for GapCursor.fromJSON");return new u$(a.resolve(b.pos))}getBookmark(){return new u_(this.anchor)}static valid(a){let b=a.parent;if(b.isTextblock||!function(a){for(let b=a.depth;b>=0;b--){let c=a.index(b),d=a.node(b);if(0==c){if(d.type.spec.isolating)return!0;continue}for(let a=d.child(c-1);;a=a.lastChild){if(0==a.childCount&&!a.inlineContent||u0(a.type))return!0;if(a.inlineContent)return!1}}return!0}(a)||!function(a){for(let b=a.depth;b>=0;b--){let c=a.indexAfter(b),d=a.node(b);if(c==d.childCount){if(d.type.spec.isolating)return!0;continue}for(let a=d.child(c);;a=a.firstChild){if(0==a.childCount&&!a.inlineContent||u0(a.type))return!0;if(a.inlineContent)return!1}}return!0}(a))return!1;let c=b.type.spec.allowGapCursor;if(null!=c)return c;let d=b.contentMatchAt(a.index()).defaultType;return d&&d.isTextblock}static findGapCursorFrom(a,b,c=!1){d:for(;;){if(!c&&u$.valid(a))return a;let d=a.pos,e=null;for(let c=a.depth;;c--){let f=a.node(c);if(b>0?a.indexAfter(c)<f.childCount:a.index(c)>0){e=f.child(b>0?a.indexAfter(c):a.index(c)-1);break}if(0==c)return null;d+=b;let g=a.doc.resolve(d);if(u$.valid(g))return g}for(;;){let f=b>0?e.firstChild:e.lastChild;if(!f){if(e.isAtom&&!e.isText&&!nI.isSelectable(e)){a=a.doc.resolve(d+e.nodeSize*b),c=!1;continue d}break}e=f,d+=b;let g=a.doc.resolve(d);if(u$.valid(g))return g}return null}}}u$.prototype.visible=!1,u$.findFrom=u$.findGapCursorFrom,nC.jsonID("gapcursor",u$);class u_{constructor(a){this.pos=a}map(a){return new u_(a.map(this.pos))}resolve(a){let b=a.resolve(this.pos);return u$.valid(b)?new u$(b):nC.near(b)}}function u0(a){return a.isAtom||a.spec.isolating||a.spec.createGapCursor}let u1=q0({ArrowLeft:u2("horiz",-1),ArrowRight:u2("horiz",1),ArrowUp:u2("vert",-1),ArrowDown:u2("vert",1)});function u2(a,b){let c="vert"==a?b>0?"down":"up":b>0?"right":"left";return function(a,d,e){let f=a.selection,g=b>0?f.$to:f.$from,h=f.empty;if(f instanceof nG){if(!e.endOfTextblock(c)||0==g.depth)return!1;h=!1,g=a.doc.resolve(b>0?g.after():g.before())}let i=u$.findGapCursorFrom(g,b,h);return!!i&&(d&&d(a.tr.setSelection(new u$(i))),!0)}}function u3(a,b,c){if(!a||!a.editable)return!1;let d=a.state.doc.resolve(b);if(!u$.valid(d))return!1;let e=a.posAtCoords({left:c.clientX,top:c.clientY});return!(e&&e.inside>-1&&nI.isSelectable(a.state.doc.nodeAt(e.inside)))&&(a.dispatch(a.state.tr.setSelection(new u$(d))),!0)}function u4(a,b){if("insertCompositionText"!=b.inputType||!(a.state.selection instanceof u$))return!1;let{$from:c}=a.state.selection,d=c.parent.contentMatchAt(c.index()).findWrapping(a.state.schema.nodes.text);if(!d)return!1;let e=me.empty;for(let a=d.length-1;a>=0;a--)e=me.from(d[a].createAndFill(null,e));let f=a.state.tr.replace(c.pos,c.pos,new mk(e,0,0));return f.setSelection(nG.near(f.doc.resolve(c.pos+1))),a.dispatch(f),!1}function u5(a){if(!(a.selection instanceof u$))return null;let b=document.createElement("div");return b.className="ProseMirror-gapcursor",qq.create(a.doc,[qn.widget(a.selection.head,b,{key:"gapcursor"})])}var u6=function(){};u6.prototype.append=function(a){return a.length?(a=u6.from(a),!this.length&&a||a.length<200&&this.leafAppend(a)||this.length<200&&a.leafPrepend(this)||this.appendInner(a)):this},u6.prototype.prepend=function(a){return a.length?u6.from(a).append(this):this},u6.prototype.appendInner=function(a){return new u8(this,a)},u6.prototype.slice=function(a,b){return(void 0===a&&(a=0),void 0===b&&(b=this.length),a>=b)?u6.empty:this.sliceInner(Math.max(0,a),Math.min(this.length,b))},u6.prototype.get=function(a){if(!(a<0)&&!(a>=this.length))return this.getInner(a)},u6.prototype.forEach=function(a,b,c){void 0===b&&(b=0),void 0===c&&(c=this.length),b<=c?this.forEachInner(a,b,c,0):this.forEachInvertedInner(a,b,c,0)},u6.prototype.map=function(a,b,c){void 0===b&&(b=0),void 0===c&&(c=this.length);var d=[];return this.forEach(function(b,c){return d.push(a(b,c))},b,c),d},u6.from=function(a){return a instanceof u6?a:a&&a.length?new u7(a):u6.empty};var u7=function(a){function b(b){a.call(this),this.values=b}b.__proto__=a,b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b;var c={length:{configurable:!0},depth:{configurable:!0}};return b.prototype.flatten=function(){return this.values},b.prototype.sliceInner=function(a,c){return 0==a&&c==this.length?this:new b(this.values.slice(a,c))},b.prototype.getInner=function(a){return this.values[a]},b.prototype.forEachInner=function(a,b,c,d){for(var e=b;e<c;e++)if(!1===a(this.values[e],d+e))return!1},b.prototype.forEachInvertedInner=function(a,b,c,d){for(var e=b-1;e>=c;e--)if(!1===a(this.values[e],d+e))return!1},b.prototype.leafAppend=function(a){if(this.length+a.length<=200)return new b(this.values.concat(a.flatten()))},b.prototype.leafPrepend=function(a){if(this.length+a.length<=200)return new b(a.flatten().concat(this.values))},c.length.get=function(){return this.values.length},c.depth.get=function(){return 0},Object.defineProperties(b.prototype,c),b}(u6);u6.empty=new u7([]);var u8=function(a){function b(b,c){a.call(this),this.left=b,this.right=c,this.length=b.length+c.length,this.depth=Math.max(b.depth,c.depth)+1}return b.__proto__=a,b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},b.prototype.getInner=function(a){return a<this.left.length?this.left.get(a):this.right.get(a-this.left.length)},b.prototype.forEachInner=function(a,b,c,d){var e=this.left.length;if(b<e&&!1===this.left.forEachInner(a,b,Math.min(c,e),d)||c>e&&!1===this.right.forEachInner(a,Math.max(b-e,0),Math.min(this.length,c)-e,d+e))return!1},b.prototype.forEachInvertedInner=function(a,b,c,d){var e=this.left.length;if(b>e&&!1===this.right.forEachInvertedInner(a,b-e,Math.max(c,e)-e,d+e)||c<e&&!1===this.left.forEachInvertedInner(a,Math.min(b,e),c,d))return!1},b.prototype.sliceInner=function(a,b){if(0==a&&b==this.length)return this;var c=this.left.length;return b<=c?this.left.slice(a,b):a>=c?this.right.slice(a-c,b-c):this.left.slice(a,c).append(this.right.slice(0,b-c))},b.prototype.leafAppend=function(a){var c=this.right.leafAppend(a);if(c)return new b(this.left,c)},b.prototype.leafPrepend=function(a){var c=this.left.leafPrepend(a);if(c)return new b(c,this.right)},b.prototype.appendInner=function(a){return this.left.depth>=Math.max(this.right.depth,a.depth)+1?new b(this.left,new b(this.right,a)):new b(this,a)},b}(u6);class u9{constructor(a,b){this.items=a,this.eventCount=b}popEvent(a,b){let c,d,e,f;if(0==this.eventCount)return null;let g=this.items.length;for(;;g--)if(this.items.get(g-1).selection){--g;break}b&&(d=(c=this.remapping(g,this.items.length)).maps.length);let h=a.tr,i=[],j=[];return this.items.forEach((a,b)=>{if(!a.step){c||(d=(c=this.remapping(g,b+1)).maps.length),d--,j.push(a);return}if(c){j.push(new va(a.map));let b=a.step.map(c.slice(d)),e;b&&h.maybeStep(b).doc&&(e=h.mapping.maps[h.mapping.maps.length-1],i.push(new va(e,void 0,void 0,i.length+j.length))),d--,e&&c.appendMap(e,d)}else h.maybeStep(a.step);if(a.selection)return e=c?a.selection.map(c.slice(d)):a.selection,f=new u9(this.items.slice(0,g).append(j.reverse().concat(i)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:h,selection:e}}addTransform(a,b,c,d){var e,f;let g,h=[],i=this.eventCount,j=this.items,k=!d&&j.length?j.get(j.length-1):null;for(let c=0;c<a.steps.length;c++){let e=a.steps[c].invert(a.docs[c]),f=new va(a.mapping.maps[c],e,b),g;(g=k&&k.merge(f))&&(f=g,c?h.pop():j=j.slice(0,j.length-1)),h.push(f),b&&(i++,b=void 0),d||(k=f)}let l=i-c.depth;return l>vc&&(e=j,f=l,e.forEach((a,b)=>{if(a.selection&&0==f--)return g=b,!1}),j=e.slice(g),i-=l),new u9(j.append(h),i)}remapping(a,b){let c=new m2;return this.items.forEach((b,d)=>{let e=null!=b.mirrorOffset&&d-b.mirrorOffset>=a?c.maps.length-b.mirrorOffset:void 0;c.appendMap(b.map,e)},a,b),c}addMaps(a){return 0==this.eventCount?this:new u9(this.items.append(a.map(a=>new va(a))),this.eventCount)}rebased(a,b){if(!this.eventCount)return this;let c=[],d=Math.max(0,this.items.length-b),e=a.mapping,f=a.steps.length,g=this.eventCount;this.items.forEach(a=>{a.selection&&g--},d);let h=b;this.items.forEach(b=>{let d=e.getMirror(--h);if(null==d)return;f=Math.min(f,d);let i=e.maps[d];if(b.step){let f=a.steps[d].invert(a.docs[d]),j=b.selection&&b.selection.map(e.slice(h+1,d));j&&g++,c.push(new va(i,f,j))}else c.push(new va(i))},d);let i=[];for(let a=b;a<f;a++)i.push(new va(e.maps[a]));let j=new u9(this.items.slice(0,d).append(i).append(c),g);return j.emptyItemCount()>500&&(j=j.compress(this.items.length-c.length)),j}emptyItemCount(){let a=0;return this.items.forEach(b=>{!b.step&&a++}),a}compress(a=this.items.length){let b=this.remapping(0,a),c=b.maps.length,d=[],e=0;return this.items.forEach((f,g)=>{if(g>=a)d.push(f),f.selection&&e++;else if(f.step){let a=f.step.map(b.slice(c)),g=a&&a.getMap();if(c--,g&&b.appendMap(g,c),a){let h=f.selection&&f.selection.map(b.slice(c));h&&e++;let i=new va(g.invert(),a,h),j,k=d.length-1;(j=d.length&&d[k].merge(i))?d[k]=j:d.push(i)}}else f.map&&c--},this.items.length,0),new u9(u6.from(d.reverse()),e)}}u9.empty=new u9(u6.empty,0);class va{constructor(a,b,c,d){this.map=a,this.step=b,this.selection=c,this.mirrorOffset=d}merge(a){if(this.step&&a.step&&!a.selection){let b=a.step.merge(this.step);if(b)return new va(b.getMap().invert(),b,this.selection)}}}class vb{constructor(a,b,c,d,e){this.done=a,this.undone=b,this.prevRanges=c,this.prevTime=d,this.prevComposition=e}}let vc=20;function vd(a){let b=[];for(let c=a.length-1;c>=0&&0==b.length;c--)a[c].forEach((a,c,d,e)=>b.push(d,e));return b}function ve(a,b){if(!a)return null;let c=[];for(let d=0;d<a.length;d+=2){let e=b.map(a[d],1),f=b.map(a[d+1],-1);e<=f&&c.push(e,f)}return c}let vf=!1,vg=null;function vh(a){let b=a.plugins;if(vg!=b){vf=!1,vg=b;for(let a=0;a<b.length;a++)if(b[a].spec.historyPreserveItems){vf=!0;break}}return vf}let vi=new nX("history"),vj=new nX("closeHistory");function vk(a,b){return(c,d)=>{let e=vi.getState(c);if(!e||0==(a?e.undone:e.done).eventCount)return!1;if(d){let f=function(a,b,c){let d=vh(b),e=vi.get(b).spec.config,f=(c?a.undone:a.done).popEvent(b,d);if(!f)return null;let g=f.selection.resolve(f.transform.doc),h=(c?a.done:a.undone).addTransform(f.transform,b.selection.getBookmark(),e,d),i=new vb(c?h:f.remaining,c?f.remaining:h,null,0,-1);return f.transform.setSelection(g).setMeta(vi,{redo:c,historyState:i})}(e,c,a);f&&d(b?f.scrollIntoView():f)}return!0}}let vl=vk(!1,!0),vm=vk(!0,!0);vk(!1,!1),vk(!0,!1),sZ.create({name:"characterCount",addOptions:()=>({limit:null,mode:"textSize",textCounter:a=>a.length,wordCounter:a=>a.split(" ").filter(a=>""!==a).length}),addStorage:()=>({characters:()=>0,words:()=>0}),onBeforeCreate(){this.storage.characters=a=>{let b=(null==a?void 0:a.node)||this.editor.state.doc;if("textSize"===((null==a?void 0:a.mode)||this.options.mode)){let a=b.textBetween(0,b.content.size,void 0," ");return this.options.textCounter(a)}return b.nodeSize},this.storage.words=a=>{let b=(null==a?void 0:a.node)||this.editor.state.doc,c=b.textBetween(0,b.content.size," "," ");return this.options.wordCounter(c)}},addProseMirrorPlugins(){let a=!1;return[new nU({key:new nX("characterCount"),appendTransaction:(b,c,d)=>{if(a)return;let e=this.options.limit;if(null==e||0===e){a=!0;return}let f=this.storage.characters({node:d.doc});if(f>e){console.warn(`[CharacterCount] Initial content exceeded limit of ${e} characters. Content was automatically trimmed.`);let b=d.tr.deleteRange(0,f-e);return a=!0,b}a=!0},filterTransaction:(a,b)=>{let c=this.options.limit;if(!a.docChanged||0===c||null==c)return!0;let d=this.storage.characters({node:b.doc}),e=this.storage.characters({node:a.doc});if(e<=c||d>c&&e>c&&e<=d)return!0;if(d>c&&e>c&&e>d||!a.getMeta("paste"))return!1;let f=a.selection.$head.pos;return a.deleteRange(f-(e-c),f),!(this.storage.characters({node:a.doc})>c)}})]}});var vn=sZ.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[function(a={}){return new nU({view:b=>new uZ(b,a)})}(this.options)]}});sZ.create({name:"focus",addOptions:()=>({className:"has-focus",mode:"all"}),addProseMirrorPlugins(){return[new nU({key:new nX("focus"),props:{decorations:({doc:a,selection:b})=>{let{isEditable:c,isFocused:d}=this.editor,{anchor:e}=b,f=[];if(!c||!d)return qq.create(a,[]);let g=0;"deepest"===this.options.mode&&a.descendants((a,b)=>{if(!a.isText){if(!(e>=b&&e<=b+a.nodeSize-1))return!1;g+=1}});let h=0;return a.descendants((a,b)=>!a.isText&&!!(e>=b&&e<=b+a.nodeSize-1)&&((h+=1,"deepest"===this.options.mode&&g-h>0||"shallowest"===this.options.mode&&h>1)?"deepest"===this.options.mode:void f.push(qn.node(b,b+a.nodeSize,{class:this.options.className})))),qq.create(a,f)}}})]}});var vo=sZ.create({name:"gapCursor",addProseMirrorPlugins:()=>[new nU({props:{decorations:u5,createSelectionBetween:(a,b,c)=>b.pos==c.pos&&u$.valid(c)?new u$(c):null,handleClick:u3,handleKeyDown:u1,handleDOMEvents:{beforeinput:u4}}})],extendNodeSchema(a){var b;let c={name:a.name,options:a.options,storage:a.storage};return{allowGapCursor:null!=(b=r7(r3(a,"allowGapCursor",c)))?b:null}}}),vp=sZ.create({name:"placeholder",addOptions:()=>({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something â€¦",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}),addProseMirrorPlugins(){return[new nU({key:new nX("placeholder"),props:{decorations:({doc:a,selection:b})=>{let c=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:d}=b,e=[];if(!c)return null;let f=this.editor.isEmpty;return a.descendants((a,b)=>{let c=d>=b&&d<=b+a.nodeSize,g=!a.isLeaf&&sr(a);if((c||!this.options.showOnlyCurrent)&&g){let d=[this.options.emptyNodeClass];f&&d.push(this.options.emptyEditorClass);let g=qn.node(b,b+a.nodeSize,{class:d.join(" "),"data-placeholder":"function"==typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:a,pos:b,hasAnchor:c}):this.options.placeholder});e.push(g)}return this.options.includeChildren}),qq.create(a,e)}}})]}});function vq({types:a,node:b}){return b&&Array.isArray(a)&&a.includes(b.type)||(null==b?void 0:b.type)===a}sZ.create({name:"selection",addOptions:()=>({className:"selection"}),addProseMirrorPlugins(){let{editor:a,options:b}=this;return[new nU({key:new nX("selection"),props:{decorations:c=>c.selection.empty||a.isFocused||!a.isEditable||ss(c.selection)||a.view.dragging?null:qq.create(c.doc,[qn.inline(c.selection.from,c.selection.to,{class:b.className})])}})]}});var vr=sZ.create({name:"trailingNode",addOptions:()=>({node:void 0,notAfter:[]}),addProseMirrorPlugins(){var a;let b=new nX(this.name),c=(null==(a=this.editor.schema.topNodeType.contentMatch.defaultType)?void 0:a.name)||this.options.node||"paragraph",d=Object.entries(this.editor.schema.nodes).map(([,a])=>a).filter(a=>(this.options.notAfter||[]).concat(c).includes(a.name));return[new nU({key:b,appendTransaction:(a,d,e)=>{let{doc:f,tr:g,schema:h}=e,i=b.getState(e),j=f.content.size,k=h.nodes[c];if(i)return g.insert(j,k.create())},state:{init:(a,b)=>!vq({node:b.tr.doc.lastChild,types:d}),apply:(a,b)=>!a.docChanged||a.getMeta("__uniqueIDTransaction")?b:!vq({node:a.doc.lastChild,types:d})}})]}}),vs=sZ.create({name:"undoRedo",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:a,dispatch:b})=>vl(a,b),redo:()=>({state:a,dispatch:b})=>vm(a,b)}),addProseMirrorPlugins(){return[function(a={}){return new nU({key:vi,state:{init:()=>new vb(u9.empty,u9.empty,null,0,-1),apply:(b,c,d)=>(function(a,b,c,d){let e=c.getMeta(vi),f;if(e)return e.historyState;c.getMeta(vj)&&(a=new vb(a.done,a.undone,null,0,-1));let g=c.getMeta("appendedTransaction");if(0==c.steps.length)return a;if(g&&g.getMeta(vi))if(g.getMeta(vi).redo)return new vb(a.done.addTransform(c,void 0,d,vh(b)),a.undone,vd(c.mapping.maps),a.prevTime,a.prevComposition);else return new vb(a.done,a.undone.addTransform(c,void 0,d,vh(b)),null,a.prevTime,a.prevComposition);if(!1===c.getMeta("addToHistory")||g&&!1===g.getMeta("addToHistory"))if(f=c.getMeta("rebased"))return new vb(a.done.rebased(c,f),a.undone.rebased(c,f),ve(a.prevRanges,c.mapping),a.prevTime,a.prevComposition);else return new vb(a.done.addMaps(c.mapping.maps),a.undone.addMaps(c.mapping.maps),ve(a.prevRanges,c.mapping),a.prevTime,a.prevComposition);{let e=c.getMeta("composition"),f=0==a.prevTime||!g&&a.prevComposition!=e&&(a.prevTime<(c.time||0)-d.newGroupDelay||!function(a,b){if(!b)return!1;if(!a.docChanged)return!0;let c=!1;return a.mapping.maps[0].forEach((a,d)=>{for(let e=0;e<b.length;e+=2)a<=b[e+1]&&d>=b[e]&&(c=!0)}),c}(c,a.prevRanges)),h=g?ve(a.prevRanges,c.mapping):vd(c.mapping.maps);return new vb(a.done.addTransform(c,f?b.selection.getBookmark():void 0,d,vh(b)),u9.empty,h,c.time,null==e?a.prevComposition:e)}})(c,d,b,a)},config:a={depth:a.depth||100,newGroupDelay:a.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(a,b){let c=b.inputType,d="historyUndo"==c?vl:"historyRedo"==c?vm:null;return!!d&&!!a.editable&&(b.preventDefault(),d(a.state,a.dispatch))}}}})}(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-Ñ":()=>this.editor.commands.undo(),"Shift-Mod-Ñ":()=>this.editor.commands.redo()}}}),vt=sZ.create({name:"textAlign",addOptions:()=>({types:[],alignments:["left","center","right","justify"],defaultAlignment:null}),addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:a=>{let b=a.style.textAlign;return this.options.alignments.includes(b)?b:this.options.defaultAlignment},renderHTML:a=>a.textAlign?{style:`text-align: ${a.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:a=>({commands:b})=>!!this.options.alignments.includes(a)&&this.options.types.map(c=>b.updateAttributes(c,{textAlign:a})).some(a=>a),unsetTextAlign:()=>({commands:a})=>this.options.types.map(b=>a.resetAttributes(b,"textAlign")).some(a=>a),toggleTextAlign:a=>({editor:b,commands:c})=>!!this.options.alignments.includes(a)&&(b.isActive({textAlign:a})?c.unsetTextAlign():c.setTextAlign(a))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),vu=(a,b)=>{if("slot"===a)return 0;if(a instanceof Function)return a(b);let{children:c,...d}=null!=b?b:{};if("svg"===a)throw Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[a,d,c]},vv=/^\s*>\s$/,vw=tq.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:a}){return vu("blockquote",{...sa(this.options.HTMLAttributes,a),children:vu("slot",{})})},parseMarkdown:(a,b)=>b.createNode("blockquote",void 0,b.parseChildren(a.tokens||[])),renderMarkdown:(a,b)=>{if(!a.content)return"";let c=[];return a.content.forEach(a=>{let d=b.renderChildren([a]).split("\n").map(a=>""===a.trim()?">":`> ${a}`);c.push(d.join("\n"))}),c.join(`
>
`)},addCommands(){return{setBlockquote:()=>({commands:a})=>a.wrapIn(this.name),toggleBlockquote:()=>({commands:a})=>a.toggleWrap(this.name),unsetBlockquote:()=>({commands:a})=>a.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[tf({find:vv,type:this.type})]}}),vx=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,vy=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,vz=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,vA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,vB=sV.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:a=>"normal"!==a.style.fontWeight&&null},{style:"font-weight=400",clearMark:a=>a.type.name===this.name},{style:"font-weight",getAttrs:a=>/^(bold(er)?|[5-9]\d{2,})$/.test(a)&&null}]},renderHTML({HTMLAttributes:a}){return vu("strong",{...sa(this.options.HTMLAttributes,a),children:vu("slot",{})})},markdownTokenName:"strong",parseMarkdown:(a,b)=>b.applyMark("bold",b.parseInline(a.tokens||[])),renderMarkdown:(a,b)=>`**${b.renderChildren(a)}**`,addCommands(){return{setBold:()=>({commands:a})=>a.setMark(this.name),toggleBold:()=>({commands:a})=>a.toggleMark(this.name),unsetBold:()=>({commands:a})=>a.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[tc({find:vx,type:this.type}),tc({find:vz,type:this.type})]},addPasteRules(){return[tr({find:vy,type:this.type}),tr({find:vA,type:this.type})]}}),vC=/(^|[^`])`([^`]+)`(?!`)$/,vD=/(^|[^`])`([^`]+)`(?!`)/g,vE=sV.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:a}){return["code",sa(this.options.HTMLAttributes,a),0]},markdownTokenName:"codespan",parseMarkdown:(a,b)=>b.applyMark("code",[{type:"text",text:a.text||""}]),renderMarkdown:(a,b)=>a.content?`\`${b.renderChildren(a.content)}\``:"",addCommands(){return{setCode:()=>({commands:a})=>a.setMark(this.name),toggleCode:()=>({commands:a})=>a.toggleMark(this.name),unsetCode:()=>({commands:a})=>a.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[tc({find:vC,type:this.type})]},addPasteRules(){return[tr({find:vD,type:this.type})]}}),vF=/^```([a-z]+)?[\s\n]$/,vG=/^~~~([a-z]+)?[\s\n]$/,vH=tq.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:a=>{var b;let{languageClassPrefix:c}=this.options;if(!c)return null;let d=[...(null==(b=a.firstElementChild)?void 0:b.classList)||[]].filter(a=>a.startsWith(c)).map(a=>a.replace(c,""))[0];return d||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:a,HTMLAttributes:b}){return["pre",sa(this.options.HTMLAttributes,b),["code",{class:a.attrs.language?this.options.languageClassPrefix+a.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(a,b)=>{var c;return(null==(c=a.raw)?void 0:c.startsWith("```"))===!1&&"indented"!==a.codeBlockStyle?[]:b.createNode("codeBlock",{language:a.lang||null},a.text?[b.createTextNode(a.text)]:[])},renderMarkdown:(a,b)=>{var c;let d=(null==(c=a.attrs)?void 0:c.language)||"";return a.content?[`\`\`\`${d}`,b.renderChildren(a.content),"```"].join("\n"):`\`\`\`${d}

\`\`\``},addCommands(){return{setCodeBlock:a=>({commands:b})=>b.setNode(this.name,a),toggleCodeBlock:a=>({commands:b})=>b.toggleNode(this.name,"paragraph",a)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:a,$anchor:b}=this.editor.state.selection,c=1===b.pos;return!!a&&b.parent.type.name===this.name&&(!!c||!b.parent.textContent.length)&&this.editor.commands.clearNodes()},Tab:({editor:a})=>{var b;if(!this.options.enableTabIndentation)return!1;let c=null!=(b=this.options.tabSize)?b:4,{state:d}=a,{selection:e}=d,{$from:f,empty:g}=e;if(f.parent.type!==this.type)return!1;let h=" ".repeat(c);return g?a.commands.insertContent(h):a.commands.command(({tr:a})=>{let{from:b,to:c}=e,f=d.doc.textBetween(b,c,"\n","\n").split("\n").map(a=>h+a).join("\n");return a.replaceWith(b,c,d.schema.text(f)),!0})},"Shift-Tab":({editor:a})=>{var b;if(!this.options.enableTabIndentation)return!1;let c=null!=(b=this.options.tabSize)?b:4,{state:d}=a,{selection:e}=d,{$from:f,empty:g}=e;return f.parent.type===this.type&&(g?a.commands.command(({tr:a})=>{var b;let{pos:e}=f,g=f.start(),h=f.end(),i=d.doc.textBetween(g,h,"\n","\n").split("\n"),j=0,k=0,l=e-g;for(let a=0;a<i.length;a+=1){if(k+i[a].length>=l){j=a;break}k+=i[a].length+1}let m=Math.min(((null==(b=i[j].match(/^ */))?void 0:b[0])||"").length,c);if(0===m)return!0;let n=g;for(let a=0;a<j;a+=1)n+=i[a].length+1;return a.delete(n,n+m),e-n<=m&&a.setSelection(nG.create(a.doc,n)),!0}):a.commands.command(({tr:a})=>{let{from:b,to:f}=e,g=d.doc.textBetween(b,f,"\n","\n").split("\n").map(a=>{var b;let d=Math.min(((null==(b=a.match(/^ */))?void 0:b[0])||"").length,c);return a.slice(d)}).join("\n");return a.replaceWith(b,f,d.schema.text(g)),!0}))},Enter:({editor:a})=>{if(!this.options.exitOnTripleEnter)return!1;let{state:b}=a,{selection:c}=b,{$from:d,empty:e}=c;if(!e||d.parent.type!==this.type)return!1;let f=d.parentOffset===d.parent.nodeSize-2,g=d.parent.textContent.endsWith("\n\n");return!!f&&!!g&&a.chain().command(({tr:a})=>(a.delete(d.pos-2,d.pos),!0)).exitCode().run()},ArrowDown:({editor:a})=>{if(!this.options.exitOnArrowDown)return!1;let{state:b}=a,{selection:c,doc:d}=b,{$from:e,empty:f}=c;if(!f||e.parent.type!==this.type||e.parentOffset!==e.parent.nodeSize-2)return!1;let g=e.after();return void 0!==g&&(d.nodeAt(g)?a.commands.command(({tr:a})=>(a.setSelection(nC.near(d.resolve(g))),!0)):a.commands.exitCode())}}},addInputRules(){return[te({find:vF,type:this.type,getAttributes:a=>({language:a[1]})}),te({find:vG,type:this.type,getAttributes:a=>({language:a[1]})})]},addProseMirrorPlugins(){return[new nU({key:new nX("codeBlockVSCodeHandler"),props:{handlePaste:(a,b)=>{if(!b.clipboardData||this.editor.isActive(this.type.name))return!1;let c=b.clipboardData.getData("text/plain"),d=b.clipboardData.getData("vscode-editor-data"),e=d?JSON.parse(d):void 0,f=null==e?void 0:e.mode;if(!c||!f)return!1;let{tr:g,schema:h}=a.state,i=h.text(c.replace(/\r\n?/g,"\n"));return g.replaceSelectionWith(this.type.create({language:f},i)),g.selection.$from.parent.type!==this.type&&g.setSelection(nG.near(g.doc.resolve(Math.max(0,g.selection.from-2)))),g.setMeta("paste",!0),a.dispatch(g),!0}}})]}}),vI=tq.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(a,b)=>a.content?b.renderChildren(a.content,"\n\n"):""}),vJ=tq.create({name:"hardBreak",markdownTokenName:"br",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:a}){return["br",sa(this.options.HTMLAttributes,a)]},renderText:()=>"\n",renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:a,chain:b,state:c,editor:d})=>a.first([()=>a.exitCode(),()=>a.command(()=>{let{selection:a,storedMarks:e}=c;if(a.$from.parent.type.spec.isolating)return!1;let{keepMarks:f}=this.options,{splittableMarks:g}=d.extensionManager,h=e||a.$to.parentOffset&&a.$from.marks();return b().insertContent({type:this.name}).command(({tr:a,dispatch:b})=>{if(b&&h&&f){let b=h.filter(a=>g.includes(a.type.name));a.ensureMarks(b)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),vK=tq.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(a=>({tag:`h${a}`,attrs:{level:a}}))},renderHTML({node:a,HTMLAttributes:b}){let c=this.options.levels.includes(a.attrs.level)?a.attrs.level:this.options.levels[0];return[`h${c}`,sa(this.options.HTMLAttributes,b),0]},parseMarkdown:(a,b)=>b.createNode("heading",{level:a.depth||1},b.parseInline(a.tokens||[])),renderMarkdown:(a,b)=>{var c;let d=(null==(c=a.attrs)?void 0:c.level)?parseInt(a.attrs.level,10):1,e="#".repeat(d);return a.content?`${e} ${b.renderChildren(a.content)}`:""},addCommands(){return{setHeading:a=>({commands:b})=>!!this.options.levels.includes(a.level)&&b.setNode(this.name,a),toggleHeading:a=>({commands:b})=>!!this.options.levels.includes(a.level)&&b.toggleNode(this.name,"paragraph",a)}},addKeyboardShortcuts(){return this.options.levels.reduce((a,b)=>({...a,...{[`Mod-Alt-${b}`]:()=>this.editor.commands.toggleHeading({level:b})}}),{})},addInputRules(){return this.options.levels.map(a=>te({find:RegExp(`^(#{${Math.min(...this.options.levels)},${a}})\\s$`),type:this.type,getAttributes:{level:a}}))}}),vL=tq.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{},nextNodeType:"paragraph"}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:a}){return["hr",sa(this.options.HTMLAttributes,a)]},markdownTokenName:"hr",parseMarkdown:(a,b)=>b.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:a,state:b})=>{if(!function(a,b){let{selection:c}=a,{$from:d}=c;if(c instanceof nI){let a=d.index();return d.parent.canReplaceWith(a,a+1,b)}let e=d.depth;for(;e>=0;){let a=d.index(e);if(d.node(e).contentMatchAt(a).matchType(b))return!0;e-=1}return!1}(b,b.schema.nodes[this.name]))return!1;let{selection:c}=b,{$to:d}=c,e=a();return ss(c)?e.insertContentAt(d.pos,{type:this.name}):e.insertContent({type:this.name}),e.command(({state:a,tr:b,dispatch:c})=>{if(c){let{$to:c}=b.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?b.setSelection(nG.create(b.doc,c.pos+1)):c.nodeAfter.isBlock?b.setSelection(nI.create(b.doc,c.pos)):b.setSelection(nG.create(b.doc,c.pos));else{let e=a.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,f=null==e?void 0:e.create();f&&(b.insert(d,f),b.setSelection(nG.create(b.doc,d+1)))}b.scrollIntoView()}return!0}).run()}}},addInputRules(){return[td({find:/^(?:---|â€”-|___\s|\*\*\*\s)$/,type:this.type})]}}),vM=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,vN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,vO=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,vP=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,vQ=sV.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:a=>"normal"!==a.style.fontStyle&&null},{style:"font-style=normal",clearMark:a=>a.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:a}){return["em",sa(this.options.HTMLAttributes,a),0]},addCommands(){return{setItalic:()=>({commands:a})=>a.setMark(this.name),toggleItalic:()=>({commands:a})=>a.toggleMark(this.name),unsetItalic:()=>({commands:a})=>a.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(a,b)=>b.applyMark("italic",b.parseInline(a.tokens||[])),renderMarkdown:(a,b)=>`*${b.renderChildren(a)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[tc({find:vM,type:this.type}),tc({find:vO,type:this.type})]},addPasteRules(){return[tr({find:vN,type:this.type}),tr({find:vP,type:this.type})]}}),vR=Object.defineProperty,vS="textStyle",vT=/^\s*([-+*])\s$/,vU=tq.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:a}){return["ul",sa(this.options.HTMLAttributes,a),0]},markdownTokenName:"list",parseMarkdown:(a,b)=>"list"!==a.type||a.ordered?[]:{type:"bulletList",content:a.items?b.parseChildren(a.items):[]},renderMarkdown:(a,b)=>a.content?b.renderChildren(a.content,"\n"):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:a,chain:b})=>this.options.keepAttributes?b().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(vS)).run():a.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let a=tf({find:vT,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(a=tf({find:vT,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(vS),editor:this.editor})),[a]}}),vV=tq.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:a}){return["li",sa(this.options.HTMLAttributes,a),0]},markdownTokenName:"list_item",parseMarkdown:(a,b)=>{if("list_item"!==a.type)return[];let c=[];if(a.tokens&&a.tokens.length>0)if(a.tokens.some(a=>"paragraph"===a.type))c=b.parseChildren(a.tokens);else{let d=a.tokens[0];if(d&&"text"===d.type&&d.tokens&&d.tokens.length>0){if(c=[{type:"paragraph",content:b.parseInline(d.tokens)}],a.tokens.length>1){let d=a.tokens.slice(1),e=b.parseChildren(d);c.push(...e)}}else c=b.parseChildren(a.tokens)}return 0===c.length&&(c=[{type:"paragraph",content:[]}]),{type:"listItem",content:c}},renderMarkdown:(a,b,c)=>tp(a,b,a=>"bulletList"===a.parentType?"- ":"orderedList"===a.parentType?`${a.index+1}. `:"- ",c),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),vW={},vX={findListItemPos:()=>vZ,getNextListDepth:()=>v$,handleBackspace:()=>v2,handleDelete:()=>v5,hasListBefore:()=>v_,hasListItemAfter:()=>v6,hasListItemBefore:()=>v0,listItemHasSubList:()=>v1,nextListIsDeeper:()=>v3,nextListIsHigher:()=>v4};for(var vY in vX)vR(vW,vY,{get:vX[vY],enumerable:!0});var vZ=(a,b)=>{let{$from:c}=b.selection,d=rd(a,b.schema),e=c.depth,f=c.pos,g=null;for(;e>0&&null===g;)c.node(e).type===d?g=e:(e-=1,f-=1);return null===g?null:{$pos:b.doc.resolve(f),depth:g}},v$=(a,b)=>{let c=vZ(a,b);if(!c)return!1;let[,d]=((a,b,c,d=20)=>{let e=a.doc.resolve(c),f=d,g=null;for(;f>0&&null===g;){let a=e.node(f);(null==a?void 0:a.type.name)===b?g=a:f-=1}return[g,f]})(b,a,c.$pos.pos+4);return d},v_=(a,b,c)=>{let{$anchor:d}=a.selection,e=Math.max(0,d.pos-2),f=a.doc.resolve(e).node();return!!f&&!!c.includes(f.type.name)},v0=(a,b)=>{var c;let{$anchor:d}=b.selection,e=b.doc.resolve(d.pos-2);return 0!==e.index()&&(null==(c=e.nodeBefore)?void 0:c.type.name)===a},v1=(a,b,c)=>{if(!c)return!1;let d=rd(a,b.schema),e=!1;return c.descendants(a=>{a.type===d&&(e=!0)}),e},v2=(a,b,c)=>{if(a.commands.undoInputRule())return!0;if(a.state.selection.from!==a.state.selection.to)return!1;if(!rL(a.state,b)&&v_(a.state,b,c)){let{$anchor:c}=a.state.selection,d=a.state.doc.resolve(c.before()-1),e=[];d.node().descendants((a,c)=>{a.type.name===b&&e.push({node:a,pos:c})});let f=e.at(-1);if(!f)return!1;let g=a.state.doc.resolve(d.start()+f.pos+1);return a.chain().cut({from:c.start()-1,to:c.end()+1},g.end()).joinForward().run()}if(!rL(a.state,b)||!(a=>{let{$from:b,$to:c}=a.selection;return!(b.parentOffset>0)&&b.pos===c.pos})(a.state))return!1;let d=vZ(b,a.state);if(!d)return!1;let e=a.state.doc.resolve(d.$pos.pos-2).node(d.depth),f=v1(b,a.state,e);return v0(b,a.state)&&!f?a.commands.joinItemBackward():a.chain().liftListItem(b).run()},v3=(a,b)=>{let c=v$(a,b),d=vZ(a,b);return!!d&&!!c&&c>d.depth},v4=(a,b)=>{let c=v$(a,b),d=vZ(a,b);return!!d&&!!c&&c<d.depth},v5=(a,b)=>{if(!rL(a.state,b)||!((a,b)=>{let{$from:c,$to:d,$anchor:e}=a.selection;if(b){let c=r2(a=>a.type.name===b)(a.selection);if(!c)return!1;let d=a.doc.resolve(c.pos+1);return e.pos+1===d.end()}return!(d.parentOffset<d.parent.nodeSize-2)&&c.pos===d.pos})(a.state,b))return!1;let{selection:c}=a.state,{$from:d,$to:e}=c;return!(!c.empty&&d.sameParent(e))&&(v3(b,a.state)?a.chain().focus(a.state.selection.from+4).lift(b).joinBackward().run():v4(b,a.state)?a.chain().joinForward().joinBackward().run():a.commands.joinItemForward())},v6=(a,b)=>{var c;let{$anchor:d}=b.selection,e=b.doc.resolve(d.pos-d.parentOffset-2);return e.index()!==e.parent.childCount-1&&(null==(c=e.nodeAfter)?void 0:c.type.name)===a},v7=sZ.create({name:"listKeymap",addOptions:()=>({listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}),addKeyboardShortcuts(){return{Delete:({editor:a})=>{let b=!1;return this.options.listTypes.forEach(({itemName:c})=>{void 0!==a.state.schema.nodes[c]&&v5(a,c)&&(b=!0)}),b},"Mod-Delete":({editor:a})=>{let b=!1;return this.options.listTypes.forEach(({itemName:c})=>{void 0!==a.state.schema.nodes[c]&&v5(a,c)&&(b=!0)}),b},Backspace:({editor:a})=>{let b=!1;return this.options.listTypes.forEach(({itemName:c,wrapperNames:d})=>{void 0!==a.state.schema.nodes[c]&&v2(a,c,d)&&(b=!0)}),b},"Mod-Backspace":({editor:a})=>{let b=!1;return this.options.listTypes.forEach(({itemName:c,wrapperNames:d})=>{void 0!==a.state.schema.nodes[c]&&v2(a,c,d)&&(b=!0)}),b}}}}),v8=/^(\s*)(\d+)\.\s+(.*)$/,v9=/^\s/,wa="textStyle",wb=/^(\d+)\.\s$/,wc=tq.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:a=>a.hasAttribute("start")?parseInt(a.getAttribute("start")||"",10):1},type:{default:null,parseHTML:a=>a.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:a}){let{start:b,...c}=a;return 1===b?["ol",sa(this.options.HTMLAttributes,c),0]:["ol",sa(this.options.HTMLAttributes,a),0]},markdownTokenName:"list",parseMarkdown:(a,b)=>{var c;if("list"!==a.type||!a.ordered)return[];let d=a.start||1,e=a.items?(c=a.items,c.map(a=>{if("list_item"!==a.type)return b.parseChildren([a])[0];let c=[];return a.tokens&&a.tokens.length>0&&a.tokens.forEach(a=>{if("paragraph"===a.type||"list"===a.type||"blockquote"===a.type||"code"===a.type)c.push(...b.parseChildren([a]));else if("text"===a.type&&a.tokens){let d=b.parseChildren([a]);c.push({type:"paragraph",content:d})}else{let d=b.parseChildren([a]);d.length>0&&c.push(...d)}}),{type:"listItem",content:c}})):[];return 1!==d?{type:"orderedList",attrs:{start:d},content:e}:{type:"orderedList",content:e}},renderMarkdown:(a,b)=>a.content?b.renderChildren(a.content,"\n"):"",markdownTokenizer:{name:"orderedList",level:"block",start:a=>{let b=a.match(/^(\s*)(\d+)\.\s+/),c=null==b?void 0:b.index;return void 0!==c?c:-1},tokenize:(a,b,c)=>{var d;let e=a.split("\n"),[f,g]=function(a){let b=[],c=0,d=0;for(;c<a.length;){let e=a[c],f=e.match(v8);if(!f)break;let[,g,h,i]=f,j=g.length,k=i,l=c+1,m=[e];for(;l<a.length;){let b=a[l];if(b.match(v8))break;if(""===b.trim())m.push(b),k+="\n",l+=1;else if(b.match(v9))m.push(b),k+=`
${b.slice(j+2)}`,l+=1;else break}b.push({indent:j,number:parseInt(h,10),content:k.trim(),raw:m.join("\n")}),d=l,c=l}return[b,d]}(e);if(0===f.length)return;let h=function a(b,c,d){var e;let f=[],g=0;for(;g<b.length;){let h=b[g];if(h.indent===c){let i=h.content.split("\n"),j=(null==(e=i[0])?void 0:e.trim())||"",k=[];j&&k.push({type:"paragraph",raw:j,tokens:d.inlineTokens(j)});let l=i.slice(1).join("\n").trim();if(l){let a=d.blockTokens(l);k.push(...a)}let m=g+1,n=[];for(;m<b.length&&b[m].indent>c;)n.push(b[m]),m+=1;if(n.length>0){let b=Math.min(...n.map(a=>a.indent)),c=a(n,b,d);k.push({type:"list",ordered:!0,start:n[0].number,items:c,raw:n.map(a=>a.raw).join("\n")})}f.push({type:"list_item",raw:h.raw,tokens:k}),g=m}else g+=1}return f}(f,0,c);if(0!==h.length)return{type:"list",ordered:!0,start:(null==(d=f[0])?void 0:d.number)||1,items:h,raw:e.slice(0,g).join("\n")}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:a,chain:b})=>this.options.keepAttributes?b().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(wa)).run():a.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let a=tf({find:wb,type:this.type,getAttributes:a=>({start:+a[1]}),joinPredicate:(a,b)=>b.childCount+b.attrs.start===+a[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(a=tf({find:wb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:a=>({start:+a[1],...this.editor.getAttributes(wa)}),joinPredicate:(a,b)=>b.childCount+b.attrs.start===+a[1],editor:this.editor})),[a]}}),wd=/^\s*(\[([( |x])?\])\s$/,we=tq.create({name:"taskItem",addOptions:()=>({nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}),content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes:()=>({checked:{default:!1,keepOnSplit:!1,parseHTML:a=>{let b=a.getAttribute("data-checked");return""===b||"true"===b},renderHTML:a=>({"data-checked":a.checked})}}),parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:a,HTMLAttributes:b}){return["li",sa(this.options.HTMLAttributes,b,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:a.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(a,b)=>{let c=[];if(a.tokens&&a.tokens.length>0?c.push(b.createNode("paragraph",{},b.parseInline(a.tokens))):a.text?c.push(b.createNode("paragraph",{},[b.createNode("text",{text:a.text})])):c.push(b.createNode("paragraph",{},[])),a.nestedTokens&&a.nestedTokens.length>0){let d=b.parseChildren(a.nestedTokens);c.push(...d)}return b.createNode("taskItem",{checked:a.checked||!1},c)},renderMarkdown:(a,b)=>{var c;let d=(null==(c=a.attrs)?void 0:c.checked)?"x":" ";return tp(a,b,`- [${d}] `)},addKeyboardShortcuts(){let a={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...a,Tab:()=>this.editor.commands.sinkListItem(this.name)}:a},addNodeView(){return({node:a,HTMLAttributes:b,getPos:c,editor:d})=>{let e=document.createElement("li"),f=document.createElement("label"),g=document.createElement("span"),h=document.createElement("input"),i=document.createElement("div"),j=a=>{var b,c;h.ariaLabel=(null==(c=null==(b=this.options.a11y)?void 0:b.checkboxLabel)?void 0:c.call(b,a,h.checked))||`Task item checkbox for ${a.textContent||"empty task item"}`};return j(a),f.contentEditable="false",h.type="checkbox",h.addEventListener("mousedown",a=>a.preventDefault()),h.addEventListener("change",b=>{if(!d.isEditable&&!this.options.onReadOnlyChecked){h.checked=!h.checked;return}let{checked:e}=b.target;d.isEditable&&"function"==typeof c&&d.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:a})=>{let b=c();if("number"!=typeof b)return!1;let d=a.doc.nodeAt(b);return a.setNodeMarkup(b,void 0,{...null==d?void 0:d.attrs,checked:e}),!0}).run(),d.isEditable||!this.options.onReadOnlyChecked||this.options.onReadOnlyChecked(a,e)||(h.checked=!h.checked)}),Object.entries(this.options.HTMLAttributes).forEach(([a,b])=>{e.setAttribute(a,b)}),e.dataset.checked=a.attrs.checked,h.checked=a.attrs.checked,f.append(h,g),e.append(f,i),Object.entries(b).forEach(([a,b])=>{e.setAttribute(a,b)}),{dom:e,contentDOM:i,update:a=>a.type===this.type&&(e.dataset.checked=a.attrs.checked,h.checked=a.attrs.checked,j(a),!0)}}},addInputRules(){return[tf({find:wd,type:this.type,getAttributes:a=>({checked:"x"===a[a.length-1]})})]}}),wf=tq.create({name:"taskList",addOptions:()=>({itemTypeName:"taskItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:a}){return["ul",sa(this.options.HTMLAttributes,a,{"data-type":this.name}),0]},parseMarkdown:(a,b)=>b.createNode("taskList",{},b.parseChildren(a.items||[])),renderMarkdown:(a,b)=>a.content?b.renderChildren(a.content,"\n"):"",markdownTokenizer:{name:"taskList",level:"block",start(a){var b;let c=null==(b=a.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))?void 0:b.index;return void 0!==c?c:-1},tokenize(a,b,c){let d=a=>{let b=to(a,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:"x"===a[3].toLowerCase()}),createToken:(a,b)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:c.inlineTokens(a.mainContent),nestedTokens:b}),customNestedParser:d},c);return b?[{type:"taskList",raw:b.raw,items:b.items}]:c.blockTokens(a)},e=to(a,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:"x"===a[3].toLowerCase()}),createToken:(a,b)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:c.inlineTokens(a.mainContent),nestedTokens:b}),customNestedParser:d},c);if(e)return{type:"taskList",raw:e.raw,items:e.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:a})=>a.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});sZ.create({name:"listKit",addExtensions(){let a=[];return!1!==this.options.bulletList&&a.push(vU.configure(this.options.bulletList)),!1!==this.options.listItem&&a.push(vV.configure(this.options.listItem)),!1!==this.options.listKeymap&&a.push(v7.configure(this.options.listKeymap)),!1!==this.options.orderedList&&a.push(wc.configure(this.options.orderedList)),!1!==this.options.taskItem&&a.push(we.configure(this.options.taskItem)),!1!==this.options.taskList&&a.push(wf.configure(this.options.taskList)),a}});var wg=tq.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:a}){return["p",sa(this.options.HTMLAttributes,a),0]},parseMarkdown:(a,b)=>{let c=a.tokens||[];return 1===c.length&&"image"===c[0].type?b.parseChildren([c[0]]):b.createNode("paragraph",void 0,b.parseInline(c))},renderMarkdown:(a,b)=>a&&Array.isArray(a.content)?b.renderChildren(a.content):"",addCommands(){return{setParagraph:()=>({commands:a})=>a.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),wh=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,wi=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,wj=sV.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:a=>!!a.includes("line-through")&&{}}],renderHTML({HTMLAttributes:a}){return["s",sa(this.options.HTMLAttributes,a),0]},markdownTokenName:"del",parseMarkdown:(a,b)=>b.applyMark("strike",b.parseInline(a.tokens||[])),renderMarkdown:(a,b)=>`~~${b.renderChildren(a)}~~`,addCommands(){return{setStrike:()=>({commands:a})=>a.setMark(this.name),toggleStrike:()=>({commands:a})=>a.toggleMark(this.name),unsetStrike:()=>({commands:a})=>a.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[tc({find:wh,type:this.type})]},addPasteRules(){return[tr({find:wi,type:this.type})]}}),wk=tq.create({name:"text",group:"inline",parseMarkdown:a=>({type:"text",text:a.text||""}),renderMarkdown:a=>a.text||""}),wl=sV.create({name:"underline",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:a=>!!a.includes("underline")&&{}}],renderHTML({HTMLAttributes:a}){return["u",sa(this.options.HTMLAttributes,a),0]},parseMarkdown(a,b){return b.applyMark(this.name||"underline",b.parseInline(a.tokens||[]))},renderMarkdown:(a,b)=>`++${b.renderChildren(a)}++`,markdownTokenizer:{name:"underline",level:"inline",start:a=>a.indexOf("++"),tokenize(a,b,c){let d=/^(\+\+)([\s\S]+?)(\+\+)/.exec(a);if(!d)return;let e=d[2].trim();return{type:"underline",raw:d[0],text:e,tokens:c.inlineTokens(e)}}},addCommands(){return{setUnderline:()=>({commands:a})=>a.setMark(this.name),toggleUnderline:()=>({commands:a})=>a.toggleMark(this.name),unsetUnderline:()=>({commands:a})=>a.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),wm=sZ.create({name:"starterKit",addExtensions(){var a,b,c,d;let e=[];return!1!==this.options.bold&&e.push(vB.configure(this.options.bold)),!1!==this.options.blockquote&&e.push(vw.configure(this.options.blockquote)),!1!==this.options.bulletList&&e.push(vU.configure(this.options.bulletList)),!1!==this.options.code&&e.push(vE.configure(this.options.code)),!1!==this.options.codeBlock&&e.push(vH.configure(this.options.codeBlock)),!1!==this.options.document&&e.push(vI.configure(this.options.document)),!1!==this.options.dropcursor&&e.push(vn.configure(this.options.dropcursor)),!1!==this.options.gapcursor&&e.push(vo.configure(this.options.gapcursor)),!1!==this.options.hardBreak&&e.push(vJ.configure(this.options.hardBreak)),!1!==this.options.heading&&e.push(vK.configure(this.options.heading)),!1!==this.options.undoRedo&&e.push(vs.configure(this.options.undoRedo)),!1!==this.options.horizontalRule&&e.push(vL.configure(this.options.horizontalRule)),!1!==this.options.italic&&e.push(vQ.configure(this.options.italic)),!1!==this.options.listItem&&e.push(vV.configure(this.options.listItem)),!1!==this.options.listKeymap&&e.push(v7.configure(null==(a=this.options)?void 0:a.listKeymap)),!1!==this.options.link&&e.push(uY.configure(null==(b=this.options)?void 0:b.link)),!1!==this.options.orderedList&&e.push(wc.configure(this.options.orderedList)),!1!==this.options.paragraph&&e.push(wg.configure(this.options.paragraph)),!1!==this.options.strike&&e.push(wj.configure(this.options.strike)),!1!==this.options.text&&e.push(wk.configure(this.options.text)),!1!==this.options.underline&&e.push(wl.configure(null==(c=this.options)?void 0:c.underline)),!1!==this.options.trailingNode&&e.push(vr.configure(null==(d=this.options)?void 0:d.trailingNode)),e}});let wn=(a=new Map,b=null,c)=>({nextPart:a,validators:b,classGroupId:c}),wo=[],wp=(a,b,c)=>{if(0==a.length-b)return c.classGroupId;let d=a[b],e=c.nextPart.get(d);if(e){let c=wp(a,b+1,e);if(c)return c}let f=c.validators;if(null===f)return;let g=0===b?a.join("-"):a.slice(b).join("-"),h=f.length;for(let a=0;a<h;a++){let b=f[a];if(b.validator(g))return b.classGroupId}},wq=(a,b)=>{let c=wn();for(let d in a)wr(a[d],c,d,b);return c},wr=(a,b,c,d)=>{let e=a.length;for(let f=0;f<e;f++)ws(a[f],b,c,d)},ws=(a,b,c,d)=>{"string"==typeof a?wt(a,b,c):"function"==typeof a?wu(a,b,c,d):wv(a,b,c,d)},wt=(a,b,c)=>{(""===a?b:ww(b,a)).classGroupId=c},wu=(a,b,c,d)=>{wx(a)?wr(a(d),b,c,d):(null===b.validators&&(b.validators=[]),b.validators.push({classGroupId:c,validator:a}))},wv=(a,b,c,d)=>{let e=Object.entries(a),f=e.length;for(let a=0;a<f;a++){let[f,g]=e[a];wr(g,ww(b,f),c,d)}},ww=(a,b)=>{let c=a,d=b.split("-"),e=d.length;for(let a=0;a<e;a++){let b=d[a],e=c.nextPart.get(b);e||(e=wn(),c.nextPart.set(b,e)),c=e}return c},wx=a=>"isThemeGetter"in a&&!0===a.isThemeGetter,wy=[],wz=(a,b,c,d,e)=>({modifiers:a,hasImportantModifier:b,baseClassName:c,maybePostfixModifierPosition:d,isExternal:e}),wA=/\s+/,wB=a=>{let b;if("string"==typeof a)return a;let c="";for(let d=0;d<a.length;d++)a[d]&&(b=wB(a[d]))&&(c&&(c+=" "),c+=b);return c},wC=[],wD=a=>{let b=b=>b[a]||wC;return b.isThemeGetter=!0,b},wE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,wF=/^\((?:(\w[\w-]*):)?(.+)\)$/i,wG=/^\d+\/\d+$/,wH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wJ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,wK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,wL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wM=a=>wG.test(a),wN=a=>!!a&&!Number.isNaN(Number(a)),wO=a=>!!a&&Number.isInteger(Number(a)),wP=a=>a.endsWith("%")&&wN(a.slice(0,-1)),wQ=a=>wH.test(a),wR=()=>!0,wS=a=>wI.test(a)&&!wJ.test(a),wT=()=>!1,wU=a=>wK.test(a),wV=a=>wL.test(a),wW=a=>!wY(a)&&!w2(a),wX=a=>w9(a,xd,wT),wY=a=>wE.test(a),wZ=a=>w9(a,xe,wS),w$=a=>w9(a,xf,wN),w_=a=>w9(a,xb,wT),w0=a=>w9(a,xc,wV),w1=a=>w9(a,xh,wU),w2=a=>wF.test(a),w3=a=>xa(a,xe),w4=a=>xa(a,xg),w5=a=>xa(a,xb),w6=a=>xa(a,xd),w7=a=>xa(a,xc),w8=a=>xa(a,xh,!0),w9=(a,b,c)=>{let d=wE.exec(a);return!!d&&(d[1]?b(d[1]):c(d[2]))},xa=(a,b,c=!1)=>{let d=wF.exec(a);return!!d&&(d[1]?b(d[1]):c)},xb=a=>"position"===a||"percentage"===a,xc=a=>"image"===a||"url"===a,xd=a=>"length"===a||"size"===a||"bg-size"===a,xe=a=>"length"===a,xf=a=>"number"===a,xg=a=>"family-name"===a,xh=a=>"shadow"===a,xi=((a,...b)=>{let c,d,e,f,g=a=>{let b=d(a);if(b)return b;let f=((a,b)=>{let{parseClassName:c,getClassGroupId:d,getConflictingClassGroupIds:e,sortModifiers:f}=b,g=[],h=a.trim().split(wA),i="";for(let a=h.length-1;a>=0;a-=1){let b=h[a],{isExternal:j,modifiers:k,hasImportantModifier:l,baseClassName:m,maybePostfixModifierPosition:n}=c(b);if(j){i=b+(i.length>0?" "+i:i);continue}let o=!!n,p=d(o?m.substring(0,n):m);if(!p){if(!o||!(p=d(m))){i=b+(i.length>0?" "+i:i);continue}o=!1}let q=0===k.length?"":1===k.length?k[0]:f(k).join(":"),r=l?q+"!":q,s=r+p;if(g.indexOf(s)>-1)continue;g.push(s);let t=e(p,o);for(let a=0;a<t.length;++a){let b=t[a];g.push(r+b)}i=b+(i.length>0?" "+i:i)}return i})(a,c);return e(a,f),f};return f=h=>{var i;let j;return d=(c={cache:(a=>{if(a<1)return{get:()=>void 0,set:()=>{}};let b=0,c=Object.create(null),d=Object.create(null),e=(e,f)=>{c[e]=f,++b>a&&(b=0,d=c,c=Object.create(null))};return{get(a){let b=c[a];return void 0!==b?b:void 0!==(b=d[a])?(e(a,b),b):void 0},set(a,b){a in c?c[a]=b:e(a,b)}}})((i=b.reduce((a,b)=>b(a),a())).cacheSize),parseClassName:(a=>{let{prefix:b,experimentalParseClassName:c}=a,d=a=>{let b,c=[],d=0,e=0,f=0,g=a.length;for(let h=0;h<g;h++){let g=a[h];if(0===d&&0===e){if(":"===g){c.push(a.slice(f,h)),f=h+1;continue}if("/"===g){b=h;continue}}"["===g?d++:"]"===g?d--:"("===g?e++:")"===g&&e--}let h=0===c.length?a:a.slice(f),i=h,j=!1;return h.endsWith("!")?(i=h.slice(0,-1),j=!0):h.startsWith("!")&&(i=h.slice(1),j=!0),wz(c,j,i,b&&b>f?b-f:void 0)};if(b){let a=b+":",c=d;d=b=>b.startsWith(a)?c(b.slice(a.length)):wz(wy,!1,b,void 0,!0)}if(c){let a=d;d=b=>c({className:b,parseClassName:a})}return d})(i),sortModifiers:(j=new Map,i.orderSensitiveModifiers.forEach((a,b)=>{j.set(a,1e6+b)}),a=>{let b=[],c=[];for(let d=0;d<a.length;d++){let e=a[d],f="["===e[0],g=j.has(e);f||g?(c.length>0&&(c.sort(),b.push(...c),c=[]),b.push(e)):c.push(e)}return c.length>0&&(c.sort(),b.push(...c)),b}),...(a=>{let b=(a=>{let{theme:b,classGroups:c}=a;return wq(c,b)})(a),{conflictingClassGroups:c,conflictingClassGroupModifiers:d}=a;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]")){var c;let b,d,e;return -1===(c=a).slice(1,-1).indexOf(":")?void 0:(d=(b=c.slice(1,-1)).indexOf(":"),(e=b.slice(0,d))?"arbitrary.."+e:void 0)}let d=a.split("-"),e=+(""===d[0]&&d.length>1);return wp(d,e,b)},getConflictingClassGroupIds:(a,b)=>{if(b){let b=d[a],e=c[a];if(b){if(e){let a=Array(e.length+b.length);for(let b=0;b<e.length;b++)a[b]=e[b];for(let c=0;c<b.length;c++)a[e.length+c]=b[c];return a}return b}return e||wo}return c[a]||wo}}})(i)}).cache.get,e=c.cache.set,f=g,g(h)},(...a)=>f(((...a)=>{let b,c,d=0,e="";for(;d<a.length;)(b=a[d++])&&(c=wB(b))&&(e&&(e+=" "),e+=c);return e})(...a))})(()=>{let a=wD("color"),b=wD("font"),c=wD("text"),d=wD("font-weight"),e=wD("tracking"),f=wD("leading"),g=wD("breakpoint"),h=wD("container"),i=wD("spacing"),j=wD("radius"),k=wD("shadow"),l=wD("inset-shadow"),m=wD("text-shadow"),n=wD("drop-shadow"),o=wD("blur"),p=wD("perspective"),q=wD("aspect"),r=wD("ease"),s=wD("animate"),t=()=>["auto","avoid","all","avoid-page","page","left","right","column"],u=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],v=()=>[...u(),w2,wY],w=()=>["auto","hidden","clip","visible","scroll"],x=()=>["auto","contain","none"],y=()=>[w2,wY,i],z=()=>[wM,"full","auto",...y()],A=()=>[wO,"none","subgrid",w2,wY],B=()=>["auto",{span:["full",wO,w2,wY]},wO,w2,wY],C=()=>[wO,"auto",w2,wY],D=()=>["auto","min","max","fr",w2,wY],E=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],F=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...y()],H=()=>[wM,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...y()],I=()=>[a,w2,wY],J=()=>[...u(),w5,w_,{position:[w2,wY]}],K=()=>["no-repeat",{repeat:["","x","y","space","round"]}],L=()=>["auto","cover","contain",w6,wX,{size:[w2,wY]}],M=()=>[wP,w3,wZ],N=()=>["","none","full",j,w2,wY],O=()=>["",wN,w3,wZ],P=()=>["solid","dashed","dotted","double"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>[wN,wP,w5,w_],S=()=>["","none",o,w2,wY],T=()=>["none",wN,w2,wY],U=()=>["none",wN,w2,wY],V=()=>[wN,w2,wY],W=()=>[wM,"full",...y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[wQ],breakpoint:[wQ],color:[wR],container:[wQ],"drop-shadow":[wQ],ease:["in","out","in-out"],font:[wW],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[wQ],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[wQ],shadow:[wQ],spacing:["px",wN],text:[wQ],"text-shadow":[wQ],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wM,wY,w2,q]}],container:["container"],columns:[{columns:[wN,wY,w2,h]}],"break-after":[{"break-after":t()}],"break-before":[{"break-before":t()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:w()}],"overflow-x":[{"overflow-x":w()}],"overflow-y":[{"overflow-y":w()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:z()}],"inset-x":[{"inset-x":z()}],"inset-y":[{"inset-y":z()}],start:[{start:z()}],end:[{end:z()}],top:[{top:z()}],right:[{right:z()}],bottom:[{bottom:z()}],left:[{left:z()}],visibility:["visible","invisible","collapse"],z:[{z:[wO,"auto",w2,wY]}],basis:[{basis:[wM,"full","auto",h,...y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[wN,wM,"auto","initial","none",wY]}],grow:[{grow:["",wN,w2,wY]}],shrink:[{shrink:["",wN,w2,wY]}],order:[{order:[wO,"first","last","none",w2,wY]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:B()}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:B()}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:y()}],"gap-x":[{"gap-x":y()}],"gap-y":[{"gap-y":y()}],"justify-content":[{justify:[...E(),"normal"]}],"justify-items":[{"justify-items":[...F(),"normal"]}],"justify-self":[{"justify-self":["auto",...F()]}],"align-content":[{content:["normal",...E()]}],"align-items":[{items:[...F(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...F(),{baseline:["","last"]}]}],"place-content":[{"place-content":E()}],"place-items":[{"place-items":[...F(),"baseline"]}],"place-self":[{"place-self":["auto",...F()]}],p:[{p:y()}],px:[{px:y()}],py:[{py:y()}],ps:[{ps:y()}],pe:[{pe:y()}],pt:[{pt:y()}],pr:[{pr:y()}],pb:[{pb:y()}],pl:[{pl:y()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":y()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],w:[{w:[h,"screen",...H()]}],"min-w":[{"min-w":[h,"screen","none",...H()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[g]},...H()]}],h:[{h:["screen","lh",...H()]}],"min-h":[{"min-h":["screen","lh","none",...H()]}],"max-h":[{"max-h":["screen","lh",...H()]}],"font-size":[{text:["base",c,w3,wZ]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[d,w2,w$]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",wP,wY]}],"font-family":[{font:[w4,wY,b]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[e,w2,wY]}],"line-clamp":[{"line-clamp":[wN,"none",w2,w$]}],leading:[{leading:[f,...y()]}],"list-image":[{"list-image":["none",w2,wY]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",w2,wY]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...P(),"wavy"]}],"text-decoration-thickness":[{decoration:[wN,"from-font","auto",w2,wZ]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[wN,"auto",w2,wY]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",w2,wY]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",w2,wY]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:K()}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},wO,w2,wY],radial:["",w2,wY],conic:[wO,w2,wY]},w7,w0]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:M()}],"gradient-via-pos":[{via:M()}],"gradient-to-pos":[{to:M()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:N()}],"rounded-s":[{"rounded-s":N()}],"rounded-e":[{"rounded-e":N()}],"rounded-t":[{"rounded-t":N()}],"rounded-r":[{"rounded-r":N()}],"rounded-b":[{"rounded-b":N()}],"rounded-l":[{"rounded-l":N()}],"rounded-ss":[{"rounded-ss":N()}],"rounded-se":[{"rounded-se":N()}],"rounded-ee":[{"rounded-ee":N()}],"rounded-es":[{"rounded-es":N()}],"rounded-tl":[{"rounded-tl":N()}],"rounded-tr":[{"rounded-tr":N()}],"rounded-br":[{"rounded-br":N()}],"rounded-bl":[{"rounded-bl":N()}],"border-w":[{border:O()}],"border-w-x":[{"border-x":O()}],"border-w-y":[{"border-y":O()}],"border-w-s":[{"border-s":O()}],"border-w-e":[{"border-e":O()}],"border-w-t":[{"border-t":O()}],"border-w-r":[{"border-r":O()}],"border-w-b":[{"border-b":O()}],"border-w-l":[{"border-l":O()}],"divide-x":[{"divide-x":O()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":O()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...P(),"hidden","none"]}],"divide-style":[{divide:[...P(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...P(),"none","hidden"]}],"outline-offset":[{"outline-offset":[wN,w2,wY]}],"outline-w":[{outline:["",wN,w3,wZ]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",k,w8,w1]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",l,w8,w1]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[wN,wZ]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":O()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",m,w8,w1]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[wN,w2,wY]}],"mix-blend":[{"mix-blend":[...Q(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Q()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[wN]}],"mask-image-linear-from-pos":[{"mask-linear-from":R()}],"mask-image-linear-to-pos":[{"mask-linear-to":R()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":R()}],"mask-image-t-to-pos":[{"mask-t-to":R()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":R()}],"mask-image-r-to-pos":[{"mask-r-to":R()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":R()}],"mask-image-b-to-pos":[{"mask-b-to":R()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":R()}],"mask-image-l-to-pos":[{"mask-l-to":R()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":R()}],"mask-image-x-to-pos":[{"mask-x-to":R()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":R()}],"mask-image-y-to-pos":[{"mask-y-to":R()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[w2,wY]}],"mask-image-radial-from-pos":[{"mask-radial-from":R()}],"mask-image-radial-to-pos":[{"mask-radial-to":R()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":u()}],"mask-image-conic-pos":[{"mask-conic":[wN]}],"mask-image-conic-from-pos":[{"mask-conic-from":R()}],"mask-image-conic-to-pos":[{"mask-conic-to":R()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:K()}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",w2,wY]}],filter:[{filter:["","none",w2,wY]}],blur:[{blur:S()}],brightness:[{brightness:[wN,w2,wY]}],contrast:[{contrast:[wN,w2,wY]}],"drop-shadow":[{"drop-shadow":["","none",n,w8,w1]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",wN,w2,wY]}],"hue-rotate":[{"hue-rotate":[wN,w2,wY]}],invert:[{invert:["",wN,w2,wY]}],saturate:[{saturate:[wN,w2,wY]}],sepia:[{sepia:["",wN,w2,wY]}],"backdrop-filter":[{"backdrop-filter":["","none",w2,wY]}],"backdrop-blur":[{"backdrop-blur":S()}],"backdrop-brightness":[{"backdrop-brightness":[wN,w2,wY]}],"backdrop-contrast":[{"backdrop-contrast":[wN,w2,wY]}],"backdrop-grayscale":[{"backdrop-grayscale":["",wN,w2,wY]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[wN,w2,wY]}],"backdrop-invert":[{"backdrop-invert":["",wN,w2,wY]}],"backdrop-opacity":[{"backdrop-opacity":[wN,w2,wY]}],"backdrop-saturate":[{"backdrop-saturate":[wN,w2,wY]}],"backdrop-sepia":[{"backdrop-sepia":["",wN,w2,wY]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":y()}],"border-spacing-x":[{"border-spacing-x":y()}],"border-spacing-y":[{"border-spacing-y":y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",w2,wY]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[wN,"initial",w2,wY]}],ease:[{ease:["linear","initial",r,w2,wY]}],delay:[{delay:[wN,w2,wY]}],animate:[{animate:["none",s,w2,wY]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,w2,wY]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:T()}],"rotate-x":[{"rotate-x":T()}],"rotate-y":[{"rotate-y":T()}],"rotate-z":[{"rotate-z":T()}],scale:[{scale:U()}],"scale-x":[{"scale-x":U()}],"scale-y":[{"scale-y":U()}],"scale-z":[{"scale-z":U()}],"scale-3d":["scale-3d"],skew:[{skew:V()}],"skew-x":[{"skew-x":V()}],"skew-y":[{"skew-y":V()}],transform:[{transform:[w2,wY,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:W()}],"translate-x":[{"translate-x":W()}],"translate-y":[{"translate-y":W()}],"translate-z":[{"translate-z":W()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",w2,wY]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":y()}],"scroll-mx":[{"scroll-mx":y()}],"scroll-my":[{"scroll-my":y()}],"scroll-ms":[{"scroll-ms":y()}],"scroll-me":[{"scroll-me":y()}],"scroll-mt":[{"scroll-mt":y()}],"scroll-mr":[{"scroll-mr":y()}],"scroll-mb":[{"scroll-mb":y()}],"scroll-ml":[{"scroll-ml":y()}],"scroll-p":[{"scroll-p":y()}],"scroll-px":[{"scroll-px":y()}],"scroll-py":[{"scroll-py":y()}],"scroll-ps":[{"scroll-ps":y()}],"scroll-pe":[{"scroll-pe":y()}],"scroll-pt":[{"scroll-pt":y()}],"scroll-pr":[{"scroll-pr":y()}],"scroll-pb":[{"scroll-pb":y()}],"scroll-pl":[{"scroll-pl":y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",w2,wY]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[wN,w3,wZ,w$]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),xj=(...a)=>xi(function(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}(a)),xk=sV.create({name:"askai",addOptions:()=>({HTMLAttributes:{class:"ask-ai-highlight"}}),addAttributes:()=>({taskId:{default:null,parseHTML:a=>a.getAttribute("data-ask-ai-task"),renderHTML:a=>({"data-ask-ai-task":a.taskId||void 0})}}),parseHTML:()=>[{tag:"mark[data-ask-ai-task]"}],renderHTML({HTMLAttributes:a}){return["mark",sa(this.options.HTMLAttributes,a),0]},addCommands(){return{setAskAiMark:a=>({chain:b})=>b().setMark(this.name,a).run(),unsetAskAiMark:()=>({chain:a})=>a().unsetMark(this.name).run()}}}),xl=({initialHtml:a,placeholder:b="Start writing...",className:c,contentClassName:f,contentStyle:g,onChange:h,onReady:i,containerRef:j})=>{let k=(0,e.useRef)(null),l=(0,e.useRef)(null),m=(0,e.useRef)(h),n=(0,e.useRef)(i),o=(0,e.useRef)(f),p=(0,e.useRef)(g);(0,e.useEffect)(()=>{m.current=h},[h]),(0,e.useEffect)(()=>{n.current=i},[i]);let q=(0,e.useMemo)(()=>[wm.configure({heading:{levels:[1,2,3]},link:!1,underline:!1}),uY.configure({autolink:!0,linkOnPaste:!0,openOnClick:!1}),xk,tt,vt.configure({types:["heading","paragraph"]}),vp.configure({placeholder:b})],[b]);return(0,e.useEffect)(()=>{if(!k.current)return;let b=new tb({element:k.current,extensions:q,content:a,editorProps:{attributes:{class:xj("editor-content prose prose-lg max-w-none focus:outline-none min-h-full pt-0",f),style:g}},onUpdate:({editor:a})=>{let b=a.getHTML(),c=a.state.doc.textBetween(0,a.state.doc.content.size," ");m.current?.(b,c)}});o.current=f,p.current=g,l.current=b;let c=a=>{let b=l.current;if(!b)return{changed:!1,tr:null};let{state:c}=b,{from:d,to:e}=a?.scope||c.selection,f=d!==e,g=f?d:a?.fallbackToDoc?0:null,h=f?e:a?.fallbackToDoc?c.doc.content.size:null;if(null===g||null===h)return{changed:!1,tr:null};let i=c.tr,j=!1,k=a?.stripQuotes!==!1,m=a?.stripBlockquoteChars!==!1,n=a?.stripAsterisks!==!1;if(c.doc.nodesBetween(g,h,(a,b)=>{if(!a.isText||!a.text)return;let d=b+a.nodeSize,e=Math.max(b,g)-b,f=Math.min(d,h)-b,l=a.text.slice(e,f),o=l;if(n&&(o=o.replace(/\*/g,"")),m&&(o=o.replace(/>/g,"")),k&&(o=o.replace(/[\"â€œâ€ã€Œã€]/g,"")),l===o)return;let p=a.text.slice(0,e)+o+a.text.slice(f),q=i.mapping.map(b),r=i.mapping.map(d);i=i.replaceRangeWith(q,r,c.schema.text(p,a.marks)),j=!0}),j){if(a?.dispatch===!1)return{changed:j,tr:i};b.view.dispatch(i)}return{changed:j,tr:i}},d=()=>{let a=l.current;if(!a)return{boldMarks:0,blockquotes:0,quoteChars:0,blocks:[]};let b=a.state.schema.marks.bold,c=0,d=0,e=0,f=[];return a.state.doc.descendants((a,g)=>{if("blockquote"===a.type.name&&(d+=1),a.isText&&a.text){b&&a.marks.some(a=>a.type===b)&&(c+=1);let d=a.text.match(/[\"â€œâ€ã€Œã€]/g);d&&(e+=d.length)}if(a.isBlock){let c=+("blockquote"===a.type.name),d=+("blockquote"===a.type.name),e=0;a.descendants(a=>{if("blockquote"===a.type.name&&(d+=1),a.isText&&a.text){b&&a.marks.some(a=>a.type===b)&&(c+=1);let d=a.text.match(/[\"â€œâ€ã€Œã€]/g);d&&(e+=d.length)}});let h=a.textBetween(0,a.content.size," "," ").trim();f.push({from:g,to:g+a.nodeSize,text:h,boldMarks:c,blockquotes:d,quoteChars:e,type:a.type.name})}}),{boldMarks:c,blockquotes:d,quoteChars:e,blocks:f}};return n.current&&n.current({getSelectedText:()=>{let{from:a,to:c}=b.state.selection;return a===c?"":b.state.doc.textBetween(a,c," ")},insertHtml:a=>b.chain().focus().insertContent(a).run(),insertImage:(a,c="")=>b.chain().focus().setImage({src:a,alt:c}).run(),getPlainText:()=>b.state.doc.textBetween(0,b.state.doc.content.size," "),getHtml:()=>b.getHTML(),setHtml:a=>b.commands.setContent(a),getSelectionRange:()=>{let{from:a,to:c}=b.state.selection;return{from:a,to:c}},replaceRange:(a,c)=>b.chain().focus().insertContentAt(a,c).run(),markAskAiRange:(a,c)=>{b.chain().setTextSelection(a).setAskAiMark({taskId:c}).run()},clearAskAiMarks:a=>{let b=l.current;if(!b)return;let{state:c}=b,d=c.schema.marks.askai;if(!d)return;let e=c.tr;c.doc.descendants((b,c)=>{b.isText&&b.marks.forEach(f=>{f.type!==d||a&&f.attrs.taskId!==a||(e=e.removeMark(c,c+b.nodeSize,d))})}),e.docChanged&&b.view.dispatch(e)},findAskAiRange:a=>{let b=l.current;if(!b)return null;let{state:c}=b,d=c.schema.marks.askai;if(!d)return null;let e=null,f=null;return(c.doc.descendants((b,c)=>{if(!b.isText||!b.marks.some(b=>b.type===d&&b.attrs.taskId===a))return;let g=c+b.nodeSize;e=null===e?c:Math.min(e,c),f=null===f?g:Math.max(f,g)}),null===e||null===f)?null:{from:e,to:f}},toggleUnderline:()=>b.chain().focus().toggleUnderline().run(),toggleBold:()=>(c(),b.chain().focus().toggleBold().run()),toggleItalic:()=>b.chain().focus().toggleItalic().run(),toggleHeading:a=>b.chain().focus().toggleHeading({level:a}).run(),toggleBlockquote:()=>b.chain().focus().toggleBlockquote().run(),toggleBulletList:()=>b.chain().focus().toggleBulletList().run(),toggleOrderedList:()=>b.chain().focus().toggleOrderedList().run(),setTextAlign:a=>b.chain().focus().setTextAlign(a).run(),setLink:a=>b.chain().focus().extendMarkRange("link").setLink({href:a}).run(),unsetLink:()=>b.chain().focus().unsetLink().run(),undo:()=>b.chain().focus().undo().run(),redo:()=>b.chain().focus().redo().run(),clearBold:a=>{let b=l.current;if(!b)return!1;let{state:d}=b,e=a?.removeBold!==!1,f=a?.removeBlockquotes!==!1,g=a?.removeQuotes!==!1,h=a?.target==="document",i=a?.scope,{from:j,to:k}=d.selection,m=j!==k,n=i?.from??(h||!m?0:j),o=i?.to??(h||!m?d.doc.content.size:k),p=!1,{tr:q,changed:r}=c({fallbackToDoc:h||!m,stripQuotes:g,stripBlockquoteChars:!0,stripAsterisks:!0,scope:{from:n,to:o},dispatch:!1}),s=q||d.tr;if(p=p||r,e){let a=d.schema.marks.bold;a&&d.doc.descendants((b,c)=>{if(!b.isText||!b.marks.some(b=>b.type===a)||c+b.nodeSize<=n||c>=o)return;let d=s.mapping.map(c),e=s.mapping.map(c+b.nodeSize);s=s.removeMark(d,e,a),p=!0})}if(f){let a=d.schema.nodes.blockquote;a&&d.doc.descendants((b,c)=>{if(b.type!==a)return;let d=c+b.nodeSize;if(d<=n||c>=o)return;let e=s.mapping.map(c),f=s.mapping.map(d);s=s.replaceWith(e,f,b.content),p=!0})}return p&&s&&b.view.dispatch(s),p},summarizeFormatting:d,listCleanupTargets:()=>d().blocks.filter(a=>a.boldMarks>0||a.blockquotes>0||a.quoteChars>0),focus:()=>b.chain().focus().run()}),()=>{b.destroy(),l.current=null}},[q]),(0,e.useEffect)(()=>{let a=k.current;if(!a)return;let b=xj("editor-content prose prose-lg max-w-none focus:outline-none min-h-full",f);a.className!==b&&(a.className=b),g&&Object.assign(a.style,g),o.current=f,p.current=g},[f,g]),(0,e.useEffect)(()=>{let b=l.current;b&&a!==b.getHTML()&&b.commands.setContent(a)},[a]),(0,d.jsx)("div",{ref:j,className:xj("flex-1 bg-white flex flex-col min-h-0 overflow-hidden relative",c),children:(0,d.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden",children:(0,d.jsx)("div",{className:"h-full overflow-y-auto custom-scrollbar",children:(0,d.jsx)("div",{ref:k,className:"h-full"})})})})},xm=j("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),xn=j("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]),xo=j("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),xp=j("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),xq=j("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),xr=j("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),xs=j("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),xt=j("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),xu=j("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]),xv=j("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),xw=j("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]),xx=j("text-align-center",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]]),xy=j("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]),xz=j("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),xA=j("link-2-off",[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),xB=j("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),xC=j("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]),xD=j("list-todo",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]]),xE=j("gallery-horizontal-end",[["path",{d:"M2 7v10",key:"a2pl2d"}],["path",{d:"M6 5v14",key:"1kq3d7"}],["rect",{width:"12",height:"18",x:"10",y:"3",rx:"2",key:"13i7bc"}]]),xF=j("gem",[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),xG=({icon:a,command:b,value:c,label:e,onClick:f,active:g,onCommand:h})=>(0,d.jsx)("button",{type:"button",onClick:a=>{a.preventDefault(),f?f():b&&h(b,c)},className:xj("p-2 rounded transition-colors",g?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100 hover:text-blue-600"),title:e,children:(0,d.jsx)(a,{className:"w-4 h-4"})}),xH=({icon:a,label:b,onClick:c,active:f,disabled:g,loading:h,iconOnly:i=!1,variant:j="solid"})=>{let[k,l]=(0,e.useState)(!1),m=(0,e.useRef)(null),n=()=>{m.current&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>l(!0),2e3)},o=()=>{m.current&&window.clearTimeout(m.current),m.current=null,l(!1)};return(0,e.useEffect)(()=>()=>{m.current&&window.clearTimeout(m.current)},[]),(0,d.jsxs)("div",{className:"relative flex items-center",children:[(0,d.jsxs)("button",{type:"button",onClick:a=>{a.preventDefault(),g||c()},onMouseEnter:n,onMouseLeave:o,onFocus:n,onBlur:o,disabled:g||h,"aria-label":b,className:xj("flex items-center gap-1.5 rounded-md text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-200","justify-center",i?"px-2.5 py-2":"px-3 py-1.5","ghost"===j?g||h?"text-indigo-300 border-none bg-transparent cursor-not-allowed":f?"text-indigo-900 border-none bg-transparent":"text-indigo-700 hover:text-indigo-900 border-none bg-transparent":g||h?"bg-indigo-50 text-indigo-300 border border-indigo-100 cursor-not-allowed":f?"bg-indigo-600 text-white border border-indigo-600 shadow-sm":"bg-indigo-50 text-indigo-700 border border-indigo-200 hover:bg-indigo-100"),children:[(0,d.jsx)(a,{className:xj("w-3.5 h-3.5",h?"animate-spin":"")}),!i&&(0,d.jsx)("span",{children:b}),i&&(0,d.jsx)("span",{className:"sr-only",children:b})]}),k&&(0,d.jsx)("div",{className:"absolute left-1/2 top-full mt-2 -translate-x-1/2 whitespace-nowrap rounded bg-gray-900 px-2 py-1 text-[11px] font-medium text-white shadow-lg z-50",children:b})]})},xI=({onCommand:a,onRemoveBold:b,onOpenImageModal:c,onDownloadAllImages:e,isDownloadingImages:f,onToggleKeyPoints:g,showKeyPoints:h,hasKeyPoints:i,onToggleVisualAssets:j,showVisualAssets:k,onRebrand:l,isRebranding:m,productName:n,onToggleMetaPanel:o,showMetaPanel:p,onUndo:q,onRedo:r,askAiBadgeSlotRef:s,extraActions:t})=>(0,d.jsxs)("div",{className:"flex items-center gap-2 p-2 border-b border-gray-200 bg-gray-50 flex-shrink-0 z-20 overflow-x-auto whitespace-nowrap [scrollbar-width:thin] custom-scrollbar",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 pr-3 mr-1 border-r border-gray-300 flex-shrink-0",children:[i&&(0,d.jsx)(xH,{icon:xD,onClick:g,label:"Key Points",active:h,iconOnly:!0,variant:"ghost"}),(0,d.jsx)(xH,{icon:xE,onClick:j,label:"Visual Assets",active:k,iconOnly:!0,variant:"ghost"}),(0,d.jsx)(xH,{icon:as,onClick:c,label:"AI Image",iconOnly:!0,variant:"ghost"}),(0,d.jsx)(xH,{icon:xF,onClick:l,label:"Rebrand",disabled:m||!n,loading:m,iconOnly:!0,variant:"ghost"}),(0,d.jsx)(xH,{icon:ao,onClick:o,label:"SEO Meta",active:p,iconOnly:!0,variant:"ghost"}),(0,d.jsx)("div",{ref:s,className:"flex items-center pl-1"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-1 flex-nowrap flex-shrink-0",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-1 pr-2 border-r border-gray-300 flex-shrink-0",children:[(0,d.jsx)(xG,{icon:xm,command:"formatBlock",value:"<h2>",label:"Heading 2",onCommand:a}),(0,d.jsx)(xG,{icon:xn,command:"formatBlock",value:"<h3>",label:"Heading 3",onCommand:a}),(0,d.jsx)(xG,{icon:xo,command:"formatBlock",value:"<p>",label:"Paragraph",onCommand:a})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0",children:[(0,d.jsx)(xG,{icon:xp,command:"bold",label:"Bold",onCommand:a}),(0,d.jsx)(xG,{icon:xq,command:"italic",label:"Italic",onCommand:a}),(0,d.jsx)(xG,{icon:xr,command:"underline",label:"Underline",onCommand:a}),(0,d.jsx)(xG,{icon:xs,onClick:b,label:"Remove All Bold Formatting & Quotes",onCommand:a})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0",children:[(0,d.jsx)(xG,{icon:xt,command:"insertUnorderedList",label:"Bullet List",onCommand:a}),(0,d.jsx)(xG,{icon:xu,command:"insertOrderedList",label:"Numbered List",onCommand:a}),(0,d.jsx)(xG,{icon:xv,command:"formatBlock",value:"<blockquote>",label:"Quote",onCommand:a})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0",children:[(0,d.jsx)(xG,{icon:xw,command:"alignLeft",label:"Align Left",onCommand:a}),(0,d.jsx)(xG,{icon:xx,command:"alignCenter",label:"Align Center",onCommand:a}),(0,d.jsx)(xG,{icon:xy,command:"alignRight",label:"Align Right",onCommand:a})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0",children:[(0,d.jsx)(xG,{icon:xz,onClick:()=>a("link"),label:"Insert Link",onCommand:a}),(0,d.jsx)(xG,{icon:xA,onClick:()=>a("unlink"),label:"Remove Link",onCommand:a})]}),(0,d.jsx)("div",{className:"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0",children:(0,d.jsx)(xG,{icon:f?am:ak,onClick:e,label:"Download all images in editor",onCommand:a})}),(0,d.jsxs)("div",{className:"flex items-center space-x-1 px-2 border-r border-gray-300 flex-shrink-0",children:[(0,d.jsx)("button",{type:"button",onClick:a=>{a.preventDefault(),q()},className:"p-2 text-gray-600 hover:bg-gray-100 hover:text-blue-600 rounded transition-colors",title:"Undo",children:(0,d.jsx)(xB,{className:"w-4 h-4"})}),(0,d.jsx)("button",{type:"button",onClick:a=>{a.preventDefault(),r()},className:"p-2 text-gray-600 hover:bg-gray-100 hover:text-blue-600 rounded transition-colors",title:"Redo",children:(0,d.jsx)(xC,{className:"w-4 h-4"})})]})]}),t&&(0,d.jsx)("div",{className:"flex items-center gap-2 pl-3 ml-auto flex-shrink-0",children:t})]}),xJ=e.default.memo(({point:a,type:b,isChecked:c,isProcessing:e,onToggle:f,onRefine:g,useTiptap:h,isTiptapReady:i})=>(0,d.jsxs)("div",{className:`p-2 rounded-lg text-xs transition-all border group relative ${c?"bg-orange-100/50 border-orange-200 text-gray-500":"bg-white border-orange-100 text-gray-800 hover:border-orange-300 hover:shadow-sm"}`,children:[(0,d.jsxs)("div",{className:"flex items-start gap-2 pr-6 cursor-pointer",onClick:()=>f(a),children:[c?(0,d.jsx)("span",{className:"w-4 h-4 text-orange-500 flex-shrink-0",children:"â˜‘"}):(0,d.jsx)("span",{className:"w-4 h-4 text-orange-300 flex-shrink-0",children:"â˜"}),(0,d.jsxs)("div",{className:"flex-1",children:["brand"===b&&(0,d.jsx)("span",{className:"text-[10px] font-bold text-purple-600 bg-purple-50 px-1 rounded mr-1",children:"USP"}),(0,d.jsx)("span",{className:c?"line-through opacity-75":"",children:a})]})]}),!c&&(0,d.jsx)("button",{onClick:b=>{b.stopPropagation(),h&&!i?alert("Editor not ready."):g(a)},disabled:e,className:"absolute right-1 top-1 p-1.5 bg-white border border-purple-200 text-purple-600 rounded-md hover:bg-purple-50 shadow-sm opacity-0 group-hover:opacity-100 transition-opacity",title:"Auto-insert this point into best paragraph",children:e?(0,d.jsx)("span",{className:"w-3 h-3 inline-block animate-spin",children:"â³"}):(0,d.jsx)("span",{className:"w-3 h-3 inline-block",children:"âœ¨"})})]})),xK=({brandExclusivePoints:a,keyPoints:b,checkedPoints:c,refiningPoint:e,onTogglePoint:f,onRefinePoint:g,useTiptap:h,isTiptapReady:i,uniqueCoveredCount:j,totalPoints:k})=>(0,d.jsxs)("div",{className:"w-72 bg-orange-50/50 border-l border-orange-100 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-200",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsxs)("h4",{className:"text-xs font-bold uppercase text-orange-600 flex items-center gap-2",children:[(0,d.jsx)(xD,{className:"w-4 h-4"}),"Key Points"]}),(0,d.jsxs)("span",{className:"text-[10px] font-bold text-gray-400",children:[j,"/",k]})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[a.length>0&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("h5",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-wider flex items-center gap-1",children:[(0,d.jsx)(xF,{className:"w-3 h-3"})," Brand USP"]}),(0,d.jsx)("div",{className:"space-y-1",children:a.map((a,b)=>(0,d.jsx)(xJ,{point:a,type:"brand",isChecked:c.includes(a),isProcessing:e===a,onToggle:f||(()=>{}),onRefine:g||(()=>{}),useTiptap:h,isTiptapReady:i},`brand-${b}`))})]}),b.length>0&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h5",{className:"text-[10px] font-bold text-orange-400 uppercase tracking-wider",children:"General Knowledge"}),(0,d.jsx)("div",{className:"space-y-1",children:b.map((a,b)=>(0,d.jsx)(xJ,{point:a,type:"general",isChecked:c.includes(a),isProcessing:e===a,onToggle:f||(()=>{}),onRefine:g||(()=>{}),useTiptap:h,isTiptapReady:i},`gen-${b}`))})]})]})]}),xL=j("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),xM=j("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),xN=j("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),xO=j("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),xP=j("mouse-pointer-click",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]),xQ=({scrapedImages:a,onToggleImage:b,imagePlans:c,isPlanning:e,isBatchProcessing:f,onBatchProcess:g,onAutoPlan:h,onGenerateSinglePlan:i,onUpdatePlanPrompt:j,onInjectImage:k,useTiptap:l,isTiptapReady:m})=>(0,d.jsxs)("div",{className:"w-80 bg-blue-50/50 border-l border-blue-100 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-200 flex flex-col",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsxs)("h4",{className:"text-xs font-bold uppercase text-blue-600 flex items-center gap-2",children:[(0,d.jsx)(xE,{className:"w-4 h-4"}),"Visual Assets"]}),(0,d.jsxs)("button",{onClick:()=>{l&&!m?alert("Editor not ready."):h()},disabled:e||l&&!m,className:"text-[10px] bg-white border border-blue-200 text-blue-600 px-2 py-1 rounded hover:bg-blue-50 transition-colors flex items-center gap-1",title:"è®“ AI æ ¹æ“šå…§å®¹è‡ªå‹•è¦åŠƒæ’åœ–ä½ç½®èˆ‡æç¤º",children:[e?(0,d.jsx)(am,{className:"w-3 h-3 animate-spin"}):(0,d.jsx)(ao,{className:"w-3 h-3"}),"Auto-Plan"]})]}),a.length>0&&(0,d.jsxs)("div",{className:"mb-4 bg-white p-2 rounded-lg border border-gray-200",children:[(0,d.jsx)("h5",{className:"text-[10px] font-bold text-gray-400 uppercase mb-2",children:"Source References"}),(0,d.jsx)("div",{className:"grid grid-cols-4 gap-2",children:a.map((a,c)=>{let e=a.id||`${a.url||a.altText||"image"}-${c}`;return(0,d.jsxs)("div",{className:`relative aspect-square rounded overflow-hidden group cursor-pointer border transition-all ${a.ignored?"border-gray-300":"border-gray-200 bg-white"} hover:border-blue-200`,title:a.altText,onClick:()=>b({...a,ignored:!a.ignored}),children:[(0,d.jsx)("img",{src:a.url,className:`w-full h-full object-cover transition ${a.ignored?"grayscale opacity-60":""}`}),a.aiDescription&&(0,d.jsx)("div",{className:"absolute top-0 right-0 w-2 h-2 bg-green-500 rounded-full m-1 border border-white"}),a.ignored&&(0,d.jsx)("div",{className:"absolute inset-0 bg-black/30"})]},e)})})]}),0===c.length?(0,d.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 text-center space-y-2 opacity-60",children:[(0,d.jsx)(as,{className:"w-8 h-8"}),(0,d.jsx)("p",{className:"text-xs",children:"No visual assets planned."}),(0,d.jsx)("p",{className:"text-[10px]",children:'Click "Auto-Plan" to generate ideas based on your content.'})]}):(0,d.jsxs)("div",{className:"space-y-3 pb-20",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center bg-blue-100/50 p-2 rounded-md",children:[(0,d.jsxs)("span",{className:"text-[10px] font-bold text-blue-700",children:[c.filter(a=>"done"===a.status).length,"/",c.length," Ready"]}),(0,d.jsxs)("button",{onClick:g,disabled:f,className:"text-[10px] bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 flex items-center gap-1 disabled:opacity-50",title:"ä¸€æ¬¡ç”Ÿæˆæ‰€æœ‰å°šæœªç”¢å‡ºçš„åœ–åƒ",children:[f?(0,d.jsx)(am,{className:"w-3 h-3 animate-spin"}):(0,d.jsx)(xL,{className:"w-3 h-3"}),"Generate All"]})]}),c.map(a=>(0,d.jsxs)("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm space-y-2 group",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("span",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"Prompt"}),(0,d.jsx)("p",{className:"text-[10px] text-gray-600 leading-snug line-clamp-3 hover:line-clamp-none cursor-text focus:outline-none focus:bg-gray-50 rounded",contentEditable:!0,onBlur:b=>j(a.id,b.currentTarget.innerText),dangerouslySetInnerHTML:{__html:a.generatedPrompt}})]}),(0,d.jsx)("div",{className:"flex flex-col gap-1",children:"done"===a.status?(0,d.jsxs)("div",{className:"w-16 h-16 rounded bg-gray-100 overflow-hidden border border-gray-200 relative group/img",children:[(0,d.jsx)("img",{src:a.url,className:"w-full h-full object-cover"}),(0,d.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover/img:opacity-100 transition-opacity flex items-center justify-center cursor-pointer",children:(0,d.jsx)(ma,{className:"w-4 h-4 text-white"})})]}):(0,d.jsx)("button",{onClick:()=>i(a),disabled:"generating"===a.status,className:"p-1.5 bg-gray-50 hover:bg-blue-50 text-gray-500 hover:text-blue-600 rounded border border-gray-200 transition-colors",title:"ç”Ÿæˆæ­¤åœ–åƒ",children:"generating"===a.status?(0,d.jsx)(am,{className:"w-4 h-4 animate-spin text-blue-500"}):(0,d.jsx)(xM,{className:"w-4 h-4"})})})]}),(0,d.jsxs)("div",{className:"bg-gray-50 p-1.5 rounded text-[10px] text-gray-500 flex items-center gap-1.5",children:[(0,d.jsx)(xN,{className:"w-3 h-3 text-gray-400"}),(0,d.jsxs)("span",{className:"truncate flex-1",title:a.insertAfter||"No anchor detected",children:['After: "',(a.insertAfter||"N/A").substring(0,25),'..."']})]}),"done"===a.status&&(0,d.jsxs)("div",{className:"flex gap-1 pt-1",children:[(0,d.jsxs)("button",{onClick:()=>k(a,"auto"),className:"flex-1 py-1.5 bg-green-50 text-green-700 border border-green-200 rounded text-[10px] font-bold hover:bg-green-100 transition-colors flex items-center justify-center gap-1",children:[(0,d.jsx)(xO,{className:"w-3 h-3"})," Insert Auto"]}),(0,d.jsxs)("button",{onClick:()=>k(a,"cursor"),className:"flex-1 py-1.5 bg-blue-50 text-blue-700 border border-blue-200 rounded text-[10px] font-bold hover:bg-blue-100 transition-colors flex items-center justify-center gap-1",title:"Insert at current cursor position",children:[(0,d.jsx)(xP,{className:"w-3 h-3"})," Cursor"]})]})]},a.id))]})]}),xR=({metaTitle:a,metaDescription:b,urlSlug:c,isMetaLoading:e,onGenerateMeta:f,onClose:g,onMetaTitleChange:h,onMetaDescriptionChange:i,onUrlSlugChange:j})=>(0,d.jsxs)("div",{className:"absolute z-30 right-4 top-28 w-full max-w-xl bg-white border border-gray-200 shadow-2xl rounded-xl p-4 space-y-3 animate-in fade-in duration-150",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(ao,{className:"w-4 h-4 text-purple-500"}),(0,d.jsx)("span",{className:"text-xs font-bold text-gray-700 uppercase",children:"SEO Meta"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("button",{type:"button",onClick:f,className:"flex items-center gap-1 px-3 py-1.5 text-xs font-semibold text-purple-700 bg-white border border-purple-200 rounded-md hover:bg-purple-50 transition-colors disabled:opacity-60",disabled:e,children:[e?(0,d.jsx)(ao,{className:"w-3 h-3 animate-spin"}):(0,d.jsx)(ao,{className:"w-3 h-3"}),(0,d.jsx)("span",{children:"Auto-generate"})]}),(0,d.jsx)("button",{type:"button",onClick:g,className:"text-gray-400 hover:text-gray-600",children:(0,d.jsx)(mc,{className:"w-4 h-4"})})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,d.jsxs)("div",{className:"md:col-span-1",children:[(0,d.jsx)("label",{className:"text-[10px] font-bold uppercase text-gray-500",children:"Meta Title"}),(0,d.jsx)("input",{value:a,onChange:a=>h(a.target.value),className:"w-full mt-1 px-3 py-2 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white",placeholder:"e.g. AI Text Writer Pro â€” é«˜è³ªå…§å®¹ç”Ÿæˆ"})]}),(0,d.jsxs)("div",{className:"md:col-span-1",children:[(0,d.jsx)("label",{className:"text-[10px] font-bold uppercase text-gray-500",children:"Meta Description"}),(0,d.jsx)("textarea",{value:b,onChange:a=>i(a.target.value),className:"w-full mt-1 px-3 py-2 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white h-20 resize-none",placeholder:"140-160 chars summary"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-[10px] font-bold uppercase text-gray-500",children:"URL Slug"}),(0,d.jsx)("input",{value:c,onChange:a=>j(a.target.value),className:"w-full mt-1 px-3 py-2 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white",placeholder:"your-article-slug"})]})]}),xS=({show:a,imagePrompt:b,onPromptChange:c,onSubmit:e,isLoading:f,onClose:g})=>a?(0,d.jsxs)("div",{className:"absolute z-50 bg-white rounded-lg shadow-2xl border border-gray-200 w-96 p-4 animate-in fade-in zoom-in-95 duration-200",style:{top:50,right:10},children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-pink-600",children:[(0,d.jsx)(as,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:"text-xs font-bold uppercase tracking-wide",children:"AI Image Generator (Nano Banana)"})]}),(0,d.jsx)("button",{onClick:g,className:"text-gray-400 hover:text-gray-600",children:(0,d.jsx)(mc,{className:"w-4 h-4"})})]}),(0,d.jsxs)("form",{onSubmit:a=>{a.preventDefault(),e()},className:"space-y-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-[10px] font-bold text-gray-500 uppercase",children:"Image Prompt"}),(0,d.jsx)("textarea",{value:b,onChange:a=>c(a.target.value),className:"w-full h-24 p-3 bg-gray-50 rounded-lg border border-gray-200 text-sm focus:border-pink-500 focus:ring-1 focus:ring-pink-500 outline-none resize-none mt-1",placeholder:"Describe the image..."})]}),(0,d.jsxs)("button",{type:"submit",disabled:f||!b,className:"w-full py-2 bg-pink-600 text-white rounded-lg text-sm font-semibold hover:bg-pink-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[f?(0,d.jsx)(am,{className:"w-4 h-4 animate-spin"}):(0,d.jsx)(as,{className:"w-4 h-4"}),"Generate Image"]})]})]}):null;var xT=a.i(35112);let xU=j("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),xV=j("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),xW=j("message-square-plus",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]]),xX=j("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),xY=j("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),xZ=({onRunAction:a,onInsert:b,onLockSelectionRange:c,badgeContainerRef:f,onHighlightTask:g})=>{var h;let[i,j]=(0,e.useState)(""),[l,m]=(0,e.useState)(null),[n,o]=(0,e.useState)("edit"),[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)(""),[t,u]=(0,e.useState)(""),[v,w]=(0,e.useState)(!1),[x,y]=(0,e.useState)(""),[z,A]=(0,e.useState)([]),[B,C]=(0,e.useState)(null),D=(0,e.useRef)(null),E=(0,e.useRef)({}),F=(0,e.useRef)(null),G=(0,e.useRef)(null),[H,I]=(0,e.useState)({width:72,height:200}),[J,K]=(0,e.useState)(null),L=[{id:"rephrase",label:"Rephrase"},{id:"shorten",label:"Shorten"},{id:"elaborate",label:"Elaborate"},{id:"formal",label:"More formal"},{id:"casual",label:"More casual"},{id:"bulletise",label:"Bulletise"},{id:"summarise",label:"Summarise"}],M=[{id:"bullet",label:"Bullet list",icon:(0,d.jsx)(xt,{className:"w-4 h-4"})},{id:"ordered",label:"Numbered list",icon:(0,d.jsx)(xu,{className:"w-4 h-4"})},{id:"table-2",label:"Table (2 columns)",icon:(0,d.jsx)(xX,{className:"w-4 h-4"})},{id:"table-3",label:"Table (3 columns)",icon:(0,d.jsx)(xX,{className:"w-4 h-4"})},{id:"checklist",label:"Checklist",icon:(0,d.jsx)(xY,{className:"w-4 h-4"})},{id:"quote",label:"Quote block",icon:(0,d.jsx)(xv,{className:"w-4 h-4"})},{id:"markdown-clean",label:"Markdown clean-up",icon:(0,d.jsx)(ao,{className:"w-4 h-4"})}],N=i.length>0&&!!l,O=B?z.find(a=>a.id===B):null,P=z.filter(a=>"done"===a.status).length,Q=z.length,R=O?.status==="running",S=(0,e.useMemo)(()=>{if(!l)return{top:12,left:12};let a=H.width||72,b=H.height||200,c=Math.max(12,Math.min(l.right+8,window.innerWidth-a-12));return{top:Math.max(12,Math.min(l.top+l.height/2-b/2,window.innerHeight-b-12)),left:c}},[l,H]),T=a=>a instanceof Element&&a.closest('[data-askai-ui="true"]'),U=a=>{let b=a.getBoundingClientRect();if(b&&(b.width>0||b.height>0))return b;let c=Array.from(a.getClientRects()).filter(a=>a.width>0||a.height>0);if(0===c.length)return null;let d=Math.min(...c.map(a=>a.left)),e=Math.max(...c.map(a=>a.right)),f=Math.min(...c.map(a=>a.top));return new DOMRect(d,f,e-d,Math.max(...c.map(a=>a.bottom))-f)},V=()=>{j(""),m(null),D.current=null,q(!1)},W=()=>{requestAnimationFrame(()=>{let a=window.getSelection();if(!a||0===a.rangeCount)return void V();let b=a.toString().trim();if(!b)return void V();let c=a.getRangeAt(0),d=U(c);d?(j(b),m(d),D.current=c.cloneRange()):V()})};(0,e.useEffect)(()=>{let a=a=>{T(a.target)||W()},b=()=>{let a=document.activeElement,b=window.getSelection(),c=b?.anchorNode instanceof Element?b.anchorNode:b?.anchorNode?.parentElement;T(a)||T(c)||W()},c=()=>{(()=>{let a=D.current;if(!a)return;let b=U(a);b&&m(b)})()};return document.addEventListener("selectionchange",b),document.addEventListener("mouseup",a),document.addEventListener("keyup",a),window.addEventListener("scroll",c,!0),window.addEventListener("resize",c),()=>{document.removeEventListener("selectionchange",b),document.removeEventListener("mouseup",a),document.removeEventListener("keyup",a),window.removeEventListener("scroll",c,!0),window.removeEventListener("resize",c)}},[]),(0,e.useEffect)(()=>{if(!F.current)return;let a=F.current.getBoundingClientRect();a.width&&a.height&&I(b=>b.width===a.width&&b.height===a.height?b:{width:a.width,height:a.height})},[N,i,p]),(0,e.useEffect)(()=>{if(!B)return;let a=z.find(a=>a.id===B);a&&(u(b=>b||a.title),o(a.mode))},[B,z]);let X=(0,e.useMemo)(()=>{let a=S.left+H.width+12,b=window.innerWidth-256-12;return{top:S.top,left:Math.max(12,Math.min(a,b))}},[S,H]),Y=a=>{let b=(a||i||x).trim();return b?(b!==x&&(y(b),s("")),b):(alert("è«‹å…ˆé¸å–è¦èª¿æ•´çš„æ–‡å­—ã€‚"),"")},Z=async b=>{let d=Y(b.selectedText);if(!d)return;o(b.mode),w(!1),u(_(b)),K(null);let e=`${Date.now()}-${Math.random().toString(36).slice(2,6)}`;D.current&&(E.current[e]=D.current.cloneRange()),c?.(e),g?.(e);let f={id:e,title:_(b),selectionText:d,status:"running",mode:b.mode};A(a=>[...a,f]),$(e);try{let c=await (a?a({...b,selectedText:d,taskId:e}):Promise.resolve((()=>{if("format"===b.mode){if("bullet"===b.preset)return`<ul class="list-disc pl-5"><li>${d}</li><li>ç¬¬äºŒé»ž</li></ul>`;if(b.preset?.toString().startsWith("table")){let a="table-3"===b.preset?3:2,c=Array.from({length:a},(a,b)=>`Column ${b+1}`).join("</th><th>");return`<table class="table-auto border-collapse w-full"><thead><tr><th>${c}</th></tr></thead><tbody><tr>${Array.from({length:a},()=>"<td>Value</td>").join("")}</tr></tbody></table>`}return"checklist"===b.preset?`<ul class="list-none pl-0"><li>â˜ ${d}</li><li>â˜ ä¸‹ä¸€æ­¥</li></ul>`:"quote"===b.preset?`<blockquote class="border-l-4 pl-3 italic text-gray-700">${d}</blockquote>`:`<div>${d}</div>`}let a=b.prompt?`ï¼ˆ${b.prompt}ï¼‰`:"";return`<p>${d}${a?" "+a:""}</p>`})()));A(a=>a.map(a=>a.id===e?{...a,html:c,status:"done"}:a)),B===e&&(K(c),u(_(b)))}catch(c){console.error("Ask AI run failed",c);let a='<p class="text-red-500">AI è¼¸å‡ºå¤±æ•—ï¼Œè«‹é‡è©¦ã€‚</p>';A(b=>b.map(b=>b.id===e?{...b,html:a,status:"error"}:b)),B===e&&(K(a),u(_(b)))}},$=a=>{if(C(a),!a)return;let b=z.find(b=>b.id===a);b&&(u(b.title),K(b.html||null),o(b.mode))},_=a=>{if("format"===a.mode){let b=M.find(b=>b.id===a.preset);return b?.label||"Format"}let b=L.find(b=>b.id===a.preset);return b?.label||"Edit"},aa=()=>{let a=window.getSelection();a&&a.removeAllRanges()},ab=()=>{Z({mode:"edit",preset:void 0,prompt:r,selectedText:O?.selectionText||x||i})};if("undefined"==typeof document)return null;let ac=f?.current,ad=(h=ac?"inline":"floating",0===Q||v?null:(0,d.jsxs)("button",{type:"button","data-askai-ui":"true",className:`${"inline"===h?"inline-flex items-center gap-2 px-3 py-1.5 rounded-md text-xs font-semibold shadow-sm whitespace-nowrap flex-shrink-0":"fixed z-30 bottom-4 left-4 w-16 h-16 rounded-full flex flex-col items-center justify-center gap-1 shadow-lg"} bg-purple-600 text-white transition-colors hover:bg-purple-500`,onClick:()=>{let a=z[z.length-1];a&&($(a.id),w(!0))},title:"Ask AI Tasking",children:[(0,d.jsx)("span",{className:"text-[10px] leading-none uppercase tracking-wide",children:"Ask AI"}),(0,d.jsxs)("span",{className:"text-xs font-semibold leading-none",children:[P,"/",Q]})]}));return(0,d.jsxs)(d.Fragment,{children:[(0,xT.createPortal)((0,d.jsxs)(d.Fragment,{children:[N?(0,d.jsxs)("div",{"data-askai-ui":"true",className:"fixed z-30 flex flex-col bg-white border border-gray-200 shadow-lg rounded-full py-3 px-2 gap-3",style:{top:S.top,left:S.left},ref:F,children:[(0,d.jsx)(x$,{icon:(0,d.jsx)(k,{className:"w-4 h-4"}),label:"Edit",onClick:()=>{q(!1),Y()&&(o("edit"),u("Edit"),K(null),w(!0),s(""))}}),(0,d.jsx)(x$,{icon:(0,d.jsx)(ao,{className:"w-4 h-4"}),label:"Format",active:p,onClick:()=>{q(a=>!a),o("format")}}),(0,d.jsx)(x$,{icon:(0,d.jsx)(xV,{className:"w-4 h-4"}),label:"Shorten",onClick:()=>Z({mode:"edit",preset:"shorten",selectedText:i})}),(0,d.jsx)(x$,{icon:(0,d.jsx)(xW,{className:"w-4 h-4"}),label:"Add note",onClick:()=>Z({mode:"edit",preset:"elaborate",selectedText:i})})]}):null,p&&N?(0,d.jsxs)(x_,{anchor:X,children:[(0,d.jsx)("div",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Format templates"}),(0,d.jsx)("div",{className:"flex flex-col gap-1",children:M.map(a=>(0,d.jsx)(x0,{label:a.label,icon:a.icon,onClick:()=>{Z({mode:"format",preset:a.id,selectedText:x||i}),q(!1)}},a.id))})]}):null,v?(0,d.jsxs)("div",{"data-askai-ui":"true",className:"fixed inset-0 z-40 flex items-start justify-center overflow-y-auto px-3 py-6",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/5 backdrop-blur-[1px]"}),(0,d.jsxs)("div",{className:"relative w-[min(780px,92vw)] bg-white shadow-2xl border border-gray-200 rounded-2xl p-4 max-h-[80vh] flex flex-col overflow-hidden",ref:G,children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-900",children:[(0,d.jsx)(xU,{className:"w-4 h-4 text-purple-500"}),(0,d.jsx)("span",{children:t||("format"===n?"Format":"Edit")}),R&&(0,d.jsx)(am,{className:"w-4 h-4 animate-spin text-gray-400"})]}),(0,d.jsx)("button",{className:"p-1 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100",onClick:()=>void(w(!1),C(null)),children:(0,d.jsx)(mc,{className:"w-4 h-4"})})]}),Q>1&&(0,d.jsx)("div",{className:"mb-3",children:(0,d.jsx)("select",{className:"w-full px-3 py-2 text-sm border rounded-lg text-gray-700",value:B||"",onChange:a=>{let b=a.target.value;b&&$(b)},children:z.map((a,b)=>(0,d.jsxs)("option",{value:a.id,children:["Task ",b+1," â€” ",a.title," (",a.status,")"]},a.id))})}),(0,d.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-4 pr-1 custom-scrollbar",children:[(0,d.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,d.jsxs)("div",{className:"border border-gray-100 rounded-xl p-3 bg-gray-50 max-h-64 overflow-y-auto custom-scrollbar",children:[(0,d.jsx)("div",{className:"text-xs font-semibold text-gray-500 mb-2",children:"Before"}),(0,d.jsx)("div",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:O?.selectionText||x||i})]}),(0,d.jsxs)("div",{className:"border border-purple-100 rounded-xl p-3 bg-purple-50/60 min-h-[140px] max-h-64 overflow-y-auto custom-scrollbar",children:[(0,d.jsx)("div",{className:"text-xs font-semibold text-purple-600 mb-2",children:"After"}),(0,d.jsx)("div",{className:"text-sm text-gray-900 leading-relaxed",dangerouslySetInnerHTML:{__html:J||'<p class="text-gray-400">ç­‰å¾…ç”Ÿæˆ...</p>'}})]})]}),(0,d.jsx)("div",{className:"flex flex-col gap-3",children:"edit"===n&&(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)("textarea",{className:"w-full px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 min-h-[96px] resize-y",placeholder:"åœ¨é€™è£¡è¼¸å…¥æ›´é•·çš„æç¤ºï¼Œæˆ–è²¼ä¸Šå…·é«”çš„ä¿®æ”¹èªªæ˜Ž",value:r,onChange:a=>s(a.target.value),onKeyDown:a=>{"Enter"===a.key&&(a.metaKey||a.ctrlKey)&&(a.preventDefault(),ab())}}),(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,d.jsx)("button",{className:"px-4 py-2 rounded-lg text-sm font-semibold bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",onClick:ab,disabled:!r.trim()||R,children:"Generate"}),(0,d.jsxs)("select",{className:"px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",onChange:a=>{let b=a.target.value;b&&(Z({mode:"edit",preset:b,selectedText:O?.selectionText||x||i}),a.currentTarget.value="")},defaultValue:"",children:[(0,d.jsx)("option",{value:"",disabled:!0,children:"Quick refine"}),L.map(a=>(0,d.jsx)("option",{value:a.id,children:a.label},a.id))]})]})]})})]}),(0,d.jsxs)("div",{className:"mt-3 flex items-center gap-2 justify-end flex-wrap border-t border-gray-100 pt-3 bg-white",children:["edit"!==n&&(0,d.jsxs)("select",{className:"px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",onChange:a=>{let b=a.target.value;b&&(Z({mode:"edit",preset:b,selectedText:O?.selectionText||x||i}),a.currentTarget.value="")},defaultValue:"",children:[(0,d.jsx)("option",{value:"",disabled:!0,children:"Refine"}),L.map(a=>(0,d.jsx)("option",{value:a.id,children:a.label},a.id))]}),!R&&(0,d.jsxs)("button",{className:"px-4 py-2 rounded-lg text-sm font-semibold flex items-center gap-1 bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{let a=z.find(a=>a.id===B),c=a?.html||J;if(!c)return;if(b){b(c,B||void 0),C(null),w(!1),aa();return}let d=B?E.current[B]:D.current;if(!d)return;let e=document.createDocumentFragment(),f=document.createElement("div");for(f.innerHTML=c;f.firstChild;)e.appendChild(f.firstChild);d.deleteContents(),d.insertNode(e),B&&delete E.current[B],C(null),w(!1),aa()},disabled:!J,children:["Replace",(0,d.jsx)(xO,{className:"w-4 h-4"})]})]})]})]}):null]}),document.body),ad&&(0,xT.createPortal)(ad,ac||document.body)]})},x$=({icon:a,label:b,active:c,onClick:e})=>(0,d.jsx)("button",{className:`w-10 h-10 inline-flex items-center justify-center rounded-full border transition-colors ${c?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-blue-300 text-gray-600"}`,onMouseDown:a=>a.preventDefault(),onClick:e,title:b,children:a}),x_=({anchor:a,children:b})=>(0,d.jsx)("div",{"data-askai-ui":"true",className:"fixed z-40 w-64 bg-white border border-gray-200 shadow-xl rounded-2xl p-3",style:{top:a.top,left:a.left},children:b}),x0=({label:a,icon:b,disabled:c,onClick:e})=>(0,d.jsxs)("button",{disabled:c,className:`w-full flex items-center gap-2 px-2 py-2 rounded-lg text-sm ${c?"text-gray-300 cursor-not-allowed":"text-gray-800 hover:bg-gray-50 active:bg-gray-100"}`,onMouseDown:a=>a.preventDefault(),onClick:e,children:[b||(0,d.jsx)(k,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:a})]}),x1=`
    **STRICT VISUAL CATEGORIES (Select ONE):**
    1. **INFOGRAPHIC:** Clean, modern layout using icons, flowcharts, or "lazy pack" style summaries to explain concepts. (Use for: steps, summaries, data).
    2. **BRANDED_LIFESTYLE:** High-end photography. Real people using the product/service in a specific, authentic environment. (Use for: Brand image, emotional connection).
    3. **PRODUCT_INFOGRAPHIC:** Close-up of the product with subtle graphical highlights (lines/arrows) emphasizing a specific feature/spec.
    4. **ECOMMERCE_WHITE_BG:** Pure white background, studio lighting, product isolated. (Use for: Commercial display only).

    **COMPOSITION RULE (Split Screen):**
    - If the context compares two things (Before/After, Good vs Bad, Option A vs B), or needs a macro detail alongside a wide shot, request a "Split Screen (Left/Right)" composition.
    
    **NEGATIVE CONSTRAINTS (ABSOLUTELY FORBIDDEN):**
    - **NO ABSTRACT ART:** No glowing brains, floating digital nodes, surreal metaphors, or "conceptual" 3D renders.
    - **NO TEXT:** Do not try to render specific sentences inside the image (AI cannot spell).
`,x2=(a,b="image/png")=>a?a.startsWith("data:")||a.startsWith("http")?a:`data:${b};base64,${a}`:null,x3=a=>a?Array.isArray(a)?a:[a]:[],x4=(a,b)=>{if(!a)return null;if("string"==typeof a)return x2(a,b||"image/png");if(a.inlineData?.data)return x2(a.inlineData.data,a.inlineData.mimeType||b);let c=a.b64_json||a.base64||a.base64Data||a.data||a.image;if("string"==typeof c)return x2(c,a.mimeType||a.mediaType||b);if(c&&"object"==typeof c&&c!==a){let d=x4(c,a.mimeType||a.mediaType||b);if(d)return d}return"string"==typeof a.text&&a.text.trim().startsWith("data:image")?a.text.trim():a.url&&"string"==typeof a.url?a.url:null},x5=async(a,b="Describe this image in detail.",c=A.FLASH)=>{let d=Date.now();try{let e=await fetch(N("/vision"),{method:"POST",headers:O(),body:JSON.stringify({prompt:b,image:a,model:c})});if(!e.ok){let a=await e.text();throw Error(`Vision API request failed (${e.status}): ${a}`)}let f=await e.json(),g=Date.now()-d,h=(c.includes("flash"),"FLASH"),i=H(f,h);return{data:f.text,...i,duration:g}}catch(a){throw Date.now(),Error(`Failed to analyze image: ${a instanceof Error?a.message:String(a)}`)}},x6=async(a,b)=>{let c=Date.now(),d=a.filter(a=>a.aiDescription).slice(0,5).map(a=>a.aiDescription).join("\n---\n"),e=(({languageInstruction:a,analyzedSamples:b,websiteType:c})=>`
    I need to define a consistent "Visual Identity"(Master Style Prompt) for an article.
    
    <WebsiteContext>
    ${c}
    </WebsiteContext>
    DEFINITION: The type of business this is.
    ACTION: Ensure style matches this industry.
    
    <SourceImageDescriptions>
    ${b&&b.length>0?b:"No source images available. Infer style strictly from Website Context."}
    </SourceImageDescriptions>
    DEFINITION: Descriptions of actual images on the site.
    ACTION: Mimic this existing style.

    TASK:
    Synthesize a ** single, cohesive Visual Style Description** that I can append to every image prompt to ensure consistency.

      Include:
    1. ** Color Palette:** (e.g., "Medical Blue #0055FF and Clean White", or "Warm Earth Tones")
    2. ** Lighting / Mood:** (e.g., "Soft bright studio lighting", "Moody natural light", "Flat vector lighting")
    3. ** Art Medium:** (e.g., "High-resolution Photography", "Minimalist 2D Vector Art", "3D Product Render")
    
    OUTPUT FORMAT:
    Return ONLY the style description string(max 30 words).
  Example: "Photorealistic style with soft daylight, using a clinical white and teal palette, high-end commercial aesthetic."
    
    <LanguageInstruction>
    ${a}
    </LanguageInstruction>
    DEFINITION: Output Language.
    ACTION: Write the style description in English (for AI generation) but if instruction says otherwise, follow it.
`)({languageInstruction:I("zh-TW"),analyzedSamples:d,websiteType:b});try{let a=await U.runText(e,"FLASH");return{data:a.text,usage:a.usage,cost:a.cost,duration:a.duration}}catch(a){return console.error("Visual Style Analysis failed",a),{data:"Clean, modern professional photography with natural lighting.",usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-c}}},x7=async(a,b,c="")=>{let d=Date.now(),e=(({contextText:a,languageInstruction:b,visualStyle:c,guide:d})=>`
    Generate a detailed image generation prompt based on the following context.

  <LanguageInstruction>
  ${b}
  </LanguageInstruction>
  DEFINITION: Output Language.
  ACTION: Write the prompt in English unless specified.
    
    <ContextText>
    ${a}
    </ContextText>
    DEFINITION: The scene usage context.
    ACTION: Describe this scene.
    
    <VisualStyleGuide>
    ${c}
    </VisualStyleGuide>
    DEFINITION: The artistic style.
    ACTION: Apply these visual rules strictly.
    
    <SpecificGuide>
    ${d}
    </SpecificGuide>
    DEFINITION: User specific hints.
    ACTION: Incorporate these hints.

TASK:
    Create a detailed, specific image generation prompt that:
    1. Captures the essence of the context text
    2. Adheres to the visual style guide
    3. Is optimized for AI image generation
    4. Avoids abstract concepts and focuses on concrete, photographable subjects
    
    Return ONLY the image prompt(no explanations or metadata).
    `)({contextText:a,languageInstruction:I(b),visualStyle:c,guide:x1}),f=await U.runText(e,"FLASH");return{data:f.text?.trim()||"",usage:f.usage,cost:f.cost,duration:Date.now()-d}},x8=async a=>{let b=Date.now();try{let c=await fetch(N("/image"),{method:"POST",headers:O(),body:JSON.stringify({prompt:a,model:A.IMAGE_PREVIEW,aspectRatio:"16:9"})}),d=(c.headers.get("content-type")||"").includes("application/json");if(!c.ok){let a=d?await c.json():await c.text(),b="string"==typeof a?a:a?.error||JSON.stringify(a);throw Error(`Image generation failed (${c.status}): ${b}`)}let e=d?await c.json():{image:await c.text()},f=(a=>{if(!a)return null;if("string"==typeof a)return x2(a);let b=x4(a,a.mimeType||a.mediaType);if(b)return b;let c=(a=>{if(!Array.isArray(a))return null;for(let b of a){let a=b?.content?.parts;if(Array.isArray(a))for(let b of a){if(b?.inlineData?.data)return x2(b.inlineData.data,b.inlineData.mimeType);if("string"==typeof b?.text&&b.text.trim().startsWith("data:image"))return b.text.trim()}}return null})(a.candidates||a.response?.candidates);if(c)return c;for(let b of[a.images,a.data?.images,a.response?.images,a.result?.images,a.data,a.result])for(let c of x3(b)){let b=x4(c,a?.mimeType||a?.mediaType);if(b)return b}return a.result?.image?x2(a.result.image):null})(e),g=H(e.totalUsage||e.usageMetadata||e.usage,"IMAGE_GEN");return{data:f,...g,duration:Date.now()-b}}catch(a){throw console.error("Image generation failed",a),a}},x9=async(a,b,c,d="")=>{let e=Date.now(),f=I(c),g=b.length>0?b.length+1:2,h=b.slice(0,30).map(a=>({alt:a.altText,aiAnalysis:a.aiDescription||"N/A"})),i=`
    I have a draft ARTICLE and a list of SOURCE IMAGES.
    I also have a MANDATORY GLOBAL VISUAL STYLE that must be applied to all generated images.

    GLOBAL VISUAL STYLE: "${d||"Clean, modern, professional style"}"
    
    TASK:
    Create a "Visual Asset Plan" for the new article.
    
    ${x1}
    
    **ADDITIONAL CONSTRAINTS:**
    1. **Quantity:** Generate a plan for **MAXIMUM ${g} images**.
    2. **Context & Culture:** Ensure the image description is culturally relevant.
       ${f}
    3. **Insertion Anchor:** Select a unique text phrase (6-12 chars) from the content.
    4. **Unified Style:** In the 'generatedPrompt', you MUST Explicitly describe how the "Global Visual Style" applies to this specific subject. Do NOT frame as an infographic; focus on photography, product, or lifestyle visuals.

    ARTICLE CONTENT:
    ${a.substring(0,2e4)}

    SOURCE IMAGES (Analyzed Reference):
    ${JSON.stringify(h)}
    `;try{let a=await U.runJson(i,"FLASH",{type:V,properties:{plans:{type:W,items:{type:V,properties:{generatedPrompt:{type:X,description:"Detailed prompt including subject + visual style + mood."},category:{type:X,enum:["BRANDED_LIFESTYLE","PRODUCT_DETAIL","ECOMMERCE_WHITE_BG"]},insertAfter:{type:X},rationale:{type:X}},required:["generatedPrompt","category","insertAfter"]}}},required:["plans"]});return{data:(a.data.plans||[]).map((a,b)=>({id:`plan-${Date.now()}-${b}`,category:a.category,generatedPrompt:a.generatedPrompt,insertAfter:a.insertAfter,status:"idle"})),usage:a.usage,cost:a.cost,duration:a.duration}}catch(a){return console.error("Image Planning failed",a),{data:[],usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-e}}},ya=async(a,b,c,d,e)=>{let f=Date.now();if(!(d&&d.trim().length>10)&&b.length<=5&&c.length<=5)return{data:{filteredPoints:b,filteredAuthTerms:c,knowledgeInsights:[]},usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:0};let g=I(e),h=`
    I am writing a specific section titled: "${a}".
    
    I have:
    1. A database of "Key Information Points".
    2. A database of "Authority Terms".
    3. A "BRAND KNOWLEDGE BASE" (Guidelines/Specs).
    
    TASK:
    1. **Filter Data**: Select ONLY the Key Points and Authority Terms strictly relevant to "${a}".
    2. **Agentic Retrieval**: Read the "BRAND KNOWLEDGE BASE". Extract 3-5 specific bullet points (Do's, Don'ts, Specs, Tone) that MUST be applied to this specific section.
       - If nothing is relevant in the KB for this section, return empty list.
    
    ${g}
    
    DATABASE:
    Key Points: ${JSON.stringify(b)}
    Authority Terms: ${JSON.stringify(c)}
    
    BRAND KNOWLEDGE BASE:
    ${d?d.substring(0,3e4):"N/A"}
    `;try{let a=await U.runText(h,"FLASH",{responseMimeType:"application/json",responseSchema:{type:V,properties:{filteredPoints:{type:W,items:{type:X}},filteredAuthTerms:{type:W,items:{type:X}},knowledgeInsights:{type:W,items:{type:X}}}}}),b=JSON.parse(a.text||"{}"),c=H(a.usage,"FLASH");return{data:{filteredPoints:b.filteredPoints||[],filteredAuthTerms:b.filteredAuthTerms||[],knowledgeInsights:b.knowledgeInsights||[]},...c,duration:a.duration}}catch(a){return console.error("Context filter failed",a),{data:{filteredPoints:b,filteredAuthTerms:c,knowledgeInsights:[]},usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-f}}},yb=async(a,b,c,d,e,f=[],g=[],h=null,i=[],j=[],k=0,l={})=>{let m=Date.now(),n=g.length<=1,o=e.slice(0,30),p=await ya(b,i,h?.relevantTerms||[],a.brandKnowledge,a.targetAudience),q=Array.from(new Set([...Array.isArray(l.keyFacts)?l.keyFacts:[],...Array.isArray(l.augment)?l.augment:[],...p.data.filteredPoints])),r=p.data.filteredAuthTerms,s=p.data.knowledgeInsights,{coreQuestion:t,difficulty:u,writingMode:v,solutionAngles:w}=l||{},x=((a,b,c=[],d,e=0,f=!1)=>{if(!d||!d.productName)return"";let g=`### ðŸ’Ž COMMERCIAL & SERVICE STRATEGY (HIGH PRIORITY) 
`,h=!1,i=b?.competitorBrands||[],j=b?.competitorProducts||[],k=[...new Set([...i,...j,...b?.replacementRules||[]])];k.length>0&&(g+=`
        **ðŸ›¡ï¸ SANITIZATION PROTOCOL (ABSOLUTE RULES):**
        You are writing for the brand: **"${d.brandName}"**.
        The Reference Text mentions competitors: ${k.map(a=>`"${a}"`).join(", ")}.

        1. **TOTAL ANNIHILATION:** Never output these competitor words in the final text.
        2. **NO HYBRIDS:** Do NOT write "CompName as ${d.brandName}". That is nonsense.
        3. **SUBJECT SWAP (SEMANTIC REWRITE):**
           - If the reference says: "${i[0]||"Competitor"} offers the best laser..."
           - **REWRITE AS:** "**${d.brandName}** offers the best laser..." (Change the Subject).
           - If the reference discusses a specific machine (e.g., "${j[0]||"OldMachine"}"), replace it with **"${d.productName}"**.
        `),g+=`
    **ðŸ“‰ DENSITY CONTROL (AVOID KEYWORD STUFFING):**
    - **Full Name Rule:** Use the full product name "**${d.productName}**" **MAXIMUM ONCE** in this section.
    - **Natural Variation:** For subsequent mentions, you MUST use variations:
      - The Brand Name: "**${d.brandName}**"
      - Pronouns: "We", "Our team", "The center"
      - Generic: "This technology", "The treatment", "Our service"
    `,f&&e<=2&&(h=!0,g+=`
**ðŸš€ MANDATORY INJECTION:** You have NOT mentioned "${d.brandName}" enough yet. You MUST introduce it here as the solution.
`);let l=a.toLowerCase(),m=c.filter(a=>a.relevanceKeywords.some(a=>l.includes(a.toLowerCase()))),n=l.includes("solution")||l.includes("benefit")||l.includes("guide")||l.includes("how"),o=m;return 0===m.length&&(h||n)&&(o=c.slice(0,2)),o.length>0&&(g+=`
**ðŸ’¡ PROBLEM-SOLUTION WEAVING:**
Integrate the following mapping naturally:
`,o.forEach(a=>{g+=`- Discuss "${a.painPoint}" -> Then present **${d.brandName}** (or ${d.productName}) as the solution using [${a.productFeature}].
`})),g+=`
**CTA:** End with a natural link: [${d.ctaLink}] (Anchor: Check ${d.brandName} pricing/details).
`})(b,a.referenceAnalysis,a.productMapping,a.productBrief,k,n),y=I(a.targetAudience),z=Array.isArray(l.suppress)?l.suppress:[],A=l.isChecklist?"checklist":void 0,B=Array.isArray(l.augment)?l.augment:[],C=Array.isArray(l.subheadings)?l.subheadings:[],D=(({sectionTitle:a,languageInstruction:b,previousSections:c,futureSections:d,generalPlan:e,specificPlan:f,kbInsights:g,keywordPlans:h,relevantAuthTerms:i,points:j,injectionPlan:k,articleTitle:l,coreQuestion:m,difficulty:n,writingMode:o,solutionAngles:p,avoidContent:q,renderMode:r,suppressHints:s,augmentHints:t,subheadings:u,regionReplacements:v,humanWritingVoice:w,regionVoiceDetect:x,replacementRules:y})=>{let z=n||"easy",A=o||("easy"===z?"direct":"multi_solutions");return`You are an expert editor writing the section:
    <SectionTitle>
      ${a}
    </SectionTitle>
    DEFINITION: The title of the specific section you need to write.
    
    <LanguageInstruction>
    ${b}
    </LanguageInstruction>
    DEFINITION: The target language and audience for the article.
    
    ## Context Structure
    <ArticleTopic>
    ${l}
    </ArticleTopic>
    DEFINITION: The main topic of the entire article.

    <PreviousSections>
    ${c.slice(-2).map(a=>a.substring(0,100)+"...").join(" | ")}
    </PreviousSections>
    DEFINITION: Summaries of the immediately preceding sections.

    <UpcomingSections>
    ${d.join(", ")}
    </UpcomingSections>
    DEFINITION: Titles of sections to be written later.


    ## Strategy & Style
    <OverallVoice>
    ${e?.join("; ")||"Professional, authoritative"}
    </OverallVoice>
    DEFINITION: The desired tone and persona for the article.

    <SectionStrategy>
    ${f?.join("; ")||"Explain thoroughly"}
    </SectionStrategy>
    DEFINITION: Specific goals or angles for this section.

    <BrandKnowledge>
    ${g.length>0?g.join("; "):"None"}
    </BrandKnowledge>
    DEFINITION: Background facts or guidelines about the brand.

    ${w?`
    <HumanWritingVoice>
    ${w}
    </HumanWritingVoice>
    DEFINITION: Instructions on how to sound human and not like an AI.
    `:""}

    ${x?`
    <RegionVoiceProfile>
    ${x}
    </RegionVoiceProfile>
    DEFINITION: The detected regional voice composition (e.g., 70% HK / 30% TW).
    INSTRUCTION: Adhere to the dominant regional tone.
    `:""}


    ## Localization & Safety
    ${y&&y.length>0||v&&v.length>0?`
    <LocalizationAndSafety>
    ${y&&y.length>0?`
    **Blocked Terms (DO NOT USE):**
    ${y.map(a=>`- âŒ ${a}`).join("\n")}
    `:""}
    ${v&&v.length>0?`
    **Regional Replacements (MANDATORY):**
    ${v.map(a=>a.replacement?`- "${a.original}" â†’ "${a.replacement}"`:`- "${a.original}" â†’ [REMOVE from text]`).join("\n")}
    `:""}
    </LocalizationAndSafety>
    DEFINITION: Terms to avoid and mandatory vocabulary corrections for the target region.
    INSTRUCTION:
    1. NEVER use any Blocked Terms.
    2. ALWAYS replace "original" terms with their "replacement".
    3. If replacement is [REMOVE], rewrite the sentence to exclude that term entirely.
    `:"(No localization constraints)"}


    ## Task Definition
    <CoreQuestion>
    ${m||"Infer the precise question and answer it"}
    </CoreQuestion>
    DEFINITION: The comprehensive question this section must answer.

    <Difficulty>
    ${z}
    </Difficulty>
    DEFINITION: The complexity level of the topic (easy, medium, unclear).

    <WritingMode>
    ${"direct"===A?"direct answer first":"multi solutions then synthesize"}
    </WritingMode>
    DEFINITION: The structural approach (Direct vs Multi-angle).
    
    ${"multi_solutions"===A?"- Provide 2-3 distinct, non-overlapping solution paths before the final synthesized answer.":"- Lead with a concise, direct answer to the core question."}


    ## Conciseness Constraints
    - ** General Rule **: Cut all fluff. Be crisp and direct. Stop immediately after answering the core question.
    ${/introduction|conclusion|intro|outcome|result|summary|å¼•è¨€|çµå°¾|çµè«–/i.test(a)?"- ** SPECIAL CONSTRAINT **: Target 40~80 words. Write as a SINGLE block of text (one paragraph). Do NOT split into multiple paragraphs.":""} 
    - ** If difficulty = "easy" **: Target < 160 words. Get straight to the point. No preamble.
    - ** If difficulty = "medium" **: Target < 180 words. Explain efficiently using Lists.
    - ** If difficulty = "unclear" **: Focus on clarifying the ambiguity briefly with Lists.


    ## Output Restrictions
    ${"checklist"===r?"- OUTPUT FORMAT: Use checklist/bulleted list. Include every provided Key Fact; do not drop items.":"- OUTPUT FORMAT: Narrative with Markdown as needed."}


    ## Structure Enforcement
    ${u&&u.length>0?`
    <MandatorySubheadings>
    ${u.map((a,b)=>`${b+1}. ${a}`).join("\n")}
    </MandatorySubheadings>
    DEFINITION: The exact H3 subheadings you must use.
    `:"(No predefined subheadings)"}


    ## Solution Angles
    ${"multi_solutions"===A?p&&p.length>0?`
        <DefinedAngles>
        ${p.join("; ")}
        </DefinedAngles>
        DEFINITION: The specific angles/perspectives to cover.
        `:"None provided; create 2 distinct angles.":"Not needed for direct mode."}


    ## Resources & Keywords
    <SemanticKeywords>
    ${h.map(a=>`
    - "${a.word}": ${a.plan?.join("; ")||"Use naturally."}`).join("")}
    </SemanticKeywords>
    DEFINITION: SEO keywords with semantic usage rules.
    INSTRUCTION: Use these words according to their "Semantic Context" rules to maintain the original depth.

    <AuthorityTerms>
    ${i.slice(0,5).join(", ")}
    </AuthorityTerms>
    DEFINITION: Technical or authoritative terms.


    ## Key Facts & Narrative Points
    - ** CRITICAL WRITING RULE **: When writing the main sentence for any Key Fact below, ** minimize the use of commas and symbols **. Use clean, direct sentence structures. 
    <KeyPoints>
    ${j.length>0?j.join("; "):"(No new key points needed for this section, focus on narrative)"}
    </KeyPoints>
    DEFINITION: The core facts and information for this section.


    ## Injection Plan
    ${k}


    ## Exclusion Rules
    ${s&&s.length>0?`
    <StrictExclusion>
    ${s.map(a=>`- ${a}`).join("\n")}
    </StrictExclusion>
    DEFINITION: Topics that are strictly forbidden here.
    `:"(None)"}

    ${q&&q.length>0?`
    <NegativeConstraints>
    ${q.map(a=>`- ${a}`).join("\n")}
    </NegativeConstraints>
    DEFINITION: Content to avoid to prevent repetition/redundancy.
    `:""}


    ## Output Schema
    - Return ONLY the content for this section in JSON format.
    - Use proper Markdown for the content string(H3 for subsections, Lists where appropriate).
    - Do NOT repeat the H2 Title "${a}".
    - Ensure smooth transitions from the previous section.
    - If writing mode is "multi_solutions", list the solution paths clearly, then close with a synthesized recommendation.
    - ** IMPORTANT **: You must populate the "usedPoints" array with the exact strings of any Key Facts you included in the content.
    - ** IMPORTANT **: You must populate "injectedCount" with the number of times you explicitly mentioned the Product Name or Brand Name.
`})({sectionTitle:b,languageInstruction:y,previousSections:f,futureSections:g,generalPlan:d,specificPlan:c,kbInsights:s,keywordPlans:o,relevantAuthTerms:r,points:q,injectionPlan:x,articleTitle:a.title,coreQuestion:t,difficulty:u,writingMode:v,solutionAngles:w,renderMode:A,suppressHints:z,augmentHints:B,subheadings:C,avoidContent:[...g,...f,...q.filter(a=>!q.includes(a)),...z],regionReplacements:a.referenceAnalysis?.regionalReplacements,humanWritingVoice:a.referenceAnalysis?.humanWritingVoice,regionVoiceDetect:a.referenceAnalysis?.regionVoiceDetect,replacementRules:a.referenceAnalysis?.replacementRules}),E=await U.runJson(D,"FLASH",{type:V,properties:{content:{type:X},usedPoints:{type:W,items:{type:X}},injectedCount:{type:"integer",description:"How many times did you mention the Product Name?"}}}),F=E.data||{},G="string"==typeof F.content&&F.content.trim().length>0?F.content:"string"==typeof F.sectionContent?F.sectionContent:"",H=Array.isArray(F.usedPoints)&&F.usedPoints||Array.isArray(F.used_points)&&F.used_points||Array.isArray(F.pointsUsed)&&F.pointsUsed||Array.isArray(F.usedFacts)&&F.usedFacts||[],J=Array.isArray(H)?H.map(a=>("string"==typeof a?a:String(a||"")).trim()).filter(Boolean):[],K=F.injectedCount??F.injected_count??0,L="number"==typeof K?K:Number(K)||0,M={inputCost:E.cost.inputCost+p.cost.inputCost,outputCost:E.cost.outputCost+p.cost.outputCost,totalCost:E.cost.totalCost+p.cost.totalCost};return{data:{content:(G||"").replace(/^##\s+/gm,"### ").replace(/^#\s+/gm,"### ").replace(/<h1>(.*?)<\/h1>/gi,"### $1").replace(/<h2>(.*?)<\/h2>/gi,"### $1"),usedPoints:J||[],injectedCount:L||0},usage:{inputTokens:E.usage.inputTokens+p.usage.inputTokens,outputTokens:E.usage.outputTokens+p.usage.outputTokens,totalTokens:E.usage.totalTokens+p.usage.totalTokens},cost:M,duration:Date.now()-m}},yc=async(a,b,c)=>{let d=(({prompt:a,languageInstruction:b})=>`
    <LanguageInstruction>
    ${b}
    </LanguageInstruction>
    DEFINITION: The language to use.
    ACTION: Follow this instruction.

    <InputPrompt>
    ${a}
    </InputPrompt>
    DEFINITION: The logic or text to process.
    ACTION: Execute this prompt.
`)({prompt:a,languageInstruction:I(b)}),e=await U.runText(d,"FLASH",c);return{data:e.text,usage:e.usage,cost:e.cost,duration:e.duration}},yd=async(a,b,c)=>{let d=Date.now(),e=I(c),f=new DOMParser().parseFromString(a,"text/html"),g=[];if(f.querySelectorAll("p, li").forEach((a,b)=>{let c=a.textContent?.trim()||"";c.length>20&&g.push({id:b,text:c.substring(0,80)+"...",html:a.outerHTML})}),0===g.length)return{data:{originalSnippet:"",newSnippet:""},usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-d};let h=(({pointToInject:a,blocks:b})=>`
    I need to insert this Key Point: 
    <PointToInject>
    "${a}"
    </PointToInject>
    DEFINITION: The fact that must be added.
    ACTION: Find the best place for this fact.
    
    Here is a "Compact Index" of the article paragraphs:
    <ArticleBlocks>
    ${b.map(a=>`[ID: ${a.id}] ${a.text}`).join("\n")}
    </ArticleBlocks>
    DEFINITION: List of paragraph candidates.
    ACTION: Select one ID from this list.

TASK: Identify the SINGLE Best Block ID to insert / merge this point into. 
    Return ONLY the ID(e.g. "5").
    `)({pointToInject:b,blocks:g}),i=await U.runText(h,"FLASH"),j=i.text?.trim().match(/\d+/)?.[0],k=j?parseInt(j):-1,l=g.find(a=>a.id===k);if(!l)return{data:{originalSnippet:"",newSnippet:""},usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-d};let m=(({pointToInject:a,targetHtml:b,languageInstruction:c})=>`
TASK: Rewrite the following HTML Block to naturally include this Key Point.
    
    <KeyPoint>
    "${a}"
    </KeyPoint>
    DEFINITION: Information to weave in.
    ACTION: Merge this into the text naturally.
    
    <TargetHTMLBlock>
    ${b}
    </TargetHTMLBlock>
    DEFINITION: The existing paragraph.
    ACTION: Rewrite this paragraph to include the point.

    RULES:
    1. Keep the original meaning and HTML tag structure(<p>or<li>).
    2. Weave the point in naturally.Do not just append it at the end unless it fits.
    3. <LanguageInstruction>${c}</LanguageInstruction>
    4. Return ONLY the new HTML string.
    `)({pointToInject:b,targetHtml:l.html,languageInstruction:e}),n=await U.runText(m,"FLASH"),o={inputTokens:(i.usage?.inputTokens||0)+(n.usage?.inputTokens||0),outputTokens:(i.usage?.outputTokens||0)+(n.usage?.outputTokens||0),totalTokens:(i.usage?.totalTokens||0)+(n.usage?.totalTokens||0)},p=H(o,"FLASH");return{data:{originalSnippet:l.html,newSnippet:n.text?.trim()||l.html},usage:o,cost:p.cost,duration:Date.now()-d}},ye=u()(x(a=>({content:"",status:"idle",generationStep:"idle",error:null,isStopped:!1,analysisResults:null,lastConfig:null,setContent:b=>a(a=>({content:"function"==typeof b?b(a.content):b})),setStatus:b=>a({status:b}),setGenerationStep:b=>a({generationStep:b}),setError:b=>a({error:b}),setAnalysisResults:b=>a({analysisResults:b}),setLastConfig:b=>a({lastConfig:b}),stopGeneration:()=>a({isStopped:!0,status:"completed",generationStep:"idle"}),resetGeneration:()=>a({content:"",status:"idle",generationStep:"idle",error:null,isStopped:!1,analysisResults:null,lastConfig:null})}),{name:"pro_content_writer_generation",storage:v(()=>localStorage),partialize:a=>({content:a.content})})),yf=u()(x(a=>({keywordPlans:[],refAnalysis:null,authAnalysis:null,scrapedImages:[],visualStyle:"",brandKnowledge:"",coveredPoints:[],targetAudience:"zh-TW",productMapping:[],activeProductBrief:void 0,articleTitle:"",headingOptimizations:[],languageInstruction:"",hkGroundingResult:null,pendingGroundingResult:null,showGroundingModal:!1,localizedRefAnalysis:null,setKeywordPlans:b=>a({keywordPlans:b}),setRefAnalysis:b=>a({refAnalysis:b}),setAuthAnalysis:b=>a({authAnalysis:b}),setScrapedImages:b=>a({scrapedImages:b}),setVisualStyle:b=>a({visualStyle:b}),setBrandKnowledge:b=>a({brandKnowledge:b}),setCoveredPoints:b=>a(a=>({coveredPoints:"function"==typeof b?b(a.coveredPoints):b})),setTargetAudience:b=>a({targetAudience:b}),setProductMapping:b=>a({productMapping:b}),setActiveProductBrief:b=>a({activeProductBrief:b}),setArticleTitle:b=>a({articleTitle:b}),setHeadingOptimizations:b=>a({headingOptimizations:b}),setLanguageInstruction:b=>a({languageInstruction:b}),setHKGroundingResult:b=>a({hkGroundingResult:b}),setPendingGroundingResult:b=>a({pendingGroundingResult:b}),setShowGroundingModal:b=>a({showGroundingModal:b}),toggleGroundingIssueSelection:b=>a(a=>{if(!a.pendingGroundingResult)return a;let c=a.pendingGroundingResult.issues.map((a,c)=>c===b?{...a,selected:!a.selected}:a);return{pendingGroundingResult:{...a.pendingGroundingResult,issues:c}}}),setLocalizedRefAnalysis:b=>a({localizedRefAnalysis:b}),reset:()=>a({keywordPlans:[],refAnalysis:null,authAnalysis:null,scrapedImages:[],visualStyle:"",brandKnowledge:"",coveredPoints:[],targetAudience:"zh-TW",productMapping:[],activeProductBrief:void 0,articleTitle:"",headingOptimizations:[],languageInstruction:"",hkGroundingResult:null,pendingGroundingResult:null,showGroundingModal:!1,localizedRefAnalysis:null})}),{name:"pro_content_writer_analysis",storage:v(()=>localStorage),partialize:a=>({keywordPlans:a.keywordPlans,refAnalysis:a.refAnalysis,authAnalysis:a.authAnalysis,scrapedImages:a.scrapedImages,visualStyle:a.visualStyle,brandKnowledge:a.brandKnowledge,coveredPoints:a.coveredPoints,targetAudience:a.targetAudience,articleTitle:a.articleTitle,headingOptimizations:a.headingOptimizations,languageInstruction:a.languageInstruction,productMapping:a.productMapping,activeProductBrief:a.activeProductBrief,localizedRefAnalysis:a.localizedRefAnalysis})})),yg=(0,e.createContext)(null),yh=({children:a})=>{let b=ye(),c=yf(),f=D(),g=(0,e.useMemo)(()=>{let a=c.refAnalysis?.structure||[],d=Array.isArray(c.refAnalysis?.keyInformationPoints)?c.refAnalysis.keyInformationPoints:[],e=Array.isArray(c.refAnalysis?.brandExclusivePoints)?c.refAnalysis.brandExclusivePoints:[],g=new Set,h=new Set;return d.forEach(a=>a&&g.add(a)),e.forEach(a=>a&&h.add(a)),a.forEach(a=>{(Array.isArray(a?.keyFacts)?a.keyFacts:[]).forEach(a=>a&&g.add(a)),(Array.isArray(a?.uspNotes)?a.uspNotes:[]).forEach(a=>a&&h.add(a))}),{content:b.content,setContent:a=>b.setContent(a),status:b.status,generationStep:b.generationStep,error:b.error,targetAudience:c.targetAudience,keyPoints:Array.from(g),brandExclusivePoints:Array.from(h),checkedPoints:c.coveredPoints,scrapedImages:c.scrapedImages,visualStyle:c.visualStyle,productBrief:c.activeProductBrief,displayScale:f.displayScale,articleTitle:c.articleTitle,outlineSections:c.refAnalysis?.structure?.map(a=>a.title)||[],onTogglePoint:a=>c.setCoveredPoints(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a]),onRemoveScrapedImage:a=>c.setScrapedImages(c.scrapedImages.map(b=>{let c=b.id||b.url,d=a.id||a.url;return c&&c===d?{...b,ignored:!b.ignored}:b})),onAddCost:(a,b)=>f.addCost(a?.totalCost||0,b?.totalTokens||0),setArticleTitle:c.setArticleTitle}},[c,b,f.addCost,f.displayScale]);return(0,d.jsx)(yg.Provider,{value:g,children:a})},yi=({initialHtml:a,onChange:b,keyPoints:c=[],brandExclusivePoints:f=[],checkedPoints:g=[],scrapedImages:h=[],visualStyle:i="",onTogglePoint:j,targetAudience:k="zh-TW",onAddCost:l,productBrief:m=null,displayScale:n,articleTitle:o,onTitleChange:p,outlineSections:q=[],onRemoveScrapedImage:r,toolbarExtras:s})=>{let t=(0,e.useContext)(yg),[u,v]=(0,e.useState)(a),[w,x]=(0,e.useState)(0),[y,z]=(0,e.useState)(0),[A,B]=(0,e.useState)(!1),[C,D]=(0,e.useState)(!1),[E,F]=(0,e.useState)(!1),[G,H]=(0,e.useState)(!1),J=n??t?.displayScale??1,K=(0,e.useRef)(null),L=(0,e.useRef)(null),M=(0,e.useRef)(!1),[N,O]=(0,e.useState)(!1),[P,Q]=(0,e.useState)({boldMarks:0,blockquotes:0,quoteChars:0}),[R,S]=(0,e.useState)([]),[T,U]=(0,e.useState)(new Set),[W,Y]=(0,e.useState)(null),[Z,$]=(0,e.useState)(!1),[_,aa]=(0,e.useState)(null);(0,e.useEffect)(()=>{v(a)},[a]);let ab=c.length?c:t?.keyPoints||[],ac=f.length?f:t?.brandExclusivePoints||[],ad=g.length?g:t?.checkedPoints||[],ae=h.length?h:t?.scrapedImages||[],af=k||t?.targetAudience||"zh-TW",ag=i||t?.visualStyle||"",ah=m||t?.productBrief||null,ai=q.length?q:t?.outlineSections||[],{recordHtml:aj,recordMeta:ak,consumeDraft:al}=(({storageKey:a="ai_writer_editor_autosave_v1",debounceMs:b=3e3})=>{(0,e.useRef)(null);let c=(0,e.useRef)(""),d=(0,e.useRef)({}),f=(0,e.useRef)(null);(0,e.useRef)(""),(0,e.useEffect)(()=>{},[a]);let g=(0,e.useCallback)(()=>{},[b,a]),h=(0,e.useCallback)(a=>{c.current=a||"",g()},[g]);return{recordHtml:h,recordMeta:(0,e.useCallback)(a=>{d.current={...d.current,...a},g()},[g]),consumeDraft:(0,e.useCallback)(()=>{let a=f.current;return f.current=null,a},[])}})({storageKey:"ai_writer_editor_autosave_v1"}),an=yf(a=>a.setCoveredPoints),{metaTitle:ao,metaDescription:ap,urlSlug:aq,setMetaTitle:ar,setMetaDescription:as,setUrlSlug:at,isMetaLoading:au,generateMeta:av}=(({editorRef:a,tiptapApi:b,targetAudience:c,context:d,onAddCost:f,onMetaGenerated:g})=>{let[h,i]=(0,e.useState)(""),[j,k]=(0,e.useState)(""),[l,m]=(0,e.useState)(""),[n,o]=(0,e.useState)(!1),p=(0,e.useCallback)(async()=>{o(!0);try{let e=(b?.getPlainText?b.getPlainText():a.current?.innerText||"").slice(0,1e3),l=[];if(d.keyPoints.length>0&&l.push(`Key Points: ${d.keyPoints.slice(0,6).join("; ")} `),d.brandExclusivePoints.length>0&&l.push(`Brand USPs: ${d.brandExclusivePoints.slice(0,4).join("; ")} `),(d.productBrief?.brandName||d.productBrief?.productName)&&l.push(`Brand: ${d.productBrief?.brandName||""} Product: ${d.productBrief?.productName||""} USP: ${d.productBrief?.usp||""} `),d.visualStyle&&l.push(`Visual Style: ${d.visualStyle} `),d.outlineSections&&d.outlineSections.length>0){let a=d.outlineSections.slice(0,8).join(" > ");l.push(`Outline: ${a} `)}let n=(({targetAudience:a,contextLines:b,articlePreview:c})=>`
    You are an SEO expert.Generate meta Title, Description, and URL slug for the article.

    <TargetAudience>
    ${a}
    </TargetAudience>
    DEFINITION: Region/Language target.
    ACTION: Optimize for this audience's search habits.

    <Context>
    ${b.join("\n")}
    </Context>
    DEFINITION: Article content highlights.
    ACTION: Base the meta tags on this content.

    <ArticlePreview>
    ${c}
    </ArticlePreview>
    DEFINITION: Snippet of the actual article.
    ACTION: Ensure accuracy to the written text.

    Output JSON:
    { "title": "...", "description": "...", "slug": "..." }
`)({targetAudience:c,contextLines:l,articlePreview:e}),o=await yc(n,c,{responseMimeType:"application/json",responseSchema:{type:V,properties:{title:{type:X},description:{type:X},slug:{type:X}}},generationConfig:{response_mime_type:"application/json"}}),p=JSON.parse(o.data||"{}"),q=p.title||h||"",r=p.description||j||"",s=p.slug||h.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")||"";i(q),k(r),m(s),g?.({title:q,description:r,slug:s}),f?.(o.cost,o.usage)}catch(a){console.error("Meta generation failed",a),alert("Failed to generate meta info. Please try again.")}finally{o(!1)}},[d.brandExclusivePoints,d.keyPoints,d.productBrief,d.visualStyle,d.outlineSections,a,f,g,c]);return{metaTitle:h,metaDescription:j,urlSlug:l,setMetaTitle:i,setMetaDescription:k,setUrlSlug:m,isMetaLoading:n,generateMeta:p}})({editorRef:K,tiptapApi:_,targetAudience:af,context:{keyPoints:ab,brandExclusivePoints:ac,productBrief:ah||void 0,visualStyle:ag,outlineSections:ai},onAddCost:l}),aw=(0,e.useCallback)(a=>{let b=(a.match(/[\u4e00-\u9fa5]/g)||[]).length,c=a.replace(/[\u4e00-\u9fa5]/g," ").trim().split(/\s+/).filter(Boolean);x(a.length),z(b+c.length)},[]),ax=(0,e.useCallback)(()=>{if(!_)return;Q(_.summarizeFormatting?_.summarizeFormatting():{boldMarks:0,blockquotes:0,quoteChars:0,blocks:[]});let a=_.listCleanupTargets?_.listCleanupTargets():[];S(a),U(new Set(a.map((a,b)=>`${a.from}-${a.to}-${b}`)))},[_]),ay=(0,e.useCallback)(()=>{_&&(ax(),O(!0))},[ax,_]),az=(0,e.useCallback)(()=>{if(!_)return;let a=R.map((a,b)=>({...a,id:`${a.from}-${a.to}-${b}`})).filter(a=>T.has(a.id)).sort((a,b)=>b.from-a.from);if(0===a.length)return void O(!1);a.forEach(a=>{_.clearBold?.({removeBold:!0,removeBlockquotes:!0,removeQuotes:!0,scope:{from:a.from,to:a.to}})});let c=_.getPlainText(),d=_.getHtml();v(d),b?.(d),t?.setContent?.(d),aw(c),aj(d),O(!1)},[R,t,b,aj,T,_,aw]),aA=(0,e.useCallback)(()=>{if(Z||!_)return;let a=(_.getPlainText?_.getPlainText():"")||"";if(!a.trim())return;let b=a.toLowerCase(),c=[...ac,...ab].filter(Boolean).filter(a=>b.includes(a.toLowerCase()));0!==c.length&&(an(a=>{let b=new Set(a);return c.forEach(a=>b.add(a)),Array.from(b)}),$(!0))},[ac,ab,Z,an,_]),aB=(0,e.useCallback)(async a=>{if(!_)return void alert("Editor not ready.");Y(a),H(!0);try{let c=_.getHtml(),d=await yd(c,a,af),{originalSnippet:e,newSnippet:f}=d.data||{};if(e&&f){let g=c;if(c.includes(e))g=c.replace(e,f);else{let b=`
                        <div style="border-left: 4px solid #8b5cf6; padding-left: 12px; margin: 16px 0; background: #f5f3ff; padding: 12px; border-radius: 4px;">
                            <p style="font-size: 10px; color: #8b5cf6; font-weight: bold; margin: 0 0 4px 0;">âœ¨ REFINED WITH: ${a}</p>
                            ${f}
                        </div>
                    `;g=c+b}_.setHtml(g);let h=_.getPlainText();v(g),b?.(g),t?.setContent?.(g),aw(h),aj(g),l&&l(d.cost,d.usage),(j||t?.onTogglePoint)?.(a)}else alert("AI ç„¡æ³•æ‰¾åˆ°é©åˆçš„æ®µè½æ’å…¥æ­¤é‡é»žã€‚")}catch(a){console.error("Refine failed",a),alert("Refinement failed.")}finally{Y(null),H(!1)}},[t,af,l,b,j,aj,_,aw]),{showImageModal:aC,setShowImageModal:aD,imagePrompt:aE,setImagePrompt:aF,isImageLoading:aG,isDownloadingImages:aH,imagePlans:aI,isPlanning:aJ,isBatchProcessing:aK,generateImageFromPrompt:aL,downloadImages:aM,openImageModal:aN,autoPlanImages:aO,updatePlanPrompt:aP,injectImageIntoEditor:aQ,generateSinglePlan:aR,handleBatchProcess:aS}=(({editorRef:a,tiptapApi:b,imageContainerRef:c,targetAudience:d,visualStyle:f,scrapedImages:g,onAddCost:h,handleInput:i,saveSelection:j,restoreSelection:k})=>{let[l,m]=(0,e.useState)(!1),[n,o]=(0,e.useState)(""),[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)(!1),[t,u]=(0,e.useState)([]),[v,w]=(0,e.useState)(!1),[x,y]=(0,e.useState)(!1),z=(0,e.useCallback)(async()=>{j(),m(!0),q(!0),o("Analyzing context...");let c="";if(b?.getPlainText)c=b.getPlainText().substring(0,200);else if(a.current){let b=a.current.innerText,d=window.getSelection();if(d&&d.rangeCount>0){let e=d.getRangeAt(0),f=e.cloneRange();f.selectNodeContents(a.current),f.setEnd(e.startContainer,e.startOffset);let g=f.toString().length,h=Math.max(0,g-100),i=Math.min(b.length,g+100);c=b.substring(h,i)}else c=b.substring(0,200)}try{let a=await x7(c,d,f||"");o(a.data),h?.(a.cost,a.usage)}catch(a){o("Create a realistic image relevant to this article.")}finally{q(!1)}},[a,h,j,d,f]),A=(0,e.useCallback)(async c=>{if(c){q(!0);try{let d=await x8(c);if(d.data){let e=`<img src="${d.data}" alt="${c}" style="max-width: 100%; height: auto; border-radius: 8px; margin: 20px 0;" /><br/>`;b?b.insertImage(d.data,c):(k(),document.execCommand("insertHTML",!1,e),a.current&&i({currentTarget:a.current})),h?.(d.cost,d.usage),m(!1)}else alert("Image generation returned no data.")}catch(a){console.error("Image generation error",a),alert("Failed to generate image.")}finally{q(!1)}}},[a,i,h,k]),B=(0,e.useCallback)(async()=>{let b=(c?.current||a.current||document.body).querySelectorAll("img");if(0===b.length)return void alert("No images found in the editor to download.");if(!confirm(`Found ${b.length} images in the article. Download them now?`))return;s(!0);let d=document.createElement("a");d.style.display="none",document.body.appendChild(d);try{for(let a=0;a<b.length;a++){let c=b[a].src,e=c.includes("image/jpeg")?"jpg":"png",f=`article-image-${Date.now()}-${a+1}.${e}`;if(c.startsWith("data:"))d.href=c,d.download=f,d.click();else try{let a=await fetch(c),b=await a.blob(),e=URL.createObjectURL(b);d.href=e,d.download=f,d.click(),URL.revokeObjectURL(e)}catch(a){console.warn(`Failed to download ${c}, opening in new tab instead.`),window.open(c,"_blank")}await new Promise(a=>setTimeout(a,200))}}catch(a){console.error("Download failed",a),alert("Some images could not be downloaded.")}finally{document.body.removeChild(d),s(!1)}},[a]),C=(0,e.useCallback)((a,b)=>{u(c=>c.map(c=>c.id===a?{...c,generatedPrompt:b}:c))},[]),D=(0,e.useCallback)((c,d="auto")=>{if(!c.url)return;let e=`<img src="${c.url}" alt="${c.generatedPrompt}" style="max-width: 100%; height: auto; border-radius: 8px; margin: 24px 0; display: block; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);" />`,f=c.insertAfter?.trim()||"",g=(a,b)=>{let c=c=>!!c&&!!a.includes(c)&&(b(a.replace(c,`${c}<br/>${e}`)),!0);if(c(f))return!0;for(let a of f.split(/[ï¼Œ,ã€‚.\n\t\sã€ï¼š:]+/).filter(a=>a.length>=4).sort((a,b)=>b.length-a.length))if(c(a))return!0;return!1};if(b){let a=()=>b.insertImage(c.url,c.generatedPrompt);return"cursor"!==d&&f&&b.getHtml&&b.setHtml?void(g(b.getHtml(),a=>b.setHtml(a))||a()):void a()}if(a.current){if("cursor"===d){k(),document.execCommand("insertHTML",!1,e),i({currentTarget:a.current});return}g(a.current.innerHTML,b=>{a.current.innerHTML=b,i({currentTarget:a.current})})||alert(`Could not find anchor: "...${f.substring(0,15)}...". 

Please place your cursor in the text and click the "Cursor" button to insert manually.`)}},[a,i,k,b]),E=(0,e.useCallback)(async a=>{if("generating"!==a.status){u(b=>b.map(b=>b.id===a.id?{...b,status:"generating"}:b));try{let b=await x8(a.generatedPrompt);if(b.data){let c={...a,status:"done",url:b.data||void 0};u(b=>b.map(b=>b.id===a.id?c:b)),h?.(b.cost,b.usage)}else u(b=>b.map(b=>b.id===a.id?{...b,status:"error"}:b))}catch(b){console.error("Single generation failed",b),u(b=>b.map(b=>b.id===a.id?{...b,status:"error"}:b))}}},[h]),F=(0,e.useCallback)(async()=>{if(x)return;y(!0);let a=t.filter(a=>"done"!==a.status).map(a=>E(a));await Promise.all(a),y(!1)},[E,t,x]),G=(0,e.useCallback)(async()=>{if(!v){w(!0);try{let c=b?.getPlainText?b.getPlainText():a.current?.innerText||"",e=await x9(c,g,d,f||"");u(e.data),h?.(e.cost,e.usage)}catch(a){console.error("Auto-plan failed",a),alert("Failed to plan images.")}finally{w(!1)}}},[a,h,g,d,f,v]);return{showImageModal:l,setShowImageModal:m,imagePrompt:n,setImagePrompt:o,isImageLoading:p,isDownloadingImages:r,imagePlans:t,isPlanning:v,isBatchProcessing:x,openImageModal:z,generateImageFromPrompt:A,downloadImages:B,autoPlanImages:G,updatePlanPrompt:C,injectImageIntoEditor:D,generateSinglePlan:E,handleBatchProcess:F}})({editorRef:K,tiptapApi:_,imageContainerRef:K,targetAudience:af,visualStyle:ag,scrapedImages:ae,onAddCost:l,handleInput:()=>{let a=_?.getPlainText?_.getPlainText():K.current?.innerText||"",c=_?.getHtml?_.getHtml():K.current?.innerHTML||"";b?.(c),t?.setContent?.(c),aw(a),aj(c)},saveSelection:()=>null,restoreSelection:()=>{}}),{runAskAiAction:aT,handleAskAiInsert:aU,clearAskAiState:aV,lockAskAiRange:aW,highlightAskAiTarget:aX}=(({tiptapApi:a,targetAudience:b,onAddCost:c,setIsAiLoading:d,updateCountsFromText:f,onChange:g})=>{let h=(0,e.useRef)({}),i=(0,e.useRef)(null),j=(0,e.useRef)(null),k=(0,e.useRef)(0),l=(0,e.useCallback)(()=>{j.current=null},[a]),m=(0,e.useCallback)((a,c)=>{let d=I(b);if("format"===a.mode){let b="";switch(a.preset){case"bullet":b="Convert to a bullet list.";break;case"ordered":b="Convert to an ordered (numbered) list.";break;case"table-2":b="Present as a 2-column table (Header + Row values).";break;case"table-3":b="Present as a 3-column table (Header + Row values).";break;case"checklist":b="Convert to a checklist with unchecked boxes.";break;case"quote":b="Wrap as a highlighted quote block.";break;case"markdown-clean":b="Clean up Markdown/HTML, fix nesting, and keep structure minimal.";break;default:b="Reformat cleanly."}return`TARGET CONTENT: """${c}"""
TASK: ${b} Return ONLY the formatted HTML/Markdown.

${d}`}let e=(()=>{switch(a.preset){case"rephrase":return"Rephrase for clarity while keeping meaning. Ensure the tone is natural and professional.";case"shorten":return"CRITICAL: Condense the text by 30-50%. Remove all fluff, redundancy, and filler words. Keep ONLY the core message.";case"elaborate":return"Expand with 1-2 concise sentences to add clarity.";case"formal":return"Rewrite in a more formal tone.";case"casual":return"Rewrite in a friendlier, more casual tone.";case"bulletise":return"Convert into concise bullet points.";case"summarise":return"Summarise into a brief paragraph or 2 bullets.";default:return a.prompt||"Improve the text with better flow."}})();return`TARGET TEXT: """${c}"""
INSTRUCTION: ${e}${a.prompt?`
CUSTOM PROMPT: ${a.prompt}`:""}

${d}

TASK: Return ONLY the rewritten result in HTML/Markdown.`},[b]),n=(0,e.useCallback)(b=>{if(!a)return null;let c=a.getSelectionRange?.()||null;return c&&(i.current=c,b&&(h.current[b]=c,a.markAskAiRange?.(c,b))),c},[a]);return{runAskAiAction:(0,e.useCallback)(async e=>{if(!a)throw alert("Editor not ready."),Error("Editor not ready");let f=(e.taskId?a.findAskAiRange?.(e.taskId):null)||(e.taskId?h.current[e.taskId]:null)||i.current||a.getSelectionRange?.()||null;j.current=e.mode,f&&(i.current=f,e.taskId&&(h.current[e.taskId]=f));let g=(e.selectedText||a.getSelectedText?.()||"").trim();if(!g)throw alert("è«‹å…ˆé¸å–è¦èª¿æ•´çš„æ–‡å­—ã€‚"),Error("No selection");f&&e.taskId&&a.markAskAiRange?.(f,e.taskId);let l=m(e,g);k.current+=1,d(!0);try{let a=await yc(l,b),d=l5.parse(a.data||"",{async:!1});return c?.(a.cost,a.usage),d}catch(a){throw console.error("AI Edit failed",a),alert("Failed to generate content. Please try again."),a}finally{k.current=Math.max(0,k.current-1),d(k.current>0)}},[m,c,d,b,a]),handleAskAiInsert:(0,e.useCallback)((b,c)=>{if(!a)return;let d=(c?a.findAskAiRange?.(c):null)||(c?h.current[c]:null)||i.current||a.getSelectionRange?.();j.current,d?a.replaceRange(d,b):a.insertHtml(b),c&&(delete h.current[c],a.clearAskAiMarks?.(c)),l(),f(a.getPlainText()),g?.(a.getHtml())},[l,g,a,f]),clearAskAiState:l,lockAskAiRange:n,highlightAskAiTarget:b=>{let c=a?.findAskAiRange?.(b);c&&a?.markAskAiRange?.(c,b)}}})({tiptapApi:_,targetAudience:af,onAddCost:l,setIsAiLoading:H,updateCountsFromText:a=>aw(a),onChange:a=>{v(a),b?.(a),t?.setContent?.(a),aj(a)}}),aY=(0,e.useMemo)(()=>Array.from(new Set(ad)).length,[ad]),aZ=ab.length+ac.length,a$=(0,e.useMemo)(()=>`${a}||${ab.join("||")}||${ac.join("||")}`,[a,ac,ab]);return(0,e.useEffect)(()=>{if(!_||M.current)return;let a=al();a&&a.html&&(v(a.html),_.setHtml(a.html),aw(_.getPlainText()),a.metaTitle&&ar(a.metaTitle),a.metaDescription&&as(a.metaDescription),a.urlSlug&&at(a.urlSlug),a.articleTitle&&(p?.(a.articleTitle),t?.setArticleTitle?.(a.articleTitle))),M.current=!0},[al,t,p,_,aw,ar,as,at]),(0,e.useEffect)(()=>{ak({metaTitle:ao,metaDescription:ap,urlSlug:aq,articleTitle:o||t?.articleTitle||""})},[o,t?.articleTitle,ap,ao,ak,aq]),(0,e.useEffect)(()=>{$(!1)},[a$]),(0,d.jsxs)("div",{className:"rte-container flex flex-col h-full w-full min-h-0 bg-white overflow-hidden relative",children:[(0,d.jsxs)("div",{className:"rte-header flex flex-col gap-3 px-4 py-3 border-b border-gray-200 bg-white",children:[(0,d.jsx)("div",{className:"mb-1",children:(0,d.jsx)("input",{value:o||t?.articleTitle||"",onChange:a=>{p?.(a.target.value),t?.setArticleTitle?.(a.target.value)},className:"w-full text-2xl font-bold text-gray-800 placeholder-gray-300 border-none focus:ring-0 focus:outline-none bg-transparent px-0 py-1",placeholder:"Article Title..."})}),(0,d.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-[240px] flex items-center gap-2 bg-gray-100 rounded-full px-4 py-1.5 border border-transparent focus-within:border-blue-300 focus-within:bg-white focus-within:ring-2 focus-within:ring-blue-100 transition-all",children:[(0,d.jsxs)("span",{className:"text-gray-400 flex items-center gap-1 select-none",children:[(0,d.jsx)("span",{className:"text-xs",children:"ðŸ”—"}),(0,d.jsx)("span",{className:"text-xs font-medium",children:"/"})]}),(0,d.jsx)("input",{value:aq,onChange:a=>at(a.target.value),className:"flex-1 bg-transparent border-none focus:outline-none text-xs font-mono text-gray-600 placeholder-gray-400",placeholder:"url-slug-goes-here"})]}),s&&(0,d.jsx)("div",{className:"flex items-center gap-2 ml-auto",children:s})]})]}),(0,d.jsx)("div",{className:"rte-toolbar-wrapper",children:(0,d.jsx)(xI,{onCommand:(a,b)=>{if(_)switch(a){case"bold":return _.toggleBold();case"italic":return _.toggleItalic();case"underline":return _.toggleUnderline?.();case"blockquote":return _.toggleBlockquote();case"insertUnorderedList":return _.toggleBulletList();case"insertOrderedList":return _.toggleOrderedList();case"alignLeft":return _.setTextAlign?.("left");case"alignCenter":return _.setTextAlign?.("center");case"alignRight":return _.setTextAlign?.("right");case"formatBlock":if("<h2>"===b)return _.toggleHeading(2);if("<h3>"===b)return _.toggleHeading(3);if("<blockquote>"===b)return _.toggleBlockquote();return _.toggleHeading(1);case"undo":return _.undo();case"redo":return _.redo();case"link":{let a=window.prompt("Enter URL");a&&_.setLink(a);return}case"unlink":return _.unsetLink();default:return}},onRemoveBold:ay,onOpenImageModal:aN,onDownloadAllImages:aM,isDownloadingImages:aH,onToggleKeyPoints:()=>{A||aA(),B(!A),D(!1)},showKeyPoints:A,hasKeyPoints:aZ>0,onToggleVisualAssets:()=>{D(!C),B(!1)},showVisualAssets:C,onRebrand:()=>{},isRebranding:!1,productName:ah?.productName,onToggleMetaPanel:()=>F(a=>!a),showMetaPanel:E,onUndo:()=>_?.undo(),onRedo:()=>_?.redo(),askAiBadgeSlotRef:L})}),(0,d.jsxs)("div",{className:"rte-workspace flex-1 flex flex-row min-h-0 overflow-hidden relative",children:[(0,d.jsxs)("div",{className:"rte-editor-column flex-1 flex flex-col min-h-0 relative group",children:[(0,d.jsx)("div",{className:"rte-scroll-area flex-1 min-h-0 overflow-y-auto",children:(0,d.jsx)("div",{className:"rte-content-wrapper px-6 pb-6 pt-8 min-h-full flex flex-col cursor-text",onClick:a=>{_&&_.focus()},children:(0,d.jsx)(xl,{initialHtml:u,onChange:(a,c)=>{v(a),b?.(a),t?.setContent?.(a),aw(c),aj(a)},onReady:a=>{aa(a),aw(a.getPlainText?a.getPlainText():""),aj(a.getHtml())},containerRef:K,className:"min-h-[420px]",placeholder:"",contentClassName:"prose-lg max-w-none px-0 pb-6 [&>*:first-child]:mt-0",contentStyle:(0,e.useMemo)(()=>({fontSize:`${100*J}%`,lineHeight:"1.6"}),[J])})})}),(0,d.jsx)(xZ,{onRunAction:aT,onInsert:(a,b)=>{aU(a,b)},onLockSelectionRange:a=>aW(a),onHighlightTask:a=>{aX(a)},badgeContainerRef:L}),N&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4",children:(0,d.jsxs)("div",{className:"w-full max-w-md bg-white rounded-xl shadow-2xl border border-gray-200 p-5 space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"æ¸…ç†ç²—é«”èˆ‡å¼•è™Ÿ"}),(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"å‹¾é¸éœ€è¦æ¸…ç†çš„æ®µè½ï¼Œæœƒç§»é™¤ç²—é«”ã€å¼•ç”¨å€å¡Šèˆ‡å¼•è™Ÿã€‚"})]}),(0,d.jsx)("button",{onClick:()=>O(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close cleanup modal",children:(0,d.jsx)(mc,{className:"w-4 h-4"})})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"text-xs text-gray-600 bg-gray-50 border border-gray-100 rounded-md p-3 leading-relaxed",children:["å‹¾é¸è¦æ¸…ç†çš„æ®µè½å³å¯ï¼Œç³»çµ±æœƒåŒæ™‚æ¸…é™¤ç²—é«”ã€å¼•ç”¨å€å¡Šèˆ‡å¼•è™Ÿå­—å…ƒã€‚æŽƒæçµæžœï¼šç²—é«” ",P.boldMarks,"ã€å¼•ç”¨ ",P.blockquotes,"ã€å¼•è™Ÿ ",P.quoteChars,"ã€‚"]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("div",{className:"text-xs font-semibold text-gray-700",children:"é¸æ“‡è¦æ¸…ç†çš„æ®µè½"}),(0,d.jsxs)("div",{className:"max-h-48 overflow-y-auto custom-scrollbar space-y-1",children:[R.map((a,b)=>{let c=`${a.from}-${a.to}-${b}`,e=T.has(c);return(0,d.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border border-gray-100 hover:border-gray-200 transition-colors",children:[(0,d.jsx)("input",{type:"checkbox",checked:e,onChange:a=>{U(b=>{let d=new Set(b);return a.target.checked?d.add(c):d.delete(c),d})},className:"mt-1 accent-blue-600"}),(0,d.jsxs)("div",{className:"flex-1 min-w-0 space-y-1",children:[(0,d.jsxs)("div",{className:"text-sm font-semibold text-gray-800 flex items-center gap-2",children:[(0,d.jsx)("span",{className:"px-2 py-0.5 text-[10px] rounded-full bg-gray-100 text-gray-600 border border-gray-200",children:a.type}),(0,d.jsxs)("span",{className:"text-xs text-gray-500",children:["ç²—é«” ",a.boldMarks," Â· å¼•ç”¨ ",a.blockquotes," Â· å¼•è™Ÿ ",a.quoteChars]})]}),(0,d.jsx)("div",{className:"text-xs text-gray-700 whitespace-pre-wrap break-words leading-relaxed",children:a.text||"ï¼ˆç©ºç™½æ®µè½ï¼‰"})]})]},c)}),0===R.length&&(0,d.jsx)("div",{className:"text-xs text-gray-400 p-2 bg-gray-50 border border-dashed border-gray-200 rounded",children:"æ²’æœ‰æ‰¾åˆ°åŒ…å«ç²—é«”æˆ–å¼•è™Ÿçš„æ®µè½ã€‚"})]})]})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,d.jsx)("button",{type:"button",onClick:ax,className:"text-blue-600 hover:text-blue-700 font-semibold",children:"é‡æ–°æŽƒæ"}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>O(!1),className:"px-3 py-2 rounded-md border border-gray-200 text-gray-700 hover:bg-gray-50 transition-colors",children:"å–æ¶ˆ"}),(0,d.jsx)("button",{type:"button",onClick:az,className:"px-3 py-2 rounded-md text-white font-semibold transition-colors bg-blue-600 hover:bg-blue-700",children:"å¥—ç”¨æ¸…ç†"})]})]})]})}),E&&(0,d.jsx)(xR,{metaTitle:ao,metaDescription:ap,urlSlug:aq,isMetaLoading:au,onGenerateMeta:av,onClose:()=>F(!1),onMetaTitleChange:ar,onMetaDescriptionChange:as,onUrlSlugChange:at}),(0,d.jsx)(xS,{show:aC,imagePrompt:aE,onPromptChange:aF,onSubmit:()=>aL(aE),isLoading:aG,onClose:()=>aD(!1)})]}),A&&(0,d.jsx)(xK,{brandExclusivePoints:ac,keyPoints:ab,checkedPoints:ad,refiningPoint:W,onTogglePoint:j||t?.onTogglePoint,onRefinePoint:aB,useTiptap:!0,isTiptapReady:!!_,uniqueCoveredCount:aY,totalPoints:aZ,targetAudience:af}),C&&(0,d.jsx)(xQ,{scrapedImages:ae,onToggleImage:r||t?.onRemoveScrapedImage||(()=>{}),imagePlans:aI,isPlanning:aJ,isBatchProcessing:aK,onBatchProcess:aS,onAutoPlan:aO,onGenerateSinglePlan:aR,onUpdatePlanPrompt:aP,onInjectImage:aQ,useTiptap:!0,isTiptapReady:!!_})]}),G&&(0,d.jsx)("div",{className:"pointer-events-none fixed bottom-4 right-4 z-40",children:(0,d.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/90 border border-gray-200 rounded-lg shadow-sm text-sm text-gray-700",children:[(0,d.jsx)(am,{className:"w-4 h-4 animate-spin text-blue-600"}),(0,d.jsx)("span",{children:"AI is working..."})]})}),(0,d.jsxs)("div",{className:"rte-footer px-4 py-2 bg-gray-50/95 backdrop-blur border-t border-gray-200 text-[10px] text-gray-500 font-mono flex items-center justify-end gap-4 select-none sticky bottom-0 z-10",children:[(0,d.jsxs)("span",{children:[y," words"]}),(0,d.jsxs)("span",{children:[w," chars"]})]})]})},yj=j("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),yk=({isOpen:a,content:b,step:c})=>{let f=(0,e.useRef)(null);if((0,e.useEffect)(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[b]),!a)return null;let g="refining_headings"===c;return(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:(0,d.jsxs)("div",{className:"bg-white w-full max-w-4xl h-[80vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden border border-gray-200 animate-in fade-in zoom-in-95 duration-300",children:[(0,d.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/80 flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${g?"bg-purple-100":"bg-blue-100"}`,children:g?(0,d.jsx)(ao,{className:"w-5 h-5 text-purple-600 animate-pulse"}):(0,d.jsx)(am,{className:"w-5 h-5 text-blue-600 animate-spin"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:(a=>{switch(a){case"writing_content":return"AI æ­£åœ¨æ’°å¯«æ–‡ç« ...";case"refining_headings":return"æ­£åœ¨å„ªåŒ–æ¨™é¡Œ (H2/H3 Swap)...";case"localizing_hk":return"æ­£åœ¨å¥—ç”¨é¦™æ¸¯å¸‚å ´ç”¨èªž...";case"finalizing":return"æ­£åœ¨å®Œæˆæœ€å¾Œä¿®é£¾...";default:return"AI æ­£åœ¨æ€è€ƒ..."}})(c)}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"è«‹ç¨å€™ï¼Œæ–‡ç« ç”Ÿæˆä¸­..."})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 text-xs font-medium text-gray-400",children:[(0,d.jsxs)("span",{className:`flex items-center gap-1 ${"writing_content"===c?"text-blue-600":"text-gray-600"}`,children:[(0,d.jsx)(aq,{className:"w-3 h-3"})," æ’°å¯«"]}),(0,d.jsx)("span",{className:"w-4 h-px bg-gray-300"}),(0,d.jsxs)("span",{className:`flex items-center gap-1 ${"refining_headings"===c?"text-purple-600":"finalizing"===c?"text-green-600":""}`,children:[(0,d.jsx)(ao,{className:"w-3 h-3"})," å„ªåŒ–"]}),(0,d.jsx)("span",{className:"w-4 h-px bg-gray-300"}),(0,d.jsxs)("span",{className:`flex items-center gap-1 ${"finalizing"===c?"text-green-600":""}`,children:[(0,d.jsx)(yj,{className:"w-3 h-3"})," å®Œæˆ"]})]})]}),(0,d.jsx)("div",{className:"flex-1 overflow-hidden relative bg-white",children:(0,d.jsx)("div",{ref:f,className:"absolute inset-0 overflow-y-auto p-8 custom-scrollbar scroll-smooth",children:(0,d.jsxs)("div",{className:"prose prose-lg max-w-none prose-headings:font-bold prose-h1:text-3xl prose-h2:text-2xl prose-p:text-gray-600 prose-p:leading-relaxed",children:[(0,d.jsx)("div",{dangerouslySetInnerHTML:{__html:l5.parse(b||"")}}),(0,d.jsx)("span",{className:"inline-block w-2 h-5 bg-blue-500 ml-1 animate-pulse align-middle"})]})})}),(0,d.jsx)("div",{className:"px-6 py-3 border-t border-gray-100 bg-gray-50 text-center text-xs text-gray-400",children:"AI ç”Ÿæˆå…§å®¹åƒ…ä¾›åƒè€ƒï¼Œè«‹å‹™å¿…äººå·¥å¯©é–±ã€‚"})]})})},yl=({onApply:a,onSkip:b})=>{let{pendingGroundingResult:c,showGroundingModal:f,setShowGroundingModal:g,toggleGroundingIssueSelection:h}=yf(),i=c?.issues||[],j=c?.regionLabel||"ç›®æ¨™åœ°å€",k=(0,e.useMemo)(()=>i.filter(a=>a.selected).length,[i]),l=()=>{b(),g(!1)};return f&&c&&0!==i.length?(0,d.jsxs)("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:l}),(0,d.jsxs)("div",{className:"relative bg-white w-full max-w-2xl max-h-[80vh] rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden",children:[(0,d.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-amber-50/80 to-white flex items-center justify-between gap-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-xl bg-amber-600 text-white flex items-center justify-center shadow-lg shadow-amber-200",children:(0,d.jsx)(ae,{className:"w-5 h-5"})}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsxs)("h3",{className:"text-lg font-bold text-gray-900 leading-tight",children:[j,"å¸‚å ´æœ¬åœ°åŒ–ç¢ºèª"]}),(0,d.jsxs)("p",{className:"text-xs text-gray-500",children:["åµæ¸¬åˆ° ",i.length," å€‹éž",j,"å¯¦é«”ï¼Œè«‹é¸æ“‡è¦æ›¿æ›çš„é …ç›®"]})]})]}),(0,d.jsx)("button",{onClick:l,className:"p-2 rounded-lg hover:bg-gray-100 text-gray-500","aria-label":"Close modal",children:(0,d.jsx)(mc,{className:"w-5 h-5"})})]}),(0,d.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,d.jsxs)("span",{className:"text-xs text-gray-500",children:["å·²é¸æ“‡ ",k," / ",i.length," é …"]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{onClick:()=>{i.forEach((a,b)=>{i[b].selected||h(b)})},className:"text-xs text-blue-600 hover:underline",children:"å…¨é¸"}),(0,d.jsx)("button",{onClick:()=>{i.forEach((a,b)=>{i[b].selected&&h(b)})},className:"text-xs text-gray-500 hover:underline",children:"å–æ¶ˆå…¨é¸"})]})]}),i.map((a,b)=>(0,d.jsx)("div",{className:`p-4 rounded-xl border transition-all cursor-pointer ${a.selected?"border-amber-200 bg-amber-50/60 shadow-sm":"border-gray-100 bg-white hover:border-gray-200"}`,onClick:()=>h(b),children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)("input",{type:"checkbox",checked:a.selected,onChange:()=>h(b),onClick:a=>a.stopPropagation(),className:"mt-1 h-4 w-4 rounded border-gray-300 text-amber-600 focus:ring-amber-500"}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,d.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-600 uppercase",children:a.type}),(0,d.jsxs)("span",{className:"text-xs text-gray-400",children:["ä¿¡å¿ƒåº¦: ",Math.round(100*a.confidence),"%"]})]}),(0,d.jsxs)("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-rose-700 line-through",children:a.original}),(0,d.jsx)(xO,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),(0,d.jsx)("span",{className:"text-sm font-semibold text-emerald-700",children:a.regionEquivalent})]}),a.context&&(0,d.jsx)("p",{className:"mt-1 text-xs text-gray-500 leading-relaxed",children:a.context})]})]})},b))]}),(0,d.jsxs)("div",{className:"px-6 py-4 border-t border-gray-100 bg-gray-50/70 flex items-center justify-between gap-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,d.jsx)(ab,{className:"w-4 h-4 text-amber-500"}),"æœªé¸æ“‡çš„é …ç›®å°‡ä¿ç•™åŽŸæ–‡"]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("button",{onClick:l,className:"px-4 py-2 text-sm font-semibold text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition",children:"è·³éŽ (ä¿ç•™åŽŸæ–‡)"}),(0,d.jsxs)("button",{onClick:()=>{a(i.filter(a=>a.selected).map(a=>({original:a.original,regionEquivalent:a.regionEquivalent}))),g(!1)},disabled:0===k,className:"px-4 py-2 text-sm font-semibold text-white bg-gradient-to-r from-amber-600 to-orange-600 rounded-lg shadow-sm hover:brightness-110 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,d.jsx)(yj,{className:"w-4 h-4"}),"å¥—ç”¨ ",k," é …æ›¿æ›"]})]})]})]})]}):null},ym=j("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),yn=new class{listeners=[];subscribe(a){return this.listeners.push(a),()=>{this.listeners=this.listeners.filter(b=>b!==a)}}log(a,b,c,d){let e={stage:a,msg:b,meta:c,duration:d},f=d?` (${d}ms)`:"",g=c?` ${JSON.stringify(c)}`:"";console.log(`[${a}] ${b}${f}${g}`),this.listeners.forEach(a=>a(e))}warn(a,b,c){console.warn(`[${a}] ${b}`,c),this.listeners.forEach(d=>d({stage:a,msg:`WARNING: ${b}`,meta:{error:c}}))}error(a,b,c){console.error(`[${a}] ${b}`,c),this.listeners.forEach(d=>d({stage:a,msg:`ERROR: ${b}`,meta:{error:c}}))}},yo=a=>(a||"").replace(/^#+\s*/,"").replace(/\*\*/g,"").replace(/["â€œâ€]/g,"").trim(),yp=a=>{let b=Array.isArray(a)?a.filter(a=>a&&(a.h3_before||a.h3_after||a.before||a.after)).map(a=>{let b=yo(a.h3_before||a.before||""),c=yo("string"==typeof a.h3_after?a.h3_after:a.after||b)||b,d="string"==typeof a.h3_reason?a.h3_reason:"string"==typeof a.reason?a.reason:"";return{h3_before:b,h3_after:c,...d?{h3_reason:d}:{}}}):[];return b.length?b:void 0},yq=a=>{if(!Array.isArray(a))return[];let b=new Set,c=[];return a.forEach(a=>{let d=yo("string"==typeof a?a:a?.text);if(!d)return;let e=d.toLowerCase();if(b.has(e))return;b.add(e);let f="string"==typeof a?.reason?a.reason.trim():"";c.push({text:d,...f?{reason:f}:{}})}),c},yr=async(a,b,c)=>{let d=Date.now(),e=I(c),f=(a,b)=>({inputTokens:(a.inputTokens||0)+(b.inputTokens||0),outputTokens:(a.outputTokens||0)+(b.outputTokens||0),totalTokens:(a.totalTokens||0)+(b.totalTokens||0)}),g=(a,b)=>({inputCost:(a.inputCost||0)+(b.inputCost||0),outputCost:(a.outputCost||0)+(b.outputCost||0),totalCost:(a.totalCost||0)+(b.totalCost||0)}),h=async b=>{let c;yn.log("refining_headings",`Refining ${b.length} headings...`);let f=(({articleTitle:a,headings:b,languageInstruction:c})=>`
    You are cleaning and unifying article section headings.

    <ArticleTitle>
    "${a}"
    </ArticleTitle>
    DEFINITION: The context of the article.
    ACTION: Ensure headings fit this topic.

    <OriginalHeadings>
    ${b.map((a,b)=>`${b+1}. ${a}`).join("\n")}
    </OriginalHeadings>
    DEFINITION: The current raw headings.
    ACTION: Refine these specific headings.

    <LanguageInstruction>
    ${c}
    </LanguageInstruction>
    DEFINITION: Target Language.
    ACTION: Write optimized headings in this language.

    STEP BY STEP:
    1) Clarify role: H2 = main section headline; H3 = supporting subpoint under its H2.
    2) Keep it natural, concise, and engaging.Preserve the original intent / angle.Use everyday, conversational wording(ç”Ÿæ´»åŒ–) instead of stiff or academic phrasing.
    3) Make the H2 clickable: concise(â‰¤ 60 chars).
    4) Rewrite H2 with ** 5 options in this exact order ** (all must differ from h2_before):
    - Option 1(ç¶“å…¸ç‰ˆ): Professional writer version - clear, informative.
    - Option 2(ç·¨è¼¯ç²¾é¸): Editor's pick - concise with strategic keywords.
    - Option 3(å¸ç›ç‰ˆ): Power words + emotional hooks(å¿…å­¸ã€ç§’æ‡‚ã€çˆ†æ¬¾ã€ç¥žç´š).
    - Option 4(ç—›é»žç‰ˆ): Pain - point / FOMO angle - address fears or desires.
    - Option 5(ç”Ÿæ´»åŒ–): Lifestyle / conversational - like friend's advice, slang allowed.
    - H2_after = your single best pick among those 5 options.
    5) ** CRITICAL **: h2_after text MUST demonstrate what h2_reason describes.Example:
    - If reason says "ä½¿ç”¨ç”Ÿæ´»åŒ–æƒ…å¢ƒã€Œä¸‹ç­å›žå®¶ã€", then h2_after MUST contain "ä¸‹ç­å›žå®¶".
    - If reason says "åŠ å…¥æµè¡Œèªžã€ŒUP UPã€", then h2_after MUST contain "UP UP".
    - Each option's text MUST match what its reason describes.
    6) Rewrite / support H3(if any exist or if you invent them):
    - Keep H3 ultra - compact: product / feature name or a 2 - 6 word keyword fragment.
    - Align with the chosen H2_after without repeating it.
    7) Validate: no duplicates, no vague fillers.Reject identical before / after.

      OUTPUT(JSON only):
    {
      "headings": [
        {
          "h2_before": "...",
          "h2_after": "...",
          "h2_reason": "why this angle/keywords",
          "h2_options": [
            { "text": "option 1", "reason": "reasoning" },
            { "text": "option 2", "reason": "reasoning" },
            { "text": "option 3", "reason": "reasoning" }
          ],
          "h3": [
            { "h3_before": "...", "h3_after": "...", "h3_reason": "supporting angle & search phrasing" }
          ]
        }
      ]
    }
    - Array length MUST equal the number of ORIGINAL HEADINGS and keep the same order.
        - Always include every field; set "h3": [] when none.
        - "h2_before" must exactly match the provided heading text.
        - If no H3s were provided, return "h3": [].
        - If a heading is already good, repeat it in "h2_after".
    `)({articleTitle:a,headings:b,languageInstruction:e}),g=await U.runJson(f,"FLASH",{type:V,properties:{headings:{type:W,items:{type:V,properties:{h2_before:{type:X},h2_after:{type:X},h2_reason:{type:X},h2_options:{type:W,items:{type:V,properties:{text:{type:X},reason:{type:X}},required:["text"]}},h3:{type:W,items:{type:V,properties:{h3_before:{type:X},h3_after:{type:X},h3_reason:{type:X}},required:["h3_after"]}}},required:["h2_before","h2_after","h2_options","h3"]}}},required:["headings"]}),h=Array.isArray(g.data?.headings)?g.data.headings:[],i=[],j=[];for(let a=0;a<b.length;a++){let c=b[a]||"",d=yo(c),e=h.find(a=>yo(a?.h2_before)===d||yo(a?.before)===d)||h[a]||{},f=yo(e?.h2_before||e?.before||c)||d,g=yq(e?.h2_options),k="string"==typeof e?.h2_after?e.h2_after:"string"==typeof e?.after?e.after:c,l=yp(Array.isArray(e?.h3)?e.h3:[]),m="string"==typeof e?.h2_reason?e.h2_reason:"string"==typeof e?.reason?e.reason:"",n=i.length;i.push(f);let o=g.map(a=>{let b=i.length;return i.push(a.text),b});j.push({before:d,h2Before:f,options:g,rawAfter:k,h3:l,h2Reason:m,baseIndex:n,optionIndices:o})}let k=[];if(i.length>0)try{yn.log("refining_headings",`Batch embedding ${i.length} texts...`),k=await k_(i)}catch(a){yn.warn("refining_headings","Batch embedding failed",a)}return{data:j.map(a=>{let{before:b,h2Before:c,options:d,rawAfter:e,h3:f,h2Reason:g,baseIndex:h,optionIndices:i}=a,{text:j,optionsWithScores:l,needsManual:m}=((a,b,c,d,e)=>{let f=yo(a),g=yo(c)||f;if(!b.length)return{text:g,optionsWithScores:[],needsManual:!0};let h=b.map((a,b)=>{let c=e[b],f=d&&c?k0(d,c):void 0;return{...a,score:f}}),i=h.filter(a=>a.text&&a.text.toLowerCase()!==f.toLowerCase()).reduce((a,b)=>(b.score??-1)>(a?.score??-1)?b:a,null);if(!i)return{text:g,optionsWithScores:h,needsManual:!0};let j=(i.score??0)>.995||i.text.toLowerCase()===f.toLowerCase();return{text:i.text||g,optionsWithScores:h,needsManual:j}})(c,d,e||b,k[h],i.map(a=>k[a]));return{before:b,after:j||c,h2_before:c,h2_after:j,...g?{h2_reason:g}:{},...l.length?{h2_options:l}:{},...f?{h3:f}:{},...m?{needs_manual:!0}:{}}}),usage:G(g.usage),cost:(c=g.cost,{inputCost:c?.inputCost||0,outputCost:c?.outputCost||0,totalCost:c?.totalCost||0}),duration:Date.now()-d}};if(b.length<=12)return{...await h(b),duration:Date.now()-d};let i=[],j={inputTokens:0,outputTokens:0,totalTokens:0},k={inputCost:0,outputCost:0,totalCost:0};for(let a=0;a<b.length;a+=12){let c=b.slice(a,a+12),d=await h(c);i=i.concat(d.data||[]),j=f(j,d.usage),k=g(k,d.cost)}return{data:i,usage:j,cost:k,duration:Date.now()-d}},ys=({isOpen:a,onClose:b,onApply:c})=>{let{content:f}=ye(),{targetAudience:g,articleTitle:h,headingOptimizations:i,setHeadingOptimizations:j}=yf(),[k,l]=(0,e.useState)(!1),[m,n]=(0,e.useState)({}),[o,p]=(0,e.useState)(0),q=async()=>{l(!0);let a=(a=>{let b=Array.from(new DOMParser().parseFromString(a,"text/html").querySelectorAll("h2")).map(a=>a.textContent?.trim()||"");if(0===b.length){let c=a.match(/^##\s+(.+)$/gm);c&&(b=c.map(a=>a.replace(/^##\s+/,"").trim()))}return b.filter(Boolean)})(f);if(0===a.length){alert("No H2 headings found in the content to optimize."),l(!1);return}try{let b=await yr(h||"Article",a,g);if(b.data){let c=b.data.map((b,c)=>({h2_before:a[c]||b.h2_before,h2_after:b.h2_after,h2_reason:b.h2_reason,h2_options:b.h2_options,h3:b.h3}));j(c);let d={};c.forEach((a,b)=>{d[b]=a.h2_after}),n(d)}}catch(a){console.error("Failed to optimize headings",a),alert("Failed to optimize headings. Please try again.")}finally{l(!1)}};return((0,e.useEffect)(()=>{if(a&&0===i.length&&!k);else if(a&&i.length>0){let a={};i.forEach((b,c)=>{a[c]=m[c]||b.h2_after}),n(a)}},[a]),a)?(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-[2px] p-4 animate-in fade-in duration-200",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 w-full max-w-4xl max-h-[85vh] rounded-xl shadow-2xl flex flex-col overflow-hidden border border-gray-200 dark:border-gray-700",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100 dark:border-gray-700 bg-gradient-to-r from-blue-50/50 to-purple-50/50 dark:from-gray-800 dark:to-gray-800",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-lg text-blue-600 dark:text-blue-400",children:(0,d.jsx)(ao,{className:"w-5 h-5"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:"Heading Optimizer"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"AI-powered refinement for high-impact H2s"})]})]}),(0,d.jsx)("button",{onClick:b,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:(0,d.jsx)(mc,{className:"w-5 h-5 text-gray-500"})})]}),(0,d.jsx)("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50/50 dark:bg-gray-900/50 custom-scrollbar",children:0!==i.length||k?k?(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center h-64",children:[(0,d.jsx)(am,{className:"w-8 h-8 text-blue-600 animate-spin mb-4"}),(0,d.jsx)("p",{className:"text-gray-600 font-medium",children:"Analyzing article structure..."}),(0,d.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Generating high-converting headline variations"})]}):(0,d.jsx)("div",{className:"space-y-4",children:i.map((a,b)=>{let c=o===b,e=m[b]!==a.h2_before;return(0,d.jsxs)("div",{className:`bg-white dark:bg-gray-800 rounded-lg border transition-all duration-200 ${c?"border-blue-300 shadow-md ring-1 ring-blue-100":"border-gray-200 hover:border-blue-200"}`,children:[(0,d.jsxs)("div",{className:"flex items-center gap-4 p-4 cursor-pointer",onClick:()=>p(c?null:b),children:[(0,d.jsx)("button",{className:"p-1 text-gray-400 hover:text-gray-600",children:c?(0,d.jsx)(ad,{className:"w-4 h-4"}):(0,d.jsx)(ym,{className:"w-4 h-4"})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-0.5",children:["Section ",b+1]}),(0,d.jsxs)("div",{className:"font-medium text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[m[b]||a.h2_before,e&&(0,d.jsx)("span",{className:"px-1.5 py-0.5 bg-green-100 text-green-700 text-[10px] rounded border border-green-200 font-bold",children:"UPDATED"})]})]}),!c&&e&&(0,d.jsxs)("div",{className:"text-xs text-gray-400 italic",children:["Original: ",a.h2_before]})]}),c&&(0,d.jsx)("div",{className:"border-t border-gray-100 dark:border-gray-700 p-4 bg-gray-50/50 dark:bg-gray-800/50",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,d.jsxs)("label",{className:`relative flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all ${m[b]===a.h2_before?"bg-white border-gray-400 ring-1 ring-gray-200":"bg-gray-50/50 border-transparent hover:bg-white hover:border-gray-200"}`,onClick:()=>n(c=>({...c,[b]:a.h2_before})),children:[(0,d.jsx)("div",{className:`mt-0.5 w-4 h-4 rounded-full border flex items-center justify-center ${m[b]===a.h2_before?"border-gray-600 bg-gray-600":"border-gray-300 bg-white"}`,children:m[b]===a.h2_before&&(0,d.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-white"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-semibold text-gray-700",children:"Original"}),(0,d.jsx)("div",{className:"text-sm text-gray-600 mt-0.5",children:a.h2_before})]})]}),a.h2_options?.map((a,c)=>(0,d.jsxs)("label",{className:`relative flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all ${m[b]===a.text?"bg-blue-50 border-blue-400 ring-1 ring-blue-200":"bg-white border-gray-200 hover:border-blue-300 shadow-sm"}`,onClick:()=>n(c=>({...c,[b]:a.text})),children:[(0,d.jsx)("div",{className:`mt-0.5 w-4 h-4 rounded-full border flex items-center justify-center ${m[b]===a.text?"border-blue-500 bg-blue-500":"border-gray-300 bg-white"}`,children:m[b]===a.text&&(0,d.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-white"})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("div",{className:"text-sm font-semibold text-gray-800",children:a.text}),a.score&&(0,d.jsxs)("span",{className:"text-[10px] font-bold text-blue-600 bg-blue-100 px-1.5 py-0.5 rounded px-1",children:["Score: ",a.score]})]}),a.reason&&(0,d.jsx)("div",{className:"text-xs text-gray-500 mt-1 leading-snug",children:a.reason})]})]},c))]})})]},b)})}):(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mb-4",children:(0,d.jsx)(xU,{className:"w-8 h-8 text-blue-500"})}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Ready to Optimize?"}),(0,d.jsx)("p",{className:"text-gray-500 max-w-sm mb-6",children:"We will analyze your article's structure and suggest 5 variations for each H2 heading (Professional, Emotional, Viral, etc.)."}),(0,d.jsxs)("button",{onClick:q,className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm shadow-blue-200 transition-all flex items-center gap-2",children:[(0,d.jsx)(ao,{className:"w-4 h-4"}),"Generate Suggestions"]})]})}),(0,d.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex items-center justify-between",children:[(0,d.jsx)("div",{className:"text-sm text-gray-500",children:i.length>0&&(0,d.jsxs)("button",{onClick:q,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-600 hover:text-blue-600 hover:bg-gray-100 rounded-md transition-colors",children:[(0,d.jsx)(xM,{className:"w-3.5 h-3.5"}),"Re-analyze"]})}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("button",{onClick:b,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,d.jsxs)("button",{onClick:()=>{let a=f;i.forEach((b,c)=>{let d=m[c];if(!d||d===b.h2_before)return;let e=b.h2_before.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),f=RegExp(`(<h2[^>]*>)\\s*${e}\\s*(<\\/h2>)`,"i");if(f.test(a)){a=a.replace(f,`$1${d}$2`);return}let g=RegExp(`(##\\s+)${e}(\\n|$)`,"i");if(g.test(a)){a=a.replace(g,`$1${d}$2`);return}}),c(a),b()},disabled:0===i.length,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white text-sm font-semibold rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[(0,d.jsx)(l7,{className:"w-4 h-4"}),"Apply Selected Headings"]})]})]})]})}):null},yt=({viewMode:a,onChangeView:b,onCopyHtml:c,onCopyMarkdown:e,onOptimizeHeadings:f,copied:g,variant:h="light"})=>{let i="dark"===h,j=i?"bg-blue-900/40 text-blue-100 border border-blue-500/40":"bg-blue-50 text-blue-700 border border-blue-200 shadow-sm",k=i?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-600 hover:bg-gray-50";return(0,d.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,d.jsxs)("div",{className:`flex items-center rounded-md overflow-hidden ${i?"border-gray-700 bg-gray-800 text-gray-200":"border-gray-200 bg-white text-gray-700"}`,children:[(0,d.jsxs)("button",{onClick:()=>b("visual"),className:`flex items-center gap-1 px-3 py-1.5 transition-colors ${"visual"===a?j:k}`,children:[(0,d.jsx)(ma,{className:"w-3.5 h-3.5"}),(0,d.jsx)("span",{className:"font-semibold",children:"Visual Editor"})]}),(0,d.jsxs)("button",{onClick:()=>b("code"),className:`flex items-center gap-1 px-3 py-1.5 transition-colors ${"code"===a?j:k}`,children:[(0,d.jsx)(l9,{className:"w-3.5 h-3.5"}),(0,d.jsx)("span",{className:"font-semibold",children:"HTML Source"})]})]}),(0,d.jsx)("button",{onClick:e,className:`flex items-center gap-1.5 px-3 py-1.5 font-medium rounded-md transition-colors ${i?"bg-amber-900/30 text-amber-200 border border-amber-800 hover:bg-amber-900/50":"bg-amber-50 text-amber-700 border border-amber-200 hover:bg-amber-100"}`,title:"Copy Markdown",children:(0,d.jsx)("span",{children:"Copy MD"})}),(0,d.jsx)("div",{className:"w-px h-5 bg-gray-200 dark:bg-gray-700 mx-1"}),(0,d.jsxs)("button",{onClick:f,className:`flex items-center gap-1.5 px-3 py-1.5 font-medium rounded-md transition-colors border ${i?"bg-indigo-900/20 text-indigo-300 border-indigo-800 hover:bg-indigo-900/40":"bg-indigo-50 text-indigo-700 border-indigo-200 hover:bg-indigo-100"}`,title:"Refine H2/H3 Headings with AI",children:[(0,d.jsx)(ao,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:"hidden sm:inline",children:"Opt. Headings"})]}),(0,d.jsxs)("button",{onClick:c,className:`flex items-center gap-1 px-3 py-1.5 font-semibold rounded-md transition-colors ${i?"bg-gray-800 border border-gray-700 text-gray-200 hover:bg-gray-700":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,title:"Copy HTML Source",children:[g?(0,d.jsx)(l7,{className:"w-4 h-4 text-green-500"}):(0,d.jsx)(l6,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:g?"text-green-600":"",children:g?"Copied":"HTML"})]})]})},yu=({content:a,status:b,error:c,generationStep:f,keyInformationPoints:g=[],brandExclusivePoints:h=[],coveredPoints:i=[],targetAudience:j="zh-TW",scrapedImages:k=[],visualStyle:l="",onTogglePoint:m,onRemoveScrapedImage:n,onAddCost:o,savedProfiles:p=[],onLoadProfile:q,onRequestUrlMode:r,productBrief:s,displayScale:t=1,articleTitle:u="",onTitleChange:v,outlineSections:w=[]})=>{let[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)("visual"),[B,C]=(0,e.useState)(""),[D,E]=(0,e.useState)(!1),{pendingGroundingResult:F,showGroundingModal:G,setPendingGroundingResult:H,setShowGroundingModal:I}=yf(),J=ye(),K="analyzing"===b,L=(0,e.useCallback)(a=>{if(0===a.length)return void H(null);let b=J.content;for(let c of a)if(c.original&&c.regionEquivalent){let a=RegExp(c.original.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");b=b.replace(a,c.regionEquivalent)}J.setContent(b),H(null),console.log(`[RegionGrounding] Applied ${a.length} replacements`)},[J,H]),M=(0,e.useCallback)(()=>{H(null),console.log("[RegionGrounding] User skipped all replacements")},[H]);(0,e.useEffect)(()=>{"analyzing"===b&&C("")},[b]),(0,e.useEffect)(()=>{"completed"===b&&a&&C(l5.parse(a,{async:!1}))},[b,a]);let N=()=>{navigator.clipboard.writeText(B||a),y(!0),setTimeout(()=>y(!1),2e3)},O=()=>{let a=B.replace(/<p[^>]*>/gi,"").replace(/<\/p>/gi,"\n\n").replace(/<br\s*\/?>/gi,"\n").replace(/<div[^>]*>/gi,"").replace(/<\/div>/gi,"\n").replace(/<hr[^>]*>/gi,"\n---\n").replace(/<h1[^>]*>(.*?)<\/h1>/gi,"# $1\n\n").replace(/<h2[^>]*>(.*?)<\/h2>/gi,"## $1\n\n").replace(/<h3[^>]*>(.*?)<\/h3>/gi,"### $1\n\n").replace(/<h4[^>]*>(.*?)<\/h4>/gi,"#### $1\n\n").replace(/<strong[^>]*>(.*?)<\/strong>/gi,"**$1**").replace(/<b[^>]*>(.*?)<\/b>/gi,"**$1**").replace(/<em[^>]*>(.*?)<\/em>/gi,"*$1*").replace(/<i[^>]*>(.*?)<\/i>/gi,"*$1*").replace(/<ul[^>]*>/gi,"").replace(/<\/ul>/gi,"\n").replace(/<ol[^>]*>/gi,"").replace(/<\/ol>/gi,"\n").replace(/<li[^>]*>(.*?)<\/li>/gi,"- $1\n").replace(/<img[^>]*src="([^"]*)"[^>]*alt="([^"]*)"[^>]*>/gi,"![$2]($1)").replace(/<img[^>]*src="([^"]*)"[^>]*>/gi,"![]($1)").replace(/<a[^>]*href="([^"]*)"[^>]*>(.*?)<\/a>/gi,"[$2]($1)").replace(/<blockquote[^>]*>/gi,"> ").replace(/<\/blockquote>/gi,"\n\n").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/\n\s*\n\s*\n/g,"\n\n").trim();navigator.clipboard.writeText(a),alert("Markdown copied to clipboard!")},P=(a="light")=>(0,d.jsx)(yt,{viewMode:z,onChangeView:A,onCopyHtml:N,onCopyMarkdown:O,onOptimizeHeadings:()=>E(!0),copied:x,variant:a});return"error"===b?(0,d.jsx)("div",{className:"flex-1 flex items-center justify-center p-10 bg-gray-50",children:(0,d.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 max-w-lg flex items-start space-x-4 text-red-700",children:[(0,d.jsx)(l8,{className:"w-6 h-6 flex-shrink-0"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-semibold text-lg",children:"Generation Failed"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c})]})]})}):(0,d.jsx)("div",{className:"flex flex-col h-full w-full",children:(0,d.jsxs)("div",{className:"flex-1 overflow-hidden bg-white relative w-full h-full min-h-0",children:[(0,d.jsx)("div",{className:"w-full h-full min-h-0 transition-opacity duration-300",children:"visual"===z?(0,d.jsx)(yh,{children:(0,d.jsx)(yi,{initialHtml:B,onChange:C,displayScale:t,articleTitle:u,onTitleChange:v,toolbarExtras:P("light")})}):(0,d.jsxs)("div",{className:"h-full w-full bg-gray-900 flex flex-col",children:[(0,d.jsxs)("div",{className:"bg-gray-800 text-gray-200 px-4 py-2 text-xs font-mono flex flex-wrap items-center justify-between gap-3 border-b border-gray-700",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(mb,{className:"w-3 h-3"}),(0,d.jsx)("span",{children:"source.html"}),(0,d.jsxs)("span",{className:"text-[11px] text-gray-400",children:[B.length," chars"]})]}),P("dark")]}),(0,d.jsx)("textarea",{className:"flex-1 w-full p-6 font-mono text-sm bg-gray-900 text-gray-100 focus:outline-none resize-none custom-scrollbar leading-relaxed",value:B,onChange:a=>C(a.target.value),spellCheck:!1,placeholder:"<!-- HTML content will appear here -->"})]})}),K&&(0,d.jsx)(()=>(0,d.jsx)("div",{className:"absolute inset-0 z-40 bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center",children:(0,d.jsxs)("div",{className:"flex flex-col items-center gap-4 animate-in fade-in zoom-in-95 duration-500",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"w-16 h-16 rounded-full border-4 border-blue-100 border-t-blue-500 animate-spin"}),(0,d.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,d.jsx)(ao,{className:"w-6 h-6 text-blue-500 animate-pulse"})})]}),(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h3",{className:"text-xl font-bold text-gray-800 tracking-tight",children:(a=>{switch(a){case"parsing_product":return"æ­£åœ¨è®€å–ç”¢å“è³‡è¨Š";case"nlp_analysis":return"æ­£åœ¨æ•´ç†é‡é»žå­—è©ž";case"extracting_structure":return"æ­£åœ¨æ­¸ç´æ®µè½æž¶æ§‹";case"analyzing_visuals":return"æ­£åœ¨åµæ¸¬åœ–ç‰‡é¢¨æ ¼";case"planning_keywords":return"æ­£åœ¨è¦åŠƒå¸¸ç”¨è©žèˆ‡ä¾‹å¥";case"mapping_product":return"æ­£åœ¨é…å°ç—›é»žèˆ‡è³£é»ž";case"localizing_hk":return"æ­£åœ¨å¥—ç”¨é¦™æ¸¯å¸‚å ´ç”¨èªž";default:return"AI æ­£åœ¨æº–å‚™"}})(f)}),(0,d.jsx)("p",{className:"text-sm text-gray-500 font-medium mt-1",children:"è«‹æŸ¥çœ‹å³å´é¢æ¿ä»¥ç²å–å³æ™‚åˆ†æžçµæžœ..."})]})]})}),{}),(0,d.jsx)(yl,{onApply:L,onSkip:M}),(0,d.jsx)(ys,{isOpen:D,onClose:()=>E(!1),onApply:a=>{C(a),J.setContent(a)}}),(0,d.jsx)(yk,{isOpen:"streaming"===b,content:a,step:f||"writing_content"})]})})},yv=j("brain-circuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]),yw=j("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),yx=j("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),yy=j("list-checks",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]]),yz=j("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),yA=j("chart-no-axes-column",[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]]),yB=j("file-search",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]]),yC=j("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]),yD=j("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),yE=j("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),yF=j("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),yG=({keywordPlans:a,referenceAnalysis:b,authorityAnalysis:c,productMapping:f=[],productBrief:g,headingOptimizations:h=[],targetAudience:i,languageInstruction:j,isLoading:k,status:m,onStop:o,brandKnowledge:p,setBrandKnowledge:q,displayScale:r=1,onSearchLocalAlternatives:s,isSearchingAlternatives:t=!1})=>{let u=yf(a=>a.visualStyle),[v,w]=(0,e.useState)("analysis"),[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)(!1),B=(0,e.useMemo)(()=>a.filter(a=>{let b=(a.word||"").trim();return!!b&&b.split(/\s+/).filter(Boolean).length<=3&&b.length<=15}),[a]),C={"zh-TW":"ç¹é«”ä¸­æ–‡ï¼ˆå°ç£ï¼‰","zh-HK":"ç¹é«”ä¸­æ–‡ï¼ˆé¦™æ¸¯ï¼‰","zh-MY":"ç°¡é«”ä¸­æ–‡ï¼ˆé¦¬ä¾†è¥¿äºžï¼‰"}[i]||i||"æœªè¨­å®š",D=async()=>{let a=(j||C||"").trim();if(a)try{await navigator.clipboard.writeText(a),A(!0),setTimeout(()=>A(!1),1200)}catch(a){console.warn("Copy failed",a)}},E=B.length>0||null!==b||null!==c||f.length>0,F=p&&p.trim().length>0,G=a=>{let b=a.target.files?.[0];if(!b)return;let c=new FileReader;c.onload=a=>{if(a.target?.result){let b=a.target.result;q(p?p+"\n\n"+b:b)}},c.readAsText(b)};return(0,d.jsxs)("div",{className:"flex flex-col h-full bg-slate-50/80 w-full border-l border-gray-200 font-sans",style:1!==r?{transform:`scale(${r})`,transformOrigin:"top left",width:`${100/r}%`,height:`${100/r}%`}:void 0,children:[(0,d.jsxs)("div",{className:"flex items-center px-2 pt-2 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm flex-shrink-0 z-10 justify-between gap-2",children:[(0,d.jsxs)("div",{className:"flex flex-1 items-center",children:[(0,d.jsxs)("button",{onClick:()=>w("analysis"),className:`flex-1 pb-2 pt-1 text-xs font-bold uppercase tracking-wider flex items-center justify-center gap-2 border-b-2 transition-colors ${"analysis"===v?"border-indigo-600 text-indigo-700":"border-transparent text-gray-400 hover:text-gray-600"}`,children:[(0,d.jsx)(yA,{className:"w-3.5 h-3.5"}),"Analysis"]}),(0,d.jsxs)("button",{onClick:()=>w("knowledge"),className:`flex-1 pb-2 pt-1 text-xs font-bold uppercase tracking-wider flex items-center justify-center gap-2 border-b-2 transition-colors relative ${"knowledge"===v?"border-indigo-600 text-indigo-700":"border-transparent text-gray-400 hover:text-gray-600"}`,children:[(0,d.jsx)(aj,{className:"w-3.5 h-3.5"}),"Knowledge",F&&(0,d.jsx)("span",{className:"absolute top-1 right-6 w-1.5 h-1.5 bg-green-500 rounded-full ring-2 ring-white"})]})]}),("analyzing"===m||"streaming"===m)&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-indigo-50 text-indigo-600 rounded-md border border-indigo-100",children:[(0,d.jsx)("div",{className:"w-2 h-2 rounded-full bg-indigo-600 animate-pulse"}),(0,d.jsx)("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Analyzing..."})]}),(0,d.jsxs)("button",{onClick:o,className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold text-red-600 bg-red-50 border border-red-100 rounded-lg hover:bg-red-100 transition-colors active:scale-95 whitespace-nowrap",title:"åœæ­¢åˆ†æž",children:[(0,d.jsx)(yD,{className:"w-3.5 h-3.5"}),(0,d.jsx)("span",{children:"åœæ­¢"})]})]})]}),"analysis"===v?(0,d.jsx)(()=>k&&!E?(0,d.jsxs)("div",{className:"flex flex-col h-full p-8 items-center justify-center bg-white/50 space-y-6",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"w-16 h-16 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin"}),(0,d.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,d.jsx)(yv,{className:"w-6 h-6 text-indigo-600 animate-pulse"})})]}),(0,d.jsxs)("div",{className:"text-center space-y-2",children:[(0,d.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Analyzing Content"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide font-medium",children:"Parallel Analysis: Structure & Voice Strategy..."})]})]}):E?(0,d.jsxs)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-indigo-100 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden",children:[(0,d.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between gap-3 bg-indigo-50",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(yE,{className:"w-4 h-4 text-indigo-600"}),(0,d.jsxs)("div",{className:"leading-tight",children:[(0,d.jsx)("span",{className:"block text-xs font-extrabold uppercase tracking-wider text-indigo-800",children:"èªžè¨€è¨­å®š"}),(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,d.jsx)("span",{className:"text-xs font-semibold text-indigo-700 bg-white/70 px-2 py-0.5 rounded-full border border-indigo-100",children:C}),(0,d.jsx)("span",{className:"text-xs text-indigo-500 font-semibold bg-indigo-100/60 px-2 py-0.5 rounded-full border border-indigo-200",children:i||"æœªè¨­å®š"})]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)("button",{onClick:D,className:"h-8 w-8 flex items-center justify-center rounded-md border border-indigo-100 bg-white text-indigo-600 hover:bg-indigo-50 active:scale-95 transition",title:"è¤‡è£½å®Œæ•´èªžè¨€æŒ‡ä»¤",children:z?(0,d.jsx)(l7,{className:"w-3.5 h-3.5"}):(0,d.jsx)(l6,{className:"w-3.5 h-3.5"})}),(0,d.jsx)("button",{onClick:()=>y(a=>!a),className:"h-8 px-3 text-xs font-semibold text-indigo-700 rounded-md border border-indigo-100 bg-white hover:bg-indigo-50 active:scale-95 transition",children:x?"æ”¶èµ·":"å…¨æ–‡"})]})]}),(0,d.jsx)("div",{className:`p-3 text-sm text-gray-700 leading-snug ${x?"whitespace-pre-line":""}`,children:((a,b)=>{let c=a.trim();if(!c)return"å°šæœªè¼‰å…¥èªžè¨€æŒ‡ä»¤ã€‚è«‹åœ¨è¨­å®šä¸­é¸æ“‡ç›®æ¨™å—çœ¾ã€‚";if(b)return c;let d=c.replace(/\s+/g," ").trim();return d.length>220?`${d.slice(0,220)}â€¦`:d})(j||"",x)})]}),g&&g.productName&&(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden group hover:shadow-md transition-all duration-300",children:[(0,d.jsxs)("div",{className:"px-4 py-2.5 border-b border-gray-50 bg-gradient-to-r from-emerald-50/80 to-white flex items-center gap-2",children:[(0,d.jsx)(an,{className:"w-3.5 h-3.5 text-emerald-600"}),(0,d.jsx)("h4",{className:"text-xs font-extrabold text-gray-700 uppercase tracking-wider",children:"Service & Product Strategy"})]}),(0,d.jsxs)("div",{className:"p-3 space-y-3",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-1.5 text-xs bg-emerald-50/50 p-3 rounded border border-emerald-100",children:[(0,d.jsx)("span",{className:"font-bold text-emerald-700",children:g.productName}),(0,d.jsx)("span",{className:"text-emerald-600/70 break-words leading-relaxed",children:g.usp})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h5",{className:"text-xs font-bold text-gray-400 uppercase",children:"Injection Map"}),0===f.length?(0,d.jsx)("p",{className:"text-xs text-gray-400 italic",children:"No specific mappings generated."}):f.map((a,c)=>{var e;let f=(e=a.relevanceKeywords,b?.structure?b.structure.filter(a=>e.some(b=>a.title.toLowerCase().includes(b.toLowerCase()))).map(a=>a.title):[]);return(0,d.jsxs)("div",{className:"bg-gray-50 rounded p-3 border border-gray-100 flex flex-col gap-2",children:[(0,d.jsxs)("div",{className:"flex items-start gap-2",children:[(0,d.jsx)("div",{className:"mt-0.5 w-1.5 h-1.5 rounded-full bg-red-400 flex-shrink-0",title:"Pain Point"}),(0,d.jsx)("span",{className:"text-xs text-gray-700 leading-relaxed break-words",children:a.painPoint})]}),(0,d.jsxs)("div",{className:"flex items-start gap-2 pl-3.5",children:[(0,d.jsx)(xO,{className:"w-3 h-3 text-gray-300 flex-shrink-0 mt-0.5"}),(0,d.jsx)("span",{className:"text-xs font-bold text-emerald-600 leading-relaxed break-words",children:a.productFeature})]}),f.length>0&&(0,d.jsx)("div",{className:"mt-1 pl-3.5 flex flex-wrap gap-1.5",children:f.map((a,b)=>(0,d.jsxs)("span",{className:"text-xs px-2 py-1 bg-blue-50 text-blue-600 rounded border border-blue-100 break-words",children:["ðŸ“ ",a]},b))})]},c)})]})]})]}),b&&(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden group hover:shadow-md transition-all duration-300",children:[(0,d.jsxs)("div",{className:"px-4 py-2.5 border-b border-gray-50 bg-gradient-to-r from-pink-50/80 to-white flex items-center gap-2",children:[(0,d.jsx)("div",{className:"w-3.5 h-3.5 text-pink-600 flex items-center justify-center",children:(0,d.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-full h-full",children:[(0,d.jsx)("circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}),(0,d.jsx)("circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}),(0,d.jsx)("circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}),(0,d.jsx)("circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}),(0,d.jsx)("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]})}),(0,d.jsx)("h4",{className:"text-xs font-extrabold text-gray-700 uppercase tracking-wider",children:"Visual Style"})]}),(0,d.jsx)("div",{className:"p-3",children:(0,d.jsxs)("p",{className:"text-sm text-gray-600 leading-relaxed italic",children:['"',u||"Clean, modern professional photography with natural lighting.",'"']})})]}),b&&(b.regionalReplacements&&b.regionalReplacements.length>0||b.replacementRules&&b.replacementRules.length>0)&&(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden group hover:shadow-md transition-all duration-300",children:[(0,d.jsxs)("div",{className:"px-4 py-2.5 border-b border-gray-50 bg-gradient-to-r from-amber-50/80 to-white flex items-center gap-2",children:[(0,d.jsx)(yx,{className:"w-3.5 h-3.5 text-amber-600"}),(0,d.jsx)("h4",{className:"text-xs font-extrabold text-gray-700 uppercase tracking-wider",children:"Localization & Safety"})]}),(0,d.jsxs)("div",{className:"p-3 space-y-3",children:[b.regionalReplacements&&b.regionalReplacements.length>0&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("h5",{className:"text-xs font-bold text-gray-400 uppercase flex items-center gap-1",children:["Regional Corrections",(0,d.jsx)("span",{className:"bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded-full text-[10px]",children:b.regionalReplacements.length})]})}),(0,d.jsx)("ul",{className:"grid grid-cols-1 gap-2 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:b.regionalReplacements.map((a,b)=>(0,d.jsxs)("li",{className:`rounded p-2 border flex flex-col gap-1 ${a.replacement?"bg-amber-50/50 border-amber-100":"bg-red-50/50 border-red-100"}`,children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-xs font-medium text-gray-800 flex-wrap",children:[(0,d.jsx)("span",{className:"text-red-500 line-through decoration-red-500/50",children:a.original}),(0,d.jsx)("span",{className:"text-gray-400",children:"â†’"}),a.replacement?(0,d.jsx)("span",{className:"text-emerald-600 font-bold",children:a.replacement}):(0,d.jsx)("span",{className:"text-red-500 font-bold italic",children:"(åˆªé™¤)"})]}),a.reason&&(0,d.jsx)("span",{className:"text-[10px] text-gray-500 leading-snug",children:a.reason})]},b))})]}),(b.competitorBrands&&b.competitorBrands.length>0||b.competitorProducts&&b.competitorProducts.length>0)&&(0,d.jsxs)("div",{className:`space-y-2 ${b.regionalReplacements?.length?"pt-2 border-t border-gray-100":""}`,children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("h5",{className:"text-xs font-bold text-gray-400 uppercase flex items-center gap-1",children:["Blocked Terms",(0,d.jsx)("span",{className:"bg-red-100 text-red-700 px-1.5 py-0.5 rounded-full text-[10px]",children:(b.competitorBrands?.length||0)+(b.competitorProducts?.length||0)})]})}),(b.competitorBrands?.length||0)+(b.competitorProducts?.length||0)>=3&&(0,d.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2.5 space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-start gap-2",children:[(0,d.jsx)("span",{className:"text-blue-600 text-sm",children:"ðŸ’¡"}),(0,d.jsxs)("p",{className:"text-xs text-blue-700 leading-relaxed",children:["åµæ¸¬åˆ° ",(0,d.jsx)("strong",{children:(b.competitorBrands?.length||0)+(b.competitorProducts?.length||0)})," å€‹å“ç‰Œ/ç”¢å“éœ€è¦æœ¬åœ°æ›¿æ›"]})]}),(0,d.jsxs)("button",{className:"w-full px-3 py-1.5 bg-blue-600 text-white text-xs font-semibold rounded-md hover:bg-blue-700 active:scale-[0.98] transition-all flex items-center justify-center gap-1.5 disabled:opacity-50 disabled:cursor-not-allowed",onClick:s,disabled:t||!s,children:[t?(0,d.jsx)(am,{className:"w-3.5 h-3.5 animate-spin"}):(0,d.jsx)(yF,{className:"w-3.5 h-3.5"}),"æœå°‹æœ¬åœ°æ›¿ä»£å“ç‰Œ"]})]}),(0,d.jsxs)("ul",{className:"space-y-1.5",children:[b.competitorBrands?.map((a,b)=>(0,d.jsxs)("li",{className:"text-xs text-gray-600 flex items-center justify-between gap-2 bg-gray-50 rounded px-2 py-1.5 border border-gray-100",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"text-red-400 font-bold",children:"[-]"}),(0,d.jsx)("span",{className:"break-words font-medium",children:a})]}),(0,d.jsx)("span",{className:"px-1.5 py-0.5 bg-purple-100 text-purple-700 text-[10px] font-semibold rounded-full",children:"å“ç‰Œ"})]},`brand-${b}`)),b.competitorProducts?.map((a,b)=>(0,d.jsxs)("li",{className:"text-xs text-gray-600 flex items-center justify-between gap-2 bg-gray-50 rounded px-2 py-1.5 border border-gray-100",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"text-red-400 font-bold",children:"[-]"}),(0,d.jsx)("span",{className:"break-words font-medium",children:a})]}),(0,d.jsx)("span",{className:"px-1.5 py-0.5 bg-amber-100 text-amber-700 text-[10px] font-semibold rounded-full",children:"ç”¢å“"})]},`product-${b}`))]})]})]})]}),b&&(b.generalPlan.length>0||b.humanWritingVoice)&&(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden group hover:shadow-md transition-all duration-300",children:[(0,d.jsxs)("div",{className:"px-4 py-2.5 border-b border-gray-50 bg-gradient-to-r from-purple-50/80 to-white flex items-center gap-2",children:[(0,d.jsx)(yw,{className:"w-3.5 h-3.5 text-purple-600"}),(0,d.jsx)("h4",{className:"text-xs font-extrabold text-gray-700 uppercase tracking-wider",children:"Voice Strategy"})]}),(0,d.jsxs)("div",{className:"p-3",children:[(0,d.jsx)("div",{className:"space-y-2",children:b.generalPlan.map((a,b)=>(0,d.jsxs)("div",{className:"flex gap-2.5 items-start",children:[(0,d.jsx)("div",{className:"w-1 h-1 mt-2 rounded-full bg-purple-400 flex-shrink-0"}),(0,d.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:a})]},b))}),(0,d.jsxs)("div",{className:"mt-3 pt-3 border-t border-purple-50 space-y-2",children:[b.regionVoiceDetect&&"Match"!==b.regionVoiceDetect&&(0,d.jsxs)("div",{className:"bg-rose-50 border border-rose-100 rounded-md p-2 flex gap-2 items-start",children:[(0,d.jsx)("div",{className:"mt-0.5 text-rose-500",children:"âš ï¸"}),(0,d.jsxs)("div",{className:"space-y-0.5",children:[(0,d.jsx)("p",{className:"text-xs font-bold text-rose-700 uppercase",children:"Region Voice %"}),(0,d.jsx)("p",{className:"text-xs text-rose-600 leading-relaxed",children:b.regionVoiceDetect})]})]}),b.humanWritingVoice&&(0,d.jsxs)("div",{className:"flex gap-2 items-start bg-purple-50/50 p-2 rounded-md border border-purple-50",children:[(0,d.jsx)("div",{className:"mt-0.5 text-xs",children:"ðŸ—£ï¸"}),(0,d.jsxs)("div",{className:"space-y-0.5",children:[(0,d.jsx)("p",{className:"text-xs font-bold text-purple-700 uppercase",children:"Human Writing Voice"}),(0,d.jsxs)("p",{className:"text-xs text-purple-600 leading-relaxed italic",children:['"',b.humanWritingVoice,'"']})]})]})]})]})]}),c&&c.relevantTerms.length>0&&(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden group hover:shadow-md transition-all duration-300",children:[(0,d.jsxs)("div",{className:"px-4 py-2.5 border-b border-gray-50 bg-gradient-to-r from-teal-50/80 to-white flex items-center gap-2",children:[(0,d.jsx)(yx,{className:"w-3.5 h-3.5 text-teal-600"}),(0,d.jsx)("h4",{className:"text-sm font-extrabold text-gray-700 uppercase tracking-wider",children:"Core Topic"})]}),(0,d.jsxs)("div",{className:"p-4 space-y-3",children:[(0,d.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[c.relevantTerms.slice(0,8).map((a,b)=>(0,d.jsx)("span",{className:"px-2 py-1 bg-teal-50 text-teal-700 border border-teal-100 rounded text-sm font-semibold",children:a},b)),c.relevantTerms.length>8&&(0,d.jsxs)("span",{className:"px-2 py-1 text-gray-400 text-sm font-medium bg-gray-50 rounded border border-gray-100",children:["+",c.relevantTerms.length-8," more"]})]}),(0,d.jsxs)("div",{className:"bg-gray-50 rounded-lg p-2.5 border border-gray-100",children:[(0,d.jsxs)("h5",{className:"text-sm font-bold text-gray-400 mb-2 uppercase flex items-center gap-1",children:[(0,d.jsx)(l,{className:"w-3 h-3 text-amber-400"})," Integration Plan"]}),(0,d.jsx)("ul",{className:"space-y-1.5",children:(c.combinations||[]).map((a,b)=>(0,d.jsxs)("li",{className:"text-sm text-gray-600 flex items-start gap-1.5 leading-snug",children:[(0,d.jsx)("span",{className:"text-teal-400 mt-0.5",children:"â€¢"}),(0,d.jsx)("span",{children:a})]},b))})]})]})]}),b&&b.structure.length>0&&(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden group hover:shadow-md transition-all duration-300",children:[(0,d.jsxs)("div",{className:"px-4 py-2.5 border-b border-gray-50 bg-gradient-to-r from-blue-50/80 to-white flex items-center gap-2",children:[(0,d.jsx)(n,{className:"w-3.5 h-3.5 text-blue-600"}),(0,d.jsx)("h4",{className:"text-xs font-extrabold text-gray-700 uppercase tracking-wider",children:"Narrative Structure (Outline)"})]}),(0,d.jsxs)("div",{className:"relative py-2 max-h-96 overflow-y-auto custom-scrollbar",children:[(0,d.jsx)("div",{className:"absolute left-5 top-4 bottom-4 w-px bg-gray-100"}),(0,d.jsx)("div",{className:"relative z-10",children:b.structure.map((a,b)=>{var c;let e,f,g=a.writingMode||("easy"===a.difficulty?"direct":"multi_solutions"),h=a.solutionAngles?.filter(Boolean).slice(0,2)||[];return(0,d.jsxs)("div",{className:"px-4 py-3 pl-10 relative hover:bg-blue-50/30 transition-colors group/item",children:[(0,d.jsx)("div",{className:"absolute left-3 top-3.5 w-4 h-4 rounded-full border-2 border-white bg-blue-50 text-blue-600 flex items-center justify-center shadow-sm text-xs font-bold z-10 group-hover/item:bg-blue-600 group-hover/item:text-white transition-all",children:b+1}),(0,d.jsxs)("div",{className:"flex items-start justify-between gap-3 pr-1",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h5",{className:"text-sm font-bold text-gray-800 mb-1 leading-normal break-words",children:a.title}),a.coreQuestion&&(0,d.jsxs)("p",{className:"text-xs text-gray-500 leading-relaxed break-words",children:["Q: ",a.coreQuestion]})]}),(c=a.difficulty,f=(e={easy:{label:"Easy",bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-100"},medium:{label:"Medium",bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-100"},unclear:{label:"Unclear",bg:"bg-rose-50",text:"text-rose-700",border:"border-rose-100"}})[c||"easy"]||e.easy,(0,d.jsx)("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full border ${f.bg} ${f.text} ${f.border}`,children:f.label}))]}),a.narrativePlan&&a.narrativePlan.length>0&&(0,d.jsxs)("div",{className:"mt-1.5 space-y-1",children:[a.narrativePlan.slice(0,3).map((a,b)=>(0,d.jsx)("p",{className:"text-xs text-gray-400 leading-relaxed break-words",children:a},b)),a.narrativePlan.length>3&&(0,d.jsxs)("p",{className:"text-[10px] text-gray-300",children:["+",a.narrativePlan.length-3," more"]})]}),(0,d.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[a.isChecklist&&(0,d.jsx)("span",{className:"text-[10px] px-2 py-1 rounded-full bg-emerald-50 text-emerald-700 border border-emerald-100",children:"Checklist"}),a.uspNotes&&a.uspNotes.slice(0,2).map((a,b)=>(0,d.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded-full bg-purple-50 text-purple-700 border border-purple-100 break-words",children:["USP: ",a]},`usp-${b}`)),a.augment&&a.augment.slice(0,2).map((a,b)=>(0,d.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded-full bg-amber-50 text-amber-700 border border-amber-100 break-words",children:["+ ",a]},`aug-${b}`)),a.suppress&&a.suppress.slice(0,2).map((a,b)=>(0,d.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded-full bg-rose-50 text-rose-700 border border-rose-100 break-words",children:["- ",a]},`sup-${b}`))]}),Array.isArray(a.subheadings)&&a.subheadings.length>0&&(0,d.jsx)("div",{className:"mt-2 pl-6 border-l border-blue-100 space-y-1",children:a.subheadings.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-start gap-1.5 text-xs text-gray-600 leading-snug break-words",children:[(0,d.jsx)("span",{className:"text-blue-400 mt-0.5",children:"â†³"}),(0,d.jsx)("span",{className:"font-medium",children:a})]},b))}),"multi_solutions"===g&&h.length>0&&(0,d.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:h.map((a,b)=>(0,d.jsx)("span",{className:"text-xs px-2 py-1 rounded-full border border-blue-100 bg-blue-50 text-blue-700 break-words",children:a},b))}),a.uspNotes&&a.uspNotes.length>0&&(0,d.jsx)("div",{className:"mt-2 pl-6 border-l border-purple-100 space-y-1",children:a.uspNotes.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-start gap-1.5 text-[11px] text-purple-700 leading-snug break-words",children:[(0,d.jsx)("span",{className:"text-purple-300 mt-0.5",children:"â˜…"}),(0,d.jsx)("span",{children:a})]},`usp-list-${b}`))}),a.keyFacts&&a.keyFacts.length>0&&(0,d.jsx)("div",{className:"mt-2 pl-6 border-l border-gray-100 space-y-1",children:a.keyFacts.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-start gap-1.5 text-[11px] text-gray-700 leading-snug break-words",children:[(0,d.jsx)("span",{className:"text-gray-400 mt-0.5",children:"â€¢"}),(0,d.jsx)("span",{children:a})]},b))}),a.sentenceStartFeatures&&a.sentenceStartFeatures.length>0&&(0,d.jsxs)("div",{className:"mt-2 pl-6 border-l border-indigo-100 space-y-1",children:[(0,d.jsx)("div",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-tight mb-0.5",children:"Sentence Starts"}),a.sentenceStartFeatures.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-start gap-1.5 text-[11px] text-indigo-600 leading-snug break-words",children:[(0,d.jsx)("span",{className:"text-indigo-300 mt-0.5",children:"â–·"}),(0,d.jsx)("span",{children:a})]},`start-${b}`))]}),a.sentenceEndFeatures&&a.sentenceEndFeatures.length>0&&(0,d.jsxs)("div",{className:"mt-2 pl-6 border-l border-rose-100 space-y-1",children:[(0,d.jsx)("div",{className:"text-[10px] font-bold text-rose-400 uppercase tracking-tight mb-0.5",children:"Sentence Ends"}),a.sentenceEndFeatures.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-start gap-1.5 text-[11px] text-rose-600 leading-snug break-words",children:[(0,d.jsx)("span",{className:"text-rose-300 mt-0.5",children:"â—"}),(0,d.jsx)("span",{children:a})]},`end-${b}`))]})]},b)})})]})]}),B.length>0&&(0,d.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-[0_2px_4px_rgba(0,0,0,0.02)] overflow-hidden group hover:shadow-md transition-all duration-300",children:[(0,d.jsxs)("div",{className:"px-4 py-2.5 border-b border-gray-50 bg-gradient-to-r from-indigo-50/80 to-white flex items-center gap-2",children:[(0,d.jsx)(yy,{className:"w-3.5 h-3.5 text-indigo-600"}),(0,d.jsx)("h4",{className:"text-xs font-extrabold text-gray-700 uppercase tracking-wider",children:"Semantic Keywords"})]}),(0,d.jsx)("div",{className:"p-3 space-y-3",children:B.map((a,c)=>(0,d.jsxs)("div",{className:"bg-gray-50/50 rounded-lg p-2.5 border border-gray-100",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-1.5 gap-2 flex-wrap",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,d.jsx)(yz,{className:"w-3 h-3 text-indigo-300"}),(0,d.jsx)("span",{className:"text-sm font-bold text-gray-800",children:a.word})]}),(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[a.isSentenceStart&&(0,d.jsx)("span",{className:"px-1.5 py-0.5 rounded-full bg-indigo-100 text-indigo-700 border border-indigo-200 text-[9px] font-bold",children:"START"}),a.isSentenceEnd&&(0,d.jsx)("span",{className:"px-1.5 py-0.5 rounded-full bg-rose-100 text-rose-700 border border-rose-200 text-[9px] font-bold",children:"END"}),a.isPrefix&&(0,d.jsx)("span",{className:"px-1.5 py-0.5 rounded-full bg-amber-100 text-amber-700 border border-amber-200 text-[9px] font-bold",children:"PRE"}),a.isSuffix&&(0,d.jsx)("span",{className:"px-1.5 py-0.5 rounded-full bg-teal-100 text-teal-700 border border-teal-200 text-[9px] font-bold",children:"SUF"}),((a,c=[])=>{let d=(a||"").trim().toLowerCase();if(!d)return[{label:"Unknown",variant:"unknown"}];let e=b?.structure||[],f=0;e.forEach(a=>{(a.title||"").toLowerCase().includes(d)&&f++,(a.subheadings||[]).forEach(a=>{(a||"").toLowerCase().includes(d)&&f++})});let g=c.length,h=[];return f>0&&h.push({label:f>=g?"Heading-heavy":"Heading",variant:"heading"}),g>0&&h.push({label:g>f?"Body-heavy":"Body",variant:"body"}),0===h.length&&h.push({label:"Unknown",variant:"unknown"}),h.slice(0,2)})(a.word,a.snippets).map((a,b)=>{let c="heading"===a.variant?"bg-blue-50 text-blue-700 border-blue-100":"body"===a.variant?"bg-slate-50 text-slate-700 border-slate-200":"bg-gray-50 text-gray-500 border-gray-200";return(0,d.jsx)("span",{className:`px-2 py-0.5 rounded-full border text-[10px] font-semibold flex items-center gap-1 ${c}`,children:a.label},b)})]})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[a.plan.map((a,b)=>(0,d.jsxs)("div",{className:"text-xs text-gray-600 flex items-start gap-1.5",children:[(0,d.jsx)("span",{className:"text-indigo-300 mt-px",children:"â€¢"}),(0,d.jsx)("span",{className:"leading-snug opacity-90",children:a})]},b)),a.exampleSentence&&(0,d.jsxs)("div",{className:"mt-2 text-xs text-gray-500 italic border-l-2 border-indigo-100 pl-2",children:['"',a.exampleSentence,'"']})]})]},c))})]})]}):(0,d.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center opacity-60",children:[(0,d.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-2xl flex items-center justify-center mb-6 rotate-3",children:(0,d.jsx)(yB,{className:"w-8 h-8 text-gray-400"})}),(0,d.jsx)("h4",{className:"text-base font-bold text-gray-700 mb-2",children:"No Data Available"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 max-w-[200px] leading-relaxed",children:"Start a generation to see NLP insights, structural breakdown, and authority signals here."})]}),{}):(0,d.jsx)(()=>(0,d.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 bg-slate-50/50",children:[(0,d.jsxs)("div",{className:"p-4 bg-white border-b border-gray-200 space-y-3",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Upload or paste Brand Guidelines, Product Specs, or Whitepapers here."})}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)("label",{className:"flex-1 cursor-pointer",children:[(0,d.jsx)("input",{type:"file",className:"hidden",accept:".txt,.md,.json",onChange:G}),(0,d.jsxs)("div",{className:"px-3 py-2 bg-indigo-50 border border-indigo-100 rounded-lg text-indigo-700 text-xs font-bold hover:bg-indigo-100 transition-colors flex items-center justify-center gap-2",children:[(0,d.jsx)(yC,{className:"w-3.5 h-3.5"}),"Load File"]})]}),(0,d.jsx)("button",{onClick:()=>q(""),className:"px-3 py-2 bg-white border border-gray-200 rounded-lg text-gray-500 hover:text-red-500 hover:bg-red-50 hover:border-red-100 transition-colors",title:"Clear Knowledge Base",children:(0,d.jsx)(mc,{className:"w-3.5 h-3.5"})})]})]}),(0,d.jsxs)("div",{className:"flex-1 p-0 relative group",children:[(0,d.jsx)("textarea",{value:p,onChange:a=>q(a.target.value),placeholder:"Paste heavy documentation here...",className:"w-full h-full p-4 bg-gray-50 resize-none outline-none text-xs font-mono text-gray-600 leading-relaxed focus:bg-white transition-colors custom-scrollbar"}),!p&&(0,d.jsxs)("div",{className:"absolute inset-0 pointer-events-none flex flex-col items-center justify-center text-gray-300 p-8 text-center",children:[(0,d.jsx)(aj,{className:"w-12 h-12 mb-3 opacity-20"}),(0,d.jsx)("p",{className:"text-sm font-bold",children:"Knowledge Base Empty"}),(0,d.jsx)("p",{className:"text-[10px] mt-1",children:"This context is used by RAG to enhance section generation."})]})]}),(0,d.jsxs)("div",{className:"p-2 bg-white border-t border-gray-200 flex justify-between items-center text-[10px] text-gray-400 font-mono",children:[(0,d.jsxs)("span",{children:[p.length," chars"]}),(0,d.jsx)("span",{className:p.length>0?"text-green-600 font-bold":"",children:p.length>0?"RAG Active":"Inactive"})]})]}),{})]})},yH=j("git-commit-horizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]),yI=[{version:"v1.5.0",date:"2025.12",description:"æ ¸å¿ƒæ¨¡åž‹å‡ç´šï¼šå…¨é¢æŽ¡ç”¨ Google æœ€æ–° Gemini 3 Flash Preview æ¨¡åž‹ï¼Œå¤§å¹…æå‡ç”Ÿæˆé€Ÿåº¦èˆ‡å…§å®¹æº–ç¢ºåº¦ï¼Œä¸¦å„ªåŒ–é•·æ–‡æœ¬è™•ç†èƒ½åŠ›ã€‚"},{version:"v1.4.0",date:"2025.12",description:"åŠŸèƒ½é‡æ§‹èˆ‡å„ªåŒ–ï¼šå°‡é—œéµè©žåˆ†æžå‡ç´šç‚ºã€Œé«˜é »è©žå½™ (Frequent Words)ã€ä¸¦å¢žåŠ ä¾‹å¥æå–åŠŸèƒ½ï¼›æ–°å¢žã€Œå€åŸŸåŒ–èˆ‡å®‰å…¨ (Localization & Safety)ã€æª¢æŸ¥é¢æ¿ä»¥å¼·åŒ–å…§å®¹åˆè¦ã€‚åº•å±¤å‰‡é€éŽä¸¦è¡ŒåŒ–è™•ç†ä¿®å¾©äº†åŒæ­¥å•é¡Œï¼Œé¡¯è‘—æå‡åˆ†æžé€Ÿåº¦ã€‚"},{version:"v1.3.0",date:"2025.03",description:"é«”é©—å¤§å¹…å‡ç´šï¼šæŽ¨å‡ºã€Œå…¨åŸŸè¦–è¦ºè­˜åˆ¥ç³»çµ± (VIS)ã€ï¼Œç¢ºä¿ç”Ÿæˆåœ–ç‰‡é¢¨æ ¼çš„ä¸€è‡´æ€§ã€‚æ–°å¢žã€Œæ¸¸æ¨™è™•æ’å…¥ã€åŠŸèƒ½ï¼Œè®“åœ–ç‰‡ç´ æèƒ½ä¸€éµæ”¾å…¥æ–‡ç« ã€‚åŒæ™‚å„ªåŒ–äº†åº•å±¤è™•ç†æ•ˆèƒ½ï¼Œæå‡æ•´é«”å›žæ‡‰é€Ÿåº¦ã€‚"},{version:"v1.2.0",date:"2025.02",description:"æ•´åˆ Gemini 3 Pro (Nano Banana) ç”Ÿæˆé«˜ä¿çœŸåœ–åƒï¼Œä¸¦æ”¯æ´ä¾†æºåœ–ç‰‡çš„ AI è¦–è¦ºç†è§£ã€‚"},{version:"v1.1.0",date:"2025.01",description:"æ–°å¢žçŸ¥è­˜åº« RAG æª¢ç´¢èˆ‡ç«¶çˆ­å°æ‰‹æ¸…æ´— (Competitor Sanitization) å”è­°ã€‚"},{version:"v1.0.0",date:"2024.12",description:"æ ¸å¿ƒã€Œåˆ†æž-è¦åŠƒ-å¯«ä½œã€æž¶æ§‹ä¸Šç·šï¼Œå…·å‚™æ·±åº¦çµæ§‹æå–åŠŸèƒ½ã€‚"}],yJ=({isOpen:a,onClose:b})=>a?(0,d.jsxs)("div",{className:"fixed inset-0 z-[60] flex justify-end",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm animate-in fade-in duration-200",onClick:b}),(0,d.jsxs)("div",{className:"relative w-full max-w-sm bg-white h-full shadow-2xl border-l border-gray-200 flex flex-col animate-in slide-in-from-right duration-300",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-5 border-b border-gray-100 bg-gray-50/50",children:[(0,d.jsxs)("h2",{className:"text-base font-bold text-gray-800 flex items-center gap-2",children:[(0,d.jsx)(yH,{className:"w-4 h-4 text-blue-600"}),"æ›´æ–°æ—¥èªŒ"]}),(0,d.jsx)("button",{onClick:b,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,d.jsx)(mc,{className:"w-4 h-4"})})]}),(0,d.jsxs)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",children:[(0,d.jsxs)("div",{className:"mb-10",children:[(0,d.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Ai Text Writer Pro"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 leading-relaxed",children:"å°ˆç‚ºé«˜è½‰æ›çŽ‡ç·¨è¼¯å…§å®¹è¨­è¨ˆçš„å°ˆæ¥­ç´š AI å¯«ä½œå·¥ä½œå€ï¼Œåˆ©ç”¨æ·±åº¦çµæ§‹åˆ†æžèˆ‡ RAG æŠ€è¡“ï¼Œå¡«è£œé€šç”¨ LLM è¼¸å‡ºèˆ‡å°ˆæ¥­å…§å®¹ä¹‹é–“çš„å·®è·ã€‚"})]}),(0,d.jsxs)("div",{className:"space-y-8 relative",children:[(0,d.jsx)("div",{className:"absolute left-[3px] top-2 bottom-2 w-px bg-gray-100"}),yI.map((a,b)=>(0,d.jsxs)("div",{className:"relative pl-6",children:[(0,d.jsx)("div",{className:`absolute left-0 top-1.5 w-1.5 h-1.5 rounded-full ring-4 ring-white ${0===b?"bg-blue-600":"bg-gray-300"}`}),(0,d.jsxs)("div",{className:"flex flex-col gap-1 mb-2",children:[(0,d.jsx)("span",{className:`text-sm font-bold ${0===b?"text-blue-700":"text-gray-900"}`,children:a.version}),(0,d.jsx)("span",{className:"text-xs text-gray-400 font-mono tracking-wide",children:a.date})]}),(0,d.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:a.description})]},b))]})]})]})]}):null,yK=async a=>{let b=new TextEncoder().encode(a);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",b))).map(a=>a.toString(16).padStart(2,"0")).join("")},yL=({passwordHash:a="",onUnlock:b})=>{let[c,f]=(0,e.useState)(""),[g,h]=(0,e.useState)(""),[i,j]=(0,e.useState)(!1),k=async d=>{if(d.preventDefault(),h(""),!a)return void h("Password is not configured. Please set VITE_APP_GUARD_HASH.");j(!0);try{await yK(c.trim())===a?b():h("Incorrect password.")}catch(a){console.error("Password hash failed",a),h("Something went wrong. Please try again.")}finally{j(!1)}};return(0,d.jsx)("div",{className:"min-h-screen w-full bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white flex items-center justify-center p-6",children:(0,d.jsxs)("div",{className:"w-full max-w-md bg-slate-900/70 border border-slate-700 rounded-2xl shadow-2xl p-6 backdrop-blur",children:[(0,d.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Restricted Area"}),(0,d.jsx)("h1",{className:"text-xl font-semibold text-white mt-1",children:"Enter Access Code"})]})}),(0,d.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-sm text-slate-300",children:"Password"}),(0,d.jsx)("input",{type:"password",value:c,onChange:a=>f(a.target.value),className:"w-full px-3 py-2 rounded-lg bg-slate-800 border border-slate-700 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter password",autoFocus:!0})]}),g&&(0,d.jsx)("div",{className:"text-sm text-red-400 bg-red-950/40 border border-red-800 rounded-lg px-3 py-2",children:g}),(0,d.jsx)("button",{type:"submit",disabled:i,className:"w-full py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors disabled:opacity-60",children:i?"Verifying...":"Unlock"})]})]})})},yM=async a=>{if(!a||0===a.trim().length)return[];try{let b=await fetch("https://corsproxy.io/?"+encodeURIComponent("https://nlp.award-seo.com/api/v1/tokenize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:a,min_length:2,stop_words:[]})});if(!b.ok)return console.warn("NLP API Error:",b.status,b.statusText),[];let c=await b.json();if("ok"===c.status&&c.data&&c.data.frequencies)return c.data.frequencies.filter(a=>a.token.length>1).sort((a,b)=>b.count-a.count);return[]}catch(a){return console.error("NLP Service Error:",a),[]}};class yN{value;next;constructor(a){this.value=a}}class yO{#g;#h;#i;constructor(){this.clear()}enqueue(a){let b=new yN(a);this.#g?this.#h.next=b:this.#g=b,this.#h=b,this.#i++}dequeue(){let a=this.#g;if(a)return this.#g=this.#g.next,this.#i--,this.#g||(this.#h=void 0),a.value}peek(){if(this.#g)return this.#g.value}clear(){this.#g=void 0,this.#h=void 0,this.#i=0}get size(){return this.#i}*[Symbol.iterator](){let a=this.#g;for(;a;)yield a.value,a=a.next}*drain(){for(;this.#g;)yield this.dequeue()}}function yP(a){if(!((Number.isInteger(a)||a===1/0)&&a>0))throw TypeError("Expected `concurrency` to be a number from 1 and up")}let yQ=async(a,b,c)=>{var d;let e,f,g,h,i,j=Date.now(),k=new Map;b.forEach(a=>{let b=(a.token||"").toLowerCase().trim();b&&!k.has(b)&&k.set(b,a)});let l=Array.from(k.values()).slice(0,30).map(b=>({word:b.token,snippets:((a,b,c=100)=>{let d;if(!a||!b)return[];let e=RegExp(b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"),f=[],g=0;for(;null!==(d=e.exec(a))&&g<50;){g++;let e=Math.max(0,d.index-c),h=Math.min(a.length,d.index+b.length+c),i="..."+a.substring(e,h).replace(/\s+/g," ").trim()+"...";f.push(i)}return Array.from(new Set(f)).slice(0,3)})(a,b.token,80).slice(0,2).map(a=>((a,b=160)=>a.length>b?`${a.slice(0,b-3)}...`:a)(a))})),m=I(c),n=(yP(d=2),e=new yO,f=0,g=()=>{f<d&&e.size>0&&(f++,e.dequeue()())},h=async(a,b,c)=>{let d=(async()=>a(...c))();b(d);try{await d}catch{}f--,g()},Object.defineProperties(i=(a,...b)=>new Promise(c=>{new Promise(a=>{e.enqueue(a)}).then(h.bind(void 0,a,c,b)),f<d&&g()}),{activeCount:{get:()=>f},pendingCount:{get:()=>e.size},clearQueue:{value(){e.clear()}},concurrency:{get:()=>d,set(a){yP(a),d=a,queueMicrotask(()=>{for(;f<d&&e.size>0;)g()})}},map:{async value(a,b){return Promise.all(Array.from(a,(a,c)=>this(b,a,c)))}}}),i),o=((a,b)=>{let c=[];for(let d=0;d<a.length;d+=b)c.push(a.slice(d,d+b));return c})(l,10);console.log(`[SemanticKeywords] Processing ${l.length} words in ${o.length} batches (Concurrency: 2)...`);let p=o.map((a,b)=>n(async()=>{let c=1200*b;c>0&&await new Promise(a=>setTimeout(a,c));let d=(({languageInstruction:a,analysisPayloadString:b})=>`
    I have a list of High - Frequency Keywords and their "Context Snippets" from a Reference Text.

      TASK:
    For each keyword, analyze its context snippets to understand the specific ** Sentence Structure ** and ** Syntactic placement **.
    Generate a "Usage Action Plan" (Max 3 actionable points).
    Extract a ** SINGLE, SHORT ** "Example Sentence" (Max 40 chars/15 words).

      <LanguageInstruction>
      ${a}
      </LanguageInstruction>

    The Action Plan must be specific about the ** Sentence Context **:
    1. ** Placement **: Where does it appear? (Start/Middle/End/Transition)
    2. ** Collocations **: What words appear around it?
    3. ** Tone **: What function does it serve? (e.g., Is it a prefix/suffix?)

    STRICT RULES:
    - You MUST provide a "plan" with exactly 3 points and one "exampleSentence" for EVERY keyword.
    - If a keyword's context is unclear, use your knowledge of the language/style to provide a generic but accurate action plan.
    - NEVER return an empty array or null for "plan" or "exampleSentence".

          INPUT DATA:
    <AnalysisPayload>
    ${b}
    </AnalysisPayload>
    DEFINITION: JSON list of keywords and snippets.
    ACTION: Analyze these specific snippets.

    OUTPUT JSON(array):
    [
      {
        "word": "keyword",
        "plan": ["actionable guidance 1", "actionable guidance 2", "actionable guidance 3"],
        "exampleSentence": "ONE short sentence (< 15 words) from the text. NO explanations.",
        "isSentenceStart": true/false,
        "isSentenceEnd": true/false,
        "isPrefix": true/false,
        "isSuffix": true/false
      }
    ]
    Return JSON only.
    `)({analysisPayloadString:JSON.stringify(a,null,2),languageInstruction:m});try{console.log(`[SemanticKeywords] Starting batch ${b+1}/${o.length}...`);let c=await U.runJson(d,"FLASH",{type:W,items:{type:V,properties:{word:{type:X},plan:{type:W,items:{type:X}},exampleSentence:{type:X},isSentenceStart:{type:Y},isSentenceEnd:{type:Y},isPrefix:{type:Y},isSuffix:{type:Y}},required:["word","plan","exampleSentence"]}});if(console.log(`[SemanticKeywords] Batch ${b+1} Result:`,{requested:a.length,received:c.data?.length||0,duration:c.duration}),!c.data||0===c.data.length)return console.warn(`[SemanticKeywords] Batch ${b+1} returned NO data. Batch payload:`,a.map(a=>a.word)),{data:[],usage:c.usage,cost:c.cost,duration:c.duration};return{data:c.data.map(a=>({...a,plan:Array.isArray(a.plan)?a.plan:[a.plan].filter(Boolean)})),usage:c.usage,cost:c.cost,duration:c.duration}}catch(a){return console.warn(`[SemanticKeywords] Batch ${b+1} failed`,a),{data:[],usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:0}}})),q=await Promise.all(p),r=[],s={inputTokens:0,outputTokens:0,totalTokens:0},t={inputCost:0,outputCost:0,totalCost:0};q.forEach(a=>{a.data&&(r=r.concat(a.data)),a.usage&&(s.inputTokens+=a.usage.inputTokens||0,s.outputTokens+=a.usage.outputTokens||0,s.totalTokens+=a.usage.totalTokens||0),a.cost&&(t.inputCost+=a.cost.inputCost||0,t.outputCost+=a.cost.outputCost||0,t.totalCost+=a.cost.totalCost||0)});let u=new Set;return{data:r.reduce((a,b)=>{let c=(b.word||"").toLowerCase().trim();if(!c||u.has(c))return a;u.add(c);let d=l.find(a=>a.word===b.word)||l.find(a=>(a.word||"").toLowerCase()===c);return a.push({word:b.word,plan:b.plan||[],snippets:d?d.snippets:[],exampleSentence:b.exampleSentence||"",isSentenceStart:!!b.isSentenceStart,isSentenceEnd:!!b.isSentenceEnd,isPrefix:!!b.isPrefix,isSuffix:!!b.isSuffix}),a},[]),usage:G(s),cost:t,duration:Date.now()-j}},yR=async(a,b,c,d)=>{let e=Date.now(),f=a.length>3e3?a.slice(0,3e3)+"...(truncated)":a,g=(({languageInstruction:a,authorityTerms:b,websiteType:c,title:d})=>`
    ## Task
    Analyze the Authority Terms for this article and surface only the most credible, relevant ones.

    DEFINITION: The main goal of this analysis.
    ACTION: Filter and propose strategic combinations of terms.
    
    <WebsiteType>
    ${c}
    </WebsiteType>
    DEFINITION: The industry/niche.
    ACTION: Judge credibility based on this context.

    <ArticleTitle>
    ${d}
    </ArticleTitle>
    DEFINITION: Topic context.
    ACTION: Ensure terms are relevant to this topic.

    <CandidateTerms>
    ${b}
    </CandidateTerms>
    DEFINITION: List of potential terms.
    ACTION: Filter this list.
    
    <LanguageInstruction>
    ${a}
    </LanguageInstruction>
    DEFINITION: The language for the output.
    ACTION: Provide the output in this language.

    ## Goals
    - Keep only terms that strengthen trust / credibility for this topic and site type.
    - Drop vague, unrelated, or unverifiable claims.
    - Propose strategic combinations of 2 - 3 terms to reinforce authority.

    DEFINITION: Specific objectives for the analysis.
    ACTION: Ensure the output meets these goals.
    
    OUTPUT JSON:
    {
          "relevantTerms": ["best-fit term 1", "best-fit term 2"],
        "combinations": ["term A + term B in intro", "term C in meta description"]
    }
    Return JSON only.`)({authorityTerms:f,title:b,websiteType:c,languageInstruction:I(d)});try{let a,b=await U.runJson(g,"FLASH",{type:V,properties:{relevantTerms:{type:W,items:{type:X},description:"Filtered high-relevance authority terms"},combinations:{type:W,items:{type:X},description:"Strategic ways to combine these terms"}},required:["relevantTerms","combinations"]});return{data:b.data,usage:(a=b.usage,G(a)),cost:b.cost,duration:b.duration}}catch(a){return console.error("Authority analysis failed",a),{data:{relevantTerms:[],combinations:[]},usage:G(a?.usage),cost:{inputCost:0,outputCost:0,totalCost:0},duration:Date.now()-e}}},yS=a=>{"analyzing"===ye.getState().status?console.log(`[Analysis Log]: ${a}`):console.log(`[Background Log]: ${a}`)},yT=(a,b=5)=>{let c=a.slice(0,b),d=a.length>b?` +${a.length-b}`:"";return c.join(", ")+d},yU=async(a,b)=>{if(!a||a.length<50)return{data:[],usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:0};let c=Date.now(),d=(({content:a,targetAudience:b})=>`
    TASK: Analyze the content for ** Regional Terminology ** and ** Brand Availability ** conflicts in: ${b}.

    <TargetAudience>
    ${b}
    </TargetAudience>

    Using Google Search (Grounding), verify:
    1. ** Brand Availability **: Are mentioned brands/products actually available/popular in ${b}? (e.g. A Taiwan-only clinic appearing in a Hong Kong article is a mismatch).
    2. ** Regional Vocabulary **: Replace obvious dialect terms (e.g. "è¦–é »" -> "å½±ç‰‡" for TW).

    <ContentSnippet>
    ${a.slice(0,15e3)}...
    </ContentSnippet>

    OUTPUT JSON:
    [
      { "original": "Wrong Term", "replacement": "Correct Term", "reason": "Reason (e.g. 'Taiwan-only brand')" }
    ]
    Return JSON only. If no issues, return [].
    `)({content:a,targetAudience:b}),e=await U.runJson(d,"FLASH",{type:W,items:{type:V,properties:{original:{type:X},replacement:{type:X},reason:{type:X}},required:["original","replacement","reason"]}});return{data:e.data||[],usage:e.usage,cost:e.cost,duration:Date.now()-c}},yV=()=>ye.getState().isStopped,yW=async a=>{let b=ye.getState(),c=yf.getState(),d=D.getState();b.setStatus("analyzing"),c.setScrapedImages(a.scrapedImages||[]),c.setTargetAudience(a.targetAudience),c.setArticleTitle(a.title||"");let e=I(a.targetAudience);c.setLanguageInstruction(e),console.info("[LangConfig]",{targetAudience:a.targetAudience,languageInstruction:e}),yS(`èªžè¨€è¨­å®šï¼š${(a=>{switch(a){case"zh-HK":return"ç¹é«”ä¸­æ–‡ï¼ˆé¦™æ¸¯ï¼‰";case"zh-MY":return"ç°¡é«”ä¸­æ–‡ï¼ˆé¦¬ä¾†è¥¿äºžï¼‰";default:return"ç¹é«”ä¸­æ–‡ï¼ˆå°ç£ï¼‰"}})(a.targetAudience)}ï¼ˆ${a.targetAudience}ï¼‰`),yS("Starting analysis...");let f={...a,brandKnowledge:c.brandKnowledge},g=async()=>{let e=a.productBrief,g=[];if(!e&&a.productRawText&&a.productRawText.length>5){if(yV())return{mapping:[]};b.setGenerationStep("parsing_product"),yS("Parsing product brief and CTA...");let c=await $(a.productRawText);console.log(`[Timer] Product Context Parse: ${c.duration}ms`),e=c.data,yS("Product brief parsed."),d.addCost(c.cost.totalCost,c.usage.totalTokens)}if(e&&e.productName){if(yV())return{brief:e,mapping:[]};b.setGenerationStep("mapping_product"),yS("Mapping pain points to product features...");let a=await _(e,f.targetAudience);if(console.log(`[Timer] Product Mapping: ${a.duration}ms`),g=a.data,c.setProductMapping(g),g.length>0){let a=g[0];yS(`Product-feature mapping ready (${g.length}). e.g., ${a.painPoint} â†’ ${a.productFeature}`)}else yS("Product-feature mapping ready (no matches found).");d.addCost(a.cost.totalCost,a.usage.totalTokens)}return c.setActiveProductBrief(e),{brief:e,mapping:g}},h=async()=>{if(yV())return;b.setGenerationStep("nlp_analysis"),yS("Running NLP keyword scan...");let a=await yM(f.referenceContent),e=D.getState(),g=Math.floor(f.referenceContent.length/e.keywordCharDivisor),h=Math.max(e.minKeywords,Math.min(e.maxKeywords,g)),i=a.slice(0,h),j=yT(i.map(a=>a.token),6);if(yS(`NLP scan found ${a.length} keywords. Using top ${i.length} (Ratio: 1/${e.keywordCharDivisor}, Min: ${e.minKeywords}): ${j}`),i.length>0&&!yV()){b.setGenerationStep("planning_keywords");try{yS(`Planning keyword strategy (top ${i.length})...`);let b=await yQ(f.referenceContent,a,f.targetAudience);console.log(`[Timer] Keyword Action Plan: ${b.duration}ms`),console.log(`[SemanticKeywords] Final aggregated plans: ${b.data.length} / ${i.length}`),c.setKeywordPlans(b.data);let e=yT(b.data.map(a=>a.word),6);yS(`Keyword plan ready (${b.data.length}). Focus: ${e}`),d.addCost(b.cost.totalCost,b.usage.totalTokens)}catch(a){console.warn("Action Plan extraction failed",a),yS("Keyword planning failed (continuing).")}}},i=async()=>{if(yV())return;b.setGenerationStep("extracting_structure"),yS("Extracting reference structure and authority signals...");let[a,e]=await Promise.all([kW(f.referenceContent,f.targetAudience),yR(f.authorityTerms||"",f.title,f.websiteType||"General Professional Website",f.targetAudience)]);if(console.log(`[Timer] Narrative Structure (Outline): ${a.duration}ms`),console.log(`[Timer] Authority Analysis: ${e.duration}ms`),yS(`Structure extracted (${a.data?.structure?.length||0} sections).`),yS("Authority terms mapped."),a.data?.structure?.length){let b=yT(a.data.structure.map(a=>a.title),6);yS(`Sections: ${b}`)}return e.data?.relevantTerms?.length&&yS(`Authority terms: ${yT(e.data.relevantTerms,6)}`),d.addCost(a.cost.totalCost,a.usage.totalTokens),d.addCost(e.cost.totalCost,e.usage.totalTokens),c.setRefAnalysis(a.data),c.setAuthAnalysis(e.data),{structRes:a,authRes:e}},j=async()=>{if(yV())return;b.setGenerationStep("analyzing_visuals"),yS("Analyzing source images and visual identity...");let e=a.scrapedImages||[],g=e.slice(0,5),h=[...e];if(g.length>0){for(let a=0;a<g.length&&!yV();a++){let b=g[a];if(b.url)try{let c=await x5(b.url);h[a]={...h[a],aiDescription:c.data},d.addCost(c.cost.totalCost,c.usage.totalTokens)}catch(a){console.warn(`Failed to analyze image ${b.url}`,a)}}c.setScrapedImages(h)}try{let a=await x6(h,f.websiteType||"Modern Business");c.setVisualStyle(a.data),yS(`âœ“ Visual style extracted: ${a.data}`),d.addCost(a.cost.totalCost,a.usage.totalTokens)}catch(a){console.warn("Failed to extract visual style",a),yS("Visual style extraction skipped.")}},k=async()=>{if(!yV()){b.setGenerationStep("localizing_hk"),yS("Analyzing regional terminology & brand grounding...");try{let a=await yU(f.referenceContent,f.targetAudience);if(console.log(`[Timer] Regional Analysis: ${a.duration}ms`),a.data&&a.data.length>0)return yS(`Regional analysis found ${a.data.length} terms to correct.`),a.data;return yS("Regional analysis: No major issues found."),[]}catch(a){return console.warn("Regional analysis failed",a),yS("Regional analysis failed (continuing)."),[]}}};yS("Dispatching analysis tasks with burst protection...");let l=await g();await new Promise(a=>setTimeout(a,1e3));let[m,n,o,p]=await Promise.all([i(),(async()=>(await new Promise(a=>setTimeout(a,1e3)),j()))(),(async()=>(await new Promise(a=>setTimeout(a,2e3)),k()))(),(async()=>(await new Promise(a=>setTimeout(a,3e3)),h()))()]);return m?.structRes?.data&&(m.structRes.data.regionalReplacements=o,c.refAnalysis&&c.setRefAnalysis({...c.refAnalysis,regionalReplacements:o})),yS("All analysis tasks completed. Preparing to write..."),b.setGenerationStep("idle"),{productResult:l,structureResult:m,keywordPromise:Promise.resolve(p),visualPromise:Promise.resolve(n),regionalPromise:Promise.resolve(o)}},yX=a=>(a||"").replace(/^#+\s*/,"").replace(/["â€œâ€]/g,"").trim(),yY=async(a,b)=>{let c=ye.getState(),d=yf.getState(),e=D.getState(),{productResult:f,structureResult:g}=b,h=f?.brief,i=f?.mapping||[],j=g?.structRes.data,k=g?.authRes.data,l=[],m=!1;a.sampleOutline&&a.sampleOutline.trim().length>0?(l=a.sampleOutline.split("\n").map(a=>a.trim()).filter(a=>a.length>0).map(a=>({title:a})),m=!0):j?.structure&&j.structure.length>0?(l=[...j.structure],j.introText&&j.introText.trim().length>0&&l.unshift({title:"å‰è¨€",narrativePlan:[j.introText],subheadings:[],difficulty:"easy"}),m=!1):l=[{title:"Introduction"},{title:"Core Concepts"},{title:"Benefits"},{title:"Applications"},{title:"Conclusion"}],c.setStatus("streaming"),c.setGenerationStep("writing_content"),c.setContent("");let n=d.headingOptimizations||[],o=!m&&n.length>0,p=Array(l.length).fill(""),q=l.map(a=>(a=>{let b=yX(a);if(!o)return b;let c=n.find(a=>{let c=yX(a.h2_before),d=yX(a.h2_after);return c===b||d===b});if(!c)return b;let d=(c.h2_options||[]).map(a=>({text:yX(a.text||""),score:"number"==typeof a.score?a.score:void 0})).filter(a=>a.text&&"number"==typeof a.score).sort((a,b)=>(b.score??-1/0)-(a.score??-1/0)),e=yX(c.h2_after||c.h2_before||b);return yX(d[0]?.text||e||b)})(a.title)),r=[...Array.isArray(j?.keyInformationPoints)?j.keyInformationPoints:[],...Array.isArray(j?.brandExclusivePoints)?j.brandExclusivePoints:[]],s=Array.from(new Set([...(j?.structure||[]).flatMap(a=>[...Array.isArray(a?.keyFacts)?a.keyFacts:[],...Array.isArray(a?.uspNotes)?a.uspNotes:[]]).filter(Boolean),...r])).filter(Boolean),t={...a,productBrief:h,referenceAnalysis:j,authorityAnalysis:k},u=!!a.autoImagePlan,v=(a,b)=>{let c=yX(q[a]||l[a]?.title||`Section ${a+1}`),d="string"==typeof b?b:p[a];return d?`## ${c}

${d}`:`## ${c}

_(Writing...)_`},w=()=>{var a,b;return a=l,b=p.map((a,b)=>a?v(b,a):""),`> ðŸ“‘ **Active Blueprint:** Turbo Mode

`+a.map((a,c)=>{let d=b[c];return d||`> â³ **Writing Section:** ${a.title}...`}).join("\n\n")},x=m?"**User Custom Outline**":"**AI Narrative Structure (Outline)**",y=`> ðŸ“‘ **Active Blueprint:** ${x}

`;c.setContent(y);let z=l.map(async(a,b)=>{if(ye.getState().isStopped)return;let f=l.map(a=>a.title),g=f.slice(b+1),h=j?.structure.find(b=>b.title===a.title)?.narrativePlan,m=a.specificPlan||h,n=j?.structure.find(b=>b.title===a.title),o=Array.from(new Set([...Array.isArray(a.keyFacts)?a.keyFacts:[],...Array.isArray(a.uspNotes)?a.uspNotes:[],...Array.isArray(n?.keyFacts)?n.keyFacts:[],...Array.isArray(n?.uspNotes)?n.uspNotes:[],...s])).filter(Boolean),q={...t,productMapping:i},r=b>0?[`[Preceding Section: ${f[b-1]}]`]:[];try{let f=await yb(q,a.title,m,j?.generalPlan,yf.getState().keywordPlans||[],r,g,k,o,[],0,a);if(!ye.getState().isStopped){var u;p[b]=(u=f.data.content)?u.replace(/^\s*<h[1-6][^>]*>.*?<\/h[1-6]>\s*/i,"").replace(/^\s*#{1,6}\s.*(\r?\n|$)/,"").trim():"",console.log(`[Timer - Turbo] Section '${a.title}': ${f.duration}ms`),c.setContent(w()),e.addCost(f.cost.totalCost,f.usage.totalTokens),f.data.usedPoints&&f.data.usedPoints.length>0&&d.setCoveredPoints(a=>{let b=f.data.usedPoints.filter(b=>!a.includes(b));return[...a,...b]})}}catch(d){console.error(`Parallel gen error for ${a.title}`,d),p[b]="",c.setContent(w())}});if(await Promise.all(z),ye.getState().isStopped||c.setContent(p.map((a,b)=>v(b)).join("\n\n")),!ye.getState().isStopped){if(u){c.setGenerationStep("generating_images");let b=p.join("\n\n");try{yS("Planning visual assets...");let c=await x9(b,d.scrapedImages,a.targetAudience,d.visualStyle);console.log(`[Images] Planned ${c.data.length} images`),yS(`Visual plan ready: ${c.data.length} images.`),e.addCost(c.cost.totalCost,c.usage.totalTokens);let f=c.data.map(async a=>{if(!ye.getState().isStopped)try{let b=a.category||a.insertAfter||a.id;yS(`Generating image: ${b}...`);let c=await x8(a.generatedPrompt);c.data&&(console.log(`[Images] Generated: ${a.id}`),e.addCost(c.cost.totalCost,c.usage.totalTokens))}catch(b){console.error(`Failed to generate image ${a.id}`,b)}});await Promise.all(f),yS("Image generation completed.")}catch(a){console.error("Image generation phase failed",a),yS("Image generation failed.")}}else yS("Skipping auto image planning (manual only).");c.setGenerationStep("finalizing"),c.setStatus("completed"),c.setGenerationStep("idle")}},yZ=async a=>{let b,c=ye.getState();ye.getState().resetGeneration(),D.getState().resetSessionStats(),(b=yf.getState()).setKeywordPlans([]),b.setRefAnalysis(null),b.setAuthAnalysis(null),b.setScrapedImages([]),b.setVisualStyle(""),b.setCoveredPoints([]),b.setProductMapping([]),b.setActiveProductBrief(void 0),b.setArticleTitle(""),b.setHeadingOptimizations([]),c.setError(null),c.setLastConfig(a);try{let b=await yW(a);if(ye.getState().isStopped)return;c.setAnalysisResults(b),c.setStatus("analysis_ready"),c.setGenerationStep("idle")}catch(a){console.error(a),c.setError(a.message||"An unexpected error occurred during generation."),c.setStatus("error"),c.setGenerationStep("idle")}},y$=async()=>{let a=ye.getState(),b=a.analysisResults,c=a.lastConfig;if(!b||!c){a.setError("å°šæœªå®Œæˆåˆ†æžï¼Œç„¡æ³•ç”Ÿæˆæ®µè½ã€‚è«‹å…ˆåŸ·è¡Œåˆ†æžã€‚"),a.setStatus("error");return}let d=[];if(b.structureResult?.structRes?.data?.structure?.length||d.push("æ–‡ç« æž¶æ§‹ (Structure)"),b.structureResult?.authRes?.data||d.push("æ¬Šå¨åˆ†æž (Authority)"),yf.getState().keywordPlans?.length||d.push("é—œéµå­—è¦åŠƒ (Keywords)"),d.length>0){let b=`åµæ¸¬åˆ°éƒ¨åˆ†åˆ†æžè³‡æ–™ç¼ºå¤±ï¼š
${d.map(a=>`- ${a}`).join("\n")}

æ˜¯å¦ä»è¦å˜—è©¦ç”Ÿæˆï¼Ÿ(é¸æ“‡ã€Œå–æ¶ˆã€å°‡é‡æ–°åŸ·è¡Œåˆ†æž)`;if(!window.confirm(b))return void a.setStatus("idle")}a.setError(null);try{await yY(c,b)}catch(b){console.error(b),a.setError(b?.message||"ç”Ÿæˆæ®µè½æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹é‡è©¦ã€‚"),a.setStatus("error"),a.setGenerationStep("idle")}},y_={"zh-TW":{name:"å°ç£",currency:"NT$/æ–°å°å¹£",excludeRegions:["HK","CN","MY"],examples:["è¦çš®","momoè³¼ç‰©","å°åŒ—æ·é‹","å¥ä¿","é«˜éµ","å…¨è¯","7-11"]},"zh-HK":{name:"é¦™æ¸¯",currency:"HKD/$æ¸¯å¹£",excludeRegions:["TW","CN","MY"],examples:["HKTVmall","æ¸¯éµ","OKä¾¿åˆ©åº—","å…«é”é€š","å¼·ç©é‡‘"]},"zh-MY":{name:"é¦¬ä¾†è¥¿äºž",currency:"RM/é¦¬å¹£",excludeRegions:["TW","HK","CN"],examples:["Lazada","Shopee","Grab","Touch 'n Go","EPF"]}},y0=async(a,b)=>{let c=y_[b];if(0===a.length||!c)return{mappings:[],usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:0};let d=a.map(a=>`- ${a.text} (${a.type})`).join("\n"),e=`
ä½ æ˜¯ä¸€ä½${c.name}å¸‚å ´å°ˆå®¶ã€‚è«‹ç‚ºä»¥ä¸‹éž${c.name}å¯¦é«”æ‰¾å‡º${c.name}é©åˆçš„æ›¿ä»£é¸é …ã€‚

**éœ€è¦æŸ¥æ‰¾æ›¿ä»£çš„å¯¦é«”ï¼š**
${d}

**æ›¿ä»£é¸é …å„ªå…ˆé †åºï¼ˆè«‹ä¾åºå˜—è©¦ï¼‰ï¼š**
1. **ç›´æŽ¥å°æ‡‰** - ${c.name}å¸‚å ´ä¸­åŠŸèƒ½ç›¸åŒçš„å“ç‰Œ/æœå‹™ï¼ˆå¦‚ï¼šå°ç£ã€Œå…¨è¯ã€â†’ é¦™æ¸¯ã€Œç™¾ä½³/æƒ åº·ã€ï¼‰
2. **åŒé¡žæ›¿ä»£** - åŒå“é¡žä¸­${c.name}è¼ƒçŸ¥åçš„å“ç‰Œï¼ˆå¦‚ï¼šå°ç£æœè£å“ç‰Œ â†’ ä»»ä½•é¦™æ¸¯çŸ¥åæœè£å“ç‰Œï¼‰
3. **é€šç”¨æè¿°** - å¦‚æžœæ‰¾ä¸åˆ°å…·é«”å“ç‰Œï¼Œä½¿ç”¨é€šç”¨æè¿°ï¼ˆå¦‚ï¼šã€ŒéŸŒ RENã€â†’ã€Œæœ¬åœ°é‹å‹•æœé£¾å“ç‰Œã€æˆ–ã€ŒçŸ¥åé‹å‹•æœè£åº—ã€ï¼‰
4. **åˆªé™¤** - åªæœ‰åœ¨å®Œå…¨ç„¡æ³•æè¿°æ™‚æ‰ä½¿ç”¨ã€Œ[åˆªé™¤]ã€

**é‡è¦è¦å‰‡ï¼š**
- ç›¡é‡æä¾›æ›¿ä»£ï¼Œä¸è¦è¼•æ˜“ä½¿ç”¨ã€Œ[åˆªé™¤]ã€
- é€šç”¨æè¿°ä¹Ÿæ˜¯å¯æŽ¥å—çš„æ›¿ä»£ï¼ˆå¦‚ã€Œå¤§åž‹è—¥å¦é€£éŽ–åº—ã€ã€ã€Œæœ¬åœ°é›»å•†å¹³å°ã€ï¼‰
- æ¯å€‹è¼¸å…¥çš„å¯¦é«”éƒ½å¿…é ˆæœ‰ä¸€å€‹å°æ‡‰çš„è¼¸å‡º`,f={type:"object",properties:{mappings:{type:"array",items:{type:"object",properties:{type:{type:"string",description:"entity|brand|regulation|currency|location|service"},original:{type:"string",description:"åŽŸå¯¦é«”åç¨±"},regionEquivalent:{type:"string",description:`${c.name}å°æ‡‰çš„çœŸå¯¦å“ç‰Œ/æœå‹™åç¨±ï¼Œå¦‚æ‰¾ä¸åˆ°å‰‡å¡« "[åˆªé™¤]"`},confidence:{type:"number",description:"0.0-1.0 ç½®ä¿¡åº¦"},context:{type:"string",description:"èªªæ˜Žç‚ºä½•é€™æ˜¯åˆé©çš„æ›¿ä»£ï¼Œæˆ–ç‚ºä½•å»ºè­°åˆªé™¤"},sourceRegion:{type:"string",description:"ä¾†æºåœ°å€"}},required:["original","regionEquivalent","context"]}}},required:["mappings"]},g=await U.runJsonWithSearch(e,"FLASH",f),h=g.data.mappings||[];return{mappings:a.map(a=>{let b=h.find(b=>b.original===a.text);return b?{...b,regionEquivalent:"[åˆªé™¤]"===b.regionEquivalent?"":b.regionEquivalent}:{type:a.type,original:a.text,regionEquivalent:"",confidence:0,context:"æœªæ‰¾åˆ°åˆé©æ›¿ä»£ï¼Œå»ºè­°å¾žå…§å®¹ä¸­ç§»é™¤",sourceRegion:a.region}}),usage:g.usage,cost:g.cost,duration:g.duration}},y1=async(a,b,c)=>{let d=y_[c];if(!d||0===b.length)return{localizedGeneralPlan:a.generalPlan,localizedConversionPlan:a.conversionPlan,localizedSections:a.sections,usage:{inputTokens:0,outputTokens:0,totalTokens:0},cost:{inputCost:0,outputCost:0,totalCost:0},duration:0};let e=b.map(a=>a.replacement?`- ã€Œ${a.original}ã€â†’ã€Œ${a.replacement}ã€${a.reason?`ï¼ˆ${a.reason}ï¼‰`:""}`:`- ã€Œ${a.original}ã€â†’ åˆªé™¤æ­¤è©žï¼Œé‡å¯«ç›¸é—œå¥å­ä½¿å…¶é€šé †`).join("\n"),f=JSON.stringify({generalPlan:a.generalPlan,conversionPlan:a.conversionPlan,sections:a.sections.map(a=>({title:a.title,narrativePlan:a.narrativePlan||[],keyFacts:a.keyFacts||[],uspNotes:a.uspNotes||[],subheadings:a.subheadings||[]}))},null,2),g=`
ä½ æ˜¯ä¸€ä½${d.name}å¸‚å ´å…§å®¹æœ¬åœ°åŒ–å°ˆå®¶ã€‚è«‹å°‡ä»¥ä¸‹æ®µè½è¨ˆåŠƒé€²è¡Œæœ¬åœ°åŒ–æ”¹å¯«ï¼Œä½¿å…¶å®Œå…¨é©åˆ${d.name}è®€è€…ã€‚

**æœ¬åœ°åŒ–æ›¿æ›æŒ‡å¼•ï¼š**
${e}

**åŽŸå§‹æ®µè½è¨ˆåŠƒï¼š**
${f}

**æœ¬åœ°åŒ–è¦å‰‡ï¼š**
1. æ‡‰ç”¨ä¸Šè¿°æ›¿æ›æŒ‡å¼•ï¼Œå°‡éž${d.name}çš„å“ç‰Œ/æœå‹™/å¯¦é«”æ›¿æ›ç‚ºé©ç•¶çš„æ›¿ä»£
2. å¦‚æžœæ›¿æ›å¾Œå¥å­ä¸é€šé †ï¼Œè«‹é©åº¦æ”¹å¯«ä½¿å…¶è‡ªç„¶
3. å¦‚æžœæŸè©žéœ€è¦åˆªé™¤ï¼Œè«‹é‡å¯«è©²å¥å­ä½¿å…¶æ„æ€å®Œæ•´ï¼Œä¸è¦ç•™ä¸‹ç©ºç™½
4. ä¿æŒåŽŸæœ‰çš„çµæ§‹å’Œæ ¼å¼ï¼ˆæ•¸çµ„ã€æ¨™é¡Œç­‰ï¼‰
5. å°æ–¼ generalPlan å’Œ conversionPlanï¼Œç¢ºä¿ç­–ç•¥ä»ç„¶é©ç”¨æ–¼${d.name}å¸‚å ´

**è«‹è¼¸å‡º JSONï¼Œæ ¼å¼èˆ‡è¼¸å…¥ç›¸åŒï¼š**
{
  "generalPlan": ["æœ¬åœ°åŒ–å¾Œçš„ç­–ç•¥..."],
  "conversionPlan": ["æœ¬åœ°åŒ–å¾Œçš„è½‰æ›ç­–ç•¥..."],
  "sections": [
    {
      "title": "æœ¬åœ°åŒ–å¾Œçš„æ¨™é¡Œ",
      "narrativePlan": ["æœ¬åœ°åŒ–å¾Œçš„æ•˜äº‹è¨ˆåŠƒ..."],
      "keyFacts": ["æœ¬åœ°åŒ–å¾Œçš„é—œéµäº‹å¯¦..."],
      "uspNotes": ["æœ¬åœ°åŒ–å¾Œçš„è³£é»ž..."],
      "subheadings": ["æœ¬åœ°åŒ–å¾Œçš„å­æ¨™é¡Œ..."]
    }
  ]
}

åªè¼¸å‡º JSONï¼Œä¸è¦å…¶ä»–æ–‡å­—ã€‚`,h={type:"object",properties:{generalPlan:{type:"array",items:{type:"string"}},conversionPlan:{type:"array",items:{type:"string"}},sections:{type:"array",items:{type:"object",properties:{title:{type:"string"},narrativePlan:{type:"array",items:{type:"string"}},keyFacts:{type:"array",items:{type:"string"}},uspNotes:{type:"array",items:{type:"string"}},subheadings:{type:"array",items:{type:"string"}}}}}},required:["generalPlan","conversionPlan","sections"]},i=await U.runJson(g,"FLASH",h);return{localizedGeneralPlan:i.data.generalPlan||a.generalPlan,localizedConversionPlan:i.data.conversionPlan||a.conversionPlan,localizedSections:i.data.sections||a.sections,usage:i.usage,cost:i.cost,duration:i.duration}},y2=j("circle-dot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]),y3=j("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),y4=j("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),y5=j("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),y6=({open:a,onClose:b,items:c,onSave:f})=>{let[g,h]=(0,e.useState)([]),[i,j]=(0,e.useState)(null),[l,m]=(0,e.useState)("");(0,e.useEffect)(()=>{a&&(h(c.map(a=>({...a,action:a.replacement?"replace":"delete",customReplacement:a.replacement}))),j(null),m(""))},[a,c]);let n=(a,b)=>{h(c=>c.map((c,d)=>d===a?{...c,action:b,customReplacement:"keep"===b?"":c.customReplacement}:c))},o=()=>{j(null),m("")},p=(0,e.useMemo)(()=>{let a=g.filter(a=>"replace"===a.action).length;return{replaceCount:a,keepCount:g.filter(a=>"keep"===a.action).length,deleteCount:g.filter(a=>"delete"===a.action).length}},[g]);return a?(0,d.jsxs)("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:b}),(0,d.jsxs)("div",{className:"relative bg-white w-full max-w-2xl max-h-[80vh] rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden",children:[(0,d.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-amber-50 to-orange-50 flex items-center justify-between gap-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-xl bg-amber-600 text-white flex items-center justify-center shadow-lg shadow-amber-200",children:(0,d.jsx)(xM,{className:"w-5 h-5"})}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("h3",{className:"text-lg font-bold text-gray-900 leading-tight",children:"æœ¬åœ°æ›¿æ›ç·¨è¼¯å™¨"}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"é¸æ“‡æ›¿æ›ã€ä¿ç•™åŽŸæ–‡æˆ–åˆªé™¤å„é …ç›®"})]})]}),(0,d.jsx)("button",{onClick:b,className:"p-2 rounded-lg hover:bg-white/80 text-gray-500 transition","aria-label":"Close modal",children:(0,d.jsx)(mc,{className:"w-5 h-5"})})]}),(0,d.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-3",children:0===g.length?(0,d.jsx)("p",{className:"text-sm text-gray-500 text-center py-8",children:"æ²’æœ‰éœ€è¦æ›¿æ›çš„é …ç›®ã€‚"}):g.map((a,b)=>(0,d.jsxs)("div",{className:`rounded-xl border p-4 transition-all ${"replace"===a.action?"bg-amber-50/50 border-amber-200":"keep"===a.action?"bg-blue-50/50 border-blue-200":"bg-red-50/50 border-red-200"}`,children:[(0,d.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[(0,d.jsx)("span",{className:"text-red-500 line-through font-medium",children:a.original}),"keep"!==a.action&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(xO,{className:"w-4 h-4 text-gray-400"}),i===b?(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("input",{type:"text",value:l,onChange:a=>m(a.target.value),className:"px-2 py-1 text-sm border border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-200",placeholder:"è¼¸å…¥æ›¿æ›æ–‡å­—...",autoFocus:!0}),(0,d.jsx)("button",{onClick:()=>{h(a=>a.map((a,c)=>c===b?{...a,customReplacement:l,action:"replace"}:a)),j(null),m("")},className:"p-1.5 rounded-lg bg-emerald-100 text-emerald-700 hover:bg-emerald-200 transition",children:(0,d.jsx)(l7,{className:"w-4 h-4"})}),(0,d.jsx)("button",{onClick:o,className:"p-1.5 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition",children:(0,d.jsx)(mc,{className:"w-4 h-4"})})]}):(0,d.jsxs)(d.Fragment,{children:["delete"===a.action?(0,d.jsx)("span",{className:"text-red-500 font-semibold italic",children:"(åˆªé™¤)"}):(0,d.jsx)("span",{className:"text-emerald-600 font-semibold",children:a.customReplacement||a.replacement||"(æœªè¨­å®š)"}),"replace"===a.action&&(0,d.jsx)("button",{onClick:()=>{j(b),m(g[b]?.customReplacement||"")},className:"p-1 rounded-lg hover:bg-amber-100 text-amber-600 transition",title:"ç·¨è¼¯æ›¿æ›æ–‡å­—",children:(0,d.jsx)(k,{className:"w-3.5 h-3.5"})})]})]}),"keep"===a.action&&(0,d.jsx)("span",{className:"text-blue-600 font-semibold",children:"(ä¿ç•™åŽŸæ–‡)"})]}),a.reason&&(0,d.jsx)("p",{className:"text-xs text-gray-500 leading-relaxed",children:a.reason})]})}),(0,d.jsxs)("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:[(0,d.jsxs)("button",{onClick:()=>n(b,"replace"),className:`px-3 py-1.5 text-xs font-semibold rounded-lg border transition flex items-center gap-1.5 ${"replace"===a.action?"bg-amber-600 text-white border-amber-600":"bg-white text-amber-700 border-amber-200 hover:bg-amber-50"}`,children:[(0,d.jsx)(xM,{className:"w-3.5 h-3.5"}),"æ›¿æ›"]}),(0,d.jsxs)("button",{onClick:()=>n(b,"keep"),className:`px-3 py-1.5 text-xs font-semibold rounded-lg border transition flex items-center gap-1.5 ${"keep"===a.action?"bg-blue-600 text-white border-blue-600":"bg-white text-blue-700 border-blue-200 hover:bg-blue-50"}`,children:[(0,d.jsx)(y5,{className:"w-3.5 h-3.5"}),"ä¿ç•™"]}),(0,d.jsxs)("button",{onClick:()=>n(b,"delete"),className:`px-3 py-1.5 text-xs font-semibold rounded-lg border transition flex items-center gap-1.5 ${"delete"===a.action?"bg-red-600 text-white border-red-600":"bg-white text-red-700 border-red-200 hover:bg-red-50"}`,children:[(0,d.jsx)(ah,{className:"w-3.5 h-3.5"}),"åˆªé™¤"]})]})]},b))}),(0,d.jsxs)("div",{className:"px-6 py-4 border-t border-gray-100 bg-gray-50/50 flex items-center justify-between gap-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,d.jsxs)("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded-full font-semibold",children:["æ›¿æ›: ",p.replaceCount]}),(0,d.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full font-semibold",children:["ä¿ç•™: ",p.keepCount]}),(0,d.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full font-semibold",children:["åˆªé™¤: ",p.deleteCount]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("button",{onClick:b,className:"px-4 py-2 text-sm font-semibold text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition",children:"å–æ¶ˆ"}),(0,d.jsx)("button",{onClick:()=>{f(g),b()},className:"px-4 py-2 text-sm font-semibold text-white bg-gradient-to-r from-amber-600 to-orange-600 rounded-lg shadow-sm hover:brightness-110 transition",children:"å„²å­˜è®Šæ›´"})]})]})]})]}):null},y7=a=>a.split("\n").map(a=>a.trim()).filter(Boolean),y8=({open:a,onClose:b,sections:c,generalPlan:f=[],conversionPlan:g=[],regionalReplacements:h=[],localizedSections:i,localizedGeneralPlan:j,localizedConversionPlan:k,isLocalizing:l=!1,onStartWriting:m,onSavePlan:o,onLocalizeAll:p,onSaveReplacements:q})=>{let[r,s]=(0,e.useState)([]),[t,u]=(0,e.useState)(new Set),[v,w]=(0,e.useState)(!1),[x,y]=(0,e.useState)(!1),z=!!(i&&i.length>0),A=v&&z?i:c,B=v&&z?j||[]:f,C=v&&z?k||[]:g,D=async()=>{0!==h.length&&p&&(await p(),w(!0))};(0,e.useEffect)(()=>{a&&(s((A||[]).map(a=>({...a,selected:!0,narrativeText:(a.narrativePlan||[]).join("\n"),keyFactsText:(a.keyFacts||[]).join("\n"),uspText:(a.uspNotes||[]).join("\n"),subheadingsText:(a.subheadings||[]).join("\n")}))),u(new Set))},[a,A,v]);let E=(0,e.useMemo)(()=>r.length>0&&r.every(a=>a.selected),[r]),F=(0,e.useMemo)(()=>r.some(a=>a.selected),[r]),G=(a=!1)=>r.filter(b=>!a||b.selected).map(a=>({...a,narrativePlan:y7(a.narrativeText),keyFacts:y7(a.keyFactsText),uspNotes:y7(a.uspText),subheadings:y7(a.subheadingsText)})),H=(a=!1)=>{let c=G(a),d=G(!1);o&&o(d),a&&m&&m(c),a||b()},I=(0,e.useMemo)(()=>r.map((a,b)=>({data:{...a,narrativePlan:y7(a.narrativeText),keyFacts:y7(a.keyFactsText),uspNotes:y7(a.uspText),subheadings:y7(a.subheadingsText)},selected:a.selected,idx:b})),[r]);return a?(0,d.jsxs)("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:b}),(0,d.jsxs)("div",{className:"relative bg-white w-full max-w-6xl h-[85vh] rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden",children:[(0,d.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/70 flex items-center justify-between gap-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-xl bg-blue-600 text-white flex items-center justify-center shadow-lg shadow-blue-200",children:(0,d.jsx)(n,{className:"w-5 h-5"})}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("h3",{className:"text-lg font-bold text-gray-900 leading-tight",children:"æ®µè½è¨ˆåŠƒé è¦½"}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"å¯åœ¨å¯«ä½œå‰èª¿æ•´æ®µè½å…§å®¹èˆ‡å‹¾é¸è¦å¯«çš„æ®µè½ã€‚"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("button",{onClick:()=>{0===r.length||s(r.map(a=>({...a,selected:!E})))},className:`px-3 py-2 text-sm font-semibold rounded-lg border ${E?"bg-gray-50 text-gray-700 border-gray-200":"bg-blue-50 text-blue-700 border-blue-200"}`,children:E?"å–æ¶ˆå…¨é¸":"å…¨é¸"}),z&&(0,d.jsxs)("button",{onClick:()=>w(!v),className:`px-3 py-2 text-sm font-semibold rounded-lg border flex items-center gap-1.5 transition ${v?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-50 text-gray-600 border-gray-200"}`,children:[(0,d.jsx)(yE,{className:"w-4 h-4"}),v?"æœ¬åœ°åŒ–ç‰ˆæœ¬ âœ“":"åŽŸç‰ˆ"]}),(0,d.jsx)("button",{onClick:()=>H(!1),className:"px-3 py-2 text-sm font-semibold text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition",children:"å„²å­˜è¨ˆåŠƒ"}),(0,d.jsxs)("button",{onClick:D,className:"px-3 py-2 text-sm font-semibold text-amber-700 bg-amber-50 border border-amber-200 rounded-lg hover:bg-amber-100 transition flex items-center gap-1.5 disabled:opacity-50",disabled:0===h.length||l,children:[(0,d.jsx)(yE,{className:"w-4 h-4"}),l?"è™•ç†ä¸­...":"å…¨éƒ¨æ®µè½æœ¬åœ°åŒ–"]}),(0,d.jsx)("button",{onClick:()=>H(!0),className:"px-3 py-2 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg shadow-sm hover:brightness-110 transition disabled:opacity-50",disabled:!m||!F,children:"ç«‹å³é–‹å§‹å¯«ä½œ"}),(0,d.jsx)("button",{onClick:b,className:"p-2 rounded-lg hover:bg-gray-100 text-gray-500","aria-label":"Close plan modal",children:(0,d.jsx)(mc,{className:"w-5 h-5"})})]})]}),(0,d.jsxs)("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[(0,d.jsx)("aside",{className:"w-full lg:w-72 border-r border-gray-100 bg-white/80",children:(0,d.jsxs)("div",{className:"p-4 space-y-3 h-full overflow-y-auto custom-scrollbar",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase tracking-wide",children:[(0,d.jsx)(xN,{className:"w-4 h-4 text-blue-600"}),"Global Plan",v&&z&&(0,d.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 bg-emerald-100 text-emerald-700 rounded-full",children:"æœ¬åœ°åŒ–"})]}),B.length>0?(0,d.jsx)("ul",{className:"space-y-2",children:B.map((a,b)=>(0,d.jsxs)("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[(0,d.jsx)("span",{className:"text-blue-400 mt-1",children:"â€¢"}),(0,d.jsx)("span",{className:"leading-snug",children:a})]},b))}):(0,d.jsx)("p",{className:"text-sm text-gray-400",children:"å°šæœªæœ‰å…¨åŸŸå¯«ä½œè¦å‰‡ã€‚"}),(0,d.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase tracking-wide",children:[(0,d.jsx)(yw,{className:"w-4 h-4 text-emerald-600"}),"Conversion Plan",v&&z&&(0,d.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 bg-emerald-100 text-emerald-700 rounded-full",children:"æœ¬åœ°åŒ–"})]}),C.length>0?(0,d.jsx)("ul",{className:"mt-2 space-y-2",children:C.map((a,b)=>(0,d.jsxs)("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[(0,d.jsx)("span",{className:"text-emerald-400 mt-1",children:"â€¢"}),(0,d.jsx)("span",{className:"leading-snug",children:a})]},b))}):(0,d.jsx)("p",{className:"text-sm text-gray-400",children:"å°šæœªæœ‰è½‰æ›ç­–ç•¥ã€‚"})]}),h.length>0&&(0,d.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase tracking-wide",children:[(0,d.jsx)(xM,{className:"w-4 h-4 text-amber-600"}),"éœ€è¦æ›¿æ› (",h.length,")"]}),(0,d.jsxs)("button",{onClick:()=>y(!0),className:"p-1.5 rounded-lg bg-amber-100 text-amber-700 hover:bg-amber-200 transition flex items-center gap-1 text-xs font-semibold",title:"ç·¨è¼¯æ›¿æ›è¦å‰‡",children:[(0,d.jsx)(ax,{className:"w-3.5 h-3.5"}),"ç·¨è¼¯"]})]}),(0,d.jsx)("ul",{className:"mt-2 space-y-2",children:h.map((a,b)=>(0,d.jsxs)("li",{className:`text-sm rounded p-2 border ${a.replacement?"bg-amber-50/50 border-amber-100":"bg-red-50/50 border-red-100"}`,children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,d.jsx)("span",{className:"text-red-500 line-through text-xs",children:a.original}),(0,d.jsx)("span",{className:"text-gray-400",children:"â†’"}),a.replacement?(0,d.jsx)("span",{className:"text-emerald-600 font-semibold text-xs",children:a.replacement}):(0,d.jsx)("span",{className:"text-red-500 font-semibold italic text-xs",children:"(åˆªé™¤)"})]}),a.reason&&(0,d.jsx)("p",{className:"text-[10px] text-gray-500 mt-1",children:a.reason})]},b))})]})]})}),(0,d.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-white",children:0===r.length?(0,d.jsx)("div",{className:"h-full flex items-center justify-center text-sm text-gray-500",children:"å°šæœªç”¢ç”Ÿæ®µè½è¨ˆåŠƒï¼Œè«‹å…ˆåŸ·è¡Œåˆ†æžã€‚"}):(0,d.jsx)("div",{className:"p-4 space-y-3",children:I.map(a=>{var b;let c,e,f=t.has(a.idx);return(0,d.jsxs)("div",{className:"border border-gray-100 rounded-xl p-4 shadow-[0_2px_6px_rgba(0,0,0,0.03)] bg-white hover:shadow-md transition",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsxs)("label",{className:"flex items-start gap-2 cursor-pointer select-none",children:[(0,d.jsx)("input",{type:"checkbox",className:"mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:a.selected,onChange:b=>s(c=>c.map((c,d)=>d===a.idx?{...c,selected:b.target.checked}:c))}),(0,d.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center font-bold",children:a.idx+1})]}),(0,d.jsx)("div",{className:"flex-1",children:f?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{value:a.data.title,onChange:b=>s(c=>c.map((c,d)=>d===a.idx?{...c,title:b.target.value}:c)),className:"text-base font-bold text-gray-900 leading-tight break-words w-full bg-white border border-gray-200 rounded-lg px-2 py-1"}),(0,d.jsx)("input",{value:a.data.coreQuestion||"",onChange:b=>s(c=>c.map((c,d)=>d===a.idx?{...c,coreQuestion:b.target.value}:c)),placeholder:"Core question (å¯ç©ºç™½)",className:"mt-1 text-xs text-gray-600 w-full bg-white border border-gray-200 rounded-lg px-2 py-1"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h4",{className:"text-base font-bold text-gray-900 leading-tight break-words",children:a.data.title}),a.data.coreQuestion?(0,d.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5 break-words",children:["Q: ",a.data.coreQuestion]}):null]})})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[a.data.isChecklist&&(0,d.jsxs)("span",{className:"px-2 py-0.5 text-[11px] font-bold rounded-full border bg-teal-50 text-teal-700 border-teal-100 flex items-center gap-1",children:[(0,d.jsx)(xY,{className:"w-3 h-3"}),"Checklist"]}),(b=a.data.difficulty,e=(c={easy:{label:"Easy",bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-100"},medium:{label:"Medium",bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-100"},unclear:{label:"Unclear",bg:"bg-rose-50",text:"text-rose-700",border:"border-rose-100"}})[b||"easy"]||c.easy,(0,d.jsx)("span",{className:`px-2 py-0.5 text-[11px] font-bold rounded-full border ${e.bg} ${e.text} ${e.border}`,children:e.label})),(0,d.jsxs)("button",{onClick:()=>u(b=>{let c=new Set(b);return c.has(a.idx)?c.delete(a.idx):c.add(a.idx),c}),className:"text-xs font-semibold text-blue-700 hover:underline flex items-center gap-1",children:[(0,d.jsx)(y3,{className:"w-3.5 h-3.5"}),f?"å®Œæˆ":"ç·¨è¼¯"]})]})]}),(0,d.jsxs)("div",{className:"mt-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-blue-700 uppercase tracking-wide",children:[(0,d.jsx)(ao,{className:"w-4 h-4"}),"Narrative Plan"]}),f?(0,d.jsx)("textarea",{value:r[a.idx]?.narrativeText||"",onChange:b=>s(c=>c.map((c,d)=>d===a.idx?{...c,narrativeText:b.target.value}:c)),className:"mt-2 w-full border border-blue-100 rounded-lg p-3 text-sm text-gray-700 bg-blue-50/40 focus:outline-none focus:ring-2 focus:ring-blue-200",rows:3,placeholder:"æ¯è¡Œä¸€å€‹é‡é»ž"}):(0,d.jsxs)("ul",{className:"mt-2 space-y-1.5",children:[(a.data.narrativePlan||[]).map((a,b)=>(0,d.jsxs)("li",{className:"text-sm text-gray-700 leading-snug flex items-start gap-2",children:[(0,d.jsx)("span",{className:"text-blue-400 mt-1",children:"â€¢"}),(0,d.jsx)("span",{className:"break-words",children:a})]},b)),0===(a.data.narrativePlan||[]).length&&(0,d.jsx)("li",{className:"text-sm text-gray-400",children:"æœªæä¾› narrative plan"})]})]}),(0,d.jsxs)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,d.jsxs)("div",{className:"border border-gray-100 rounded-lg p-3 bg-gray-50/70",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-600 uppercase tracking-wide",children:[(0,d.jsx)(yy,{className:"w-4 h-4 text-gray-500"}),"Key Facts"]}),f?(0,d.jsx)("textarea",{value:r[a.idx]?.keyFactsText||"",onChange:b=>s(c=>c.map((c,d)=>d===a.idx?{...c,keyFactsText:b.target.value}:c)),className:"mt-2 w-full border border-gray-200 rounded-lg p-2 text-sm text-gray-700 bg-white focus:outline-none focus:ring-2 focus:ring-gray-200 max-h-40 overflow-y-auto",rows:4,placeholder:"æ¯è¡Œä¸€æ¢ key fact"}):(0,d.jsxs)("ul",{className:"mt-2 space-y-1 max-h-40 overflow-y-auto pr-1 custom-scrollbar",children:[(a.data.keyFacts||[]).map((a,b)=>(0,d.jsxs)("li",{className:"text-sm text-gray-700 flex items-start gap-2 leading-snug",children:[(0,d.jsx)("span",{className:"text-gray-400 mt-1",children:"â€¢"}),(0,d.jsx)("span",{className:"break-words",children:a})]},b)),0===(a.data.keyFacts||[]).length&&(0,d.jsx)("li",{className:"text-sm text-gray-400",children:"æœªæä¾› key facts"})]})]}),(0,d.jsxs)("div",{className:"border border-purple-100 rounded-lg p-3 bg-purple-50/60",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-700 uppercase tracking-wide",children:[(0,d.jsx)(y2,{className:"w-4 h-4"}),"USP / è³£é»ž"]}),f?(0,d.jsx)("textarea",{value:r[a.idx]?.uspText||"",onChange:b=>s(c=>c.map((c,d)=>d===a.idx?{...c,uspText:b.target.value}:c)),className:"mt-2 w-full border border-purple-100 rounded-lg p-2 text-sm text-purple-800 bg-white focus:outline-none focus:ring-2 focus:ring-purple-200",rows:3,placeholder:"æ¯è¡Œä¸€å€‹ USP"}):(0,d.jsxs)("ul",{className:"mt-2 space-y-1",children:[(a.data.uspNotes||[]).map((a,b)=>(0,d.jsxs)("li",{className:"text-sm text-purple-700 flex items-start gap-2 leading-snug",children:[(0,d.jsx)("span",{className:"text-purple-300 mt-1",children:"â€¢"}),(0,d.jsx)("span",{className:"break-words",children:a})]},b)),0===(a.data.uspNotes||[]).length&&(0,d.jsx)("li",{className:"text-sm text-purple-400",children:"æœªæä¾› USP"})]})]})]}),(0,d.jsxs)("div",{className:"mt-3 p-3 rounded-lg border border-amber-100 bg-amber-50/60",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-amber-700 uppercase tracking-wide",children:[(0,d.jsx)(xO,{className:"w-4 h-4"}),"å»ºè­°å­æ¨™é¡Œ (H3)"]}),f?(0,d.jsx)("textarea",{value:r[a.idx]?.subheadingsText||"",onChange:b=>s(c=>c.map((c,d)=>d===a.idx?{...c,subheadingsText:b.target.value}:c)),className:"mt-2 w-full border border-amber-100 rounded-lg p-2 text-sm text-amber-800 bg-white focus:outline-none focus:ring-2 focus:ring-amber-200",rows:2,placeholder:"æ¯è¡Œä¸€å€‹ H3 å»ºè­°"}):(0,d.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(a.data.subheadings||[]).map((a,b)=>(0,d.jsx)("span",{className:"text-xs px-2.5 py-1 rounded-full bg-white border border-amber-200 text-amber-700 break-words",children:a},b)),0===(a.data.subheadings||[]).length&&(0,d.jsx)("span",{className:"text-xs text-amber-500",children:"æœªæä¾› H3 å»ºè­°"})]})]}),a.data.suppress&&a.data.suppress.length>0&&(0,d.jsxs)("div",{className:"mt-3 p-3 rounded-lg border border-rose-100 bg-rose-50/60",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-rose-700 uppercase tracking-wide",children:[(0,d.jsx)(y4,{className:"w-4 h-4"}),"ä¸æ‡‰æœ‰ (Suppress)"]}),(0,d.jsx)("ul",{className:"mt-2 space-y-1",children:a.data.suppress.map((a,b)=>(0,d.jsxs)("li",{className:"text-sm text-rose-700 flex items-start gap-2 leading-snug",children:[(0,d.jsx)("span",{className:"text-rose-300 mt-1",children:"-"}),(0,d.jsx)("span",{className:"break-words",children:a})]},b))})]})]},`${a.data.title}-${a.idx}`)})})})]})]}),(0,d.jsx)(y6,{open:x,onClose:()=>y(!1),items:h,onSave:a=>{q&&q(a),y(!1)}})]}):null},y9=j("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),za=j("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),zb=j("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),zc=({open:a,onClose:b})=>{let{modelFlash:c,modelImage:e,keywordCharDivisor:f,minKeywords:g,maxKeywords:h,setModelFlash:i,setModelImage:j,setKeywordCharDivisor:k,setMinKeywords:l,setMaxKeywords:m,resetSettings:n}=D();return a?(0,d.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-md",onClick:b}),(0,d.jsxs)("div",{className:"relative bg-white w-full max-w-lg rounded-3xl shadow-2xl border border-gray-100 flex flex-col overflow-hidden animate-in fade-in zoom-in duration-200",children:[(0,d.jsxs)("div",{className:"px-8 py-6 border-b border-gray-50 bg-gradient-to-br from-gray-50 to-white flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-gray-900 text-white flex items-center justify-center shadow-xl shadow-gray-200",children:(0,d.jsx)(r,{className:"w-6 h-6"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-xl font-black text-gray-900 tracking-tight",children:"System Settings"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Configure models and magic numbers"})]})]}),(0,d.jsx)("button",{onClick:b,className:"p-2 rounded-xl hover:bg-gray-100 text-gray-400 hover:text-gray-900 transition-all",children:(0,d.jsx)(mc,{className:"w-6 h-6"})})]}),(0,d.jsxs)("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:[(0,d.jsxs)("section",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-gray-900",children:[(0,d.jsx)(y9,{className:"w-5 h-5 text-blue-600"}),(0,d.jsx)("h4",{className:"font-bold text-sm uppercase tracking-widest",children:"AI Core Models"})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-xs font-bold text-gray-500 ml-1",children:"Text Analysis & Writing (FLASH)"}),(0,d.jsx)("input",{type:"text",value:c,onChange:a=>i(a.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-2xl text-sm font-mono focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all",placeholder:"e.g. gemini-3-flash-preview"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-xs font-bold text-gray-500 ml-1",children:"Vision & Image Understanding"}),(0,d.jsx)("input",{type:"text",value:e,onChange:a=>j(a.target.value),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-2xl text-sm font-mono focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all",placeholder:"e.g. google/gemini-2.5-flash-image"})]})]})]}),(0,d.jsxs)("section",{className:"space-y-4 pt-4 border-t border-gray-50",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-gray-900",children:[(0,d.jsx)(yz,{className:"w-5 h-5 text-emerald-600"}),(0,d.jsx)("h4",{className:"font-bold text-sm uppercase tracking-widest",children:"Keyword Logic (NLP)"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,d.jsx)("label",{className:"text-xs font-bold text-gray-500 ml-1",children:"Char count divisor (1 keyword per X chars)"}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("input",{type:"range",min:"50",max:"1000",step:"50",value:f,onChange:a=>k(parseInt(a.target.value)),className:"flex-1 accent-gray-900"}),(0,d.jsx)("span",{className:"w-12 text-center font-bold text-gray-900 bg-gray-50 py-1 rounded-lg border border-gray-100",children:f})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-xs font-bold text-gray-500 ml-1",children:"Min Keywords"}),(0,d.jsx)("input",{type:"number",value:g,onChange:a=>l(parseInt(a.target.value)),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-xs font-bold text-gray-500 ml-1",children:"Max Keywords"}),(0,d.jsx)("input",{type:"number",value:h,onChange:a=>m(parseInt(a.target.value)),className:"w-full px-4 py-3 bg-gray-50 border border-gray-100 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all"})]})]}),(0,d.jsx)("p",{className:"text-[10px] text-gray-400 italic leading-tight",children:"Calculation: limit = clamp(min, max, floor(content_length / divisor))"})]})]}),(0,d.jsxs)("div",{className:"px-8 py-6 bg-gray-50/50 border-t border-gray-50 flex items-center justify-between",children:[(0,d.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 text-xs font-bold text-gray-400 hover:text-red-500 transition-colors",children:[(0,d.jsx)(za,{className:"w-3.5 h-3.5"}),"Reset Defaults"]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("button",{onClick:b,className:"px-6 py-2.5 text-sm font-bold text-gray-600 hover:text-gray-900 transition-colors",children:"Cancel"}),(0,d.jsxs)("button",{onClick:b,className:"flex items-center gap-2 px-8 py-2.5 bg-gray-900 text-white text-sm font-bold rounded-2xl shadow-xl shadow-gray-200 hover:shadow-gray-300 active:scale-95 transition-all",children:[(0,d.jsx)(zb,{className:"w-4 h-4"}),"Save Config"]})]})]})]})]}):null};function zd(){let a,b,c,f,g,h=(0,e.useMemo)(()=>"8549a21a0ae3c2595e3736d2f90ac96ec0d2a390d6eacac74fa2c6ae1c40ea4f",[]),i=D(),j=ye(),k=yf(),{isUnlocked:l,unlock:m}=function(){let[a,b]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{},[]),{isUnlocked:a,unlock:()=>{b(!0)}}}(),{structurePoints:n}=function(){let a=ye(),b=yf(),{contentScore:c,setContentScore:d}=D(),f=(0,e.useMemo)(()=>{let a=b.refAnalysis?.structure||[],c=new Set,d=new Set,e=Array.isArray(b.refAnalysis?.keyInformationPoints)?b.refAnalysis?.keyInformationPoints:[],f=Array.isArray(b.refAnalysis?.brandExclusivePoints)?b.refAnalysis?.brandExclusivePoints:[];return e.forEach(a=>{a&&c.add(a)}),f.forEach(a=>{a&&d.add(a)}),a.forEach(a=>{(Array.isArray(a?.keyFacts)?a.keyFacts:[]).forEach(a=>{a&&c.add(a)}),(Array.isArray(a?.uspNotes)?a.uspNotes:[]).forEach(a=>{a&&d.add(a)})}),{general:Array.from(c),brand:Array.from(d)}},[b.refAnalysis]);return(0,e.useEffect)(()=>{if(!a.content||"idle"===a.status){let a={value:0,label:"Start Writing",color:"text-gray-300"};c.value!==a.value&&d(a);return}let e=0,g=0;if(b.keywordPlans.length>0){let c=(a.content||"").toLowerCase();e+=50*(b.keywordPlans.filter(a=>a.word&&c.includes(a.word.toLowerCase())).length/b.keywordPlans.length),g++}let h=f.general.length+f.brand.length;h>0?(e+=50*(b.coveredPoints.length/h),g++):e+=50,0===b.keywordPlans.length&&(e*=2);let i="Needs Work",j="text-red-500";(e=Math.min(100,Math.round(e)))>=80?(i="Excellent",j="text-emerald-500"):e>=50&&(i="Good",j="text-amber-500");let k={value:e,label:i,color:j};(c.value!==k.value||c.label!==k.label)&&d(k)},[a.content,b.keywordPlans,b.coveredPoints,b.refAnalysis,f,a.status,c.value,c.label,d]),{structurePoints:f}}(),{generate:o,startWriting:p,stop:q}=(a=kQ({mutationFn:a=>yZ(a)}),b=kQ({mutationFn:()=>y$()}),c=(0,e.useCallback)(async b=>{let c=ye.getState(),d=!!c.analysisResults,e=(c.content||"").trim().length>0;(!d&&!e||window.confirm("å·²ç¶“æœ‰åˆ†æžçµæžœæˆ–å…§å®¹ï¼Œé‡æ–°åˆ†æžæœƒè¦†è“‹ç›®å‰çš„è³‡æ–™ï¼Œç¢ºå®šè¦ç¹¼çºŒå—Žï¼Ÿ"))&&await a.mutateAsync(b)},[a]),{generate:c,startWriting:(0,e.useCallback)(async()=>{await b.mutateAsync()},[b]),stop:(0,e.useCallback)(()=>{ye.getState().stopGeneration()},[]),status:a.status});f=ye(),g=yf(),(0,e.useRef)(!1),(0,e.useRef)(!1),(0,e.useEffect)(()=>{},[g,f]),(0,e.useEffect)(()=>{},[g,f]);let[r,s]=(0,e.useState)(!1),[t,u]=(0,e.useState)(!1);(0,e.useEffect)(()=>{"analyzing"!==j.status||i.showSidebar||i.setShowSidebar(!0)},[j.status,i]),(0,e.useEffect)(()=>{let a=!!k.refAnalysis?.structure?.length;"analysis_ready"===j.status&&a&&!i.showPlanModal&&"idle"===j.generationStep&&i.setShowPlanModal(!0)},[j.status,j.generationStep,k.refAnalysis?.structure,i]);let v=async a=>{if(i.setActiveProfile(a),k.setTargetAudience(a.targetAudience),k.setBrandKnowledge(a.brandKnowledge||""),a.productRawText){let b=await $(a.productRawText);k.setActiveProductBrief(b.data)}},w=async()=>{let a=k.refAnalysis;if(!a)return;let b=[...(a.competitorBrands||[]).map(a=>({text:a,type:"brand",region:"OTHER"})),...(a.competitorProducts||[]).map(a=>({text:a,type:"service",region:"OTHER"}))];if(0!==b.length){s(!0);try{let c=await y0(b,k.targetAudience);if(i.addCost(c.cost.totalCost,c.usage.totalTokens),c.mappings.length>0){let b=a.regionalReplacements||[],d=c.mappings.map(a=>({original:a.original,replacement:a.regionEquivalent,reason:a.context})),e=[...b];d.forEach(a=>{e.some(b=>b.original===a.original)||e.push(a)}),k.setRefAnalysis({...a,regionalReplacements:e})}}catch(a){console.error("[App] Search local alternatives failed",a)}finally{s(!1)}}};return l?(0,d.jsxs)("div",{className:"flex flex-col h-screen overflow-hidden",children:[(0,d.jsx)(E,{sessionCost:i.sessionCost,sessionTokens:i.sessionTokens,showInput:i.showInput,showSidebar:i.showSidebar,onToggleInput:i.toggleInput,onToggleSidebar:i.toggleSidebar,onToggleChangelog:()=>i.setShowChangelog(!0),onToggleSettings:()=>i.setShowSettings(!0),contentScore:i.contentScore,displayScale:i.displayScale,onDisplayScaleChange:i.setDisplayScale}),(0,d.jsx)(yJ,{isOpen:i.showChangelog,onClose:()=>i.setShowChangelog(!1)}),(0,d.jsx)(zc,{open:i.showSettings,onClose:()=>i.setShowSettings(!1)}),(0,d.jsxs)("main",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden h-[calc(100vh-64px)] min-h-0 bg-gray-100 p-4 gap-4",children:[i.showInput&&(0,d.jsx)("section",{className:"w-full lg:w-[380px] bg-white rounded-2xl shadow-sm border border-gray-200/60 flex flex-col overflow-auto z-20 transition-all duration-300",children:(0,d.jsx)(k3,{onGenerate:o,onGenerateSections:p,isGenerating:"analyzing"===j.status||"streaming"===j.status,isWriting:"streaming"===j.status,canGenerateSections:"analysis_ready"===j.status,currentStep:j.generationStep,onAddCost:(a,b)=>i.addCost(a.totalCost,b.totalTokens),savedProfiles:i.savedProfiles,setSavedProfiles:i.setSavedProfiles,activeProfile:i.activeProfile,onSetActiveProfile:i.setActiveProfile,inputType:i.inputType,setInputType:i.setInputType,brandKnowledge:k.brandKnowledge,onShowPlan:()=>i.setShowPlanModal(!0),hasPlan:!!k.refAnalysis?.structure?.length})}),(0,d.jsx)("section",{className:"flex-1 bg-white rounded-2xl shadow-sm border border-gray-200/60 flex flex-col min-h-0 relative overflow-hidden",children:(0,d.jsx)(yu,{content:j.content,status:j.status,error:j.error,generationStep:j.generationStep,coveredPoints:k.coveredPoints,targetAudience:k.targetAudience,scrapedImages:k.scrapedImages,visualStyle:k.visualStyle,onRemoveScrapedImage:a=>{let b=a.id||a.url||a.altText;if(!b)return;let c=k.scrapedImages.map((a,c)=>(a.id||a.url||a.altText||`${c}`)!==b?a:{...a,ignored:!a.ignored});k.setScrapedImages(c)},onTogglePoint:a=>{k.setCoveredPoints(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},onAddCost:(a,b)=>i.addCost(a.totalCost,b.totalTokens),savedProfiles:i.savedProfiles,onLoadProfile:v,onRequestUrlMode:()=>i.setInputType("url"),productBrief:k.activeProductBrief,displayScale:i.displayScale,articleTitle:k.articleTitle,onTitleChange:k.setArticleTitle,outlineSections:k.refAnalysis?.structure?.map(a=>a.title)||[],keyInformationPoints:n.general,brandExclusivePoints:n.brand})}),i.showSidebar&&(0,d.jsx)("section",{className:"hidden lg:flex w-[380px] bg-white rounded-2xl shadow-sm border border-gray-200/60 flex-col overflow-auto z-10 transition-all duration-300",children:(0,d.jsx)(yG,{keywordPlans:k.keywordPlans,referenceAnalysis:k.refAnalysis,authorityAnalysis:k.authAnalysis,productMapping:k.productMapping,productBrief:k.activeProductBrief,headingOptimizations:k.headingOptimizations,targetAudience:k.targetAudience,languageInstruction:k.languageInstruction,isLoading:"analyzing"===j.status,status:j.status,onStop:q,brandKnowledge:k.brandKnowledge,setBrandKnowledge:k.setBrandKnowledge,displayScale:i.displayScale,onSearchLocalAlternatives:w,isSearchingAlternatives:r})})]}),(0,d.jsx)(y8,{open:i.showPlanModal,onClose:()=>i.setShowPlanModal(!1),sections:k.refAnalysis?.structure||[],generalPlan:k.refAnalysis?.generalPlan,conversionPlan:k.refAnalysis?.conversionPlan,regionalReplacements:k.refAnalysis?.regionalReplacements,localizedSections:k.localizedRefAnalysis?.structure,localizedGeneralPlan:k.localizedRefAnalysis?.generalPlan,localizedConversionPlan:k.localizedRefAnalysis?.conversionPlan,onSavePlan:a=>{let b=k.refAnalysis;b&&k.setRefAnalysis({...b,structure:a})},onLocalizeAll:async()=>{let a=k.refAnalysis;if(a&&a.regionalReplacements?.length){u(!0);try{let b=await y1({generalPlan:a.generalPlan||[],conversionPlan:a.conversionPlan||[],sections:a.structure.map(a=>({title:a.title,narrativePlan:a.narrativePlan,keyFacts:a.keyFacts,uspNotes:a.uspNotes,subheadings:a.subheadings}))},a.regionalReplacements,k.targetAudience);i.addCost(b.cost.totalCost,b.usage.totalTokens);let c=a.structure.map((a,c)=>({...a,title:b.localizedSections[c]?.title||a.title,narrativePlan:b.localizedSections[c]?.narrativePlan||a.narrativePlan,keyFacts:b.localizedSections[c]?.keyFacts||a.keyFacts,uspNotes:b.localizedSections[c]?.uspNotes||a.uspNotes,subheadings:b.localizedSections[c]?.subheadings||a.subheadings}));k.setLocalizedRefAnalysis({...a,structure:c,generalPlan:b.localizedGeneralPlan,conversionPlan:b.localizedConversionPlan})}catch(a){console.error("[App] AI Plan localization failed",a)}finally{u(!1)}}},isLocalizing:t,onStartWriting:a=>{let b=k.refAnalysis;b&&k.setRefAnalysis({...b,structure:a}),i.setShowPlanModal(!1),p()},onSaveReplacements:a=>{let b=k.refAnalysis;b&&k.setRefAnalysis({...b,regionalReplacements:a.filter(a=>"keep"!==a.action).map(a=>({original:a.original,replacement:"delete"===a.action?"":a.customReplacement||a.replacement,reason:a.reason}))})}})]}):(0,d.jsx)(yL,{passwordHash:h,onUnlock:m})}a.s(["default",()=>zd],40777)}];

//# sourceMappingURL=src_app_page_tsx_a7111f3e._.js.map